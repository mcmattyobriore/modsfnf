/*
 howler.js v2.2.4 | (c) 2013-2020, James Simpson of GoldFire Studios | MIT License | howlerjs.com  Spatial Plugin  @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var $jscomp = $jscomp || {};
$jscomp.scope = {};
$jscomp.arrayIteratorImpl = function (qa) {
  var x = 0;
  return function () {
    if (x < qa.length) {
      return {
        done: false,
        value: qa[x++]
      };
    } else {
      return {
        done: true
      };
    }
  };
};
$jscomp.arrayIterator = function (qa) {
  return {
    next: $jscomp.arrayIteratorImpl(qa)
  };
};
$jscomp.ASSUME_ES5 = false;
$jscomp.ASSUME_NO_NATIVE_MAP = false;
$jscomp.ASSUME_NO_NATIVE_SET = false;
$jscomp.SIMPLE_FROUND_POLYFILL = false;
$jscomp.defineProperty = $jscomp.ASSUME_ES5 || typeof Object.defineProperties == "function" ? Object.defineProperty : function (qa, x, F) {
  if (qa != Array.prototype && qa != Object.prototype) {
    qa[x] = F.value;
  }
};
$jscomp.getGlobal = function (qa) {
  qa = [typeof window == "object" && window, typeof self == "object" && self, typeof global == "object" && global, qa];
  for (var x = 0; x < qa.length; ++x) {
    var F = qa[x];
    if (F && F.Math == Math) {
      return F;
    }
  }
  throw Error("Cannot find global object");
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function () {
  $jscomp.initSymbol = function () {};
  $jscomp.global.Symbol ||= $jscomp.Symbol;
};
$jscomp.SymbolClass = function (qa, x) {
  this.$jscomp$symbol$id_ = qa;
  $jscomp.defineProperty(this, "description", {
    configurable: true,
    writable: true,
    value: x
  });
};
$jscomp.SymbolClass.prototype.toString = function () {
  return this.$jscomp$symbol$id_;
};
$jscomp.Symbol = function () {
  function qa(F) {
    if (this instanceof qa) {
      throw new TypeError("Symbol is not a constructor");
    }
    return new $jscomp.SymbolClass($jscomp.SYMBOL_PREFIX + (F || "") + "_" + x++, F);
  }
  var x = 0;
  return qa;
}();
$jscomp.initSymbolIterator = function () {
  $jscomp.initSymbol();
  var qa = $jscomp.global.Symbol.iterator;
  qa ||= $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("Symbol.iterator");
  if (typeof Array.prototype[qa] != "function") {
    $jscomp.defineProperty(Array.prototype, qa, {
      configurable: true,
      writable: true,
      value: function () {
        return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this));
      }
    });
  }
  $jscomp.initSymbolIterator = function () {};
};
$jscomp.initSymbolAsyncIterator = function () {
  $jscomp.initSymbol();
  var qa = $jscomp.global.Symbol.asyncIterator;
  qa ||= $jscomp.global.Symbol.asyncIterator = $jscomp.global.Symbol("Symbol.asyncIterator");
  $jscomp.initSymbolAsyncIterator = function () {};
};
$jscomp.iteratorPrototype = function (qa) {
  $jscomp.initSymbolIterator();
  qa = {
    next: qa
  };
  qa[$jscomp.global.Symbol.iterator] = function () {
    return this;
  };
  return qa;
};
$jscomp.iteratorFromArray = function (qa, x) {
  $jscomp.initSymbolIterator();
  if (qa instanceof String) {
    qa += "";
  }
  var F = 0;
  var H = {
    next: function () {
      if (F < qa.length) {
        var M = F++;
        return {
          value: x(M, qa[M]),
          done: false
        };
      }
      H.next = function () {
        return {
          done: true,
          value: undefined
        };
      };
      return H.next();
    }
  };
  H[Symbol.iterator] = function () {
    return H;
  };
  return H;
};
$jscomp.polyfill = function (qa, x, F, H) {
  if (x) {
    F = $jscomp.global;
    qa = qa.split(".");
    for (H = 0; H < qa.length - 1; H++) {
      var M = qa[H];
      if (!(M in F)) {
        F[M] = {};
      }
      F = F[M];
    }
    qa = qa[qa.length - 1];
    H = F[qa];
    x = x(H);
    if (x != H && x != null) {
      $jscomp.defineProperty(F, qa, {
        configurable: true,
        writable: true,
        value: x
      });
    }
  }
};
$jscomp.polyfill("Array.prototype.keys", function (qa) {
  if (qa) {
    return qa;
  } else {
    return function () {
      return $jscomp.iteratorFromArray(this, function (x) {
        return x;
      });
    };
  }
}, "es6", "es3");
$jscomp.checkStringArgs = function (qa, x, F) {
  if (qa == null) {
    throw new TypeError("The 'this' value for String.prototype." + F + " must not be null or undefined");
  }
  if (x instanceof RegExp) {
    throw new TypeError("First argument to String.prototype." + F + " must not be a regular expression");
  }
  return qa + "";
};
$jscomp.polyfill("String.prototype.endsWith", function (qa) {
  if (qa) {
    return qa;
  } else {
    return function (x, F) {
      var H = $jscomp.checkStringArgs(this, x, "endsWith");
      x += "";
      if (F === undefined) {
        F = H.length;
      }
      F = Math.max(0, Math.min(F | 0, H.length));
      for (var M = x.length; M > 0 && F > 0;) {
        if (H[--F] != x[--M]) {
          return false;
        }
      }
      return M <= 0;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("String.fromCodePoint", function (qa) {
  if (qa) {
    return qa;
  } else {
    return function (x) {
      var F = "";
      for (var H = 0; H < arguments.length; H++) {
        var M = Number(arguments[H]);
        if (M < 0 || M > 1114111 || M !== Math.floor(M)) {
          throw new RangeError("invalid_code_point " + M);
        }
        if (M <= 65535) {
          F += String.fromCharCode(M);
        } else {
          M -= 65536;
          F += String.fromCharCode(M >>> 10 & 1023 | 55296);
          F += String.fromCharCode(M & 1023 | 56320);
        }
      }
      return F;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("Array.prototype.fill", function (qa) {
  if (qa) {
    return qa;
  } else {
    return function (x, F, H) {
      var M = this.length || 0;
      if (F < 0) {
        F = Math.max(0, M + F);
      }
      if (H == null || H > M) {
        H = M;
      }
      H = Number(H);
      if (H < 0) {
        H = Math.max(0, M + H);
      }
      for (F = Number(F || 0); F < H; F++) {
        this[F] = x;
      }
      return this;
    };
  }
}, "es6", "es3");
$jscomp.polyfill("String.prototype.startsWith", function (qa) {
  if (qa) {
    return qa;
  } else {
    return function (x, F) {
      var H = $jscomp.checkStringArgs(this, x, "startsWith");
      x += "";
      var M = H.length;
      var fa = x.length;
      F = Math.max(0, Math.min(F | 0, H.length));
      for (var q = 0; q < fa && F < M;) {
        if (H[F++] != x[q++]) {
          return false;
        }
      }
      return q >= fa;
    };
  }
}, "es6", "es3");
(function (qa, x) {
  qa.lime = qa.lime || {};
  qa.lime.$scripts = qa.lime.$scripts || {};
  qa.lime.$scripts.PsychEngine = function (x, H) {
    (function (x, F) {
      function q(a, b) {
        a = Object.create(a);
        for (var c in b) {
          a[c] = b[c];
        }
        if (b.toString !== Object.prototype.toString) {
          a.toString = b.toString;
        }
        return a;
      }
      function M(a) {
        if (a instanceof Array) {
          return new tf(a);
        } else {
          return a.iterator();
        }
      }
      function n(a, b) {
        if (b == null) {
          return null;
        }
        if (b.__id__ == null) {
          b.__id__ = F.$haxeUID++;
        }
        var c;
        if (a.hx__closures__ == null) {
          a.hx__closures__ = {};
        } else {
          c = a.hx__closures__[b.__id__];
        }
        if (c == null) {
          c = b.bind(a);
          a.hx__closures__[b.__id__] = c;
        }
        return c;
      }
      x.lime = x.lime || {};
      var h = {};
      function p() {
        return wa.__string_rec(this, "");
      }
      var w = w || {};
      var r;
      function Ea() {}
      h["lime.app.IModule"] = Ea;
      Ea.__name__ = "lime.app.IModule";
      Ea.__isInterface__ = true;
      Ea.prototype = {
        __class__: Ea
      };
      function la() {
        this.onExit = new ih();
      }
      h["lime.app.Module"] = la;
      la.__name__ = "lime.app.Module";
      la.__interfaces__ = [Ea];
      la.prototype = {
        __registerLimeModule: function (a) {},
        __unregisterLimeModule: function (a) {},
        __class__: la
      };
      function S(a) {
        this.gameDeviceCache = new Ac();
        this.parent = a;
        this.nextUpdate = this.lastUpdate = this.currentUpdate = 0;
        this.framePeriod = -1;
        dg.init();
        this.accelerometer = Ie.registerSensor(Zo.ACCELEROMETER, 0);
      }
      h["lime._internal.backend.html5.HTML5Application"] = S;
      S.__name__ = "lime._internal.backend.html5.HTML5Application";
      S.prototype = {
        convertKeyCode: function (a) {
          if (a >= 65 && a <= 90) {
            return a + 32;
          }
          switch (a) {
            case 12:
              return 1073741980;
            case 16:
              return 1073742049;
            case 17:
              return 1073742048;
            case 18:
              return 1073742050;
            case 19:
              return 1073741896;
            case 20:
              return 1073741881;
            case 33:
              return 1073741899;
            case 34:
              return 1073741902;
            case 35:
              return 1073741901;
            case 36:
              return 1073741898;
            case 37:
              return 1073741904;
            case 38:
              return 1073741906;
            case 39:
              return 1073741903;
            case 40:
              return 1073741905;
            case 41:
              return 1073741943;
            case 43:
              return 1073741940;
            case 44:
              return 1073741894;
            case 45:
              return 1073741897;
            case 46:
              return 127;
            case 91:
              return 1073742051;
            case 92:
              return 1073742055;
            case 93:
              return 1073742055;
            case 95:
              return 1073742106;
            case 96:
              return 1073741922;
            case 97:
              return 1073741913;
            case 98:
              return 1073741914;
            case 99:
              return 1073741915;
            case 100:
              return 1073741916;
            case 101:
              return 1073741917;
            case 102:
              return 1073741918;
            case 103:
              return 1073741919;
            case 104:
              return 1073741920;
            case 105:
              return 1073741921;
            case 106:
              return 1073741909;
            case 107:
              return 1073741911;
            case 108:
              return 1073741923;
            case 109:
              return 1073741910;
            case 110:
              return 1073741923;
            case 111:
              return 1073741908;
            case 112:
              return 1073741882;
            case 113:
              return 1073741883;
            case 114:
              return 1073741884;
            case 115:
              return 1073741885;
            case 116:
              return 1073741886;
            case 117:
              return 1073741887;
            case 118:
              return 1073741888;
            case 119:
              return 1073741889;
            case 120:
              return 1073741890;
            case 121:
              return 1073741891;
            case 122:
              return 1073741892;
            case 123:
              return 1073741893;
            case 124:
              return 1073741928;
            case 125:
              return 1073741929;
            case 126:
              return 1073741930;
            case 127:
              return 1073741931;
            case 128:
              return 1073741932;
            case 129:
              return 1073741933;
            case 130:
              return 1073741934;
            case 131:
              return 1073741935;
            case 132:
              return 1073741936;
            case 133:
              return 1073741937;
            case 134:
              return 1073741938;
            case 135:
              return 1073741939;
            case 144:
              return 1073741907;
            case 145:
              return 1073741895;
            case 160:
              return 94;
            case 161:
              return 33;
            case 163:
              return 35;
            case 164:
              return 36;
            case 166:
              return 1073742094;
            case 167:
              return 1073742095;
            case 168:
              return 1073742097;
            case 169:
              return 41;
            case 170:
              return 42;
            case 171:
              return 96;
            case 172:
              return 1073741898;
            case 173:
              return 45;
            case 174:
              return 1073741953;
            case 175:
              return 1073741952;
            case 176:
              return 1073742082;
            case 177:
              return 1073742083;
            case 178:
              return 1073742084;
            case 179:
              return 1073742085;
            case 180:
              return 1073742089;
            case 181:
              return 1073742086;
            case 182:
              return 1073741953;
            case 183:
              return 1073741952;
            case 186:
              return 59;
            case 187:
              return 61;
            case 188:
              return 44;
            case 189:
              return 45;
            case 190:
              return 46;
            case 191:
              return 47;
            case 192:
              return 96;
            case 193:
              return 63;
            case 194:
              return 1073741923;
            case 219:
              return 91;
            case 220:
              return 92;
            case 221:
              return 93;
            case 222:
              return 39;
            case 223:
              return 96;
            case 224:
              return 1073742051;
            case 226:
              return 92;
          }
          return a;
        },
        exec: function () {
          window.addEventListener("keydown", n(this, this.handleKeyEvent), false);
          window.addEventListener("keyup", n(this, this.handleKeyEvent), false);
          window.addEventListener("focus", n(this, this.handleWindowEvent), false);
          window.addEventListener("blur", n(this, this.handleWindowEvent), false);
          window.addEventListener("resize", n(this, this.handleWindowEvent), false);
          window.addEventListener("beforeunload", n(this, this.handleWindowEvent), false);
          if (Object.prototype.hasOwnProperty.call(window, "Accelerometer")) {
            window.addEventListener("devicemotion", n(this, this.handleSensorEvent), false);
          }
          CanvasRenderingContext2D.prototype.isPointInStroke ||= function (a, b, c) {
            return false;
          };
          CanvasRenderingContext2D.prototype.isPointInPath ||= function (a, b, c) {
            return false;
          };
          if ("performance" in window == 0) {
            window.performance = {};
          }
          if ("now" in window.performance == 0) {
            var a = Date.now();
            if (performance.timing && performance.timing.navigationStart) {
              a = performance.timing.navigationStart;
            }
            window.performance.now = function () {
              return Date.now() - a;
            };
          }
          var b = 0;
          for (var c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; ++d) {
            window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"];
            window.cancelAnimationFrame = window[c[d] + "CancelAnimationFrame"] || window[c[d] + "CancelRequestAnimationFrame"];
          }
          window.requestAnimationFrame ||= function (a, c) {
            var d = window.performance.now();
            var e = Math.max(0, 16 - (d - b));
            c = window.setTimeout(function () {
              a(d + e);
            }, e);
            b = d + e;
            return c;
          };
          window.cancelAnimationFrame ||= function (a) {
            clearTimeout(a);
          };
          window.requestAnimFrame = window.requestAnimationFrame;
          this.lastUpdate = window.performance.now();
          this.handleApplicationEvent();
          return 0;
        },
        exit: function () {},
        handleApplicationEvent: function (a) {
          a = 0;
          for (var b = this.parent.__windows; a < b.length;) {
            var c = b[a];
            ++a;
            c.__backend.updateSize();
          }
          this.updateGameDevices();
          this.currentUpdate = window.performance.now();
          if (this.currentUpdate >= this.nextUpdate) {
            this.deltaTime = this.currentUpdate - this.lastUpdate;
            a = 0;
            for (b = this.parent.__windows; a < b.length;) {
              c = b[a];
              ++a;
              this.parent.onUpdate.dispatch(this.deltaTime | 0);
              if (c.context != null) {
                c.onRender.dispatch(c.context);
              }
            }
            this.nextUpdate = this.framePeriod < 0 ? this.currentUpdate : this.currentUpdate - this.currentUpdate % this.framePeriod + this.framePeriod;
            this.lastUpdate = this.currentUpdate;
          }
          window.requestAnimationFrame(n(this, this.handleApplicationEvent));
        },
        handleKeyEvent: function (a) {
          if (this.parent.__window != null) {
            var b = this.convertKeyCode(a.keyCode ?? a.which);
            var c = (a.shiftKey ? 3 : 0) | (a.ctrlKey ? 192 : 0) | (a.altKey ? 768 : 0) | (a.metaKey ? 3072 : 0);
            if (a.type == "keydown") {
              this.parent.__window.onKeyDown.dispatch(b, c);
              if (this.parent.__window.onKeyDown.canceled && a.cancelable) {
                a.preventDefault();
              }
            } else {
              this.parent.__window.onKeyUp.dispatch(b, c);
              if (this.parent.__window.onKeyUp.canceled && a.cancelable) {
                a.preventDefault();
              }
            }
          }
        },
        handleSensorEvent: function (a) {
          this.accelerometer.onUpdate.dispatch(a.accelerationIncludingGravity.x, a.accelerationIncludingGravity.y, a.accelerationIncludingGravity.z);
        },
        handleWindowEvent: function (a) {
          if (this.parent.__window != null) {
            switch (a.type) {
              case "blur":
                if (!this.hidden) {
                  this.parent.__window.onFocusOut.dispatch();
                  this.parent.__window.onDeactivate.dispatch();
                  this.hidden = true;
                }
                break;
              case "focus":
                if (this.hidden) {
                  this.parent.__window.onFocusIn.dispatch();
                  this.parent.__window.onActivate.dispatch();
                  this.hidden = false;
                }
                break;
              case "resize":
                this.parent.__window.__backend.handleResizeEvent(a);
                break;
              case "visibilitychange":
                if (window.document.hidden) {
                  if (!this.hidden) {
                    this.parent.__window.onFocusOut.dispatch();
                    this.parent.__window.onDeactivate.dispatch();
                    this.hidden = true;
                  }
                } else if (this.hidden) {
                  this.parent.__window.onFocusIn.dispatch();
                  this.parent.__window.onActivate.dispatch();
                  this.hidden = false;
                }
            }
          }
        },
        updateGameDevices: function () {
          var a = Kc.__getDeviceData();
          if (a != null) {
            var b;
            var c;
            var d;
            var e;
            var f;
            for (var k = 0, t = a.length; k < t;) {
              b = k++;
              e = a[b];
              if (e != null) {
                if (!this.gameDeviceCache.h.hasOwnProperty(b)) {
                  f = new hn();
                  f.id = b;
                  f.connected = e.connected;
                  c = 0;
                  for (d = e.buttons.length; c < d;) {
                    var l = c++;
                    f.buttons.push(e.buttons[l].value);
                  }
                  c = 0;
                  for (d = e.axes.length; c < d;) {
                    l = c++;
                    f.axes.push(e.axes[l]);
                  }
                  if (e.mapping == "standard") {
                    f.isGamepad = true;
                  }
                  this.gameDeviceCache.h[b] = f;
                  if (e.connected) {
                    Kc.__connect(b);
                    if (f.isGamepad) {
                      Oc.__connect(b);
                    }
                  }
                }
                f = this.gameDeviceCache.h[b];
                d = Kc.devices.h[b];
                c = Oc.devices.h[b];
                if (e.connected) {
                  for (var g = 0, V = e.buttons.length; g < V;) {
                    var m = g++;
                    l = e.buttons[m].value;
                    if (l != f.buttons[m]) {
                      if (m == 6) {
                        d.onAxisMove.dispatch(e.axes.length, l);
                        if (c != null) {
                          c.onAxisMove.dispatch(4, l);
                        }
                      } else if (m == 7) {
                        d.onAxisMove.dispatch(e.axes.length + 1, l);
                        if (c != null) {
                          c.onAxisMove.dispatch(5, l);
                        }
                      } else {
                        if (l > 0) {
                          d.onButtonDown.dispatch(m);
                        } else {
                          d.onButtonUp.dispatch(m);
                        }
                        if (c != null) {
                          switch (m) {
                            case 0:
                              b = 0;
                              break;
                            case 1:
                              b = 1;
                              break;
                            case 2:
                              b = 2;
                              break;
                            case 3:
                              b = 3;
                              break;
                            case 4:
                              b = 9;
                              break;
                            case 5:
                              b = 10;
                              break;
                            case 8:
                              b = 4;
                              break;
                            case 9:
                              b = 6;
                              break;
                            case 10:
                              b = 7;
                              break;
                            case 11:
                              b = 8;
                              break;
                            case 12:
                              b = 11;
                              break;
                            case 13:
                              b = 12;
                              break;
                            case 14:
                              b = 13;
                              break;
                            case 15:
                              b = 14;
                              break;
                            case 16:
                              b = 5;
                              break;
                            default:
                              continue;
                          }
                          if (l > 0) {
                            c.onButtonDown.dispatch(b);
                          } else {
                            c.onButtonUp.dispatch(b);
                          }
                        }
                      }
                      f.buttons[m] = l;
                    }
                  }
                  b = 0;
                  for (l = e.axes.length; b < l;) {
                    g = b++;
                    if (e.axes[g] != f.axes[g]) {
                      d.onAxisMove.dispatch(g, e.axes[g]);
                      if (c != null) {
                        c.onAxisMove.dispatch(g, e.axes[g]);
                      }
                      f.axes[g] = e.axes[g];
                    }
                  }
                } else if (f.connected) {
                  f.connected = false;
                  Kc.__disconnect(b);
                  Oc.__disconnect(b);
                }
              }
            }
          }
        },
        __class__: S
      };
      function ka() {
        this.onCreateWindow = new jn();
        this.onUpdate = new ih();
        this.onExit = new ih();
        if (ka.current == null) {
          ka.current = this;
        }
        this.meta = new xa();
        this.modules = [];
        this.__windowByID = new Ac();
        this.__windows = [];
        this.__backend = new S(this);
        this.__registerLimeModule(this);
        this.__preloader = new kn();
        this.__preloader.onProgress.add(n(this, this.onPreloadProgress));
        this.__preloader.onComplete.add(n(this, this.onPreloadComplete));
      }
      h["lime.app.Application"] = ka;
      ka.__name__ = "lime.app.Application";
      ka.__super__ = la;
      ka.prototype = q(la.prototype, {
        addModule: function (a) {
          a.__registerLimeModule(this);
          this.modules.push(a);
        },
        exec: function () {
          ka.current = this;
          return this.__backend.exec();
        },
        onGamepadAxisMove: function (a, b, c) {},
        onGamepadButtonDown: function (a, b) {},
        onGamepadButtonUp: function (a, b) {},
        onGamepadConnect: function (a) {},
        onGamepadDisconnect: function (a) {},
        onJoystickAxisMove: function (a, b, c) {},
        onJoystickButtonDown: function (a, b) {},
        onJoystickButtonUp: function (a, b) {},
        onJoystickConnect: function (a) {},
        onJoystickDisconnect: function (a) {},
        onJoystickHatMove: function (a, b, c) {},
        onJoystickTrackballMove: function (a, b, c, d) {},
        onKeyDown: function (a, b) {},
        onKeyUp: function (a, b) {},
        onModuleExit: function (a) {},
        onMouseDown: function (a, b, c) {},
        onMouseMove: function (a, b) {},
        onMouseMoveRelative: function (a, b) {},
        onMouseUp: function (a, b, c) {},
        onMouseWheel: function (a, b, c) {},
        onPreloadComplete: function () {},
        onPreloadProgress: function (a, b) {},
        onRenderContextLost: function () {},
        onRenderContextRestored: function (a) {},
        onTextEdit: function (a, b, c) {},
        onTextInput: function (a) {},
        onTouchCancel: function (a) {},
        onTouchEnd: function (a) {},
        onTouchMove: function (a) {},
        onTouchStart: function (a) {},
        onWindowActivate: function () {},
        onWindowClose: function () {},
        onWindowCreate: function () {},
        onWindowDeactivate: function () {},
        onWindowDropFile: function (a) {},
        onWindowEnter: function () {},
        onWindowExpose: function () {},
        onWindowFocusIn: function () {},
        onWindowFocusOut: function () {},
        onWindowFullscreen: function () {},
        onWindowLeave: function () {},
        onWindowMove: function (a, b) {},
        onWindowMinimize: function () {},
        onWindowResize: function (a, b) {},
        onWindowRestore: function () {},
        removeModule: function (a) {
          if (a != null) {
            a.__unregisterLimeModule(this);
            L.remove(this.modules, a);
          }
        },
        render: function (a) {},
        update: function (a) {},
        __registerLimeModule: function (a) {
          a.onUpdate.add(n(this, this.update));
          a.onExit.add(n(this, this.onModuleExit), false, 0);
          a.onExit.add(n(this, this.__onModuleExit), false, -1000);
          for (a = Oc.devices.iterator(); a.hasNext();) {
            var b = a.next();
            this.__onGamepadConnect(b);
          }
          Oc.onConnect.add(n(this, this.__onGamepadConnect));
          for (a = Kc.devices.iterator(); a.hasNext();) {
            b = a.next();
            this.__onJoystickConnect(b);
          }
          Kc.onConnect.add(n(this, this.__onJoystickConnect));
          Dc.onCancel.add(n(this, this.onTouchCancel));
          Dc.onStart.add(n(this, this.onTouchStart));
          Dc.onMove.add(n(this, this.onTouchMove));
          Dc.onEnd.add(n(this, this.onTouchEnd));
        },
        __removeWindow: function (a) {
          if (a != null && this.__windowByID.h.hasOwnProperty(a.id)) {
            if (this.__window == a) {
              this.__window = null;
            }
            L.remove(this.__windows, a);
            this.__windowByID.remove(a.id);
            a.close();
            this.__checkForAllWindowsClosed();
          }
        },
        __checkForAllWindowsClosed: function () {
          if (this.__windows.length == 0) {
            bd.exit(0);
          }
        },
        __onGamepadConnect: function (a) {
          this.onGamepadConnect(a);
          var b = this;
          function c(c, d) {
            b.onGamepadAxisMove(a, c, d);
          }
          a.onAxisMove.add(c);
          var d = this;
          c = function (b) {
            d.onGamepadButtonDown(a, b);
          };
          a.onButtonDown.add(c);
          var e = this;
          c = function (b) {
            e.onGamepadButtonUp(a, b);
          };
          a.onButtonUp.add(c);
          var f = this;
          a.onDisconnect.add(function () {
            f.onGamepadDisconnect(a);
          });
        },
        __onJoystickConnect: function (a) {
          this.onJoystickConnect(a);
          var b = this;
          function c(c, d) {
            b.onJoystickAxisMove(a, c, d);
          }
          a.onAxisMove.add(c);
          var d = this;
          c = function (b) {
            d.onJoystickButtonDown(a, b);
          };
          a.onButtonDown.add(c);
          var e = this;
          c = function (b) {
            e.onJoystickButtonUp(a, b);
          };
          a.onButtonUp.add(c);
          var f = this;
          a.onDisconnect.add(function () {
            f.onJoystickDisconnect(a);
          });
          var k = this;
          c = function (b, c) {
            k.onJoystickHatMove(a, b, c);
          };
          a.onHatMove.add(c);
          var t = this;
          c = function (b, c, d) {
            t.onJoystickTrackballMove(a, b, c, d);
          };
          a.onTrackballMove.add(c);
        },
        __onModuleExit: function (a) {
          if (!this.onExit.canceled) {
            this.__unregisterLimeModule(this);
            this.__backend.exit();
            if (ka.current == this) {
              ka.current = null;
            }
          }
        },
        __onWindowClose: function (a) {
          if (this.__window == a) {
            this.onWindowClose();
          }
          this.__removeWindow(a);
        },
        __unregisterLimeModule: function (a) {
          a.onUpdate.remove(n(this, this.update));
          a.onExit.remove(n(this, this.__onModuleExit));
          a.onExit.remove(n(this, this.onModuleExit));
          Oc.onConnect.remove(n(this, this.__onGamepadConnect));
          Kc.onConnect.remove(n(this, this.__onJoystickConnect));
          Dc.onCancel.remove(n(this, this.onTouchCancel));
          Dc.onStart.remove(n(this, this.onTouchStart));
          Dc.onMove.remove(n(this, this.onTouchMove));
          Dc.onEnd.remove(n(this, this.onTouchEnd));
        },
        __class__: ka
      });
      function H() {}
      h.ApplicationMain = H;
      H.__name__ = "ApplicationMain";
      H.main = function () {
        bd.__registerEntryPoint("PsychEngine", H.create);
      };
      H.create = function (a) {
        var b = new Oi();
        eb.init(a);
        b.meta.h.build = "1";
        b.meta.h.company = "ShadowMario";
        b.meta.h.file = "PsychEngine";
        b.meta.h.name = "Friday Night Funkin': Psych Engine";
        b.meta.h.packageName = "com.shadowmario.psychengine";
        b.meta.h.version = "0.2.8";
        var c = {
          allowHighDPI: true,
          alwaysOnTop: false,
          borderless: false,
          element: null,
          frameRate: 60,
          height: 720,
          hidden: false,
          maximized: false,
          minimized: false,
          parameters: {},
          resizable: true,
          title: "Friday Night Funkin': Psych Engine",
          width: 1280,
          x: null,
          y: null,
          context: {
            antialiasing: 0,
            background: 0,
            colorDepth: 32,
            depth: true,
            hardware: true,
            stencil: true,
            type: null,
            vsync: false
          }
        };
        if (b.__window == null && a != null) {
          for (var d = 0, e = ha.fields(a); d < e.length;) {
            var f = e[d];
            ++d;
            if (Object.prototype.hasOwnProperty.call(c, f)) {
              c[f] = ha.field(a, f);
            } else if (Object.prototype.hasOwnProperty.call(c.context, f)) {
              c.context[f] = ha.field(a, f);
            }
          }
        }
        b.createWindow(c);
        var k = new kk(new lk());
        b.__preloader.onProgress.add(function (a, b) {
          k.update(a, b);
        });
        b.__preloader.onComplete.add(function () {
          k.start();
        });
        var t = b.__window.stage;
        k.onComplete.add(function () {
          H.start(t);
        });
        d = 0;
        for (e = eb.preloadLibraries; d < e.length;) {
          a = e[d];
          ++d;
          b.__preloader.addLibrary(a);
        }
        d = 0;
        for (e = eb.preloadLibraryNames; d < e.length;) {
          a = e[d];
          ++d;
          b.__preloader.addLibraryName(a);
        }
        b.__preloader.load();
        b.exec();
      };
      H.start = function (a) {
        if (a.__uncaughtErrorEvents.__enabled) {
          try {
            Zb.main();
            a.dispatchEvent(new za("resize", false, false));
            if (a.window.__fullscreen) {
              a.dispatchEvent(new Cg("fullScreen", false, false, true, true));
            }
          } catch (c) {
            Oa.lastError = c;
            var b = I.caught(c).unwrap();
            a.__handleError(b);
          }
        } else {
          Zb.main();
          a.dispatchEvent(new za("resize", false, false));
          if (a.window.__fullscreen) {
            a.dispatchEvent(new Cg("fullScreen", false, false, true, true));
          }
        }
      };
      function fa() {}
      h["openfl.events.IEventDispatcher"] = fa;
      fa.__name__ = "openfl.events.IEventDispatcher";
      fa.__isInterface__ = true;
      fa.prototype = {
        __class__: fa
      };
      function va(a) {
        if (a != null) {
          this.__targetDispatcher = a;
        }
      }
      h["openfl.events.EventDispatcher"] = va;
      va.__name__ = "openfl.events.EventDispatcher";
      va.__interfaces__ = [fa];
      va.prototype = {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b != null) {
            if (this.__eventMap == null) {
              this.__eventMap = new xa();
              this.__iterators = new xa();
            }
            if (Object.prototype.hasOwnProperty.call(this.__eventMap.h, a)) {
              l = this.__eventMap.h[a];
              for (var f = 0, k = l.length; f < k;) {
                var t = f++;
                if (l[t].match(b, c)) {
                  return;
                }
              }
              a = this.__iterators.h[a];
              for (f = 0; f < a.length;) {
                k = a[f];
                ++f;
                if (k.active) {
                  k.copy();
                }
              }
              this.__addListenerByPriority(l, new jh(b, c, d, e));
            } else {
              var l = [];
              l.push(new jh(b, c, d, e));
              k = new Pi(l);
              this.__eventMap.h[a] = l;
              this.__iterators.h[a] = [k];
            }
          }
        },
        dispatchEvent: function (a) {
          a.target = this.__targetDispatcher ?? this;
          return this.__dispatchEvent(a);
        },
        hasEventListener: function (a) {
          if (this.__eventMap == null) {
            return false;
          } else {
            return Object.prototype.hasOwnProperty.call(this.__eventMap.h, a);
          }
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (this.__eventMap != null && b != null) {
            var d = this.__eventMap.h[a];
            if (d != null) {
              var e = this.__iterators.h[a];
              for (var f = 0, k = d.length; f < k;) {
                var t = f++;
                if (d[t].match(b, c)) {
                  for (b = 0; b < e.length;) {
                    c = e[b];
                    ++b;
                    c.remove(d[t], t);
                  }
                  d.splice(t, 1);
                  break;
                }
              }
              if (d.length == 0) {
                d = this.__eventMap;
                e = a;
                if (Object.prototype.hasOwnProperty.call(d.h, e)) {
                  delete d.h[e];
                }
                d = this.__iterators;
                e = a;
                if (Object.prototype.hasOwnProperty.call(d.h, e)) {
                  delete d.h[e];
                }
              }
              if (Object.keys(this.__eventMap.h).length <= 0) {
                this.__iterators = this.__eventMap = null;
              }
            }
          }
        },
        __dispatchEvent: function (a) {
          if (this.__eventMap == null || a == null) {
            return true;
          }
          var b = a.type;
          var c = this.__eventMap.h[b];
          if (c == null) {
            return true;
          }
          if (a.target == null) {
            a.target = this.__targetDispatcher ?? this;
          }
          a.currentTarget = this;
          var d = a.eventPhase == 1;
          b = this.__iterators.h[b];
          var e = b[0];
          if (e.active) {
            e = new Pi(c);
            b.push(e);
          }
          e.start();
          for (var f = e; f.hasNext();) {
            var k = f.next();
            if (k != null && k.useCapture == d) {
              if (k.useWeakReference && k.weakRefCallback != null) {
                var t = k.weakRefCallback.deref();
                if (t == null) {
                  t = e.index - 1;
                  c.splice(t, 1);
                  e.remove(k, t);
                } else if (ia.get_current() != null && ia.get_current().stage != null && ia.get_current().stage.__uncaughtErrorEvents.__enabled) {
                  try {
                    t(a);
                  } catch (l) {
                    Oa.lastError = l;
                    k = I.caught(l).unwrap();
                    if (!(a instanceof Ph)) {
                      ia.get_current().stage.__handleError(k);
                    }
                  }
                } else {
                  t(a);
                }
              } else if (ia.get_current() != null && ia.get_current().stage != null && ia.get_current().stage.__uncaughtErrorEvents.__enabled) {
                try {
                  k.callback(a);
                } catch (l) {
                  Oa.lastError = l;
                  k = I.caught(l).unwrap();
                  if (!(a instanceof Ph)) {
                    ia.get_current().stage.__handleError(k);
                  }
                }
              } else {
                k.callback(a);
              }
              if (a.__isCanceledNow) {
                break;
              }
            }
          }
          e.stop();
          if (e != b[0]) {
            L.remove(b, e);
          } else {
            e.reset(c);
          }
          return !a.isDefaultPrevented();
        },
        __addListenerByPriority: function (a, b) {
          for (var c = a.length, d = c, e = 0; e < c;) {
            var f = e++;
            if (a[f].priority < b.priority) {
              d = f;
              break;
            }
          }
          a.splice(d, 0, b);
        },
        __class__: va
      };
      function qa() {}
      h["openfl.display.IBitmapDrawable"] = qa;
      qa.__name__ = "openfl.display.IBitmapDrawable";
      qa.__isInterface__ = true;
      qa.prototype = {
        __class__: qa
      };
      var kb = {
        toIntVector: function (a, b, c, d) {
          return new Qh(b, c, d);
        },
        toFloatVector: function (a, b, c, d) {
          return new Sf(b, c, d, true);
        },
        toObjectVector: function (a, b, c, d) {
          return new kh(b, c, d, true);
        },
        toNullVector: function (a, b, c, d) {
          return new kh(b, c, d, true);
        }
      };
      function ib(a, b, c) {
        this.__pool = new ma();
        this.inactiveObjects = this.activeObjects = 0;
        this.__inactiveObject1 = this.__inactiveObject0 = null;
        this.__inactiveObjectList = new mb();
        if (a != null) {
          this.create = a;
        }
        if (b != null) {
          this.clean = b;
        }
        if (c != null) {
          this.set_size(c);
        }
      }
      h["lime.utils.ObjectPool"] = ib;
      ib.__name__ = "lime.utils.ObjectPool";
      ib.prototype = {
        clean: function (a) {},
        create: function () {
          return null;
        },
        get: function () {
          var a = null;
          if (this.inactiveObjects > 0) {
            if (this.__inactiveObject0 != null) {
              a = this.__inactiveObject0;
              this.__inactiveObject0 = null;
            } else if (this.__inactiveObject1 != null) {
              a = this.__inactiveObject1;
              this.__inactiveObject1 = null;
            } else {
              a = this.__inactiveObjectList.pop();
              if (this.__inactiveObjectList.length > 0) {
                this.__inactiveObject0 = this.__inactiveObjectList.pop();
              }
              if (this.__inactiveObjectList.length > 0) {
                this.__inactiveObject1 = this.__inactiveObjectList.pop();
              }
            }
            this.inactiveObjects--;
            this.activeObjects++;
          } else if (this.__size == null || this.activeObjects < this.__size) {
            a = this.create();
            if (a != null) {
              this.__pool.set(a, true);
              this.activeObjects++;
            }
          }
          return a;
        },
        release: function (a) {
          this.activeObjects--;
          if (this.__size == null || this.activeObjects + this.inactiveObjects < this.__size) {
            this.clean(a);
            if (this.__inactiveObject0 == null) {
              this.__inactiveObject0 = a;
            } else if (this.__inactiveObject1 == null) {
              this.__inactiveObject1 = a;
            } else {
              this.__inactiveObjectList.add(a);
            }
            this.inactiveObjects++;
          } else {
            this.__pool.remove(a);
          }
        },
        __removeInactive: function (a) {
          if (!(a <= 0) && this.inactiveObjects != 0 && (this.__inactiveObject0 != null && (this.__pool.remove(this.__inactiveObject0), this.__inactiveObject0 = null, this.inactiveObjects--, --a), a != 0 && this.inactiveObjects != 0 && (this.__inactiveObject1 != null && (this.__pool.remove(this.__inactiveObject1), this.__inactiveObject1 = null, this.inactiveObjects--, --a), a != 0 && this.inactiveObjects != 0))) {
            for (var b = this.__inactiveObjectList.h; b != null;) {
              var c = b.item;
              b = b.next;
              this.__pool.remove(c);
              this.__inactiveObjectList.remove(c);
              this.inactiveObjects--;
              --a;
              if (a == 0 || this.inactiveObjects == 0) {
                break;
              }
            }
          }
        },
        set_size: function (a) {
          if (a == null) {
            this.__size = null;
          } else {
            var b = this.inactiveObjects + this.activeObjects;
            this.__size = a;
            if (b > a) {
              this.__removeInactive(b - a);
            } else if (a > b) {
              for (var c = 0, d = a - b; c < d;) {
                c++;
                b = this.create();
                if (b != null) {
                  this.__pool.set(b, false);
                  this.__inactiveObjectList.add(b);
                  this.inactiveObjects++;
                } else {
                  break;
                }
              }
            }
          }
          return a;
        },
        __class__: ib,
        __properties__: {
          set_size: "set_size"
        }
      };
      function kc() {}
      h["haxe.IMap"] = kc;
      kc.__name__ = "haxe.IMap";
      kc.__isInterface__ = true;
      kc.prototype = {
        __class__: kc
      };
      function ma() {
        this.h = {
          __keys__: {}
        };
      }
      h["haxe.ds.ObjectMap"] = ma;
      ma.__name__ = "haxe.ds.ObjectMap";
      ma.__interfaces__ = [kc];
      ma.prototype = {
        set: function (a, b) {
          var c = a.__id__;
          if (c == null) {
            c = a.__id__ = F.$haxeUID++;
          }
          this.h[c] = b;
          this.h.__keys__[c] = a;
        },
        get: function (a) {
          return this.h[a.__id__];
        },
        remove: function (a) {
          a = a.__id__;
          if (this.h.__keys__[a] == null) {
            return false;
          }
          delete this.h[a];
          delete this.h.__keys__[a];
          return true;
        },
        keys: function () {
          var a = [];
          var b;
          for (b in this.h.__keys__) {
            if (this.h.hasOwnProperty(b)) {
              a.push(this.h.__keys__[b]);
            }
          }
          return new tf(a);
        },
        __class__: ma
      };
      function mb() {
        this.length = 0;
      }
      h["haxe.ds.List"] = mb;
      mb.__name__ = "haxe.ds.List";
      mb.prototype = {
        add: function (a) {
          a = new mk(a, null);
          if (this.h == null) {
            this.h = a;
          } else {
            this.q.next = a;
          }
          this.q = a;
          this.length++;
        },
        push: function (a) {
          this.h = a = new mk(a, this.h);
          if (this.q == null) {
            this.q = a;
          }
          this.length++;
        },
        pop: function () {
          if (this.h == null) {
            return null;
          }
          var a = this.h.item;
          this.h = this.h.next;
          if (this.h == null) {
            this.q = null;
          }
          this.length--;
          return a;
        },
        clear: function () {
          this.q = this.h = null;
          this.length = 0;
        },
        remove: function (a) {
          var b = null;
          for (var c = this.h; c != null;) {
            if (c.item == a) {
              if (b == null) {
                this.h = c.next;
              } else {
                b.next = c.next;
              }
              if (this.q == c) {
                this.q = b;
              }
              this.length--;
              return true;
            }
            b = c;
            c = c.next;
          }
          return false;
        },
        iterator: function () {
          return new ln(this.h);
        },
        __class__: mb
      };
      function Ba() {
        va.call(this);
        this.__alpha = this.__drawableType = 1;
        this.__blendMode = 10;
        this.__cacheAsBitmap = false;
        this.__transform = new ya();
        this.__visible = true;
        this.__rotationSine = this.__rotation = 0;
        this.__worldAlpha = this.__scaleY = this.__scaleX = this.__rotationCosine = 1;
        this.__worldBlendMode = 10;
        this.__worldTransform = new ya();
        this.__worldColorTransform = new Ob();
        this.__renderTransform = new ya();
        this.__worldVisible = true;
        this.set_name("instance" + ++Ba.__instanceCount);
        if (Ba.__initStage != null) {
          this.stage = Ba.__initStage;
          Ba.__initStage = null;
          this.stage.addChild(this);
        }
      }
      h["openfl.display.DisplayObject"] = Ba;
      Ba.__name__ = "openfl.display.DisplayObject";
      Ba.__interfaces__ = [qa];
      Ba.__super__ = va;
      Ba.prototype = q(va.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          switch (a) {
            case "activate":
            case "deactivate":
            case "enterFrame":
            case "exitFrame":
            case "frameConstructed":
            case "render":
              if (!Object.prototype.hasOwnProperty.call(Ba.__broadcastEvents.h, a)) {
                Ba.__broadcastEvents.h[a] = [];
              }
              var f = Ba.__broadcastEvents.h[a];
              if (f.indexOf(this) == -1) {
                f.push(this);
              }
              break;
            case "clearDOM":
            case "renderCairo":
            case "renderCanvas":
            case "renderDOM":
            case "renderOpenGL":
              if (this.__customRenderEvent == null) {
                this.__customRenderEvent = new nk(null);
                this.__customRenderEvent.objectColorTransform = new Ob();
                this.__customRenderEvent.objectMatrix = new ya();
                this.__customRenderClear = true;
              }
          }
          va.prototype.addEventListener.call(this, a, b, c, d, e);
        },
        dispatchEvent: function (a) {
          if (a instanceof Wb) {
            var b = this.__getRenderTransform();
            a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
            b = this.__getRenderTransform();
            a.stageY = a.localX * b.b + a.localY * b.d + b.ty;
          } else if (a instanceof Ve) {
            b = this.__getRenderTransform();
            a.stageX = a.localX * b.a + a.localY * b.c + b.tx;
            b = this.__getRenderTransform();
            a.stageY = a.localX * b.b + a.localY * b.d + b.ty;
          }
          a.target = this;
          return this.__dispatchWithCapture(a);
        },
        getBounds: function (a) {
          var b = ya.__pool.get();
          if (a != null && a != this) {
            b.copyFrom(this.__getWorldTransform());
            var c = ya.__pool.get();
            c.copyFrom(a.__getWorldTransform());
            c.invert();
            b.concat(c);
            ya.__pool.release(c);
          } else {
            b.identity();
          }
          a = new ba();
          this.__getBounds(a, b);
          ya.__pool.release(b);
          return a;
        },
        globalToLocal: function (a) {
          return this.__globalToLocal(a, new ob());
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          va.prototype.removeEventListener.call(this, a, b, c);
          switch (a) {
            case "activate":
            case "deactivate":
            case "enterFrame":
            case "exitFrame":
            case "frameConstructed":
            case "render":
              if (!this.hasEventListener(a)) {
                if (Object.prototype.hasOwnProperty.call(Ba.__broadcastEvents.h, a)) {
                  L.remove(Ba.__broadcastEvents.h[a], this);
                }
              }
              break;
            case "clearDOM":
            case "renderCairo":
            case "renderCanvas":
            case "renderDOM":
            case "renderOpenGL":
              if (!this.hasEventListener("clearDOM") && !this.hasEventListener("renderCairo") && !this.hasEventListener("renderCanvas") && !this.hasEventListener("renderDOM") && !this.hasEventListener("renderOpenGL")) {
                this.__customRenderEvent = null;
              }
          }
        },
        __cleanup: function () {
          this.__context = this.__canvas = this.__cairo = null;
          if (this.__graphics != null) {
            this.__graphics.__cleanup();
          }
          if (this.__cacheBitmap != null) {
            this.__cacheBitmap.__cleanup();
            this.__cacheBitmap = null;
          }
          if (this.__cacheBitmapData != null) {
            this.__cacheBitmapData.dispose();
            this.__cacheBitmapData = null;
          }
        },
        __dispatch: function (a) {
          if (this.__eventMap != null && this.hasEventListener(a.type)) {
            var b = va.prototype.__dispatchEvent.call(this, a);
            if (a.__isCanceled) {
              return true;
            } else {
              return b;
            }
          }
          return true;
        },
        __dispatchChildren: function (a) {},
        __dispatchEvent: function (a) {
          var b = a.bubbles ? this.parent : null;
          var c = va.prototype.__dispatchEvent.call(this, a);
          if (a.__isCanceled) {
            return true;
          }
          if (b != null && b != this) {
            a.eventPhase = 3;
            if (a.target == null) {
              a.target = this;
            }
            b.__dispatchEvent(a);
          }
          return c;
        },
        __dispatchWithCapture: function (a) {
          if (a.target == null) {
            a.target = this;
          }
          if (this.parent != null) {
            a.eventPhase = 1;
            if (this.parent == this.stage) {
              this.parent.__dispatch(a);
            } else {
              var b = Ba.__tempStack.get();
              for (var c = this.parent, d = 0; c != null;) {
                b.set(d, c);
                c = c.parent;
                ++d;
              }
              c = 0;
              for (var e = d; c < e;) {
                var f = c++;
                b.get(d - f - 1).__dispatch(a);
              }
              Ba.__tempStack.release(b);
            }
          }
          a.eventPhase = 2;
          return this.__dispatchEvent(a);
        },
        __enterFrame: function (a) {},
        __getBounds: function (a, b) {
          if (this.__graphics != null) {
            this.__graphics.__getBounds(a, b);
          }
        },
        __getCursor: function () {
          return null;
        },
        __getFilterBounds: function (a, b) {
          this.__getRenderBounds(a, b);
          if (this.__filters != null) {
            b = ba.__pool.get();
            for (var c = 0, d = this.__filters; c < d.length;) {
              var e = d[c];
              ++c;
              b.__expand(-e.__leftExtension, -e.__topExtension, e.__leftExtension + e.__rightExtension, e.__topExtension + e.__bottomExtension);
            }
            a.width += b.width;
            a.height += b.height;
            a.x += b.x;
            a.y += b.y;
            ba.__pool.release(b);
          }
        },
        __getInteractive: function (a) {
          return false;
        },
        __getLocalBounds: function (a) {
          this.__getBounds(a, this.__transform);
          a.x -= this.__transform.tx;
          a.y -= this.__transform.ty;
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect == null) {
            this.__getBounds(a, b);
          } else {
            var c = ba.__pool.get();
            c.copyFrom(this.__scrollRect);
            c.__transform(c, b);
            a.__expand(c.x, c.y, c.width, c.height);
            ba.__pool.release(c);
          }
        },
        __getRenderTransform: function () {
          this.__getWorldTransform();
          return this.__renderTransform;
        },
        __getWorldTransform: function () {
          if (this.__transformDirty || this.__worldTransformInvalid) {
            var a = [];
            var b = this;
            if (this.parent == null) {
              this.__update(true, false);
            } else {
              while (b != this.stage && (a.push(b), b = b.parent, b != null));
            }
            for (var c = a.length; --c >= 0;) {
              b = a[c];
              b.__update(true, false);
            }
          }
          return this.__worldTransform;
        },
        __globalToLocal: function (a, b) {
          this.__getRenderTransform();
          if (a == b) {
            var c = this.__renderTransform;
            var d = c.a * c.d - c.b * c.c;
            if (d == 0) {
              a.x = -c.tx;
              a.y = -c.ty;
            } else {
              var e = 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
              a.y = 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
              a.x = e;
            }
          } else {
            c = this.__renderTransform;
            d = c.a * c.d - c.b * c.c;
            b.x = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - a.y) + c.d * (a.x - c.tx));
            c = this.__renderTransform;
            d = c.a * c.d - c.b * c.c;
            b.y = d == 0 ? -c.ty : 1 / d * (c.a * (a.y - c.ty) + c.b * (c.tx - a.x));
          }
          return b;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (this.__graphics != null) {
            if (!f.__visible || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
              return false;
            }
            if (this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())) {
              if (d != null && !e) {
                d.push(f);
              }
              return true;
            }
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          if (this.__graphics != null && this.__graphics.__hitTest(a, b, true, this.__getRenderTransform())) {
            return true;
          } else {
            return false;
          }
        },
        __setParentRenderDirty: function () {
          var a = this.__renderParent ?? this.parent;
          if (a != null && !a.__renderDirty) {
            a.__renderDirty = true;
            a.__setParentRenderDirty();
          }
        },
        __setStageReference: function (a) {
          this.stage = a;
        },
        __setTransformDirty: function () {
          if (!this.__transformDirty) {
            this.__transformDirty = true;
            this.__setWorldTransformInvalid();
            this.__setParentRenderDirty();
          }
        },
        __setWorldTransformInvalid: function () {
          this.__worldTransformInvalid = true;
        },
        __update: function (a, b) {
          var c = this.__renderParent ?? this.parent;
          if (this.__isMask && c == null) {
            c = this.__maskTarget;
          }
          this.__renderable = this.__visible && this.__scaleX != 0 && this.__scaleY != 0 && !this.__isMask && (c == null || !c.__isMask);
          this.__updateTransforms();
          this.__worldTransformInvalid = this.__transformDirty = false;
          if (!a) {
            if (Ba.__supportDOM) {
              this.__renderTransformChanged = !this.__renderTransform.equals(this.__renderTransformCache);
              if (this.__renderTransformCache == null) {
                this.__renderTransformCache = this.__renderTransform.clone();
              } else {
                this.__renderTransformCache.copyFrom(this.__renderTransform);
              }
            }
            if (c != null) {
              if (Ba.__supportDOM) {
                var d = c.__worldVisible && this.__visible;
                this.__worldVisibleChanged = this.__worldVisible != d;
                this.__worldVisible = d;
              }
              d = this.get_alpha() * c.__worldAlpha;
              this.__worldAlphaChanged = this.__worldAlpha != d;
              this.__worldAlpha = d;
              if (this.__objectTransform != null) {
                this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform);
                this.__worldColorTransform.__combine(c.__worldColorTransform);
              } else {
                this.__worldColorTransform.__copyFrom(c.__worldColorTransform);
              }
              this.__worldBlendMode = this.__blendMode == null || this.__blendMode == 10 ? c.__worldBlendMode : this.__blendMode;
              this.__worldShader = this.__shader == null ? c.__shader : this.__shader;
              this.__worldScale9Grid = this.__scale9Grid == null ? c.__scale9Grid : this.__scale9Grid;
            } else {
              this.__worldAlpha = this.get_alpha();
              if (Ba.__supportDOM) {
                this.__worldVisibleChanged = this.__worldVisible != this.__visible;
                this.__worldVisible = this.__visible;
              }
              this.__worldAlphaChanged = this.__worldAlpha != this.get_alpha();
              if (this.__objectTransform != null) {
                this.__worldColorTransform.__copyFrom(this.__objectTransform.__colorTransform);
              } else {
                this.__worldColorTransform.__identity();
              }
              this.__worldBlendMode = this.__blendMode;
              this.__worldShader = this.__shader;
              this.__worldScale9Grid = this.__scale9Grid;
            }
          }
          if (b && this.get_mask() != null) {
            this.get_mask().__update(a, true);
          }
        },
        __updateTransforms: function (a) {
          var b = a != null;
          a = b ? a : this.__transform;
          if (this.__worldTransform == null) {
            this.__worldTransform = new ya();
          }
          if (this.__renderTransform == null) {
            this.__renderTransform = new ya();
          }
          var c = this.__renderParent ?? this.parent;
          if (b || this.parent == null) {
            this.__worldTransform.copyFrom(a);
          } else {
            var d = this.parent.__worldTransform;
            var e = this.__worldTransform;
            e.a = a.a * d.a + a.b * d.c;
            e.b = a.a * d.b + a.b * d.d;
            e.c = a.c * d.a + a.d * d.c;
            e.d = a.c * d.b + a.d * d.d;
            e.tx = a.tx * d.a + a.ty * d.c + d.tx;
            e.ty = a.tx * d.b + a.ty * d.d + d.ty;
          }
          if (b || c == null) {
            this.__renderTransform.copyFrom(a);
          } else {
            d = c.__renderTransform;
            e = this.__renderTransform;
            e.a = a.a * d.a + a.b * d.c;
            e.b = a.a * d.b + a.b * d.d;
            e.c = a.c * d.a + a.d * d.c;
            e.d = a.c * d.b + a.d * d.d;
            e.tx = a.tx * d.a + a.ty * d.c + d.tx;
            e.ty = a.tx * d.b + a.ty * d.d + d.ty;
          }
          if (this.__scrollRect != null) {
            b = this.__renderTransform;
            a = -this.__scrollRect.x;
            c = -this.__scrollRect.y;
            b.tx = a * b.a + c * b.c + b.tx;
            b.ty = a * b.b + c * b.d + b.ty;
          }
        },
        get_alpha: function () {
          return this.__alpha;
        },
        set_alpha: function (a) {
          if (a > 1) {
            a = 1;
          }
          if (a < 0) {
            a = 0;
          }
          if (a != this.__alpha && !this.get_cacheAsBitmap() && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__alpha = a;
        },
        set_blendMode: function (a) {
          if (a == null) {
            a = 10;
          }
          if (a != this.__blendMode && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__blendMode = a;
        },
        get_cacheAsBitmap: function () {
          if (this.__filters == null) {
            return this.__cacheAsBitmap;
          } else {
            return true;
          }
        },
        set_filters: function (a) {
          if (a != null && a.length > 0) {
            var b = [];
            for (var c = 0; c < a.length;) {
              var d = a[c];
              ++c;
              d = d.clone();
              d.__renderDirty = true;
              b.push(d);
            }
            this.__filters = b;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else if (this.__filters != null) {
            this.__filters = null;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return a;
        },
        get_height: function () {
          var a = ba.__pool.get();
          this.__getLocalBounds(a);
          var b = a.height;
          ba.__pool.release(a);
          return b;
        },
        set_height: function (a) {
          var b = ba.__pool.get();
          var c = ya.__pool.get();
          c.identity();
          this.__getBounds(b, c);
          if (a != b.height) {
            this.set_scaleY(a / b.height);
          } else {
            this.set_scaleY(1);
          }
          ba.__pool.release(b);
          ya.__pool.release(c);
          return a;
        },
        get_loaderInfo: function () {
          if (this.stage != null) {
            return xd.current.__loaderInfo;
          } else {
            return null;
          }
        },
        get_mask: function () {
          return this.__mask;
        },
        set_mask: function (a) {
          if (a == this.__mask) {
            return a;
          }
          if (a != this.__mask) {
            this.__setTransformDirty();
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          if (this.__mask != null) {
            this.__mask.__isMask = false;
            this.__mask.__maskTarget = null;
            this.__mask.__setTransformDirty();
            var b = this.__mask;
            if (!b.__renderDirty) {
              b.__renderDirty = true;
              b.__setParentRenderDirty();
            }
          }
          if (a != null) {
            a.__isMask = true;
            a.__maskTarget = this;
            a.__setWorldTransformInvalid();
          }
          if (this.__cacheBitmap != null && this.__cacheBitmap.get_mask() != a) {
            this.__cacheBitmap.set_mask(a);
          }
          return this.__mask = a;
        },
        get_mouseX: function () {
          var a = this.stage != null ? this.stage.__mouseX : xd.current.stage.__mouseX;
          var b = this.stage != null ? this.stage.__mouseY : xd.current.stage.__mouseY;
          var c = this.__getRenderTransform();
          var d = c.a * c.d - c.b * c.c;
          if (d == 0) {
            return -c.tx;
          } else {
            return 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          }
        },
        get_mouseY: function () {
          var a = this.stage != null ? this.stage.__mouseX : xd.current.stage.__mouseX;
          var b = this.stage != null ? this.stage.__mouseY : xd.current.stage.__mouseY;
          var c = this.__getRenderTransform();
          var d = c.a * c.d - c.b * c.c;
          if (d == 0) {
            return -c.ty;
          } else {
            return 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
          }
        },
        get_name: function () {
          return this.__name;
        },
        set_name: function (a) {
          return this.__name = a;
        },
        get_rotation: function () {
          return this.__rotation;
        },
        set_rotation: function (a) {
          if (a != this.__rotation) {
            a %= 360;
            if (a > 180) {
              a -= 360;
            } else if (a < -180) {
              a += 360;
            }
            this.__rotation = a;
            var b = Math.PI / 180 * this.__rotation;
            this.__rotationSine = Math.sin(b);
            this.__rotationCosine = Math.cos(b);
            this.__transform.a = this.__rotationCosine * this.__scaleX;
            this.__transform.b = this.__rotationSine * this.__scaleX;
            this.__transform.c = -this.__rotationSine * this.__scaleY;
            this.__transform.d = this.__rotationCosine * this.__scaleY;
            this.__setTransformDirty();
          }
          return a;
        },
        get_scaleX: function () {
          return this.__scaleX;
        },
        set_scaleX: function (a) {
          if (a != this.__scaleX) {
            this.__scaleX = a;
            if (this.__transform.b == 0) {
              if (a != this.__transform.a) {
                this.__setTransformDirty();
              }
              this.__transform.a = a;
            } else {
              var b = this.__rotationCosine * a;
              var c = this.__rotationSine * a;
              if (this.__transform.a != b || this.__transform.b != c) {
                this.__setTransformDirty();
              }
              this.__transform.a = b;
              this.__transform.b = c;
            }
          }
          return a;
        },
        get_scaleY: function () {
          return this.__scaleY;
        },
        set_scaleY: function (a) {
          if (a != this.__scaleY) {
            this.__scaleY = a;
            if (this.__transform.c == 0) {
              if (a != this.__transform.d) {
                this.__setTransformDirty();
              }
              this.__transform.d = a;
            } else {
              var b = -this.__rotationSine * a;
              var c = this.__rotationCosine * a;
              if (this.__transform.d != c || this.__transform.c != b) {
                this.__setTransformDirty();
              }
              this.__transform.c = b;
              this.__transform.d = c;
            }
          }
          return a;
        },
        get_scrollRect: function () {
          if (this.__scrollRect == null) {
            return null;
          } else {
            return this.__scrollRect.clone();
          }
        },
        set_scrollRect: function (a) {
          if (a == null && this.__scrollRect == null || a != null && this.__scrollRect != null && this.__scrollRect.equals(a)) {
            return a;
          }
          if (a != null) {
            if (this.__scrollRect == null) {
              this.__scrollRect = new ba();
            }
            this.__scrollRect.copyFrom(a);
          } else {
            this.__scrollRect = null;
          }
          this.__setTransformDirty();
          if (Ba.__supportDOM && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return a;
        },
        get_transform: function () {
          if (this.__objectTransform == null) {
            this.__objectTransform = new ok(this);
          }
          return this.__objectTransform;
        },
        set_transform: function (a) {
          if (a == null) {
            throw new lh("Parameter transform must be non-null.");
          }
          if (this.__objectTransform == null) {
            this.__objectTransform = new ok(this);
          }
          this.__setTransformDirty();
          this.__objectTransform.set_matrix(a.get_matrix());
          if (!this.__objectTransform.__colorTransform.__equals(a.__colorTransform, true) || !this.get_cacheAsBitmap() && this.__objectTransform.__colorTransform.alphaMultiplier != a.__colorTransform.alphaMultiplier) {
            this.__objectTransform.__colorTransform.__copyFrom(a.get_colorTransform());
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__objectTransform;
        },
        get_visible: function () {
          return this.__visible;
        },
        set_visible: function (a) {
          if (a != this.__visible && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return this.__visible = a;
        },
        get_width: function () {
          var a = ba.__pool.get();
          this.__getLocalBounds(a);
          var b = a.width;
          ba.__pool.release(a);
          return b;
        },
        set_width: function (a) {
          var b = ba.__pool.get();
          var c = ya.__pool.get();
          c.identity();
          this.__getBounds(b, c);
          if (a != b.width) {
            this.set_scaleX(a / b.width);
          } else {
            this.set_scaleX(1);
          }
          ba.__pool.release(b);
          ya.__pool.release(c);
          return a;
        },
        get_x: function () {
          return this.__transform.tx;
        },
        set_x: function (a) {
          if (a != this.__transform.tx) {
            this.__setTransformDirty();
          }
          return this.__transform.tx = a;
        },
        get_y: function () {
          return this.__transform.ty;
        },
        set_y: function (a) {
          if (a != this.__transform.ty) {
            this.__setTransformDirty();
          }
          return this.__transform.ty = a;
        },
        __class__: Ba,
        __properties__: {
          set_filters: "set_filters",
          set_blendMode: "set_blendMode",
          set_y: "set_y",
          get_y: "get_y",
          set_x: "set_x",
          get_x: "get_x",
          set_width: "set_width",
          get_width: "get_width",
          set_visible: "set_visible",
          get_visible: "get_visible",
          set_transform: "set_transform",
          get_transform: "get_transform",
          set_scrollRect: "set_scrollRect",
          get_scrollRect: "get_scrollRect",
          set_scaleY: "set_scaleY",
          get_scaleY: "get_scaleY",
          set_scaleX: "set_scaleX",
          get_scaleX: "get_scaleX",
          set_rotation: "set_rotation",
          get_rotation: "get_rotation",
          set_name: "set_name",
          get_name: "get_name",
          get_mouseY: "get_mouseY",
          get_mouseX: "get_mouseX",
          set_mask: "set_mask",
          get_mask: "get_mask",
          get_loaderInfo: "get_loaderInfo",
          set_height: "set_height",
          get_height: "get_height",
          get_cacheAsBitmap: "get_cacheAsBitmap",
          set_alpha: "set_alpha",
          get_alpha: "get_alpha"
        }
      });
      function Da() {
        Ba.call(this);
        this.doubleClickEnabled = false;
        this.mouseEnabled = true;
        this.needsSoftKeyboard = false;
        this.__tabEnabled = null;
        this.__tabIndex = -1;
      }
      h["openfl.display.InteractiveObject"] = Da;
      Da.__name__ = "openfl.display.InteractiveObject";
      Da.__super__ = Ba;
      Da.prototype = q(Ba.prototype, {
        __allowMouseFocus: function () {
          if (this.mouseEnabled) {
            return this.get_tabEnabled();
          } else {
            return false;
          }
        },
        __getInteractive: function (a) {
          if (a != null) {
            a.push(this);
            if (this.parent != null) {
              this.parent.__getInteractive(a);
            }
          }
          return true;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled) {
            return false;
          } else {
            return Ba.prototype.__hitTest.call(this, a, b, c, d, e, f);
          }
        },
        __tabTest: function (a) {
          if (this.get_tabEnabled()) {
            a.push(this);
          }
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == 1) {
            return true;
          } else {
            return false;
          }
        },
        get_tabIndex: function () {
          return this.__tabIndex;
        },
        __class__: Da,
        __properties__: q(Ba.prototype.__properties__, {
          get_tabIndex: "get_tabIndex",
          get_tabEnabled: "get_tabEnabled"
        })
      });
      function gb() {
        Da.call(this);
        this.__tabChildren = this.mouseChildren = true;
        this.__children = [];
        this.__removedChildren = kb.toObjectVector(null);
      }
      h["openfl.display.DisplayObjectContainer"] = gb;
      gb.__name__ = "openfl.display.DisplayObjectContainer";
      gb.__super__ = Da;
      gb.prototype = q(Da.prototype, {
        addChild: function (a) {
          return this.addChildAt(a, this.get_numChildren());
        },
        addChildAt: function (a, b) {
          if (a == null) {
            a = new lh("Error #2007: Parameter child must be non-null.");
            a.errorID = 2007;
            throw a;
          }
          if (a == this) {
            a = new mh("Error #2024: An object cannot be added as a child of itself.");
            a.errorID = 2024;
            throw a;
          }
          if (a.stage == a) {
            a = new mh("Error #3783: A Stage object cannot be added as the child of another object.");
            a.errorID = 3783;
            throw a;
          }
          if (b > this.__children.length || b < 0) {
            throw I.thrown("Invalid index position " + b);
          }
          if (a.parent == this) {
            if (this.__children[b] != a) {
              L.remove(this.__children, a);
              this.__children.splice(b, 0, a);
              if (!this.__renderDirty) {
                this.__renderDirty = true;
                this.__setParentRenderDirty();
              }
            }
          } else {
            if (a.parent != null) {
              a.parent.removeChild(a);
            }
            this.__children.splice(b, 0, a);
            a.parent = this;
            if (b = this.stage != null && a.stage == null) {
              a.__setStageReference(this.stage);
            }
            a.__setTransformDirty();
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            var c = new za("added");
            c.bubbles = true;
            c.target = a;
            a.__dispatchWithCapture(c);
            if (b) {
              c = new za("addedToStage", false, false);
              a.__dispatchWithCapture(c);
              a.__dispatchChildren(c);
            }
          }
          return a;
        },
        contains: function (a) {
          while (a != this && a != null) {
            a = a.parent;
          }
          return a == this;
        },
        getChildAt: function (a) {
          if (a >= 0 && a < this.__children.length) {
            return this.__children[a];
          } else {
            return null;
          }
        },
        getChildByName: function (a) {
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.get_name() == a) {
              return d;
            }
          }
          return null;
        },
        getChildIndex: function (a) {
          for (var b = 0, c = this.__children.length; b < c;) {
            var d = b++;
            if (this.__children[d] == a) {
              return d;
            }
          }
          return -1;
        },
        removeChild: function (a) {
          if (a != null && a.parent == this) {
            a.__setTransformDirty();
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            var b = new za("removed", true);
            a.__dispatchWithCapture(b);
            if (this.stage != null) {
              if (a.stage != null && this.stage.get_focus() == a) {
                this.stage.set_focus(null);
              }
              b = new za("removedFromStage", false, false);
              a.__dispatchWithCapture(b);
              a.__dispatchChildren(b);
              a.__setStageReference(null);
            }
            a.parent = null;
            L.remove(this.__children, a);
            this.__removedChildren.push(a);
            a.__setTransformDirty();
          }
          return a;
        },
        removeChildAt: function (a) {
          if (a >= 0 && a < this.__children.length) {
            return this.removeChild(this.__children[a]);
          } else {
            return null;
          }
        },
        removeChildren: function (a, b) {
          if (b == null) {
            b = 2147483647;
          }
          if (a == null) {
            a = 0;
          }
          if (b == 2147483647 && (b = this.__children.length - 1, b < 0)) {
            return;
          }
          if (!(a > this.__children.length - 1)) {
            if (b < a || a < 0 || b > this.__children.length) {
              throw new Qi("The supplied index is out of bounds.");
            }
            for (b -= a; b >= 0;) {
              this.removeChildAt(a);
              --b;
            }
          }
        },
        __cleanup: function () {
          Da.prototype.__cleanup.call(this);
          for (var a = 0, b = this.__children; a < b.length;) {
            var c = b[a];
            ++a;
            c.__cleanup();
          }
          for (a = this.__removedChildren.iterator(); a.hasNext();) {
            b = a.next();
            if (b.stage == null) {
              b.__cleanup();
            }
          }
          this.__removedChildren.set_length(0);
        },
        __dispatchChildren: function (a) {
          if (this.__children != null) {
            for (var b = 0, c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              a.target = d;
              if (!d.__dispatchWithCapture(a)) {
                break;
              }
              d.__dispatchChildren(a);
            }
          }
        },
        __enterFrame: function (a) {
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            d.__enterFrame(a);
          }
        },
        __getBounds: function (a, b) {
          Da.prototype.__getBounds.call(this, a, b);
          if (this.__children.length != 0) {
            var c = ya.__pool.get();
            for (var d = 0, e = this.__children; d < e.length;) {
              var f = e[d];
              ++d;
              if (f.__scaleX != 0 && f.__scaleY != 0) {
                var k = f.__transform;
                c.a = k.a * b.a + k.b * b.c;
                c.b = k.a * b.b + k.b * b.d;
                c.c = k.c * b.a + k.d * b.c;
                c.d = k.c * b.b + k.d * b.d;
                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                f.__getBounds(a, c);
              }
            }
            ya.__pool.release(c);
          }
        },
        __getFilterBounds: function (a, b) {
          Da.prototype.__getFilterBounds.call(this, a, b);
          if (this.__scrollRect == null && this.__children.length != 0) {
            var c = ya.__pool.get();
            for (var d = 0, e = this.__children; d < e.length;) {
              var f = e[d];
              ++d;
              if (f.__scaleX != 0 && f.__scaleY != 0 && !f.__isMask) {
                var k = f.__transform;
                c.a = k.a * b.a + k.b * b.c;
                c.b = k.a * b.b + k.b * b.d;
                c.c = k.c * b.a + k.d * b.c;
                c.d = k.c * b.b + k.d * b.d;
                c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                k = ba.__pool.get();
                f.__getFilterBounds(k, c);
                a.__expand(k.x, k.y, k.width, k.height);
                ba.__pool.release(k);
              }
            }
            ya.__pool.release(c);
          }
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect != null) {
            Da.prototype.__getRenderBounds.call(this, a, b);
          } else {
            Da.prototype.__getBounds.call(this, a, b);
            if (this.__children.length != 0) {
              var c = ya.__pool.get();
              for (var d = 0, e = this.__children; d < e.length;) {
                var f = e[d];
                ++d;
                if (f.__scaleX != 0 && f.__scaleY != 0 && !f.__isMask) {
                  var k = f.__transform;
                  c.a = k.a * b.a + k.b * b.c;
                  c.b = k.a * b.b + k.b * b.d;
                  c.c = k.c * b.a + k.d * b.c;
                  c.d = k.c * b.b + k.d * b.d;
                  c.tx = k.tx * b.a + k.ty * b.c + b.tx;
                  c.ty = k.tx * b.b + k.ty * b.d + b.ty;
                  f.__getRenderBounds(a, c);
                }
              }
              ya.__pool.release(c);
            }
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled && !this.mouseChildren || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          if (this.__scrollRect != null) {
            var k = ob.__pool.get();
            k.setTo(a, b);
            var t = this.__getRenderTransform();
            var l = t.a * t.d - t.b * t.c;
            if (l == 0) {
              k.x = -t.tx;
              k.y = -t.ty;
            } else {
              var g = 1 / l * (t.c * (t.ty - k.y) + t.d * (k.x - t.tx));
              k.y = 1 / l * (t.a * (k.y - t.ty) + t.b * (t.tx - k.x));
              k.x = g;
            }
            if (!this.__scrollRect.containsPoint(k)) {
              ob.__pool.release(k);
              return false;
            }
            ob.__pool.release(k);
          }
          k = this.__children.length;
          if (e) {
            if (d == null || !this.mouseChildren) {
              while (--k >= 0) {
                if (this.__children[k].__hitTest(a, b, c, null, true, this.__children[k])) {
                  if (d != null) {
                    d.push(f);
                  }
                  return true;
                }
              }
            } else if (d != null) {
              e = d.length;
              for (l = false; --k >= 0 && (!(t = this.__children[k].__getInteractive(null)) && (!this.mouseEnabled || !!l) || !this.__children[k].__hitTest(a, b, c, d, true, this.__children[k]) || !(l = true, t && d.length > e)););
              if (l) {
                d.splice(e, 0, f);
                return true;
              }
            }
          } else {
            for (l = false; --k >= 0 && (!this.__children[k].__hitTest(a, b, c, d, false, this.__children[k]) || (l = true, d != null)););
            return l;
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          for (var c = this.__children.length; --c >= 0;) {
            if (this.__children[c].__hitTestMask(a, b)) {
              return true;
            }
          }
          return false;
        },
        __setStageReference: function (a) {
          Da.prototype.__setStageReference.call(this, a);
          if (this.__children != null) {
            for (var b = 0, c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              d.__setStageReference(a);
            }
          }
        },
        __setWorldTransformInvalid: function () {
          if (!this.__worldTransformInvalid && (this.__worldTransformInvalid = true, this.__children != null)) {
            for (var a = 0, b = this.__children; a < b.length;) {
              var c = b[a];
              ++a;
              c.__setWorldTransformInvalid();
            }
          }
        },
        __tabTest: function (a) {
          Da.prototype.__tabTest.call(this, a);
          if (this.get_tabChildren()) {
            var b;
            for (var c = 0, d = this.__children; c < d.length;) {
              var e = d[c];
              ++c;
              if (b = e.__getInteractive(null)) {
                b = e;
                b.__tabTest(a);
              }
            }
          }
        },
        __update: function (a, b) {
          Da.prototype.__update.call(this, a, b);
          if (b) {
            b = 0;
            for (var c = this.__children; b < c.length;) {
              var d = c[b];
              ++b;
              d.__update(a, true);
            }
          }
        },
        get_numChildren: function () {
          return this.__children.length;
        },
        get_tabChildren: function () {
          return this.__tabChildren;
        },
        __class__: gb,
        __properties__: q(Da.prototype.__properties__, {
          get_tabChildren: "get_tabChildren",
          get_numChildren: "get_numChildren"
        })
      });
      function Ra() {
        gb.call(this);
        this.__drawableType = 4;
        this.__buttonMode = false;
        this.useHandCursor = true;
        if (this.__pendingBindLibrary != null) {
          var a = this.__pendingBindLibrary;
          var b = this.__pendingBindClassName;
          this.__pendingBindClassName = this.__pendingBindLibrary = null;
          a.bind(b, this);
        } else if (Ra.__constructor != null) {
          a = Ra.__constructor;
          Ra.__constructor = null;
          a(this);
        }
      }
      h["openfl.display.Sprite"] = Ra;
      Ra.__name__ = "openfl.display.Sprite";
      Ra.__super__ = gb;
      Ra.prototype = q(gb.prototype, {
        stopDrag: function () {
          if (this.stage != null) {
            this.stage.__stopDrag(this);
          }
        },
        __setStageReference: function (a) {
          if (this.stage != a && this.stage != null && this.stage.__dragObject == this) {
            this.stopDrag();
          }
          gb.prototype.__setStageReference.call(this, a);
        },
        __getCursor: function () {
          if (this.__buttonMode && this.useHandCursor) {
            return "button";
          } else {
            return null;
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (e && !this.mouseEnabled && !this.mouseChildren) {
            return false;
          }
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return this.__hitTestHitArea(a, b, c, d, e, f);
          }
          if (this.__scrollRect != null) {
            var k = ob.__pool.get();
            k.setTo(a, b);
            var t = this.__getRenderTransform();
            var l = t.a * t.d - t.b * t.c;
            if (l == 0) {
              k.x = -t.tx;
              k.y = -t.ty;
            } else {
              var g = 1 / l * (t.c * (t.ty - k.y) + t.d * (k.x - t.tx));
              k.y = 1 / l * (t.a * (k.y - t.ty) + t.b * (t.tx - k.x));
              k.x = g;
            }
            if (!this.__scrollRect.containsPoint(k)) {
              ob.__pool.release(k);
              return this.__hitTestHitArea(a, b, c, d, true, f);
            }
            ob.__pool.release(k);
          }
          if (gb.prototype.__hitTest.call(this, a, b, c, d, e, f)) {
            if (d != null) {
              return e;
            } else {
              return true;
            }
          } else if (this.hitArea == null && this.__graphics != null && this.__graphics.__hitTest(a, b, c, this.__getRenderTransform())) {
            if (d != null && (!e || !!this.mouseEnabled)) {
              d.push(f);
            }
            return true;
          } else {
            return this.__hitTestHitArea(a, b, c, d, e, f);
          }
        },
        __hitTestHitArea: function (a, b, c, d, e, f) {
          if (this.hitArea == null || this.hitArea.mouseEnabled) {
            return false;
          } else {
            this.hitArea.mouseEnabled = true;
            a = this.hitArea.__hitTest(a, b, c, null, true, f);
            this.hitArea.mouseEnabled = false;
            if (d != null && a) {
              d[d.length] = f;
            }
            return a;
          }
        },
        __hitTestMask: function (a, b) {
          if (gb.prototype.__hitTestMask.call(this, a, b) || this.__graphics != null && this.__graphics.__hitTest(a, b, true, this.__getRenderTransform())) {
            return true;
          } else {
            return false;
          }
        },
        get_graphics: function () {
          if (this.__graphics == null) {
            this.__graphics = new ee(this);
          }
          return this.__graphics;
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == null) {
            return this.__buttonMode;
          } else {
            return this.__tabEnabled;
          }
        },
        get_buttonMode: function () {
          return this.__buttonMode;
        },
        __class__: Ra,
        __properties__: q(gb.prototype.__properties__, {
          get_graphics: "get_graphics",
          get_buttonMode: "get_buttonMode"
        })
      });
      function Zb() {
        this.game = {
          width: 1280,
          height: 720,
          initialState: Qc,
          zoom: 1,
          framerate: 60,
          skipSplash: true,
          startFullscreen: false
        };
        Ra.call(this);
        if (this.stage != null) {
          this.init();
        } else {
          this.addEventListener("addedToStage", n(this, this.init));
        }
      }
      h.Main = Zb;
      Zb.__name__ = "Main";
      Zb.main = function () {
        ia.get_current().addChild(new Zb());
      };
      Zb.resetSpriteCache = function (a) {
        a.__cacheBitmap = null;
        a.__cacheBitmapData = null;
      };
      Zb.__super__ = Ra;
      Zb.prototype = q(Ra.prototype, {
        init: function (a) {
          if (this.hasEventListener("addedToStage")) {
            this.removeEventListener("addedToStage", n(this, this.init));
          }
          this.setupGame();
        },
        setupGame: function () {
          ia.get_current();
          ia.get_current();
          $a.instance = new $a();
          C.loadDefaultKeys();
          this.addChild(new pk(this.game.width, this.game.height, xp.fromType(this.game.initialState), this.game.framerate, this.game.framerate, this.game.skipSplash, this.game.startFullscreen));
          Zb.fpsVar = new qk(10, 3, 16777215);
          this.addChild(Zb.fpsVar);
          ia.get_current().stage.align = Gp.fromString("tl");
          ia.get_current().stage.set_scaleMode(2);
          if (Zb.fpsVar != null) {
            Zb.fpsVar.set_visible(C.data.showFPS);
          }
          g.autoPause = false;
          g.mouse.set_visible(false);
          g.signals.gameResized.add(function (a, b) {
            if (g.cameras != null) {
              a = 0;
              b = g.cameras.list;
              while (a < b.length) {
                var c = b[a];
                ++a;
                if (c != null && c.filters != null) {
                  Zb.resetSpriteCache(c.flashSprite);
                }
              }
            }
            if (g.game != null) {
              Zb.resetSpriteCache(g.game);
            }
          });
        },
        __class__: Zb
      });
      function yd(a) {
        a.addChild(this);
        Zb.call(this);
        this.dispatchEvent(new za("addedToStage", false, false));
      }
      h.DocumentClass = yd;
      yd.__name__ = "DocumentClass";
      yd.__super__ = Zb;
      yd.prototype = q(Zb.prototype, {
        __class__: yd
      });
      function na(a, b) {
        this.r = new RegExp(a, b.split("u").join(""));
      }
      h.EReg = na;
      na.__name__ = "EReg";
      na.prototype = {
        match: function (a) {
          if (this.r.global) {
            this.r.lastIndex = 0;
          }
          this.r.m = this.r.exec(a);
          this.r.s = a;
          return this.r.m != null;
        },
        matched: function (a) {
          if (this.r.m != null && a >= 0 && a < this.r.m.length) {
            return this.r.m[a];
          }
          throw I.thrown("EReg::matched");
        },
        matchedPos: function () {
          if (this.r.m == null) {
            throw I.thrown("No string matched");
          }
          return {
            pos: this.r.m.index,
            len: this.r.m[0].length
          };
        },
        matchSub: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (this.r.global) {
            this.r.lastIndex = b;
            this.r.m = this.r.exec(c < 0 ? a : L.substr(a, 0, b + c));
            if (c = this.r.m != null) {
              this.r.s = a;
            }
          } else if (c = this.match(c < 0 ? L.substr(a, b, null) : L.substr(a, b, c))) {
            this.r.s = a;
            this.r.m.index += b;
          }
          return c;
        },
        split: function (a) {
          return a.replace(this.r, "#__delim__#").split("#__delim__#");
        },
        map: function (a, b) {
          var c = 0;
          var d = "";
          do {
            if (c >= a.length) {
              break;
            } else if (!this.matchSub(a, c)) {
              d += y.string(L.substr(a, c, null));
              break;
            }
            var e = this.matchedPos();
            d += y.string(L.substr(a, c, e.pos - c));
            d += y.string(b(this));
            if (e.len == 0) {
              d += y.string(L.substr(a, e.pos, 1));
              c = e.pos + 1;
            } else {
              c = e.pos + e.len;
            }
          } while (this.r.global);
          if (!this.r.global && c > 0 && c < a.length) {
            d += y.string(L.substr(a, c, null));
          }
          return d;
        },
        __class__: na
      };
      function ub() {}
      h["flixel.util.IFlxDestroyable"] = ub;
      ub.__name__ = "flixel.util.IFlxDestroyable";
      ub.__isInterface__ = true;
      ub.prototype = {
        __class__: ub
      };
      function Ca() {
        this.flixelType = 0;
        this.active = this.visible = this.alive = this.exists = true;
        this.ID = Ca.idEnumerator++;
      }
      h["flixel.FlxBasic"] = Ca;
      Ca.__name__ = "flixel.FlxBasic";
      Ca.__interfaces__ = [ub];
      Ca.prototype = {
        destroy: function () {
          if (this.get_container() != null) {
            this.get_container().remove(this);
          }
          this.container = null;
          this.set_exists(false);
          this._cameras = null;
        },
        kill: function () {
          this.set_alive(false);
          this.set_exists(false);
        },
        revive: function () {
          this.set_alive(true);
          this.set_exists(true);
        },
        update: function (a) {},
        draw: function () {},
        set_visible: function (a) {
          return this.visible = a;
        },
        set_active: function (a) {
          return this.active = a;
        },
        set_exists: function (a) {
          return this.exists = a;
        },
        set_alive: function (a) {
          return this.alive = a;
        },
        get_camera: function () {
          if (this._cameras == null || this._cameras.length == 0) {
            return Pb._defaultCameras[0];
          } else {
            return this._cameras[0];
          }
        },
        set_camera: function (a) {
          if (this._cameras == null) {
            this._cameras = [a];
          } else {
            this._cameras[0] = a;
          }
          return a;
        },
        getCameras: function () {
          return this._cameras ?? (this._cameras == null && this.get_container() != null ? this.get_container().getCameras() : Pb._defaultCameras);
        },
        getCamerasLegacy: function () {
          if (this._cameras == null) {
            return Pb._defaultCameras;
          } else {
            return this._cameras;
          }
        },
        get_cameras: function () {
          return this.getCamerasLegacy();
        },
        set_cameras: function (a) {
          return this._cameras = a;
        },
        get_container: function () {
          return this.container;
        },
        __class__: Ca,
        __properties__: {
          get_container: "get_container",
          set_cameras: "set_cameras",
          get_cameras: "get_cameras",
          set_camera: "set_camera",
          get_camera: "get_camera",
          set_exists: "set_exists",
          set_alive: "set_alive",
          set_visible: "set_visible",
          set_active: "set_active"
        }
      };
      function oc(a) {
        this.finishCallback = null;
        var b = this;
        Ca.call(this);
        oc.player = new Ri();
        oc.player.set_x(0);
        oc.player.set_y(0);
        g.addChildBelowMouse(oc.player);
        var c = new Si();
        c.connect(null);
        oc.netStream = new Ti(c);
        oc.netStream.client = {
          onMetaData: function () {
            oc.player.attachNetStream(oc.netStream);
            oc.player.set_width(g.width);
            oc.player.set_height(g.height);
          }
        };
        c.addEventListener("netStatus", function (a) {
          if (a.info.code == "NetStream.Play.Complete") {
            oc.netStream.dispose();
            if (g.game.contains(oc.player)) {
              g.game.removeChild(oc.player);
            }
            if (b.finishCallback != null) {
              b.finishCallback();
            }
          }
        });
        oc.netStream.play(a);
      }
      h.FlxVideo = oc;
      oc.__name__ = "FlxVideo";
      oc.__super__ = Ca;
      oc.prototype = q(Ca.prototype, {
        skipVideo: function () {
          oc.netStream.dispose();
          if (g.game.contains(oc.player)) {
            g.game.removeChild(oc.player);
          }
          if (this.finishCallback != null) {
            this.finishCallback();
          }
        },
        __class__: oc
      });
      function B(a) {
        this.finishCallback = null;
        var b = this;
        Ca.call(this);
        B.player = new Ri();
        B.player.set_x(0);
        B.player.set_y(0);
        g.game.addChildAt(B.player, 2);
        var c = new Si();
        c.connect(null);
        B.netStream = new Ti(c);
        B.netStream.client = {
          onMetaData: function () {
            B.player.attachNetStream(B.netStream);
            B.player.set_width(g.width);
            B.player.set_height(g.height);
          }
        };
        c.addEventListener("netStatus", function (a) {
          if (a.info.code == "NetStream.Play.Complete") {
            B.netStream.dispose();
            if (g.game.contains(B.player)) {
              g.game.removeChild(B.player);
            }
            if (b.finishCallback != null) {
              b.finishCallback();
            }
          }
        });
        B.netStream.play(a);
      }
      h.FlxVideo2 = B;
      B.__name__ = "FlxVideo2";
      B.__super__ = Ca;
      B.prototype = q(Ca.prototype, {
        pause: function () {
          B.netStream.pause();
        },
        resume: function () {
          B.netStream.resume();
        },
        __class__: B
      });
      function L() {}
      h.HxOverrides = L;
      L.__name__ = "HxOverrides";
      L.strDate = function (a) {
        switch (a.length) {
          case 8:
            a = a.split(":");
            var b = new Date();
            b.setTime(0);
            b.setUTCHours(a[0]);
            b.setUTCMinutes(a[1]);
            b.setUTCSeconds(a[2]);
            return b;
          case 10:
            a = a.split("-");
            return new Date(a[0], a[1] - 1, a[2], 0, 0, 0);
          case 19:
            a = a.split(" ");
            b = a[0].split("-");
            a = a[1].split(":");
            return new Date(b[0], b[1] - 1, b[2], a[0], a[1], a[2]);
          default:
            throw I.thrown("Invalid date format : " + a);
        }
      };
      L.cca = function (a, b) {
        a = a.charCodeAt(b);
        if (a == a) {
          return a;
        }
      };
      L.substr = function (a, b, c) {
        if (c == null) {
          c = a.length;
        } else if (c < 0) {
          if (b == 0) {
            c = a.length + c;
          } else {
            return "";
          }
        }
        return a.substr(b, c);
      };
      L.remove = function (a, b) {
        b = a.indexOf(b);
        if (b == -1) {
          return false;
        }
        a.splice(b, 1);
        return true;
      };
      L.keyValueIter = function (a) {
        return new mn(a);
      };
      L.now = function () {
        return Date.now();
      };
      function uf(a, b) {
        this.min = a;
        this.max = b;
      }
      h.IntIterator = uf;
      uf.__name__ = "IntIterator";
      uf.prototype = {
        hasNext: function () {
          return this.min < this.max;
        },
        next: function () {
          return this.min++;
        },
        __class__: uf
      };
      function bb() {}
      h.Lambda = bb;
      bb.__name__ = "Lambda";
      bb.array = function (a) {
        var b = [];
        for (a = M(a); a.hasNext();) {
          var c = a.next();
          b.push(c);
        }
        return b;
      };
      function eb() {}
      h.ManifestResources = eb;
      eb.__name__ = "ManifestResources";
      eb.init = function (a) {
        eb.preloadLibraries = [];
        eb.preloadLibraryNames = [];
        eb.rootPath = null;
        if (a != null && Object.prototype.hasOwnProperty.call(a, "rootPath")) {
          eb.rootPath = ha.field(a, "rootPath");
          if (!v.endsWith(eb.rootPath, "/")) {
            eb.rootPath += "/";
          }
        }
        if (eb.rootPath == null) {
          eb.rootPath = "./";
        }
        fb.registerFont(Qb);
        fb.registerFont(u);
        fb.registerFont(wb);
        fb.registerFont(La);
        fb.registerFont(Y);
        oa.libraryPaths.h.songs = eb.rootPath + "manifest/songs.json";
        a = Qd.parse("{\"name\":null,\"assets\":\"aoy4:pathy34:assets%2Ffonts%2Ffonts-go-here.txty4:sizezy4:typey4:TEXTy2:idR1y7:preloadtgoR2i14656R3y4:FONTy9:classNamey31:__ASSET__assets_fonts_pixel_otfR5y26:assets%2Ffonts%2Fpixel.otfR6tgoR2i16312R3R7R8y39:__ASSET__assets_fonts_supermario256_ttfR5y34:assets%2Ffonts%2FSuperMario256.ttfR6tgoR2i75864R3R7R8y29:__ASSET__assets_fonts_vcr_ttfR5y24:assets%2Ffonts%2Fvcr.ttfR6tgoR0y43:assets%2Fshared%2Fcharacters%2Fbf-dead.jsonR2i709R3R4R5R15R6tgoR0y38:assets%2Fshared%2Fcharacters%2Fbf.jsonR2i2467R3R4R5R16R6tgoR0y46:assets%2Fshared%2Fcharacters%2Fdetg-chair.jsonR2i932R3R4R5R17R6tgoR0y44:assets%2Fshared%2Fcharacters%2Fdetg-run.jsonR2i1209R3R4R5R18R6tgoR0y44:assets%2Fshared%2Fcharacters%2Fdetg-saw.jsonR2i952R3R4R5R19R6tgoR0y47:assets%2Fshared%2Fcharacters%2Fdetg-shadow.jsonR2i934R3R4R5R20R6tgoR0y40:assets%2Fshared%2Fcharacters%2Fdetg.jsonR2i2212R3R4R5R21R6tgoR0y40:assets%2Fshared%2Fcharacters%2Fdstg.jsonR2i958R3R4R5R22R6tgoR0y38:assets%2Fshared%2Fcharacters%2Fgf.jsonR2i2326R3R4R5R23R6tgoR0y55:assets%2Fshared%2Fcharacters%2Fmarvin-shucks-chair.jsonR2i1515R3R4R5R24R6tgoR0y53:assets%2Fshared%2Fcharacters%2Fmarvin-shucks-run.jsonR2i1517R3R4R5R25R6tgoR0y56:assets%2Fshared%2Fcharacters%2Fmarvin-shucks-shadow.jsonR2i1089R3R4R5R26R6tgoR0y49:assets%2Fshared%2Fcharacters%2Fmarvin-shucks.jsonR2i3122R3R4R5R27R6tgoR0y52:assets%2Fshared%2Fcharacters%2Frose-shucks-dead.jsonR2i425R3R4R5R28R6tgoR0y47:assets%2Fshared%2Fcharacters%2Frose-shucks.jsonR2i1536R3R4R5R29R6tgoR0y40:assets%2Fshared%2Fcharacters%2Fspog.jsonR2i931R3R4R5R30R6tgoR0y42:assets%2Fshared%2Fdata%2FcharacterList.txtR2i6R3R4R5R31R6tgoR0y43:assets%2Fshared%2Fdata%2Fdata-goes-here.txtR2zR3R4R5R32R6tgoR0y38:assets%2Fshared%2Fdata%2FintroText.txtR2i2329R3R4R5R33R6tgoR0y38:assets%2Fshared%2Fdata%2Fmain-view.xmlR2i123R3R4R5R34R6tgoR0y45:assets%2Fshared%2Fdata%2Fshucks%2Fshucks.jsonR2i326872R3R4R5R35R6tgoR0y48:assets%2Fshared%2Fdata%2Fshucks%2FshucksNEW.jsonR2i328169R3R4R5R36R6tgoR0y42:assets%2Fshared%2Fdata%2FspecialThanks.txtR2i300R3R4R5R37R6tgoR0y45:assets%2Fshared%2Fdata%2Fsqucks%2Fsqucks.jsonR2i59010R3R4R5R38R6tgoR0y38:assets%2Fshared%2Fdata%2FstageList.txtR2i61R3R4R5R39R6tgoR0y54:assets%2Fshared%2Fimages%2Fachievements%2Fdebugger.pngR2i3351R3y5:IMAGER5R40R6tgoR0y63:assets%2Fshared%2Fimages%2Fachievements%2Ffriday_night_play.pngR2i3501R3R41R5R42R6tgoR0y50:assets%2Fshared%2Fimages%2Fachievements%2Fhype.pngR2i9298R3R41R5R43R6tgoR0y63:assets%2Fshared%2Fimages%2Fachievements%2Flockedachievement.pngR2i1544R3R41R5R44R6tgoR0y57:assets%2Fshared%2Fimages%2Fachievements%2Foversinging.pngR2i7965R3R41R5R45R6tgoR0y65:assets%2Fshared%2Fimages%2Fachievements%2Froadkill_enthusiast.pngR2i3445R3R41R5R46R6tgoR0y53:assets%2Fshared%2Fimages%2Fachievements%2Ftoastie.pngR2i2805R3R41R5R47R6tgoR0y54:assets%2Fshared%2Fimages%2Fachievements%2Ftwo_keys.pngR2i10110R3R41R5R48R6tgoR0y52:assets%2Fshared%2Fimages%2Fachievements%2Fur_bad.pngR2i8758R3R41R5R49R6tgoR0y53:assets%2Fshared%2Fimages%2Fachievements%2Fur_good.pngR2i3117R3R41R5R50R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek1_nomiss.pngR2i7330R3R41R5R51R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek2_nomiss.pngR2i4098R3R41R5R52R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek3_nomiss.pngR2i7697R3R41R5R53R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek4_nomiss.pngR2i4868R3R41R5R54R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek5_nomiss.pngR2i8972R3R41R5R55R6tgoR0y64:assets%2Fshared%2Fimages%2Fachievements%2Fweek6_nomiss-pixel.pngR2i593R3R41R5R56R6tgoR0y58:assets%2Fshared%2Fimages%2Fachievements%2Fweek7_nomiss.pngR2i3204R3R41R5R57R6tgoR0y39:assets%2Fshared%2Fimages%2Falphabet.pngR2i358406R3R41R5R58R6tgoR0y39:assets%2Fshared%2Fimages%2Falphabet.xmlR2i105671R3R4R5R59R6tgoR0y51:assets%2Fshared%2Fimages%2Falphabet_playstation.pngR2i2717R3R41R5R60R6tgoR0y51:assets%2Fshared%2Fimages%2Falphabet_playstation.xmlR2i1209R3R4R5R61R6tgoR0y34:assets%2Fshared%2Fimages%2Fbad.pngR2i20613R3R41R5R62R6tgoR0y54:assets%2Fshared%2Fimages%2Fcampaign_menu_UI_assets.pngR2i3044R3R41R5R63R6tgoR0y54:assets%2Fshared%2Fimages%2Fcampaign_menu_UI_assets.xmlR2i597R3R4R5R64R6tgoR0y53:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND.pngR2i731065R3R41R5R65R6tgoR0y53:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND.xmlR2i52069R3R4R5R66R6tgoR0y58:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND_DEAD.pngR2i566723R3R41R5R67R6tgoR0y58:assets%2Fshared%2Fimages%2Fcharacters%2FBOYFRIEND_DEAD.xmlR2i15438R3R4R5R68R6tgoR0y61:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg%2FAnimation.jsonR2i1411127R3R4R5R69R6tgoR0y62:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg%2Fspritemap1.jsonR2i100926R3R4R5R70R6tgoR0y61:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg%2Fspritemap1.pngR2i4419172R3R41R5R71R6tgoR0y67:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-chair%2FAnimation.jsonR2i49503R3R4R5R72R6tgoR0y68:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-chair%2Fspritemap1.jsonR2i993R3R4R5R73R6tgoR0y67:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-chair%2Fspritemap1.pngR2i199673R3R41R5R74R6tgoR0y52:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-run.pngR2i3332870R3R41R5R75R6tgoR0y52:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-run.xmlR2i16862R3R4R5R76R6tgoR0y65:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-saw%2FAnimation.jsonR2i31987R3R4R5R77R6tgoR0y66:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-saw%2Fspritemap1.jsonR2i2314R3R4R5R78R6tgoR0y65:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-saw%2Fspritemap1.pngR2i116742R3R41R5R79R6tgoR0y55:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-shadow.pngR2i215233R3R41R5R80R6tgoR0y55:assets%2Fshared%2Fimages%2Fcharacters%2Fdetg-shadow.xmlR2i7417R3R4R5R81R6tgoR0y61:assets%2Fshared%2Fimages%2Fcharacters%2Fdstg%2FAnimation.jsonR2i142487R3R4R5R82R6tgoR0y62:assets%2Fshared%2Fimages%2Fcharacters%2Fdstg%2Fspritemap1.jsonR2i10144R3R4R5R83R6tgoR0y61:assets%2Fshared%2Fimages%2Fcharacters%2Fdstg%2Fspritemap1.pngR2i600934R3R41R5R84R6tgoR0y53:assets%2Fshared%2Fimages%2Fcharacters%2FGF_assets.pngR2i209197R3R41R5R85R6tgoR0y53:assets%2Fshared%2Fimages%2Fcharacters%2FGF_assets.xmlR2i4364R3R4R5R86R6tgoR0y70:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks%2FAnimation.jsonR2i573892R3R4R5R87R6tgoR0y71:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks%2Fspritemap1.jsonR2i17915R3R4R5R88R6tgoR0y70:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks%2Fspritemap1.pngR2i1760633R3R41R5R89R6tgoR0y76:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks-chair%2FAnimation.jsonR2i132471R3R4R5R90R6tgoR0y77:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks-chair%2Fspritemap1.jsonR2i1769R3R4R5R91R6tgoR0y76:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks-chair%2Fspritemap1.pngR2i462161R3R41R5R92R6tgoR0y74:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks-run%2FAnimation.jsonR2i118634R3R4R5R93R6tgoR0y75:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks-run%2Fspritemap1.jsonR2i4546R3R4R5R94R6tgoR0y74:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks-run%2Fspritemap1.pngR2i422884R3R41R5R95R6tgoR0y64:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks-shadow.pngR2i461318R3R41R5R96R6tgoR0y64:assets%2Fshared%2Fimages%2Fcharacters%2Fmarvin-shucks-shadow.xmlR2i33633R3R4R5R97R6tgoR0y68:assets%2Fshared%2Fimages%2Fcharacters%2Frose-shucks%2FAnimation.jsonR2i551230R3R4R5R98R6tgoR0y69:assets%2Fshared%2Fimages%2Fcharacters%2Frose-shucks%2Fspritemap1.jsonR2i13697R3R4R5R99R6tgoR0y68:assets%2Fshared%2Fimages%2Fcharacters%2Frose-shucks%2Fspritemap1.pngR2i406417R3R41R5R100R6tgoR0y60:assets%2Fshared%2Fimages%2Fcharacters%2Frose-shucks-dead.pngR2i191186R3R41R5R101R6tgoR0y60:assets%2Fshared%2Fimages%2Fcharacters%2Frose-shucks-dead.xmlR2i2166R3R4R5R102R6tgoR0y48:assets%2Fshared%2Fimages%2Fcharacters%2Fspog.pngR2i319551R3R41R5R103R6tgoR0y48:assets%2Fshared%2Fimages%2Fcharacters%2Fspog.xmlR2i7060R3R4R5R104R6tgoR0y42:assets%2Fshared%2Fimages%2Fchart_quant.pngR2i3143R3R41R5R105R6tgoR0y42:assets%2Fshared%2Fimages%2Fchart_quant.xmlR2i1028R3R4R5R106R6tgoR0y43:assets%2Fshared%2Fimages%2Fcheckboxanim.pngR2i16546R3R41R5R107R6tgoR0y43:assets%2Fshared%2Fimages%2Fcheckboxanim.xmlR2i1976R3R4R5R108R6tgoR0y36:assets%2Fshared%2Fimages%2Fcombo.pngR2i14255R3R41R5R109R6tgoR0y45:assets%2Fshared%2Fimages%2Fcontrollertype.pngR2i2153R3R41R5R110R6tgoR0y43:assets%2Fshared%2Fimages%2Fcredits%2Fbb.pngR2i1440R3R41R5R111R6tgoR0y51:assets%2Fshared%2Fimages%2Fcredits%2Fcrowplexus.pngR2i2021R3R41R5R112R6tgoR0y48:assets%2Fshared%2Fimages%2Fcredits%2Fdiscord.pngR2i1440R3R41R5R113R6tgoR0y49:assets%2Fshared%2Fimages%2Fcredits%2Fevilsk8r.pngR2i2288R3R41R5R114R6tgoR0y47:assets%2Fshared%2Fimages%2Fcredits%2Fflicky.pngR2i1995R3R41R5R115R6tgoR0y45:assets%2Fshared%2Fimages%2Fcredits%2Fkade.pngR2i3465R3R41R5R116R6tgoR0y52:assets%2Fshared%2Fimages%2Fcredits%2Fkawaisprite.pngR2i1203R3R41R5R117R6tgoR0y47:assets%2Fshared%2Fimages%2Fcredits%2Fkeoiki.pngR2i1867R3R41R5R118R6tgoR0y51:assets%2Fshared%2Fimages%2Fcredits%2Fmastereric.pngR2i2510R3R41R5R119R6tgoR0y53:assets%2Fshared%2Fimages%2Fcredits%2Fmissing_icon.pngR2i1249R3R41R5R120R6tgoR0y54:assets%2Fshared%2Fimages%2Fcredits%2Fninjamuffin99.pngR2i1604R3R41R5R121R6tgoR0y54:assets%2Fshared%2Fimages%2Fcredits%2Fphantomarcade.pngR2i2662R3R41R5R122R6tgoR0y46:assets%2Fshared%2Fimages%2Fcredits%2Fproxy.pngR2i2274R3R41R5R123R6tgoR0y48:assets%2Fshared%2Fimages%2Fcredits%2Friveren.pngR2i2383R3R41R5R124R6tgoR0y52:assets%2Fshared%2Fimages%2Fcredits%2Fshadowmario.pngR2i1758R3R41R5R125R6tgoR0y47:assets%2Fshared%2Fimages%2Fcredits%2Fsqirra.pngR2i2252R3R41R5R126R6tgoR0y54:assets%2Fshared%2Fimages%2Fcredits%2Fsuperpowers04.pngR2i2015R3R41R5R127R6tgoR0y46:assets%2Fshared%2Fimages%2Fcredits%2Ftahir.pngR2i2529R3R41R5R128R6tgoR0y38:assets%2Fshared%2Fimages%2Fdefault.pngR2i793200R3R41R5R129R6tgoR0y38:assets%2Fshared%2Fimages%2Fdefault.xmlR2i6940R3R4R5R130R6tgoR0y35:assets%2Fshared%2Fimages%2Fdoor.pngR2i229133R3R41R5R131R6tgoR0y41:assets%2Fshared%2Fimages%2FeventArrow.pngR2i8264R3R41R5R132R6tgoR0y37:assets%2Fshared%2Fimages%2Ffunkay.pngR2i96575R3R41R5R133R6tgoR0y63:assets%2Fshared%2Fimages%2Fgame%2Fbars%2Fdefault-downscroll.pngR2i68495R3R41R5R134R6tgoR0y52:assets%2Fshared%2Fimages%2Fgame%2Fbars%2Fdefault.pngR2i71637R3R41R5R135R6tgoR0y51:assets%2Fshared%2Fimages%2Fgame%2Fbars%2Fshadow.pngR2i23303R3R41R5R136R6tgoR0y52:assets%2Fshared%2Fimages%2Fgame%2Fcards%2Fshucks.pngR2i588791R3R41R5R137R6tgoR0y52:assets%2Fshared%2Fimages%2Fgame%2Fcards%2Fsqucks.pngR2i46470R3R41R5R138R6tgoR0y56:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fbad-shadow.pngR2i9341R3R41R5R139R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fgood-shadow.pngR2i23706R3R41R5R140R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum0-shadow.pngR2i9435R3R41R5R141R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum1-shadow.pngR2i6248R3R41R5R142R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum2-shadow.pngR2i9045R3R41R5R143R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum3-shadow.pngR2i8730R3R41R5R144R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum4-shadow.pngR2i7773R3R41R5R145R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum5-shadow.pngR2i9384R3R41R5R146R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum6-shadow.pngR2i9212R3R41R5R147R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum7-shadow.pngR2i8156R3R41R5R148R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum8-shadow.pngR2i8292R3R41R5R149R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fnum9-shadow.pngR2i8126R3R41R5R150R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fshit-shadow.pngR2i16682R3R41R5R151R6tgoR0y57:assets%2Fshared%2Fimages%2Fgame%2Fscore%2Fsick-shadow.pngR2i24081R3R41R5R152R6tgoR0y46:assets%2Fshared%2Fimages%2Fgame%2Fshuckies.pngR2i37355R3R41R5R153R6tgoR0y46:assets%2Fshared%2Fimages%2Fgame%2Fshuckies.xmlR2i1738R3R4R5R154R6tgoR0y44:assets%2Fshared%2Fimages%2FgfDanceTitle.jsonR2i124R3R4R5R155R6tgoR0y33:assets%2Fshared%2Fimages%2Fgo.pngR2i5889R3R41R5R156R6tgoR0y35:assets%2Fshared%2Fimages%2Fgood.pngR2i36176R3R41R5R157R6tgoR0y40:assets%2Fshared%2Fimages%2FhealthBar.pngR2i551R3R41R5R158R6tgoR0y50:assets%2Fshared%2Fimages%2Ficons%2Fdetg-shadow.pngR2i5663R3R41R5R159R6tgoR0y43:assets%2Fshared%2Fimages%2Ficons%2Fdetg.pngR2i9352R3R41R5R160R6tgoR0y43:assets%2Fshared%2Fimages%2Ficons%2Fdstg.pngR2i11989R3R41R5R161R6tgoR0y46:assets%2Fshared%2Fimages%2Ficons%2Ficon-bf.pngR2i4686R3R41R5R162R6tgoR0y48:assets%2Fshared%2Fimages%2Ficons%2Ficon-face.pngR2i1858R3R41R5R163R6tgoR0y46:assets%2Fshared%2Fimages%2Ficons%2Ficon-gf.pngR2i2737R3R41R5R164R6tgoR0y59:assets%2Fshared%2Fimages%2Ficons%2Fmarvin-shucks-bloody.pngR2i6793R3R41R5R165R6tgoR0y59:assets%2Fshared%2Fimages%2Ficons%2Fmarvin-shucks-shadow.pngR2i2577R3R41R5R166R6tgoR0y52:assets%2Fshared%2Fimages%2Ficons%2Fmarvin-shucks.pngR2i3662R3R41R5R167R6tgoR0y50:assets%2Fshared%2Fimages%2Ficons%2Frose-shucks.pngR2i8309R3R41R5R168R6tgoR0y43:assets%2Fshared%2Fimages%2Ficons%2Fspog.pngR2i10168R3R41R5R169R6tgoR0y35:assets%2Fshared%2Fimages%2Flogo.pngR2i86924R3R41R5R170R6tgoR0y41:assets%2Fshared%2Fimages%2FlogoBumpin.pngR2i578147R3R41R5R171R6tgoR0y41:assets%2Fshared%2Fimages%2FlogoBumpin.xmlR2i2177R3R4R5R172R6tgoR0y53:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_awards.pngR2i29851R3R41R5R173R6tgoR0y53:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_awards.xmlR2i1380R3R4R5R174R6tgoR0y54:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_credits.pngR2i30040R3R41R5R175R6tgoR0y54:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_credits.xmlR2i1385R3R4R5R176R6tgoR0y53:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_donate.pngR2i25369R3R41R5R177R6tgoR0y53:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_donate.xmlR2i1375R3R4R5R178R6tgoR0y55:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_freeplay.pngR2i31397R3R41R5R179R6tgoR0y55:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_freeplay.xmlR2i1399R3R4R5R180R6tgoR0y51:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_mods.pngR2i23363R3R41R5R181R6tgoR0y51:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_mods.xmlR2i1644R3R4R5R182R6tgoR0y54:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_options.pngR2i28199R3R41R5R183R6tgoR0y54:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_options.xmlR2i1332R3R4R5R184R6tgoR0y57:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_story_mode.pngR2i57076R3R41R5R185R6tgoR0y57:assets%2Fshared%2Fimages%2Fmainmenu%2Fmenu_story_mode.xmlR2i1444R3R4R5R186R6tgoR0y59:assets%2Fshared%2Fimages%2Fmenubackgrounds%2Fmenu_stage.pngR2i11881R3R41R5R187R6tgoR0y37:assets%2Fshared%2Fimages%2FmenuBG.pngR2i474435R3R41R5R188R6tgoR0y41:assets%2Fshared%2Fimages%2FmenuBGBlue.pngR2i1139874R3R41R5R189R6tgoR0y44:assets%2Fshared%2Fimages%2FmenuBGMagenta.pngR2i446604R3R41R5R190R6tgoR0y40:assets%2Fshared%2Fimages%2FmenuDesat.pngR2i215613R3R41R5R191R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenudifficulties%2Feasy.pngR2i3453R3R41R5R192R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenudifficulties%2Fhard.pngR2i1937R3R41R5R193R6tgoR0y56:assets%2Fshared%2Fimages%2Fmenudifficulties%2Fnormal.pngR2i2527R3R41R5R194R6tgoR0y51:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fbg.pngR2i234666R3R41R5R195R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fchars.pngR2i642910R3R41R5R196R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fchars.xmlR2i58472R3R4R5R197R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fquotes.pngR2i1278274R3R41R5R198R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fquotes.xmlR2i3282R3R4R5R199R6tgoR0y67:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fspecialthx%2Fefkli.pngR2i77291R3R41R5R200R6tgoR0y68:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fspecialthx%2Fsirvko.pngR2i30182R3R41R5R201R6tgoR0y70:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fspecialthx%2Fspringon.pngR2i15743R3R41R5R202R6tgoR0y71:assets%2Fshared%2Fimages%2Fmenus%2Fcredits%2Fspecialthx%2Ftop%20hat.pngR2i15746R3R41R5R203R6tgoR0y64:assets%2Fshared%2Fimages%2Fmenus%2Fgameover%2Fshucks%2Fboner.pngR2i63088R3R41R5R204R6tgoR0y63:assets%2Fshared%2Fimages%2Fmenus%2Fgameover%2Fshucks%2Fglow.pngR2i652404R3R41R5R205R6tgoR0y64:assets%2Fshared%2Fimages%2Fmenus%2Fgameover%2Fshucks%2Ftable.pngR2i265877R3R41R5R206R6tgoR0y58:assets%2Fshared%2Fimages%2Fmenus%2Fmaindemo%2Fcodemenu.pngR2i36837R3R41R5R207R6tgoR0y57:assets%2Fshared%2Fimages%2Fmenus%2Fmaindemo%2Fcredits.pngR2i29876R3R41R5R208R6tgoR0y57:assets%2Fshared%2Fimages%2Fmenus%2Fmaindemo%2Fgallery.pngR2i32325R3R41R5R209R6tgoR0y57:assets%2Fshared%2Fimages%2Fmenus%2Fmaindemo%2Foptions.pngR2i31237R3R41R5R210R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenus%2Fmaindemo%2Fplay.pngR2i18483R3R41R5R211R6tgoR0y51:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fbarl.pngR2i207312R3R41R5R212R6tgoR0y51:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fbarr.pngR2i353950R3R41R5R213R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fbarrover.pngR2i37124R3R41R5R214R6tgoR0y59:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fbarroverlong.pngR2i118540R3R41R5R215R6tgoR0y60:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fbarroversmall.pngR2i64288R3R41R5R216R6tgoR0y56:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fexit-glow.pngR2i56441R3R41R5R217R6tgoR0y51:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fexit.pngR2i103643R3R41R5R218R6tgoR0y61:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Frenders%2Fnull.pngR2i261948R3R41R5R219R6tgoR0y63:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Frenders%2Fshucks.pngR2i460556R3R41R5R220R6tgoR0y59:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Frestart-glow.pngR2i83149R3R41R5R221R6tgoR0y54:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Frestart.pngR2i178339R3R41R5R222R6tgoR0y58:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fresume-glow.pngR2i93239R3R41R5R223R6tgoR0y53:assets%2Fshared%2Fimages%2Fmenus%2Fpause%2Fresume.pngR2i181881R3R41R5R224R6tgoR0y49:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fbg.pngR2i185646R3R41R5R225R6tgoR0y51:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Flogo.pngR2i367065R3R41R5R226R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fpillar-1.pngR2i297909R3R41R5R227R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fpillar-2.pngR2i227854R3R41R5R228R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fpillar-3.pngR2i268576R3R41R5R229R6tgoR0y58:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fpillar-edge.pngR2i113688R3R41R5R230R6tgoR0y57:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fpillar-mid.pngR2i311700R3R41R5R231R6tgoR0y53:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fspikes.pngR2i74748R3R41R5R232R6tgoR0y57:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fstart-glow.pngR2i74158R3R41R5R233R6tgoR0y52:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fstart.pngR2i62693R3R41R5R234R6tgoR0y55:assets%2Fshared%2Fimages%2Fmenus%2Ftitle%2Fvignette.pngR2i172575R3R41R5R235R6tgoR0y42:assets%2Fshared%2Fimages%2FMenu_Tracks.pngR2i1254R3R41R5R236R6tgoR0y46:assets%2Fshared%2Fimages%2Fnewgrounds_logo.pngR2i40016R3R41R5R237R6tgoR0y50:assets%2Fshared%2Fimages%2FnoteSplashes%2Flist.txtR2i33R3R4R5R238R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-diamond.pngR2i32456R3R41R5R239R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-diamond.txtR2i89R3R4R5R240R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-diamond.xmlR2i4415R3R4R5R241R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-electric.pngR2i26326R3R41R5R242R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-electric.txtR2i28R3R4R5R243R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-electric.xmlR2i2584R3R4R5R244R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-sparkles.pngR2i22341R3R41R5R245R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-sparkles.txtR2i29R3R4R5R246R6tgoR0y67:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-sparkles.xmlR2i2596R3R4R5R247R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-vanilla.pngR2i184255R3R41R5R248R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-vanilla.txtR2i84R3R4R5R249R6tgoR0y66:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes-vanilla.xmlR2i4725R3R4R5R250R6tgoR0y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.pngR2i33060R3R41R5R251R6tgoR0y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.txtR2i81R3R4R5R252R6tgoR0y58:assets%2Fshared%2Fimages%2FnoteSplashes%2FnoteSplashes.xmlR2i4383R3R4R5R253R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum0.pngR2i37575R3R41R5R254R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum1.pngR2i30100R3R41R5R255R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum2.pngR2i38690R3R41R5R256R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum3.pngR2i40317R3R41R5R257R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum4.pngR2i33051R3R41R5R258R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum5.pngR2i40131R3R41R5R259R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum6.pngR2i35462R3R41R5R260R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum7.pngR2i31258R3R41R5R261R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum8.pngR2i41168R3R41R5R262R6tgoR0y35:assets%2Fshared%2Fimages%2Fnum9.pngR2i40757R3R41R5R263R6tgoR0y50:assets%2Fshared%2Fimages%2FpixelUI%2Fbad-pixel.pngR2i228R3R41R5R264R6tgoR0y52:assets%2Fshared%2Fimages%2FpixelUI%2Fcombo-pixel.pngR2i247R3R41R5R265R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fdate-pixel.pngR2i518R3R41R5R266R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fgood-pixel.pngR2i237R3R41R5R267R6tgoR0y69:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets-chip.pngR2i1480R3R41R5R268R6tgoR0y71:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets-future.pngR2i2351R3R41R5R269R6tgoR0y64:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assets.pngR2i3337R3R41R5R270R6tgoR0y73:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS-chip.pngR2i246R3R41R5R271R6tgoR0y75:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS-future.pngR2i258R3R41R5R272R6tgoR0y68:assets%2Fshared%2Fimages%2FpixelUI%2FnoteSkins%2FNOTE_assetsENDS.pngR2i202R3R41R5R273R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum0-pixel.pngR2i132R3R41R5R274R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum1-pixel.pngR2i123R3R41R5R275R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum2-pixel.pngR2i139R3R41R5R276R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum3-pixel.pngR2i137R3R41R5R277R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum4-pixel.pngR2i132R3R41R5R278R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum5-pixel.pngR2i135R3R41R5R279R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum6-pixel.pngR2i138R3R41R5R280R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum7-pixel.pngR2i141R3R41R5R281R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum8-pixel.pngR2i129R3R41R5R282R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fnum9-pixel.pngR2i127R3R41R5R283R6tgoR0y52:assets%2Fshared%2Fimages%2FpixelUI%2Fready-pixel.pngR2i531R3R41R5R284R6tgoR0y50:assets%2Fshared%2Fimages%2FpixelUI%2Fset-pixel.pngR2i485R3R41R5R285R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fshit-pixel.pngR2i292R3R41R5R286R6tgoR0y51:assets%2Fshared%2Fimages%2FpixelUI%2Fsick-pixel.pngR2i307R3R41R5R287R6tgoR0y36:assets%2Fshared%2Fimages%2Fready.pngR2i28966R3R41R5R288R6tgoR0y34:assets%2Fshared%2Fimages%2Fset.pngR2i25471R3R41R5R289R6tgoR0y37:assets%2Fshared%2Fimages%2Fshadow.pngR2i283906R3R41R5R290R6tgoR0y37:assets%2Fshared%2Fimages%2Fshadow.xmlR2i6929R3R4R5R291R6tgoR0y35:assets%2Fshared%2Fimages%2Fshit.pngR2i36018R3R41R5R292R6tgoR0y35:assets%2Fshared%2Fimages%2Fsick.pngR2i34835R3R41R5R293R6tgoR0y36:assets%2Fshared%2Fimages%2Fsmoke.pngR2i3731R3R41R5R294R6tgoR0y38:assets%2Fshared%2Fimages%2Fsnokido.pngR2i6645R3R41R5R295R6tgoR0y44:assets%2Fshared%2Fimages%2Fspeech_bubble.pngR2i189234R3R41R5R296R6tgoR0y44:assets%2Fshared%2Fimages%2Fspeech_bubble.xmlR2i9686R3R4R5R297R6tgoR0y37:assets%2Fshared%2Fimages%2Fsplash.pngR2i432015R3R41R5R298R6tgoR0y37:assets%2Fshared%2Fimages%2Fsplash.xmlR2i4849R3R4R5R299R6tgoR0y43:assets%2Fshared%2Fimages%2Fsplashshadow.pngR2i23023R3R41R5R300R6tgoR0y43:assets%2Fshared%2Fimages%2Fsplashshadow.xmlR2i4735R3R4R5R301R6tgoR0y40:assets%2Fshared%2Fimages%2Fspotlight.pngR2i12487R3R41R5R302R6tgoR0y40:assets%2Fshared%2Fimages%2Fstageback.pngR2i14010R3R41R5R303R6tgoR0y44:assets%2Fshared%2Fimages%2Fstagecurtains.pngR2i123947R3R41R5R304R6tgoR0y41:assets%2Fshared%2Fimages%2Fstagefront.pngR2i120269R3R41R5R305R6tgoR0y51:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fbg.pngR2i3660404R3R41R5R306R6tgoR0y51:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fbg.xmlR2i1622R3R4R5R307R6tgoR0y52:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fbg_.pngR2i2476072R3R41R5R308R6tgoR0y54:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fchair.pngR2i575326R3R41R5R309R6tgoR0y56:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fchairbg.pngR2i348168R3R41R5R310R6tgoR0y58:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fchairdark.pngR2i1366134R3R41R5R311R6tgoR0y58:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fchairglow.pngR2i2756497R3R41R5R312R6tgoR0y68:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fchairintro%2Fbottom.pngR2i424722R3R41R5R313R6tgoR0y68:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fchairintro%2Fbottom.xmlR2i3504R3R4R5R314R6tgoR0y65:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fchairintro%2Ftop.pngR2i684003R3R41R5R315R6tgoR0y65:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fchairintro%2Ftop.xmlR2i3283R3R4R5R316R6tgoR0y57:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fdarkness.pngR2i241209R3R41R5R317R6tgoR0y60:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fdarknessred.pngR2i885329R3R41R5R318R6tgoR0y53:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Fglow.pngR2i348858R3R41R5R319R6tgoR0y53:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Flegs.pngR2i170308R3R41R5R320R6tgoR0y53:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Flegs.xmlR2i4694R3R4R5R321R6tgoR0y55:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Frunadd.pngR2i98664R3R41R5R322R6tgoR0y60:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Frundarkness.pngR2i72925R3R41R5R323R6tgoR0y59:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Frunhallway.pngR2i28527833R3R41R5R324R6tgoR0y59:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Frunhallway.xmlR2i14797R3R4R5R325R6tgoR0y57:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2Frunmulti.pngR2i907684R3R41R5R326R6tgoR0y59:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2FShucksText.pngR2i3740272R3R41R5R327R6tgoR0y59:assets%2Fshared%2Fimages%2Fstages%2Fshucks%2FShucksText.xmlR2i13977R3R4R5R328R6tgoR0y60:assets%2Fshared%2Fimages%2Fstages%2Fsqucks%2Fdarknessred.pngR2i73581R3R41R5R329R6tgoR0y55:assets%2Fshared%2Fimages%2Fstages%2Fsqucks%2Flight2.pngR2i15475R3R41R5R330R6tgoR0y53:assets%2Fshared%2Fimages%2Fstages%2Fsqucks%2Fmult.pngR2i34033R3R41R5R331R6tgoR0y56:assets%2Fshared%2Fimages%2Fstages%2Fsqucks%2Fsquckbg.pngR2i326237R3R41R5R332R6tgoR0y42:assets%2Fshared%2Fimages%2Fstage_light.pngR2i7324R3R41R5R333R6tgoR0y48:assets%2Fshared%2Fimages%2Fstorymenu%2Fweek1.pngR2i6261R3R41R5R334R6tgoR0y38:assets%2Fshared%2Fimages%2FtimeBar.pngR2i367R3R41R5R335R6tgoR0y41:assets%2Fshared%2Fimages%2FtitleEnter.pngR2i26291R3R41R5R336R6tgoR0y41:assets%2Fshared%2Fimages%2FtitleEnter.xmlR2i518R3R4R5R337R6tgoR0y41:assets%2Fshared%2Fimages%2FunknownMod.pngR2i2387R3R41R5R338R6tgoR2i2099745R3y5:MUSICR5y39:assets%2Fshared%2Fmusic%2Fbreakfast.mp3y9:pathGroupaR340hR6tgoR2i6802700R3R339R5y40:assets%2Fshared%2Fmusic%2FfreakyMenu.mp3R341aR342hR6tgoR2i2041726R3R339R5y38:assets%2Fshared%2Fmusic%2FgameOver.mp3R341aR343hR6tgoR2i180368R3R339R5y41:assets%2Fshared%2Fmusic%2FgameOverEnd.mp3R341aR344hR6tgoR2i1611890R3R339R5y40:assets%2Fshared%2Fmusic%2FoffsetSong.mp3R341aR345hR6tgoR2i2100583R3R339R5y38:assets%2Fshared%2Fmusic%2Ftea-time.mp3R341aR346hR6tgoR2i12293R3R339R5y41:assets%2Fshared%2Fsounds%2FcancelMenu.mp3R341aR347hR6tgoR2i8168R3R339R5y40:assets%2Fshared%2Fsounds%2FclickText.mp3R341aR348hR6tgoR2i201994R3R339R5y42:assets%2Fshared%2Fsounds%2FconfirmMenu.mp3R341aR349hR6tgoR2i5193R3R339R5y39:assets%2Fshared%2Fsounds%2Fdialogue.mp3R341aR350hR6tgoR2i9013R3R339R5y44:assets%2Fshared%2Fsounds%2FdialogueClose.mp3R341aR351hR6tgoR2i103677R3R339R5y43:assets%2Fshared%2Fsounds%2Ffnf_loss_sfx.mp3R341aR352hR6tgoR2i14991R3R339R5y35:assets%2Fshared%2Fsounds%2FGF_1.mp3R341aR353hR6tgoR2i15930R3R339R5y35:assets%2Fshared%2Fsounds%2FGF_2.mp3R341aR354hR6tgoR2i16139R3R339R5y35:assets%2Fshared%2Fsounds%2FGF_3.mp3R341aR355hR6tgoR2i15407R3R339R5y35:assets%2Fshared%2Fsounds%2FGF_4.mp3R341aR356hR6tgoR2i6499R3R339R5y39:assets%2Fshared%2Fsounds%2Fhitsound.mp3R341aR357hR6tgoR2i11748R3R339R5y43:assets%2Fshared%2Fsounds%2Fintro1-pixel.mp3R341aR358hR6tgoR2i13224R3R339R5y37:assets%2Fshared%2Fsounds%2Fintro1.mp3R341aR359hR6tgoR2i12193R3R339R5y43:assets%2Fshared%2Fsounds%2Fintro2-pixel.mp3R341aR360hR6tgoR2i13746R3R339R5y37:assets%2Fshared%2Fsounds%2Fintro2.mp3R341aR361hR6tgoR2i10888R3R339R5y43:assets%2Fshared%2Fsounds%2Fintro3-pixel.mp3R341aR362hR6tgoR2i13382R3R339R5y37:assets%2Fshared%2Fsounds%2Fintro3.mp3R341aR363hR6tgoR2i24932R3R339R5y44:assets%2Fshared%2Fsounds%2FintroGo-pixel.mp3R341aR364hR6tgoR2i14847R3R339R5y38:assets%2Fshared%2Fsounds%2FintroGo.mp3R341aR365hR6tgoR2i2958R3R339R5y45:assets%2Fshared%2Fsounds%2FMetronome_Tick.mp3R341aR366hR6tgoR2i9424R3R339R5y40:assets%2Fshared%2Fsounds%2Fmissnote1.mp3R341aR367hR6tgoR2i30023R3R339R5y40:assets%2Fshared%2Fsounds%2Fmissnote2.mp3R341aR368hR6tgoR2i30597R3R339R5y40:assets%2Fshared%2Fsounds%2Fmissnote3.mp3R341aR369hR6tgoR2i35480R3R339R5y34:assets%2Fshared%2Fsounds%2Fsad.mp3R341aR370hR6tgoR2i9734R3R339R5y41:assets%2Fshared%2Fsounds%2FscrollMenu.mp3R341aR371hR6tgoR2i191029R3R339R5y39:assets%2Fshared%2Fsounds%2Fshuckies.mp3R341aR372hR6tgoR2i250193R3R339R5y40:assets%2Fshared%2Fsounds%2FsoundTest.mp3R341aR373hR6tgoR2i39472R3R339R5y37:assets%2Fshared%2Fsounds%2Ftoggle.mp3R341aR374hR6tgoR0y36:assets%2Fshared%2Fstages%2Fshucks.hxR2i2356R3R4R5R375R6tgoR0y38:assets%2Fshared%2Fstages%2Fshucks.jsonR2i259R3R4R5R376R6tgoR0y37:assets%2Fshared%2Fstages%2Fshucks.xmlR2i3525R3R4R5R377R6tgoR0y36:assets%2Fshared%2Fstages%2Fsqucks.hxR2i136R3R4R5R378R6tgoR0y38:assets%2Fshared%2Fstages%2Fsqucks.jsonR2i263R3R4R5R379R6tgoR0y37:assets%2Fshared%2Fstages%2Fsqucks.xmlR2i486R3R4R5R380R6tgoR0y37:assets%2Fshared%2Fstages%2Fstage.jsonR2i271R3R4R5R381R6tgoR0y42:assets%2Fshared%2Fvideos%2Fshucks-door.mp4R2i372036R3y6:BINARYR5R382R6tgoR0y50:assets%2Fshared%2Fvideos%2Fshucks-end-cutscene.mp4R2i8016096R3R383R5R384R6tgoR0y44:assets%2Fshared%2Fvideos%2Fshucks-lyrics.mp4R2i5817558R3R383R5R385R6tgoR0y46:assets%2Fshared%2Fvideos%2Fshucks-youbitch.mp4R2i999237R3R383R5R386R6tgoR0y37:assets%2Fshared%2Fweeks%2Fshucks.jsonR2i325R3R4R5R387R6tgoR0y38:assets%2Fshared%2Fweeks%2FweekList.txtR2i6R3R4R5R388R6tgoR2i8220R3R339R5y26:flixel%2Fsounds%2Fbeep.mp3R341aR389y26:flixel%2Fsounds%2Fbeep.ogghR6tgoR2i39706R3R339R5y28:flixel%2Fsounds%2Fflixel.mp3R341aR391y28:flixel%2Fsounds%2Fflixel.ogghR6tgoR2i6840R3y5:SOUNDR5R390R341aR389R390hgoR2i33629R3R393R5R392R341aR391R392hgoR2i15744R3R7R8y35:__ASSET__flixel_fonts_nokiafc22_ttfR5y30:flixel%2Ffonts%2Fnokiafc22.ttfR6tgoR2i29724R3R7R8y36:__ASSET__flixel_fonts_monsterrat_ttfR5y31:flixel%2Ffonts%2Fmonsterrat.ttfR6tgoR0y33:flixel%2Fimages%2Fui%2Fbutton.pngR2i277R3R41R5R398R6tgoR0y36:flixel%2Fimages%2Flogo%2Fdefault.pngR2i505R3R41R5R399R6tgoR0y34:flixel%2Fflixel-ui%2Fimg%2Fbox.pngR2i912R3R41R5R400R6tgoR0y37:flixel%2Fflixel-ui%2Fimg%2Fbutton.pngR2i433R3R41R5R401R6tgoR0y48:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_down.pngR2i446R3R41R5R402R6tgoR0y48:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_left.pngR2i459R3R41R5R403R6tgoR0y49:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_right.pngR2i511R3R41R5R404R6tgoR0y46:flixel%2Fflixel-ui%2Fimg%2Fbutton_arrow_up.pngR2i493R3R41R5R405R6tgoR0y42:flixel%2Fflixel-ui%2Fimg%2Fbutton_thin.pngR2i247R3R41R5R406R6tgoR0y44:flixel%2Fflixel-ui%2Fimg%2Fbutton_toggle.pngR2i534R3R41R5R407R6tgoR0y40:flixel%2Fflixel-ui%2Fimg%2Fcheck_box.pngR2i922R3R41R5R408R6tgoR0y41:flixel%2Fflixel-ui%2Fimg%2Fcheck_mark.pngR2i946R3R41R5R409R6tgoR0y37:flixel%2Fflixel-ui%2Fimg%2Fchrome.pngR2i253R3R41R5R410R6tgoR0y42:flixel%2Fflixel-ui%2Fimg%2Fchrome_flat.pngR2i212R3R41R5R411R6tgoR0y43:flixel%2Fflixel-ui%2Fimg%2Fchrome_inset.pngR2i192R3R41R5R412R6tgoR0y43:flixel%2Fflixel-ui%2Fimg%2Fchrome_light.pngR2i214R3R41R5R413R6tgoR0y44:flixel%2Fflixel-ui%2Fimg%2Fdropdown_mark.pngR2i156R3R41R5R414R6tgoR0y41:flixel%2Fflixel-ui%2Fimg%2Ffinger_big.pngR2i1724R3R41R5R415R6tgoR0y43:flixel%2Fflixel-ui%2Fimg%2Ffinger_small.pngR2i294R3R41R5R416R6tgoR0y38:flixel%2Fflixel-ui%2Fimg%2Fhilight.pngR2i129R3R41R5R417R6tgoR0y36:flixel%2Fflixel-ui%2Fimg%2Finvis.pngR2i128R3R41R5R418R6tgoR0y41:flixel%2Fflixel-ui%2Fimg%2Fminus_mark.pngR2i136R3R41R5R419R6tgoR0y40:flixel%2Fflixel-ui%2Fimg%2Fplus_mark.pngR2i147R3R41R5R420R6tgoR0y36:flixel%2Fflixel-ui%2Fimg%2Fradio.pngR2i191R3R41R5R421R6tgoR0y40:flixel%2Fflixel-ui%2Fimg%2Fradio_dot.pngR2i153R3R41R5R422R6tgoR0y37:flixel%2Fflixel-ui%2Fimg%2Fswatch.pngR2i185R3R41R5R423R6tgoR0y34:flixel%2Fflixel-ui%2Fimg%2Ftab.pngR2i201R3R41R5R424R6tgoR0y39:flixel%2Fflixel-ui%2Fimg%2Ftab_back.pngR2i210R3R41R5R425R6tgoR0y44:flixel%2Fflixel-ui%2Fimg%2Ftooltip_arrow.pngR2i18509R3R41R5R426R6tgoR0y39:flixel%2Fflixel-ui%2Fxml%2Fdefaults.xmlR2i1263R3R4R5R427R6tgoR0y53:flixel%2Fflixel-ui%2Fxml%2Fdefault_loading_screen.xmlR2i1953R3R4R5R428R6tgoR0y44:flixel%2Fflixel-ui%2Fxml%2Fdefault_popup.xmlR2i1848R3R4R5R429R6tgoR0y42:flixel%2Fimages%2Ftransitions%2Fcircle.pngR2i824R3R41R5R430R6tgoR0y53:flixel%2Fimages%2Ftransitions%2Fdiagonal_gradient.pngR2i3812R3R41R5R431R6tgoR0y43:flixel%2Fimages%2Ftransitions%2Fdiamond.pngR2i788R3R41R5R432R6tgoR0y42:flixel%2Fimages%2Ftransitions%2Fsquare.pngR2i383R3R41R5R433R6tgoR0y31:flxanimate%2Fimages%2Fpivot.pngR2i300R3R41R5R434R6tgoR0y35:flxanimate%2Fimages%2Findicator.pngR2i129R3R41R5R435R6tgh\",\"rootPath\":null,\"version\":2,\"libraryArgs\":[],\"libraryType\":null}", eb.rootPath);
        a = lc.fromManifest(a);
        oa.registerLibrary("default", a);
        a = oa.getLibrary("default");
        if (a != null) {
          eb.preloadLibraries.push(a);
        } else {
          eb.preloadLibraryNames.push("default");
        }
      };
      function Fa(a) {
        if (a != null) {
          this.name = a;
        }
        if (!this.__init) {
          if (this.ascender == undefined) {
            this.ascender = 0;
          }
          if (this.descender == undefined) {
            this.descender = 0;
          }
          if (this.height == undefined) {
            this.height = 0;
          }
          if (this.numGlyphs == undefined) {
            this.numGlyphs = 0;
          }
          if (this.underlinePosition == undefined) {
            this.underlinePosition = 0;
          }
          if (this.underlineThickness == undefined) {
            this.underlineThickness = 0;
          }
          if (this.unitsPerEM == undefined) {
            this.unitsPerEM = 0;
          }
          if (this.__fontID != null) {
            if (oa.isLocal(this.__fontID)) {
              this.__fromBytes(oa.getBytes(this.__fontID));
            }
          } else if (this.__fontPath != null) {
            this.__fromFile(this.__fontPath);
          }
        }
      }
      h["lime.text.Font"] = Fa;
      Fa.__name__ = "lime.text.Font";
      Fa.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Fa();
        b.__fromFile(a);
        return b;
      };
      Fa.loadFromName = function (a) {
        return new Fa().__loadFromName(a);
      };
      Fa.__measureFontNode = function (a) {
        var b = window.document.createElement("span");
        b.setAttribute("aria-hidden", "true");
        var c = window.document.createTextNode("BESbswy");
        b.appendChild(c);
        c = b.style;
        c.display = "block";
        c.position = "absolute";
        c.top = "-9999px";
        c.left = "-9999px";
        c.fontSize = "300px";
        c.width = "auto";
        c.height = "auto";
        c.lineHeight = "normal";
        c.margin = "0";
        c.padding = "0";
        c.fontVariant = "normal";
        c.whiteSpace = "nowrap";
        c.fontFamily = a;
        window.document.body.appendChild(b);
        return b;
      };
      Fa.prototype = {
        __copyFrom: function (a) {
          if (a != null) {
            this.ascender = a.ascender;
            this.descender = a.descender;
            this.height = a.height;
            this.name = a.name;
            this.numGlyphs = a.numGlyphs;
            this.src = a.src;
            this.underlinePosition = a.underlinePosition;
            this.underlineThickness = a.underlineThickness;
            this.unitsPerEM = a.unitsPerEM;
            this.__fontID = a.__fontID;
            this.__fontPath = a.__fontPath;
            this.__init = true;
          }
        },
        __fromBytes: function (a) {
          this.__fontPath = null;
        },
        __fromFile: function (a) {
          this.__fontPath = a;
        },
        __loadFromName: function (a) {
          var b = this;
          var c = new Id();
          this.name = a;
          var d = F.navigator.userAgent.toLowerCase();
          var e = d.indexOf(" safari/") >= 0 && d.indexOf(" chrome/") < 0;
          d = new na("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)", "i").match(d);
          if (!e && !d && window.document.fonts && (r = window.document.fonts, n(r, r.load))) {
            window.document.fonts.load("1em '" + a + "'").then(function (a) {
              c.complete(b);
            }, function (d) {
              Ua.warn("Could not load web font \"" + a + "\"", {
                fileName: "lime/text/Font.hx",
                lineNumber: 516,
                className: "lime.text.Font",
                methodName: "__loadFromName"
              });
              c.complete(b);
            });
          } else {
            var f = Fa.__measureFontNode("'" + a + "', sans-serif");
            var k = Fa.__measureFontNode("'" + a + "', serif");
            var t = f.offsetWidth;
            var l = k.offsetWidth;
            var g = -1;
            var V = 0;
            var m;
            var Ka;
            g = window.setInterval(function () {
              V += 1;
              m = f.offsetWidth != t || k.offsetWidth != l;
              Ka = V * 50 >= 3000;
              if (m || Ka) {
                window.clearInterval(g);
                f.parentNode.removeChild(f);
                k.parentNode.removeChild(k);
                k = f = null;
                if (Ka) {
                  Ua.warn("Could not load web font \"" + a + "\"", {
                    fileName: "lime/text/Font.hx",
                    lineNumber: 551,
                    className: "lime.text.Font",
                    methodName: "__loadFromName"
                  });
                }
                c.complete(b);
              }
            }, 50);
          }
          return c.future;
        },
        __class__: Fa
      };
      var Qa = x.__ASSET__assets_fonts_pixel_otf = function () {
        this.ascender = 1125;
        this.descender = -250;
        this.height = 1375;
        this.numGlyphs = 262;
        this.underlinePosition = -143;
        this.underlineThickness = 20;
        this.unitsPerEM = 1000;
        this.name = "Pixel Arial 11 Bold";
        Fa.call(this);
      };
      h.__ASSET__assets_fonts_pixel_otf = Qa;
      Qa.__name__ = "__ASSET__assets_fonts_pixel_otf";
      Qa.__super__ = Fa;
      Qa.prototype = q(Fa.prototype, {
        __class__: Qa
      });
      var ja = x.__ASSET__assets_fonts_supermario256_ttf = function () {
        this.ascender = 750;
        this.descender = -250;
        this.height = 1000;
        this.numGlyphs = 128;
        this.underlinePosition = -100;
        this.underlineThickness = 50;
        this.unitsPerEM = 1000;
        this.name = "Super Mario 256";
        Fa.call(this);
      };
      h.__ASSET__assets_fonts_supermario256_ttf = ja;
      ja.__name__ = "__ASSET__assets_fonts_supermario256_ttf";
      ja.__super__ = Fa;
      ja.prototype = q(Fa.prototype, {
        __class__: ja
      });
      var Z = x.__ASSET__assets_fonts_vcr_ttf = function () {
        this.ascender = 1800;
        this.descender = 0;
        this.height = 2000;
        this.numGlyphs = 204;
        this.underlinePosition = -292;
        this.underlineThickness = 150;
        this.unitsPerEM = 2048;
        this.name = "VCR OSD Mono";
        Fa.call(this);
      };
      h.__ASSET__assets_fonts_vcr_ttf = Z;
      Z.__name__ = "__ASSET__assets_fonts_vcr_ttf";
      Z.__super__ = Fa;
      Z.prototype = q(Fa.prototype, {
        __class__: Z
      });
      var te = x.__ASSET__flixel_fonts_nokiafc22_ttf = function () {
        this.ascender = 2048;
        this.descender = -512;
        this.height = 2816;
        this.numGlyphs = 172;
        this.underlinePosition = -640;
        this.underlineThickness = 256;
        this.unitsPerEM = 2048;
        this.name = "Nokia Cellphone FC Small";
        Fa.call(this);
      };
      h.__ASSET__flixel_fonts_nokiafc22_ttf = te;
      te.__name__ = "__ASSET__flixel_fonts_nokiafc22_ttf";
      te.__super__ = Fa;
      te.prototype = q(Fa.prototype, {
        __class__: te
      });
      var Rb = x.__ASSET__flixel_fonts_monsterrat_ttf = function () {
        this.ascender = 968;
        this.descender = -251;
        this.height = 1219;
        this.numGlyphs = 263;
        this.underlinePosition = -150;
        this.underlineThickness = 50;
        this.unitsPerEM = 1000;
        this.name = "Monsterrat";
        Fa.call(this);
      };
      h.__ASSET__flixel_fonts_monsterrat_ttf = Rb;
      Rb.__name__ = "__ASSET__flixel_fonts_monsterrat_ttf";
      Rb.__super__ = Fa;
      Rb.prototype = q(Fa.prototype, {
        __class__: Rb
      });
      function fb(a) {
        Fa.call(this, a);
      }
      h["openfl.text.Font"] = fb;
      fb.__name__ = "openfl.text.Font";
      fb.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new fb();
        b.__fromFile(a);
        return b;
      };
      fb.loadFromName = function (a) {
        return Fa.loadFromName(a).then(function (a) {
          var b = new fb();
          b.__fromLimeFont(a);
          return Eb.withValue(b);
        });
      };
      fb.registerFont = function (a) {
        a = wa.getClass(a) == null ? wa.__cast(yb.createInstance(a, []), fb) : wa.__cast(a, fb);
        if (a != null) {
          fb.__registeredFonts.push(a);
          fb.__fontByName.h[a.name] = a;
        }
      };
      fb.__super__ = Fa;
      fb.prototype = q(Fa.prototype, {
        __fromLimeFont: function (a) {
          this.__copyFrom(a);
        },
        __class__: fb
      });
      var Qb = x.__ASSET__OPENFL__assets_fonts_pixel_otf = function () {
        this.__fromLimeFont(new Qa());
        Fa.call(this, undefined);
      };
      h.__ASSET__OPENFL__assets_fonts_pixel_otf = Qb;
      Qb.__name__ = "__ASSET__OPENFL__assets_fonts_pixel_otf";
      Qb.__super__ = fb;
      Qb.prototype = q(fb.prototype, {
        __class__: Qb
      });
      var u = x.__ASSET__OPENFL__assets_fonts_supermario256_ttf = function () {
        this.__fromLimeFont(new ja());
        Fa.call(this, undefined);
      };
      h.__ASSET__OPENFL__assets_fonts_supermario256_ttf = u;
      u.__name__ = "__ASSET__OPENFL__assets_fonts_supermario256_ttf";
      u.__super__ = fb;
      u.prototype = q(fb.prototype, {
        __class__: u
      });
      var wb = x.__ASSET__OPENFL__assets_fonts_vcr_ttf = function () {
        this.__fromLimeFont(new Z());
        Fa.call(this, undefined);
      };
      h.__ASSET__OPENFL__assets_fonts_vcr_ttf = wb;
      wb.__name__ = "__ASSET__OPENFL__assets_fonts_vcr_ttf";
      wb.__super__ = fb;
      wb.prototype = q(fb.prototype, {
        __class__: wb
      });
      var La = x.__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf = function () {
        this.__fromLimeFont(new te());
        Fa.call(this, undefined);
      };
      h.__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf = La;
      La.__name__ = "__ASSET__OPENFL__flixel_fonts_nokiafc22_ttf";
      La.__super__ = fb;
      La.prototype = q(fb.prototype, {
        __class__: La
      });
      var Y = x.__ASSET__OPENFL__flixel_fonts_monsterrat_ttf = function () {
        this.__fromLimeFont(new Rb());
        Fa.call(this, undefined);
      };
      h.__ASSET__OPENFL__flixel_fonts_monsterrat_ttf = Y;
      Y.__name__ = "__ASSET__OPENFL__flixel_fonts_monsterrat_ttf";
      Y.__super__ = fb;
      Y.prototype = q(fb.prototype, {
        __class__: Y
      });
      Math.__name__ = "Math";
      function ha() {}
      h.Reflect = ha;
      ha.__name__ = "Reflect";
      ha.field = function (a, b) {
        try {
          return a[b];
        } catch (c) {
          Oa.lastError = c;
          return null;
        }
      };
      ha.getProperty = function (a, b) {
        var c;
        if (a == null) {
          return null;
        }
        var d = a.__properties__ ? c = a.__properties__["get_" + b] : false;
        if (d) {
          return a[c]();
        } else {
          return a[b];
        }
      };
      ha.setProperty = function (a, b, c) {
        var d;
        var e = a.__properties__ ? d = a.__properties__["set_" + b] : false;
        if (e) {
          a[d](c);
        } else {
          a[b] = c;
        }
      };
      ha.fields = function (a) {
        var b = [];
        if (a != null) {
          var c = Object.prototype.hasOwnProperty;
          var d;
          for (d in a) {
            if (d != "__id__" && d != "hx__closures__" && c.call(a, d)) {
              b.push(d);
            }
          }
        }
        return b;
      };
      ha.isFunction = function (a) {
        if (typeof a == "function") {
          return !a.__name__ && !a.__ename__;
        } else {
          return false;
        }
      };
      ha.compare = function (a, b) {
        if (a == b) {
          return 0;
        } else if (a > b) {
          return 1;
        } else {
          return -1;
        }
      };
      ha.isObject = function (a) {
        if (a == null) {
          return false;
        }
        var b = typeof a;
        if (b == "string" || b == "object" && a.__enum__ == null) {
          return true;
        } else if (b == "function") {
          return (a.__name__ || a.__ename__) != null;
        } else {
          return false;
        }
      };
      ha.isEnumValue = function (a) {
        if (a != null) {
          return a.__enum__ != null;
        } else {
          return false;
        }
      };
      ha.deleteField = function (a, b) {
        if (!Object.prototype.hasOwnProperty.call(a, b)) {
          return false;
        }
        delete a[b];
        return true;
      };
      function y() {}
      h.Std = y;
      y.__name__ = "Std";
      y.string = function (a) {
        return wa.__string_rec(a, "");
      };
      y.parseInt = function (a) {
        a = parseInt(a);
        if (isNaN(a)) {
          return null;
        } else {
          return a;
        }
      };
      function Ui() {}
      h["_String.String_Impl_"] = Ui;
      Ui.__name__ = "_String.String_Impl_";
      Ui.fromCharCode = function (a) {
        return String.fromCodePoint(a);
      };
      function We() {
        this.b = "";
      }
      h.StringBuf = We;
      We.__name__ = "StringBuf";
      We.prototype = {
        __class__: We
      };
      function v() {}
      h.StringTools = v;
      v.__name__ = "StringTools";
      v.htmlEscape = function (a, b) {
        var c = "";
        for (var d = 0, e = a; d < e.length;) {
          a = e;
          var f = d++;
          var k = a.charCodeAt(f);
          if (k >= 55296 && k <= 56319) {
            k = k - 55232 << 10 | a.charCodeAt(f + 1) & 1023;
          }
          a = k;
          if (a >= 65536) {
            ++d;
          }
          switch (a) {
            case 34:
              c = b ? c + "&quot;" : c + String.fromCodePoint(a);
              break;
            case 38:
              c += "&amp;";
              break;
            case 39:
              c = b ? c + "&#039;" : c + String.fromCodePoint(a);
              break;
            case 60:
              c += "&lt;";
              break;
            case 62:
              c += "&gt;";
              break;
            default:
              c += String.fromCodePoint(a);
          }
        }
        return c;
      };
      v.htmlUnescape = function (a) {
        return a.split("&gt;").join(">").split("&lt;").join("<").split("&quot;").join("\"").split("&#039;").join("'").split("&amp;").join("&");
      };
      v.startsWith = function (a, b) {
        if (a.length >= b.length) {
          return a.lastIndexOf(b, 0) == 0;
        } else {
          return false;
        }
      };
      v.endsWith = function (a, b) {
        var c = b.length;
        var d = a.length;
        if (d >= c) {
          return a.indexOf(b, d - c) == d - c;
        } else {
          return false;
        }
      };
      v.isSpace = function (a, b) {
        a = L.cca(a, b);
        if (a > 8 && a < 14) {
          return true;
        } else {
          return a == 32;
        }
      };
      v.ltrim = function (a) {
        for (var b = a.length, c = 0; c < b && v.isSpace(a, c);) {
          ++c;
        }
        if (c > 0) {
          return L.substr(a, c, b - c);
        } else {
          return a;
        }
      };
      v.rtrim = function (a) {
        for (var b = a.length, c = 0; c < b && v.isSpace(a, b - c - 1);) {
          ++c;
        }
        if (c > 0) {
          return L.substr(a, 0, b - c);
        } else {
          return a;
        }
      };
      v.trim = function (a) {
        return v.ltrim(v.rtrim(a));
      };
      v.replace = function (a, b, c) {
        return a.split(b).join(c);
      };
      v.hex = function (a, b) {
        var c = "";
        do {
          c = "0123456789ABCDEF".charAt(a & 15) + c;
          a >>>= 4;
        } while (a > 0);
        if (b != null) {
          while (c.length < b) {
            c = "0" + c;
          }
        }
        return c;
      };
      var Ec = w.ValueType = {
        __ename__: "ValueType",
        __constructs__: null,
        TNull: {
          _hx_name: "TNull",
          _hx_index: 0,
          __enum__: "ValueType",
          toString: p
        },
        TInt: {
          _hx_name: "TInt",
          _hx_index: 1,
          __enum__: "ValueType",
          toString: p
        },
        TFloat: {
          _hx_name: "TFloat",
          _hx_index: 2,
          __enum__: "ValueType",
          toString: p
        },
        TBool: {
          _hx_name: "TBool",
          _hx_index: 3,
          __enum__: "ValueType",
          toString: p
        },
        TObject: {
          _hx_name: "TObject",
          _hx_index: 4,
          __enum__: "ValueType",
          toString: p
        },
        TFunction: {
          _hx_name: "TFunction",
          _hx_index: 5,
          __enum__: "ValueType",
          toString: p
        },
        TClass: (r = function (a) {
          return {
            _hx_index: 6,
            c: a,
            __enum__: "ValueType",
            toString: p
          };
        }, r._hx_name = "TClass", r.__params__ = ["c"], r),
        TEnum: (r = function (a) {
          return {
            _hx_index: 7,
            e: a,
            __enum__: "ValueType",
            toString: p
          };
        }, r._hx_name = "TEnum", r.__params__ = ["e"], r),
        TUnknown: {
          _hx_name: "TUnknown",
          _hx_index: 8,
          __enum__: "ValueType",
          toString: p
        }
      };
      Ec.__constructs__ = [Ec.TNull, Ec.TInt, Ec.TFloat, Ec.TBool, Ec.TObject, Ec.TFunction, Ec.TClass, Ec.TEnum, Ec.TUnknown];
      function yb() {}
      h.Type = yb;
      yb.__name__ = "Type";
      yb.resolveEnum = function (a) {
        return w[a];
      };
      yb.createInstance = function (a, b) {
        return new (Function.prototype.bind.apply(a, [null].concat(b)))();
      };
      yb.createEnum = function (a, b, c) {
        var d = ha.field(a, b);
        if (d == null) {
          throw I.thrown("No such constructor " + b);
        }
        if (ha.isFunction(d)) {
          if (c == null) {
            throw I.thrown("Constructor " + b + " need parameters");
          }
          return d.apply(a, c);
        }
        if (c != null && c.length != 0) {
          throw I.thrown("Constructor " + b + " does not need parameters");
        }
        return d;
      };
      yb.typeof = function (a) {
        switch (typeof a) {
          case "boolean":
            return Ec.TBool;
          case "function":
            if (a.__name__ || a.__ename__) {
              return Ec.TObject;
            } else {
              return Ec.TFunction;
            }
          case "number":
            if (Math.ceil(a) == a % 2147483648) {
              return Ec.TInt;
            } else {
              return Ec.TFloat;
            }
          case "object":
            if (a == null) {
              return Ec.TNull;
            }
            var b = a.__enum__;
            if (b != null) {
              return Ec.TEnum(w[b]);
            }
            a = wa.getClass(a);
            if (a != null) {
              return Ec.TClass(a);
            } else {
              return Ec.TObject;
            }
          case "string":
            return Ec.TClass(String);
          case "undefined":
            return Ec.TNull;
          default:
            return Ec.TUnknown;
        }
      };
      yb.enumParameters = function (a) {
        var b = w[a.__enum__].__constructs__[a._hx_index].__params__;
        if (b != null) {
          var c = [];
          for (var d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            c.push(a[e]);
          }
          return c;
        }
        return [];
      };
      var mc = {
        gt: function (a, b) {
          var c = a < 0;
          if (c != b < 0) {
            return c;
          } else {
            return a > b;
          }
        },
        toFloat: function (a) {
          if (a < 0) {
            return 4294967296 + a;
          } else {
            return a + 0;
          }
        }
      };
      var lb = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "Element";
            case 1:
              return "PCData";
            case 2:
              return "CData";
            case 3:
              return "Comment";
            case 4:
              return "DocType";
            case 5:
              return "ProcessingInstruction";
            case 6:
              return "Document";
          }
        }
      };
      function T(a) {
        this.nodeType = a;
        this.children = [];
        this.attributeMap = new xa();
      }
      h.Xml = T;
      T.__name__ = "Xml";
      T.parse = function (a) {
        return Dg.parse(a);
      };
      T.createElement = function (a) {
        var b = new T(T.Element);
        if (b.nodeType != T.Element) {
          throw I.thrown("Bad node type, expected Element but found " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
        }
        b.nodeName = a;
        return b;
      };
      T.createPCData = function (a) {
        var b = new T(T.PCData);
        if (b.nodeType == T.Document || b.nodeType == T.Element) {
          throw I.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      T.createCData = function (a) {
        var b = new T(T.CData);
        if (b.nodeType == T.Document || b.nodeType == T.Element) {
          throw I.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      T.createComment = function (a) {
        var b = new T(T.Comment);
        if (b.nodeType == T.Document || b.nodeType == T.Element) {
          throw I.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      T.createDocType = function (a) {
        var b = new T(T.DocType);
        if (b.nodeType == T.Document || b.nodeType == T.Element) {
          throw I.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      T.createProcessingInstruction = function (a) {
        var b = new T(T.ProcessingInstruction);
        if (b.nodeType == T.Document || b.nodeType == T.Element) {
          throw I.thrown("Bad node type, unexpected " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
        }
        b.nodeValue = a;
        return b;
      };
      T.createDocument = function () {
        return new T(T.Document);
      };
      T.prototype = {
        get: function (a) {
          if (this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          return this.attributeMap.h[a];
        },
        set: function (a, b) {
          if (this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          this.attributeMap.h[a] = b;
        },
        exists: function (a) {
          if (this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          return Object.prototype.hasOwnProperty.call(this.attributeMap.h, a);
        },
        attributes: function () {
          if (this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          return new rk(this.attributeMap.h);
        },
        elements: function () {
          if (this.nodeType != T.Document && this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          var a = [];
          for (var b = 0, c = this.children; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.nodeType == T.Element) {
              a.push(d);
            }
          }
          return new tf(a);
        },
        elementsNamed: function (a) {
          if (this.nodeType != T.Document && this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          var b = [];
          for (var c = 0, d = this.children; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.nodeType == T.Element) {
              if (e.nodeType != T.Element) {
                throw I.thrown("Bad node type, expected Element but found " + (e.nodeType == null ? "null" : lb.toString(e.nodeType)));
              }
              var f = e.nodeName == a;
            } else {
              f = false;
            }
            if (f) {
              b.push(e);
            }
          }
          return new tf(b);
        },
        firstElement: function () {
          if (this.nodeType != T.Document && this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          for (var a = 0, b = this.children; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.nodeType == T.Element) {
              return c;
            }
          }
          return null;
        },
        addChild: function (a) {
          if (this.nodeType != T.Document && this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          if (a.parent != null) {
            a.parent.removeChild(a);
          }
          this.children.push(a);
          a.parent = this;
        },
        removeChild: function (a) {
          if (this.nodeType != T.Document && this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          if (L.remove(this.children, a)) {
            a.parent = null;
            return true;
          } else {
            return false;
          }
        },
        insertChild: function (a, b) {
          if (this.nodeType != T.Document && this.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element or Document but found " + (this.nodeType == null ? "null" : lb.toString(this.nodeType)));
          }
          if (a.parent != null) {
            L.remove(a.parent.children, a);
          }
          this.children.splice(b, 0, a);
          a.parent = this;
        },
        toString: function () {
          return Eg.print(this);
        },
        __class__: T
      };
      var Tf = w["backend.Countdown"] = {
        __ename__: "backend.Countdown",
        __constructs__: null,
        THREE: {
          _hx_name: "THREE",
          _hx_index: 0,
          __enum__: "backend.Countdown",
          toString: p
        },
        TWO: {
          _hx_name: "TWO",
          _hx_index: 1,
          __enum__: "backend.Countdown",
          toString: p
        },
        ONE: {
          _hx_name: "ONE",
          _hx_index: 2,
          __enum__: "backend.Countdown",
          toString: p
        },
        GO: {
          _hx_name: "GO",
          _hx_index: 3,
          __enum__: "backend.Countdown",
          toString: p
        },
        START: {
          _hx_name: "START",
          _hx_index: 4,
          __enum__: "backend.Countdown",
          toString: p
        }
      };
      Tf.__constructs__ = [Tf.THREE, Tf.TWO, Tf.ONE, Tf.GO, Tf.START];
      function Rh() {
        this.curBeat = this.curDecBeat = this.curStep = this.curDecStep = this.curSection = 0;
        this.onPlayState = false;
        this.game = z.instance;
        var a = P.getState();
        this.onPlayState = a instanceof z;
        this.game = a;
        if (this.game == null) {
          g.log.advanced("Invalid state for the stage added!", Aa.WARNING, true);
          this.destroy();
        } else {
          this.game.stages.push(this);
          Ca.call(this);
          this.create();
        }
      }
      h["backend.BaseStage"] = Rh;
      Rh.__name__ = "backend.BaseStage";
      Rh.__super__ = Ca;
      Rh.prototype = q(Ca.prototype, {
        create: function () {},
        createPost: function () {},
        countdownTick: function (a, b) {},
        beatHit: function () {},
        stepHit: function () {},
        sectionHit: function () {},
        closeSubState: function () {},
        openSubState: function (a) {},
        eventCalled: function (a, b, c, d, e, f) {},
        eventPushed: function (a) {},
        eventPushedUnique: function (a) {},
        add: function (a) {
          this.game.add(a);
        },
        __class__: Rh
      });
      function tk(a, b, c, d, e, f, k, t, l, g, V, m, Ka, h, p, n, q, Ub, r, w, u, v, A, Y, y, z, La, C, D, E, B, x, G, I, ha, Ea, ma) {
        this.discordRPC = true;
        this.guitarHeroSustains = false;
        this.safeFrames = 10;
        this.badWindow = 135;
        this.goodWindow = 90;
        this.sickWindow = 45;
        this.ratingOffset = 0;
        this.comboOffset = [0, 0, 0, 0];
        var J = new xa();
        J.h.scrollspeed = 1;
        J.h.scrolltype = "multiplicative";
        J.h.songspeed = 1;
        J.h.healthgain = 1;
        J.h.healthloss = 1;
        J.h.instakill = false;
        J.h.practice = false;
        J.h.botplay = false;
        J.h.opponentplay = false;
        this.gameplaySettings = J;
        this.checkForUpdates = this.comboStacking = true;
        this.pauseMusic = "Tea Time";
        this.hitsoundVolume = 0;
        this.healthBarAlpha = 1;
        this.noReset = false;
        this.scoreZoom = true;
        this.timeBarType = "Time Left";
        this.ghostTapping = true;
        this.arrowRGBPixel = [[-1935617, -1537, -10485619], [-12727553, -720897, -16764832], [-9313536, -589850, -16764672], [-30642, -1291, -9699328]];
        this.arrowRGB = [[-4043879, -1, -12837034], [-16711681, -1, -15383881], [-15533563, -1, -16104377], [-444097, -1, -10153928]];
        this.noteOffset = 0;
        this.hideHud = false;
        this.camZooms = true;
        this.framerate = 60;
        this.cacheOnGPU = false;
        this.shaders = true;
        this.lowQuality = false;
        this.splashAlpha = 0.6;
        this.splashSkin = "Psych";
        this.noteSkin = "Default";
        this.antialiasing = true;
        this.autoPause = false;
        this.flashing = true;
        this.showFPS = false;
        this.opponentStrums = true;
        this.downScroll = this.middleScroll = false;
        if (a != null) {
          this.downScroll = a;
        }
        if (b != null) {
          this.middleScroll = b;
        }
        if (c != null) {
          this.opponentStrums = c;
        }
        if (d != null) {
          this.showFPS = d;
        }
        if (e != null) {
          this.flashing = e;
        }
        if (f != null) {
          this.autoPause = f;
        }
        if (k != null) {
          this.antialiasing = k;
        }
        if (t != null) {
          this.noteSkin = t;
        }
        if (l != null) {
          this.splashSkin = l;
        }
        if (g != null) {
          this.splashAlpha = g;
        }
        if (V != null) {
          this.lowQuality = V;
        }
        if (m != null) {
          this.shaders = m;
        }
        if (Ka != null) {
          this.cacheOnGPU = Ka;
        }
        if (h != null) {
          this.framerate = h;
        }
        if (p != null) {
          this.camZooms = p;
        }
        if (n != null) {
          this.hideHud = n;
        }
        if (q != null) {
          this.noteOffset = q;
        }
        if (Ub != null) {
          this.arrowRGB = Ub;
        }
        if (r != null) {
          this.arrowRGBPixel = r;
        }
        if (w != null) {
          this.ghostTapping = w;
        }
        if (u != null) {
          this.timeBarType = u;
        }
        if (v != null) {
          this.scoreZoom = v;
        }
        if (A != null) {
          this.noReset = A;
        }
        if (Y != null) {
          this.healthBarAlpha = Y;
        }
        if (y != null) {
          this.hitsoundVolume = y;
        }
        if (z != null) {
          this.pauseMusic = z;
        }
        if (La != null) {
          this.checkForUpdates = La;
        }
        if (C != null) {
          this.comboStacking = C;
        }
        if (D != null) {
          this.gameplaySettings = D;
        }
        if (E != null) {
          this.comboOffset = E;
        }
        if (B != null) {
          this.ratingOffset = B;
        }
        if (x != null) {
          this.sickWindow = x;
        }
        if (G != null) {
          this.goodWindow = G;
        }
        if (I != null) {
          this.badWindow = I;
        }
        if (ha != null) {
          this.safeFrames = ha;
        }
        if (Ea != null) {
          this.guitarHeroSustains = Ea;
        }
        if (ma != null) {
          this.discordRPC = ma;
        }
      }
      h["backend.SaveVariables"] = tk;
      tk.__name__ = "backend.SaveVariables";
      tk.prototype = {
        __class__: tk
      };
      function C() {}
      h["backend.ClientPrefs"] = C;
      C.__name__ = "backend.ClientPrefs";
      C.resetKeys = function (a) {
        if (a != 1) {
          var b = C.keyBinds.h;
          var c = Object.keys(b);
          for (var d = c.length, e = 0; e < d;) {
            var f = c[e++];
            if (Object.prototype.hasOwnProperty.call(C.defaultKeys.h, f)) {
              b = C.keyBinds;
              var k = C.defaultKeys.h[f].slice();
              b.h[f] = k;
            }
          }
        }
        if (a != 0) {
          b = C.gamepadBinds.h;
          a = Object.keys(b);
          c = a.length;
          d = 0;
          while (d < c) {
            e = a[d++];
            if (Object.prototype.hasOwnProperty.call(C.defaultButtons.h, e)) {
              b = C.gamepadBinds;
              k = C.defaultButtons.h[e].slice();
              b.h[e] = k;
            }
          }
        }
      };
      C.clearInvalidKeys = function (a) {
        var b = C.keyBinds.h[a];
        for (a = C.gamepadBinds.h[a]; b != null && b.indexOf(-1) != -1;) {
          L.remove(b, -1);
        }
        while (a != null && a.indexOf(-1) != -1) {
          L.remove(a, -1);
        }
      };
      C.loadDefaultKeys = function () {
        C.defaultKeys = xa.createCopy(C.keyBinds.h);
        C.defaultButtons = xa.createCopy(C.gamepadBinds.h);
      };
      C.saveSettings = function () {
        for (var a = 0, b = ha.fields(C.data); a < b.length;) {
          var c = b[a];
          ++a;
          g.save.data[c] = ha.field(C.data, c);
        }
        g.save.flush();
        a = new Jd();
        b = ia.get_current().stage.application.meta.h.company;
        a.bind("controls_v3", "" + b + "/" + Jd.validate(ia.get_current().stage.application.meta.h.file));
        a.data.keyboard = C.keyBinds;
        a.data.gamepad = C.gamepadBinds;
        a.flush();
        g.log.advanced("Settings saved!", Aa.NORMAL);
      };
      C.loadPrefs = function () {
        for (var a = 0, b = ha.fields(C.data); a < b.length;) {
          var c = b[a];
          ++a;
          if (c != "gameplaySettings" && Object.prototype.hasOwnProperty.call(g.save.data, c)) {
            C.data[c] = ha.field(g.save.data, c);
          }
        }
        if (Zb.fpsVar != null) {
          Zb.fpsVar.set_visible(C.data.showFPS);
        }
        if (C.data.framerate > g.drawFramerate) {
          g.set_updateFramerate(C.data.framerate);
          g.set_drawFramerate(C.data.framerate);
        } else {
          g.set_drawFramerate(C.data.framerate);
          g.set_updateFramerate(C.data.framerate);
        }
        if (g.save.data.gameplaySettings != null) {
          var d = g.save.data.gameplaySettings.h;
          b = d;
          d = Object.keys(d);
          for (var e = d.length, f = 0; f < e;) {
            var k = c = d[f++];
            c = b[c];
            C.data.gameplaySettings.h[k] = c;
          }
        }
        if (g.save.data.volume != null) {
          g.sound.set_volume(g.save.data.volume);
        }
        if (g.save.data.mute != null) {
          g.sound.muted = g.save.data.mute;
        }
        a = new Jd();
        b = ia.get_current().stage.application.meta.h.company;
        a.bind("controls_v3", "" + b + "/" + Jd.validate(ia.get_current().stage.application.meta.h.file));
        if (a != null) {
          if (a.data.keyboard != null) {
            b = a.data.keyboard;
            b = d = b.h;
            d = Object.keys(d);
            e = d.length;
            f = 0;
            while (f < e) {
              k = c = d[f++];
              c = b[c];
              if (Object.prototype.hasOwnProperty.call(C.keyBinds.h, k)) {
                C.keyBinds.h[k] = c;
              }
            }
          }
          if (a.data.gamepad != null) {
            b = a.data.gamepad;
            b = d = b.h;
            d = Object.keys(d);
            e = d.length;
            f = 0;
            while (f < e) {
              k = c = d[f++];
              c = b[c];
              if (Object.prototype.hasOwnProperty.call(C.gamepadBinds.h, k)) {
                C.gamepadBinds.h[k] = c;
              }
            }
          }
          C.reloadVolumeKeys();
        }
      };
      C.reloadVolumeKeys = function () {
        Qc.muteKeys = C.keyBinds.h.volume_mute.slice();
        Qc.volumeDownKeys = C.keyBinds.h.volume_down.slice();
        Qc.volumeUpKeys = C.keyBinds.h.volume_up.slice();
        C.toggleVolumeKeys(true);
      };
      C.toggleVolumeKeys = function (a) {
        if (a == null) {
          a = true;
        }
        g.sound.muteKeys = a ? Qc.muteKeys : [];
        g.sound.volumeDownKeys = a ? Qc.volumeDownKeys : [];
        g.sound.volumeUpKeys = a ? Qc.volumeUpKeys : [];
      };
      function K() {}
      h["backend.Conductor"] = K;
      K.__name__ = "backend.Conductor";
      K.__properties__ = {
        set_bpm: "set_bpm"
      };
      K.judgeNote = function (a, b) {
        if (b == null) {
          b = 0;
        }
        for (var c = 0, d = a.length - 1; c < d;) {
          var e = c++;
          if (b <= a[e].hitWindow) {
            return a[e];
          }
        }
        return a[a.length - 1];
      };
      K.getBPMFromSeconds = function (a) {
        var b = {
          stepTime: 0,
          songTime: 0,
          bpm: K.bpm,
          stepCrochet: K.stepCrochet
        };
        for (var c = 0, d = K.bpmChangeMap.length; c < d;) {
          var e = c++;
          if (a >= K.bpmChangeMap[e].songTime) {
            b = K.bpmChangeMap[e];
          }
        }
        return b;
      };
      K.getBPMFromStep = function (a) {
        var b = {
          stepTime: 0,
          songTime: 0,
          bpm: K.bpm,
          stepCrochet: K.stepCrochet
        };
        for (var c = 0, d = K.bpmChangeMap.length; c < d;) {
          var e = c++;
          if (K.bpmChangeMap[e].stepTime <= a) {
            b = K.bpmChangeMap[e];
          }
        }
        return b;
      };
      K.beatToSeconds = function (a) {
        a *= 4;
        var b = K.getBPMFromStep(a);
        return b.songTime + (a - b.stepTime) / (b.bpm / 60) / 4 * 1000;
      };
      K.mapBPMChanges = function (a) {
        K.bpmChangeMap = [];
        var b = a.bpm;
        var c = 0;
        var d = 0;
        for (var e = 0, f = a.notes.length; e < f;) {
          var k = e++;
          if (a.notes[k].changeBPM && a.notes[k].bpm != b) {
            b = a.notes[k].bpm;
            K.bpmChangeMap.push({
              stepTime: c,
              songTime: d,
              bpm: b,
              stepCrochet: 60 / b * 1000 / 4
            });
          }
          k = Math.round(K.getSectionBeats(a, k) * 4);
          c += k;
          d += 60 / b * 1000 / 4 * k;
        }
        Ab.trace("new BPM map BUDDY " + y.string(K.bpmChangeMap), {
          fileName: "source/backend/Conductor.hx",
          lineNumber: 124,
          className: "backend.Conductor",
          methodName: "mapBPMChanges"
        });
      };
      K.getSectionBeats = function (a, b) {
        var c = null;
        if (a.notes[b] != null) {
          c = a.notes[b].sectionBeats;
        }
        return c ?? 4;
      };
      K.set_bpm = function (a) {
        K.bpm = a;
        K.crochet = 60 / K.bpm * 1000;
        K.stepCrochet = K.crochet / 4;
        return K.bpm = a;
      };
      function $a() {
        this.controllerMode = false;
        this.keyboardBinds = C.keyBinds;
        this.gamepadBinds = C.gamepadBinds;
      }
      h["backend.Controls"] = $a;
      $a.__name__ = "backend.Controls";
      $a.prototype = {
        get_UI_UP_P: function () {
          return this.justPressed("ui_up");
        },
        get_UI_DOWN_P: function () {
          return this.justPressed("ui_down");
        },
        get_UI_LEFT_P: function () {
          return this.justPressed("ui_left");
        },
        get_UI_RIGHT_P: function () {
          return this.justPressed("ui_right");
        },
        get_UI_UP: function () {
          return this.pressed("ui_up");
        },
        get_UI_DOWN: function () {
          return this.pressed("ui_down");
        },
        get_UI_LEFT: function () {
          return this.pressed("ui_left");
        },
        get_UI_RIGHT: function () {
          return this.pressed("ui_right");
        },
        get_UI_LEFT_R: function () {
          return this.justReleased("ui_left");
        },
        get_UI_RIGHT_R: function () {
          return this.justReleased("ui_right");
        },
        get_ACCEPT: function () {
          return this.justPressed("accept");
        },
        get_BACK: function () {
          return this.justPressed("back");
        },
        get_PAUSE: function () {
          return this.justPressed("pause");
        },
        get_RESET: function () {
          return this.justPressed("reset");
        },
        justPressed: function (a) {
          var b = g.keys.checkKeyArrayState(this.keyboardBinds.h[a], 2) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadJustPressed(this.gamepadBinds.h[a]) == 1;
          }
        },
        pressed: function (a) {
          var b = g.keys.checkKeyArrayState(this.keyboardBinds.h[a], 1) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadPressed(this.gamepadBinds.h[a]) == 1;
          }
        },
        justReleased: function (a) {
          var b = g.keys.checkKeyArrayState(this.keyboardBinds.h[a], -1) == 1;
          if (b) {
            this.controllerMode = false;
          }
          if (b) {
            return true;
          } else {
            return this._myGamepadJustReleased(this.gamepadBinds.h[a]) == 1;
          }
        },
        _myGamepadJustPressed: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (g.gamepads.anyHasState(c, 2) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        _myGamepadPressed: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (g.gamepads.anyHasState(c, 1) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        _myGamepadJustReleased: function (a) {
          if (a != null) {
            for (var b = 0; b < a.length;) {
              var c = a[b];
              ++b;
              if (g.gamepads.anyHasState(c, -1) == 1) {
                return this.controllerMode = true;
              }
            }
          }
          return false;
        },
        __class__: $a,
        __properties__: {
          get_RESET: "get_RESET",
          get_PAUSE: "get_PAUSE",
          get_BACK: "get_BACK",
          get_ACCEPT: "get_ACCEPT",
          get_UI_RIGHT_R: "get_UI_RIGHT_R",
          get_UI_LEFT_R: "get_UI_LEFT_R",
          get_UI_RIGHT: "get_UI_RIGHT",
          get_UI_LEFT: "get_UI_LEFT",
          get_UI_DOWN: "get_UI_DOWN",
          get_UI_UP: "get_UI_UP",
          get_UI_RIGHT_P: "get_UI_RIGHT_P",
          get_UI_LEFT_P: "get_UI_LEFT_P",
          get_UI_DOWN_P: "get_UI_DOWN_P",
          get_UI_UP_P: "get_UI_UP_P"
        }
      };
      function eg() {}
      h["backend.CoolUtil"] = eg;
      eg.__name__ = "backend.CoolUtil";
      eg.floorDecimal = function (a, b) {
        if (b < 1) {
          return Math.floor(a);
        }
        var c = 1;
        for (var d = 0; d < b;) {
          d++;
          c *= 10;
        }
        return Math.floor(a * c) / c;
      };
      eg.getAnimsListFromFrames = function (a, b) {
        if (a == null) {
          return [];
        }
        var c = [];
        var d = 0;
        for (a = a.frames; d < a.length;) {
          var e = a[d];
          ++d;
          e = b == "txt" ? e.name.split("_")[0] : L.substr(e.name, 0, e.name.length - 4);
          if (c.indexOf(e) == -1) {
            c.push(e);
          }
        }
        return c;
      };
      eg.getAnimsListFromSprite = function (a) {
        return eg.getAnimsListFromFrames(a.frames);
      };
      function ab(a) {
        if (a == null) {
          a = 0;
        }
        this.length = this._marker = 0;
        Ca.call(this);
        this.members = [];
        this.set_maxSize(Math.abs(a) | 0);
        this.flixelType = 2;
      }
      h["flixel.group.FlxTypedGroup"] = ab;
      ab.__name__ = "flixel.group.FlxTypedGroup";
      ab.resolveGroup = function (a) {
        if (a != null) {
          if (a.flixelType == 2) {
            return a;
          }
          if (a.flixelType == 4) {
            return a.group;
          }
        }
        return null;
      };
      ab.__super__ = Ca;
      ab.prototype = q(Ca.prototype, {
        destroy: function () {
          Ca.prototype.destroy.call(this);
          ca.destroy(this._memberAdded);
          ca.destroy(this._memberRemoved);
          if (this.members != null) {
            for (var a = this.length; a-- > 0;) {
              var b = this.members.shift();
              if (b != null) {
                b.destroy();
              }
            }
            this.members = null;
          }
        },
        update: function (a) {
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.active) {
              d.update(a);
            }
          }
        },
        draw: function () {
          var a = Pb._defaultCameras;
          if (this._cameras != null) {
            Pb._defaultCameras = this._cameras;
          }
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.visible) {
              d.draw();
            }
          }
          Pb._defaultCameras = a;
        },
        add: function (a) {
          if (a == null) {
            g.log.advanced("Cannot add a `null` object to a FlxGroup.", Aa.WARNING, true);
            return null;
          }
          if (this.members.indexOf(a) >= 0) {
            return a;
          }
          var b = this.getFirstNull();
          if (b != -1) {
            this.members[b] = a;
            if (b >= this.length) {
              this.length = b + 1;
            }
            this.onMemberAdd(a);
            return a;
          }
          if (this.maxSize > 0 && this.length >= this.maxSize) {
            return a;
          }
          this.members.push(a);
          this.length++;
          this.onMemberAdd(a);
          return a;
        },
        insert: function (a, b) {
          if (b == null) {
            g.log.advanced("Cannot insert a `null` object into a FlxGroup.", Aa.WARNING, true);
            return null;
          }
          if (this.members.indexOf(b) >= 0) {
            return b;
          }
          if (a < this.length && this.members[a] == null) {
            this.members[a] = b;
            this.onMemberAdd(b);
            return b;
          }
          if (this.maxSize > 0 && this.length >= this.maxSize) {
            return b;
          }
          this.members.splice(a, 0, b);
          this.length++;
          this.onMemberAdd(b);
          return b;
        },
        recycle: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = false;
          }
          if (this.maxSize > 0) {
            if (this.length < this.maxSize) {
              if (b != null) {
                return this.add(b());
              } else if (a != null) {
                return this.add(yb.createInstance(a, []));
              } else {
                return null;
              }
            }
            c = this.members[this._marker++];
            if (this._marker >= this.maxSize) {
              this._marker = 0;
            }
            if (d) {
              c.revive();
            }
            return c;
          }
          c = this.getFirstAvailable(a, c);
          if (c != null) {
            if (d) {
              c.revive();
            }
            return c;
          } else if (b != null) {
            return this.add(b());
          } else if (a != null) {
            return this.add(yb.createInstance(a, []));
          } else {
            return null;
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (this.members == null) {
            return null;
          }
          var c = this.members.indexOf(a);
          if (c < 0) {
            return null;
          }
          if (b) {
            this.members.splice(c, 1);
            this.length--;
          } else {
            this.members[c] = null;
          }
          this.onMemberRemove(a);
          return a;
        },
        any: function (a) {
          for (var b = 0, c = this.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && a(d)) {
              return true;
            }
          }
          return false;
        },
        getFirstAvailable: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && !e.exists && (a == null || !!wa.__instanceof(e, a)) && (!b || wa.getClass(e).__name__ == a.__name__)) {
              return e;
            }
          }
          return null;
        },
        getFirstNull: function () {
          return this.members.indexOf(null);
        },
        clear: function () {
          this.length = 0;
          if (this._memberRemoved != null) {
            for (var a = 0, b = this.members; a < b.length;) {
              var c = b[a];
              ++a;
              this.onMemberRemove(c);
            }
          }
          ue.clearArray(this.members);
        },
        killMembers: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.exists) {
              c.kill();
            }
          }
        },
        kill: function () {
          this.killMembers();
          Ca.prototype.kill.call(this);
        },
        reviveMembers: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && !c.exists) {
              c.revive();
            }
          }
        },
        revive: function () {
          this.reviveMembers();
          Ca.prototype.revive.call(this);
        },
        forEach: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              if (b) {
                var f = ab.resolveGroup(e);
                if (f != null) {
                  f.forEach(a, b);
                }
              }
              a(e);
            }
          }
        },
        forEachAlive: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.exists && e.alive) {
              if (b) {
                var f = ab.resolveGroup(e);
                if (f != null) {
                  f.forEachAlive(a, b);
                }
              }
              a(e);
            }
          }
        },
        forEachExists: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = this.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.exists) {
              if (b) {
                var f = ab.resolveGroup(e);
                if (f != null) {
                  f.forEachExists(a, b);
                }
              }
              a(e);
            }
          }
        },
        set_maxSize: function (a) {
          this.maxSize = Math.abs(a) | 0;
          if (this._marker >= this.maxSize) {
            this._marker = 0;
          }
          if (this.maxSize == 0 || this.members == null || this.maxSize >= this.length) {
            return this.maxSize;
          }
          while (this.length > this.maxSize) {
            a = this.members.splice(this.maxSize - 1, 1)[0];
            if (a != null) {
              this.onMemberRemove(a);
              a.destroy();
            }
            this.length--;
          }
          return this.maxSize;
        },
        onMemberAdd: function (a) {
          if (this._memberAdded != null) {
            this._memberAdded.dispatch(a);
          }
        },
        onMemberRemove: function (a) {
          if (this._memberRemoved != null) {
            this._memberRemoved.dispatch(a);
          }
        },
        __class__: ab,
        __properties__: q(Ca.prototype.__properties__, {
          set_maxSize: "set_maxSize"
        })
      });
      function Xe(a) {
        if (a == null) {
          a = 0;
        }
        ab.call(this, a);
      }
      h["flixel.group.FlxTypedContainer"] = Xe;
      Xe.__name__ = "flixel.group.FlxTypedContainer";
      Xe.__super__ = ab;
      Xe.prototype = q(ab.prototype, {
        onMemberAdd: function (a) {
          if (a.get_container() != null) {
            a.get_container().remove(a);
          }
          a.container = this;
          ab.prototype.onMemberAdd.call(this, a);
        },
        onMemberRemove: function (a) {
          a.container = null;
          ab.prototype.onMemberRemove.call(this, a);
        },
        __class__: Xe
      });
      function nc() {
        this._requestSubStateReset = false;
        this.persistentDraw = this.destroySubStates = true;
        this.persistentUpdate = false;
        Xe.call(this, 0);
      }
      h["flixel.FlxState"] = nc;
      nc.__name__ = "flixel.FlxState";
      nc.__super__ = Xe;
      nc.prototype = q(Xe.prototype, {
        create: function () {},
        draw: function () {
          if (this.persistentDraw || this.subState == null) {
            Xe.prototype.draw.call(this);
          }
          if (this.subState != null) {
            this.subState.draw();
          }
        },
        openSubState: function (a) {
          this._requestSubStateReset = true;
          this._requestedSubState = a;
        },
        closeSubState: function () {
          this._requestSubStateReset = true;
        },
        resetSubState: function () {
          if (this.subState != null) {
            if (this.subState.closeCallback != null) {
              this.subState.closeCallback();
            }
            if (this._subStateClosed != null) {
              this._subStateClosed.dispatch(this.subState);
            }
            if (this.destroySubStates) {
              this.subState.destroy();
            }
          }
          this.subState = this._requestedSubState;
          this._requestedSubState = null;
          if (this.subState != null) {
            if (!this.persistentUpdate) {
              g.inputs.onStateSwitch();
            }
            this.subState._parentState = this;
            if (!this.subState._created) {
              this.subState._created = true;
              this.subState.create();
            }
            if (this.subState.openCallback != null) {
              this.subState.openCallback();
            }
            if (this._subStateOpened != null) {
              this._subStateOpened.dispatch(this.subState);
            }
          }
        },
        destroy: function () {
          this._constructor = fg.fromMaker(function () {
            throw I.thrown("Attempting to resetState while the current state is destroyed");
          });
          ca.destroy(this._subStateOpened);
          ca.destroy(this._subStateClosed);
          if (this.subState != null) {
            this.subState.destroy();
            this.subState = null;
          }
          Xe.prototype.destroy.call(this);
        },
        switchTo: function (a) {
          return true;
        },
        startOutro: function (a) {
          a();
        },
        onFocusLost: function () {},
        onFocus: function () {},
        onResize: function (a, b) {},
        tryUpdate: function (a) {
          if (this.persistentUpdate || this.subState == null) {
            this.update(a);
          }
          if (this._requestSubStateReset) {
            this._requestSubStateReset = false;
            this.resetSubState();
          }
          if (this.subState != null) {
            this.subState.tryUpdate(a);
          }
        },
        get_bgColor: function () {
          return g.cameras.get_bgColor();
        },
        set_bgColor: function (a) {
          return g.cameras.set_bgColor(a);
        },
        get_subStateOpened: function () {
          if (this._subStateOpened == null) {
            this._subStateOpened = new vf();
          }
          return this._subStateOpened;
        },
        get_subStateClosed: function () {
          if (this._subStateClosed == null) {
            this._subStateClosed = new vf();
          }
          return this._subStateClosed;
        },
        __class__: nc,
        __properties__: q(Xe.prototype.__properties__, {
          get_subStateClosed: "get_subStateClosed",
          get_subStateOpened: "get_subStateOpened",
          set_bgColor: "set_bgColor",
          get_bgColor: "get_bgColor"
        })
      });
      function od(a) {
        if (a == null) {
          a = 0;
        }
        this._created = false;
        nc.call(this);
        this.openCallback = this.closeCallback = null;
        if (g.renderTile) {
          this._bgSprite = new uk();
        }
        this.set_bgColor(a);
      }
      h["flixel.FlxSubState"] = od;
      od.__name__ = "flixel.FlxSubState";
      od.__super__ = nc;
      od.prototype = q(nc.prototype, {
        draw: function () {
          if (g.renderBlit) {
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              c.fill(this._bgColor);
            }
          } else {
            this._bgSprite.draw();
          }
          nc.prototype.draw.call(this);
        },
        destroy: function () {
          nc.prototype.destroy.call(this);
          this._parentState = this.openCallback = this.closeCallback = null;
          this._bgSprite = ca.destroy(this._bgSprite);
        },
        close: function () {
          if (this._parentState != null && this._parentState.subState == this) {
            this._parentState.closeSubState();
          }
        },
        get_bgColor: function () {
          return this._bgColor;
        },
        set_bgColor: function (a) {
          if (g.renderTile && this._bgSprite != null) {
            this._bgSprite.get_pixels().setPixel32(0, 0, a);
          }
          return this._bgColor = a;
        },
        __class__: od
      });
      function rb() {
        this.curSection = this.stepsToDo = this.lastBeat = this.lastStep = this.curStep = this.curBeat = this.curDecStep = this.curDecBeat = 0;
        od.call(this);
      }
      h["backend.MusicBeatSubstate"] = rb;
      rb.__name__ = "backend.MusicBeatSubstate";
      rb.__super__ = od;
      rb.prototype = q(od.prototype, {
        get_controls: function () {
          return $a.instance;
        },
        update: function (a) {
          if (!this.persistentUpdate) {
            P.timePassedOnState += a;
          }
          var b = this.curStep;
          this.updateCurStep();
          this.updateBeat();
          if (b != this.curStep) {
            if (this.curStep > 0) {
              this.stepHit();
            }
            if (z.SONG != null) {
              if (b < this.curStep) {
                this.updateSection();
              } else {
                this.rollbackSection();
              }
            }
          }
          od.prototype.update.call(this, a);
        },
        updateSection: function () {
          if (this.stepsToDo < 1) {
            this.stepsToDo = Math.round(this.getBeatsOnSection() * 4);
          }
          while (this.curStep >= this.stepsToDo) {
            this.curSection++;
            var a = this.getBeatsOnSection();
            this.stepsToDo += Math.round(a * 4);
            this.sectionHit();
          }
        },
        rollbackSection: function () {
          if (!(this.curStep < 0)) {
            var a = this.curSection;
            for (var b = this.stepsToDo = this.curSection = 0, c = z.SONG.notes.length; b < c;) {
              var d = b++;
              if (z.SONG.notes[d] != null) {
                this.stepsToDo += Math.round(this.getBeatsOnSection() * 4);
                if (this.stepsToDo > this.curStep) {
                  break;
                }
                this.curSection++;
              }
            }
            if (this.curSection > a) {
              this.sectionHit();
            }
          }
        },
        updateBeat: function () {
          this.curBeat = Math.floor(this.curStep / 4);
          this.curDecBeat = this.curDecStep / 4;
        },
        updateCurStep: function () {
          var a = K.getBPMFromSeconds(K.songPosition);
          var b = (K.songPosition - C.data.noteOffset - a.songTime) / a.stepCrochet;
          this.curDecStep = a.stepTime + b;
          this.curStep = a.stepTime + Math.floor(b);
        },
        stepHit: function () {
          if (this.curStep % 4 == 0) {
            this.beatHit();
          }
        },
        beatHit: function () {},
        sectionHit: function () {},
        getBeatsOnSection: function () {
          var a = 4;
          if (z.SONG != null && z.SONG.notes[this.curSection] != null) {
            a = z.SONG.notes[this.curSection].sectionBeats;
          }
          if (a == null) {
            return 4;
          } else {
            return a;
          }
        },
        __class__: rb,
        __properties__: q(od.prototype.__properties__, {
          get_controls: "get_controls"
        })
      });
      function gg(a, b) {
        this.isTransIn = false;
        this.duration = a;
        this.isTransIn = b;
        rb.call(this);
      }
      h["backend.CustomFadeTransition"] = gg;
      gg.__name__ = "backend.CustomFadeTransition";
      gg.__super__ = rb;
      gg.prototype = q(rb.prototype, {
        create: function () {
          this.set_cameras([g.cameras.list[g.cameras.list.length - 1]]);
          var a = g.width / Math.max(this.get_camera().zoom, 0.001) | 0;
          var b = g.height / Math.max(this.get_camera().zoom, 0.001) | 0;
          this.transGradient = pd.createGradientFlxSprite(1, b, this.isTransIn ? [0, -16777216] : [-16777216, 0]);
          this.transGradient.scale.set_x(a);
          this.transGradient.updateHitbox();
          var c = this.transGradient.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          c = this.transGradient;
          var d = 1;
          if (d == null) {
            d = 17;
          }
          if (d == 1 || d == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (d == 16 || d == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.add(this.transGradient);
          this.transBlack = new G().makeGraphic(1, 1, -16777216);
          c = this.transBlack.scale;
          b += 400;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this.transBlack.updateHitbox();
          c = this.transBlack.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          c = this.transBlack;
          d = 1;
          if (d == null) {
            d = 17;
          }
          if (d == 1 || d == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (d == 16 || d == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.add(this.transBlack);
          if (this.isTransIn) {
            this.transGradient.set_y(this.transBlack.y - this.transBlack.get_height());
          } else {
            this.transGradient.set_y(-this.transGradient.get_height());
          }
          rb.prototype.create.call(this);
        },
        update: function (a) {
          rb.prototype.update.call(this, a);
          var b = g.height * Math.max(this.get_camera().zoom, 0.001);
          var c = this.transGradient.get_height() + Math.max(this.get_camera().zoom, 0.001) * 50;
          if (this.duration > 0) {
            var d = this.transGradient;
            d.set_y(d.y + (b + c) * a / this.duration);
          } else {
            this.transGradient.set_y(c * a);
          }
          if (this.isTransIn) {
            this.transBlack.set_y(this.transGradient.y + this.transGradient.get_height());
          } else {
            this.transBlack.set_y(this.transGradient.y - this.transBlack.get_height());
          }
          if (this.transGradient.y >= c) {
            this.close();
            if (gg.finishCallback != null) {
              gg.finishCallback();
            }
            gg.finishCallback = null;
          }
        },
        __class__: gg
      });
      function qb() {}
      h["backend.Difficulty"] = qb;
      qb.__name__ = "backend.Difficulty";
      function Ya() {}
      h["backend.Highscore"] = Ya;
      Ya.__name__ = "backend.Highscore";
      Ya.resetSong = function (a, b) {
        if (b == null) {
          b = 0;
        }
        a = Ya.formatSong(a, b);
        Ya.setScore(a, 0);
        Ya.setRating(a, 0);
      };
      Ya.resetWeek = function (a, b) {
        if (b == null) {
          b = 0;
        }
        a = Ya.formatSong(a, b);
        Ya.setWeekScore(a, 0);
      };
      Ya.saveScore = function (a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = Ya.formatSong(a, c);
        if (Object.prototype.hasOwnProperty.call(Ya.songScores.h, a)) {
          if (Ya.songScores.h[a] < b) {
            Ya.setScore(a, b);
            if (d >= 0) {
              Ya.setRating(a, d);
            }
          }
        } else {
          Ya.setScore(a, b);
          if (d >= 0) {
            Ya.setRating(a, d);
          }
        }
      };
      Ya.saveWeekScore = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = Ya.formatSong(a, c);
        if (Object.prototype.hasOwnProperty.call(Ya.weekScores.h, a)) {
          if (Ya.weekScores.h[a] < b) {
            Ya.setWeekScore(a, b);
          }
        } else {
          Ya.setWeekScore(a, b);
        }
      };
      Ya.setScore = function (a, b) {
        Ya.songScores.h[a] = b;
        g.save.data.songScores = Ya.songScores;
        g.save.flush();
      };
      Ya.setWeekScore = function (a, b) {
        Ya.weekScores.h[a] = b;
        g.save.data.weekScores = Ya.weekScores;
        g.save.flush();
      };
      Ya.setRating = function (a, b) {
        Ya.songRating.h[a] = b;
        g.save.data.songRating = Ya.songRating;
        g.save.flush();
      };
      Ya.formatSong = function (a, b) {
        var c = new na("[~&\\\\;:<>#]", "");
        var d = new na("[.,'\"%?!]", "");
        c = c.split(v.replace(a, " ", "-")).join("-");
        a = d.split(c).join("").toLowerCase();
        d = b;
        if (d == null) {
          d = z.storyDifficulty;
        }
        b = qb.list[d];
        b = b != qb.defaultDifficulty ? "-" + b : "";
        c = new na("[~&\\\\;:<>#]", "");
        d = new na("[.,'\"%?!]", "");
        c = c.split(v.replace(b, " ", "-")).join("-");
        return a + d.split(c).join("").toLowerCase();
      };
      Ya.getScore = function (a, b) {
        a = Ya.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call(Ya.songScores.h, a)) {
          Ya.setScore(a, 0);
        }
        return Ya.songScores.h[a];
      };
      Ya.getRating = function (a, b) {
        a = Ya.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call(Ya.songRating.h, a)) {
          Ya.setRating(a, 0);
        }
        return Ya.songRating.h[a];
      };
      Ya.getWeekScore = function (a, b) {
        a = Ya.formatSong(a, b);
        if (!Object.prototype.hasOwnProperty.call(Ya.weekScores.h, a)) {
          Ya.setWeekScore(a, 0);
        }
        return Ya.weekScores.h[a];
      };
      Ya.load = function () {
        if (g.save.data.weekScores != null) {
          Ya.weekScores = g.save.data.weekScores;
        }
        if (g.save.data.songScores != null) {
          Ya.songScores = g.save.data.songScores;
        }
        if (g.save.data.songRating != null) {
          Ya.songRating = g.save.data.songRating;
        }
      };
      function Rd() {}
      h["backend.InputFormatter"] = Rd;
      Rd.__name__ = "backend.InputFormatter";
      Rd.getKeyName = function (a) {
        switch (a) {
          case -1:
            return "---";
          case 8:
            return "BckSpc";
          case 17:
            return "Ctrl";
          case 18:
            return "Alt";
          case 20:
            return "Caps";
          case 33:
            return "PgUp";
          case 34:
            return "PgDown";
          case 48:
            return "0";
          case 49:
            return "1";
          case 50:
            return "2";
          case 51:
            return "3";
          case 52:
            return "4";
          case 53:
            return "5";
          case 54:
            return "6";
          case 55:
            return "7";
          case 56:
            return "8";
          case 57:
            return "9";
          case 96:
            return "#0";
          case 97:
            return "#1";
          case 98:
            return "#2";
          case 99:
            return "#3";
          case 100:
            return "#4";
          case 101:
            return "#5";
          case 102:
            return "#6";
          case 103:
            return "#7";
          case 104:
            return "#8";
          case 105:
            return "#9";
          case 106:
            return "#*";
          case 107:
            return "#+";
          case 109:
            return "#-";
          case 110:
            return "#.";
          case 186:
            return ";";
          case 188:
            return ",";
          case 190:
            return ".";
          case 192:
            return "`";
          case 219:
            return "[";
          case 221:
            return "]";
          case 222:
            return "'";
          case 301:
            return "PrtScrn";
          default:
            a = Fg.toStringMap.get(a);
            if (a.toLowerCase() == "null") {
              return "---";
            }
            a = a.split("_");
            for (var b = 0, c = a.length; b < c;) {
              var d = b++;
              var e = a[d];
              a[d] = e.charAt(0).toUpperCase() + L.substr(e, 1, null).toLowerCase();
            }
            return a.join(" ");
        }
      };
      Rd.getGamepadName = function (a) {
        var b = g.gamepads.firstActive;
        b = b != null ? b.detectedModel : uc.UNKNOWN;
        switch (a) {
          case -1:
            return "---";
          case 0:
            switch (b._hx_index) {
              case 2:
                return "X";
              case 4:
                return "A";
              default:
                return "Action Down";
            }
          case 1:
            switch (b._hx_index) {
              case 2:
                return "O";
              case 4:
                return "B";
              default:
                return "Action Right";
            }
          case 2:
            switch (b._hx_index) {
              case 2:
                return "[";
              case 4:
                return "X";
              default:
                return "Action Left";
            }
          case 3:
            switch (b._hx_index) {
              case 2:
                return "]";
              case 4:
                return "Y";
              default:
                return "Action Up";
            }
          case 4:
            switch (b._hx_index) {
              case 2:
                return "L1";
              case 4:
                return "LB";
              default:
                return "L. Bumper";
            }
          case 5:
            switch (b._hx_index) {
              case 2:
                return "R1";
              case 4:
                return "RB";
              default:
                return "R. Bumper";
            }
          case 6:
            switch (b._hx_index) {
              case 2:
                return "Share";
              case 4:
                return "Back";
              default:
                return "Select";
            }
          case 7:
            if (b._hx_index == 2) {
              return "Options";
            } else {
              return "Start";
            }
          case 8:
            switch (b._hx_index) {
              case 2:
                return "L3";
              case 4:
                return "LS";
              default:
                return "Analog Click";
            }
          case 9:
            switch (b._hx_index) {
              case 2:
                return "R3";
              case 4:
                return "RS";
              default:
                return "C. Click";
            }
          case 11:
            return "D. Up";
          case 12:
            return "D. Down";
          case 13:
            return "D. Left";
          case 14:
            return "D. Right";
          case 15:
          case 17:
            switch (b._hx_index) {
              case 2:
                return "L2";
              case 4:
                return "LT";
              default:
                return "L. Trigger";
            }
          case 16:
          case 18:
            switch (b._hx_index) {
              case 2:
                return "R2";
              case 4:
                return "RT";
              default:
                return "R. Trigger";
            }
          case 34:
            return "Up";
          case 35:
            return "Right";
          case 36:
            return "Down";
          case 37:
            return "Left";
          case 38:
            return "C. Up";
          case 39:
            return "C. Right";
          case 40:
            return "C. Down";
          case 41:
            return "C. Left";
          default:
            a = hg.toStringMap.get(a);
            if (a.toLowerCase() == "null") {
              return "---";
            }
            a = a.split("_");
            b = 0;
            for (var c = a.length; b < c;) {
              var d = b++;
              var e = a[d];
              a[d] = e.charAt(0).toUpperCase() + L.substr(e, 1, null).toLowerCase();
            }
            return a.join(" ");
        }
      };
      function ve() {}
      h["backend.Mods"] = ve;
      ve.__name__ = "backend.Mods";
      ve.loadTopMod = function () {
        ve.currentModDirectory = "";
      };
      function Vb(a, b) {
        this.transOutFinished = this._exiting = false;
        this.transIn = a;
        this.transOut = b;
        if (this.transIn == null && Vb.defaultTransIn != null) {
          this.transIn = Vb.defaultTransIn;
        }
        if (this.transOut == null && Vb.defaultTransOut != null) {
          this.transOut = Vb.defaultTransOut;
        }
        nc.call(this);
      }
      h["flixel.addons.transition.FlxTransitionableState"] = Vb;
      Vb.__name__ = "flixel.addons.transition.FlxTransitionableState";
      Vb.__super__ = nc;
      Vb.prototype = q(nc.prototype, {
        destroy: function () {
          nc.prototype.destroy.call(this);
          this._onExit = this.transOut = this.transIn = null;
        },
        create: function () {
          nc.prototype.create.call(this);
          this.transitionIn();
        },
        startOutro: function (a) {
          if (this.get_hasTransOut()) {
            if (!this._exiting) {
              this._exiting = true;
              this.transitionOut(a);
              if (Vb.skipNextTransOut) {
                Vb.skipNextTransOut = false;
                this.finishTransOut();
              }
            }
          } else {
            a();
          }
        },
        transitionIn: function () {
          if (this.transIn != null && this.transIn.type != "none") {
            if (Vb.skipNextTransIn) {
              Vb.skipNextTransIn = false;
              if (this.finishTransIn != null) {
                this.finishTransIn();
              }
            } else {
              var a = this.createTransition(this.transIn);
              a.setStatus(3);
              this.openSubState(a);
              a.set_finishCallback(n(this, this.finishTransIn));
              a.start(1);
            }
          }
        },
        transitionOut: function (a) {
          this._onExit = a;
          if (this.get_hasTransOut()) {
            a = this.createTransition(this.transOut);
            a.setStatus(2);
            this.openSubState(a);
            a.set_finishCallback(n(this, this.finishTransOut));
            a.start(0);
          } else {
            this._onExit();
          }
        },
        get_hasTransIn: function () {
          if (this.transIn != null) {
            return this.transIn.type != "none";
          } else {
            return false;
          }
        },
        get_hasTransOut: function () {
          if (this.transOut != null) {
            return this.transOut.type != "none";
          } else {
            return false;
          }
        },
        createTransition: function (a) {
          switch (a.type) {
            case "fade":
              return new Vi(a);
            case "tiles":
              return new Vi(a);
            default:
              return null;
          }
        },
        finishTransIn: function () {
          this.closeSubState();
        },
        finishTransOut: function () {
          this.transOutFinished = true;
          if (!this._exiting) {
            this.closeSubState();
          }
          if (this._onExit != null) {
            this._onExit();
          }
        },
        __class__: Vb,
        __properties__: q(nc.prototype.__properties__, {
          get_hasTransOut: "get_hasTransOut",
          get_hasTransIn: "get_hasTransIn"
        })
      });
      function nh() {}
      h["flixel.addons.ui.interfaces.IEventGetter"] = nh;
      nh.__name__ = "flixel.addons.ui.interfaces.IEventGetter";
      nh.__isInterface__ = true;
      nh.prototype = {
        __class__: nh
      };
      function Gg() {}
      h["flixel.addons.ui.interfaces.IFlxUIState"] = Gg;
      Gg.__name__ = "flixel.addons.ui.interfaces.IFlxUIState";
      Gg.__isInterface__ = true;
      Gg.__interfaces__ = [nh];
      Gg.prototype = {
        __class__: Gg
      };
      function Sd(a, b) {
        this.getTextFallback = null;
        this._reload_countdown = 0;
        this.reload_ui_on_resize = this._reload = false;
        this._xml_id = "";
        this.hideCursorOnSubstate = this._cursorHidden = false;
        this.cursor = null;
        Vb.call(this, a, b);
      }
      h["flixel.addons.ui.FlxUIState"] = Sd;
      Sd.__name__ = "flixel.addons.ui.FlxUIState";
      Sd.__interfaces__ = [Gg, nh];
      Sd.__super__ = Vb;
      Sd.prototype = q(Vb.prototype, {
        create: function () {
          if (Sd.static_tongue != null) {
            this._tongue = Sd.static_tongue;
          }
          if (this._makeCursor == 1) {
            this.cursor = this.createCursor();
          }
          this.tooltips = new Wi(this);
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          if (this.getTextFallback != null) {
            this._ui.getTextFallback = this.getTextFallback;
          }
          if (this._xml_id != null && this._xml_id != "") {
            var a = null;
            try {
              a = D.xml(this._xml_id);
            } catch (c) {
              Oa.lastError = c;
              var b = I.caught(c).unwrap();
              if (typeof b != "string") {
                throw c;
              }
            }
            if (a == null) {
              try {
                a = D.xml(this._xml_id, "xml", true, "");
              } catch (c) {
                Oa.lastError = c;
                b = I.caught(c).unwrap();
                if (typeof b != "string") {
                  throw c;
                }
              }
            }
            if (a == null) {
              g.log.advanced("FlxUISubState: Could not load _xml_id \"" + this._xml_id + "\"", Aa.ERROR, true);
            } else {
              this.loadUIFromData(a);
            }
          } else {
            this.loadUIFromData(null);
          }
          if (this.cursor != null && this._ui != null) {
            this.add(this.cursor);
            this.cursor.addWidgetsFromUI(this._ui);
            this.cursor.findVisibleLocation(0);
          }
          this.tooltips.init();
          Vb.prototype.create.call(this);
          this.cleanup();
        },
        update: function (a) {
          Vb.prototype.update.call(this, a);
          if (this.tooltips != null) {
            this.tooltips.update(a);
          }
          if (this._reload && this._reload_countdown > 0) {
            this._reload_countdown--;
            if (this._reload_countdown == 0) {
              this.reloadUI();
            }
          }
        },
        cleanup: function () {
          this._ui.cleanup();
        },
        _cleanupUIVars: function () {
          if (this._ui_vars != null) {
            var a = Object.keys(this._ui_vars.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._ui_vars;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._ui_vars = null;
          }
        },
        setUIVariable: function (a, b) {
          if (this._ui != null) {
            this._ui.setVariable(a, b);
          } else {
            if (this._ui_vars == null) {
              this._ui_vars = new xa();
            }
            this._ui_vars.h[a] = b;
          }
        },
        resizeScreen: function (a, b) {},
        openSubState: function (a) {
          if (this.cursor != null && this.hideCursorOnSubstate && this.cursor.visible == 1) {
            this._cursorHidden = true;
            this.cursor.set_visible(false);
          }
          Vb.prototype.openSubState.call(this, a);
        },
        closeSubState: function () {
          if (this.cursor != null && this.hideCursorOnSubstate && this._cursorHidden) {
            this._cursorHidden = false;
            this.cursor.set_visible(true);
          }
          Vb.prototype.closeSubState.call(this);
        },
        onResize: function (a, b) {
          if (this.reload_ui_on_resize) {
            g.scaleMode.onMeasure(a, b);
            this._reload_countdown = 1;
            this._reload = true;
          }
        },
        onShowTooltip: function (a) {},
        destroy: function () {
          this.destroyed = true;
          if (this._ui != null) {
            this._ui.destroy();
            this.remove(this._ui, true);
            this._ui = null;
          }
          if (this.tooltips != null) {
            this.tooltips.destroy();
            this.tooltips = null;
          }
          Vb.prototype.destroy.call(this);
        },
        forceFocus: function (a, b) {
          if (this._ui != null) {
            if (a) {
              this._ui.set_focus(b);
            } else {
              this._ui.set_focus(null);
            }
          }
        },
        onCursorEvent: function (a, b) {
          this.getEvent(a, b, null);
        },
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        getText: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "ui";
          }
          if (this._tongue != null) {
            return this._tongue.get(a, b, c);
          } else if (this.getTextFallback != null) {
            return this.getTextFallback(a, b, c);
          } else {
            return a;
          }
        },
        createCursor: function () {
          return new Xi(n(this, this.onCursorEvent));
        },
        createUI: function (a, b, c, d, e) {
          if (e == null) {
            e = "";
          }
          a = new Ma(a, b, c, d, e, this._ui_vars);
          this._cleanupUIVars();
          return a;
        },
        loadUIFromData: function (a) {
          this._ui.load(a);
        },
        reloadUI: function (a) {
          if (this._ui != null) {
            this.remove(this._ui, true);
            this._ui.destroy();
            this._ui = null;
          }
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          a = D.xml(this._xml_id);
          if (a != null) {
            this.loadUIFromData(a);
          }
          this._reload = false;
          this._reload_countdown = 0;
        },
        __class__: Sd
      });
      function P(a, b) {
        this.stages = [];
        this._psychCameraInitialized = false;
        this.curSection = this.stepsToDo = this.curStep = this.curBeat = this.curDecStep = this.curDecBeat = 0;
        Sd.call(this, a, b);
      }
      h["backend.MusicBeatState"] = P;
      P.__name__ = "backend.MusicBeatState";
      P.switchState = function (a) {
        if (a == null) {
          a = g.game._state;
        }
        if (a == g.game._state) {
          P.resetState();
        } else {
          if (Vb.skipNextTransIn) {
            var b = fg.fromState(a);
            var c = g.game._state;
            if (!(b instanceof nc) || !!g.canSwitchTo(b)) {
              g.game._state.startOutro(function () {
                if (g.game._state == c) {
                  g.game._nextState = b;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Aa.WARNING, true);
                }
              });
            }
          } else {
            P.startTransition(a);
          }
          Vb.skipNextTransIn = false;
        }
      };
      P.resetState = function () {
        if (Vb.skipNextTransIn) {
          if (g.game._state == null || g.game._state._constructor == null) {
            g.log.advanced("FlxG.resetState was called while switching states", Aa.ERROR, true);
          } else if (g.game._state._constructor instanceof nc) {
            var a = fg.fromState(yb.createInstance(wa.getClass(g.game._state), []));
            var b = g.game._state;
            if (!(a instanceof nc) || !!g.canSwitchTo(a)) {
              g.game._state.startOutro(function () {
                if (g.game._state == b) {
                  g.game._nextState = a;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Aa.WARNING, true);
                }
              });
            }
          } else {
            var c = g.game._state._constructor;
            var d = g.game._state;
            if (!(c instanceof nc) || !!g.canSwitchTo(c)) {
              g.game._state.startOutro(function () {
                if (g.game._state == d) {
                  g.game._nextState = c;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Aa.WARNING, true);
                }
              });
            }
          }
        } else {
          P.startTransition();
        }
        Vb.skipNextTransIn = false;
      };
      P.startTransition = function (a) {
        if (a == null) {
          a = g.game._state;
        }
        g.game._state.openSubState(new gg(0.6, false));
        gg.finishCallback = a == g.game._state ? function () {
          if (g.game._state == null || g.game._state._constructor == null) {
            g.log.advanced("FlxG.resetState was called while switching states", Aa.ERROR, true);
          } else if (g.game._state._constructor instanceof nc) {
            var a = fg.fromState(yb.createInstance(wa.getClass(g.game._state), []));
            var c = g.game._state;
            if (!(a instanceof nc) || !!g.canSwitchTo(a)) {
              g.game._state.startOutro(function () {
                if (g.game._state == c) {
                  g.game._nextState = a;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Aa.WARNING, true);
                }
              });
            }
          } else {
            var d = g.game._state._constructor;
            var e = g.game._state;
            if (!(d instanceof nc) || !!g.canSwitchTo(d)) {
              g.game._state.startOutro(function () {
                if (g.game._state == e) {
                  g.game._nextState = d;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Aa.WARNING, true);
                }
              });
            }
          }
        } : function () {
          var b = fg.fromState(a);
          var c = g.game._state;
          if (!(b instanceof nc) || !!g.canSwitchTo(b)) {
            g.game._state.startOutro(function () {
              if (g.game._state == c) {
                g.game._nextState = b;
              } else {
                g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Aa.WARNING, true);
              }
            });
          }
        };
      };
      P.getState = function () {
        return wa.__cast(g.game._state, P);
      };
      P.__super__ = Sd;
      P.prototype = q(Sd.prototype, {
        get_controls: function () {
          return $a.instance;
        },
        create: function () {
          var a = Vb.skipNextTransOut;
          if (!this._psychCameraInitialized) {
            this.initPsychCamera();
          }
          Sd.prototype.create.call(this);
          if (!a) {
            this.openSubState(new gg(0.6, true));
          }
          Vb.skipNextTransOut = false;
          P.timePassedOnState = 0;
        },
        initPsychCamera: function () {
          var a = new vk();
          g.cameras.reset(a);
          g.cameras.setDefaultDrawTarget(a, true);
          this._psychCameraInitialized = true;
          return a;
        },
        update: function (a) {
          var b = this.curStep;
          P.timePassedOnState += a;
          this.updateCurStep();
          this.updateBeat();
          if (b != this.curStep) {
            if (this.curStep > 0) {
              this.stepHit();
            }
            if (z.SONG != null) {
              if (b < this.curStep) {
                this.updateSection();
              } else {
                this.rollbackSection();
              }
            }
          }
          if (g.save.data != null) {
            g.save.data.fullscreen = g.get_fullscreen();
          }
          this.stagesFunc(function (b) {
            b.update(a);
          });
          Sd.prototype.update.call(this, a);
        },
        updateSection: function () {
          if (this.stepsToDo < 1) {
            this.stepsToDo = Math.round(this.getBeatsOnSection() * 4);
          }
          while (this.curStep >= this.stepsToDo) {
            this.curSection++;
            var a = this.getBeatsOnSection();
            this.stepsToDo += Math.round(a * 4);
            this.sectionHit();
          }
        },
        rollbackSection: function () {
          if (!(this.curStep < 0)) {
            var a = this.curSection;
            for (var b = this.stepsToDo = this.curSection = 0, c = z.SONG.notes.length; b < c;) {
              var d = b++;
              if (z.SONG.notes[d] != null) {
                this.stepsToDo += Math.round(this.getBeatsOnSection() * 4);
                if (this.stepsToDo > this.curStep) {
                  break;
                }
                this.curSection++;
              }
            }
            if (this.curSection > a) {
              this.sectionHit();
            }
          }
        },
        updateBeat: function () {
          this.curBeat = Math.floor(this.curStep / 4);
          this.curDecBeat = this.curDecStep / 4;
        },
        updateCurStep: function () {
          var a = K.getBPMFromSeconds(K.songPosition);
          var b = (K.songPosition - C.data.noteOffset - a.songTime) / a.stepCrochet;
          this.curDecStep = a.stepTime + b;
          this.curStep = a.stepTime + Math.floor(b);
        },
        stepHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curStep = a.curStep;
            b.curDecStep = a.curDecStep;
            b.stepHit();
          });
          if (this.curStep % 4 == 0) {
            this.beatHit();
          }
        },
        beatHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curBeat = a.curBeat;
            b.curDecBeat = a.curDecBeat;
            b.beatHit();
          });
        },
        sectionHit: function () {
          var a = this;
          this.stagesFunc(function (b) {
            b.curSection = a.curSection;
            b.sectionHit();
          });
        },
        stagesFunc: function (a) {
          for (var b = 0, c = this.stages; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.active) {
              a(d);
            }
          }
        },
        getBeatsOnSection: function () {
          var a = 4;
          if (z.SONG != null && z.SONG.notes[this.curSection] != null) {
            a = z.SONG.notes[this.curSection].sectionBeats;
          }
          if (a == null) {
            return 4;
          } else {
            return a;
          }
        },
        __class__: P,
        __properties__: q(Sd.prototype.__properties__, {
          get_controls: "get_controls"
        })
      });
      function Yi() {}
      h["backend.NoteTypesConfig"] = Yi;
      Yi.__name__ = "backend.NoteTypesConfig";
      Yi.clearNoteTypesData = function () {
        Yi.noteTypesData.h = Object.create(null);
      };
      function E() {}
      h["backend.Paths"] = E;
      E.__name__ = "backend.Paths";
      E.clearUnusedMemory = function () {
        var a = Object.keys(E.currentTrackedAssets.h);
        for (var b = a.length, c = 0; c < b;) {
          var d = a[c++];
          if (E.localTrackedAssets.indexOf(d) == -1 && E.dumpExclusions.indexOf(d) == -1) {
            var e = E.currentTrackedAssets.h[d];
            if (e != null) {
              var f = g.bitmap._cache;
              if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                delete f.h[d];
              }
              U.cache.removeBitmapData(d);
              f = E.currentTrackedAssets;
              if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                delete f.h[d];
              }
              e.persist = false;
              e.set_destroyOnNoUse(true);
              e.destroy();
            }
          }
        }
        Zi.gc();
      };
      E.clearStoredMemory = function () {
        var a = g.bitmap._cache.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          a = b[d++];
          var e = g.bitmap._cache.h[a];
          if (e != null && !Object.prototype.hasOwnProperty.call(E.currentTrackedAssets.h, a)) {
            U.cache.removeBitmapData(a);
            var f = g.bitmap._cache;
            if (Object.prototype.hasOwnProperty.call(f.h, a)) {
              delete f.h[a];
            }
            e.destroy();
          }
        }
        b = a = E.currentTrackedSounds.h;
        c = Object.keys(a);
        d = c.length;
        for (e = 0; e < d;) {
          var k = a = c[e++];
          a = b[a];
          if (E.localTrackedAssets.indexOf(k) == -1 && E.dumpExclusions.indexOf(k) == -1 && a != null) {
            oa.cache.clear(k);
            f = E.currentTrackedSounds;
            if (Object.prototype.hasOwnProperty.call(f.h, k)) {
              delete f.h[k];
            }
          }
        }
        E.localTrackedAssets = [];
      };
      E.setCurrentLevel = function (a) {
        E.currentLevel = a.toLowerCase();
      };
      E.getPath = function (a, b, c, d) {
        if (b == null) {
          b = "TEXT";
        }
        if (c != null) {
          return E.getLibraryPath(a, c);
        }
        if (E.currentLevel != null && E.currentLevel != "shared" && (c = E.currentLevel, d = null, d == null && (d = c), c = "" + c + ":assets/" + d + "/" + a, U.exists(c, b))) {
          return c;
        }
        if (a == null) {
          a = "";
        }
        return "assets/shared/" + a;
      };
      E.getLibraryPath = function (a, b) {
        if (b == null) {
          b = "shared";
        }
        if (b == "shared") {
          if (a == null) {
            a = "";
          }
          return "assets/shared/" + a;
        }
        var c = null;
        if (c == null) {
          c = b;
        }
        return "" + b + ":assets/" + c + "/" + a;
      };
      E.video = function (a) {
        return E.getPath("videos/" + a + ".mp4");
      };
      E.sound = function (a, b) {
        return E.returnSound("sounds", a, b);
      };
      E.image = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        var d = null;
        a = E.getPath("images/" + a + ".png", "IMAGE", b);
        if (Object.prototype.hasOwnProperty.call(E.currentTrackedAssets.h, a)) {
          E.localTrackedAssets.push(a);
          return E.currentTrackedAssets.h[a];
        }
        if (U.exists(a, "IMAGE")) {
          d = U.getBitmapData(a);
        }
        if (d != null && (c = E.cacheBitmap(a, d, c), c != null)) {
          return c;
        }
        Ab.trace("oh no its returning null NOOOO (" + a + ")", {
          fileName: "source/backend/Paths.hx",
          lineNumber: 245,
          className: "backend.Paths",
          methodName: "image"
        });
        return null;
      };
      E.cacheBitmap = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        if (b == null && (U.exists(a, "IMAGE") && (b = U.getBitmapData(a)), b == null)) {
          return null;
        }
        E.localTrackedAssets.push(a);
        if (c && C.data.cacheOnGPU) {
          c = ia.get_current().stage.context3D.createRectangleTexture(b.width, b.height, 1, true);
          c.uploadFromBitmapData(b);
          b.image.set_data(null);
          b.dispose();
          b.disposeImage();
          b = N.fromTexture(c);
        }
        b = cc.fromBitmapData(b, false, a);
        b.persist = true;
        b.set_destroyOnNoUse(false);
        return E.currentTrackedAssets.h[a] = b;
      };
      E.getTextFromFile = function (a, b) {
        a = E.getPath(a, "TEXT");
        if (U.exists(a, "TEXT")) {
          return oa.getText(a);
        } else {
          return null;
        }
      };
      E.fileExists = function (a, b, c, d) {
        if (U.exists(E.getPath(a, b, d, false))) {
          return true;
        } else {
          return false;
        }
      };
      E.getAtlas = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        c = E.image(a, b, c);
        var d = E.getPath("images/" + a + ".xml", "TEXT", b, true);
        if (U.exists(d)) {
          return Sa.fromSparrow(c, d);
        }
        d = E.getPath("images/" + a + ".json", "TEXT", b, true);
        if (U.exists(d)) {
          return Sa.fromTexturePackerJson(c, d);
        }
        c = E.image(a, b, true);
        return Sa.fromSpriteSheetPacker(c, E.getPath("images/" + a + ".txt", null, b));
      };
      E.getMultiAtlas = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        var d = E.getAtlas(v.trim(a[0]));
        if (a.length > 1) {
          var e = d;
          d = new Sa(d.parent);
          d.addAtlas(e, true);
          e = 1;
          for (var f = a.length; e < f;) {
            var k = e++;
            k = E.getAtlas(v.trim(a[k]), b, c);
            if (k != null) {
              d.addAtlas(k, true);
            }
          }
        }
        return d;
      };
      E.returnSound = function (a, b, c) {
        var d = "" + b + ".mp3";
        if (a != null) {
          d = "" + a + "/" + d;
        }
        d = E.getPath(d, "SOUND", c);
        d = d.substring(d.indexOf(":") + 1, d.length);
        if (!Object.prototype.hasOwnProperty.call(E.currentTrackedSounds.h, d)) {
          b = (a == "songs" ? "songs:" : "") + E.getPath("" + (a != null ? "" + a + "/" + b : b) + ".mp3", "SOUND", c);
          if (U.exists(b, "SOUND")) {
            a = E.currentTrackedSounds;
            b = U.getSound(b);
            a.h[d] = b;
          }
        }
        E.localTrackedAssets.push(d);
        return E.currentTrackedSounds.h[d];
      };
      E.loadAnimateAtlas = function (a, b, c, d) {
        var e = false;
        var f = false;
        var k = false;
        if (c != null) {
          f = true;
          c = U.getText(c);
        }
        if (d != null) {
          e = true;
          d = U.getText(d);
        }
        if (typeof b == "string") {
          var t = b;
          for (var l = 0; l < 10;) {
            var g = l++;
            var V = "" + g;
            if (g == 0) {
              V = "";
            }
            if (!f) {
              c = E.getTextFromFile("images/" + t + "/spritemap" + V + ".json");
              if (c != null) {
                k = true;
                b = E.image("" + t + "/spritemap" + V);
                break;
              }
            } else if (E.fileExists("images/" + t + "/spritemap" + V + ".png", "IMAGE")) {
              k = true;
              b = E.image("" + t + "/spritemap" + V);
              break;
            }
          }
          if (!k) {
            b = E.image(t);
          }
          if (!e) {
            d = E.getTextFromFile("images/" + t + "/Animation.json");
          }
        }
        a.loadAtlasEx(b, c, d);
      };
      function Sh() {}
      h["flixel.util.IFlxPooled"] = Sh;
      Sh.__name__ = "flixel.util.IFlxPooled";
      Sh.__isInterface__ = true;
      Sh.__interfaces__ = [ub];
      Sh.prototype = {
        __class__: Sh
      };
      function $o() {}
      h["flixel.util.IFlxPool"] = $o;
      $o.__name__ = "flixel.util.IFlxPool";
      $o.__isInterface__ = true;
      function Th(a) {
        this._count = 0;
        this._pool = [];
        this._constructor = a;
      }
      h["flixel.util.FlxPool"] = Th;
      Th.__name__ = "flixel.util.FlxPool";
      Th.__interfaces__ = [$o];
      Th.prototype = {
        get: function () {
          if (this._count == 0) {
            return this._constructor();
          } else {
            return this._pool[--this._count];
          }
        },
        put: function (a) {
          if (a != null) {
            var b = this._pool.indexOf(a);
            if (b == -1 || b >= this._count) {
              this.putHelper(a);
            }
          }
        },
        putUnsafe: function (a) {
          if (a != null) {
            this.putHelper(a);
          }
        },
        putHelper: function (a) {
          a.destroy();
          this._pool[this._count++] = a;
        },
        __class__: Th
      };
      function da(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._weak = this._inPool = false;
        this.x = this.y = 0;
        this.set(a, b);
      }
      h["flixel.math.FlxBasePoint"] = da;
      da.__name__ = "flixel.math.FlxBasePoint";
      da.__interfaces__ = [Sh];
      da.prototype = {
        set: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
          return this;
        },
        put: function () {
          if (!this._inPool) {
            this._inPool = true;
            this._weak = false;
            da.pool.putUnsafe(this);
          }
        },
        destroy: function () {},
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        __class__: da,
        __properties__: {
          set_y: "set_y",
          set_x: "set_x"
        }
      };
      function Ia(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._weak = this._inPool = false;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      h["flixel.math.FlxRect"] = Ia;
      Ia.__name__ = "flixel.math.FlxRect";
      Ia.__interfaces__ = [Sh];
      Ia.prototype = {
        put: function () {
          if (!this._inPool) {
            this._inPool = true;
            this._weak = false;
            Ia._pool.putUnsafe(this);
          }
        },
        getRotatedBounds: function (a, b, c) {
          if (b == null) {
            var d = b = 0;
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = da.pool.get().set(b, d);
            b._inPool = false;
            b._weak = true;
          }
          if (c == null) {
            d = Ia._pool.get();
            var e = 0;
            var f = 0;
            var k = 0;
            var t = 0;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.x = e;
            d.y = f;
            d.width = k;
            d.height = t;
            c = d;
            c._inPool = false;
          }
          a %= 360;
          if (a == 0) {
            d = b;
            if (d._weak) {
              d.put();
            }
            e = this.x;
            f = this.y;
            k = this.width;
            t = this.height;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.x = e;
            c.y = f;
            c.width = k;
            c.height = t;
            return c;
          }
          if (a < 0) {
            a += 360;
          }
          e = Math.PI / 180 * a;
          d = Math.cos(e);
          e = Math.sin(e);
          f = -b.x;
          k = -b.y;
          t = -b.x + this.width;
          var l = -b.y + this.height;
          if (a < 90) {
            c.x = this.x + b.x + d * f - e * l;
            c.y = this.y + b.y + e * f + d * k;
          } else if (a < 180) {
            c.x = this.x + b.x + d * t - e * l;
            c.y = this.y + b.y + e * f + d * l;
          } else if (a < 270) {
            c.x = this.x + b.x + d * t - e * k;
            c.y = this.y + b.y + e * t + d * l;
          } else {
            c.x = this.x + b.x + d * f - e * k;
            c.y = this.y + b.y + e * t + d * k;
          }
          a = Math.abs(d * this.height) + Math.abs(e * this.width);
          c.width = Math.abs(d * this.width) + Math.abs(e * this.height);
          c.height = a;
          d = b;
          if (d._weak) {
            d.put();
          }
          return c;
        },
        destroy: function () {},
        intersection: function (a, b) {
          if (b == null) {
            b = Ia._pool.get();
            var c = 0;
            var d = 0;
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
            b._inPool = false;
          }
          e = this.x < a.x ? a.x : this.x;
          var k = this.x + this.width > a.x + a.width ? a.x + a.width : this.x + this.width;
          if (k <= e) {
            if (a._weak && !a._inPool) {
              a._inPool = true;
              a._weak = false;
              Ia._pool.putUnsafe(a);
            }
            return b;
          }
          f = this.y < a.y ? a.y : this.y;
          var t = this.y + this.height > a.y + a.height ? a.y + a.height : this.y + this.height;
          if (t <= f) {
            if (a._weak && !a._inPool) {
              a._inPool = true;
              a._weak = false;
              Ia._pool.putUnsafe(a);
            }
            return b;
          }
          if (a._weak && !a._inPool) {
            a._inPool = true;
            a._weak = false;
            Ia._pool.putUnsafe(a);
          }
          c = e;
          d = f;
          e = k - e;
          f = t - f;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          return b;
        },
        __class__: Ia
      };
      function ap(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.a = a;
        this.b = b;
        this.c = c;
        this.d = d;
        this.tx = e;
        this.ty = f;
      }
      h["lime.math.Matrix3"] = ap;
      ap.__name__ = "lime.math.Matrix3";
      ap.prototype = {
        __class__: ap
      };
      function ya(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.a = a;
        this.b = b;
        this.c = c;
        this.d = d;
        this.tx = e;
        this.ty = f;
      }
      h["openfl.geom.Matrix"] = ya;
      ya.__name__ = "openfl.geom.Matrix";
      ya.prototype = {
        clone: function () {
          return new ya(this.a, this.b, this.c, this.d, this.tx, this.ty);
        },
        concat: function (a) {
          var b = this.a * a.a + this.b * a.c;
          this.b = this.a * a.b + this.b * a.d;
          this.a = b;
          b = this.c * a.a + this.d * a.c;
          this.d = this.c * a.b + this.d * a.d;
          this.c = b;
          b = this.tx * a.a + this.ty * a.c + a.tx;
          this.ty = this.tx * a.b + this.ty * a.d + a.ty;
          this.tx = b;
        },
        copyFrom: function (a) {
          this.a = a.a;
          this.b = a.b;
          this.c = a.c;
          this.d = a.d;
          this.tx = a.tx;
          this.ty = a.ty;
        },
        createGradientBox: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          this.a = a / 1638.4;
          this.d = b / 1638.4;
          if (c != 0) {
            var f = Math.cos(c);
            c = Math.sin(c);
            this.b = c * this.d;
            this.c = -c * this.a;
            this.a *= f;
            this.d *= f;
          } else {
            this.c = this.b = 0;
          }
          this.tx = d + a / 2;
          this.ty = e + b / 2;
        },
        equals: function (a) {
          if (a != null && this.tx == a.tx && this.ty == a.ty && this.a == a.a && this.b == a.b && this.c == a.c) {
            return this.d == a.d;
          } else {
            return false;
          }
        },
        identity: function () {
          this.a = 1;
          this.c = this.b = 0;
          this.d = 1;
          this.ty = this.tx = 0;
        },
        invert: function () {
          var a = this.a * this.d - this.b * this.c;
          if (a == 0) {
            this.a = this.b = this.c = this.d = 0;
            this.tx = -this.tx;
            this.ty = -this.ty;
          } else {
            a = 1 / a;
            var b = this.d * a;
            this.d = this.a * a;
            this.a = b;
            this.b *= -a;
            this.c *= -a;
            a = -this.a * this.tx - this.c * this.ty;
            this.ty = -this.b * this.tx - this.d * this.ty;
            this.tx = a;
          }
          return this;
        },
        rotate: function (a) {
          var b = Math.cos(a);
          a = Math.sin(a);
          var c = this.a * b - this.b * a;
          this.b = this.a * a + this.b * b;
          this.a = c;
          c = this.c * b - this.d * a;
          this.d = this.c * a + this.d * b;
          this.c = c;
          c = this.tx * b - this.ty * a;
          this.ty = this.tx * a + this.ty * b;
          this.tx = c;
        },
        scale: function (a, b) {
          this.a *= a;
          this.b *= b;
          this.c *= a;
          this.d *= b;
          this.tx *= a;
          this.ty *= b;
        },
        setTo: function (a, b, c, d, e, f) {
          this.a = a;
          this.b = b;
          this.c = c;
          this.d = d;
          this.tx = e;
          this.ty = f;
        },
        translate: function (a, b) {
          this.tx += a;
          this.ty += b;
        },
        __class__: ya
      };
      function Ob(a, b, c, d, e, f, k, t) {
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 1;
        }
        this.redMultiplier = a;
        this.greenMultiplier = b;
        this.blueMultiplier = c;
        this.alphaMultiplier = d;
        this.redOffset = e;
        this.greenOffset = f;
        this.blueOffset = k;
        this.alphaOffset = t;
      }
      h["openfl.geom.ColorTransform"] = Ob;
      Ob.__name__ = "openfl.geom.ColorTransform";
      Ob.prototype = {
        concat: function (a) {
          this.redOffset = a.redOffset * this.redMultiplier + this.redOffset;
          this.greenOffset = a.greenOffset * this.greenMultiplier + this.greenOffset;
          this.blueOffset = a.blueOffset * this.blueMultiplier + this.blueOffset;
          this.alphaOffset = a.alphaOffset * this.alphaMultiplier + this.alphaOffset;
          this.redMultiplier *= a.redMultiplier;
          this.greenMultiplier *= a.greenMultiplier;
          this.blueMultiplier *= a.blueMultiplier;
          this.alphaMultiplier *= a.alphaMultiplier;
        },
        __clone: function () {
          return new Ob(this.redMultiplier, this.greenMultiplier, this.blueMultiplier, this.alphaMultiplier, this.redOffset, this.greenOffset, this.blueOffset, this.alphaOffset);
        },
        __copyFrom: function (a) {
          this.redMultiplier = a.redMultiplier;
          this.greenMultiplier = a.greenMultiplier;
          this.blueMultiplier = a.blueMultiplier;
          this.alphaMultiplier = a.alphaMultiplier;
          this.redOffset = a.redOffset;
          this.greenOffset = a.greenOffset;
          this.blueOffset = a.blueOffset;
          this.alphaOffset = a.alphaOffset;
        },
        __combine: function (a) {
          this.redMultiplier *= a.redMultiplier;
          this.greenMultiplier *= a.greenMultiplier;
          this.blueMultiplier *= a.blueMultiplier;
          this.alphaMultiplier *= a.alphaMultiplier;
          this.redOffset += a.redOffset;
          this.greenOffset += a.greenOffset;
          this.blueOffset += a.blueOffset;
          this.alphaOffset += a.alphaOffset;
        },
        __identity: function () {
          this.alphaMultiplier = this.blueMultiplier = this.greenMultiplier = this.redMultiplier = 1;
          this.alphaOffset = this.blueOffset = this.greenOffset = this.redOffset = 0;
        },
        __invert: function () {
          this.redMultiplier = this.redMultiplier != 0 ? 1 / this.redMultiplier : 1;
          this.greenMultiplier = this.greenMultiplier != 0 ? 1 / this.greenMultiplier : 1;
          this.blueMultiplier = this.blueMultiplier != 0 ? 1 / this.blueMultiplier : 1;
          this.alphaMultiplier = this.alphaMultiplier != 0 ? 1 / this.alphaMultiplier : 1;
          this.redOffset = -this.redOffset;
          this.greenOffset = -this.greenOffset;
          this.blueOffset = -this.blueOffset;
          this.alphaOffset = -this.alphaOffset;
        },
        __equals: function (a, b) {
          if (a == null || this.redMultiplier != a.redMultiplier || this.greenMultiplier != a.greenMultiplier || this.blueMultiplier != a.blueMultiplier || !b && this.alphaMultiplier != a.alphaMultiplier || this.redOffset != a.redOffset || this.greenOffset != a.greenOffset || this.blueOffset != a.blueOffset) {
            return false;
          } else {
            return this.alphaOffset == a.alphaOffset;
          }
        },
        __isDefault: function (a) {
          if (a) {
            if (this.redMultiplier == 1 && this.greenMultiplier == 1 && this.blueMultiplier == 1 && this.redOffset == 0 && this.greenOffset == 0 && this.blueOffset == 0) {
              return this.alphaOffset == 0;
            } else {
              return false;
            }
          } else if (this.redMultiplier == 1 && this.greenMultiplier == 1 && this.blueMultiplier == 1 && this.alphaMultiplier == 1 && this.redOffset == 0 && this.greenOffset == 0 && this.blueOffset == 0) {
            return this.alphaOffset == 0;
          } else {
            return false;
          }
        },
        __setArrays: function (a, b) {
          a[0] = this.redMultiplier;
          a[1] = this.greenMultiplier;
          a[2] = this.blueMultiplier;
          a[3] = this.alphaMultiplier;
          b[0] = this.redOffset;
          b[1] = this.greenOffset;
          b[2] = this.blueOffset;
          b[3] = this.alphaOffset;
        },
        __toLimeColorMatrix: function () {
          if (Ob.__limeColorMatrix == null) {
            Ob.__limeColorMatrix = new Float32Array(20);
          }
          Ob.__limeColorMatrix[0] = this.redMultiplier;
          Ob.__limeColorMatrix[4] = this.redOffset / 255;
          Ob.__limeColorMatrix[6] = this.greenMultiplier;
          Ob.__limeColorMatrix[9] = this.greenOffset / 255;
          Ob.__limeColorMatrix[12] = this.blueMultiplier;
          Ob.__limeColorMatrix[14] = this.blueOffset / 255;
          Ob.__limeColorMatrix[18] = this.alphaMultiplier;
          Ob.__limeColorMatrix[19] = this.alphaOffset / 255;
          return Ob.__limeColorMatrix;
        },
        __class__: Ob
      };
      function Pb(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._helperPoint = new ob();
        this._helperMatrix = new Rc();
        var f = Ia._pool.get();
        var k = 0;
        var t = 0;
        var l = 0;
        var J = 0;
        if (J == null) {
          J = 0;
        }
        if (l == null) {
          l = 0;
        }
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 0;
        }
        f.x = k;
        f.y = t;
        f.width = l;
        f.height = J;
        f._inPool = false;
        this._bounds = f;
        this._scrollRect = new Ra();
        this.initialZoom = 1;
        this.filters = null;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = da.pool.get().set(f, k);
        f._inPool = false;
        this._point = f;
        this._fxShakeAxes = 17;
        this._fxFadeAlpha = this._fxShakeIntensity = this._fxShakeDuration = 0;
        this._fxFadeComplete = null;
        this._fxFadeIn = false;
        k = f = this._fxFadeDuration = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = da.pool.get().set(f, k);
        f._inPool = false;
        this._scrollTarget = f;
        this._fxFlashAlpha = this._fxFadeColor = 0;
        this._fxFlashComplete = null;
        k = f = this._fxFlashColor = this._fxFlashDuration = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = da.pool.get().set(f, k);
        f._inPool = false;
        this._flashOffset = f;
        this._flashPoint = new ob();
        this.filtersEnabled = true;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = da.pool.get().set(f, k);
        f._inPool = false;
        this.followLead = f;
        this.antialiasing = false;
        this.color = -1;
        this.alpha = 1;
        this._useBlitMatrix = false;
        this._blitMatrix = new Rc();
        this.width = this.height = 0;
        this.pixelPerfectShake = null;
        this.flashSprite = new Ra();
        this.useBgAlphaBlending = false;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = da.pool.get().set(f, k);
        f._inPool = false;
        this.scroll = f;
        this.followLerp = 60 / g.updateFramerate;
        k = f = 0;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        f = da.pool.get().set(f, k);
        f._inPool = false;
        this.targetOffset = f;
        this.x = this.y = this.scaleX = this.scaleY = 0;
        Ca.call(this);
        this.set_x(a);
        this.set_y(b);
        this.set_width(c <= 0 ? g.width : c);
        this.set_height(d <= 0 ? g.height : d);
        this._flashRect = new ba(0, 0, this.width, this.height);
        this.flashSprite.addChild(this._scrollRect);
        this._scrollRect.set_scrollRect(new ba());
        if (this.pixelPerfectRender = g.renderBlit) {
          this.screen = new G();
          this.buffer = new N(this.width, this.height, true, 0);
          this.screen.set_pixels(this.buffer);
          a = this.screen.origin;
          a.set_x(0);
          a.set_y(0);
          this._flashBitmap = new Lc(this.buffer);
          this._scrollRect.addChild(this._flashBitmap);
          this._fill = new N(this.width, this.height, true, 0);
        } else {
          this.canvas = new Ra();
          this._scrollRect.addChild(this.canvas);
        }
        this.set_color(-1);
        this.initialZoom = e == 0 ? Pb.defaultZoom : e;
        this.set_zoom(e);
        this.updateScrollRect();
        this.updateFlashOffset();
        this.updateFlashSpritePosition();
        this.updateInternalSpritePositions();
        this.bgColor = g.cameras.get_bgColor();
      }
      h["flixel.FlxCamera"] = Pb;
      Pb.__name__ = "flixel.FlxCamera";
      Pb.__super__ = Ca;
      Pb.prototype = q(Ca.prototype, {
        startQuadBatch: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          var k = Kd.blendToInt(d);
          if (this._currentDrawItem != null && this._currentDrawItem.type == wk.TILES && this._headTiles.graphics == a && this._headTiles.colored == b && this._headTiles.hasColorOffsets == c && this._headTiles.blending == k && this._headTiles.blend == d && this._headTiles.antialiasing == e && this._headTiles.shader == f) {
            return this._headTiles;
          }
          if (Pb._storageTilesHead != null) {
            var t = Pb._storageTilesHead;
            var l = Pb._storageTilesHead.nextTyped;
            t.reset();
            Pb._storageTilesHead = l;
          } else {
            t = new xk();
          }
          if (a.shader == null) {
            throw I.thrown("Attempted to queue an invalid FlxDrawItem, did you destroy a cached sprite?");
          }
          t.graphics = a;
          t.antialiasing = e;
          t.colored = b;
          t.hasColorOffsets = c;
          t.blending = k;
          t.blend = d;
          t.shader = f;
          t.nextTyped = this._headTiles;
          this._headTiles = t;
          if (this._headOfDrawStack == null) {
            this._headOfDrawStack = t;
          }
          if (this._currentDrawItem != null) {
            this._currentDrawItem.next = t;
          }
          return this._currentDrawItem = t;
        },
        clearDrawStack: function () {
          for (var a = this._headTiles, b; a != null;) {
            b = a.nextTyped;
            a.reset();
            a.nextTyped = Pb._storageTilesHead;
            Pb._storageTilesHead = a;
            a = b;
          }
          for (a = this._headTriangles; a != null;) {
            b = a.nextTyped;
            a.reset();
            a.nextTyped = Pb._storageTrianglesHead;
            Pb._storageTrianglesHead = a;
            a = b;
          }
          this._headTriangles = this._headTiles = this._headOfDrawStack = this._currentDrawItem = null;
        },
        render: function () {
          for (var a = this._headOfDrawStack; a != null;) {
            a.render(this);
            a = a.next;
          }
        },
        drawPixels: function (a, b, c, d, e, f, k) {
          if (f == null) {
            f = false;
          }
          if (g.renderBlit) {
            this._helperMatrix.copyFrom(c);
            if (this._useBlitMatrix) {
              this._helperMatrix.concat(this._blitMatrix);
              this.buffer.draw(b, this._helperMatrix, null, null, null, f || this.antialiasing);
            } else {
              this._helperMatrix.translate(-this.viewMarginX, -this.viewMarginY);
              this.buffer.draw(b, this._helperMatrix, null, e, null, f || this.antialiasing);
            }
          } else {
            b = d != null && Ye.hasRGBMultipliers(d);
            var t = d != null && Ye.hasRGBAOffsets(d);
            this.startQuadBatch(a.parent, b, t, e, f, k).addQuad(a, c, d);
          }
        },
        copyPixels: function (a, b, c, d, e, f, k, t) {
          if (k == null) {
            k = false;
          }
          if (g.renderBlit) {
            if (b != null) {
              if (this._useBlitMatrix) {
                this._helperMatrix.identity();
                this._helperMatrix.translate(d.x, d.y);
                this._helperMatrix.concat(this._blitMatrix);
                this.buffer.draw(b, this._helperMatrix, null, null, null, k || this.antialiasing);
              } else {
                this._helperPoint.x = d.x - (this.viewMarginX | 0);
                this._helperPoint.y = d.y - (this.viewMarginY | 0);
                this.buffer.copyPixels(b, c, this._helperPoint, null, null, true);
              }
            } else if (a != null) {
              a.paint(this.buffer, d, true);
            }
          } else {
            this._helperMatrix.identity();
            this._helperMatrix.translate(d.x + a.offset.x, d.y + a.offset.y);
            b = e != null && Ye.hasRGBMultipliers(e);
            c = e != null && Ye.hasRGBAOffsets(e);
            this.startQuadBatch(a.parent, b, c, f, k, t).addQuad(a, this._helperMatrix, e);
          }
        },
        destroy: function () {
          ca.removeChild(this.flashSprite, this._scrollRect);
          if (g.renderBlit) {
            ca.removeChild(this._scrollRect, this._flashBitmap);
            this.screen = ca.destroy(this.screen);
            this._flashBitmap = this.buffer = null;
            this._fill = ca.dispose(this._fill);
          } else {
            ca.removeChild(this._scrollRect, this.canvas);
            if (this.canvas != null) {
              for (var a = 0, b = this.canvas.get_numChildren(); a < b;) {
                a++;
                this.canvas.removeChildAt(0);
              }
              this.canvas = null;
            }
            if (this._headOfDrawStack != null) {
              this.clearDrawStack();
            }
            this._helperPoint = this._helperMatrix = this._blitMatrix = null;
          }
          this._bounds = null;
          this.scroll = ca.put(this.scroll);
          this.targetOffset = ca.put(this.targetOffset);
          this.deadzone = ca.put(this.deadzone);
          this._fxShakeComplete = this._fxFadeComplete = this._fxFlashComplete = this._flashPoint = this._flashRect = this._scrollRect = this.flashSprite = this.target = null;
          Ca.prototype.destroy.call(this);
        },
        update: function (a) {
          if (this.target != null) {
            this.updateFollow();
          }
          this.updateScroll();
          this.updateFlash(a);
          this.updateFade(a);
          this.flashSprite.set_filters(this.filtersEnabled ? this.filters : null);
          this.updateFlashSpritePosition();
          this.updateShake(a);
        },
        updateScroll: function () {
          this.bindScrollPos(this.scroll);
        },
        bindScrollPos: function (a) {
          var b = this.minScrollX == null ? null : this.minScrollX - (this.zoom - 1) * this.width / (this.zoom * 2);
          var c = this.maxScrollX == null ? null : this.maxScrollX + (this.zoom - 1) * this.width / (this.zoom * 2);
          var d = this.minScrollY == null ? null : this.minScrollY - (this.zoom - 1) * this.height / (this.zoom * 2);
          var e = this.maxScrollY == null ? null : this.maxScrollY + (this.zoom - 1) * this.height / (this.zoom * 2);
          var f = a.x;
          c = c != null ? c - this.width : null;
          b = b != null && f < b ? b : f;
          a.set_x(c != null && b > c ? c : b);
          f = a.y;
          c = e != null ? e - this.height : null;
          b = d != null && f < d ? d : f;
          a.set_y(c != null && b > c ? c : b);
          return a;
        },
        updateFollow: function () {
          if (this.deadzone == null) {
            this.target.getMidpoint(this._point);
            var a = this._point;
            var b = this.targetOffset;
            var c = b.x;
            var d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(a.x + c);
            a.set_y(a.y + d);
            d = b;
            if (d._weak) {
              d.put();
            }
            a = this._scrollTarget;
            c = this._point.x - this.width * 0.5;
            d = this._point.y - this.height * 0.5;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(c);
            a.set_y(d);
          } else {
            a = this.target.x + this.targetOffset.x;
            c = this.target.y + this.targetOffset.y;
            if (this.style == wf.SCREEN_BY_SCREEN) {
              if (a >= this.scroll.x + (this.width - this.viewMarginX)) {
                this._scrollTarget.set_x(this._scrollTarget.x + (this.width - this.viewMarginX * 2));
              } else if (a + this.target.get_width() < this.scroll.x + this.viewMarginX) {
                this._scrollTarget.set_x(this._scrollTarget.x - (this.width - this.viewMarginX * 2));
              }
              if (c >= this.scroll.y + (this.height - this.viewMarginY)) {
                this._scrollTarget.set_y(this._scrollTarget.y + (this.height - this.viewMarginY * 2));
              } else if (c + this.target.get_height() < this.scroll.y + this.viewMarginY) {
                this._scrollTarget.set_y(this._scrollTarget.y - (this.height - this.viewMarginY * 2));
              }
              this.bindScrollPos(this._scrollTarget);
            } else {
              d = a - this.deadzone.x;
              if (this._scrollTarget.x > d) {
                this._scrollTarget.set_x(d);
              }
              d = a + this.target.get_width() - this.deadzone.x - this.deadzone.width;
              if (this._scrollTarget.x < d) {
                this._scrollTarget.set_x(d);
              }
              d = c - this.deadzone.y;
              if (this._scrollTarget.y > d) {
                this._scrollTarget.set_y(d);
              }
              d = c + this.target.get_height() - this.deadzone.y - this.deadzone.height;
              if (this._scrollTarget.y < d) {
                this._scrollTarget.set_y(d);
              }
            }
            if (this.target instanceof G) {
              if (this._lastTargetPosition == null) {
                c = this.target.x;
                d = this.target.y;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                a = c;
                if (d == null) {
                  d = 0;
                }
                if (a == null) {
                  a = 0;
                }
                b = da.pool.get().set(a, d);
                b._inPool = false;
                this._lastTargetPosition = b;
              }
              this._scrollTarget.set_x(this._scrollTarget.x + (this.target.x - this._lastTargetPosition.x) * this.followLead.x);
              this._scrollTarget.set_y(this._scrollTarget.y + (this.target.y - this._lastTargetPosition.y) * this.followLead.y);
              this._lastTargetPosition.set_x(this.target.x);
              this._lastTargetPosition.set_y(this.target.y);
            }
          }
          if (this.followLerp >= 60 / g.updateFramerate) {
            a = this.scroll;
            b = this._scrollTarget;
            c = b.x;
            d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(c);
            a.set_y(d);
            d = b;
            if (d._weak) {
              d.put();
            }
          } else {
            this.scroll.set_x(this.scroll.x + 60 / g.updateFramerate * this.followLerp * (this._scrollTarget.x - this.scroll.x));
            this.scroll.set_y(this.scroll.y + 60 / g.updateFramerate * this.followLerp * (this._scrollTarget.y - this.scroll.y));
          }
        },
        updateFlash: function (a) {
          if (this._fxFlashAlpha > 0) {
            this._fxFlashAlpha -= a / this._fxFlashDuration;
            if (this._fxFlashAlpha <= 0 && this._fxFlashComplete != null) {
              this._fxFlashComplete();
            }
          }
        },
        updateFade: function (a) {
          if (this._fxFadeDuration != 0) {
            if (this._fxFadeIn) {
              this._fxFadeAlpha -= a / this._fxFadeDuration;
              if (this._fxFadeAlpha <= 0) {
                this._fxFadeAlpha = 0;
                this.completeFade();
              }
            } else {
              this._fxFadeAlpha += a / this._fxFadeDuration;
              if (this._fxFadeAlpha >= 1) {
                this._fxFadeAlpha = 1;
                this.completeFade();
              }
            }
          }
        },
        completeFade: function () {
          this._fxFadeDuration = 0;
          if (this._fxFadeComplete != null) {
            this._fxFadeComplete();
          }
        },
        updateShake: function (a) {
          if (this._fxShakeDuration > 0) {
            this._fxShakeDuration -= a;
            if (this._fxShakeDuration <= 0) {
              if (this._fxShakeComplete != null) {
                this._fxShakeComplete();
              }
            } else {
              a = this.pixelPerfectShake == null ? this.pixelPerfectRender : this.pixelPerfectShake;
              var b = this._fxShakeAxes;
              if (b == 1 || b == 17) {
                b = g.random.float(-1, 1) * this._fxShakeIntensity * this.width;
                if (a) {
                  b = Math.round(b);
                }
                var c = this.flashSprite;
                c.set_x(c.get_x() + b * this.zoom * g.scaleMode.scale.x);
              }
              b = this._fxShakeAxes;
              if (b == 16 || b == 17) {
                b = g.random.float(-1, 1) * this._fxShakeIntensity * this.height;
                if (a) {
                  b = Math.round(b);
                }
                c = this.flashSprite;
                c.set_y(c.get_y() + b * this.zoom * g.scaleMode.scale.y);
              }
            }
          }
        },
        updateFlashSpritePosition: function () {
          if (this.flashSprite != null) {
            this.flashSprite.set_x(this.x * g.scaleMode.scale.x + this._flashOffset.x);
            this.flashSprite.set_y(this.y * g.scaleMode.scale.y + this._flashOffset.y);
          }
        },
        updateFlashOffset: function () {
          this._flashOffset.set_x(this.width * 0.5 * g.scaleMode.scale.x * this.initialZoom);
          this._flashOffset.set_y(this.height * 0.5 * g.scaleMode.scale.y * this.initialZoom);
        },
        updateScrollRect: function () {
          var a = this._scrollRect != null ? this._scrollRect.get_scrollRect() : null;
          if (a != null) {
            a.x = a.y = 0;
            a.width = this.width * this.initialZoom * g.scaleMode.scale.x;
            a.height = this.height * this.initialZoom * g.scaleMode.scale.y;
            this._scrollRect.set_scrollRect(a);
            this._scrollRect.set_x(a.width * -0.5);
            this._scrollRect.set_y(a.height * -0.5);
          }
        },
        updateInternalSpritePositions: function () {
          if (g.renderBlit) {
            if (this._flashBitmap != null) {
              this._flashBitmap.set_x(0);
              this._flashBitmap.set_y(0);
            }
          } else if (this.canvas != null) {
            this.canvas.set_x(this.width * -0.5 * (this.scaleX - this.initialZoom) * g.scaleMode.scale.x);
            this.canvas.set_y(this.height * -0.5 * (this.scaleY - this.initialZoom) * g.scaleMode.scale.y);
            this.canvas.set_scaleX(this.totalScaleX);
            this.canvas.set_scaleY(this.totalScaleY);
          }
        },
        follow: function (a, b, c) {
          if (b == null) {
            b = wf.LOCKON;
          }
          if (c == null) {
            c = 60 / g.updateFramerate;
          }
          this.style = b;
          this.target = a;
          this.set_followLerp(c);
          this._lastTargetPosition = ca.put(this._lastTargetPosition);
          this.deadzone = ca.put(this.deadzone);
          switch (b._hx_index) {
            case 0:
              c = b = 0;
              if (this.target != null) {
                b = this.target.get_width();
                c = this.target.get_height();
              }
              var d = (this.width - b) / 2;
              a = (this.height - c) / 2 - c * 0.25;
              var e = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ia._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 1:
              b = this.width / 8;
              c = this.height / 3;
              d = (this.width - b) / 2;
              a = (this.height - c) / 2 - c * 0.25;
              e = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ia._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 2:
              c = Math.max(this.width, this.height) / 4;
              d = (this.width - c) / 2;
              a = (this.height - c) / 2;
              e = b = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ia._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 3:
              c = Math.max(this.width, this.height) / 8;
              d = (this.width - c) / 2;
              a = (this.height - c) / 2;
              e = b = c;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ia._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 4:
              a = d = 0;
              b = this.width;
              e = this.height;
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c = Ia._pool.get();
              if (e == null) {
                e = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.x = d;
              c.y = a;
              c.width = b;
              c.height = e;
              a = c;
              a._inPool = false;
              this.deadzone = a;
              break;
            case 5:
              this.deadzone = null;
          }
        },
        snapToTarget: function () {
          this.updateFollow();
          var a = this.scroll;
          var b = this._scrollTarget;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        flash: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = -1;
          }
          if (!!d || !(this._fxFlashAlpha > 0)) {
            this._fxFlashColor = a;
            if (b <= 0) {
              b = 0.000001;
            }
            this._fxFlashDuration = b;
            this._fxFlashComplete = c;
            this._fxFlashAlpha = 1;
          }
        },
        fade: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = -16777216;
          }
          if (!(this._fxFadeDuration > 0) || !!e) {
            this._fxFadeColor = a;
            if (b <= 0) {
              b = 0.000001;
            }
            this._fxFadeIn = c;
            this._fxFadeDuration = b;
            this._fxFadeComplete = d;
            this._fxFadeAlpha = this._fxFadeIn ? 0.999999 : 0.000001;
          }
        },
        shake: function (a, b, c, d, e) {
          if (d == null) {
            d = true;
          }
          if (b == null) {
            b = 0.5;
          }
          if (a == null) {
            a = 0.05;
          }
          if (e == null) {
            e = 17;
          }
          if (!!d || !(this._fxShakeDuration > 0)) {
            this._fxShakeIntensity = a;
            this._fxShakeDuration = b;
            this._fxShakeComplete = c;
            this._fxShakeAxes = e;
          }
        },
        stopFade: function () {
          this._fxFadeDuration = this._fxFadeAlpha = 0;
        },
        fill: function (a, b, c, d) {
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = true;
          }
          if (g.renderBlit) {
            if (b) {
              this._fill.fillRect(this._flashRect, a);
              this.buffer.copyPixels(this._fill, this._flashRect, this._flashPoint, null, null, b);
            } else {
              this.buffer.fillRect(this._flashRect, a);
            }
          } else if (c != 0) {
            b = d == null ? this.canvas.get_graphics() : d;
            b.beginFill(a, c);
            b.drawRect(this.viewMarginX - 1, this.viewMarginY - 1, this.width - this.viewMarginX * 2 + 2, this.height - this.viewMarginY * 2 + 2);
            b.endFill();
          }
        },
        drawFX: function () {
          if (this._fxFlashAlpha > 0) {
            var a = this._fxFlashColor >> 24 & 255;
            if (g.renderBlit) {
              this.fill((((a <= 0 ? 255 : a) * this._fxFlashAlpha | 0) << 24) + (this._fxFlashColor & 16777215));
            } else {
              this.fill(this._fxFlashColor & 16777215, true, (a <= 0 ? 255 : a) * this._fxFlashAlpha / 255, this.canvas.get_graphics());
            }
          }
          if (this._fxFadeAlpha > 0) {
            a = this._fxFadeColor >> 24 & 255;
            if (g.renderBlit) {
              this.fill((((a <= 0 ? 255 : a) * this._fxFadeAlpha | 0) << 24) + (this._fxFadeColor & 16777215));
            } else {
              this.fill(this._fxFadeColor & 16777215, true, (a <= 0 ? 255 : a) * this._fxFadeAlpha / 255, this.canvas.get_graphics());
            }
          }
        },
        checkResize: function () {
          if (g.renderBlit) {
            if (this.width != this.buffer.width || this.height != this.buffer.height) {
              var a = this.screen.graphic;
              this.buffer = new N(this.width, this.height, true, 0);
              this.screen.set_pixels(this.buffer);
              var b = this.screen.origin;
              b.set_x(0);
              b.set_y(0);
              this._flashBitmap.set_bitmapData(this.buffer);
              this._flashRect.width = this.width;
              this._flashRect.height = this.height;
              this._fill = ca.dispose(this._fill);
              this._fill = new N(this.width, this.height, true, 0);
              g.bitmap.removeIfNoUse(a);
            }
            this._blitMatrix.identity();
            this._blitMatrix.translate(-this.viewMarginX, -this.viewMarginY);
            this._blitMatrix.scale(this.scaleX, this.scaleY);
            this._useBlitMatrix = this.scaleX < this.initialZoom || this.scaleY < this.initialZoom;
          }
        },
        setScale: function (a, b) {
          this.scaleX = a;
          this.scaleY = b;
          this.totalScaleX = this.scaleX * g.scaleMode.scale.x;
          this.totalScaleY = this.scaleY * g.scaleMode.scale.y;
          if (g.renderBlit) {
            this._blitMatrix.identity();
            this._blitMatrix.translate(-this.viewMarginX, -this.viewMarginY);
            this._blitMatrix.scale(this.scaleX, this.scaleY);
            if (this._useBlitMatrix = this.scaleX < this.initialZoom || this.scaleY < this.initialZoom) {
              this._flashBitmap.set_scaleX(this.initialZoom * g.scaleMode.scale.x);
              this._flashBitmap.set_scaleY(this.initialZoom * g.scaleMode.scale.y);
            } else {
              this._flashBitmap.set_scaleX(this.totalScaleX);
              this._flashBitmap.set_scaleY(this.totalScaleY);
            }
          }
          this.viewMarginX = this.width * 0.5 * (this.scaleX - this.initialZoom) / this.scaleX;
          this.viewMarginY = this.height * 0.5 * (this.scaleY - this.initialZoom) / this.scaleY;
          this.updateScrollRect();
          this.updateInternalSpritePositions();
          g.cameras.cameraResized.dispatch(this);
        },
        onResize: function () {
          this.updateFlashOffset();
          this.setScale(this.scaleX, this.scaleY);
        },
        getViewMarginRect: function (a) {
          if (a == null) {
            a = Ia._pool.get();
            var b = 0;
            var c = 0;
            var d = 0;
            var e = 0;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.x = b;
            a.y = c;
            a.width = d;
            a.height = e;
            a._inPool = false;
          }
          b = this.viewMarginX;
          c = this.viewMarginY;
          d = this.width - this.viewMarginX * 2;
          e = this.height - this.viewMarginY * 2;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.x = b;
          a.y = c;
          a.width = d;
          a.height = e;
          return a;
        },
        set_followLerp: function (a) {
          var b = 60 / g.updateFramerate;
          a = a < 0 ? 0 : a;
          return this.followLerp = b != null && a > b ? b : a;
        },
        set_width: function (a) {
          if (this.width != a && a > 0) {
            this.width = a;
            this.viewMarginX = this.width * 0.5 * (this.scaleX - this.initialZoom) / this.scaleX;
            this.updateFlashOffset();
            this.updateScrollRect();
            this.updateInternalSpritePositions();
            g.cameras.cameraResized.dispatch(this);
          }
          return a;
        },
        set_height: function (a) {
          if (this.height != a && a > 0) {
            this.height = a;
            this.viewMarginY = this.height * 0.5 * (this.scaleY - this.initialZoom) / this.scaleY;
            this.updateFlashOffset();
            this.updateScrollRect();
            this.updateInternalSpritePositions();
            g.cameras.cameraResized.dispatch(this);
          }
          return a;
        },
        set_zoom: function (a) {
          this.zoom = a == 0 ? Pb.defaultZoom : a;
          this.setScale(this.zoom, this.zoom);
          return this.zoom;
        },
        set_alpha: function (a) {
          var b = a < 0 ? 0 : a;
          this.alpha = b > 1 ? 1 : b;
          if (g.renderBlit) {
            this._flashBitmap.set_alpha(a);
          } else {
            this.canvas.set_alpha(a);
          }
          return a;
        },
        set_color: function (a) {
          this.color = a;
          if (g.renderBlit) {
            if (this._flashBitmap == null) {
              return a;
            }
            var b = this._flashBitmap.get_transform().get_colorTransform();
          } else {
            b = this.canvas.get_transform().get_colorTransform();
          }
          b.redMultiplier = (this.color >> 16 & 255) / 255;
          b.greenMultiplier = (this.color >> 8 & 255) / 255;
          b.blueMultiplier = (this.color & 255) / 255;
          if (g.renderBlit) {
            this._flashBitmap.get_transform().set_colorTransform(b);
          } else {
            this.canvas.get_transform().set_colorTransform(b);
          }
          return a;
        },
        set_x: function (a) {
          this.x = a;
          this.updateFlashSpritePosition();
          return a;
        },
        set_y: function (a) {
          this.y = a;
          this.updateFlashSpritePosition();
          return a;
        },
        set_visible: function (a) {
          if (this.flashSprite != null) {
            this.flashSprite.set_visible(a);
          }
          return this.visible = a;
        },
        get_camera: function () {
          throw I.thrown("don't reference camera.camera");
        },
        set_camera: function (a) {
          throw I.thrown("don't reference camera.camera");
        },
        get_cameras: function () {
          throw I.thrown("don't reference camera.cameras");
        },
        set_cameras: function (a) {
          throw I.thrown("don't reference camera.cameras");
        },
        __class__: Pb,
        __properties__: q(Ca.prototype.__properties__, {
          set_color: "set_color",
          set_alpha: "set_alpha",
          set_zoom: "set_zoom",
          set_height: "set_height",
          set_width: "set_width",
          set_followLerp: "set_followLerp",
          set_y: "set_y",
          set_x: "set_x"
        })
      });
      function vk(a, b, c, d, e) {
        Pb.call(this, a, b, c, d, e);
      }
      h["backend.PsychCamera"] = vk;
      vk.__name__ = "backend.PsychCamera";
      vk.__super__ = Pb;
      vk.prototype = q(Pb.prototype, {
        update: function (a) {
          if (this.target != null) {
            this.updateFollowDelta(a);
          }
          this.updateScroll();
          this.updateFlash(a);
          this.updateFade(a);
          this.flashSprite.set_filters(this.filtersEnabled ? this.filters : null);
          this.updateFlashSpritePosition();
          this.updateShake(a);
        },
        updateFollowDelta: function (a) {
          if (a == null) {
            a = 0;
          }
          if (this.deadzone == null) {
            this.target.getMidpoint(this._point);
            var b = this._point;
            var c = this.targetOffset;
            var d = c.x;
            var e = c.y;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(b.x + d);
            b.set_y(b.y + e);
            e = c;
            if (e._weak) {
              e.put();
            }
            b = this._scrollTarget;
            d = this._point.x - this.width * 0.5;
            e = this._point.y - this.height * 0.5;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            b.set_x(d);
            b.set_y(e);
          } else {
            b = this.target.x + this.targetOffset.x;
            c = this.target.y + this.targetOffset.y;
            if (this.style == wf.SCREEN_BY_SCREEN) {
              if (b >= this.scroll.x + (this.width - this.viewMarginX)) {
                this._scrollTarget.set_x(this._scrollTarget.x + (this.width - this.viewMarginX * 2));
              } else if (b + this.target.get_width() < this.scroll.x + this.viewMarginX) {
                this._scrollTarget.set_x(this._scrollTarget.x - (this.width - this.viewMarginX * 2));
              }
              if (c >= this.scroll.y + (this.height - this.viewMarginY)) {
                this._scrollTarget.set_y(this._scrollTarget.y + (this.height - this.viewMarginY * 2));
              } else if (c + this.target.get_height() < this.scroll.y + this.viewMarginY) {
                this._scrollTarget.set_y(this._scrollTarget.y - (this.height - this.viewMarginY * 2));
              }
              this.bindScrollPos(this._scrollTarget);
            } else {
              e = b - this.deadzone.x;
              if (this._scrollTarget.x > e) {
                this._scrollTarget.set_x(e);
              }
              e = b + this.target.get_width() - this.deadzone.x - this.deadzone.width;
              if (this._scrollTarget.x < e) {
                this._scrollTarget.set_x(e);
              }
              e = c - this.deadzone.y;
              if (this._scrollTarget.y > e) {
                this._scrollTarget.set_y(e);
              }
              e = c + this.target.get_height() - this.deadzone.y - this.deadzone.height;
              if (this._scrollTarget.y < e) {
                this._scrollTarget.set_y(e);
              }
            }
            if (this.target instanceof G) {
              if (this._lastTargetPosition == null) {
                d = this.target.x;
                e = this.target.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                b = d;
                if (e == null) {
                  e = 0;
                }
                if (b == null) {
                  b = 0;
                }
                c = da.pool.get().set(b, e);
                c._inPool = false;
                this._lastTargetPosition = c;
              }
              this._scrollTarget.set_x(this._scrollTarget.x + (this.target.x - this._lastTargetPosition.x) * this.followLead.x);
              this._scrollTarget.set_y(this._scrollTarget.y + (this.target.y - this._lastTargetPosition.y) * this.followLead.y);
              this._lastTargetPosition.set_x(this.target.x);
              this._lastTargetPosition.set_y(this.target.y);
            }
          }
          a = 1 - Math.exp(-a * this.followLerp);
          this.scroll.set_x(this.scroll.x + (this._scrollTarget.x - this.scroll.x) * a);
          this.scroll.set_y(this.scroll.y + (this._scrollTarget.y - this.scroll.y) * a);
        },
        set_followLerp: function (a) {
          return this.followLerp = a;
        },
        __class__: vk
      });
      function ig(a) {
        this.hits = 0;
        this.noteSplash = true;
        this.score = 350;
        this.ratingMod = 1;
        this.hitWindow = 0;
        this.name = this.image = "";
        this.image = this.name = a;
        this.hitWindow = 0;
        try {
          this.hitWindow = ha.field(C.data, a + "Window");
        } catch (b) {
          a = I.caught(b);
          g.log.advanced(a, Aa.ERROR, true);
        }
      }
      h["backend.Rating"] = ig;
      ig.__name__ = "backend.Rating";
      ig.loadDefault = function () {
        var a = [new ig("sick")];
        var b = new ig("good");
        b.ratingMod = 0.67;
        b.score = 200;
        b.noteSplash = false;
        a.push(b);
        b = new ig("bad");
        b.ratingMod = 0.34;
        b.score = 100;
        b.noteSplash = false;
        a.push(b);
        b = new ig("shit");
        b.ratingMod = 0;
        b.score = 50;
        b.noteSplash = false;
        a.push(b);
        return a;
      };
      ig.prototype = {
        __class__: ig
      };
      function Ld() {}
      h["backend.Song"] = Ld;
      Ld.__name__ = "backend.Song";
      Ld.onLoadJson = function (a) {
        if (a.gfVersion == null) {
          a.gfVersion = a.player3;
          a.player3 = null;
        }
        if (a.events == null) {
          a.events = [];
          for (var b = 0, c = a.notes.length; b < c;) {
            var d = b++;
            var e = 0;
            d = a.notes[d].sectionNotes;
            for (var f = d.length; e < f;) {
              var k = d[e];
              if (k[1] < 0) {
                a.events.push([k[0], [[k[2], k[3], k[4]]]]);
                L.remove(d, k);
                f = d.length;
              } else {
                ++e;
              }
            }
          }
        }
      };
      Ld.loadFromJson = function (a, b) {
        var c = null;
        var d = new na("[~&\\\\;:<>#]", "");
        var e = new na("[.,'\"%?!]", "");
        d = d.split(v.replace(b, " ", "-")).join("-");
        b = e.split(d).join("").toLowerCase();
        d = new na("[~&\\\\;:<>#]", "");
        e = new na("[.,'\"%?!]", "");
        d = d.split(v.replace(a, " ", "-")).join("-");
        e = e.split(d).join("").toLowerCase();
        if (c == null) {
          E.getPath("data/" + (b + "/" + e) + ".json", "TEXT", null);
          c = v.trim(oa.getText(E.getPath("data/" + (b + "/" + e) + ".json", "TEXT", null)));
        }
        while (!v.endsWith(c, "}")) {
          c = L.substr(c, 0, c.length - 1);
        }
        c = Ld.parseJSONshit(c);
        if (a != "events") {
          we.loadDirectory(c);
        }
        Ld.onLoadJson(c);
        return c;
      };
      Ld.parseJSONshit = function (a) {
        return JSON.parse(a).song;
      };
      function we() {}
      h["backend.StageData"] = we;
      we.__name__ = "backend.StageData";
      we.dummy = function () {
        return {
          directory: "",
          defaultZoom: 0.9,
          isPixelStage: false,
          stageUI: "normal",
          boyfriend: [770, 100],
          girlfriend: [400, 130],
          opponent: [100, 100],
          hide_girlfriend: false,
          camera_boyfriend: [0, 0],
          camera_opponent: [0, 0],
          camera_girlfriend: [0, 0],
          camera_speed: 1
        };
      };
      we.loadDirectory = function (a) {
        if (a.stage != null) {
          a = a.stage;
        } else if (a.song != null) {
          switch (v.replace(a.song.toLowerCase(), " ", "-")) {
            case "cocoa":
            case "eggnog":
              a = "mall";
              break;
            case "high":
            case "milf":
            case "satin-panties":
              a = "limo";
              break;
            case "monster":
            case "south":
            case "spookeez":
              a = "spooky";
              break;
            case "blammed":
            case "philly":
            case "philly-nice":
            case "pico":
              a = "philly";
              break;
            case "roses":
            case "senpai":
              a = "school";
              break;
            case "guns":
            case "stress":
            case "ugh":
              a = "tank";
              break;
            case "thorns":
              a = "schoolEvil";
              break;
            case "winter-horrorland":
              a = "mallEvil";
              break;
            default:
              a = "stage";
          }
        } else {
          a = "stage";
        }
        a = we.getStageFile(a);
        we.forceNextDirectory = a == null ? "" : a.directory;
      };
      we.getStageFile = function (a) {
        a = "stages/" + a + ".json";
        if (a == null) {
          a = "";
        }
        a = "assets/shared/" + a;
        if (U.exists(a)) {
          a = U.getText(a);
        } else {
          return null;
        }
        return Uh.parse(a);
      };
      we.vanillaSongStage = function (a) {
        switch (a) {
          case "cocoa":
          case "eggnog":
            return "mall";
          case "high":
          case "milf":
          case "satin-panties":
            return "limo";
          case "monster":
          case "south":
          case "spookeez":
            return "spooky";
          case "blammed":
          case "philly":
          case "philly-nice":
          case "pico":
            return "philly";
          case "roses":
          case "senpai":
            return "school";
          case "guns":
          case "stress":
          case "ugh":
            return "tank";
          case "thorns":
            return "schoolEvil";
          case "winter-horrorland":
            return "mallEvil";
        }
        return "stage";
      };
      function jb(a, b) {
        this.folder = "";
        this.songs = a.songs;
        this.weekCharacters = a.weekCharacters;
        this.weekBackground = a.weekBackground;
        this.weekBefore = a.weekBefore;
        this.storyName = a.storyName;
        this.weekName = a.weekName;
        this.freeplayColor = a.freeplayColor;
        this.startUnlocked = a.startUnlocked;
        this.hiddenUntilUnlocked = a.hiddenUntilUnlocked;
        this.hideStoryMode = a.hideStoryMode;
        this.hideFreeplay = a.hideFreeplay;
        this.difficulties = a.difficulties;
        this.fileName = b;
      }
      h["backend.WeekData"] = jb;
      jb.__name__ = "backend.WeekData";
      jb.createWeekFile = function () {
        return {
          songs: [["Bopeebo", "dad", [146, 113, 253]], ["Fresh", "dad", [146, 113, 253]], ["Dad Battle", "dad", [146, 113, 253]]],
          weekCharacters: ["dad", "bf", "gf"],
          weekBackground: "stage",
          weekBefore: "tutorial",
          storyName: "Your New Week",
          weekName: "Custom Week",
          freeplayColor: [146, 113, 253],
          startUnlocked: true,
          hiddenUntilUnlocked: false,
          hideStoryMode: false,
          hideFreeplay: false,
          difficulties: ""
        };
      };
      jb.reloadWeekFiles = function (a) {
        if (a == null) {
          a = false;
        }
        jb.weeksList = [];
        jb.weeksLoaded.h = Object.create(null);
        var b = ["assets/shared/"];
        var c = "weeks/weekList.txt";
        if (c == null) {
          c = "";
        }
        c = "assets/shared/" + c;
        var d = null;
        if (U.exists(c)) {
          d = U.getText(c);
        }
        if (d != null) {
          var e = v.trim(d).split("\n");
          c = 0;
          for (d = e.length; c < d;) {
            var f = c++;
            e[f] = v.trim(e[f]);
          }
        } else {
          e = [];
        }
        c = 0;
        for (d = e.length; c < d;) {
          f = c++;
          for (var k = 0, t = b.length; k < t;) {
            var l = k++;
            l = b[l] + "weeks/" + e[f] + ".json";
            if (!Object.prototype.hasOwnProperty.call(jb.weeksLoaded.h, e[f])) {
              l = jb.getWeekFile(l);
              if (l != null) {
                l = new jb(l, e[f]);
                if (l != null && (a == null || a && !l.hideStoryMode || !a && !l.hideFreeplay)) {
                  jb.weeksLoaded.h[e[f]] = l;
                  jb.weeksList.push(e[f]);
                }
              }
            }
          }
        }
      };
      jb.getWeekFile = function (a) {
        var b = null;
        if (U.exists(a)) {
          b = oa.getText(a);
        }
        if (b != null && b.length > 0) {
          return JSON.parse(b);
        } else {
          return null;
        }
      };
      jb.getWeekFileName = function () {
        return jb.weeksList[z.storyWeek];
      };
      jb.getCurrentWeek = function () {
        return jb.weeksLoaded.h[jb.weeksList[z.storyWeek]];
      };
      jb.setDirectoryFromWeek = function (a) {
        ve.currentModDirectory = "";
        if (a != null && a.folder != null && a.folder.length > 0) {
          ve.currentModDirectory = a.folder;
        }
      };
      jb.prototype = {
        __class__: jb
      };
      function oh(a) {
        this._animations = new xa();
        this.timeScale = 1;
        this.frameIndex = -1;
        this._sprite = a;
      }
      h["flixel.animation.FlxAnimationController"] = oh;
      oh.__name__ = "flixel.animation.FlxAnimationController";
      oh.__interfaces__ = [ub];
      oh.prototype = {
        update: function (a) {
          if (this._curAnim != null) {
            this._curAnim.update(a * this.timeScale * g.animationTimeScale);
          } else if (this._prerotated != null) {
            this._prerotated.set_angle(this._sprite.angle);
          }
        },
        copyFrom: function (a) {
          this.destroyAnimations();
          var b = a._animations.h;
          var c = Object.keys(b);
          for (var d = c.length, e = 0; e < d;) {
            var f = b[c[e++]];
            this.add(f.name, f.frames, f.frameRate, f.looped, f.flipX, f.flipY);
          }
          if (a._prerotated != null) {
            this.createPrerotated();
          }
          if (a.get_name() != null) {
            this.set_name(a.get_name());
          }
          this.set_frameIndex(a.frameIndex);
          return this;
        },
        createPrerotated: function (a) {
          this.destroyAnimations();
          if (a == null) {
            a = this;
          }
          this._prerotated = new yk(a, a._sprite.bakedRotationAngle);
          this._prerotated.set_angle(this._sprite.angle);
        },
        destroyAnimations: function () {
          this.clearAnimations();
          this.clearPrerotated();
        },
        destroy: function () {
          this.destroyAnimations();
          this._sprite = this.callback = this._animations = null;
        },
        getFrameDuration: function (a) {
          return this._sprite.frames.frames[a].duration;
        },
        clearPrerotated: function () {
          if (this._prerotated != null) {
            this._prerotated.destroy();
          }
          this._prerotated = null;
        },
        clearAnimations: function () {
          if (this._animations != null) {
            var a;
            var b = Object.keys(this._animations.h);
            for (var c = b.length, d = 0; d < c;) {
              a = b[d++];
              a = this._animations.h[a];
              if (a != null) {
                a.destroy();
              }
            }
          }
          this._animations = new xa();
          this._curAnim = null;
        },
        add: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 30;
          }
          if (this._sprite.get_numFrames() == 0) {
            g.log.advanced("Could not create animation: \"" + a + "\", this sprite has no frames", Aa.WARNING, true);
          } else {
            var k = b;
            var t = false;
            for (var l = k.length; l-- >= 0;) {
              if (k[l] >= this._sprite.get_numFrames()) {
                t = true;
                if (k == b) {
                  k = b.slice();
                }
                k.splice(l, 1);
              }
            }
            if (k.length > 0) {
              b = new Vh(this, a, k, c, d, e, f);
              this._animations.h[a] = b;
              if (t) {
                g.log.advanced("Could not add frames above " + (this._sprite.get_numFrames() - 1) + " to animation: \"" + a + "\"", Aa.WARNING, true);
              }
            } else {
              g.log.advanced("Could not create animation: \"" + a + "\", no valid frames were given", Aa.WARNING, true);
            }
          }
        },
        remove: function (a) {
          var b = this._animations.h[a];
          if (b != null) {
            var c = this._animations;
            if (Object.prototype.hasOwnProperty.call(c.h, a)) {
              delete c.h[a];
            }
            b.destroy();
          }
        },
        addByIndices: function (a, b, c, d, e, f, k, t) {
          if (t == null) {
            t = false;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = true;
          }
          if (e == null) {
            e = 30;
          }
          if (this._sprite.frames != null) {
            var l = [];
            this.byIndicesHelper(l, b, c, d);
            if (l.length > 0) {
              b = new Vh(this, a, l, e, f, k, t);
              this._animations.h[a] = b;
            }
          }
        },
        findSpriteFrame: function (a, b, c) {
          var d = this._sprite.frames.frames;
          for (var e = 0, f = d.length; e < f;) {
            var k = e++;
            var t = d[k].name;
            if (v.startsWith(t, a) && v.endsWith(t, c) && y.parseInt(t.substring(a.length, t.length - c.length)) == b) {
              return k;
            }
          }
          return -1;
        },
        addByPrefix: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 30;
          }
          if (this._sprite.frames != null) {
            var k = [];
            this.findByPrefix(k, b);
            if (k.length > 0) {
              var t = [];
              this.byPrefixHelper(t, k, b);
              b = new Vh(this, a, t, c, d, e, f);
              this._animations.h[a] = b;
            } else {
              g.log.advanced("Could not create animation: \"" + a + "\", no frames were found with the prefix \"" + b + "\" ", Aa.WARNING, true);
            }
          }
        },
        play: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            if (this._curAnim != null) {
              this._curAnim.stop();
            }
            this._curAnim = null;
          }
          if (a == null || this._animations.h[a] == null) {
            g.log.advanced("No animation called \"" + a + "\"", Aa.WARNING, true);
          } else {
            var e = false;
            var f = false;
            if (this._curAnim != null && a != this._curAnim.name) {
              e = this._curAnim.flipX;
              f = this._curAnim.flipY;
              this._curAnim.stop();
            }
            this._curAnim = this._animations.h[a];
            this._curAnim.play(b, c, d);
            if (e != this._curAnim.flipX || f != this._curAnim.flipY) {
              this._sprite.dirty = true;
            }
          }
        },
        byIndicesHelper: function (a, b, c, d) {
          for (var e = 0; e < c.length;) {
            var f = c[e];
            ++e;
            f = this.findSpriteFrame(b, f, d);
            if (f != -1) {
              a.push(f);
            }
          }
        },
        byPrefixHelper: function (a, b, c) {
          var d = b[0].name;
          var e = d.indexOf(".", c.length);
          d = d.substring(e == -1 ? d.length : e, d.length);
          sb.sortHelper(b, c.length, d == null ? 0 : d.length, true);
          for (c = 0; c < b.length;) {
            d = b[c];
            ++c;
            a.push(this._sprite.frames.frames.indexOf(d));
          }
        },
        findByPrefix: function (a, b, c) {
          c = 0;
          for (var d = this._sprite.frames.frames; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.name != null && v.startsWith(e.name, b)) {
              a.push(e);
            }
          }
          this.removeInvalidFrames(a);
        },
        removeInvalidFrames: function (a) {
          var b = [];
          for (var c = a.length; c-- > 0;) {
            if (a[c].parent.shader == null) {
              b.unshift(a.splice(c, 1)[0]);
            }
          }
          return b;
        },
        set_frameIndex: function (a) {
          if (this._sprite.frames != null && this._sprite.get_numFrames() > 0) {
            a %= this._sprite.get_numFrames();
            this._sprite.set_frame(this._sprite.frames.frames[a]);
            this.frameIndex = a;
            if (this.callback != null) {
              this.callback(this._curAnim != null ? this._curAnim.name : null, this._curAnim != null ? this._curAnim.curFrame : this.frameIndex, this.frameIndex);
            }
          }
          return this.frameIndex;
        },
        get_name: function () {
          var a = null;
          if (this._curAnim != null) {
            a = this._curAnim.name;
          }
          return a;
        },
        set_name: function (a) {
          this.play(a);
          return a;
        },
        get_finished: function () {
          var a = true;
          if (this._curAnim != null) {
            a = this._curAnim.finished;
          }
          return a;
        },
        __class__: oh,
        __properties__: {
          get_finished: "get_finished",
          set_name: "set_name",
          get_name: "get_name",
          set_frameIndex: "set_frameIndex"
        }
      };
      function ph(a) {
        this.followGlobalSpeed = true;
        oh.call(this, a);
      }
      h["backend.animation.PsychAnimationController"] = ph;
      ph.__name__ = "backend.animation.PsychAnimationController";
      ph.__super__ = oh;
      ph.prototype = q(oh.prototype, {
        update: function (a) {
          if (this._curAnim != null) {
            var b = this.timeScale;
            if (this.followGlobalSpeed) {
              b *= g.animationTimeScale;
            }
            this._curAnim.update(a * b);
          } else if (this._prerotated != null) {
            this._prerotated.set_angle(this._sprite.angle);
          }
        },
        __class__: ph
      });
      function nn() {
        this.firstFrame = false;
        this.cutsceneTime = 0;
        this.music = null;
        this.objects = [];
        this.endTime = 0;
        this.finishCallback = this.finishCallback2 = this.onStart = null;
        this.timedEvents = [];
        var a = this;
        Ca.call(this);
        this.timer(0, function () {
          if (a.music != null) {
            var b = g.sound;
            var c = E.returnSound("music", a.music, null);
            b.playMusic(c, 0, false);
            b = g.sound.music;
            if (b._channel == null) {
              b.play();
            }
            if (b.fadeTween != null) {
              b.fadeTween.cancel();
            }
            b.fadeTween = Ha.num(0, 1, 1, {
              onComplete: null
            }, n(b, b.volumeTween));
          }
          if (a.onStart != null) {
            a.onStart();
          }
        });
        z.instance.add(this);
      }
      h["cutscenes.CutsceneHandler"] = nn;
      nn.__name__ = "cutscenes.CutsceneHandler";
      nn.__super__ = Ca;
      nn.prototype = q(Ca.prototype, {
        update: function (a) {
          Ca.prototype.update.call(this, a);
          if (g.game._state == z.instance && this.firstFrame) {
            this.cutsceneTime += a;
            if (this.endTime <= this.cutsceneTime) {
              this.finishCallback();
              if (this.finishCallback2 != null) {
                this.finishCallback2();
              }
              a = 0;
              for (var b = this.objects; a < b.length;) {
                var c = b[a];
                ++a;
                c.kill();
                z.instance.remove(c);
                c.destroy();
              }
              this.kill();
              this.destroy();
              z.instance.remove(this);
            }
            while (this.timedEvents.length > 0 && this.timedEvents[0][0] <= this.cutsceneTime) {
              this.timedEvents[0][1]();
              this.timedEvents.splice(0, 1);
            }
          } else {
            this.firstFrame = true;
          }
        },
        timer: function (a, b) {
          this.timedEvents.push([a, b]);
          this.timedEvents.sort(n(this, this.sortByTime));
        },
        sortByTime: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        __class__: nn
      });
      function hc(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        var e = Ia._pool.get();
        var f = 0;
        var k = 0;
        var t = 0;
        var l = 0;
        if (l == null) {
          l = 0;
        }
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        e.x = f;
        e.y = k;
        e.width = t;
        e.height = l;
        e._inPool = false;
        this._rect = e;
        f = e = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = da.pool.get().set(e, f);
        e._inPool = false;
        this._point = e;
        this.path = null;
        this.allowCollisions = 4369;
        this.touching = this.wasTouching = 0;
        this.maxAngular = 10000;
        this.angularVelocity = this.angularAcceleration = this.angularDrag = 0;
        this.immovable = false;
        this.moves = hc.defaultMoves;
        this.angle = 0;
        this.pixelPerfectPosition = true;
        this.x = this.y = 0;
        Ca.call(this);
        this.set_x(a);
        this.set_y(b);
        this.set_width(c);
        this.set_height(d);
        this.initVars();
      }
      h["flixel.FlxObject"] = hc;
      hc.__name__ = "flixel.FlxObject";
      hc.__super__ = Ca;
      hc.prototype = q(Ca.prototype, {
        initVars: function () {
          this.flixelType = 1;
          var a = this.x;
          var b = this.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.last = b;
          b = a = 1;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.scrollFactor = b;
          this.pixelPerfectPosition = hc.defaultPixelPerfectPosition;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.velocity = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.acceleration = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.drag = b;
          b = a = 10000;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.maxVelocity = b;
        },
        destroy: function () {
          Ca.prototype.destroy.call(this);
          this.velocity = ca.put(this.velocity);
          this.acceleration = ca.put(this.acceleration);
          this.drag = ca.put(this.drag);
          this.maxVelocity = ca.put(this.maxVelocity);
          this.scrollFactor = ca.put(this.scrollFactor);
          this.last = ca.put(this.last);
          this._point = ca.put(this._point);
          this._rect = ca.put(this._rect);
        },
        update: function (a) {
          var b = this.last;
          var c = this.x;
          var d = this.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          if (this.path != null && this.path.active) {
            this.path.update(a);
          }
          if (this.moves) {
            this.updateMotion(a);
          }
          this.wasTouching = this.touching;
          this.touching = 0;
        },
        updateMotion: function (a) {
          var b = (zk.computeVelocity(this.angularVelocity, this.angularAcceleration, this.angularDrag, this.maxAngular, a) - this.angularVelocity) * 0.5;
          this.angularVelocity += b;
          this.set_angle(this.angle + this.angularVelocity * a);
          this.angularVelocity += b;
          b = (zk.computeVelocity(this.velocity.x, this.acceleration.x, this.drag.x, this.maxVelocity.x, a) - this.velocity.x) * 0.5;
          this.velocity.set_x(this.velocity.x + b);
          var c = this.velocity.x * a;
          this.velocity.set_x(this.velocity.x + b);
          this.set_x(this.x + c);
          b = (zk.computeVelocity(this.velocity.y, this.acceleration.y, this.drag.y, this.maxVelocity.y, a) - this.velocity.y) * 0.5;
          this.velocity.set_y(this.velocity.y + b);
          c = this.velocity.y * a;
          this.velocity.set_y(this.velocity.y + b);
          this.set_y(this.y + c);
        },
        draw: function () {},
        overlaps: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = ab.resolveGroup(a);
          if (d != null) {
            var e = this;
            var f = b;
            var k = c;
            return d.any(function (a) {
              return e.overlaps(a, f, k);
            });
          }
          if (a.flixelType == 3) {
            return a.overlaps(this, b, c);
          }
          if (!b) {
            if (a.x + a.get_width() > this.x && a.x < this.x + this.get_width() && a.y + a.get_height() > this.y) {
              return a.y < this.y + this.get_height();
            } else {
              return false;
            }
          }
          if (c == null) {
            c = g.camera;
          }
          b = a.getScreenPosition(null, c);
          this.getScreenPosition(this._point, c);
          if (b.x + a.get_width() > this._point.x && b.x < this._point.x + this.get_width() && b.y + a.get_height() > this._point.y) {
            return b.y < this._point.y + this.get_height();
          } else {
            return false;
          }
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (!b) {
            if (a.x >= this.x && a.x < this.x + this.get_width() && a.y >= this.y) {
              return a.y < this.y + this.get_height();
            } else {
              return false;
            }
          }
          if (c == null) {
            c = g.camera;
          }
          b = a.x - c.scroll.x;
          var d = a.y - c.scroll.y;
          this.getScreenPosition(this._point, c);
          if (a._weak) {
            a.put();
          }
          if (b >= this._point.x && b < this._point.x + this.get_width() && d >= this._point.y) {
            return d < this._point.y + this.get_height();
          } else {
            return false;
          }
        },
        getScreenPosition: function (a, b) {
          if (a == null) {
            var c = 0;
            var d = 0;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a = da.pool.get().set(c, d);
            a._inPool = false;
          }
          if (b == null) {
            b = g.camera;
          }
          c = this.x;
          d = this.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (this.pixelPerfectPosition) {
            a.set_x(Math.floor(a.x));
            a.set_y(Math.floor(a.y));
          }
          c = b.scroll.x * this.scrollFactor.x;
          d = b.scroll.y * this.scrollFactor.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(a.x - c);
          a.set_y(a.y - d);
          return a;
        },
        getPosition: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = da.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x;
          c = this.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        getMidpoint: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = da.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x + this.get_width() * 0.5;
          c = this.y + this.get_height() * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        isOnScreen: function (a) {
          if (a == null) {
            a = g.camera;
          }
          this.getScreenPosition(this._point, a);
          var b = this._point;
          var c = this.get_width();
          var d = this.get_height();
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a = b.x + c > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + d > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak) {
            b.put();
          }
          return a;
        },
        isPixelPerfectRender: function (a) {
          if (a == null) {
            a = g.camera;
          }
          if (this.pixelPerfectRender == null) {
            return a.pixelPerfectRender;
          } else {
            return this.pixelPerfectRender;
          }
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
        },
        toString: function () {
          var a = this.x;
          var b = Xc._pool.get();
          b.label = "x";
          b.value = a;
          a = this.y;
          var c = Xc._pool.get();
          c.label = "y";
          c.value = a;
          a = this.get_width();
          var d = Xc._pool.get();
          d.label = "w";
          d.value = a;
          a = this.get_height();
          var e = Xc._pool.get();
          e.label = "h";
          e.value = a;
          a = this.visible;
          var f = Xc._pool.get();
          f.label = "visible";
          f.value = a;
          a = this.velocity;
          var k = Xc._pool.get();
          k.label = "velocity";
          k.value = a;
          return Xb.getDebugString([b, c, d, e, f, k]);
        },
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        set_width: function (a) {
          return this.width = a;
        },
        set_height: function (a) {
          return this.height = a;
        },
        get_width: function () {
          return this.width;
        },
        get_height: function () {
          return this.height;
        },
        set_angle: function (a) {
          return this.angle = a;
        },
        set_moves: function (a) {
          return this.moves = a;
        },
        set_immovable: function (a) {
          return this.immovable = a;
        },
        set_allowCollisions: function (a) {
          return this.allowCollisions = a;
        },
        __class__: hc,
        __properties__: q(Ca.prototype.__properties__, {
          set_allowCollisions: "set_allowCollisions",
          set_immovable: "set_immovable",
          set_moves: "set_moves",
          set_angle: "set_angle",
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width",
          set_y: "set_y",
          set_x: "set_x"
        })
      });
      function G(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._angleChanged = true;
        this._cosAngle = 1;
        this._sinAngle = 0;
        this._facingHorizontalMult = this._facingVerticalMult = 1;
        this.useColorTransform = false;
        this.color = 16777215;
        this.flipX = this.flipY = false;
        this.alpha = 1;
        this.frameWidth = this.frameHeight = this.bakedRotationAngle = 0;
        this.dirty = true;
        this.antialiasing = G.defaultAntialiasing;
        this.useFramePixels = true;
        hc.call(this, a, b);
        this.set_useFramePixels(g.renderBlit);
        if (c != null) {
          this.loadGraphic(c);
        }
      }
      h["flixel.FlxSprite"] = G;
      G.__name__ = "flixel.FlxSprite";
      G.__super__ = hc;
      G.prototype = q(hc.prototype, {
        initVars: function () {
          hc.prototype.initVars.call(this);
          this.animation = new oh(this);
          this._flashPoint = new ob();
          this._flashRect = new ba();
          this._flashRect2 = new ba();
          this._flashPointZero = new ob();
          var a = 0;
          var b = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.offset = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.origin = b;
          b = a = 1;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.scale = b;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this._halfSize = b;
          this._matrix = new Rc();
          this.colorTransform = new Ob();
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this._scaledOrigin = b;
        },
        destroy: function () {
          hc.prototype.destroy.call(this);
          this.animation = ca.destroy(this.animation);
          this.offset = ca.put(this.offset);
          this.origin = ca.put(this.origin);
          this.scale = ca.put(this.scale);
          this._halfSize = ca.put(this._halfSize);
          this._scaledOrigin = ca.put(this._scaledOrigin);
          this.framePixels = ca.dispose(this.framePixels);
          this.colorTransform = this._matrix = this._flashPointZero = this._flashRect2 = this._flashRect = this._flashPoint = null;
          this.set_blend(null);
          this.set_frames(null);
          this.set_graphic(null);
          this._frame = ca.destroy(this._frame);
          this._frameGraphic = ca.destroy(this._frameGraphic);
          this.shader = null;
        },
        loadGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          a = g.bitmap.add(a, e, f);
          if (a == null) {
            return this;
          }
          if (c == 0) {
            c = b ? a.height : a.width;
            if (c > a.width) {
              c = a.width;
            }
          } else if (c > a.width) {
            g.log.advanced("frameWidth:" + c + " is larger than the graphic's width:" + a.width, Aa.WARNING, true);
          }
          if (d == 0) {
            d = b ? c : a.height;
            if (d > a.height) {
              d = a.height;
            }
          } else if (d > a.height) {
            g.log.advanced("frameHeight:" + d + " is larger than the graphic's height:" + a.height, Aa.WARNING, true);
          }
          if (b) {
            b = c;
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (b == null) {
              b = 0;
            }
            d = da.pool.get().set(b, d);
            d._inPool = false;
            this.set_frames(Hg.fromGraphic(a, d));
          } else {
            this.set_frames(a.get_imageFrame());
          }
          return this;
        },
        makeGraphic: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = -1;
          }
          a = g.bitmap.create(a, b, c, d, e);
          this.set_frames(a.get_imageFrame());
          return this;
        },
        graphicLoaded: function () {},
        setGraphicSize: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (!(a <= 0) || !(b <= 0)) {
            var c = a / this.frameWidth;
            var d = b / this.frameHeight;
            var e = this.scale;
            var f = c;
            var k = d;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(k);
            if (a <= 0) {
              this.scale.set_x(d);
            } else if (b <= 0) {
              this.scale.set_y(c);
            }
          }
        },
        updateHitbox: function () {
          this.set_width(Math.abs(this.scale.x) * this.frameWidth);
          this.set_height(Math.abs(this.scale.y) * this.frameHeight);
          var a = this.offset;
          var b = (this.get_width() - this.frameWidth) * -0.5;
          var c = (this.get_height() - this.frameHeight) * -0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
        },
        resetHelpers: function () {
          if (this.frame != null) {
            this.frameWidth = this.frame.sourceSize.x | 0;
            this.frameHeight = this.frame.sourceSize.y | 0;
          }
          var a = this._halfSize;
          var b = this.frameWidth * 0.5;
          var c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this._flashRect.x = 0;
          this._flashRect.y = 0;
          this._flashRect.width = this.frameWidth;
          this._flashRect.height = this.frameHeight;
          this.set_width(this.frameWidth);
          this.set_height(this.frameHeight);
          this._flashRect2.x = 0;
          this._flashRect2.y = 0;
          if (this.graphic != null) {
            this._flashRect2.width = this.graphic.width;
            this._flashRect2.height = this.graphic.height;
          }
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          if (g.renderBlit) {
            this.dirty = true;
            this.updateFramePixels();
          }
        },
        update: function (a) {
          hc.prototype.update.call(this, a);
          this.updateAnimation(a);
        },
        updateAnimation: function (a) {
          this.animation.update(a);
        },
        checkEmptyFrame: function () {
          if (this._frame == null) {
            this.loadGraphic("flixel/images/logo/default.png");
          } else if (this.graphic != null && this.graphic.shader == null) {
            var a = this.get_width();
            var b = this.get_height();
            g.log.advanced("Cannot render a destroyed graphic, the placeholder image will be used instead", Aa.ERROR, true);
            this.loadGraphic("flixel/images/logo/default.png");
            this.set_width(a);
            this.set_height(b);
          }
        },
        draw: function () {
          this.checkEmptyFrame();
          if (this.alpha != 0 && this._frame.type != 2) {
            if (this.dirty) {
              this.calcFrame(this.useFramePixels);
            }
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              if (c.visible && c.exists && this.isOnScreen(c)) {
                if (this.isSimpleRender(c)) {
                  this.drawSimple(c);
                } else {
                  this.drawComplex(c);
                }
              }
            }
          }
        },
        drawSimple: function (a) {
          var b = this.getScreenPosition(this._point, a);
          var c = this.offset;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x - d);
          b.set_y(b.y - e);
          if (c._weak) {
            c.put();
          }
          if (this.isPixelPerfectRender(a)) {
            b = this._point;
            b.set_x(Math.floor(b.x));
            b.set_y(Math.floor(b.y));
          }
          b = this._point;
          c = this._flashPoint;
          if (c == null) {
            c = new ob();
          }
          c.x = b.x;
          c.y = b.y;
          a.copyPixels(this._frame, this.framePixels, this._flashRect, this._flashPoint, this.colorTransform, this.blend, this.antialiasing);
        },
        drawComplex: function (a) {
          var b = this.flipX != this._frame.flipX;
          var c = this.flipY != this._frame.flipY;
          this._frame.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? b != this.animation._curAnim.flipX : b, this.animation._curAnim != null ? c != this.animation._curAnim.flipY : c);
          this._matrix.translate(-this.origin.x, -this.origin.y);
          this._matrix.scale(this.scale.x, this.scale.y);
          if (this.bakedRotationAngle <= 0 && (this._angleChanged && (b = Math.PI / 180 * this.angle, this._sinAngle = Math.sin(b), this._cosAngle = Math.cos(b), this._angleChanged = false), this.angle != 0)) {
            b = this._matrix;
            c = this._cosAngle;
            var d = this._sinAngle;
            var e = b.a * c - b.b * d;
            b.b = b.a * d + b.b * c;
            b.a = e;
            e = b.c * c - b.d * d;
            b.d = b.c * d + b.d * c;
            b.c = e;
            e = b.tx * c - b.ty * d;
            b.ty = b.tx * d + b.ty * c;
            b.tx = e;
          }
          b = this.getScreenPosition(this._point, a);
          c = this.offset;
          d = c.x;
          e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x - d);
          b.set_y(b.y - e);
          b = c;
          if (b._weak) {
            b.put();
          }
          b = this._point;
          d = this.origin.x;
          e = this.origin.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(b.x + d);
          b.set_y(b.y + e);
          this._matrix.translate(this._point.x, this._point.y);
          if (this.isPixelPerfectRender(a)) {
            this._matrix.tx = Math.floor(this._matrix.tx);
            this._matrix.ty = Math.floor(this._matrix.ty);
          }
          a.drawPixels(this._frame, this.framePixels, this._matrix, this.colorTransform, this.blend, this.antialiasing, this.shader);
        },
        stamp: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.drawFrame();
          if (this.graphic == null || a.graphic == null) {
            throw I.thrown("Cannot stamp to or from a FlxSprite with no graphics.");
          }
          var d = a.framePixels;
          if (this.isSimpleRenderBlit()) {
            this._flashPoint.x = b + this.frame.frame.x;
            this._flashPoint.y = c + this.frame.frame.y;
            this._flashRect2.width = d.width;
            this._flashRect2.height = d.height;
            this.graphic.bitmap.copyPixels(d, this._flashRect2, this._flashPoint, null, null, true);
            this._flashRect2.width = this.graphic.bitmap.width;
            this._flashRect2.height = this.graphic.bitmap.height;
          } else {
            this._matrix.identity();
            this._matrix.translate(-a.origin.x, -a.origin.y);
            this._matrix.scale(a.scale.x, a.scale.y);
            if (a.angle != 0) {
              this._matrix.rotate(Math.PI / 180 * a.angle);
            }
            this._matrix.translate(b + this.frame.frame.x + a.origin.x, c + this.frame.frame.y + a.origin.y);
            this.graphic.bitmap.draw(d, this._matrix, null, a.blend, null, a.antialiasing);
          }
          if (g.renderBlit) {
            this.dirty = true;
            this.calcFrame();
          }
        },
        drawFrame: function (a) {
          if (a == null) {
            a = false;
          }
          if (g.renderBlit) {
            if (a || this.dirty) {
              this.dirty = true;
              this.calcFrame();
            }
          } else {
            this.dirty = true;
            this.calcFrame(true);
          }
        },
        centerOffsets: function (a) {
          if (a == null) {
            a = false;
          }
          this.offset.set_x((this.frameWidth - this.get_width()) * 0.5);
          this.offset.set_y((this.frameHeight - this.get_height()) * 0.5);
          if (a) {
            this.set_x(this.x + this.offset.x);
            this.set_y(this.y + this.offset.y);
          }
        },
        updateColorTransform: function () {
          if (this.colorTransform != null) {
            if (this.useColorTransform = this.alpha != 1 || this.color != 16777215) {
              Ye.setMultipliers(this.colorTransform, (this.color >> 16 & 255) / 255, (this.color >> 8 & 255) / 255, (this.color & 255) / 255, this.alpha);
            } else {
              Ye.setMultipliers(this.colorTransform, 1, 1, 1, 1);
            }
            this.dirty = true;
          }
        },
        pixelsOverlapPoint: function (a, b, c) {
          if (b == null) {
            b = 255;
          }
          a = this.getPixelAt(a, c);
          if (a != null) {
            return (a >> 24 & 255) * this.alpha >= b;
          } else {
            return false;
          }
        },
        getPixelAt: function (a, b) {
          this.transformWorldToPixels(a, b, this._point);
          if (this._point.x >= 0 && this._point.x <= this.frameWidth && this._point.y >= 0 && this._point.y <= this.frameHeight) {
            return this.updateFramePixels().getPixel32(this._point.x | 0, this._point.y | 0);
          } else {
            return null;
          }
        },
        transformWorldToPixels: function (a, b, c) {
          if (b == null) {
            b = g.camera;
          }
          var d = a.x - b.scroll.x;
          var e = a.y - b.scroll.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = da.pool.get().set(d, e);
          d._inPool = false;
          d._weak = true;
          if (a._weak) {
            a.put();
          }
          return this.transformScreenToPixels(d, b, c);
        },
        transformScreenToPixels: function (a, b, c) {
          c = this.getScreenPosition(c, b);
          b = a.x;
          var d = a.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x - b);
          c.set_y(c.y - d);
          c.set_x(c.x * -1);
          c.set_y(c.y * -1);
          var e = this.offset;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x + b);
          c.set_y(c.y + d);
          b = e;
          if (b._weak) {
            b.put();
          }
          e = this.origin;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x - b);
          c.set_y(c.y - d);
          b = e;
          if (b._weak) {
            b.put();
          }
          b = 1 / this.scale.x;
          d = 1 / this.scale.y;
          if (d == null) {
            d = b;
          }
          c.set_x(c.x * b);
          c.set_y(c.y * d);
          b = (Ak.get_radians(c) * (180 / Math.PI) - this.angle) * (Math.PI / 180);
          d = Math.sqrt(c.x * c.x + c.y * c.y);
          c.set_x(d * Math.cos(b));
          c.set_y(d * Math.sin(b));
          e = this.origin;
          b = e.x;
          d = e.y;
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.set_x(c.x + b);
          c.set_y(c.y + d);
          b = e;
          if (b._weak) {
            b.put();
          }
          b = a;
          if (b._weak) {
            b.put();
          }
          return c;
        },
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          this.checkEmptyFrame();
          if (!g.renderTile || !!a) {
            this.updateFramePixels();
          }
        },
        updateFramePixels: function () {
          if (this._frame == null || !this.dirty) {
            return this.framePixels;
          }
          if (g.renderTile && this._frameGraphic != null) {
            this.dirty = false;
            return this.framePixels;
          }
          var a = this.flipX != this._frame.flipX;
          a = this.animation._curAnim != null ? a != this.animation._curAnim.flipX : a;
          var b = this.flipY != this._frame.flipY;
          b = this.animation._curAnim != null ? b != this.animation._curAnim.flipY : b;
          this.framePixels = a || b || this._frame.type != 0 ? this._frame.paintRotatedAndFlipped(this.framePixels, this._flashPointZero, 0, a, b, false, true) : this._frame.paint(this.framePixels, this._flashPointZero, false, true);
          if (this.useColorTransform) {
            this.framePixels.colorTransform(this._flashRect, this.colorTransform);
          }
          if (g.renderTile && this.useFramePixels) {
            this._frameGraphic = ca.destroy(this._frameGraphic);
            this._frameGraphic = cc.fromBitmapData(this.framePixels, false, null, false);
            this._frame = this._frameGraphic.get_imageFrame().get_frame().copyTo(this._frame);
          }
          this.dirty = false;
          return this.framePixels;
        },
        getGraphicMidpoint: function (a) {
          if (a == null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a = da.pool.get().set(b, c);
            a._inPool = false;
          }
          b = this.x + this.frameWidth * 0.5 * this.scale.x;
          c = this.y + this.frameHeight * 0.5 * this.scale.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          return a;
        },
        isOnScreen: function (a) {
          if (a == null) {
            a = g.camera;
          }
          var b = this.getScreenBounds(this._rect, a);
          a = b.x + b.width > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + b.height > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ia._pool.putUnsafe(b);
          }
          return a;
        },
        isSimpleRender: function (a) {
          if (g.renderTile) {
            return false;
          } else {
            return this.isSimpleRenderBlit(a);
          }
        },
        isSimpleRenderBlit: function (a) {
          var b = (this.angle == 0 || this.bakedRotationAngle > 0) && this.scale.x == 1 && this.scale.y == 1 && this.blend == null;
          return b = b && (a != null ? this.isPixelPerfectRender(a) : this.pixelPerfectRender);
        },
        getScreenBounds: function (a, b) {
          if (a == null) {
            a = Ia._pool.get();
            var c = 0;
            var d = 0;
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.x = c;
            a.y = d;
            a.width = e;
            a.height = f;
            a._inPool = false;
          }
          if (b == null) {
            b = g.camera;
          }
          a.x = this.x;
          a.y = this.y;
          if (this.pixelPerfectPosition) {
            a.x = Math.floor(a.x);
            a.y = Math.floor(a.y);
            a.width = Math.floor(a.width);
            a.height = Math.floor(a.height);
          }
          f = this._scaledOrigin;
          c = this.origin.x * this.scale.x;
          d = this.origin.y * this.scale.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          f.set_x(c);
          f.set_y(d);
          a.x += -(b.scroll.x * this.scrollFactor.x | 0) - this.offset.x + this.origin.x - this._scaledOrigin.x;
          a.y += -(b.scroll.y * this.scrollFactor.y | 0) - this.offset.y + this.origin.y - this._scaledOrigin.y;
          if (this.isPixelPerfectRender(b)) {
            a.x = Math.floor(a.x);
            a.y = Math.floor(a.y);
            a.width = Math.floor(a.width);
            a.height = Math.floor(a.height);
          }
          f = this.frameHeight * Math.abs(this.scale.y);
          a.width = this.frameWidth * Math.abs(this.scale.x);
          a.height = f;
          return a.getRotatedBounds(this.angle, this._scaledOrigin, a);
        },
        get_pixels: function () {
          if (this.graphic == null) {
            return null;
          } else {
            return this.graphic.bitmap;
          }
        },
        set_pixels: function (a) {
          var b = g.bitmap.findKeyForBitmap(a);
          if (b == null) {
            b = g.bitmap.getUniqueKey();
            this.set_graphic(g.bitmap.add(a, false, b));
          } else {
            this.set_graphic(g.bitmap._cache.h[b]);
          }
          this.set_frames(this.graphic.get_imageFrame());
          return a;
        },
        set_frame: function (a) {
          this.frame = a;
          if (this.frame != null) {
            if (this.frame != null) {
              this.frameWidth = this.frame.sourceSize.x | 0;
              this.frameHeight = this.frame.sourceSize.y | 0;
            }
            a = this._halfSize;
            var b = this.frameWidth * 0.5;
            var c = this.frameHeight * 0.5;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this._flashRect.x = 0;
            this._flashRect.y = 0;
            this._flashRect.width = this.frameWidth;
            this._flashRect.height = this.frameHeight;
            this.dirty = true;
          } else if (this.frames != null && this.frames.frames != null && this.get_numFrames() > 0) {
            this.frame = this.frames.frames[0];
            this.dirty = true;
          } else {
            return null;
          }
          if (g.renderTile) {
            this._frameGraphic = ca.destroy(this._frameGraphic);
          }
          this._frame = this.clipRect != null ? this.frame.clipTo(this.clipRect, this._frame) : this.frame.copyTo(this._frame);
          return this.frame;
        },
        set_alpha: function (a) {
          if (this.alpha == a) {
            return a;
          }
          a = a < 0 ? 0 : a;
          this.alpha = a > 1 ? 1 : a;
          this.updateColorTransform();
          return this.alpha;
        },
        set_color: function (a) {
          if (this.color == a) {
            return a;
          }
          this.color = a;
          this.updateColorTransform();
          return this.color;
        },
        set_angle: function (a) {
          var b = this.angle != a;
          a = hc.prototype.set_angle.call(this, a);
          if (b) {
            this._angleChanged = true;
            this.animation.update(0);
          }
          return a;
        },
        set_blend: function (a) {
          return this.blend = a;
        },
        set_graphic: function (a) {
          if (this.graphic != a) {
            if (a != null) {
              a.incrementUseCount();
            }
            if (this.graphic != null) {
              this.graphic.decrementUseCount();
            }
            this.graphic = a;
          }
          return a;
        },
        set_clipRect: function (a) {
          if (a != null) {
            a.x = Math.round(a.x);
            a.y = Math.round(a.y);
            a.width = Math.round(a.width);
            a.height = Math.round(a.height);
            this.clipRect = a;
          } else {
            this.clipRect = null;
          }
          if (this.frames != null) {
            this.set_frame(this.frames.frames[this.animation.frameIndex]);
          }
          return a;
        },
        set_frames: function (a) {
          if (this.animation != null) {
            this.animation.destroyAnimations();
          }
          if (a != null) {
            this.set_graphic(a.parent);
            this.frames = a;
            this.set_frame(this.frames.frames[0]);
            this.resetHelpers();
            this.bakedRotationAngle = 0;
            this.animation.set_frameIndex(0);
            this.graphicLoaded();
          } else {
            this.frames = null;
            this.set_frame(null);
            this.set_graphic(null);
          }
          return a;
        },
        get_numFrames: function () {
          if (this.frames != null) {
            return this.frames.frames.length;
          } else {
            return 0;
          }
        },
        set_flipX: function (a) {
          if (g.renderTile) {
            this._facingHorizontalMult = a ? -1 : 1;
          }
          this.dirty = this.flipX != a || this.dirty;
          return this.flipX = a;
        },
        set_flipY: function (a) {
          if (g.renderTile) {
            this._facingVerticalMult = a ? -1 : 1;
          }
          this.dirty = this.flipY != a || this.dirty;
          return this.flipY = a;
        },
        set_antialiasing: function (a) {
          return this.antialiasing = a;
        },
        set_useFramePixels: function (a) {
          if (g.renderTile) {
            if (a != this.useFramePixels) {
              this.useFramePixels = a;
              this.set_frame(this.frame);
              if (a) {
                this.updateFramePixels();
              }
            }
            return a;
          } else {
            return this.useFramePixels = true;
          }
        },
        __class__: G,
        __properties__: q(hc.prototype.__properties__, {
          set_clipRect: "set_clipRect",
          set_color: "set_color",
          set_blend: "set_blend",
          set_flipY: "set_flipY",
          set_flipX: "set_flipX",
          set_alpha: "set_alpha",
          set_graphic: "set_graphic",
          set_frames: "set_frames",
          get_numFrames: "get_numFrames",
          set_frame: "set_frame",
          set_pixels: "set_pixels",
          get_pixels: "get_pixels",
          set_antialiasing: "set_antialiasing",
          set_useFramePixels: "set_useFramePixels"
        })
      });
      function Na(a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.directAlpha = this._skipTransformChildren = false;
        this.initGroup(c);
        G.call(this, a, b);
      }
      h["flixel.group.FlxTypedSpriteGroup"] = Na;
      Na.__name__ = "flixel.group.FlxTypedSpriteGroup";
      Na.__super__ = G;
      Na.prototype = q(G.prototype, {
        transformChildren_flixel_math_FlxRect: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_flixel_math_FlxPoint: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_openfl_display_BlendMode: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Array_flixel_FlxCamera: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_flixel_FlxCamera: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        multiTransformChildren_Float: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            var c = a.length;
            if (!(c > b.length)) {
              var d;
              for (var e = 0, f = this.group.members; e < f.length;) {
                var k = f[e];
                ++e;
                if (k != null && k.exists) {
                  for (var t = 0, l = c; t < l;) {
                    var g = t++;
                    d = a[g];
                    d(k, b[g]);
                  }
                }
              }
            }
          }
        },
        transformChildren_Bool: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Int: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        transformChildren_Float: function (a, b) {
          if (!this._skipTransformChildren && this.group != null) {
            for (var c = 0, d = this.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != null) {
                a(e, b);
              }
            }
          }
        },
        initGroup: function (a) {
          this.set_group(new ab(a));
        },
        initVars: function () {
          this.flixelType = 4;
          this.offset = new qh(n(this, this.offsetCallback));
          this.origin = new qh(n(this, this.originCallback));
          this.scale = new qh(n(this, this.scaleCallback));
          this.scrollFactor = new qh(n(this, this.scrollFactorCallback));
          var a = this.scale;
          var b = 1;
          var c = 1;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          a = this.scrollFactor;
          c = b = 1;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = da.pool.get().set(b, c);
          c._inPool = false;
          this.velocity = c;
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = da.pool.get().set(b, c);
          c._inPool = false;
          this.acceleration = c;
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          c = da.pool.get().set(b, c);
          c._inPool = false;
          this.drag = c;
          c = b = 10000;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a = b;
          if (c == null) {
            c = 0;
          }
          if (a == null) {
            a = 0;
          }
          c = da.pool.get().set(a, c);
          c._inPool = false;
          this.maxVelocity = c;
        },
        destroy: function () {
          this.offset = ca.destroy(this.offset);
          this.origin = ca.destroy(this.origin);
          this.scale = ca.destroy(this.scale);
          this.scrollFactor = ca.destroy(this.scrollFactor);
          this.group = ca.destroy(this.group);
          G.prototype.destroy.call(this);
        },
        isOnScreen: function (a) {
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.exists && d.visible && d.isOnScreen(a)) {
              return true;
            }
          }
          return false;
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = false;
          for (var e = 0, f = this.group.members; e < f.length;) {
            var k = f[e];
            ++e;
            if (k != null && k.exists && k.visible) {
              d = d || k.overlapsPoint(a, b, c);
            }
          }
          return d;
        },
        pixelsOverlapPoint: function (a, b, c) {
          if (b == null) {
            b = 255;
          }
          var d = false;
          for (var e = 0, f = this.group.members; e < f.length;) {
            var k = f[e];
            ++e;
            if (k != null && k.exists && k.visible) {
              d = d || k.pixelsOverlapPoint(a, b, c);
            }
          }
          return d;
        },
        update: function (a) {
          this.group.update(a);
          if (this.path != null && this.path.active) {
            this.path.update(a);
          }
          if (this.moves) {
            this.updateMotion(a);
          }
        },
        draw: function () {
          this.group.draw();
        },
        add: function (a) {
          this.preAdd(a);
          return this.group.add(a);
        },
        preAdd: function (a) {
          a.set_x(a.x + this.x);
          a.set_y(a.y + this.y);
          a.set_alpha(a.alpha * this.alpha);
          var b = a.scrollFactor;
          var c = this.scrollFactor;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          a.set_cameras(this._cameras);
          if (this.clipRect != null) {
            b = this.clipRect;
            if (b == null) {
              a.set_clipRect(null);
            } else {
              e = b.x - a.x + this.x;
              var f = b.y - a.y + this.y;
              c = b.width;
              d = b.height;
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              b = Ia._pool.get();
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              b.x = e;
              b.y = f;
              b.width = c;
              b.height = d;
              b._inPool = false;
              a.set_clipRect(b);
            }
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          a.set_x(a.x - this.x);
          a.set_y(a.y - this.y);
          a.set_cameras(null);
          return this.group.remove(a, b);
        },
        kill: function () {
          this._skipTransformChildren = true;
          G.prototype.kill.call(this);
          this._skipTransformChildren = false;
          this.group.kill();
        },
        revive: function () {
          this._skipTransformChildren = true;
          G.prototype.revive.call(this);
          this._skipTransformChildren = false;
          this.group.revive();
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          var c = a - this.x;
          var d = b - this.y;
          this.multiTransformChildren_Float([n(this, this.xTransform), n(this, this.yTransform)], [c, d]);
          this._skipTransformChildren = true;
          this.set_x(a);
          this.set_y(b);
          this._skipTransformChildren = false;
        },
        set_camera: function (a) {
          if (this.get_camera() != a) {
            this.transformChildren_flixel_FlxCamera(n(this, this.cameraTransform), a);
          }
          return G.prototype.set_camera.call(this, a);
        },
        set_cameras: function (a) {
          if (this._cameras != a) {
            this.transformChildren_Array_flixel_FlxCamera(n(this, this.camerasTransform), a);
          }
          return G.prototype.set_cameras.call(this, a);
        },
        set_exists: function (a) {
          if (this.exists != a) {
            this.transformChildren_Bool(n(this, this.existsTransform), a);
          }
          return G.prototype.set_exists.call(this, a);
        },
        set_visible: function (a) {
          if (this.exists && this.visible != a) {
            this.transformChildren_Bool(n(this, this.visibleTransform), a);
          }
          return G.prototype.set_visible.call(this, a);
        },
        set_active: function (a) {
          if (this.exists && this.active != a) {
            this.transformChildren_Bool(n(this, this.activeTransform), a);
          }
          return G.prototype.set_active.call(this, a);
        },
        set_alive: function (a) {
          if (this.alive != a) {
            this.transformChildren_Bool(n(this, this.aliveTransform), a);
          }
          return G.prototype.set_alive.call(this, a);
        },
        set_x: function (a) {
          if (this.exists && this.x != a) {
            this.transformChildren_Float(n(this, this.xTransform), a - this.x);
          }
          return this.x = a;
        },
        set_y: function (a) {
          if (this.exists && this.y != a) {
            this.transformChildren_Float(n(this, this.yTransform), a - this.y);
          }
          return this.y = a;
        },
        set_angle: function (a) {
          if (this.exists && this.angle != a) {
            this.transformChildren_Float(n(this, this.angleTransform), a - this.angle);
          }
          return this.angle = a;
        },
        set_alpha: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (this.exists && this.alpha != a) {
            var b = this.alpha > 0 ? a / this.alpha : 0;
            if (this.directAlpha || this.alpha == 0) {
              this.transformChildren_Float(n(this, this.directAlphaTransform), a);
            } else {
              this.transformChildren_Float(n(this, this.alphaTransform), b);
            }
          }
          return this.alpha = a;
        },
        set_flipX: function (a) {
          if (this.exists && this.flipX != a) {
            this.transformChildren_Bool(n(this, this.flipXTransform), a);
          }
          return this.flipX = a;
        },
        set_flipY: function (a) {
          if (this.exists && this.flipY != a) {
            this.transformChildren_Bool(n(this, this.flipYTransform), a);
          }
          return this.flipY = a;
        },
        set_moves: function (a) {
          if (this.exists && this.moves != a) {
            this.transformChildren_Bool(n(this, this.movesTransform), a);
          }
          return this.moves = a;
        },
        set_immovable: function (a) {
          if (this.exists && this.immovable != a) {
            this.transformChildren_Bool(n(this, this.immovableTransform), a);
          }
          return this.immovable = a;
        },
        set_color: function (a) {
          if (this.exists && this.color != a) {
            this.transformChildren_Int(n(this, this.gColorTransform), a);
          }
          return this.color = a;
        },
        set_blend: function (a) {
          if (this.exists && this.blend != a) {
            this.transformChildren_openfl_display_BlendMode(n(this, this.blendTransform), a);
          }
          return this.blend = a;
        },
        set_clipRect: function (a) {
          if (this.exists) {
            this.transformChildren_flixel_math_FlxRect(n(this, this.clipRectTransform), a);
          }
          return G.prototype.set_clipRect.call(this, a);
        },
        set_width: function (a) {
          return a;
        },
        get_width: function () {
          if (this.group.length == 0) {
            return 0;
          } else {
            return this.findMaxXHelper() - this.findMinXHelper();
          }
        },
        findMinX: function () {
          if (this.group.length == 0) {
            return this.x;
          } else {
            return this.findMinXHelper();
          }
        },
        findMinXHelper: function () {
          var a = Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMinX() : d.x;
              if (d < a) {
                a = d;
              }
            }
          }
          return a;
        },
        findMaxX: function () {
          if (this.group.length == 0) {
            return this.x;
          } else {
            return this.findMaxXHelper();
          }
        },
        findMaxXHelper: function () {
          var a = -Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMaxX() : d.x + d.get_width();
              if (d > a) {
                a = d;
              }
            }
          }
          return a;
        },
        set_height: function (a) {
          return a;
        },
        get_height: function () {
          if (this.group.length == 0) {
            return 0;
          } else {
            return this.findMaxYHelper() - this.findMinYHelper();
          }
        },
        findMinY: function () {
          if (this.group.length == 0) {
            return this.y;
          } else {
            return this.findMinYHelper();
          }
        },
        findMinYHelper: function () {
          var a = Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMinY() : d.y;
              if (d < a) {
                a = d;
              }
            }
          }
          return a;
        },
        findMaxY: function () {
          if (this.group.length == 0) {
            return this.y;
          } else {
            return this.findMaxYHelper();
          }
        },
        findMaxYHelper: function () {
          var a = -Infinity;
          for (var b = 0, c = this.group.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              d = d.flixelType == 4 ? d.findMaxY() : d.y + d.get_height();
              if (d > a) {
                a = d;
              }
            }
          }
          return a;
        },
        xTransform: function (a, b) {
          a.set_x(a.x + b);
        },
        yTransform: function (a, b) {
          a.set_y(a.y + b);
        },
        angleTransform: function (a, b) {
          a.set_angle(a.angle + b);
        },
        alphaTransform: function (a, b) {
          if (a.alpha != 0 || b == 0) {
            a.set_alpha(a.alpha * b);
          } else {
            a.set_alpha(1 / b);
          }
        },
        directAlphaTransform: function (a, b) {
          a.set_alpha(b);
        },
        flipXTransform: function (a, b) {
          a.set_flipX(b);
        },
        flipYTransform: function (a, b) {
          a.set_flipY(b);
        },
        movesTransform: function (a, b) {
          a.set_moves(b);
        },
        gColorTransform: function (a, b) {
          a.set_color(b);
        },
        blendTransform: function (a, b) {
          a.set_blend(b);
        },
        immovableTransform: function (a, b) {
          a.set_immovable(b);
        },
        visibleTransform: function (a, b) {
          a.set_visible(b);
        },
        activeTransform: function (a, b) {
          a.set_active(b);
        },
        aliveTransform: function (a, b) {
          a.set_alive(b);
        },
        existsTransform: function (a, b) {
          a.set_exists(b);
        },
        cameraTransform: function (a, b) {
          a.set_camera(b);
        },
        camerasTransform: function (a, b) {
          a.set_cameras(b);
        },
        offsetTransform: function (a, b) {
          a = a.offset;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        originTransform: function (a, b) {
          a = a.origin;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        scaleTransform: function (a, b) {
          a = a.scale;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        scrollFactorTransform: function (a, b) {
          a = a.scrollFactor;
          var c = b.x;
          var d = b.y;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          if (b._weak) {
            b.put();
          }
        },
        clipRectTransform: function (a, b) {
          if (b == null) {
            a.set_clipRect(null);
          } else {
            var c = b.x - a.x + this.x;
            var d = b.y - a.y + this.y;
            var e = b.width;
            var f = b.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b = Ia._pool.get();
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
            b._inPool = false;
            a.set_clipRect(b);
          }
        },
        offsetCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(n(this, this.offsetTransform), a);
        },
        originCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(n(this, this.originTransform), a);
        },
        scaleCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(n(this, this.scaleTransform), a);
        },
        scrollFactorCallback: function (a) {
          this.transformChildren_flixel_math_FlxPoint(n(this, this.scrollFactorTransform), a);
        },
        loadGraphic: function (a, b, c, d, e, f) {
          return this;
        },
        makeGraphic: function (a, b, c, d, e) {
          return this;
        },
        set_pixels: function (a) {
          return a;
        },
        set_frame: function (a) {
          return a;
        },
        get_pixels: function () {
          return null;
        },
        set_group: function (a) {
          return this.group = a;
        },
        calcFrame: function (a) {},
        resetHelpers: function () {},
        stamp: function (a, b, c) {},
        set_frames: function (a) {
          return a;
        },
        updateColorTransform: function () {},
        __class__: Na,
        __properties__: q(G.prototype.__properties__, {
          set_group: "set_group"
        })
      });
      function dc(a, b) {
        this.lastBoxType = "";
        this.lastCharacter = -1;
        this.closeVolume = 1;
        this.closeSound = "dialogueClose";
        this.ignoreThisFrame = true;
        this.daText = null;
        this.dialogueEnded = false;
        this.textBoxTypes = ["normal", "angry"];
        this.offsetPos = -600;
        this.currentText = 0;
        this.arrayCharacters = [];
        this.dialogueList = this.nextDialogueThing = this.skipDialogueThing = this.bgFade = null;
        this.scrollSpeed = 4000;
        Na.call(this);
        E.sound("dialogue");
        E.sound("dialogueClose");
        if (b != null && b != "") {
          var c = g.sound;
          b = E.returnSound("music", b, null);
          c.playMusic(b, 0);
          c = g.sound.music;
          b = 2;
          var d = 0;
          var e = 1;
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 1;
          }
          if (c._channel == null) {
            c.play();
          }
          if (c.fadeTween != null) {
            c.fadeTween.cancel();
          }
          c.fadeTween = Ha.num(d, e, b, {
            onComplete: null
          }, n(c, c.volumeTween));
        }
        this.bgFade = new G(-500, -500).makeGraphic(g.width * 2, g.height * 2, -1);
        c = this.bgFade.scrollFactor;
        c.set_x(0);
        c.set_y(0);
        this.bgFade.set_visible(true);
        this.bgFade.set_alpha(0);
        this.add(this.bgFade);
        this.dialogueList = a;
        this.spawnCharacters();
        this.box = new G(70, 370);
        this.box.set_antialiasing(C.data.antialiasing);
        c = this.box;
        a = E.image("speech_bubble", null, true);
        c.set_frames(Sa.fromSparrow(a, E.getPath("images/speech_bubble.xml", null, null)));
        c = this.box.scrollFactor;
        c.set_x(0);
        c.set_y(0);
        this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
        this.box.animation.addByPrefix("normalOpen", "Speech Bubble Normal Open", 24, false);
        this.box.animation.addByPrefix("angry", "AHH speech bubble", 24);
        this.box.animation.addByPrefix("angryOpen", "speech bubble loud open", 24, false);
        this.box.animation.addByPrefix("center-normal", "speech bubble middle", 24);
        this.box.animation.addByPrefix("center-normalOpen", "Speech Bubble Middle Open", 24, false);
        this.box.animation.addByPrefix("center-angry", "AHH Speech Bubble middle", 24);
        this.box.animation.addByPrefix("center-angryOpen", "speech bubble Middle loud open", 24, false);
        this.box.animation.play("normal", true);
        this.box.set_visible(false);
        this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
        this.box.updateHitbox();
        this.add(this.box);
        this.daText = new Wh(dc.DEFAULT_TEXT_X, dc.DEFAULT_TEXT_Y, "");
        this.daText.setScale(0.7);
        this.add(this.daText);
        this.startNextDialog();
      }
      h["cutscenes.DialogueBoxPsych"] = dc;
      dc.__name__ = "cutscenes.DialogueBoxPsych";
      dc.updateBoxOffsets = function (a) {
        a.centerOffsets();
        a.updateHitbox();
        if (v.startsWith(a.animation._curAnim.name, "angry")) {
          var b = a.offset;
          var c = 50;
          var d = 65;
        } else if (v.startsWith(a.animation._curAnim.name, "center-angry")) {
          b = a.offset;
          c = 50;
          d = 30;
        } else {
          b = a.offset;
          c = 10;
          d = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        if (!a.flipX) {
          a.offset.set_y(a.offset.y + 10);
        }
      };
      dc.__super__ = Na;
      dc.prototype = q(Na.prototype, {
        spawnCharacters: function () {
          var a = Object.create(null);
          for (var b = 0, c = this.dialogueList.dialogue.length; b < c;) {
            var d = b++;
            if (this.dialogueList.dialogue[d] != null) {
              d = this.dialogueList.dialogue[d].portrait;
              if (!Object.prototype.hasOwnProperty.call(a, d) || !a[d]) {
                a[d] = true;
              }
            }
          }
          a = Object.keys(a);
          b = a.length;
          for (c = 0; c < b;) {
            var e = a[c++];
            d = dc.LEFT_CHAR_X;
            var f = dc.DEFAULT_CHAR_Y;
            e = new kd(d + this.offsetPos, f, e);
            e.setGraphicSize(e.get_width() * kd.DEFAULT_SCALE * e.jsonFile.scale | 0);
            e.updateHitbox();
            var k = e.scrollFactor;
            k.set_x(0);
            k.set_y(0);
            e.set_alpha(0.00001);
            this.add(e);
            k = false;
            switch (e.jsonFile.dialogue_pos) {
              case "center":
                e.set_x(g.width / 2);
                e.set_x(e.x - e.get_width() / 2);
                f = e.y;
                e.set_y(g.height + 50);
                k = true;
                break;
              case "right":
                d = g.width - e.get_width() + dc.RIGHT_CHAR_X;
                e.set_x(d - this.offsetPos);
            }
            d += e.jsonFile.position[0];
            f += e.jsonFile.position[1];
            e.set_x(e.x + e.jsonFile.position[0]);
            e.set_y(e.y + e.jsonFile.position[1]);
            e.startingPos = k ? f : d;
            this.arrayCharacters.push(e);
          }
        },
        update: function (a) {
          if (this.ignoreThisFrame) {
            this.ignoreThisFrame = false;
          } else if (this.dialogueEnded) {
            if (this.box != null && this.box.animation._curAnim.curFrame <= 0) {
              this.box.kill();
              this.remove(this.box);
              this.box.destroy();
              this.box = null;
            }
            if (this.bgFade != null) {
              c = this.bgFade;
              c.set_alpha(c.alpha - a * 0.5);
              if (this.bgFade.alpha <= 0) {
                this.bgFade.kill();
                this.remove(this.bgFade);
                this.bgFade.destroy();
                this.bgFade = null;
              }
            }
            c = 0;
            for (d = this.arrayCharacters.length; c < d;) {
              e = c++;
              var b = this.arrayCharacters[e];
              if (b != null) {
                switch (this.arrayCharacters[e].jsonFile.dialogue_pos) {
                  case "center":
                    b.set_y(b.y + this.scrollSpeed * a);
                    break;
                  case "left":
                    b.set_x(b.x - this.scrollSpeed * a);
                    break;
                  case "right":
                    b.set_x(b.x + this.scrollSpeed * a);
                }
                b.set_alpha(b.alpha - a * 10);
              }
            }
            if (this.box == null && this.bgFade == null) {
              c = 0;
              for (d = this.arrayCharacters.length; c < d;) {
                c++;
                b = this.arrayCharacters[0];
                if (b != null) {
                  L.remove(this.arrayCharacters, b);
                  b.kill();
                  this.remove(b);
                  b.destroy();
                }
              }
              this.finishThing();
              this.kill();
            }
          } else {
            var c = this.bgFade;
            c.set_alpha(c.alpha + a * 0.5);
            if (this.bgFade.alpha > 0.5) {
              this.bgFade.set_alpha(0.5);
            }
            if ($a.instance.get_ACCEPT()) {
              if (this.daText.finishedText) {
                if (this.currentText >= this.dialogueList.dialogue.length) {
                  this.dialogueEnded = true;
                  c = 0;
                  for (var d = this.textBoxTypes.length; c < d;) {
                    var e = c++;
                    b = ["", "center-"];
                    var f = this.box.animation._curAnim.name;
                    for (var k = 0, t = b.length; k < t;) {
                      var l = k++;
                      if (f == b[l] + this.textBoxTypes[e] || f == b[l] + this.textBoxTypes[e] + "Open") {
                        this.box.animation.play(b[l] + this.textBoxTypes[e] + "Open", true);
                      }
                    }
                  }
                  this.box.animation._curAnim.set_curFrame(this.box.animation._curAnim.frames.length - 1);
                  this.box.animation._curAnim.reverse();
                  if (this.daText != null) {
                    this.daText.kill();
                    this.remove(this.daText);
                    this.daText.destroy();
                  }
                  dc.updateBoxOffsets(this.box);
                  c = g.sound.music;
                  d = 1;
                  e = 0;
                  if (e == null) {
                    e = 0;
                  }
                  if (d == null) {
                    d = 1;
                  }
                  if (c.fadeTween != null) {
                    c.fadeTween.cancel();
                  }
                  c.fadeTween = Ha.num(c._volume, e, d, {
                    onComplete: null
                  }, n(c, c.volumeTween));
                } else {
                  this.startNextDialog();
                }
              } else {
                this.daText.finishText();
                if (this.skipDialogueThing != null) {
                  this.skipDialogueThing();
                }
              }
              g.sound.play(E.sound(this.closeSound), this.closeVolume);
            } else if (this.daText.finishedText) {
              b = this.arrayCharacters[this.lastCharacter];
              if (b != null && b.animation._curAnim != null && b.animationIsLoop() && b.animation.get_finished()) {
                b.playAnim(b.animation._curAnim.name, true);
              }
            } else {
              b = this.arrayCharacters[this.lastCharacter];
              if (b != null && b.animation._curAnim != null && b.animation.get_finished()) {
                b.animation._curAnim.restart();
              }
            }
            if (this.box.animation._curAnim.finished) {
              c = 0;
              for (d = this.textBoxTypes.length; c < d;) {
                e = c++;
                b = ["", "center-"];
                f = this.box.animation._curAnim.name;
                k = 0;
                t = b.length;
                while (k < t) {
                  l = k++;
                  if (f == b[l] + this.textBoxTypes[e] || f == b[l] + this.textBoxTypes[e] + "Open") {
                    this.box.animation.play(b[l] + this.textBoxTypes[e], true);
                  }
                }
              }
              dc.updateBoxOffsets(this.box);
            }
            if (this.lastCharacter != -1 && this.arrayCharacters.length > 0) {
              c = 0;
              d = this.arrayCharacters.length;
              while (c < d) {
                e = c++;
                b = this.arrayCharacters[e];
                if (b != null) {
                  if (e != this.lastCharacter) {
                    switch (b.jsonFile.dialogue_pos) {
                      case "center":
                        b.set_y(b.y + this.scrollSpeed * a);
                        if (b.y > b.startingPos + g.height) {
                          b.set_y(b.startingPos + g.height);
                        }
                        break;
                      case "left":
                        b.set_x(b.x - this.scrollSpeed * a);
                        if (b.x < b.startingPos + this.offsetPos) {
                          b.set_x(b.startingPos + this.offsetPos);
                        }
                        break;
                      case "right":
                        b.set_x(b.x + this.scrollSpeed * a);
                        if (b.x > b.startingPos - this.offsetPos) {
                          b.set_x(b.startingPos - this.offsetPos);
                        }
                    }
                    b.set_alpha(b.alpha - a * 3);
                    if (b.alpha < 0.00001) {
                      b.set_alpha(0.00001);
                    }
                  } else {
                    switch (b.jsonFile.dialogue_pos) {
                      case "center":
                        b.set_y(b.y - this.scrollSpeed * a);
                        if (b.y < b.startingPos) {
                          b.set_y(b.startingPos);
                        }
                        break;
                      case "left":
                        b.set_x(b.x + this.scrollSpeed * a);
                        if (b.x > b.startingPos) {
                          b.set_x(b.startingPos);
                        }
                        break;
                      case "right":
                        b.set_x(b.x - this.scrollSpeed * a);
                        if (b.x < b.startingPos) {
                          b.set_x(b.startingPos);
                        }
                    }
                    b.set_alpha(b.alpha + a * 3);
                    if (b.alpha > 1) {
                      b.set_alpha(1);
                    }
                  }
                }
              }
            }
          }
          Na.prototype.update.call(this, a);
        },
        startNextDialog: function () {
          do {
            var a = this.dialogueList.dialogue[this.currentText];
          } while (a == null);
          if (a.text == null || a.text.length < 1) {
            a.text = " ";
          }
          if (a.boxState == null) {
            a.boxState = "normal";
          }
          if (a.speed != null ? isNaN(a.speed) : 1) {
            a.speed = 0.05;
          }
          var b = a.boxState;
          var c = this.textBoxTypes[0];
          for (var d = 0, e = this.textBoxTypes.length; d < e;) {
            var f = d++;
            if (this.textBoxTypes[f] == b) {
              c = b;
            }
          }
          b = 0;
          this.box.set_visible(true);
          d = 0;
          for (e = this.arrayCharacters.length; d < e;) {
            f = d++;
            if (this.arrayCharacters[f].curCharacter == a.portrait) {
              b = f;
              break;
            }
          }
          d = "";
          e = this.arrayCharacters[b].jsonFile.dialogue_pos;
          if (e == "center") {
            d = "center-";
          }
          if (b != this.lastCharacter) {
            this.box.animation.play(d + c + "Open", true);
            dc.updateBoxOffsets(this.box);
            this.box.set_flipX(e == "left");
          } else if (c != this.lastBoxType) {
            this.box.animation.play(d + c, true);
            dc.updateBoxOffsets(this.box);
          }
          this.lastCharacter = b;
          this.lastBoxType = c;
          this.daText.set_text(a.text);
          this.daText.delay = a.speed;
          this.daText.sound = a.sound;
          if (this.daText.sound == null || v.trim(this.daText.sound) == "") {
            this.daText.sound = "dialogue";
          }
          this.daText.set_y(dc.DEFAULT_TEXT_Y);
          if (this.daText.rows > 2) {
            c = this.daText;
            c.set_y(c.y - dc.LONG_TEXT_ADD);
          }
          c = this.arrayCharacters[b];
          if (c != null) {
            c.playAnim(a.expression, this.daText.finishedText);
            if (c.animation._curAnim != null) {
              a = 24 - (a.speed - 0.05) / 5 * 480;
              if (a < 12) {
                a = 12;
              } else if (a > 48) {
                a = 48;
              }
              c.animation._curAnim.set_frameRate(a);
            }
          }
          this.currentText++;
          if (this.nextDialogueThing != null) {
            this.nextDialogueThing();
          }
        },
        __class__: dc
      });
      function kd(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.curCharacter = "bf";
        this.isGhost = false;
        this.startingPos = 0;
        this.dialogueAnimations = new xa();
        this.jsonFile = null;
        G.call(this, a, b);
        if (c == null) {
          c = kd.DEFAULT_CHARACTER;
        }
        this.curCharacter = c;
        this.reloadCharacterJson(c);
        a = "dialogue/" + this.jsonFile.image;
        b = E.image(a, null, true);
        this.set_frames(Sa.fromSparrow(b, E.getPath("images/" + a + ".xml", null, null)));
        this.reloadAnimations();
        this.set_antialiasing(C.data.antialiasing);
        if (this.jsonFile.no_antialiasing == 1) {
          this.set_antialiasing(false);
        }
      }
      h["cutscenes.DialogueCharacter"] = kd;
      kd.__name__ = "cutscenes.DialogueCharacter";
      kd.__super__ = G;
      kd.prototype = q(G.prototype, {
        reloadCharacterJson: function (a) {
          a = "images/dialogue/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = oa.getText("assets/shared/" + a);
          this.jsonFile = JSON.parse(a);
        },
        reloadAnimations: function () {
          this.dialogueAnimations.h = Object.create(null);
          if (this.jsonFile.animations != null && this.jsonFile.animations.length > 0) {
            for (var a = 0, b = this.jsonFile.animations; a < b.length;) {
              var c = b[a];
              ++a;
              this.animation.addByPrefix(c.anim, c.loop_name, 24, this.isGhost);
              this.animation.addByPrefix(c.anim + kd.IDLE_SUFFIX, c.idle_name, 24, true);
              this.dialogueAnimations.h[c.anim] = c;
            }
          }
        },
        playAnim: function (a, b) {
          if (b == null) {
            b = false;
          }
          var c = a;
          if (a == null || !Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, a)) {
            var d = [];
            var e = this.dialogueAnimations.h;
            var f = Object.keys(e);
            for (var k = f.length, t = 0; t < k;) {
              a = e[f[t++]];
              d.push(a.anim);
            }
            if (d.length > 0) {
              c = d[g.random.int(0, d.length - 1)];
            }
          }
          if (Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, c) && (this.dialogueAnimations.h[c].loop_name == null || this.dialogueAnimations.h[c].loop_name.length < 1 || this.dialogueAnimations.h[c].loop_name == this.dialogueAnimations.h[c].idle_name)) {
            b = true;
          }
          this.animation.play(b ? c + kd.IDLE_SUFFIX : c, false);
          if (Object.prototype.hasOwnProperty.call(this.dialogueAnimations.h, c)) {
            a = this.dialogueAnimations.h[c];
            if (b) {
              d = this.offset;
              e = a.idle_offsets[0];
              a = a.idle_offsets[1];
            } else {
              d = this.offset;
              e = a.loop_offsets[0];
              a = a.loop_offsets[1];
            }
            if (a == null) {
              a = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.set_x(e);
            d.set_y(a);
          } else {
            d = this.offset;
            a = e = 0;
            if (a == null) {
              a = 0;
            }
            if (e == null) {
              e = 0;
            }
            d.set_x(e);
            d.set_y(a);
            Ab.trace("Offsets not found! Dialogue character is badly formatted, anim: " + c + ", " + (b ? "idle anim" : "loop anim"), {
              fileName: "source/cutscenes/DialogueCharacter.hx",
              lineNumber: 118,
              className: "cutscenes.DialogueCharacter",
              methodName: "playAnim"
            });
          }
        },
        animationIsLoop: function () {
          if (this.animation._curAnim == null) {
            return false;
          } else {
            return !v.endsWith(this.animation._curAnim.name, kd.IDLE_SUFFIX);
          }
        },
        __class__: kd
      });
      function Sc() {
        this.__renderedOnCanvasWhileOnDOM = this.__forceCachedBitmapUpdate = false;
        this.__mouseScrollVCounter = 0;
        this.condenseWhite = false;
        Da.call(this);
        this.__wordSelection = false;
        this.__drawableType = 7;
        this.__selectionIndex = this.__caretIndex = -1;
        this.__displayAsPassword = false;
        this.__graphics = new ee(this);
        this.__textEngine = new ic(this);
        this.__layoutDirty = true;
        this.__offsetY = this.__offsetX = 0;
        this.__mouseWheelEnabled = true;
        this.__text = "";
        if (Sc.__defaultTextFormat == null) {
          Sc.__defaultTextFormat = new ld("Times New Roman", 12, 0, false, false, false, "", "", 3, 0, 0, 0, 0);
          Sc.__defaultTextFormat.blockIndent = 0;
          Sc.__defaultTextFormat.bullet = false;
          Sc.__defaultTextFormat.letterSpacing = 0;
          Sc.__defaultTextFormat.kerning = false;
        }
        this.__textFormat = Sc.__defaultTextFormat.clone();
        this.__textEngine.textFormatRanges.push(new Td(this.__textFormat, 0, 0));
        this.addEventListener("mouseDown", n(this, this.this_onMouseDown));
        this.addEventListener("focusIn", n(this, this.this_onFocusIn));
        this.addEventListener("focusOut", n(this, this.this_onFocusOut));
        this.addEventListener("keyDown", n(this, this.this_onKeyDown));
        this.addEventListener("mouseWheel", n(this, this.this_onMouseWheel));
      }
      h["openfl.text.TextField"] = Sc;
      Sc.__name__ = "openfl.text.TextField";
      Sc.__super__ = Da;
      Sc.prototype = q(Da.prototype, {
        appendText: function (a) {
          if (a != null && a != "") {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__updateText(this.__text + a);
            this.__selectionIndex = this.__caretIndex = this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end = this.__text.length;
          }
        },
        getCharBoundaries: function (a) {
          if (a < 0 || a > this.__text.length - 1) {
            return null;
          }
          var b = new ba();
          if (this.__getCharBoundaries(a, b)) {
            return b;
          } else {
            return null;
          }
        },
        getLineIndexOfChar: function (a) {
          if (a < 0 || a > this.__text.length) {
            return -1;
          }
          this.__updateLayout();
          for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
            var c = b.next();
            if (c.startIndex <= a && c.endIndex >= a) {
              return c.lineIndex;
            }
          }
          return -1;
        },
        getLineLength: function (a) {
          this.__updateLayout();
          if (a < 0 || a > this.__textEngine.numLines - 1) {
            return 0;
          }
          var b = -1;
          var c = -1;
          for (var d = this.__textEngine.layoutGroups.iterator(); d.hasNext();) {
            var e = d.next();
            if (e.lineIndex == a) {
              if (b == -1) {
                b = e.startIndex;
              }
            } else if (e.lineIndex == a + 1) {
              c = e.startIndex;
              break;
            }
          }
          if (c == -1) {
            c = this.__text.length;
          }
          return c - b;
        },
        getLineOffset: function (a) {
          this.__updateLayout();
          if (a < 0 || a > this.__textEngine.numLines - 1) {
            return -1;
          }
          for (var b = this.__textEngine.layoutGroups.iterator(); b.hasNext();) {
            var c = b.next();
            if (c.lineIndex == a) {
              return c.startIndex;
            }
          }
          return 0;
        },
        replaceSelectedText: function (a) {
          this.__replaceSelectedText(a, false);
        },
        replaceText: function (a, b, c) {
          this.__replaceText(a, b, c, false);
        },
        setSelection: function (a, b) {
          this.__selectionIndex = a;
          this.__caretIndex = b;
          this.__updateScrollV();
          this.__updateScrollH();
          if (this.stage != null && this.stage.get_focus() == this) {
            this.__stopCursorTimer();
            this.__startCursorTimer();
          }
        },
        setTextFormat: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = -1;
          }
          var d = this.get_text().length;
          if (b == -1) {
            if (c == -1) {
              c = d;
            }
            b = 0;
          } else if (c == -1) {
            c = b + 1;
          }
          if (b != c) {
            if (b < 0 || c <= 0 || c < b || b >= d || c > d) {
              throw new Qi();
            }
            if (b == 0 && c == d) {
              this.__textEngine.textFormatRanges.set_length(1);
              var e = this.__textEngine.textFormatRanges.get(0);
              e.start = 0;
              e.end = d;
              e.format.__merge(a);
            } else {
              d = 0;
              var f;
              while (d < this.__textEngine.textFormatRanges.get_length()) {
                e = this.__textEngine.textFormatRanges.get(d);
                if (e.end <= b) {
                  ++d;
                } else if (e.start >= c) {
                  break;
                } else if (e.start <= b && e.end >= c) {
                  if (e.start == b && e.end == c) {
                    e.format = e.format.clone();
                    e.format.__merge(a);
                    break;
                  } else if (e.start == b) {
                    f = new Td(e.format.clone(), b, c);
                    f.format.__merge(a);
                    this.__textEngine.textFormatRanges.insertAt(d, f);
                    e.start = c;
                    d += 2;
                  } else {
                    if (e.end == c) {
                      f = new Td(e.format.clone(), b, c);
                      f.format.__merge(a);
                      this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                    } else {
                      f = new Td(e.format.clone(), b, c);
                      f.format.__merge(a);
                      this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                      f = new Td(e.format.clone(), c, e.end);
                      this.__textEngine.textFormatRanges.insertAt(d + 2, f);
                    }
                    e.end = b;
                    break;
                  }
                } else if (e.start >= b && e.end <= c) {
                  if (e.start == b) {
                    e.format = e.format.clone();
                    e.format.__merge(a);
                    e.end = c;
                  } else {
                    this.__textEngine.textFormatRanges.removeAt(d);
                  }
                } else if (e.start > b && e.end > b) {
                  e.start = c;
                  break;
                } else if (e.start < b && e.end <= c) {
                  f = new Td(e.format.clone(), b, c);
                  f.format.__merge(a);
                  this.__textEngine.textFormatRanges.insertAt(d + 1, f);
                  e.end = b;
                  d += 2;
                } else {
                  ++d;
                  Ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                    fileName: "openfl/text/TextField.hx",
                    lineNumber: 1610,
                    className: "openfl.text.TextField",
                    methodName: "setTextFormat"
                  });
                }
              }
            }
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __setStageReference: function (a) {
          this.__stopTextInput();
          Da.prototype.__setStageReference.call(this, a);
        },
        __allowMouseFocus: function () {
          return this.mouseEnabled;
        },
        __caretBeginningOfLine: function () {
          this.__caretIndex = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
        },
        __caretBeginningOfNextLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) : this.__text.length;
        },
        __caretBeginningOfPreviousLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a > 0) {
            var b = this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex));
            this.__caretIndex = this.__caretIndex == b ? this.getLineOffset(a - 1) : b;
          }
        },
        __caretEndOfLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          this.__caretIndex = a < this.__textEngine.numLines - 1 ? this.getLineOffset(a + 1) - 1 : this.__text.length;
        },
        __caretNextCharacter: function () {
          if (this.__caretIndex < this.__text.length) {
            this.__caretIndex++;
          }
        },
        __caretNextLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a < this.__textEngine.numLines - 1) {
            this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a + 1);
          }
        },
        __caretPreviousCharacter: function () {
          if (this.__caretIndex > 0) {
            this.__caretIndex--;
          }
        },
        __caretPreviousLine: function () {
          var a = this.getLineIndexOfChar(this.__caretIndex);
          if (a > 0) {
            this.__caretIndex = this.__getCharIndexOnDifferentLine(this.get_caretIndex(), a - 1);
          }
        },
        __disableInput: function () {
          if (this.__inputEnabled && this.stage != null) {
            this.stage.window.__backend.setTextInputEnabled(false);
            this.stage.window.onTextInput.remove(n(this, this.window_onTextInput));
            this.stage.window.onKeyDown.remove(n(this, this.window_onKeyDown));
            this.__inputEnabled = false;
            this.__stopCursorTimer();
          }
        },
        __dispatch: function (a) {
          if (a.eventPhase == 2 && a.type == "mouseUp") {
            var b = this.__getGroup(this.get_mouseX(), this.get_mouseY(), true);
            if (b != null) {
              b = b.format.url;
              if (b != null && b != "") {
                if (v.startsWith(b, "event:")) {
                  this.dispatchEvent(new Uf("link", true, false, L.substr(b, 6, null)));
                } else {
                  ia.getURL(new Bk(b));
                }
              }
            }
          }
          return Da.prototype.__dispatch.call(this, a);
        },
        __enableInput: function () {
          if (this.stage != null) {
            var a = this.getBounds(this.stage);
            a = new Je(a.x, a.y, a.width, a.height);
            this.stage.window.setTextInputRect(a);
            this.stage.window.__backend.setTextInputEnabled(true);
            if (!this.__inputEnabled) {
              this.stage.window.__backend.setTextInputEnabled(true);
              if (!this.stage.window.onTextInput.has(n(this, this.window_onTextInput))) {
                this.stage.window.onTextInput.add(n(this, this.window_onTextInput));
                this.stage.window.onKeyDown.add(n(this, this.window_onKeyDown));
              }
              this.__inputEnabled = true;
              this.__stopCursorTimer();
              this.__startCursorTimer();
            }
          }
        },
        __getBounds: function (a, b) {
          this.__updateLayout();
          var c = ba.__pool.get();
          c.copyFrom(this.__textEngine.bounds);
          c.offset(this.__offsetX, this.__offsetY);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ba.__pool.release(c);
        },
        __getCharBoundaries: function (a, b) {
          if (a < 0 || a > this.__text.length - 1) {
            return false;
          }
          this.__updateLayout();
          for (var c = this.__textEngine.layoutGroups.iterator(); c.hasNext();) {
            var d = c.next();
            if (a >= d.startIndex && a < d.endIndex) {
              try {
                var e = d.offsetX;
                for (var f = 0, k = a - d.startIndex; f < k;) {
                  var t = f++;
                  e += d.positions[t];
                }
                b.setTo(e, d.offsetY, d.positions[a - d.startIndex], d.ascent + d.descent);
                return true;
              } catch (l) {
                Oa.lastError = l;
              }
            }
          }
          return false;
        },
        __getCharIndexOnDifferentLine: function (a, b) {
          if (a < 0 || a > this.__text.length || b < 0 || b > this.__textEngine.numLines - 1) {
            return -1;
          }
          var c = null;
          var d = null;
          for (var e = this.__textEngine.layoutGroups.iterator(); e.hasNext();) {
            var f = e.next();
            if (a >= f.startIndex && a <= f.endIndex) {
              c = f.offsetX;
              for (var k = 0, t = a - f.startIndex; k < t;) {
                var l = k++;
                c += f.positions[l];
              }
              if (d != null) {
                return this.__getPosition(c, d);
              }
            }
            if (f.lineIndex == b) {
              d = f.offsetY + f.height / 2;
              f = 0;
              for (k = this.get_scrollV() - 1; f < k;) {
                t = f++;
                d -= this.__textEngine.lineHeights.get(t);
              }
              if (c != null) {
                return this.__getPosition(c, d);
              }
            }
          }
          return -1;
        },
        __getCursor: function () {
          var a = this.__getGroup(this.get_mouseX(), this.get_mouseY(), true);
          if (a != null && a.format.url != "") {
            return "button";
          } else if (this.__textEngine.selectable) {
            return "ibeam";
          } else {
            return null;
          }
        },
        __getGroup: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          this.__updateLayout();
          a += this.get_scrollH();
          for (var d = 0, e = this.get_scrollV() - 1; d < e;) {
            var f = d++;
            b += this.__textEngine.lineHeights.get(f);
          }
          if (!c && b > this.__textEngine.textHeight) {
            b = this.__textEngine.textHeight;
          }
          var k = true;
          d = 0;
          for (e = this.__textEngine.layoutGroups.get_length(); d < e;) {
            f = d++;
            var t = this.__textEngine.layoutGroups.get(f);
            f = f < this.__textEngine.layoutGroups.get_length() - 1 ? this.__textEngine.layoutGroups.get(f + 1) : null;
            if (k) {
              if (b < t.offsetY) {
                b = t.offsetY;
              }
              if (a < t.offsetX) {
                a = t.offsetX;
              }
              k = false;
            }
            if (b >= t.offsetY && b <= t.offsetY + t.height || !c && f == null) {
              if (a >= t.offsetX && a <= t.offsetX + t.width || !c && (f == null || f.lineIndex != t.lineIndex)) {
                return t;
              }
            }
          }
          return null;
        },
        __getPosition: function (a, b) {
          b = this.__getGroup(a, b);
          if (b == null) {
            return this.__text.length;
          }
          var c = 0;
          for (var d = 0, e = b.positions.length; d < e;) {
            var f = d++;
            c += b.positions[f];
            if (a <= b.offsetX + c) {
              if (a <= b.offsetX + (c - b.positions[f]) + b.positions[f] / 2) {
                return b.startIndex + f;
              }
              if (b.startIndex + f < b.endIndex) {
                return b.startIndex + f + 1;
              }
              break;
            }
          }
          return b.endIndex;
        },
        __getPositionByIdentifier: function (a, b, c) {
          a = this.__getPosition(a, b);
          c = c ? "\n" : " .,;:!?()[]{}<>/\\|-=+*&^%$#@~`'\"";
          b = this.__text.charAt(a);
          if (this.__specialSelectionInitialIndex <= a) {
            while (c.indexOf(b) == -1 && a < this.__text.length) {
              ++a;
              b = this.__text.charAt(a);
            }
          } else {
            while (c.indexOf(b) == -1 && a > 0) {
              --a;
              b = this.__text.charAt(a);
            }
            if (a == 0) {
              return a;
            }
            ++a;
          }
          return a;
        },
        __getOppositeIdentifierBound: function (a, b) {
          b = b ? "\n" : " .,;:!?()[]{}<>/\\|-=+*&^%$#@~`'\"";
          var c = this.__text.charAt(a);
          if (a <= this.__caretIndex) {
            while (b.indexOf(c) == -1 && a > 0) {
              --a;
              c = this.__text.charAt(a);
            }
            if (a == 0) {
              return a;
            }
            ++a;
          } else {
            while (b.indexOf(c) == -1 && a < this.__text.length) {
              ++a;
              c = this.__text.charAt(a);
            }
          }
          return a;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          this.__updateLayout();
          c = this.__renderTransform;
          e = c.a * c.d - c.b * c.c;
          var k = e == 0 ? -c.tx : 1 / e * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          e = c.a * c.d - c.b * c.c;
          if (this.__textEngine.bounds.contains(k, e == 0 ? -c.ty : 1 / e * (c.a * (b - c.ty) + c.b * (c.tx - a)))) {
            if (d != null) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        __hitTestMask: function (a, b) {
          this.__getRenderTransform();
          this.__updateLayout();
          var c = this.__renderTransform;
          var d = c.a * c.d - c.b * c.c;
          var e = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          d = c.a * c.d - c.b * c.c;
          if (this.__textEngine.bounds.contains(e, d == 0 ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a)))) {
            return true;
          } else {
            return false;
          }
        },
        __replaceSelectedText: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            a = "";
          }
          if (a != "" || this.__selectionIndex != this.__caretIndex) {
            var c = this.__caretIndex < this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
            var d = this.__caretIndex > this.__selectionIndex ? this.__caretIndex : this.__selectionIndex;
            if (c != d || !(this.__textEngine.maxChars > 0) || this.__text.length != this.__textEngine.maxChars) {
              if (c > this.__text.length) {
                c = this.__text.length;
              }
              if (d > this.__text.length) {
                d = this.__text.length;
              }
              if (d < c) {
                var e = d;
                d = c;
                c = e;
              }
              if (c < 0) {
                c = 0;
              }
              this.__replaceText(c, d, a, b);
            }
          }
        },
        __replaceText: function (a, b, c, d) {
          if (!(b < a) && !(a < 0) && !(b > this.__text.length) && c != null) {
            if (d) {
              c = this.__textEngine.restrictText(c);
              if (this.__textEngine.maxChars > 0) {
                d = this.__textEngine.maxChars - this.__text.length + (b - a);
                if (d <= 0) {
                  c = "";
                } else if (d < c.length) {
                  c = L.substr(c, 0, d);
                }
              }
            }
            this.__updateText(this.__text.substring(0, a) + c + this.__text.substring(b));
            d = c.length - (b - a);
            for (var e = 0, f; e < this.__textEngine.textFormatRanges.get_length();) {
              f = this.__textEngine.textFormatRanges.get(e);
              if (a == b) {
                if (f.start == f.end) {
                  if (f.start != 0) {
                    Ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                      fileName: "openfl/text/TextField.hx",
                      lineNumber: 2184,
                      className: "openfl.text.TextField",
                      methodName: "__replaceText"
                    });
                  } else {
                    f.end += d;
                  }
                } else if (f.end >= a) {
                  if (f.start >= a) {
                    f.start += d;
                    f.end += d;
                  } else if (f.start < a && f.end >= b) {
                    f.end += d;
                  }
                }
              } else if (f.end > a) {
                if (f.start > b) {
                  f.start += d;
                  f.end += d;
                } else if (f.start <= a && f.end > b) {
                  f.end += d;
                } else if (f.start >= a && f.end <= b) {
                  f = this.__textEngine.textFormatRanges;
                  f.__tempIndex = e--;
                  for (var k = 0, t = []; k < t.length;) {
                    var l = t[k++];
                    f.insertAt(f.__tempIndex, l);
                    f.__tempIndex++;
                  }
                  f.splice(f.__tempIndex, 1);
                } else if (f.end > b && f.start > a && f.start <= b) {
                  f.start = a;
                  f.end += d;
                } else if (f.start < a && f.end > a && f.end <= b) {
                  f.end = a;
                }
              }
              ++e;
            }
            if (this.__textEngine.textFormatRanges.get_length() == 0) {
              this.__textEngine.textFormatRanges.push(new Td(this.get_defaultTextFormat().clone(), 0, c.length));
            } else if (a == b && this.__textEngine.textFormatRanges.get(0).start > 0) {
              this.__textEngine.textFormatRanges.unshift(new Td(this.get_defaultTextFormat().clone(), 0, this.__textEngine.textFormatRanges.get(0).start));
            } else if (a != b && this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end < this.__text.length) {
              this.__textEngine.textFormatRanges.push(new Td(this.get_defaultTextFormat().clone(), this.__textEngine.textFormatRanges.get(this.__textEngine.textFormatRanges.get_length() - 1).end, this.__text.length));
            }
            this.__selectionIndex = this.__caretIndex = a + c.length;
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __startCursorTimer: function () {
          if (this.get_type() == 1) {
            if (this.__inputEnabled) {
              this.__cursorTimer = jg.delay(n(this, this.__startCursorTimer), 600);
              this.__showCursor = !this.__showCursor;
            }
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else if (this.get_selectable()) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __startTextInput: function () {
          if (this.__caretIndex < 0) {
            this.__selectionIndex = this.__caretIndex = this.__text.length;
          }
          if (Ba.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) {
            this.__enableInput();
          }
        },
        __stopCursorTimer: function () {
          if (this.__cursorTimer != null) {
            this.__cursorTimer.stop();
            this.__cursorTimer = null;
          }
          if (this.__showCursor) {
            this.__showCursor = false;
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        __stopTextInput: function () {
          if (Ba.__supportDOM ? this.__renderedOnCanvasWhileOnDOM : 1) {
            this.__disableInput();
          }
        },
        __updateLayout: function () {
          if (this.__layoutDirty) {
            var a = this.__textEngine.width;
            this.__textEngine.update();
            if (this.__textEngine.autoSize != 2) {
              if (this.__textEngine.width != a) {
                switch (this.__textEngine.autoSize) {
                  case 0:
                    this.set_x(this.get_x() + (a - this.__textEngine.width) / 2);
                    break;
                  case 3:
                    this.set_x(this.get_x() + (a - this.__textEngine.width));
                }
              }
              this.__textEngine.getBounds();
            }
            this.__layoutDirty = false;
            this.setSelection(this.__selectionIndex, this.__caretIndex);
          }
        },
        __updateMouseDrag: function () {
          if (this.stage != null) {
            var a = this.getBounds(this);
            if (this.get_mouseX() > a.width - 1) {
              this.set_scrollH(this.get_scrollH() + (Math.max(Math.min((this.get_mouseX() - a.width) * 0.1, 10), 1) | 0));
            } else if (this.get_mouseX() < 1) {
              this.set_scrollH(this.get_scrollH() - (Math.max(Math.min(this.get_mouseX() * -0.1, 10), 1) | 0));
            }
            this.__mouseScrollVCounter++;
            if (this.__mouseScrollVCounter > this.stage.get_frameRate() / 10) {
              if (this.get_mouseY() > a.height - 2) {
                this.set_scrollV(Math.min(this.get_scrollV() + Math.max(Math.min((this.get_mouseY() - a.height) * 0.03, 5), 1), this.get_maxScrollV()) | 0);
              } else if (this.get_mouseY() < 2) {
                this.set_scrollV(this.get_scrollV() - (Math.max(Math.min(this.get_mouseY() * -0.03, 5), 1) | 0));
              }
              this.__mouseScrollVCounter = 0;
            }
            this.stage_onMouseMove(null);
          }
        },
        __updateScrollH: function () {
          this.__updateLayout();
          var a = this.getBounds(this);
          if (this.get_textWidth() <= a.width - 4) {
            this.set_scrollH(0);
          } else {
            var b = this.get_scrollH();
            if (this.__caretIndex == 0 || this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex)) == this.__caretIndex) {
              b = 0;
            } else {
              var c = ba.__pool.get();
              var d = false;
              if (this.__caretIndex < this.__text.length) {
                d = this.__getCharBoundaries(this.__caretIndex, c);
              }
              if (!d) {
                this.__getCharBoundaries(this.__caretIndex - 1, c);
                c.x += c.width;
              }
              while (c.x < b && b > 0) {
                b -= 24;
              }
              while (c.x > b + a.width - 4) {
                b += 24;
              }
              ba.__pool.release(c);
            }
            if (b > 0 && this.get_type() != 1) {
              c = this.getLineLength(this.getLineIndexOfChar(this.__caretIndex));
              if (this.get_scrollH() + a.width - 4 > c) {
                this.set_scrollH(Math.ceil(c - a.width + 4));
              }
            }
            if (b < 0) {
              this.set_scrollH(0);
            } else if (b > this.get_maxScrollH()) {
              this.set_scrollH(this.get_maxScrollH());
            } else {
              this.set_scrollH(b);
            }
          }
        },
        __updateScrollV: function () {
          this.__updateLayout();
          if (this.get_textHeight() <= this.get_height() - 4) {
            this.set_scrollV(1);
          } else {
            var a = this.getLineIndexOfChar(this.__caretIndex);
            if (a == -1 && this.__caretIndex > 0) {
              a = this.getLineIndexOfChar(this.__caretIndex - 1) + 1;
            }
            if (a + 1 < this.get_scrollV()) {
              this.set_scrollV(a + 1);
            } else if (a + 1 > this.get_bottomScrollV()) {
              var b = 0;
              for (a >= this.__textEngine.lineHeights.get_length() && (a = this.__textEngine.lineHeights.get_length() - 1); a >= 0;) {
                b += this.__textEngine.lineHeights.get(a);
                if (b > this.get_height() - 4) {
                  a += b - this.get_height() < 0 ? 1 : 2;
                  break;
                }
                --a;
              }
              this.set_scrollV(a);
            } else {
              this.set_scrollV(this.get_scrollV());
            }
          }
        },
        __updateText: function (a) {
          if (Ba.__supportDOM && this.__renderedOnCanvasWhileOnDOM) {
            this.__forceCachedBitmapUpdate = this.__text != a;
          }
          this.__textEngine.set_text(a);
          this.__text = this.__textEngine.text;
          if (this.stage != null && this.stage.get_focus() == this) {
            if (this.__text.length < this.__selectionIndex) {
              this.__selectionIndex = this.__text.length;
            }
            if (this.__text.length < this.__caretIndex) {
              this.__caretIndex = this.__text.length;
            }
          } else if (this.__isHTML) {
            this.__selectionIndex = this.__caretIndex = this.__text.length;
          } else {
            this.__caretIndex = this.__selectionIndex = 0;
          }
          if (!this.__displayAsPassword || Ba.__supportDOM && !this.__renderedOnCanvasWhileOnDOM) {
            this.__textEngine.set_text(this.__text);
          } else {
            a = "";
            for (var b = 0, c = this.get_text().length; b < c;) {
              b++;
              a += "*";
            }
            this.__textEngine.set_text(a);
          }
        },
        __updateTransforms: function (a) {
          Da.prototype.__updateTransforms.call(this, a);
          a = this.__renderTransform;
          var b = this.__offsetX;
          var c = this.__offsetY;
          a.tx = b * a.a + c * a.c + a.tx;
          a.ty = b * a.b + c * a.d + a.ty;
        },
        set_autoSize: function (a) {
          if (a != this.__textEngine.autoSize) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.autoSize = a;
        },
        get_bottomScrollV: function () {
          this.__updateLayout();
          return this.__textEngine.get_bottomScrollV();
        },
        get_caretIndex: function () {
          return this.__caretIndex;
        },
        get_defaultTextFormat: function () {
          return this.__textFormat.clone();
        },
        set_defaultTextFormat: function (a) {
          this.__textFormat.__merge(a);
          this.__dirty = this.__layoutDirty = true;
          if (!this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          return a;
        },
        get_displayAsPassword: function () {
          return this.__displayAsPassword;
        },
        set_displayAsPassword: function (a) {
          if (a != this.__displayAsPassword) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__displayAsPassword = a;
            this.__updateText(this.__text);
          }
          return a;
        },
        get_embedFonts: function () {
          return this.__textEngine.embedFonts;
        },
        set_embedFonts: function (a) {
          return this.__textEngine.embedFonts = a;
        },
        get_height: function () {
          this.__updateLayout();
          return this.__textEngine.height * Math.abs(this.get_scaleY());
        },
        set_height: function (a) {
          if (a != this.__textEngine.height) {
            this.__setTransformDirty();
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.height = a;
          }
          return this.__textEngine.height * Math.abs(this.get_scaleY());
        },
        get_htmlText: function () {
          if (this.__isHTML) {
            return this.__htmlText;
          } else {
            return this.__text;
          }
        },
        set_htmlText: function (a) {
          if (a == null) {
            a = new lh("Error #2007: Parameter text must be non-null.");
            a.errorID = 2007;
            throw a;
          }
          if (!this.__isHTML || this.__text != a) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          this.__isHTML = true;
          if (this.condenseWhite) {
            a = a.replace(/\s+/g, " ");
          }
          this.__htmlText = a;
          a = Za.parse(a, this.get_multiline(), this.__styleSheet, this.__textFormat, this.__textEngine.textFormatRanges);
          this.__updateText(a);
          return a;
        },
        get_maxScrollH: function () {
          this.__updateLayout();
          return this.__textEngine.maxScrollH;
        },
        get_maxScrollV: function () {
          this.__updateLayout();
          return this.__textEngine.get_maxScrollV();
        },
        get_mouseWheelEnabled: function () {
          return this.__mouseWheelEnabled;
        },
        get_multiline: function () {
          return this.__textEngine.multiline;
        },
        set_multiline: function (a) {
          return this.__textEngine.multiline = a;
        },
        get_numLines: function () {
          this.__updateLayout();
          return this.__textEngine.numLines;
        },
        get_scrollH: function () {
          return this.__textEngine.scrollH;
        },
        set_scrollH: function (a) {
          this.__updateLayout();
          if (a > this.__textEngine.maxScrollH) {
            a = this.__textEngine.maxScrollH;
          }
          if (a < 0) {
            a = 0;
          }
          if (a != this.__textEngine.scrollH) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.scrollH = a;
            this.dispatchEvent(new za("scroll"));
          }
          return this.__textEngine.scrollH;
        },
        get_scrollV: function () {
          return this.__textEngine.get_scrollV();
        },
        set_scrollV: function (a) {
          this.__updateLayout();
          if (a > this.__textEngine.get_maxScrollV()) {
            a = this.__textEngine.get_maxScrollV();
          }
          if (a < 1) {
            a = 1;
          }
          if (a != this.__textEngine.get_scrollV() || this.__textEngine.get_scrollV() == 0) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.set_scrollV(a);
            this.dispatchEvent(new za("scroll"));
          }
          return this.__textEngine.get_scrollV();
        },
        get_selectable: function () {
          return this.__textEngine.selectable;
        },
        set_selectable: function (a) {
          if (a != this.__textEngine.selectable && this.get_type() == 1) {
            if (this.stage != null && this.stage.get_focus() == this) {
              this.__startTextInput();
            } else if (!a) {
              this.__stopTextInput();
            }
          }
          return this.__textEngine.selectable = a;
        },
        set_sharpness: function (a) {
          if (a != this.__textEngine.sharpness) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.sharpness = a;
        },
        get_tabEnabled: function () {
          if (this.__tabEnabled == null) {
            return this.__textEngine.type == 1;
          } else {
            return this.__tabEnabled;
          }
        },
        get_text: function () {
          return this.__text;
        },
        set_text: function (a) {
          if (a == null) {
            a = new lh("Error #2007: Parameter text must be non-null.");
            a.errorID = 2007;
            throw a;
          }
          if (this.__styleSheet != null) {
            return this.set_htmlText(a);
          }
          if (this.__isHTML || this.__text != a) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          } else {
            return a;
          }
          if (this.__textEngine.textFormatRanges.get_length() > 1) {
            var b = this.__textEngine.textFormatRanges;
            var c = this.__textEngine.textFormatRanges.get_length() - 1;
            b.__tempIndex = 1;
            for (var d = 0, e = []; d < e.length;) {
              var f = e[d++];
              b.insertAt(b.__tempIndex, f);
              b.__tempIndex++;
            }
            b.splice(b.__tempIndex, c);
          }
          b = this.__textEngine.textFormatRanges.get(0);
          b.format = this.__textFormat;
          b.start = 0;
          b.end = a.length;
          this.__isHTML = false;
          this.__updateText(a);
          return a;
        },
        set_textColor: function (a) {
          if (a != this.__textFormat.color) {
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          for (var b = this.__textEngine.textFormatRanges.iterator(); b.hasNext();) {
            b.next().format.color = a;
          }
          return this.__textFormat.color = a;
        },
        get_textWidth: function () {
          this.__updateLayout();
          return this.__textEngine.textWidth;
        },
        get_textHeight: function () {
          this.__updateLayout();
          return this.__textEngine.textHeight;
        },
        get_type: function () {
          return this.__textEngine.type;
        },
        get_width: function () {
          this.__updateLayout();
          return this.__textEngine.width * Math.abs(this.__scaleX);
        },
        set_width: function (a) {
          if (a != this.__textEngine.width) {
            this.__setTransformDirty();
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
            this.__textEngine.width = a;
          }
          return this.__textEngine.width * Math.abs(this.__scaleX);
        },
        get_wordWrap: function () {
          return this.__textEngine.wordWrap;
        },
        set_wordWrap: function (a) {
          if (a != this.__textEngine.wordWrap) {
            this.__layoutDirty = this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__textEngine.wordWrap = a;
        },
        get_x: function () {
          return this.__transform.tx + this.__offsetX;
        },
        set_x: function (a) {
          if (a != this.__transform.tx + this.__offsetX) {
            this.__setTransformDirty();
          }
          this.__transform.tx = a - this.__offsetX;
          return a;
        },
        get_y: function () {
          return this.__transform.ty + this.__offsetY;
        },
        set_y: function (a) {
          if (a != this.__transform.ty + this.__offsetY) {
            this.__setTransformDirty();
          }
          this.__transform.ty = a - this.__offsetY;
          return a;
        },
        stage_onMouseMove: function (a) {
          if (this.stage != null && this.get_selectable() && this.__selectionIndex >= 0 && (this.__updateLayout(), a = this.__lineSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), true) : this.__wordSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), false) : this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY()), a != this.__caretIndex)) {
            this.__caretIndex = a;
            if (this.__wordSelection || this.__lineSelection) {
              this.__selectionIndex = this.__getOppositeIdentifierBound(this.__specialSelectionInitialIndex, this.__lineSelection);
            }
            a = true;
            if (Ba.__supportDOM) {
              if (this.__renderedOnCanvasWhileOnDOM) {
                this.__forceCachedBitmapUpdate = true;
              }
              a = false;
            }
            if (a) {
              this.__dirty = true;
              if (!this.__renderDirty) {
                this.__renderDirty = true;
                this.__setParentRenderDirty();
              }
            }
          }
        },
        stage_onMouseUp: function (a) {
          a = a.currentTarget;
          a.removeEventListener("enterFrame", n(this, this.this_onEnterFrame));
          a.removeEventListener("mouseMove", n(this, this.stage_onMouseMove));
          a.removeEventListener("mouseUp", n(this, this.stage_onMouseUp));
          if (this.stage == a && a.get_focus() == this) {
            this.__getWorldTransform();
            this.__updateLayout();
            a = this.__lineSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), true) : this.__wordSelection ? this.__getPositionByIdentifier(this.get_mouseX() + this.get_scrollH(), this.get_mouseY(), false) : this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
            var b = Math.max(this.__selectionIndex, a) | 0;
            this.__selectionIndex = Math.min(this.__selectionIndex, a) | 0;
            this.__caretIndex = b;
            this.__wordSelection = this.__lineSelection = false;
            if (this.__inputEnabled) {
              this.this_onFocusIn(null);
              this.__stopCursorTimer();
              this.__startCursorTimer();
              if (Ba.__supportDOM && this.__renderedOnCanvasWhileOnDOM) {
                this.__forceCachedBitmapUpdate = true;
              }
            }
          }
        },
        this_onEnterFrame: function (a) {
          this.__updateMouseDrag();
        },
        this_onFocusIn: function (a) {
          if (this.get_type() == 1 && this.stage != null && this.stage.get_focus() == this) {
            this.__startTextInput();
          } else if (this.get_type() != 1 && this.get_selectable() && this.stage != null && this.stage.get_focus() == this) {
            this.__startCursorTimer();
          }
        },
        this_onFocusOut: function (a) {
          this.__stopCursorTimer();
          this.__stopTextInput();
          if (this.__selectionIndex != this.__caretIndex) {
            this.__selectionIndex = this.__caretIndex;
            this.__dirty = true;
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
        },
        this_onKeyDown: function (a) {
          if (this.get_selectable() && this.get_type() != 1 && a.keyCode == 67 && (a.commandKey || a.ctrlKey)) {
            if (this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
              yc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
            }
          }
        },
        this_onMouseDown: function (a) {
          if (this.get_selectable() || this.get_type() == 1) {
            this.__lineSelection = a.clickCount == 3;
            this.__wordSelection = a.clickCount == 2;
            if (this.__lineSelection) {
              var b = this.__caretIndex;
              this.__caretIndex = this.__getPositionByIdentifier(a.stageX + this.get_scrollH(), a.stageY, true);
              this.__selectionIndex = this.__getOppositeIdentifierBound(b, true);
            } else if (this.__wordSelection) {
              b = this.__caretIndex;
              this.__caretIndex = this.__getPositionByIdentifier(a.stageX + this.get_scrollH(), a.stageY, false);
              this.__selectionIndex = this.__getOppositeIdentifierBound(b, false);
              this.__specialSelectionInitialIndex = b;
            } else {
              this.__selectionIndex = this.__caretIndex = this.__getPosition(this.get_mouseX() + this.get_scrollH(), this.get_mouseY());
            }
            this.setSelection(this.__caretIndex, this.__selectionIndex);
            this.__updateLayout();
            if (!Ba.__supportDOM) {
              this.__dirty = true;
              if (!this.__renderDirty) {
                this.__renderDirty = true;
                this.__setParentRenderDirty();
              }
            }
            if (this.stage != null) {
              this.stage.addEventListener("enterFrame", n(this, this.this_onEnterFrame));
              this.stage.addEventListener("mouseMove", n(this, this.stage_onMouseMove));
              this.stage.addEventListener("mouseUp", n(this, this.stage_onMouseUp));
            }
          }
        },
        this_onMouseWheel: function (a) {
          if (this.get_mouseWheelEnabled()) {
            this.set_scrollV(Math.min(this.get_scrollV() - a.delta, this.get_maxScrollV()) | 0);
          }
        },
        window_onKeyDown: function (a, b) {
          switch (a) {
            case 8:
              if (this.__selectionIndex == this.__caretIndex && this.__caretIndex > 0) {
                this.__selectionIndex = this.__caretIndex - 1;
              }
              if (this.__selectionIndex != this.__caretIndex) {
                this.replaceSelectedText("");
                this.__selectionIndex = this.__caretIndex;
                this.dispatchEvent(new za("change", true));
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
              break;
            case 97:
              if (this.get_selectable() && (Cb.get_metaKey(b) || Cb.get_ctrlKey(b))) {
                this.setSelection(0, this.__text.length);
              }
              break;
            case 99:
              if (Cb.get_metaKey(b) || Cb.get_ctrlKey(b)) {
                if (this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
                  yc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                }
              }
              break;
            case 120:
              if ((!!Cb.get_metaKey(b) || !!Cb.get_ctrlKey(b)) && this.__caretIndex != this.__selectionIndex && !this.get_displayAsPassword()) {
                yc.set_text(this.__text.substring(this.__caretIndex, this.__selectionIndex));
                this.replaceSelectedText("");
                this.dispatchEvent(new za("change", true));
              }
              break;
            case 127:
              if (this.__selectionIndex == this.__caretIndex && this.__caretIndex < this.__text.length) {
                this.__selectionIndex = this.__caretIndex + 1;
              }
              if (this.__selectionIndex != this.__caretIndex) {
                this.replaceSelectedText("");
                this.__selectionIndex = this.__caretIndex;
                this.dispatchEvent(new za("change", true));
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
              break;
            case 1073741898:
              if (this.get_selectable()) {
                if (Cb.get_metaKey(b) || Cb.get_ctrlKey(b)) {
                  this.__caretIndex = 0;
                } else {
                  this.__caretBeginningOfLine();
                }
                if (!Cb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741901:
              if (this.get_selectable()) {
                if (Cb.get_metaKey(b) || Cb.get_ctrlKey(b)) {
                  this.__caretIndex = this.__text.length;
                } else {
                  this.__caretEndOfLine();
                }
                if (!Cb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741903:
              if (this.get_selectable()) {
                if (Cb.get_metaKey(b) || Cb.get_ctrlKey(b)) {
                  this.__caretBeginningOfNextLine();
                } else {
                  this.__caretNextCharacter();
                }
                if (!Cb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741904:
              if (this.get_selectable()) {
                if (Cb.get_metaKey(b) || Cb.get_ctrlKey(b)) {
                  this.__caretBeginningOfPreviousLine();
                } else {
                  this.__caretPreviousCharacter();
                }
                if (!Cb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741905:
              if (this.get_selectable()) {
                if (Cb.get_metaKey(b) || Cb.get_ctrlKey(b)) {
                  this.__caretIndex = this.__text.length;
                } else {
                  this.__caretNextLine();
                }
                if (!Cb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 1073741906:
              if (this.get_selectable()) {
                if (Cb.get_metaKey(b) || Cb.get_ctrlKey(b)) {
                  this.__caretIndex = 0;
                } else {
                  this.__caretPreviousLine();
                }
                if (!Cb.get_shiftKey(b)) {
                  this.__selectionIndex = this.__caretIndex;
                }
                this.setSelection(this.__selectionIndex, this.__caretIndex);
              }
              break;
            case 13:
            case 1073741912:
              if (this.__textEngine.multiline) {
                a = new Uf("textInput", true, true, "\n");
                this.dispatchEvent(a);
                if (!a.isDefaultPrevented()) {
                  this.__replaceSelectedText("\n", true);
                  this.dispatchEvent(new za("change", true));
                }
              } else {
                this.__stopCursorTimer();
                this.__startCursorTimer();
              }
          }
        },
        window_onTextInput: function (a) {
          this.__replaceSelectedText(a, true);
          this.dispatchEvent(new za("change", true));
        },
        __class__: Sc,
        __properties__: q(Da.prototype.__properties__, {
          set_textColor: "set_textColor",
          set_sharpness: "set_sharpness",
          set_autoSize: "set_autoSize",
          set_wordWrap: "set_wordWrap",
          get_wordWrap: "get_wordWrap",
          get_type: "get_type",
          get_textWidth: "get_textWidth",
          get_textHeight: "get_textHeight",
          set_text: "set_text",
          get_text: "get_text",
          set_selectable: "set_selectable",
          get_selectable: "get_selectable",
          set_scrollV: "set_scrollV",
          get_scrollV: "get_scrollV",
          set_scrollH: "set_scrollH",
          get_scrollH: "get_scrollH",
          get_numLines: "get_numLines",
          set_multiline: "set_multiline",
          get_multiline: "get_multiline",
          get_mouseWheelEnabled: "get_mouseWheelEnabled",
          get_maxScrollV: "get_maxScrollV",
          get_maxScrollH: "get_maxScrollH",
          set_htmlText: "set_htmlText",
          get_htmlText: "get_htmlText",
          set_embedFonts: "set_embedFonts",
          get_embedFonts: "get_embedFonts",
          set_displayAsPassword: "set_displayAsPassword",
          get_displayAsPassword: "get_displayAsPassword",
          set_defaultTextFormat: "set_defaultTextFormat",
          get_defaultTextFormat: "get_defaultTextFormat",
          get_caretIndex: "get_caretIndex",
          get_bottomScrollV: "get_bottomScrollV"
        })
      });
      function qk(a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 10;
        }
        if (a == null) {
          a = 10;
        }
        this.deltaTimeout = 0;
        Sc.call(this);
        this.set_x(a);
        this.set_y(b);
        this.currentFPS = 0;
        this.set_selectable(false);
        this.mouseEnabled = false;
        this.set_defaultTextFormat(new ld("_sans", 14, c));
        this.set_autoSize(1);
        this.set_multiline(true);
        this.set_text("FPS: ");
        this.times = [];
      }
      h["debug.FPSCounter"] = qk;
      qk.__name__ = "debug.FPSCounter";
      qk.__super__ = Sc;
      qk.prototype = q(Sc.prototype, {
        __enterFrame: function (a) {
          if (this.deltaTimeout > 1000) {
            this.deltaTimeout = 0;
          } else {
            var b = new Date().getTime() / 1000 * 1000;
            for (this.times.push(b); this.times[0] < b - 1000;) {
              this.times.shift();
            }
            this.currentFPS = this.times.length < g.updateFramerate ? this.times.length : g.updateFramerate;
            this.updateText();
            this.deltaTimeout += a;
          }
        },
        updateText: function () {
          this.set_text("FPS: " + this.currentFPS + ("\nMemory: " + Xb.formatBytes(mc.toFloat(wa.__cast(Zi.get_totalMemory(), Ck)))));
          this.set_textColor(-1);
          if (this.currentFPS < g.drawFramerate * 0.5) {
            this.set_textColor(-65536);
          }
        },
        __class__: qk
      });
      function Dk() {}
      h["flixel.IFlxBasic"] = Dk;
      Dk.__name__ = "flixel.IFlxBasic";
      Dk.__isInterface__ = true;
      Dk.prototype = {
        __class__: Dk,
        __properties__: {
          set_visible: "set_visible",
          set_active: "set_active"
        }
      };
      var wf = w["flixel.FlxCameraFollowStyle"] = {
        __ename__: "flixel.FlxCameraFollowStyle",
        __constructs__: null,
        LOCKON: {
          _hx_name: "LOCKON",
          _hx_index: 0,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        PLATFORMER: {
          _hx_name: "PLATFORMER",
          _hx_index: 1,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        TOPDOWN: {
          _hx_name: "TOPDOWN",
          _hx_index: 2,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        TOPDOWN_TIGHT: {
          _hx_name: "TOPDOWN_TIGHT",
          _hx_index: 3,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        SCREEN_BY_SCREEN: {
          _hx_name: "SCREEN_BY_SCREEN",
          _hx_index: 4,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        },
        NO_DEAD_ZONE: {
          _hx_name: "NO_DEAD_ZONE",
          _hx_index: 5,
          __enum__: "flixel.FlxCameraFollowStyle",
          toString: p
        }
      };
      wf.__constructs__ = [wf.LOCKON, wf.PLATFORMER, wf.TOPDOWN, wf.TOPDOWN_TIGHT, wf.SCREEN_BY_SCREEN, wf.NO_DEAD_ZONE];
      function $i(a, b, c) {
        this.major = a;
        this.minor = b;
        this.patch = c;
      }
      h["flixel.system.FlxVersion"] = $i;
      $i.__name__ = "flixel.system.FlxVersion";
      $i.prototype = {
        toString: function () {
          var a = $i.sha;
          if (a != "") {
            a = "@" + a.substring(0, 7);
          }
          return "HaxeFlixel " + this.major + "." + this.minor + "." + this.patch + a;
        },
        __class__: $i
      };
      function on() {
        this._lastUniqueKeyIndex = 0;
        this.reset();
      }
      h["flixel.system.frontEnds.BitmapFrontEnd"] = on;
      on.__name__ = "flixel.system.frontEnds.BitmapFrontEnd";
      on.prototype = {
        onAssetsReload: function (a) {
          a = Object.keys(this._cache.h);
          for (var b = a.length, c = 0; c < b;) {
            var d = a[c++];
            d = this._cache.h[d];
            if (d != null && (d.assetsClass != null || d.assetsKey != null)) {
              d.onAssetsReload();
            }
          }
        },
        onContext: function () {
          var a = Object.keys(this._cache.h);
          for (var b = a.length, c = 0; c < b;) {
            var d = a[c++];
            d = this._cache.h[d];
            if (d != null && d.isDumped) {
              d.onContext();
            }
          }
        },
        create: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          return cc.fromRectangle(a, b, c, d, e);
        },
        add: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (a instanceof cc) {
            return cc.fromGraphic(a, b, c);
          } else if (a instanceof N) {
            return cc.fromBitmapData(a, b, c);
          } else {
            return cc.fromAssetKey(y.string(a), b, c);
          }
        },
        findKeyForBitmap: function (a) {
          var b = Object.keys(this._cache.h);
          for (var c = b.length, d = 0; d < c;) {
            var e = b[d++];
            var f = this._cache.h[e];
            if (f != null && f.bitmap == a) {
              return e;
            }
          }
          return null;
        },
        generateKey: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = a;
          }
          if (c || b == null) {
            b = this.getUniqueKey(b);
          }
          return b;
        },
        getUniqueKey: function (a) {
          if (a == null) {
            a = "pixels";
          }
          if (this._cache.h[a] == null) {
            return a;
          }
          var b = this._lastUniqueKeyIndex;
          do {
            ++b;
            var c = a + b;
          } while (this._cache.h[c] != null);
          this._lastUniqueKeyIndex = b;
          return c;
        },
        remove: function (a) {
          if (a != null) {
            var b = a.key;
            if (b != null) {
              U.cache.removeBitmapData(b);
              var c = this._cache;
              if (Object.prototype.hasOwnProperty.call(c.h, b)) {
                delete c.h[b];
              }
            }
            if (a.shader != null) {
              a.destroy();
            }
          }
        },
        removeByKey: function (a) {
          if (a != null) {
            var b = this._cache.h[a];
            if (a != null) {
              U.cache.removeBitmapData(a);
              var c = this._cache;
              if (Object.prototype.hasOwnProperty.call(c.h, a)) {
                delete c.h[a];
              }
            }
            if (b != null) {
              b.destroy();
            }
          }
        },
        removeIfNoUse: function (a) {
          if (a != null && a.useCount == 0 && !a.persist) {
            this.remove(a);
          }
        },
        clearCache: function () {
          if (this._cache == null) {
            this._cache = new xa();
          } else {
            var a = Object.keys(this._cache.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._cache.h[d];
              if (e != null && !e.persist && e.useCount <= 0) {
                if (d != null) {
                  U.cache.removeBitmapData(d);
                  var f = this._cache;
                  if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                    delete f.h[d];
                  }
                }
                e.destroy();
              }
            }
          }
        },
        reset: function () {
          if (this._cache == null) {
            this._cache = new xa();
          } else {
            var a = Object.keys(this._cache.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._cache.h[d];
              if (d != null) {
                U.cache.removeBitmapData(d);
                var f = this._cache;
                if (Object.prototype.hasOwnProperty.call(f.h, d)) {
                  delete f.h[d];
                }
              }
              if (e != null) {
                e.destroy();
              }
            }
          }
        },
        __class__: on
      };
      function pn() {
        this.useBufferLocking = false;
        this.cameraResized = new vf();
        this.cameraRemoved = new vf();
        this.cameraAdded = new vf();
        this.defaults = [];
        this.list = [];
        Pb._defaultCameras = this.defaults;
      }
      h["flixel.system.frontEnds.CameraFrontEnd"] = pn;
      pn.__name__ = "flixel.system.frontEnds.CameraFrontEnd";
      pn.prototype = {
        add: function (a, b) {
          if (b == null) {
            b = true;
          }
          g.game.addChildAt(a.flashSprite, g.game.getChildIndex(g.game._inputContainer));
          this.list.push(a);
          if (b) {
            this.defaults.push(a);
          }
          a.ID = this.list.length - 1;
          this.cameraAdded.dispatch(a);
          return a;
        },
        remove: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.list.indexOf(a);
          if (a != null && c != -1) {
            g.game.removeChild(a.flashSprite);
            this.list.splice(c, 1);
            L.remove(this.defaults, a);
            if (g.renderTile) {
              c = 0;
              for (var d = this.list.length; c < d;) {
                var e = c++;
                this.list[e].ID = e;
              }
            }
            if (b) {
              a.destroy();
            }
            this.cameraRemoved.dispatch(a);
          } else {
            g.log.advanced("FlxG.cameras.remove(): The camera you attempted to remove is not a part of the game.", Aa.WARNING, true);
          }
        },
        setDefaultDrawTarget: function (a, b) {
          if (this.list.indexOf(a) == -1) {
            g.log.advanced("FlxG.cameras.setDefaultDrawTarget(): The specified camera is not a part of the game.", Aa.WARNING, true);
          } else {
            var c = this.defaults.indexOf(a);
            if (b && c == -1) {
              this.defaults.push(a);
            } else if (!b) {
              this.defaults.splice(c, 1);
            }
          }
        },
        reset: function (a) {
          while (this.list.length > 0) {
            this.remove(this.list[0]);
          }
          if (a == null) {
            a = new Pb(0, 0, g.width, g.height);
          }
          g.camera = this.add(a);
          a.ID = 0;
          Pb._defaultCameras = this.defaults;
        },
        resize: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.onResize();
          }
        },
        get_bgColor: function () {
          if (g.camera == null) {
            return -16777216;
          } else {
            return g.camera.bgColor;
          }
        },
        set_bgColor: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            d.bgColor = a;
          }
          return a;
        },
        __class__: pn,
        __properties__: {
          set_bgColor: "set_bgColor",
          get_bgColor: "get_bgColor"
        }
      };
      function qn() {
        this.visible = false;
        this.visibilityChanged = new Ud();
        this.precision = 3;
      }
      h["flixel.system.frontEnds.DebuggerFrontEnd"] = qn;
      qn.__name__ = "flixel.system.frontEnds.DebuggerFrontEnd";
      qn.prototype = {
        __class__: qn
      };
      function rn() {
        this.resetOnStateSwitch = true;
        this.list = [];
      }
      h["flixel.system.frontEnds.InputFrontEnd"] = rn;
      rn.__name__ = "flixel.system.frontEnds.InputFrontEnd";
      rn.prototype = {
        add_flixel_input_gamepad_FlxGamepadManager: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Xb.getClassName(a, true) == Xb.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        add_flixel_input_touch_FlxTouchManager: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Xb.getClassName(a, true) == Xb.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        replace_flixel_input_mouse_FlxMouse: function (a, b) {
          var c = 0;
          var d = false;
          for (var e = 0, f = this.list; e < f.length;) {
            var k = f[e];
            ++e;
            if (k == a) {
              this.list[c] = b;
              d = true;
              break;
            }
            ++c;
          }
          if (d) {
            return b;
          } else {
            return null;
          }
        },
        add_flixel_input_mouse_FlxMouse: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Xb.getClassName(a, true) == Xb.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        add_flixel_input_keyboard_FlxKeyboard: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            if (Xb.getClassName(a, true) == Xb.getClassName(d, true)) {
              return a;
            }
          }
          this.list.push(a);
          return a;
        },
        reset: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.reset();
          }
        },
        onStateSwitch: function () {
          if (this.resetOnStateSwitch) {
            this.reset();
          }
        },
        __class__: rn
      };
      function sn() {
        this._standardTraceFunction = Ab.trace;
      }
      h["flixel.system.frontEnds.LogFrontEnd"] = sn;
      sn.__name__ = "flixel.system.frontEnds.LogFrontEnd";
      sn.prototype = {
        advanced: function (a, b, c) {
          if (b == null) {
            b = Aa.NORMAL;
          }
          if (!(a instanceof Array)) {
            a = [a];
          }
          if (b.throwException) {
            throw I.thrown(b.toLogString(a));
          }
        },
        __class__: sn
      };
      function Ab() {}
      h["haxe.Log"] = Ab;
      Ab.__name__ = "haxe.Log";
      Ab.formatOutput = function (a, b) {
        var c = y.string(a);
        if (b == null) {
          return c;
        }
        var d = b.fileName + ":" + b.lineNumber;
        if (b.customParams != null) {
          var e = 0;
          for (b = b.customParams; e < b.length;) {
            a = b[e];
            ++e;
            c += ", " + y.string(a);
          }
        }
        return d + ": " + c;
      };
      Ab.trace = function (a, b) {
        a = Ab.formatOutput(a, b);
        if (typeof console != "undefined" && console.log != null) {
          console.log(a);
        }
      };
      function wa() {}
      h["js.Boot"] = wa;
      wa.__name__ = "js.Boot";
      wa.getClass = function (a) {
        if (a == null) {
          return null;
        }
        if (a instanceof Array) {
          return Array;
        }
        var b = a.__class__;
        if (b != null) {
          return b;
        }
        a = wa.__nativeClassName(a);
        if (a != null) {
          return wa.__resolveNativeClass(a);
        } else {
          return null;
        }
      };
      wa.__string_rec = function (a, b) {
        if (a == null) {
          return "null";
        }
        if (b.length >= 5) {
          return "<...>";
        }
        var c = typeof a;
        if (c == "function" && (a.__name__ || a.__ename__)) {
          c = "object";
        }
        switch (c) {
          case "function":
            return "<function>";
          case "object":
            if (a.__enum__) {
              var d = w[a.__enum__].__constructs__[a._hx_index];
              c = d._hx_name;
              if (d.__params__) {
                b += "\t";
                var e = [];
                var f = 0;
                for (d = d.__params__; f < d.length;) {
                  var k = d[f];
                  f += 1;
                  e.push(wa.__string_rec(a[k], b));
                }
                return c + "(" + e.join(",") + ")";
              }
              return c;
            }
            if (a instanceof Array) {
              c = "[";
              b += "\t";
              e = 0;
              for (f = a.length; e < f;) {
                d = e++;
                c += (d > 0 ? "," : "") + wa.__string_rec(a[d], b);
              }
              return c + "]";
            }
            try {
              e = a.toString;
            } catch (t) {
              Oa.lastError = t;
              return "???";
            }
            if (e != null && e != Object.toString && typeof e == "function" && (c = a.toString(), c != "[object Object]")) {
              return c;
            }
            c = "{\n";
            b += "\t";
            e = a.hasOwnProperty != null;
            f = null;
            for (f in a) {
              if ((!e || !!a.hasOwnProperty(f)) && f != "prototype" && f != "__class__" && f != "__super__" && f != "__interfaces__" && f != "__properties__") {
                if (c.length != 2) {
                  c += ", \n";
                }
                c += b + f + " : " + wa.__string_rec(a[f], b);
              }
            }
            b = b.substring(1);
            return c + ("\n" + b + "}");
          case "string":
            return a;
          default:
            return String(a);
        }
      };
      wa.__interfLoop = function (a, b) {
        if (a == null) {
          return false;
        }
        if (a == b) {
          return true;
        }
        var c = a.__interfaces__;
        if (c != null) {
          for (var d = 0, e = c.length; d < e;) {
            var f = d++;
            f = c[f];
            if (f == b || wa.__interfLoop(f, b)) {
              return true;
            }
          }
        }
        return wa.__interfLoop(a.__super__, b);
      };
      wa.__instanceof = function (a, b) {
        if (b == null) {
          return false;
        }
        switch (b) {
          case Array:
            return a instanceof Array;
          case Hp:
            return typeof a == "boolean";
          case Ip:
            return a != null;
          case tp:
            return typeof a == "number";
          case Ck:
            if (typeof a == "number") {
              return (a | 0) === a;
            } else {
              return false;
            }
          case String:
            return typeof a == "string";
          default:
            if (a != null) {
              if (typeof b == "function") {
                if (wa.__downcastCheck(a, b)) {
                  return true;
                }
              } else if (typeof b == "object" && wa.__isNativeObj(b) && a instanceof b) {
                return true;
              }
            } else {
              return false;
            }
            if (b == aj && a.__name__ != null || b == yp && a.__ename__ != null) {
              return true;
            } else if (a.__enum__ != null) {
              return w[a.__enum__] == b;
            } else {
              return false;
            }
        }
      };
      wa.__downcastCheck = function (a, b) {
        if (a instanceof b) {
          return true;
        } else if (b.__isInterface__) {
          return wa.__interfLoop(wa.getClass(a), b);
        } else {
          return false;
        }
      };
      wa.__implements = function (a, b) {
        return wa.__interfLoop(wa.getClass(a), b);
      };
      wa.__cast = function (a, b) {
        if (a == null || wa.__instanceof(a, b)) {
          return a;
        }
        throw I.thrown("Cannot cast " + y.string(a) + " to " + y.string(b));
      };
      wa.__nativeClassName = function (a) {
        a = wa.__toStr.call(a).slice(8, -1);
        if (a == "Object" || a == "Function" || a == "Math" || a == "JSON") {
          return null;
        } else {
          return a;
        }
      };
      wa.__isNativeObj = function (a) {
        return wa.__nativeClassName(a) != null;
      };
      wa.__resolveNativeClass = function (a) {
        return F[a];
      };
      function tn(a) {
        this.initialSeed = this.internalSeed = 1;
        if (a != null) {
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
        } else {
          a = Math.random() * 2147483647 | 0;
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
          a = a < 1 ? 1 : a;
          a = (a > 2147483646 ? 2147483646 : a) | 0;
        }
        a = a < 1 ? 1 : a;
        this.initialSeed = (this.internalSeed = (a > 2147483646 ? 2147483646 : a) | 0) | 0;
      }
      h["flixel.math.FlxRandom"] = tn;
      tn.__name__ = "flixel.math.FlxRandom";
      tn.prototype = {
        int: function (a, b, c) {
          if (b == null) {
            b = 2147483647;
          }
          if (a == null) {
            a = 0;
          }
          if (a == 0 && b == 2147483647 && c == null) {
            return (this.internalSeed = this.internalSeed * 48271 % 2147483647) | 0;
          }
          if (a == b) {
            return a;
          }
          if (a > b) {
            a += b;
            b = a - b;
            a -= b;
          }
          if (c == null) {
            return Math.floor(a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a + 1));
          }
          do {
            var d = Math.floor(a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a + 1));
          } while (c.indexOf(d) >= 0);
          return d;
        },
        float: function (a, b, c) {
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = 0;
          }
          if (a == 0 && b == 1 && c == null) {
            return (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647;
          }
          if (a == b) {
            var d = a;
          } else {
            if (a > b) {
              a += b;
              b = a - b;
              a -= b;
            }
            if (c == null) {
              d = a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a);
            } else {
              do {
                d = a + (this.internalSeed = this.internalSeed * 48271 % 2147483647) / 2147483647 * (b - a);
              } while (c.indexOf(d) >= 0);
            }
          }
          return d;
        },
        __class__: tn
      };
      function Jd() {
        this.status = rh.EMPTY;
      }
      h["flixel.util.FlxSave"] = Jd;
      Jd.__name__ = "flixel.util.FlxSave";
      Jd.__interfaces__ = [ub];
      Jd.validate = function (a) {
        return a;
      };
      Jd.validateAndWarn = function (a, b) {
        return Jd.validate(a);
      };
      Jd.prototype = {
        destroy: function () {
          this._sharedObject = null;
          this.status = rh.EMPTY;
          this.data = null;
        },
        bind: function (a, b) {
          this.destroy();
          a = Jd.validateAndWarn(a, "name");
          if (b != null) {
            b = Jd.validateAndWarn(b, "path");
          }
          try {
            this._sharedObject = cd.getLocal(a, b);
            this.status = rh.BOUND(a, b);
          } catch (d) {
            var c = I.caught(d);
            if (c instanceof Sb) {
              g.log.advanced("Error:" + c.get_message() + " name:\"" + a + "\", path:\"" + b + "\".", Aa.ERROR, true);
              this.destroy();
              return false;
            }
            throw d;
          }
          this.data = this._sharedObject.data;
          return true;
        },
        mergeDataFrom: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = false;
          }
          if (!this.checkStatus()) {
            return false;
          }
          var f = new Jd();
          if (f.bind(a, b)) {
            a = this.mergeData(f.data, c, e);
            if (d) {
              f.erase();
            }
            f.destroy();
            return a;
          }
          f.destroy();
          return false;
        },
        mergeData: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          var d = false;
          for (var e = 0, f = ha.fields(a); e < f.length;) {
            var k = f[e];
            ++e;
            d = true;
            if (b || !Object.prototype.hasOwnProperty.call(this.data, k)) {
              this.data[k] = ha.field(a, k);
            }
          }
          if (d) {
            return this.flush(c);
          } else {
            return true;
          }
        },
        flush: function (a) {
          if (a == null) {
            a = 0;
          }
          if (!this.checkStatus()) {
            return false;
          }
          try {
            if (this._sharedObject.flush(a) != 0) {
              this.status = rh.ERROR("FlxSave is requesting extra storage space.");
            }
          } catch (b) {
            if (I.caught(b) instanceof Sb) {
              this.status = rh.ERROR("There was an problem flushing the save data.");
            } else {
              throw b;
            }
          }
          this.checkStatus();
          if (this.status._hx_index == 1) {
            return true;
          } else {
            return false;
          }
        },
        erase: function () {
          if (!this.checkStatus()) {
            return false;
          }
          this._sharedObject.clear();
          this.data = {};
          return true;
        },
        checkStatus: function () {
          var a = this.status;
          switch (a._hx_index) {
            case 0:
              g.log.advanced("You must call FlxSave.bind() before you can read or write data.", Aa.WARNING, true);
              break;
            case 2:
              g.log.advanced(a.msg, Aa.ERROR, true);
              break;
            default:
              return true;
          }
          return false;
        },
        isEmpty: function () {
          if (this.data != null) {
            return ha.fields(this.data).length == 0;
          } else {
            return true;
          }
        },
        __class__: Jd
      };
      function bj() {
        this.verticalAlign = un.CENTER;
        this.horizontalAlign = vn.CENTER;
        var a = 0;
        var b = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        this.deviceSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        this.gameSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        this.scale = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        this.offset = a;
      }
      h["flixel.system.scaleModes.BaseScaleMode"] = bj;
      bj.__name__ = "flixel.system.scaleModes.BaseScaleMode";
      bj.prototype = {
        onMeasure: function (a, b) {
          g.width = g.initialWidth;
          g.height = g.initialHeight;
          this.updateGameSize(a, b);
          this.updateDeviceSize(a, b);
          this.updateScaleOffset();
          this.updateGamePosition();
        },
        updateGameSize: function (a, b) {
          var c = this.gameSize;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
        },
        updateDeviceSize: function (a, b) {
          var c = this.deviceSize;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
        },
        updateScaleOffset: function () {
          this.scale.set_x(this.gameSize.x / g.width);
          this.scale.set_y(this.gameSize.y / g.height);
          this.updateOffsetX();
          this.updateOffsetY();
        },
        updateOffsetX: function () {
          var a = this.offset;
          switch (this.horizontalAlign._hx_index) {
            case 0:
              var b = 0;
              break;
            case 1:
              b = Math.ceil((this.deviceSize.x - this.gameSize.x) * 0.5);
              break;
            case 2:
              b = this.deviceSize.x - this.gameSize.x;
          }
          a.set_x(b);
        },
        updateOffsetY: function () {
          var a = this.offset;
          switch (this.verticalAlign._hx_index) {
            case 0:
              var b = 0;
              break;
            case 1:
              b = Math.ceil((this.deviceSize.y - this.gameSize.y) * 0.5);
              break;
            case 2:
              b = this.deviceSize.y - this.gameSize.y;
          }
          a.set_y(b);
        },
        updateGamePosition: function () {
          if (g.game != null) {
            g.game.set_x(this.offset.x);
            g.game.set_y(this.offset.y);
          }
        },
        __class__: bj
      };
      function Ek(a) {
        if (a == null) {
          a = false;
        }
        bj.call(this);
        this.fillScreen = a;
      }
      h["flixel.system.scaleModes.RatioScaleMode"] = Ek;
      Ek.__name__ = "flixel.system.scaleModes.RatioScaleMode";
      Ek.__super__ = bj;
      Ek.prototype = q(bj.prototype, {
        updateGameSize: function (a, b) {
          var c = g.width / g.height;
          var d = a / b < c;
          if (this.fillScreen) {
            d = !d;
          }
          if (d) {
            this.gameSize.set_x(a);
            this.gameSize.set_y(Math.floor(this.gameSize.x / c));
          } else {
            this.gameSize.set_y(b);
            this.gameSize.set_x(Math.floor(this.gameSize.y * c));
          }
        },
        __class__: Ek
      });
      function wn() {
        this.focusLost = new Ud();
        this.focusGained = new Ud();
        this.postDraw = new Ud();
        this.preDraw = new Ud();
        this.postUpdate = new Ud();
        this.preUpdate = new Ud();
        this.postGameStart = new Ud();
        this.preGameStart = new Ud();
        this.postGameReset = new Ud();
        this.preGameReset = new Ud();
        this.gameResized = new Fk();
        this.preStateCreate = new vf();
        this.postStateSwitch = new Ud();
        this.preStateSwitch = new Ud();
      }
      h["flixel.system.frontEnds.SignalFrontEnd"] = wn;
      wn.__name__ = "flixel.system.frontEnds.SignalFrontEnd";
      wn.prototype = {
        __class__: wn
      };
      function g() {}
      h["flixel.FlxG"] = g;
      g.__name__ = "flixel.FlxG";
      g.__properties__ = {
        set_mouse: "set_mouse",
        set_fullscreen: "set_fullscreen",
        get_fullscreen: "get_fullscreen",
        set_drawFramerate: "set_drawFramerate",
        set_updateFramerate: "set_updateFramerate"
      };
      g.canSwitchTo = function (a) {
        return g.game._state.switchTo(a);
      };
      g.addChildBelowMouse = function (a, b) {
        if (b == null) {
          b = 0;
        }
        var c = g.game.getChildIndex(g.game._inputContainer);
        var d = g.game.get_numChildren();
        c = jc.maxAdd(c, b, d);
        g.game.addChildAt(a, c);
        return a;
      };
      g.init = function (a, b, c) {
        if (b < 0) {
          b = -b;
        }
        if (c < 0) {
          c = -c;
        }
        g.game = a;
        g.width = b;
        g.height = c;
        g.initRenderMethod();
        g.initialWidth = b;
        g.initialHeight = c;
        b = ia.get_current().stage.stageWidth;
        c = ia.get_current().stage.stageHeight;
        g.scaleMode.onMeasure(b, c);
        g.keys = g.inputs.add_flixel_input_keyboard_FlxKeyboard(new Gk());
        g.set_mouse(g.inputs.add_flixel_input_mouse_FlxMouse(new kg(a._inputContainer)));
        g.touches = g.inputs.add_flixel_input_touch_FlxTouchManager(new Xh());
        g.gamepads = g.inputs.add_flixel_input_gamepad_FlxGamepadManager(new lg());
        g.accelerometer = new xn();
        g.initSave();
        g.plugins = new yn();
        g.vcr = new zn();
        g.sound = new An();
      };
      g.initRenderMethod = function () {
        g.renderMethod = Yh.BLITTING;
        switch (ia.get_current().stage.window.context.type) {
          case "opengl":
          case "opengles":
          case "webgl":
            var a = Yh.DRAW_TILES;
            break;
          default:
            a = Yh.BLITTING;
        }
        g.renderMethod = a;
        g.renderBlit = g.renderMethod == Yh.BLITTING;
        g.renderTile = g.renderMethod == Yh.DRAW_TILES;
        hc.defaultPixelPerfectPosition = g.renderBlit;
      };
      g.initSave = function () {
        if (g.save.status._hx_index != 1) {
          var a = ia.get_current().stage.application.meta.h.file;
          g.save.bind(Jd.validate(a));
          if (g.save.isEmpty()) {
            g.save.mergeDataFrom("flixel", null, false, false);
          }
        }
      };
      g.reset = function () {
        var a = g.random;
        var b = Math.random() * 2147483647 | 0;
        b = b < 1 ? 1 : b;
        b = (b > 2147483646 ? 2147483646 : b) | 0;
        b = b < 1 ? 1 : b;
        b = (b > 2147483646 ? 2147483646 : b) | 0;
        b = b < 1 ? 1 : b;
        a.initialSeed = (a.internalSeed = (b > 2147483646 ? 2147483646 : b) | 0) | 0;
        g.bitmap.reset();
        g.inputs.reset();
        g.sound.destroy(true);
        g.autoPause = true;
        g.fixedTimestep = true;
        g.timeScale = 1;
        g.animationTimeScale = 1;
        g.elapsed = 0;
        g.maxElapsed = 0.1;
        a = g.worldBounds;
        var c = b = -10;
        var d = g.width + 20;
        var e = g.height + 20;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        g.worldDivisions = 6;
      };
      g.set_mouse = function (a) {
        if (g.mouse == null) {
          g.mouse = g.inputs.add_flixel_input_mouse_FlxMouse(a);
          return g.mouse;
        }
        var b = g.mouse;
        var c = g.inputs.replace_flixel_input_mouse_FlxMouse(b, a);
        if (c != null) {
          g.mouse = c;
          b.destroy();
          return a;
        } else {
          return b;
        }
      };
      g.set_updateFramerate = function (a) {
        if (a < g.drawFramerate) {
          g.log.advanced("FlxG.framerate: the game's framerate shouldn't be smaller than the flash framerate, since it can stop your game from updating.", Aa.WARNING, true);
        }
        g.updateFramerate = a;
        g.game._stepMS = Math.abs(1000 / a);
        g.game._stepSeconds = g.game._stepMS / 1000;
        if (g.game._maxAccumulation < g.game._stepMS) {
          g.game._maxAccumulation = g.game._stepMS;
        }
        return a;
      };
      g.set_drawFramerate = function (a) {
        if (a > g.updateFramerate) {
          g.log.advanced("FlxG.drawFramerate: the update framerate shouldn't be smaller than the draw framerate, since it can stop your game from updating.", Aa.WARNING, true);
        }
        g.drawFramerate = Math.abs(a) | 0;
        if (g.game.stage != null) {
          g.game.stage.set_frameRate(g.drawFramerate);
        }
        g.game._maxAccumulation = 2000 / g.drawFramerate - 1;
        if (g.game._maxAccumulation < g.game._stepMS) {
          g.game._maxAccumulation = g.game._stepMS;
        }
        return a;
      };
      g.get_fullscreen = function () {
        if (ia.get_current().stage.get_displayState() != 0) {
          return ia.get_current().stage.get_displayState() == 1;
        } else {
          return true;
        }
      };
      g.set_fullscreen = function (a) {
        ia.get_current().stage.set_displayState(a ? 0 : 2);
        return a;
      };
      var Yh = w["flixel.FlxRenderMethod"] = {
        __ename__: "flixel.FlxRenderMethod",
        __constructs__: null,
        DRAW_TILES: {
          _hx_name: "DRAW_TILES",
          _hx_index: 0,
          __enum__: "flixel.FlxRenderMethod",
          toString: p
        },
        BLITTING: {
          _hx_name: "BLITTING",
          _hx_index: 1,
          __enum__: "flixel.FlxRenderMethod",
          toString: p
        }
      };
      Yh.__constructs__ = [Yh.DRAW_TILES, Yh.BLITTING];
      function pk(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 60;
        }
        if (d == null) {
          d = 60;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._skipSplash = this._resetGame = false;
        this._customSoundTray = Hk;
        this._lostFocus = false;
        this._total = this._startTime = 0;
        this._gameJustStarted = false;
        this.filtersEnabled = true;
        this.ticks = 0;
        this.focusLostFramerate = 10;
        Ra.call(this);
        this._inputContainer = new Ra();
        if (a == 0) {
          a = ia.get_current().stage.stageWidth;
        }
        if (b == 0) {
          b = ia.get_current().stage.stageHeight;
        }
        g.init(this, a, b);
        g.set_updateFramerate(d);
        g.set_drawFramerate(e);
        this._accumulator = this._stepMS;
        this._skipSplash = f;
        this._initialState = c == null ? fg.fromMaker(function () {
          return new nc();
        }) : xp.toNextState(c);
        this.addEventListener("addedToStage", n(this, this.create));
      }
      h["flixel.FlxGame"] = pk;
      pk.__name__ = "flixel.FlxGame";
      pk.__super__ = Ra;
      pk.prototype = q(Ra.prototype, {
        create: function (a) {
          if (this.stage != null) {
            this.removeEventListener("addedToStage", n(this, this.create));
            this._startTime = this.getTimer();
            this._total = this.getTimer() - this._startTime;
            this.stage.set_scaleMode(2);
            this.stage.align = 6;
            this.stage.set_frameRate(g.drawFramerate);
            this.addChild(this._inputContainer);
            this.soundTray = yb.createInstance(this._customSoundTray, []);
            this.addChild(this.soundTray);
            this.stage.addEventListener("deactivate", n(this, this.onFocusLost));
            this.stage.addEventListener("activate", n(this, this.onFocus));
            var b = this;
            g.signals.preGameReset.dispatch();
            if (this._skipSplash) {
              this._nextState = this._initialState;
              this._gameJustStarted = true;
            } else {
              this._nextState = fg.fromMaker(function () {
                return new cj(b._initialState);
              });
              this._skipSplash = true;
            }
            g.reset();
            g.signals.postGameReset.dispatch();
            this.switchState();
            if (g.updateFramerate < g.drawFramerate) {
              g.log.advanced("FlxG.updateFramerate: The update framerate shouldn't be smaller than the draw framerate, since it can slow down your game.", Aa.WARNING, true);
            }
            this.stage.addEventListener("enterFrame", n(this, this.onEnterFrame));
            this.stage.addEventListener("resize", n(this, this.onResize));
            this.resizeGame(ia.get_current().stage.stageWidth, ia.get_current().stage.stageHeight);
            U.addEventListener("change", (r = g.bitmap, n(r, r.onAssetsReload)));
          }
        },
        onFocus: function (a) {
          this._lostFocus = false;
          g.signals.focusGained.dispatch();
          this._state.onFocus();
          if (g.autoPause) {
            this.stage.set_frameRate(g.drawFramerate);
            g.sound.onFocus();
            a = 0;
            for (var b = g.inputs.list; a < b.length;) {
              var c = b[a];
              ++a;
              c.onFocus();
            }
          }
        },
        onFocusLost: function (a) {
          this._lostFocus = true;
          g.signals.focusLost.dispatch();
          this._state.onFocusLost();
          if (g.autoPause) {
            this.stage.set_frameRate(this.focusLostFramerate);
            g.sound.onFocusLost();
            a = 0;
            for (var b = g.inputs.list; a < b.length;) {
              var c = b[a];
              ++a;
              c.onFocusLost();
            }
          }
        },
        onResize: function (a) {
          a = ia.get_current().stage.stageWidth;
          var b = ia.get_current().stage.stageHeight;
          if (g.renderTile) {
            g.bitmap.onContext();
          }
          this.resizeGame(a, b);
        },
        resizeGame: function (a, b) {
          g.scaleMode.onMeasure(a, b);
          this._state.onResize(a, b);
          g.cameras.resize();
          g.signals.gameResized.dispatch(a, b);
          if (this.soundTray != null) {
            this.soundTray.screenCenter();
          }
        },
        onEnterFrame: function (a) {
          this.ticks = this.getTimer() - this._startTime;
          this._elapsedMS = this.ticks - this._total;
          this._total = this.ticks;
          if (this.soundTray != null && this.soundTray.active) {
            this.soundTray.update(this._elapsedMS);
          }
          if (!this._lostFocus || !g.autoPause) {
            if (g.vcr.paused) {
              if (g.vcr.stepRequested) {
                g.vcr.stepRequested = false;
              } else if (this._nextState == null) {
                return;
              }
            }
            if (g.fixedTimestep) {
              this._accumulator += this._elapsedMS;
              this._accumulator = this._accumulator > this._maxAccumulation ? this._maxAccumulation : this._accumulator;
              while (this._accumulator >= this._stepMS) {
                this.step();
                this._accumulator -= this._stepMS;
              }
            } else {
              this.step();
            }
            this.draw();
          }
        },
        switchState: function () {
          g.cameras.reset();
          g.inputs.onStateSwitch();
          g.sound.destroy();
          g.signals.preStateSwitch.dispatch();
          if (this._state != null) {
            this._state.destroy();
          }
          g.bitmap.clearCache();
          this._state = fg.createInstance(this._nextState);
          this._state._constructor = this._nextState;
          this._nextState = null;
          if (this._gameJustStarted) {
            g.signals.preGameStart.dispatch();
          }
          g.signals.preStateCreate.dispatch(this._state);
          this._state.create();
          if (this._gameJustStarted) {
            this.gameStart();
          }
          g.signals.postStateSwitch.dispatch();
        },
        gameStart: function () {
          g.signals.postGameStart.dispatch();
          this._gameJustStarted = false;
        },
        step: function () {
          if (this._resetGame) {
            var a = this;
            g.signals.preGameReset.dispatch();
            if (this._skipSplash) {
              this._nextState = this._initialState;
              this._gameJustStarted = true;
            } else {
              this._nextState = fg.fromMaker(function () {
                return new cj(a._initialState);
              });
              this._skipSplash = true;
            }
            g.reset();
            g.signals.postGameReset.dispatch();
            this._resetGame = false;
          }
          this.handleReplayRequests();
          this.update();
        },
        handleReplayRequests: function () {},
        update: function () {
          if (this._state.active && this._state.exists) {
            if (this._nextState != null) {
              this.switchState();
            }
            this.updateElapsed();
            g.signals.preUpdate.dispatch();
            this.updateInput();
            g.sound.update(g.elapsed);
            var a = g.elapsed;
            for (var b = 0, c = g.plugins.list; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.exists && d.active) {
                d.update(a);
              }
            }
            this._state.tryUpdate(g.elapsed);
            a = g.elapsed;
            b = 0;
            for (c = g.cameras.list; b < c.length;) {
              d = c[b];
              ++b;
              if (d != null && d.exists && d.active) {
                d.update(a);
              }
            }
            g.signals.postUpdate.dispatch();
            for (a = g.swipes.length; a-- > 0;) {
              b = g.swipes.pop();
              if (b != null) {
                b.destroy();
              }
            }
            this.set_filters(this.filtersEnabled ? this._filters : null);
          }
        },
        updateElapsed: function () {
          if (g.fixedTimestep) {
            g.elapsed = g.timeScale * this._stepSeconds;
          } else {
            g.elapsed = this._elapsedMS / 1000 * g.timeScale;
            var a = g.maxElapsed * g.timeScale;
            if (g.elapsed > a) {
              g.elapsed = a;
            }
          }
        },
        updateInput: function () {
          for (var a = 0, b = g.inputs.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.update();
          }
        },
        draw: function () {
          if (this._state.visible && this._state.exists) {
            g.signals.preDraw.dispatch();
            if (g.renderTile) {
              Kd.drawCalls = 0;
            }
            var a = g.cameras;
            for (var b = 0, c = a.list; b < c.length;) {
              var d = c[b];
              ++b;
              if (d != null && d.exists && d.visible) {
                if (g.renderBlit) {
                  d.checkResize();
                  if (a.useBufferLocking) {
                    d.buffer.lock();
                  }
                }
                if (g.renderTile) {
                  d.clearDrawStack();
                  d.canvas.get_graphics().clear();
                }
                if (g.renderBlit) {
                  d.fill(d.bgColor, d.useBgAlphaBlending);
                  d.screen.dirty = true;
                } else {
                  d.fill(d.bgColor & 16777215, d.useBgAlphaBlending, (d.bgColor >> 24 & 255) / 255);
                }
              }
            }
            if (g.plugins.drawOnTop) {
              this._state.draw();
              b = 0;
              c = g.plugins.list;
              while (b < c.length) {
                a = c[b];
                ++b;
                if (a.exists && a.visible) {
                  a.draw();
                }
              }
            } else {
              b = 0;
              for (c = g.plugins.list; b < c.length;) {
                a = c[b];
                ++b;
                if (a.exists && a.visible) {
                  a.draw();
                }
              }
              this._state.draw();
            }
            if (g.renderTile && g.renderTile) {
              b = 0;
              c = g.cameras.list;
              while (b < c.length) {
                d = c[b];
                ++b;
                if (d != null && d.exists && d.visible) {
                  d.render();
                }
              }
            }
            a = g.cameras;
            b = 0;
            for (c = a.list; b < c.length;) {
              d = c[b];
              ++b;
              if (d != null && d.exists && d.visible) {
                d.drawFX();
                if (g.renderBlit) {
                  if (a.useBufferLocking) {
                    d.buffer.unlock();
                  }
                  d.screen.dirty = true;
                }
              }
            }
            g.signals.postDraw.dispatch();
          }
        },
        getTimer: function () {
          return ia.getTimer();
        },
        __class__: pk
      });
      function mg(a) {
        this._curPart = 0;
        nc.call(this);
        this.nextState = a;
      }
      h["flixel.system.FlxSplash"] = mg;
      mg.__name__ = "flixel.system.FlxSplash";
      mg.__super__ = nc;
      mg.prototype = q(nc.prototype, {
        create: function () {
          this._cachedBgColor = g.cameras.get_bgColor();
          g.cameras.set_bgColor(-16777216);
          this._cachedTimestep = g.fixedTimestep;
          g.fixedTimestep = false;
          this._cachedAutoPause = g.autoPause;
          g.autoPause = false;
          g.keys.enabled = false;
          this._times = [0.041, 0.184, 0.334, 0.495, 0.636];
          this._colors = [47394, 16761138, 16066382, 3555839, 314875];
          this._functions = [n(this, this.drawGreen), n(this, this.drawYellow), n(this, this.drawRed), n(this, this.drawBlue), n(this, this.drawLightBlue)];
          for (var a = 0, b = this._times; a < b.length;) {
            var c = b[a];
            ++a;
            new Gc().start(c, n(this, this.timerCallback));
          }
          a = ia.get_current().stage.stageWidth;
          b = ia.get_current().stage.stageHeight;
          this._sprite = new Ra();
          ia.get_current().stage.addChild(this._sprite);
          this._gfx = this._sprite.get_graphics();
          this._text = new Sc();
          this._text.set_selectable(false);
          this._text.set_embedFonts(true);
          c = new ld(Md.FONT_DEFAULT, 16, 16777215);
          c.align = 0;
          this._text.set_defaultTextFormat(c);
          this._text.set_text("HaxeFlixel");
          ia.get_current().stage.addChild(this._text);
          this.onResize(a, b);
          if (!mg.muted) {
            g.sound.load(Md.getSound("flixel/sounds/flixel")).play();
          }
        },
        destroy: function () {
          this._functions = this._colors = this._times = this._text = this._gfx = this._sprite = null;
          nc.prototype.destroy.call(this);
        },
        complete: function () {
          var a = this.nextState;
          var b = g.game._state;
          if (!(a instanceof nc) || !!g.canSwitchTo(a)) {
            g.game._state.startOutro(function () {
              if (g.game._state == b) {
                g.game._nextState = a;
              } else {
                g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Aa.WARNING, true);
              }
            });
          }
        },
        onResize: function (a, b) {
          nc.prototype.onResize.call(this, a, b);
          this._sprite.set_x(a / 2);
          this._sprite.set_y(b / 2 - g.game.get_scaleY() * 20);
          this._text.set_width(a / g.game.get_scaleX());
          this._text.set_x(0);
          this._text.set_y(this._sprite.get_y() + g.game.get_scaleY() * 80);
          this._sprite.set_scaleX(this._text.set_scaleX(g.game.get_scaleX()));
          this._sprite.set_scaleY(this._text.set_scaleY(g.game.get_scaleY()));
        },
        timerCallback: function (a) {
          var b = this;
          this._functions[this._curPart]();
          this._text.set_textColor(this._colors[this._curPart]);
          this._text.set_text("HaxeFlixel");
          this._curPart++;
          if (this._curPart == 5) {
            Ha.tween(this._sprite, {
              alpha: 0
            }, 3, {
              ease: X.quadOut,
              onComplete: function (a) {
                b.complete();
              }
            });
            Ha.tween(this._text, {
              alpha: 0
            }, 3, {
              ease: X.quadOut
            });
          }
        },
        drawGreen: function () {
          this._gfx.beginFill(47394);
          this._gfx.moveTo(0, -37);
          this._gfx.lineTo(1, -37);
          this._gfx.lineTo(37, 0);
          this._gfx.lineTo(37, 1);
          this._gfx.lineTo(1, 37);
          this._gfx.lineTo(0, 37);
          this._gfx.lineTo(-37, 1);
          this._gfx.lineTo(-37, 0);
          this._gfx.lineTo(0, -37);
          this._gfx.endFill();
        },
        drawYellow: function () {
          this._gfx.beginFill(16761138);
          this._gfx.moveTo(-50, -50);
          this._gfx.lineTo(-25, -50);
          this._gfx.lineTo(0, -37);
          this._gfx.lineTo(-37, 0);
          this._gfx.lineTo(-50, -25);
          this._gfx.lineTo(-50, -50);
          this._gfx.endFill();
        },
        drawRed: function () {
          this._gfx.beginFill(16066382);
          this._gfx.moveTo(50, -50);
          this._gfx.lineTo(25, -50);
          this._gfx.lineTo(1, -37);
          this._gfx.lineTo(37, 0);
          this._gfx.lineTo(50, -25);
          this._gfx.lineTo(50, -50);
          this._gfx.endFill();
        },
        drawBlue: function () {
          this._gfx.beginFill(3555839);
          this._gfx.moveTo(-50, 50);
          this._gfx.lineTo(-25, 50);
          this._gfx.lineTo(0, 37);
          this._gfx.lineTo(-37, 1);
          this._gfx.lineTo(-50, 25);
          this._gfx.lineTo(-50, 50);
          this._gfx.endFill();
        },
        drawLightBlue: function () {
          this._gfx.beginFill(314875);
          this._gfx.moveTo(50, 50);
          this._gfx.lineTo(25, 50);
          this._gfx.lineTo(1, 37);
          this._gfx.lineTo(37, 1);
          this._gfx.lineTo(50, 25);
          this._gfx.lineTo(50, 50);
          this._gfx.endFill();
        },
        startOutro: function (a) {
          g.cameras.set_bgColor(this._cachedBgColor);
          g.fixedTimestep = this._cachedTimestep;
          g.autoPause = this._cachedAutoPause;
          g.keys.enabled = true;
          ia.get_current().stage.removeChild(this._sprite);
          ia.get_current().stage.removeChild(this._text);
          nc.prototype.startOutro.call(this, a);
        },
        __class__: mg
      });
      function cj(a) {
        mg.call(this, a);
      }
      h["flixel._FlxGame.FlxIntroSplash"] = cj;
      cj.__name__ = "flixel._FlxGame.FlxIntroSplash";
      cj.__super__ = mg;
      cj.prototype = q(mg.prototype, {
        startOutro: function (a) {
          g.game._gameJustStarted = true;
          mg.prototype.startOutro.call(this, a);
        },
        __class__: cj
      });
      function dj() {}
      h["flixel.IFlxSprite"] = dj;
      dj.__name__ = "flixel.IFlxSprite";
      dj.__isInterface__ = true;
      dj.__interfaces__ = [Dk];
      dj.prototype = {
        __class__: dj,
        __properties__: {
          set_y: "set_y",
          set_x: "set_x"
        }
      };
      function Zh(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 17;
        }
        this._prevDrawParams = {
          graphicKey: null,
          tilesX: -1,
          tilesY: -1,
          scaleX: 0,
          scaleY: 0,
          spacingX: 0,
          spacingY: 0,
          repeatAxes: 17,
          angle: 0
        };
        this._blitGraphic = null;
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = da.pool.get().set(e, f);
        e._inPool = false;
        this._blitOffset = e;
        this.blitMode = Ik.AUTO;
        this.drawBlit = g.renderBlit;
        f = e = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = da.pool.get().set(e, f);
        e._inPool = false;
        this.spacing = e;
        this.repeatAxes = 17;
        G.call(this, 0, 0, a);
        this.repeatAxes = b;
        a = this.spacing;
        e = c;
        f = d;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        a.set_x(e);
        a.set_y(f);
      }
      h["flixel.addons.display.FlxBackdrop"] = Zh;
      Zh.__name__ = "flixel.addons.display.FlxBackdrop";
      Zh.__super__ = G;
      Zh.prototype = q(G.prototype, {
        destroy: function () {
          this.spacing = ca.destroy(this.spacing);
          this._blitOffset = ca.destroy(this._blitOffset);
          this._blitGraphic = ca.destroy(this._blitGraphic);
          G.prototype.destroy.call(this);
        },
        draw: function () {
          if (this.repeatAxes == 0) {
            G.prototype.draw.call(this);
          } else {
            this.checkEmptyFrame();
            if (this.alpha != 0 && this._frame.type != 2 && !(this.scale.x <= 0) && !(this.scale.y <= 0)) {
              if (this.dirty) {
                this.calcFrame(this.useFramePixels);
              }
              if (this.drawBlit) {
                this.drawToLargestCamera();
              }
              for (var a = this.getCamerasLegacy(), b = 0; b < a.length;) {
                var c = a[b];
                ++b;
                if (c.visible && c.exists && this.isOnScreen(c)) {
                  if (this.isSimpleRender(c)) {
                    this.drawSimple(c);
                  } else {
                    this.drawComplex(c);
                  }
                }
              }
            }
          }
        },
        isOnScreen: function (a) {
          if (this.repeatAxes == 17) {
            return true;
          }
          if (this.repeatAxes == 0) {
            return G.prototype.isOnScreen.call(this, a);
          }
          if (a == null) {
            a = g.camera;
          }
          var b = this.getScreenBounds(this._rect, a);
          var c = this.repeatAxes;
          if (c == 1 || c == 17) {
            b.x = a.viewMarginX;
          }
          c = this.repeatAxes;
          if (c == 16 || c == 17) {
            b.y = a.viewMarginY;
          }
          a = b.x + b.width > a.viewMarginX && b.x < a.width - a.viewMarginX && b.y + b.height > a.viewMarginY && b.y < a.height - a.viewMarginY;
          if (b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ia._pool.putUnsafe(b);
          }
          return a;
        },
        drawToLargestCamera: function () {
          var a = null;
          var b = 0;
          for (var c = this.getCamerasLegacy(), d = 0; d < c.length;) {
            var e = c[d];
            ++d;
            if (e.visible && e.exists && this.isOnScreen(e) && (e.width - e.viewMarginX * 2) * (e.height - e.viewMarginY * 2) > b) {
              a = e;
              b = (e.width - e.viewMarginX * 2) * (e.height - e.viewMarginY * 2);
            }
          }
          if (a != null) {
            this.regenGraphic(a);
          }
        },
        isSimpleRenderBlit: function (a) {
          if (this.repeatAxes == 0) {
            return G.prototype.isSimpleRenderBlit.call(this, a);
          } else if (G.prototype.isSimpleRenderBlit.call(this, a) || this.drawBlit) {
            if (a != null) {
              return this.isPixelPerfectRender(a);
            } else {
              return this.pixelPerfectRender;
            }
          } else {
            return false;
          }
        },
        drawSimple: function (a) {
          if (this.repeatAxes == 0) {
            G.prototype.drawSimple.call(this, a);
          } else {
            var b = !this.drawBlit;
            var c = this.drawBlit ? this._blitGraphic.get_imageFrame().get_frame() : this._frame;
            var d = c.frame.width;
            var e = c.frame.height;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            var f = d;
            var k = e;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            var t = da.pool.get().set(f, k);
            t._inPool = false;
            f = t;
            if (b) {
              t = this.spacing;
              d = t.x;
              e = t.y;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              f.set_x(f.x + d);
              f.set_y(f.y + e);
              e = t;
              if (e._weak) {
                e.put();
              }
            }
            var l = this.getScreenPosition(this._point, a);
            t = this.offset;
            d = t.x;
            e = t.y;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            l.set_x(l.x - d);
            l.set_y(l.y - e);
            e = t;
            if (e._weak) {
              e.put();
            }
            b = k = 1;
            if (this.repeatAxes != 0) {
              e = a.getViewMarginRect();
              l = this.repeatAxes;
              if (l == 1 || l == 17) {
                k = this.modMin(this._point.x + this.frameWidth, f.x, e.x) - this.frameWidth;
                d = this.modMax(this._point.x, f.x, e.x + e.width) + f.x;
                k = Math.round((d - k) / f.x);
                this._point.set_x(this.modMin(this._point.x + this.frameWidth, this.frameWidth + this.spacing.x, e.x) - this.frameWidth);
              }
              l = this.repeatAxes;
              if (l == 16 || l == 17) {
                b = this.modMin(this._point.y + this.frameHeight, f.y, e.y) - this.frameHeight;
                d = this.modMax(this._point.y, f.y, e.y + e.height) + f.y;
                b = Math.round((d - b) / f.y);
                this._point.set_y(this.modMin(this._point.y + this.frameHeight, this.frameHeight + this.spacing.y, e.y) - this.frameHeight);
              }
              if (!e._inPool) {
                e._inPool = true;
                e._weak = false;
                Ia._pool.putUnsafe(e);
              }
            }
            if (this.drawBlit) {
              l = this._point;
              t = this._blitOffset;
              d = t.x;
              e = t.y;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              l.set_x(l.x + d);
              l.set_y(l.y + e);
              e = t;
              if (e._weak) {
                e.put();
              }
            }
            if (g.renderBlit) {
              this.calcFrame(true);
            }
            a.buffer.lock();
            for (e = 0; e < k;) {
              d = e++;
              t = 0;
              l = b;
              while (t < l) {
                var J = t++;
                this._flashPoint.setTo(this._point.x + f.x * d, this._point.y + f.y * J);
                if (this.isPixelPerfectRender(a)) {
                  this._flashPoint.x = Math.floor(this._flashPoint.x);
                  this._flashPoint.y = Math.floor(this._flashPoint.y);
                }
                J = this.drawBlit ? this._blitGraphic.bitmap : this.framePixels;
                a.copyPixels(c, J, J.rect, this._flashPoint, this.colorTransform, this.blend, this.antialiasing);
              }
            }
            a.buffer.unlock();
          }
        },
        drawComplex: function (a) {
          if (this.repeatAxes == 0) {
            G.prototype.drawComplex.call(this, a);
          } else {
            var b = !this.drawBlit;
            var c = this.drawBlit ? this._blitGraphic : this.graphic;
            var d = this.drawBlit ? this._blitGraphic.get_imageFrame().get_frame() : this._frame;
            var e = this.flipX != this._frame.flipX;
            var f = this.flipY != this._frame.flipY;
            d.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? e != this.animation._curAnim.flipX : e, this.animation._curAnim != null ? f != this.animation._curAnim.flipY : f);
            this._matrix.translate(-this.origin.x, -this.origin.y);
            var k = d.frame.width;
            var t = d.frame.height;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            e = k;
            f = t;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            var l = da.pool.get().set(e, f);
            l._inPool = false;
            e = l;
            if (b) {
              k = (d.frame.width + this.spacing.x) * this.scale.x;
              t = (d.frame.height + this.spacing.y) * this.scale.y;
              if (t == null) {
                t = 0;
              }
              if (k == null) {
                k = 0;
              }
              e.set_x(k);
              e.set_y(t);
              this._matrix.scale(this.scale.x, this.scale.y);
              if (this.bakedRotationAngle <= 0) {
                if (this._angleChanged) {
                  b = Math.PI / 180 * this.angle;
                  this._sinAngle = Math.sin(b);
                  this._cosAngle = Math.cos(b);
                  this._angleChanged = false;
                }
                if (this.angle != 0) {
                  t = this._matrix;
                  b = this._cosAngle;
                  f = this._sinAngle;
                  k = t.a * b - t.b * f;
                  t.b = t.a * f + t.b * b;
                  t.a = k;
                  k = t.c * b - t.d * f;
                  t.d = t.c * f + t.d * b;
                  t.c = k;
                  k = t.tx * b - t.ty * f;
                  t.ty = t.tx * f + t.ty * b;
                  t.tx = k;
                }
              }
            }
            b = null;
            if (g.renderTile) {
              b = this.alpha != 1 || this.color != 16777215;
              f = this.colorTransform != null && Ye.hasRGBAOffsets(this.colorTransform);
              b = a.startQuadBatch(c, b, f, this.blend, this.antialiasing, this.shader);
            } else {
              a.buffer.lock();
            }
            var J = this.getScreenPosition(this._point, a);
            l = this.offset;
            k = l.x;
            t = l.y;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            J.set_x(J.x - k);
            J.set_y(J.y - t);
            t = l;
            if (t._weak) {
              t.put();
            }
            c = f = 1;
            if (this.repeatAxes != 0) {
              t = a.getViewMarginRect();
              k = this.getScreenBounds(null, a);
              J = this.repeatAxes;
              if (J == 1 || J == 17) {
                f = (this.frameWidth + this.spacing.x) * this.scale.x;
                l = this.modMin(k.x + k.width, f, t.x) - k.width;
                f = this.modMax(k.x, f, t.x + t.width) + f;
                f = Math.round((f - l) / e.x);
                this._point.set_x(l + this._point.x - k.x);
              }
              J = this.repeatAxes;
              if (J == 16 || J == 17) {
                c = (this.frameHeight + this.spacing.y) * this.scale.y;
                l = this.modMin(k.y + k.height, c, t.y) - k.height;
                c = this.modMax(k.y, c, t.y + t.height) + c;
                c = Math.round((c - l) / e.y);
                this._point.set_y(l + this._point.y - k.y);
              }
              if (!t._inPool) {
                t._inPool = true;
                t._weak = false;
                Ia._pool.putUnsafe(t);
              }
              if (!k._inPool) {
                k._inPool = true;
                k._weak = false;
                Ia._pool.putUnsafe(k);
              }
            }
            J = this._point;
            l = this.origin;
            k = l.x;
            t = l.y;
            if (t == null) {
              t = 0;
            }
            if (k == null) {
              k = 0;
            }
            J.set_x(J.x + k);
            J.set_y(J.y + t);
            t = l;
            if (t._weak) {
              t.put();
            }
            if (this.drawBlit) {
              J = this._point;
              l = this._blitOffset;
              k = l.x;
              t = l.y;
              if (t == null) {
                t = 0;
              }
              if (k == null) {
                k = 0;
              }
              J.set_x(J.x + k);
              J.set_y(J.y + t);
              t = l;
              if (t._weak) {
                t.put();
              }
            }
            t = new Rc();
            for (k = 0; k < f;) {
              l = k++;
              J = 0;
              for (var V = c; J < V;) {
                var m = J++;
                t.copyFrom(this._matrix);
                t.translate(this._point.x + e.x * l, this._point.y + e.y * m);
                if (this.isPixelPerfectRender(a)) {
                  t.tx = Math.floor(t.tx);
                  t.ty = Math.floor(t.ty);
                }
                if (g.renderBlit) {
                  a.drawPixels(d, this.drawBlit ? this._blitGraphic.bitmap : this.framePixels, t, this.colorTransform, this.blend, this.antialiasing, this.shader);
                } else {
                  b.addQuad(d, t, this.colorTransform);
                }
              }
            }
            if (g.renderBlit) {
              a.buffer.unlock();
            }
          }
        },
        modMin: function (a, b, c) {
          return a - Math.floor((a - c) / b) * b;
        },
        modMax: function (a, b, c) {
          return a - Math.ceil((a - c) / b) * b;
        },
        regenGraphic: function (a) {
          var b = (this.frameWidth + this.spacing.x) * this.scale.x;
          var c = (this.frameHeight + this.spacing.y) * this.scale.y;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          var d = b;
          var e = c;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = da.pool.get().set(d, e);
          d._inPool = false;
          var f = a.getViewMarginRect();
          a = e = 1;
          if (this.repeatAxes != 0) {
            var k = this.blitMode;
            switch (k._hx_index) {
              case 0:
                k = this.repeatAxes;
                if (k == 1 || k == 17) {
                  e = Math.ceil(f.width / d.x) + 1;
                }
                k = this.repeatAxes;
                if (k == 16 || k == 17) {
                  a = Math.ceil(f.height / d.y) + 1;
                }
                break;
              case 1:
                b = k.x;
                c = k.y;
                if (b == 1) {
                  if (c != 1) {
                    k = this.repeatAxes;
                    if (k == 1 || k == 17) {
                      k = Math.ceil(f.width / d.x) + 1;
                      e = b < k ? b : k;
                    }
                    k = this.repeatAxes;
                    if (k == 16 || k == 17) {
                      k = Math.ceil(f.height / d.y) + 1;
                      a = c < k ? c : k;
                    }
                  }
                } else {
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = Math.ceil(f.width / d.x) + 1;
                    e = b < k ? b : k;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = Math.ceil(f.height / d.y) + 1;
                    a = c < k ? c : k;
                  }
                }
                break;
              case 2:
                b = k.tiles;
                if (b != 1) {
                  c = b;
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = Math.ceil(f.width / d.x) + 1;
                    e = c < k ? c : k;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = Math.ceil(f.height / d.y) + 1;
                    a = c < k ? c : k;
                  }
                }
                break;
              case 3:
                b = k.portions;
                if (b == 1) {
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    e = Math.ceil(f.width / d.x) + 1;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    a = Math.ceil(f.height / d.y) + 1;
                  }
                } else {
                  c = b;
                  k = this.repeatAxes;
                  if (k == 1 || k == 17) {
                    k = this.repeatAxes;
                    e = k == 1 || k == 17 ? Math.ceil(f.width / d.x / c + 1) : 1;
                  }
                  k = this.repeatAxes;
                  if (k == 16 || k == 17) {
                    k = this.repeatAxes;
                    a = k == 16 || k == 17 ? Math.ceil(f.height / d.y / c + 1) : 1;
                  }
                }
            }
          }
          if (!f._inPool) {
            f._inPool = true;
            f._weak = false;
            Ia._pool.putUnsafe(f);
          }
          if (this._prevDrawParams.graphicKey != this.graphic.key || this._prevDrawParams.tilesX != e || this._prevDrawParams.tilesY != a || this._prevDrawParams.scaleX != this.scale.x || this._prevDrawParams.scaleY != this.scale.y || this._prevDrawParams.spacingX != this.spacing.x || this._prevDrawParams.spacingY != this.spacing.y || this._prevDrawParams.repeatAxes != this.repeatAxes || this._prevDrawParams.angle != this.angle) {
            this._prevDrawParams.graphicKey = this.graphic.key;
            this._prevDrawParams.tilesX = e;
            this._prevDrawParams.tilesY = a;
            this._prevDrawParams.scaleX = this.scale.x;
            this._prevDrawParams.scaleY = this.scale.y;
            this._prevDrawParams.spacingX = this.spacing.x;
            this._prevDrawParams.spacingY = this.spacing.y;
            this._prevDrawParams.repeatAxes = this.repeatAxes;
            this._prevDrawParams.angle = this.angle;
            k = this._blitOffset;
            c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            k.set_x(b);
            k.set_y(c);
            f = Math.ceil(e * d.x);
            c = Math.ceil(a * d.y);
            if (this.repeatAxes != 17) {
              b = this.getScreenBounds();
              var t = this.getScreenPosition();
              k = this.repeatAxes;
              if (k != 1 && k != 17) {
                f = Math.ceil(b.width);
                this._blitOffset.set_x(b.x - t.x);
              }
              k = this.repeatAxes;
              if (k != 16 && k != 17) {
                c = Math.ceil(b.height);
                this._blitOffset.set_y(b.y - t.y);
              }
              if (!b._inPool) {
                b._inPool = true;
                b._weak = false;
                Ia._pool.putUnsafe(b);
              }
              t.put();
            }
            if (this._blitGraphic == null || this._blitGraphic.width != f || this._blitGraphic.height != c) {
              this._blitGraphic = g.bitmap.create(f, c, 0, true);
            }
            f = this._blitGraphic.bitmap;
            f.lock();
            f.fillRect(f.rect, 0);
            this.animation.set_frameIndex(0);
            this.calcFrame(true);
            this._matrix.identity();
            this._matrix.translate(-this.origin.x, -this.origin.y);
            this._matrix.scale(this.scale.x, this.scale.y);
            if (this.bakedRotationAngle <= 0) {
              if (this._angleChanged) {
                k = Math.PI / 180 * this.angle;
                this._sinAngle = Math.sin(k);
                this._cosAngle = Math.cos(k);
                this._angleChanged = false;
              }
              if (this.angle != 0) {
                k = this._matrix;
                c = this._cosAngle;
                b = this._sinAngle;
                t = k.a * c - k.b * b;
                k.b = k.a * b + k.b * c;
                k.a = t;
                t = k.c * c - k.d * b;
                k.d = k.c * b + k.d * c;
                k.c = t;
                t = k.tx * c - k.ty * b;
                k.ty = k.tx * b + k.ty * c;
                k.tx = t;
              }
            }
            this._matrix.translate(this.origin.x, this.origin.y);
            this._matrix.translate(-this._blitOffset.x, -this._blitOffset.y);
            k = this._point;
            b = this._matrix.tx;
            c = this._matrix.ty;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            k.set_x(b);
            k.set_y(c);
            k = this.repeatAxes;
            c = k != 1 && k != 17 || this.angle == 0 ? 0 : 1;
            k = this.repeatAxes;
            t = k != 16 && k != 17 || this.angle == 0 ? 0 : 1;
            k = -c;
            for (b = e + c; k < b;) {
              e = k++;
              c = -t;
              for (var l = a + t; c < l;) {
                var J = c++;
                this._matrix.tx = this._point.x + e * d.x;
                this._matrix.ty = this._point.y + J * d.y;
                f.draw(this.framePixels, this._matrix);
              }
            }
            f.unlock();
          }
          d.put();
        },
        __class__: Zh
      });
      var Ik = w["flixel.addons.display.BackdropBlitMode"] = {
        __ename__: "flixel.addons.display.BackdropBlitMode",
        __constructs__: null,
        AUTO: {
          _hx_name: "AUTO",
          _hx_index: 0,
          __enum__: "flixel.addons.display.BackdropBlitMode",
          toString: p
        },
        MAX_TILES_XY: (r = function (a, b) {
          return {
            _hx_index: 1,
            x: a,
            y: b,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, r._hx_name = "MAX_TILES_XY", r.__params__ = ["x", "y"], r),
        MAX_TILES: (r = function (a) {
          return {
            _hx_index: 2,
            tiles: a,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, r._hx_name = "MAX_TILES", r.__params__ = ["tiles"], r),
        SPLIT: (r = function (a) {
          return {
            _hx_index: 3,
            portions: a,
            __enum__: "flixel.addons.display.BackdropBlitMode",
            toString: p
          };
        }, r._hx_name = "SPLIT", r.__params__ = ["portions"], r)
      };
      Ik.__constructs__ = [Ik.AUTO, Ik.MAX_TILES_XY, Ik.MAX_TILES, Ik.SPLIT];
      function $h() {}
      h["flixel.addons.display.FlxGridOverlay"] = $h;
      $h.__name__ = "flixel.addons.display.FlxGridOverlay";
      $h.create = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = -2501163;
        }
        if (f == null) {
          f = -1579290;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = -1;
        }
        if (c == -1) {
          c = g.width;
        }
        if (d == -1) {
          d = g.height;
        }
        if (c < a || d < b) {
          return null;
        }
        a = $h.createGrid(a, b, c, d, e, f, k);
        b = new G();
        b.set_pixels(a);
        b.dirty = true;
        return b;
      };
      $h.createGrid = function (a, b, c, d, e, f, k) {
        var t = f;
        var l = f;
        var g = new N(c, d, true);
        for (var V = 0; V <= d;) {
          if (V > 0 && l == t && e) {
            l = l == f ? k : f;
          } else if (V > 0 && l != t && e == 0) {
            l = l == k ? f : k;
          }
          for (var m = 0; m <= c;) {
            if (m == 0) {
              t = l;
            }
            g.fillRect(new ba(m, V, a, b), l);
            l = l == f ? k : f;
            m += a;
          }
          V += b;
        }
        return g;
      };
      function fe(a) {
        this.byteCode = a;
        this.precisionHint = 1;
        this.__glSourceDirty = true;
        this.__numPasses = 1;
        this.__data = zp._new(a);
      }
      h["openfl.display.Shader"] = fe;
      fe.__name__ = "openfl.display.Shader";
      fe.prototype = {
        __clearUseArray: function () {
          for (var a = 0, b = this.__paramBool; a < b.length;) {
            var c = b[a];
            ++a;
            c.__useArray = false;
          }
          a = 0;
          for (b = this.__paramFloat; a < b.length;) {
            c = b[a];
            ++a;
            c.__useArray = false;
          }
          a = 0;
          for (b = this.__paramInt; a < b.length;) {
            c = b[a];
            ++a;
            c.__useArray = false;
          }
        },
        __createGLShader: function (a, b) {
          var c = this.__context.gl;
          var d = c.createShader(b);
          c.shaderSource(d, a);
          c.compileShader(d);
          var e = c.getShaderInfoLog(d);
          var f = e != null && v.trim(e) != "";
          var k = c.getShaderParameter(d, c.COMPILE_STATUS);
          if (f || k == 0) {
            b = (k == 0 ? "Error" : "Info") + (b == c.VERTEX_SHADER ? " compiling vertex shader" : " compiling fragment shader");
            b = b + ("\n" + e) + ("\n" + a);
            if (k == 0) {
              Ua.error(b, {
                fileName: "openfl/display/Shader.hx",
                lineNumber: 337,
                className: "openfl.display.Shader",
                methodName: "__createGLShader"
              });
            } else if (f) {
              Ua.debug(b, {
                fileName: "openfl/display/Shader.hx",
                lineNumber: 338,
                className: "openfl.display.Shader",
                methodName: "__createGLShader"
              });
            }
          }
          return d;
        },
        __createGLProgram: function (a, b) {
          var c = this.__context.gl;
          a = this.__createGLShader(a, c.VERTEX_SHADER);
          var d = this.__createGLShader(b, c.FRAGMENT_SHADER);
          b = c.createProgram();
          for (var e = 0, f = this.__paramFloat; e < f.length;) {
            var k = f[e];
            ++e;
            if (k.name.indexOf("Position") > -1 && v.startsWith(k.name, "openfl_")) {
              c.bindAttribLocation(b, 0, k.name);
              break;
            }
          }
          c.attachShader(b, a);
          c.attachShader(b, d);
          c.linkProgram(b);
          if (c.getProgramParameter(b, c.LINK_STATUS) == 0) {
            c = "Unable to initialize the shader program\n" + c.getProgramInfoLog(b);
            Ua.error(c, {
              fileName: "openfl/display/Shader.hx",
              lineNumber: 371,
              className: "openfl.display.Shader",
              methodName: "__createGLProgram"
            });
          }
          return b;
        },
        __disable: function () {
          if (this.program != null) {
            this.__disableGL();
          }
        },
        __disableGL: function () {
          var a = this.__context.gl;
          var b = 0;
          for (var c = 0, d = this.__inputBitmapData; c < d.length;) {
            var e = d[c];
            ++c;
            e.__disableGL(this.__context, b);
            ++b;
            if (b == a.MAX_TEXTURE_IMAGE_UNITS) {
              break;
            }
          }
          c = 0;
          for (d = this.__paramBool; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          c = 0;
          for (d = this.__paramFloat; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          c = 0;
          for (d = this.__paramInt; c < d.length;) {
            b = d[c];
            ++c;
            b.__disableGL(this.__context);
          }
          this.__context.__bindGLArrayBuffer(null);
          if (this.__context.__context.type == "opengl") {
            a.disable(a.TEXTURE_2D);
          }
        },
        __enable: function () {
          this.__init();
          if (this.program != null) {
            this.__enableGL();
          }
        },
        __enableGL: function () {
          var a = 0;
          var b = this.__context.gl;
          for (var c = 0, d = this.__inputBitmapData; c < d.length;) {
            var e = d[c];
            ++c;
            b.uniform1i(e.index, a);
            ++a;
          }
          if (this.__context.__context.type == "opengl" && a > 0) {
            b.enable(b.TEXTURE_2D);
          }
        },
        __init: function () {
          if (this.__data == null) {
            this.__data = zp._new(null);
          }
          if (this.__glFragmentSource != null && this.__glVertexSource != null && (this.program == null || !!this.__glSourceDirty)) {
            this.__initGL();
          }
        },
        __initGL: function () {
          if (this.__glSourceDirty || this.__paramBool == null) {
            this.__glSourceDirty = false;
            this.program = null;
            this.__inputBitmapData = [];
            this.__paramBool = [];
            this.__paramFloat = [];
            this.__paramInt = [];
            this.__processGLData(this.get_glVertexSource(), "attribute");
            this.__processGLData(this.get_glVertexSource(), "uniform");
            this.__processGLData(this.get_glFragmentSource(), "uniform");
          }
          if (this.__context != null && this.program == null) {
            var a = this.__context.gl;
            var b = this.precisionHint == 1 ? "precision mediump float;\n" : "precision lowp float;\n";
            var c = b + this.get_glVertexSource();
            b += this.get_glFragmentSource();
            var d = c + b;
            if (Object.prototype.hasOwnProperty.call(this.__context.__programs.h, d)) {
              this.program = this.__context.__programs.h[d];
            } else {
              this.program = this.__context.createProgram(1);
              this.program.__glProgram = this.__createGLProgram(c, b);
              this.__context.__programs.h[d] = this.program;
            }
            if (this.program != null) {
              this.glProgram = this.program.__glProgram;
              c = 0;
              for (b = this.__inputBitmapData; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramBool; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramFloat; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
              c = 0;
              for (b = this.__paramInt; c < b.length;) {
                d = b[c];
                ++c;
                d.index = d.__isUniform ? a.getUniformLocation(this.glProgram, d.name) : a.getAttribLocation(this.glProgram, d.name);
              }
            }
          }
        },
        __processGLData: function (a, b) {
          var c = 0;
          var d;
          for (d = b == "uniform" ? new na("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "") : new na("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", ""); d.matchSub(a, c);) {
            var e = d.matched(1);
            var f = d.matched(2);
            if (!v.startsWith(f, "gl_")) {
              c = b == "uniform";
              if (v.startsWith(e, "sampler")) {
                e = new ej();
                e.name = f;
                e.__isUniform = c;
                this.__inputBitmapData.push(e);
                switch (f) {
                  case "bitmap":
                    this.__bitmap = e;
                    break;
                  case "openfl_Texture":
                    this.__texture = e;
                }
                this.__data[f] = e;
                if (this.__isGenerated) {
                  this[f] = e;
                }
              } else if (!Object.prototype.hasOwnProperty.call(this.__data, f) || ha.field(this.__data, f) == null) {
                switch (e) {
                  case "bool":
                    var k = 0;
                    break;
                  case "bvec2":
                    k = 1;
                    break;
                  case "bvec3":
                    k = 2;
                    break;
                  case "bvec4":
                    k = 3;
                    break;
                  case "dvec2":
                  case "vec2":
                    k = 5;
                    break;
                  case "dvec3":
                  case "vec3":
                    k = 6;
                    break;
                  case "dvec4":
                  case "vec4":
                    k = 7;
                    break;
                  case "double":
                  case "float":
                    k = 4;
                    break;
                  case "mat2":
                  case "mat2x2":
                    k = 12;
                    break;
                  case "mat2x3":
                    k = 13;
                    break;
                  case "mat2x4":
                    k = 14;
                    break;
                  case "mat3x2":
                    k = 15;
                    break;
                  case "mat3":
                  case "mat3x3":
                    k = 16;
                    break;
                  case "mat3x4":
                    k = 17;
                    break;
                  case "mat4x2":
                    k = 18;
                    break;
                  case "mat4x3":
                    k = 19;
                    break;
                  case "mat4":
                  case "mat4x4":
                    k = 20;
                    break;
                  case "int":
                  case "uint":
                    k = 8;
                    break;
                  case "ivec2":
                  case "uvec2":
                    k = 9;
                    break;
                  case "ivec3":
                  case "uvec3":
                    k = 10;
                    break;
                  case "ivec4":
                  case "uvec4":
                    k = 11;
                    break;
                  default:
                    k = null;
                }
                switch (k) {
                  case 1:
                  case 5:
                  case 9:
                    e = 2;
                    break;
                  case 2:
                  case 6:
                  case 10:
                    e = 3;
                    break;
                  case 3:
                  case 7:
                  case 11:
                  case 12:
                    e = 4;
                    break;
                  case 16:
                    e = 9;
                    break;
                  case 20:
                    e = 16;
                    break;
                  default:
                    e = 1;
                }
                switch (k) {
                  case 12:
                    var t = 2;
                    break;
                  case 16:
                    t = 3;
                    break;
                  case 20:
                    t = 4;
                    break;
                  default:
                    t = 1;
                }
                switch (k) {
                  case 0:
                  case 1:
                  case 2:
                  case 3:
                    var l = new ng();
                    l.set_name(f);
                    l.type = k;
                    l.__arrayLength = t;
                    l.__isBool = true;
                    l.__isUniform = c;
                    l.__length = e;
                    this.__paramBool.push(l);
                    if (f == "openfl_HasColorTransform") {
                      this.__hasColorTransform = l;
                    }
                    this.__data[f] = l;
                    if (this.__isGenerated) {
                      this[f] = l;
                    }
                    break;
                  case 8:
                  case 9:
                  case 10:
                  case 11:
                    l = new ng();
                    l.set_name(f);
                    l.type = k;
                    l.__arrayLength = t;
                    l.__isInt = true;
                    l.__isUniform = c;
                    l.__length = e;
                    this.__paramInt.push(l);
                    this.__data[f] = l;
                    if (this.__isGenerated) {
                      this[f] = l;
                    }
                    break;
                  default:
                    l = new ng();
                    l.set_name(f);
                    l.type = k;
                    l.__arrayLength = t;
                    if (t > 0) {
                      k = t * t;
                      k = k != null ? new Float32Array(k) : null;
                      l.__uniformMatrix = k;
                    }
                    l.__isFloat = true;
                    l.__isUniform = c;
                    l.__length = e;
                    this.__paramFloat.push(l);
                    if (v.startsWith(f, "openfl_")) {
                      switch (f) {
                        case "openfl_Alpha":
                          this.__alpha = l;
                          break;
                        case "openfl_ColorMultiplier":
                          this.__colorMultiplier = l;
                          break;
                        case "openfl_ColorOffset":
                          this.__colorOffset = l;
                          break;
                        case "openfl_Matrix":
                          this.__matrix = l;
                          break;
                        case "openfl_Position":
                          this.__position = l;
                          break;
                        case "openfl_TextureCoord":
                          this.__textureCoord = l;
                          break;
                        case "openfl_TextureSize":
                          this.__textureSize = l;
                      }
                    }
                    this.__data[f] = l;
                    if (this.__isGenerated) {
                      this[f] = l;
                    }
                }
              }
              f = d.matchedPos();
              c = f.pos + f.len;
            }
          }
        },
        __update: function () {
          if (this.program != null) {
            this.__updateGL();
          }
        },
        __updateFromBuffer: function (a, b) {
          if (this.program != null) {
            this.__updateGLFromBuffer(a, b);
          }
        },
        __updateGL: function () {
          var a = 0;
          for (var b = 0, c = this.__inputBitmapData; b < c.length;) {
            var d = c[b];
            ++b;
            d.__updateGL(this.__context, a);
            ++a;
          }
          b = 0;
          for (c = this.__paramBool; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
          b = 0;
          for (c = this.__paramFloat; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
          b = 0;
          for (c = this.__paramInt; b < c.length;) {
            a = c[b];
            ++b;
            a.__updateGL(this.__context);
          }
        },
        __updateGLFromBuffer: function (a, b) {
          var c = 0;
          var d;
          var e;
          var f;
          var k;
          var t;
          for (var l = 0, g = a.inputCount; l < g;) {
            t = l++;
            d = a.inputRefs[t];
            e = a.inputs[t];
            f = a.inputFilter[t];
            k = a.inputMipFilter[t];
            t = a.inputWrap[t];
            if (e != null) {
              d.__updateGL(this.__context, c, e, f, k, t);
              ++c;
            }
          }
          l = this.__context.gl;
          if (a.paramDataLength > 0) {
            if (a.paramDataBuffer == null) {
              a.paramDataBuffer = l.createBuffer();
            }
            this.__context.__bindGLArrayBuffer(a.paramDataBuffer);
            Yc.bufferData(l, l.ARRAY_BUFFER, a.paramData, l.DYNAMIC_DRAW);
          } else {
            this.__context.__bindGLArrayBuffer(null);
          }
          e = d = c = 0;
          f = a.paramBoolCount;
          k = a.paramFloatCount;
          var V = a.paramData;
          var m = null;
          var Ka = null;
          var h = null;
          l = 0;
          for (g = a.paramCount; l < g;) {
            t = l++;
            var p = false;
            if (t < f) {
              var n = a.paramRefs_Bool[c];
              for (var q = 0, Ub = a.overrideBoolCount; q < Ub;) {
                var r = q++;
                if (n.name == a.overrideBoolNames[r]) {
                  m = a.overrideBoolValues[r];
                  p = true;
                  break;
                }
              }
              if (p) {
                n.__updateGL(this.__context, m);
              } else {
                n.__updateGLFromBuffer(this.__context, V, a.paramPositions[t], a.paramLengths[t], b);
              }
              ++c;
            } else if (t < f + k) {
              n = a.paramRefs_Float[d];
              q = 0;
              for (Ub = a.overrideFloatCount; q < Ub;) {
                r = q++;
                if (n.name == a.overrideFloatNames[r]) {
                  Ka = a.overrideFloatValues[r];
                  p = true;
                  break;
                }
              }
              if (p) {
                n.__updateGL(this.__context, Ka);
              } else {
                n.__updateGLFromBuffer(this.__context, V, a.paramPositions[t], a.paramLengths[t], b);
              }
              ++d;
            } else {
              n = a.paramRefs_Int[e];
              q = 0;
              for (Ub = a.overrideIntCount; q < Ub;) {
                r = q++;
                if (n.name == a.overrideIntNames[r]) {
                  h = a.overrideIntValues[r];
                  p = true;
                  break;
                }
              }
              if (p) {
                n.__updateGL(this.__context, h);
              } else {
                n.__updateGLFromBuffer(this.__context, V, a.paramPositions[t], a.paramLengths[t], b);
              }
              ++e;
            }
          }
        },
        get_glFragmentSource: function () {
          return this.__glFragmentSource;
        },
        get_glVertexSource: function () {
          return this.__glVertexSource;
        },
        __class__: fe,
        __properties__: {
          get_glVertexSource: "get_glVertexSource",
          get_glFragmentSource: "get_glFragmentSource"
        }
      };
      function sh(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        fe.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.display.GraphicsShader"] = sh;
      sh.__name__ = "openfl.display.GraphicsShader";
      sh.__super__ = fe;
      sh.prototype = q(fe.prototype, {
        __class__: sh
      });
      function Vd() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        sh.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flixel.graphics.tile.FlxGraphicsShader"] = Vd;
      Vd.__name__ = "flixel.graphics.tile.FlxGraphicsShader";
      Vd.__super__ = sh;
      Vd.prototype = q(sh.prototype, {
        __class__: Vd
      });
      function ge(a, b) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        if (a != null && a.length > 0) {
          this.set_glFragmentSource(a);
        } else {
          this.set_glFragmentSource(ge.BASE_FRAGMENT_SOURCE);
        }
        if (b != null && b.length > 0) {
          this.set_glVertexSource(b);
        } else {
          this.set_glVertexSource(ge.BASE_VERTEX_SOURCE);
        }
        Vd.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flixel.addons.display.FlxRuntimeShader"] = ge;
      ge.__name__ = "flixel.addons.display.FlxRuntimeShader";
      ge.__super__ = Vd;
      ge.prototype = q(Vd.prototype, {
        __processGLData: function (a, b) {
          var c = 0;
          var d;
          for (d = b == "uniform" ? new na("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", "") : new na("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)", ""); d.matchSub(a, c);) {
            var e = d.matched(1);
            var f = d.matched(2);
            if (!v.startsWith(f, "gl_")) {
              c = b == "uniform";
              if (v.startsWith(e, "sampler")) {
                e = new ej();
                e.name = f;
                e.__isUniform = c;
                this.__inputBitmapData.push(e);
                switch (f) {
                  case "bitmap":
                    this.__bitmap = e;
                    break;
                  case "openfl_Texture":
                    this.__texture = e;
                }
                this.__data[f] = e;
                try {
                  if (this.__isGenerated) {
                    this[f] = e;
                  }
                } catch (J) {
                  Oa.lastError = J;
                }
              } else if (!Object.prototype.hasOwnProperty.call(this.__data, f) || ha.field(this.__data, f) == null) {
                switch (e) {
                  case "bool":
                    var k = 0;
                    break;
                  case "bvec2":
                    k = 1;
                    break;
                  case "bvec3":
                    k = 2;
                    break;
                  case "bvec4":
                    k = 3;
                    break;
                  case "dvec2":
                  case "vec2":
                    k = 5;
                    break;
                  case "dvec3":
                  case "vec3":
                    k = 6;
                    break;
                  case "dvec4":
                  case "vec4":
                    k = 7;
                    break;
                  case "double":
                  case "float":
                    k = 4;
                    break;
                  case "mat2":
                  case "mat2x2":
                    k = 12;
                    break;
                  case "mat2x3":
                    k = 13;
                    break;
                  case "mat2x4":
                    k = 14;
                    break;
                  case "mat3x2":
                    k = 15;
                    break;
                  case "mat3":
                  case "mat3x3":
                    k = 16;
                    break;
                  case "mat3x4":
                    k = 17;
                    break;
                  case "mat4x2":
                    k = 18;
                    break;
                  case "mat4x3":
                    k = 19;
                    break;
                  case "mat4":
                  case "mat4x4":
                    k = 20;
                    break;
                  case "int":
                  case "uint":
                    k = 8;
                    break;
                  case "ivec2":
                  case "uvec2":
                    k = 9;
                    break;
                  case "ivec3":
                  case "uvec3":
                    k = 10;
                    break;
                  case "ivec4":
                  case "uvec4":
                    k = 11;
                    break;
                  default:
                    k = null;
                }
                switch (k) {
                  case 1:
                  case 5:
                  case 9:
                    e = 2;
                    break;
                  case 2:
                  case 6:
                  case 10:
                    e = 3;
                    break;
                  case 3:
                  case 7:
                  case 11:
                  case 12:
                    e = 4;
                    break;
                  case 16:
                    e = 9;
                    break;
                  case 20:
                    e = 16;
                    break;
                  default:
                    e = 1;
                }
                switch (k) {
                  case 12:
                    var t = 2;
                    break;
                  case 16:
                    t = 3;
                    break;
                  case 20:
                    t = 4;
                    break;
                  default:
                    t = 1;
                }
                switch (k) {
                  case 0:
                  case 1:
                  case 2:
                  case 3:
                    var l = new ng();
                    l.set_name(f);
                    l.type = k;
                    l.__arrayLength = t;
                    l.__isBool = true;
                    l.__isUniform = c;
                    l.__length = e;
                    this.__paramBool.push(l);
                    if (f == "openfl_HasColorTransform") {
                      this.__hasColorTransform = l;
                    }
                    this.__data[f] = l;
                    try {
                      if (this.__isGenerated) {
                        this[f] = l;
                      }
                    } catch (J) {
                      Oa.lastError = J;
                    }
                    break;
                  case 8:
                  case 9:
                  case 10:
                  case 11:
                    l = new ng();
                    l.set_name(f);
                    l.type = k;
                    l.__arrayLength = t;
                    l.__isInt = true;
                    l.__isUniform = c;
                    l.__length = e;
                    this.__paramInt.push(l);
                    this.__data[f] = l;
                    try {
                      if (this.__isGenerated) {
                        this[f] = l;
                      }
                    } catch (J) {
                      Oa.lastError = J;
                    }
                    break;
                  default:
                    l = new ng();
                    l.set_name(f);
                    l.type = k;
                    l.__arrayLength = t;
                    if (t > 0) {
                      k = t * t;
                      k = k != null ? new Float32Array(k) : null;
                      l.__uniformMatrix = k;
                    }
                    l.__isFloat = true;
                    l.__isUniform = c;
                    l.__length = e;
                    this.__paramFloat.push(l);
                    if (v.startsWith(f, "openfl_")) {
                      switch (f) {
                        case "openfl_Alpha":
                          this.__alpha = l;
                          break;
                        case "openfl_ColorMultiplier":
                          this.__colorMultiplier = l;
                          break;
                        case "openfl_ColorOffset":
                          this.__colorOffset = l;
                          break;
                        case "openfl_Matrix":
                          this.__matrix = l;
                          break;
                        case "openfl_Position":
                          this.__position = l;
                          break;
                        case "openfl_TextureCoord":
                          this.__textureCoord = l;
                          break;
                        case "openfl_TextureSize":
                          this.__textureSize = l;
                      }
                    }
                    this.__data[f] = l;
                    try {
                      if (this.__isGenerated) {
                        this[f] = l;
                      }
                    } catch (J) {
                      Oa.lastError = J;
                    }
                }
              }
              f = d.matchedPos();
              c = f.pos + f.len;
            }
          }
        },
        set_glFragmentSource: function (a) {
          if (a != null) {
            a = v.replace(v.replace(a, "#pragma header", ge.BASE_FRAGMENT_HEADER), "#pragma body", ge.BASE_FRAGMENT_BODY);
          }
          if (a != this.__glFragmentSource) {
            this.__glSourceDirty = true;
          }
          return this.__glFragmentSource = a;
        },
        set_glVertexSource: function (a) {
          if (a != null) {
            a = v.replace(v.replace(a, "#pragma header", ge.BASE_VERTEX_HEADER), "#pragma body", ge.BASE_VERTEX_BODY);
          }
          if (a != this.__glVertexSource) {
            this.__glSourceDirty = true;
          }
          return this.__glVertexSource = a;
        },
        __class__: ge
      });
      function ai(a, b, c, d, e, f, k, t) {
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 0;
        }
        this.shapeDirty = false;
        this.shape_id = Ze.UNKNOWN;
        G.call(this, a, b);
        this.lineStyle = e;
        this.shapeDirty = true;
        this.fillColor = f;
        this.shapeDirty = true;
        if (c == 0 && k != 0) {
          c = k + this.get_strokeBuffer();
        }
        if (d == 0 && t != 0) {
          d = t + this.get_strokeBuffer();
        }
        if (c < 1) {
          c = 1;
        }
        if (d < 1) {
          d = 1;
        }
        this.shapeWidth = k;
        this.shapeHeight = t;
        this.shapeDirty = true;
        this.set_width(c);
        this.set_height(d);
        this.makeGraphic(this.get_width() | 0, this.get_height() | 0, 0, true);
        this._drawStyle = {
          matrix: null,
          colorTransform: null,
          blendMode: 10,
          clipRect: null,
          smoothing: true
        };
        if (this.shapeWidth != 0 && this.shapeHeight != 0 && this.shapeWidth < c && this.shapeHeight < d) {
          this.fixBoundaries(this.shapeWidth, this.shapeHeight);
        }
        this.shapeDirty = true;
      }
      h["flixel.addons.display.shapes.FlxShape"] = ai;
      ai.__name__ = "flixel.addons.display.shapes.FlxShape";
      ai.__super__ = G;
      ai.prototype = q(G.prototype, {
        destroy: function () {
          this.lineStyle = null;
          this.shapeDirty = true;
          G.prototype.destroy.call(this);
        },
        drawSpecificShape: function (a) {},
        redrawShape: function () {
          var a = (this.shapeWidth | 0) - this.get_pixels().width;
          var b = (this.shapeHeight | 0) - this.get_pixels().height;
          if (a != 0 || b != 0) {
            a = this.shapeWidth;
            b = this.shapeHeight;
            this.makeGraphic(this.get_width() + this.get_strokeBuffer() | 0, this.get_height() + this.get_strokeBuffer() | 0, 0, true);
            this.fixBoundaries(a, b);
          } else {
            this.get_pixels().fillRect(this.get_pixels().rect, 0);
          }
          if (this.lineStyle.thickness > 1) {
            a = this.getStrokeOffsetMatrix(this._matrix);
            this.drawSpecificShape(a);
          } else {
            this.drawSpecificShape();
          }
        },
        draw: function () {
          if (this.shapeDirty) {
            this.redrawShape();
            this.shapeDirty = false;
          }
          G.prototype.draw.call(this);
        },
        fixBoundaries: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.offset.set_x(this.getStrokeOffsetX());
          this.offset.set_y(this.getStrokeOffsetY());
          this.shapeDirty = true;
        },
        getStrokeOffsetX: function () {
          return this.get_strokeBuffer() / 4;
        },
        getStrokeOffsetY: function () {
          return this.get_strokeBuffer() / 4;
        },
        get_strokeBuffer: function () {
          return this.lineStyle.thickness * 2;
        },
        getStrokeOffsetMatrix: function (a) {
          var b = this.get_strokeBuffer() / 2;
          a.identity();
          a.translate(b, b);
          return a;
        },
        __class__: ai,
        __properties__: q(G.prototype.__properties__, {
          get_strokeBuffer: "get_strokeBuffer"
        })
      });
      function Jk(a, b, c, d, e) {
        ai.call(this, a, b, 0, 0, d, e, c * 2, c * 2);
        this.radius = c;
        this.shapeWidth = c * 2;
        this.shapeHeight = c * 2;
        this.shapeDirty = true;
        this.shape_id = Ze.CIRCLE;
      }
      h["flixel.addons.display.shapes.FlxShapeCircle"] = Jk;
      Jk.__name__ = "flixel.addons.display.shapes.FlxShapeCircle";
      Jk.__super__ = ai;
      Jk.prototype = q(ai.prototype, {
        drawSpecificShape: function (a) {
          Fc.drawCircle(this, this.radius, this.radius, this.radius, this.fillColor, this.lineStyle, {
            matrix: a
          });
        },
        getStrokeOffsetX: function () {
          return this.get_strokeBuffer() / 2;
        },
        getStrokeOffsetY: function () {
          return this.get_strokeBuffer() / 2;
        },
        get_strokeBuffer: function () {
          return this.lineStyle.thickness;
        },
        __class__: Jk
      });
      var Ze = w["flixel.addons.display.shapes.FlxShapeType"] = {
        __ename__: "flixel.addons.display.shapes.FlxShapeType",
        __constructs__: null,
        ARROW: {
          _hx_name: "ARROW",
          _hx_index: 0,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        BOX: {
          _hx_name: "BOX",
          _hx_index: 1,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        CIRCLE: {
          _hx_name: "CIRCLE",
          _hx_index: 2,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        CROSS: {
          _hx_name: "CROSS",
          _hx_index: 3,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        DONUT: {
          _hx_name: "DONUT",
          _hx_index: 4,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        DOUBLE_CIRCLE: {
          _hx_name: "DOUBLE_CIRCLE",
          _hx_index: 5,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        GRID: {
          _hx_name: "GRID",
          _hx_index: 6,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        LIGHTNING: {
          _hx_name: "LIGHTNING",
          _hx_index: 7,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        LINE: {
          _hx_name: "LINE",
          _hx_index: 8,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        SQUARE_DONUT: {
          _hx_name: "SQUARE_DONUT",
          _hx_index: 9,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 10,
          __enum__: "flixel.addons.display.shapes.FlxShapeType",
          toString: p
        }
      };
      Ze.__constructs__ = [Ze.ARROW, Ze.BOX, Ze.CIRCLE, Ze.CROSS, Ze.DONUT, Ze.DOUBLE_CIRCLE, Ze.GRID, Ze.LIGHTNING, Ze.LINE, Ze.SQUARE_DONUT, Ze.UNKNOWN];
      function bi(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
      }
      h["lime.math.Vector2"] = bi;
      bi.__name__ = "lime.math.Vector2";
      bi.prototype = {
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        __toFlashPoint: function () {
          return null;
        },
        __class__: bi
      };
      function N(a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        this.__drawableType = 0;
        this.transparent = c;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a < 0) {
          a = 0;
        }
        if (b < 0) {
          b = 0;
        }
        this.width = a;
        this.height = b;
        this.rect = new ba(0, 0, a, b);
        this.__textureWidth = a;
        this.__textureHeight = b;
        if (a > 0 && b > 0) {
          if (c) {
            if ((d & -16777216) == 0) {
              d = 0;
            }
          } else {
            d = d & 16777215 | -16777216;
          }
          this.image = new Fb(null, 0, 0, a, b, d << 8 | d >>> 24 & 255);
          this.image.set_transparent(c);
          this.readable = this.__isValid = true;
        }
        this.__renderTransform = new ya();
        this.__worldAlpha = 1;
        this.__worldTransform = new ya();
        this.__worldColorTransform = new Ob();
        this.__renderable = true;
      }
      h["openfl.display.BitmapData"] = N;
      N.__name__ = "openfl.display.BitmapData";
      N.__interfaces__ = [qa];
      N.fromCanvas = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (a == null) {
          return null;
        }
        var c = new N(0, 0, b, 0);
        c.__fromImage(Fb.fromCanvas(a));
        c.image.set_transparent(b);
        return c;
      };
      N.fromImage = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (a == null || a.buffer == null) {
          return null;
        }
        var c = new N(0, 0, b, 0);
        c.__fromImage(a);
        c.image.set_transparent(b);
        if (c.image != null) {
          return c;
        } else {
          return null;
        }
      };
      N.fromTexture = function (a) {
        if (a == null) {
          return null;
        }
        var b = new N(a.__width, a.__height, true, 0);
        b.readable = false;
        b.__texture = a;
        b.__textureContext = a.__textureContext;
        b.image = null;
        return b;
      };
      N.prototype = {
        clone: function () {
          if (this.__isValid) {
            if (this.readable || this.image != null) {
              var a = N.fromImage(this.image.clone(), this.transparent);
            } else {
              a = new N(0, 0, this.transparent, 0);
              a.width = this.width;
              a.height = this.height;
              a.__textureWidth = this.__textureWidth;
              a.__textureHeight = this.__textureHeight;
              a.rect.copyFrom(this.rect);
              a.__framebuffer = this.__framebuffer;
              a.__framebufferContext = this.__framebufferContext;
              a.__texture = this.__texture;
              a.__textureContext = this.__textureContext;
              a.__isValid = true;
            }
          } else {
            a = new N(this.width, this.height, this.transparent, 0);
          }
          a.__worldTransform.copyFrom(this.__worldTransform);
          a.__renderTransform.copyFrom(this.__renderTransform);
          return a;
        },
        colorTransform: function (a, b) {
          if (this.readable) {
            this.image.colorTransform(a.__toLimeRectangle(), b.__toLimeColorMatrix());
          }
        },
        copyPixels: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (this.readable && a != null) {
            if (e != null) {
              N.__tempVector.x = e.x;
              N.__tempVector.y = e.y;
            }
            this.image.copyPixels(a.image, b.__toLimeRectangle(), c.__toLimeVector2(), d != null ? d.image : null, e != null ? N.__tempVector : null, f);
          }
        },
        dispose: function () {
          this.image = null;
          this.height = this.width = 0;
          this.rect = null;
          this.readable = this.__isValid = false;
          this.__textureContext = this.__texture = this.__framebufferContext = this.__framebuffer = this.__vertexBuffer = this.__surface = null;
        },
        disposeImage: function () {
          this.readable = false;
        },
        draw: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (a != null) {
            var k = true;
            var t = null;
            if (a instanceof Ba) {
              t = wa.__cast(a, Ba);
              if (!t.get_visible()) {
                k = false;
                t.set_visible(true);
              }
            }
            a.__update(false, true);
            var l = ya.__pool.get();
            l.copyFrom(a.__renderTransform);
            l.invert();
            if (b != null) {
              l.concat(b);
            }
            b = null;
            if (e != null) {
              b = ya.__pool.get();
              b.copyFrom(l);
              b.invert();
            }
            var g = new Ob();
            g.__copyFrom(a.__worldColorTransform);
            g.__invert();
            if (this.readable || ia.get_current().stage.context3D == null) {
              if (c != null) {
                var V = ba.__pool.get();
                var m = ya.__pool.get();
                a.__getBounds(V, m);
                var Ka = Math.ceil(V.width);
                var h = Math.ceil(V.height);
                m.tx = -V.x;
                m.ty = -V.y;
                Ka = new N(Ka, h, true, 0);
                Ka.draw(a, m);
                Ka.colorTransform(Ka.rect, c);
                Ka.__renderTransform.identity();
                Ka.__renderTransform.tx = V.x;
                Ka.__renderTransform.ty = V.y;
                Ka.__renderTransform.concat(a.__renderTransform);
                Ka.__worldAlpha = a.__worldAlpha;
                Ka.__worldColorTransform.__copyFrom(a.__worldColorTransform);
                a = Ka;
                ba.__pool.release(V);
                ya.__pool.release(m);
              }
              Wa.convertToCanvas(this.image);
              c = new og(this.image.buffer.__srcContext);
              c.__allowSmoothing = f;
              c.__overrideBlendMode = d;
              c.__worldTransform = l;
              c.__worldAlpha = 1 / a.__worldAlpha;
              c.__worldColorTransform = g;
              if (e != null) {
                c.__pushMaskRect(e, b);
              }
              this.__drawCanvas(a, c);
            } else {
              if (this.__textureContext == null) {
                this.__textureContext = ka.current.__window.context;
              }
              if (c != null) {
                g.__combine(c);
              }
              c = new tb(ia.get_current().stage.context3D, this);
              c.__allowSmoothing = f;
              c.__pixelRatio = ia.get_current().stage.window.__scale;
              c.__overrideBlendMode = d;
              c.__worldTransform = l;
              c.__worldAlpha = 1 / a.__worldAlpha;
              c.__worldColorTransform = g;
              c.__resize(this.width, this.height);
              if (e != null) {
                c.__pushMaskRect(e, b);
              }
              this.__drawGL(a, c);
            }
            if (e != null) {
              c.__popMaskRect();
              ya.__pool.release(b);
            }
            ya.__pool.release(l);
            if (t != null && !k) {
              t.set_visible(false);
            }
          }
        },
        fillRect: function (a, b) {
          this.__fillRect(a, b, true);
        },
        getIndexBuffer: function (a, b) {
          if (this.__indexBuffer == null || this.__indexBufferContext != a.__context || b != null && this.__indexBufferGrid == null || this.__indexBufferGrid != null && !this.__indexBufferGrid.equals(b)) {
            this.__indexBufferContext = a.__context;
            this.__indexBuffer = null;
            if (b != null) {
              if (this.__indexBufferGrid == null) {
                this.__indexBufferGrid = new ba();
              }
              this.__indexBufferGrid.copyFrom(b);
              var c = b.width;
              b = b.height;
              if (c != 0 && b != 0) {
                this.__indexBufferData = new Uint16Array(54);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 0;
                this.__indexBufferData[8] = 5;
                this.__indexBufferData[9] = 5;
                this.__indexBufferData[10] = 0;
                this.__indexBufferData[11] = 2;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 4;
                this.__indexBufferData[14] = 7;
                this.__indexBufferData[15] = 7;
                this.__indexBufferData[16] = 4;
                this.__indexBufferData[17] = 5;
                this.__indexBufferData[18] = 8;
                this.__indexBufferData[19] = 9;
                this.__indexBufferData[20] = 0;
                this.__indexBufferData[21] = 0;
                this.__indexBufferData[22] = 9;
                this.__indexBufferData[23] = 1;
                this.__indexBufferData[24] = 10;
                this.__indexBufferData[25] = 8;
                this.__indexBufferData[26] = 4;
                this.__indexBufferData[27] = 4;
                this.__indexBufferData[28] = 8;
                this.__indexBufferData[29] = 0;
                this.__indexBufferData[30] = 11;
                this.__indexBufferData[31] = 10;
                this.__indexBufferData[32] = 6;
                this.__indexBufferData[33] = 6;
                this.__indexBufferData[34] = 10;
                this.__indexBufferData[35] = 4;
                this.__indexBufferData[36] = 12;
                this.__indexBufferData[37] = 13;
                this.__indexBufferData[38] = 8;
                this.__indexBufferData[39] = 8;
                this.__indexBufferData[40] = 13;
                this.__indexBufferData[41] = 9;
                this.__indexBufferData[42] = 14;
                this.__indexBufferData[43] = 12;
                this.__indexBufferData[44] = 10;
                this.__indexBufferData[45] = 10;
                this.__indexBufferData[46] = 12;
                this.__indexBufferData[47] = 8;
                this.__indexBufferData[48] = 15;
                this.__indexBufferData[49] = 14;
                this.__indexBufferData[50] = 11;
                this.__indexBufferData[51] = 11;
                this.__indexBufferData[52] = 14;
                this.__indexBufferData[53] = 10;
                this.__indexBuffer = a.createIndexBuffer(54);
              } else if (c == 0 && b != 0) {
                this.__indexBufferData = new Uint16Array(18);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 5;
                this.__indexBufferData[8] = 0;
                this.__indexBufferData[9] = 0;
                this.__indexBufferData[10] = 5;
                this.__indexBufferData[11] = 1;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 7;
                this.__indexBufferData[14] = 4;
                this.__indexBufferData[15] = 4;
                this.__indexBufferData[16] = 7;
                this.__indexBufferData[17] = 5;
                this.__indexBuffer = a.createIndexBuffer(18);
              } else if (c != 0 && b == 0) {
                this.__indexBufferData = new Uint16Array(18);
                this.__indexBufferData[0] = 0;
                this.__indexBufferData[1] = 1;
                this.__indexBufferData[2] = 2;
                this.__indexBufferData[3] = 2;
                this.__indexBufferData[4] = 1;
                this.__indexBufferData[5] = 3;
                this.__indexBufferData[6] = 4;
                this.__indexBufferData[7] = 0;
                this.__indexBufferData[8] = 5;
                this.__indexBufferData[9] = 5;
                this.__indexBufferData[10] = 0;
                this.__indexBufferData[11] = 2;
                this.__indexBufferData[12] = 6;
                this.__indexBufferData[13] = 4;
                this.__indexBufferData[14] = 7;
                this.__indexBufferData[15] = 7;
                this.__indexBufferData[16] = 4;
                this.__indexBufferData[17] = 5;
                this.__indexBuffer = a.createIndexBuffer(18);
              }
            } else {
              this.__indexBufferGrid = null;
            }
            if (this.__indexBuffer == null) {
              this.__indexBufferData = new Uint16Array(6);
              this.__indexBufferData[0] = 0;
              this.__indexBufferData[1] = 1;
              this.__indexBufferData[2] = 2;
              this.__indexBufferData[3] = 2;
              this.__indexBufferData[4] = 1;
              this.__indexBufferData[5] = 3;
              this.__indexBuffer = a.createIndexBuffer(6);
            }
            this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
          }
          return this.__indexBuffer;
        },
        getVertexBuffer: function (a, b, c) {
          if (this.__vertexBuffer == null || this.__vertexBufferContext != a.__context || b != null && this.__vertexBufferGrid == null || this.__vertexBufferGrid != null && !this.__vertexBufferGrid.equals(b) || c != null && (this.__vertexBufferWidth != c.get_width() || this.__vertexBufferHeight != c.get_height() || this.__vertexBufferScaleX != c.get_scaleX() || this.__vertexBufferScaleY != c.get_scaleY())) {
            this.__uvRect = new ba(0, 0, this.width, this.height);
            this.__vertexBufferContext = a.__context;
            this.__vertexBuffer = null;
            if (c != null) {
              this.__vertexBufferWidth = c.get_width();
              this.__vertexBufferHeight = c.get_height();
              this.__vertexBufferScaleX = c.get_scaleX();
              this.__vertexBufferScaleY = c.get_scaleY();
            }
            if (b != null && c != null) {
              if (this.__vertexBufferGrid == null) {
                this.__vertexBufferGrid = new ba();
              }
              this.__vertexBufferGrid.copyFrom(b);
              this.__vertexBufferWidth = c.get_width();
              this.__vertexBufferHeight = c.get_height();
              this.__vertexBufferScaleX = c.get_scaleX();
              this.__vertexBufferScaleY = c.get_scaleY();
              var d = b.width;
              var e = b.height;
              if (d != 0 && e != 0) {
                this.__vertexBufferData = new Float32Array(224);
                var f = b.x;
                var k = b.y;
                var t = this.width - d - f;
                var l = this.height - e - k;
                b = f / this.width;
                var g = k / this.height;
                d /= this.width;
                e /= this.height;
                f /= c.get_scaleX();
                k /= c.get_scaleY();
                t /= c.get_scaleX();
                var V = l / c.get_scaleY();
                l = c.get_width() / c.get_scaleX() - f - t;
                t = c.get_height() / c.get_scaleY() - k - V;
                this.__vertexBufferData[0] = f;
                this.__vertexBufferData[1] = k;
                this.__vertexBufferData[3] = b * 1;
                this.__vertexBufferData[4] = g * 1;
                this.__vertexBufferData[15] = k;
                this.__vertexBufferData[18] = g * 1;
                this.__vertexBufferData[28] = f;
                this.__vertexBufferData[31] = b * 1;
                this.__vertexBufferData[56] = f + l;
                this.__vertexBufferData[57] = k;
                this.__vertexBufferData[59] = (b + d) * 1;
                this.__vertexBufferData[60] = g * 1;
                this.__vertexBufferData[70] = f + l;
                this.__vertexBufferData[73] = (b + d) * 1;
                this.__vertexBufferData[84] = this.width;
                this.__vertexBufferData[85] = k;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = g * 1;
                this.__vertexBufferData[98] = this.width;
                this.__vertexBufferData[101] = 1;
                this.__vertexBufferData[112] = f;
                this.__vertexBufferData[113] = k + t;
                this.__vertexBufferData[115] = b * 1;
                this.__vertexBufferData[116] = (g + e) * 1;
                this.__vertexBufferData[127] = k + t;
                this.__vertexBufferData[130] = (g + e) * 1;
                this.__vertexBufferData[140] = f + l;
                this.__vertexBufferData[141] = k + t;
                this.__vertexBufferData[143] = (b + d) * 1;
                this.__vertexBufferData[144] = (g + e) * 1;
                this.__vertexBufferData[154] = this.width;
                this.__vertexBufferData[155] = k + t;
                this.__vertexBufferData[157] = 1;
                this.__vertexBufferData[158] = (g + e) * 1;
                this.__vertexBufferData[168] = f;
                this.__vertexBufferData[169] = this.height;
                this.__vertexBufferData[171] = b * 1;
                this.__vertexBufferData[172] = 1;
                this.__vertexBufferData[183] = this.height;
                this.__vertexBufferData[186] = 1;
                this.__vertexBufferData[196] = f + l;
                this.__vertexBufferData[197] = this.height;
                this.__vertexBufferData[199] = (b + d) * 1;
                this.__vertexBufferData[200] = 1;
                this.__vertexBufferData[210] = this.width;
                this.__vertexBufferData[211] = this.height;
                this.__vertexBufferData[213] = 1;
                this.__vertexBufferData[214] = 1;
                this.__vertexBuffer = a.createVertexBuffer(16, 14);
              } else if (d == 0 && e != 0) {
                this.__vertexBufferData = new Float32Array(112);
                k = b.y;
                l = this.height - e - k;
                g = k / this.height;
                e /= this.height;
                k /= c.get_scaleY();
                V = l / c.get_scaleY();
                t = c.get_height() / c.get_scaleY() - k - V;
                c = c.get_width() / c.get_scaleX();
                this.__vertexBufferData[0] = c;
                this.__vertexBufferData[1] = k;
                this.__vertexBufferData[3] = 1;
                this.__vertexBufferData[4] = g * 1;
                this.__vertexBufferData[15] = k;
                this.__vertexBufferData[18] = g * 1;
                this.__vertexBufferData[28] = c;
                this.__vertexBufferData[31] = 1;
                this.__vertexBufferData[56] = c;
                this.__vertexBufferData[57] = k + t;
                this.__vertexBufferData[59] = 1;
                this.__vertexBufferData[60] = (g + e) * 1;
                this.__vertexBufferData[71] = k + t;
                this.__vertexBufferData[74] = (g + e) * 1;
                this.__vertexBufferData[84] = c;
                this.__vertexBufferData[85] = this.height;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = 1;
                this.__vertexBufferData[99] = this.height;
                this.__vertexBufferData[102] = 1;
                this.__vertexBuffer = a.createVertexBuffer(8, 14);
              } else if (e == 0 && d != 0) {
                this.__vertexBufferData = new Float32Array(112);
                f = b.x;
                t = this.width - d - f;
                b = f / this.width;
                d /= this.width;
                f /= c.get_scaleX();
                t /= c.get_scaleX();
                l = c.get_width() / c.get_scaleX() - f - t;
                c = c.get_height() / c.get_scaleY();
                this.__vertexBufferData[0] = f;
                this.__vertexBufferData[1] = c;
                this.__vertexBufferData[3] = b * 1;
                this.__vertexBufferData[4] = 1;
                this.__vertexBufferData[15] = c;
                this.__vertexBufferData[18] = 1;
                this.__vertexBufferData[28] = f;
                this.__vertexBufferData[31] = b * 1;
                this.__vertexBufferData[56] = f + l;
                this.__vertexBufferData[57] = c;
                this.__vertexBufferData[59] = (b + d) * 1;
                this.__vertexBufferData[60] = 1;
                this.__vertexBufferData[70] = f + l;
                this.__vertexBufferData[73] = (b + d) * 1;
                this.__vertexBufferData[84] = this.width;
                this.__vertexBufferData[85] = c;
                this.__vertexBufferData[87] = 1;
                this.__vertexBufferData[88] = 1;
                this.__vertexBufferData[98] = this.width;
                this.__vertexBufferData[101] = 1;
                this.__vertexBuffer = a.createVertexBuffer(8, 14);
              }
            } else {
              this.__vertexBufferGrid = null;
            }
            if (this.__vertexBuffer == null) {
              this.__vertexBufferData = new Float32Array(56);
              this.__vertexBufferData[0] = this.width;
              this.__vertexBufferData[1] = this.height;
              this.__vertexBufferData[3] = 1;
              this.__vertexBufferData[4] = 1;
              this.__vertexBufferData[15] = this.height;
              this.__vertexBufferData[18] = 1;
              this.__vertexBufferData[28] = this.width;
              this.__vertexBufferData[31] = 1;
              this.__vertexBuffer = a.createVertexBuffer(3, 14);
            }
            this.__vertexBuffer.uploadFromTypedArray(fj.toArrayBufferView(this.__vertexBufferData));
          }
          return this.__vertexBuffer;
        },
        getPixel32: function (a, b) {
          if (this.readable) {
            return this.image.getPixel32(a, b, 1);
          } else {
            return 0;
          }
        },
        getTexture: function (a) {
          if (!this.__isValid) {
            return null;
          }
          if (this.__texture == null || this.__textureContext != a.__context) {
            this.__textureContext = a.__context;
            this.__texture = a.createRectangleTexture(this.width, this.height, 1, false);
            this.__textureVersion = -1;
          }
          Wa.sync(this.image, false);
          if (this.image != null && this.image.version > this.__textureVersion) {
            if (this.__surface != null) {
              Jp.flush(this.__surface);
            }
            a = this.image;
            if (!Yb.__supportsBGRA && a.get_format() != 0) {
              a = a.clone();
              a.set_format(0);
            }
            this.__texture.__uploadFromImage(a);
            this.__textureVersion = this.image.version;
            this.__textureWidth = a.buffer.width;
            this.__textureHeight = a.buffer.height;
          }
          if (!this.readable && this.image != null) {
            this.image = this.__surface = null;
          }
          return this.__texture;
        },
        lock: function () {},
        setPixel: function (a, b, c) {
          if (this.readable) {
            this.image.setPixel(a, b, c, 1);
          }
        },
        setPixel32: function (a, b, c) {
          if (this.readable) {
            this.image.setPixel32(a, b, c, 1);
          }
        },
        unlock: function (a) {},
        __drawCanvas: function (a, b) {
          var c = this.image.buffer;
          if (!b.__allowSmoothing) {
            b.applySmoothing(c.__srcContext, false);
          }
          b.__render(a);
          if (!b.__allowSmoothing) {
            b.applySmoothing(c.__srcContext, true);
          }
          c.__srcContext.setTransform(1, 0, 0, 1, 0, 0);
          c.__srcImageData = null;
          c.data = null;
          this.image.dirty = true;
          this.image.version++;
        },
        __drawGL: function (a, b) {
          var c = b.__context3D;
          var d = c.__state.renderToTexture;
          var e = c.__state.renderToTextureDepthStencil;
          var f = c.__state.renderToTextureAntiAlias;
          var k = c.__state.renderToTextureSurfaceSelector;
          c.setRenderToTexture(this.getTexture(c), true);
          b.__render(a);
          if (d != null) {
            c.setRenderToTexture(d, e, f, k);
          } else {
            c.setRenderToBackBuffer();
          }
        },
        __fillRect: function (a, b, c) {
          if (a != null) {
            if (this.transparent && (b & -16777216) == 0) {
              b = 0;
            }
            if (c && this.__texture != null && this.__texture.__glFramebuffer != null && ia.get_current().stage.__renderer.__type == "opengl") {
              c = ia.get_current().stage.__renderer.__context3D;
              var d = !this.rect.equals(a);
              var e = c.__state.renderToTexture;
              var f = c.__state.renderToTextureDepthStencil;
              var k = c.__state.renderToTextureAntiAlias;
              var t = c.__state.renderToTextureSurfaceSelector;
              c.setRenderToTexture(this.__texture);
              if (d) {
                c.setScissorRectangle(a);
              }
              c.clear((b >>> 16 & 255) / 255, (b >>> 8 & 255) / 255, (b & 255) / 255, this.transparent ? (b >>> 24 & 255) / 255 : 1, 0, 0, 1);
              if (d) {
                c.setScissorRectangle(null);
              }
              if (e != null) {
                c.setRenderToTexture(e, f, k, t);
              } else {
                c.setRenderToBackBuffer();
              }
            } else if (this.readable) {
              this.image.fillRect(a.__toLimeRectangle(), b, 1);
            }
          }
        },
        __fromImage: function (a) {
          if (a != null && a.buffer != null) {
            this.image = a;
            this.width = a.width;
            this.height = a.height;
            this.rect = new ba(0, 0, a.width, a.height);
            this.__textureWidth = this.width;
            this.__textureHeight = this.height;
            this.__isValid = this.readable = true;
          }
        },
        __getBounds: function (a, b) {
          var c = ba.__pool.get();
          this.rect.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ba.__pool.release(c);
        },
        __setUVRect: function (a, b, c, d, e) {
          if (this.getVertexBuffer(a) != null && (d != this.__uvRect.width || e != this.__uvRect.height || b != this.__uvRect.x || c != this.__uvRect.y)) {
            if (this.__uvRect == null) {
              this.__uvRect = new ba();
            }
            this.__uvRect.setTo(b, c, d, e);
            a = this.__textureWidth > 0 ? b / this.__textureWidth : 0;
            c = this.__textureHeight > 0 ? c / this.__textureHeight : 0;
            b = this.__textureWidth > 0 ? d / this.__textureWidth : 0;
            var f = this.__textureHeight > 0 ? e / this.__textureHeight : 0;
            this.__vertexBufferData[0] = d;
            this.__vertexBufferData[1] = e;
            this.__vertexBufferData[3] = a + b;
            this.__vertexBufferData[4] = c + f;
            this.__vertexBufferData[15] = e;
            this.__vertexBufferData[17] = a;
            this.__vertexBufferData[18] = c + f;
            this.__vertexBufferData[28] = d;
            this.__vertexBufferData[31] = a + b;
            this.__vertexBufferData[32] = c;
            this.__vertexBufferData[45] = a;
            this.__vertexBufferData[46] = c;
            this.__vertexBuffer.uploadFromTypedArray(fj.toArrayBufferView(this.__vertexBufferData));
          }
        },
        __update: function (a, b) {
          this.__updateTransforms();
        },
        __updateTransforms: function (a) {
          if (a == null) {
            this.__worldTransform.identity();
          } else {
            this.__worldTransform.copyFrom(a);
          }
          this.__renderTransform.copyFrom(this.__worldTransform);
        },
        __class__: N
      };
      function xe(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        N.call(this, 0, 0, c, d);
        if (xe.preload != null) {
          this.__fromImage(xe.preload);
        } else {
          var f = this;
          Fb.loadFromBase64($e.getString(xe.resourceName), xe.resourceType).then(function (a) {
            f.__fromImage(a);
            return Eb.withValue(f);
          }).onComplete(function (a) {
            if (xe.preload == null) {
              xe.preload = a.image;
            }
            if (e != null && ha.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileCircle"] = xe;
      xe.__name__ = "flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileCircle";
      xe.__super__ = N;
      xe.prototype = q(N.prototype, {
        __class__: xe
      });
      function Bn(a) {
        xe.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      h["flixel.addons.transition.GraphicTransTileCircle"] = Bn;
      Bn.__name__ = "flixel.addons.transition.GraphicTransTileCircle";
      Bn.__super__ = xe;
      Bn.prototype = q(xe.prototype, {
        __class__: Bn
      });
      function ye(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        N.call(this, 0, 0, c, d);
        if (ye.preload != null) {
          this.__fromImage(ye.preload);
        } else {
          var f = this;
          Fb.loadFromBase64($e.getString(ye.resourceName), ye.resourceType).then(function (a) {
            f.__fromImage(a);
            return Eb.withValue(f);
          }).onComplete(function (a) {
            if (ye.preload == null) {
              ye.preload = a.image;
            }
            if (e != null && ha.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileDiamond"] = ye;
      ye.__name__ = "flixel.addons.transition._FlxTransitionSprite.RawGraphicTransTileDiamond";
      ye.__super__ = N;
      ye.prototype = q(N.prototype, {
        __class__: ye
      });
      function Kk(a) {
        ye.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      h["flixel.addons.transition.GraphicTransTileDiamond"] = Kk;
      Kk.__name__ = "flixel.addons.transition.GraphicTransTileDiamond";
      Kk.__super__ = ye;
      Kk.prototype = q(ye.prototype, {
        __class__: Kk
      });
      function ze(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        N.call(this, 0, 0, c, d);
        if (ze.preload != null) {
          this.__fromImage(ze.preload);
        } else {
          var f = this;
          Fb.loadFromBase64($e.getString(ze.resourceName), ze.resourceType).then(function (a) {
            f.__fromImage(a);
            return Eb.withValue(f);
          }).onComplete(function (a) {
            if (ze.preload == null) {
              ze.preload = a.image;
            }
            if (e != null && ha.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.addons.transition.RawGraphicTransTileSquare"] = ze;
      ze.__name__ = "flixel.addons.transition.RawGraphicTransTileSquare";
      ze.__super__ = N;
      ze.prototype = q(N.prototype, {
        __class__: ze
      });
      function Cn(a) {
        ze.call(this, 544, 32, true, -1, a);
        this.width = 544;
        this.height = 32;
      }
      h["flixel.addons.transition.GraphicTransTileSquare"] = Cn;
      Cn.__name__ = "flixel.addons.transition.GraphicTransTileSquare";
      Cn.__super__ = ze;
      Cn.prototype = q(ze.prototype, {
        __class__: Cn
      });
      function Lk(a, b, c, d, e, f, k) {
        if (k == null) {
          k = 40;
        }
        if (f == null) {
          f = 32;
        }
        if (e == null) {
          e = 32;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._newStatus = -1;
        this.status = 0;
        this._finished = false;
        this._starting = true;
        G.call(this, a, b);
        if (d == null) {
          d = cc.fromClass(Kk);
          f = e = 32;
        }
        this._delay = c;
        this.loadGraphic(d, true, e, f);
        if (this.graphic != null) {
          this.graphic.persist = true;
          this.graphic.set_destroyOnNoUse(false);
          a = [];
          b = 1;
          for (c = this.get_numFrames() - 1; b < c;) {
            d = b++;
            a.push(d);
          }
          b = a.slice();
          b.reverse();
          this.animation.add("empty", [0], 0, false);
          this.animation.add("in", a, k, false);
          this.animation.add("full", [this.get_numFrames() - 1], 0, false);
          this.animation.add("out", b, k, false);
          this.setStatus(3);
        }
      }
      h["flixel.addons.transition.FlxTransitionSprite"] = Lk;
      Lk.__name__ = "flixel.addons.transition.FlxTransitionSprite";
      Lk.__super__ = G;
      Lk.prototype = q(G.prototype, {
        start: function (a) {
          this._starting = true;
          this._finished = false;
          this._count = 0;
          this._newStatus = a;
        },
        setStatus: function (a) {
          switch (a) {
            case -1:
            case 2:
              var b = "empty";
              break;
            case 0:
              b = "in";
              break;
            case 1:
              b = "out";
              break;
            case 3:
              b = "full";
          }
          this.animation.play(b);
          this.animation.finishCallback = n(this, this.onFinishAnim);
          this.status = a;
        },
        onFinishAnim: function (a) {
          if (!this._finished) {
            this._finished = true;
            switch (this.status) {
              case 0:
                this.setStatus(3);
                break;
              case 1:
                this.setStatus(2);
            }
          }
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this._starting && (this._count += a, this._count >= this._delay)) {
            this.onTime();
          }
        },
        onTime: function () {
          this._starting = false;
          this._count = 0;
          this.setStatus(this._newStatus);
          this._newStatus = -1;
        },
        __class__: Lk
      });
      function Vi(a) {
        od.call(this, 0);
        this._effect = this.createEffect(a);
        a = this._effect.scrollFactor;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        this.add(this._effect);
      }
      h["flixel.addons.transition.Transition"] = Vi;
      Vi.__name__ = "flixel.addons.transition.Transition";
      Vi.__super__ = od;
      Vi.prototype = q(od.prototype, {
        destroy: function () {
          od.prototype.destroy.call(this);
          this.set_finishCallback(null);
          this._effect = ca.destroy(this._effect);
        },
        start: function (a) {
          this._effect.start(a);
        },
        setStatus: function (a) {
          this._effect.setStatus(a);
        },
        createEffect: function (a) {
          switch (a.type) {
            case "fade":
              return new Mk(a);
            case "none":
              throw I.thrown("Unexpected TransitionType: NONE");
            case "tiles":
              return new Nk(a);
          }
        },
        get_finishCallback: function () {
          if (this._effect != null) {
            return this._effect.finishCallback;
          } else {
            return null;
          }
        },
        set_finishCallback: function (a) {
          if (this._effect != null) {
            return this._effect.finishCallback = a;
          } else {
            return null;
          }
        },
        __class__: Vi,
        __properties__: q(od.prototype.__properties__, {
          set_finishCallback: "set_finishCallback",
          get_finishCallback: "get_finishCallback"
        })
      });
      var Ok = w["flixel.addons.transition.TransitionCameraMode"] = {
        __ename__: "flixel.addons.transition.TransitionCameraMode",
        __constructs__: null,
        TOP: {
          _hx_name: "TOP",
          _hx_index: 0,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        },
        NEW: {
          _hx_name: "NEW",
          _hx_index: 1,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        },
        DEFAULT: {
          _hx_name: "DEFAULT",
          _hx_index: 2,
          __enum__: "flixel.addons.transition.TransitionCameraMode",
          toString: p
        }
      };
      Ok.__constructs__ = [Ok.TOP, Ok.NEW, Ok.DEFAULT];
      function Dn(a, b, c, d, e, f, k) {
        if (k == null) {
          k = Ok.TOP;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = -1;
        }
        if (a == null) {
          a = "fade";
        }
        this.cameraMode = Ok.TOP;
        this.duration = 1;
        this.type = a;
        this.tileData = e;
        this.duration = c;
        this.color = b;
        if (d == null) {
          a = d = 0;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = da.pool.get().set(d, a);
          d._inPool = false;
        } else {
          a = d.x;
          a = a < -1 ? -1 : a;
          d.set_x(a > 1 ? 1 : a);
          a = d.y;
          a = a < -1 ? -1 : a;
          d.set_y(a > 1 ? 1 : a);
        }
        this.direction = d;
        this.tweenOptions = {
          onComplete: null
        };
        if (f == null) {
          f = new Ia(0, 0, g.width, g.height);
        }
        this.region = f;
        this.cameraMode = k;
      }
      h["flixel.addons.transition.TransitionData"] = Dn;
      Dn.__name__ = "flixel.addons.transition.TransitionData";
      Dn.__interfaces__ = [ub];
      Dn.prototype = {
        destroy: function () {
          this.direction = this.region = this.tweenOptions = this.direction = this.tileData = null;
        },
        __class__: Dn
      };
      function Vf(a, b, c) {
        Na.call(this, a, b, c);
      }
      h["flixel.group.FlxTypedSpriteContainer"] = Vf;
      Vf.__name__ = "flixel.group.FlxTypedSpriteContainer";
      Vf.__super__ = Na;
      Vf.prototype = q(Na.prototype, {
        initGroup: function (a) {
          this.group = new Pk(this, a);
        },
        draw: function () {
          var a = Pb._defaultCameras;
          if (this._cameras != null) {
            Pb._defaultCameras = this._cameras;
          }
          Na.prototype.draw.call(this);
          Pb._defaultCameras = a;
        },
        set_group: function (a) {
          throw I.thrown("FlxSpriteContainer.group cannot be set in FlxSpriteContainers");
        },
        set_camera: function (a) {
          this._cameras = a == null ? null : [a];
          return a;
        },
        set_cameras: function (a) {
          return this._cameras = a;
        },
        __class__: Vf
      });
      function he(a) {
        this._finalDelayTime = 0;
        this.finished = this._started = false;
        this._data = a;
        Na.call(this, undefined, undefined, undefined);
      }
      h["flixel.addons.transition.TransitionEffect"] = he;
      he.__name__ = "flixel.addons.transition.TransitionEffect";
      he.__super__ = Vf;
      he.prototype = q(Vf.prototype, {
        destroy: function () {
          Vf.prototype.destroy.call(this);
          this.finishCallback = null;
          if (this._customCamera != null) {
            if (g.cameras.list.indexOf(this._customCamera) != -1) {
              g.cameras.remove(this._customCamera, true);
            }
            this._customCamera = null;
          }
        },
        start: function (a) {
          this._started = true;
          this._endStatus = a == 0 ? 3 : 2;
          switch (this._data.cameraMode._hx_index) {
            case 0:
              a = g.cameras.list;
              this.set_camera(a[a.length - 1]);
              break;
            case 1:
              this._customCamera = new Pb(0, 0, this._data.region.width | 0, this._data.region.height | 0);
              this._customCamera.bgColor = 0;
              g.cameras.add(this._customCamera, false);
              this.set_camera(this._customCamera);
          }
        },
        setStatus: function (a) {},
        delayThenFinish: function () {
          new Gc().start(this._finalDelayTime, n(this, this.onFinish));
        },
        onFinish: function (a) {
          this.finished = true;
          if (this.finishCallback != null) {
            a = this.finishCallback;
            this.finishCallback = null;
            a();
          }
        },
        __class__: he
      });
      function Ae(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        N.call(this, 0, 0, c, d);
        if (Ae.preload != null) {
          this.__fromImage(Ae.preload);
        } else {
          var f = this;
          Fb.loadFromBase64($e.getString(Ae.resourceName), Ae.resourceType).then(function (a) {
            f.__fromImage(a);
            return Eb.withValue(f);
          }).onComplete(function (a) {
            if (Ae.preload == null) {
              Ae.preload = a.image;
            }
            if (e != null && ha.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.addons.transition._TransitionFade.RawGraphicDiagonalGradient"] = Ae;
      Ae.__name__ = "flixel.addons.transition._TransitionFade.RawGraphicDiagonalGradient";
      Ae.__super__ = N;
      Ae.prototype = q(N.prototype, {
        __class__: Ae
      });
      function En(a) {
        Ae.call(this, 319, 128, true, -1, a);
        this.width = 319;
        this.height = 128;
      }
      h["flixel.addons.transition.GraphicDiagonalGradient"] = En;
      En.__name__ = "flixel.addons.transition.GraphicDiagonalGradient";
      En.__super__ = Ae;
      En.prototype = q(Ae.prototype, {
        __class__: En
      });
      function Mk(a) {
        he.call(this, a);
        this.back = this.makeSprite(a.direction.x, a.direction.y, a.region);
        a = this.back.scrollFactor;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        this.add(this.back);
      }
      h["flixel.addons.transition.TransitionFade"] = Mk;
      Mk.__name__ = "flixel.addons.transition.TransitionFade";
      Mk.__super__ = he;
      Mk.prototype = q(he.prototype, {
        destroy: function () {
          he.prototype.destroy.call(this);
          this.back = null;
        },
        start: function (a) {
          he.prototype.start.call(this, a);
          var b = {};
          this.setTweenValues(a == 0, this._data.direction.x, this._data.direction.y, this.back, b);
          this._data.tweenOptions.onComplete = n(this, this.finishTween);
          Ha.tween(this.back, b, this._data.duration, this._data.tweenOptions);
        },
        setTweenValues: function (a, b, c, d, e) {
          var f = !a;
          if (b == 0 && c == 0) {
            d.set_alpha(a ? 0 : 1);
            e.alpha = f ? 0 : 1;
          } else if (b != 0 && c != 0) {
            if (b > 0) {
              d.set_x(a ? -this.back.get_width() : 0);
              e.x = f ? -this.back.get_width() : 0;
            } else {
              d.set_x(a ? g.width : g.width - this.back.get_width());
              e.x = f ? g.width : g.width - this.back.get_width();
            }
          } else if (b != 0) {
            if (b > 0) {
              d.set_x(a ? -this.back.get_width() : 0);
              e.x = f ? -this.back.get_width() : 0;
            } else {
              d.set_x(a ? g.width : -this.back.get_width() / 2);
              e.x = f ? g.width : -this.back.get_width() / 2;
            }
          } else if (c > 0) {
            d.set_y(a ? -this.back.get_height() : 0);
            e.y = f ? -this.back.get_height() : 0;
          } else {
            d.set_y(a ? g.height : -this.back.get_height() / 2);
            e.y = f ? g.height : -this.back.get_height() / 2;
          }
        },
        makeSprite: function (a, b, c) {
          var d = new G(c.x, c.y);
          var e = "transition" + this._data.color + "x" + a + "y" + b;
          d.set_antialiasing(false);
          if (a == 0 && b == 0) {
            d.makeGraphic(1, 1, this._data.color, false, e);
            e = d.scale;
            b = c.width | 0;
            c = c.height | 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a == 0 && b != 0) {
            d.makeGraphic(1, c.height * 2 | 0, this._data.color, false, e);
            e = pd.createGradientBitmapData(1, c.height | 0, [this._data.color, 0], 1, b > 0 ? 90 : 270);
            b = b > 0 ? c.height : 0;
            d.get_pixels().copyPixels(e, e.rect, new ob(0, b));
            e = d.scale;
            b = c.width;
            c = 1;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a != 0 && b == 0) {
            b = a > 0 ? c.width : 0;
            a = a > 0 ? 0 : 180;
            d.makeGraphic(c.width * 2 | 0, 1, this._data.color, false, e);
            e = pd.createGradientBitmapData(c.width | 0, 1, [this._data.color, 0], 1, a);
            d.get_pixels().copyPixels(e, e.rect, new ob(b, 0));
            e = d.scale;
            b = 1;
            c = c.height;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            e.set_x(b);
            e.set_y(c);
            d.updateHitbox();
          } else if (a != 0 && b != 0) {
            d.loadGraphic(this.getGradient());
            d.set_color(this._data.color);
            d.set_flipX(a < 0);
            d.set_flipY(b < 0);
          }
          return d;
        },
        getGradient: function () {
          var a = g.width;
          var b = g.height;
          var c = g.bitmap.add("flixel/images/transitions/diagonal_gradient.png").bitmap;
          var d = "flixel/images/transitions/diagonal_gradient.png:" + a + "x" + b;
          var e = g.bitmap._cache.h[d];
          if (e == null) {
            a = new N(Math.floor(a * 2.5), b, true, 0);
            b = new ya();
            b.scale(a.width / c.width, a.height / c.height);
            a.draw(c, b, null, null, null, true);
            e = g.bitmap.add(a, false, d);
            e.persist = true;
            e.set_destroyOnNoUse(false);
          }
          return e;
        },
        finishTween: function (a) {
          this.delayThenFinish();
        },
        __class__: Mk
      });
      function Nk(a) {
        this._isCenter = false;
        he.call(this, a);
        this._grpSprites = new Na();
        var b = 0;
        if (a.tileData == null) {
          a.tileData = {
            asset: null,
            width: 32,
            height: 32
          };
        }
        var c = a.region;
        var d = Math.ceil(c.width / a.tileData.width);
        var e = Math.ceil(c.height / a.tileData.height);
        var f = a.duration / (d > e ? d : e);
        var k = f * Math.abs(a.direction.x);
        f *= Math.abs(a.direction.y);
        var t = a.tileData.width;
        var l = a.tileData.height;
        var g = c.x | 0;
        var V = c.y | 0;
        if (a.direction.x < 0) {
          t *= -1;
          g += c.width + t | 0;
        }
        if (a.direction.y < 0) {
          l *= -1;
          V += c.height + l | 0;
        }
        c = g;
        for (var m = 0; m < e;) {
          var Ka = m++;
          for (var h = 0, p = d; h < p;) {
            h++;
            var n = 40;
            if (a.tileData.frameRate != null) {
              n = a.tileData.frameRate;
            }
            n = new Lk(c, V, b, a.tileData.asset, a.tileData.width, a.tileData.height, n);
            n.set_color(a.color);
            var q = n.scrollFactor;
            var Ub = 0;
            var r = 0;
            if (r == null) {
              r = 0;
            }
            if (Ub == null) {
              Ub = 0;
            }
            q.set_x(Ub);
            q.set_y(r);
            this._grpSprites.add(n);
            c += t;
            b += k;
          }
          V += l;
          c = g;
          b = (Ka + 1) * f;
        }
        this.add(this._grpSprites);
        this._isCenter = a.direction.x == 0 && a.direction.y == 0;
      }
      h["flixel.addons.transition.TransitionTiles"] = Nk;
      Nk.__name__ = "flixel.addons.transition.TransitionTiles";
      Nk.__super__ = he;
      Nk.prototype = q(he.prototype, {
        destroy: function () {
          he.prototype.destroy.call(this);
          this._grpSprites = null;
        },
        start: function (a) {
          he.prototype.start.call(this, a);
          this._grpSprites.group.forEach(function (b) {
            b.start(a);
          }, false);
        },
        setStatus: function (a) {
          he.prototype.setStatus.call(this, a);
          this._grpSprites.group.forEach(function (b) {
            b.setStatus(a);
          }, false);
        },
        update: function (a) {
          he.prototype.update.call(this, a);
          if (this._started) {
            a = true;
            for (var b = 0, c = this._grpSprites.group.members; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.status != -1 && d.status != this._endStatus) {
                a = false;
                break;
              }
            }
            if (a) {
              this._started = false;
              this.delayThenFinish();
            }
          }
        },
        __class__: Nk
      });
      function Ig(a, b, c, d, e, f) {
        this.x = new Qk(a, c, e);
        this.y = new Qk(b, d, f);
      }
      h["flixel.addons.ui.Anchor"] = Ig;
      Ig.__name__ = "flixel.addons.ui.Anchor";
      Ig.__interfaces__ = [ub];
      Ig.prototype = {
        destroy: function () {
          this.y = this.x = null;
        },
        anchorThing: function (a, b) {
          switch (this.x.side) {
            case "center":
              var c = b.x + b.get_width() / 2;
              break;
            case "left":
              c = b.x;
              break;
            case "right":
              c = b.x + b.get_width();
              break;
            default:
              c = b.x;
          }
          switch (this.y.side) {
            case "bottom":
              b = b.y + b.get_height();
              break;
            case "center":
              b = b.y + b.get_height() / 2;
              break;
            case "top":
              b = b.y;
              break;
            default:
              b = b.y;
          }
          switch (this.x.flush) {
            case "center":
              c -= a.get_width() / 2;
              break;
            case "right":
              c -= a.get_width();
          }
          switch (this.y.flush) {
            case "bottom":
              b -= a.get_height();
              break;
            case "center":
              b -= a.get_height() / 2;
          }
          a.set_x(c + this.x.offset);
          a.set_y(b + this.y.offset);
        },
        getFlipped: function (a, b, c) {
          var d = a ? this.x.offset * -1 : this.x.offset;
          var e = b ? this.y.offset * -1 : this.y.offset;
          var f = a ? this.flipAnchorSide(this.x.side) : this.x.side;
          var k = b ? this.flipAnchorSide(this.y.side) : this.y.side;
          a = a ? this.flipAnchorSide(this.x.flush) : this.x.flush;
          b = b ? this.flipAnchorSide(this.y.flush) : this.y.flush;
          if (c == null) {
            c = new Ig(d, e, f, k, a, b);
          } else {
            c.x.offset = d;
            c.y.offset = e;
            c.x.side = f;
            c.y.side = k;
            c.x.flush = a;
            c.y.flush = b;
          }
          return c;
        },
        clone: function () {
          return new Ig(this.x.offset, this.y.offset, this.x.side, this.y.side, this.x.flush, this.y.flush);
        },
        flipAnchorSide: function (a) {
          if (a == "left") {
            return "right";
          } else if (a == "right") {
            return "left";
          } else if (a == "top") {
            return "bottom";
          } else if (a == "bottom") {
            return "top";
          } else {
            return a;
          }
        },
        __class__: Ig
      };
      function Qk(a, b, c) {
        this.side = this.flush = "center";
        this.offset = 0;
        this.offset = a;
        this.side = b;
        this.flush = c;
      }
      h["flixel.addons.ui.AnchorPoint"] = Qk;
      Qk.__name__ = "flixel.addons.ui.AnchorPoint";
      Qk.prototype = {
        __class__: Qk
      };
      function af(a, b, c, d) {
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        this.style = a;
        this.color = b;
        this.size = c;
        this.quality = d;
      }
      h["flixel.addons.ui.BorderDef"] = af;
      af.__name__ = "flixel.addons.ui.BorderDef";
      af.fromXML = function (a) {
        var b = D.xml_str(a, "border");
        var c = cb.NONE;
        var d = D.xml_color(a, "border_color", true, 0);
        var e = D.xml_f(a, "border_size", 1);
        var f = D.xml_f(a, "border_quality", 0);
        c = new af(c, d, e, f);
        switch (b) {
          case "":
            b = D.xml_str(a, "shadow", true, "");
            if (b != "" && b != "false" && b != "none") {
              c.style = cb.SHADOW;
              a = true;
              if (a == null) {
                a = false;
              }
              d = Gb.fromString(b);
              if (d == null) {
                if (a) {
                  d = 0;
                } else {
                  throw I.thrown("U.parseHex() unable to parse hex String " + b);
                }
              }
              c.color = d;
            } else {
              b = D.xml_str(a, "outline", true, "");
              if (b != "" && b != "false" && b != "none") {
                c.style = cb.OUTLINE;
                a = true;
                if (a == null) {
                  a = false;
                }
                d = Gb.fromString(b);
                if (d == null) {
                  if (a) {
                    d = 0;
                  } else {
                    throw I.thrown("U.parseHex() unable to parse hex String " + b);
                  }
                }
                c.color = d;
              } else {
                b = D.xml_str(a, "outline_fast");
                if (b != "" && b != "false" && b != "none") {
                  c.style = cb.OUTLINE_FAST;
                  a = true;
                  if (a == null) {
                    a = false;
                  }
                  d = Gb.fromString(b);
                  if (d == null) {
                    if (a) {
                      d = 0;
                    } else {
                      throw I.thrown("U.parseHex() unable to parse hex String " + b);
                    }
                  }
                  c.color = d;
                }
              }
            }
            break;
          case "false":
          case "none":
            c.style = cb.NONE;
            break;
          case "outline":
            c.style = cb.OUTLINE;
            break;
          case "outline_fast":
            c.style = cb.OUTLINE_FAST;
            break;
          case "shadow":
            c.style = cb.SHADOW;
        }
        return c;
      };
      af.prototype = {
        clone: function () {
          return new af(this.style, this.color, this.size, this.quality);
        },
        apply: function (a) {
          var b = this.color;
          var c = this.size;
          var d = this.quality;
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = 0;
          }
          a.set_borderStyle(this.style);
          a.set_borderColor(b);
          a.set_borderSize(c);
          a.set_borderQuality(d);
          return a;
        },
        __class__: af
      };
      function gj(a, b, c, d) {
        this.font = this.border = this.color = this.align = null;
        this.font = a;
        this.border = d;
        this.color = c;
        this.align = b;
      }
      h["flixel.addons.ui.ButtonLabelStyle"] = gj;
      gj.__name__ = "flixel.addons.ui.ButtonLabelStyle";
      gj.prototype = {
        apply: function (a) {
          if (this.font != null) {
            this.font.apply(null, a);
          }
          if (this.border != null) {
            this.border.apply(a);
          }
          if (this.color != null) {
            a.set_color(this.color);
          }
          if (this.align != null) {
            a.set_alignment(this.align);
          }
        },
        __class__: gj
      };
      function Jg() {}
      h["flixel.addons.ui.FlxBaseMultiInput"] = Jg;
      Jg.__name__ = "flixel.addons.ui.FlxBaseMultiInput";
      Jg.__interfaces__ = [ub];
      Jg.prototype = {
        destroy: function () {
          this.forbiddens = this.combos = null;
        },
        checkJustPressed: function () {
          return false;
        },
        checkPressed: function () {
          return false;
        },
        justPressed: function () {
          if (this.checkJustPressed()) {
            return this.passCombosAndForbiddens();
          } else {
            return false;
          }
        },
        pressed: function () {
          if (this.checkPressed()) {
            return this.passCombosAndForbiddens();
          } else {
            return false;
          }
        },
        equals: function (a) {
          if (a == null || yb.typeof(a) != yb.typeof(this) || this.input != a.input || this.combos == null != (a.combos == null) || this.forbiddens == null != (a.forbiddens == null)) {
            return false;
          }
          if (this.combos != null && a.combos != null) {
            for (var b = 0, c = this.combos; b < c.length;) {
              var d = c[b];
              ++b;
              if (a.combos.indexOf(d) == -1) {
                return false;
              }
            }
          }
          if (this.forbiddens != null && a.forbiddens != null) {
            b = 0;
            c = this.forbiddens;
            while (b < c.length) {
              d = c[b];
              ++b;
              if (a.forbiddens.indexOf(d) == -1) {
                return false;
              }
            }
          }
          return true;
        },
        passCombosAndForbiddens: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = true;
          }
          a = this.combos == null || this.checkCombos(a);
          b = this.forbiddens == null || this.checkForbiddens(b);
          if (a) {
            return b;
          } else {
            return false;
          }
        },
        checkCombos: function (a) {
          return false;
        },
        checkForbiddens: function (a) {
          return false;
        },
        __class__: Jg
      };
      function R(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._hasBorderAlpha = false;
        this._regen = true;
        this._formatRanges = [];
        this._autoHeight = true;
        this.borderSize = this.borderQuality = 1;
        this.borderColor = 0;
        this.borderStyle = cb.NONE;
        this.text = "";
        G.call(this, a, b);
        if (d == null || d == "") {
          this.set_text("");
          d = " ";
        } else {
          this.set_text(d);
        }
        this.textField = new Sc();
        this.textField.set_selectable(false);
        this.textField.set_multiline(true);
        this.textField.set_wordWrap(true);
        this._defaultFormat = new ld(null, e, 16777215);
        this.set_letterSpacing(0);
        this.set_font(Md.FONT_DEFAULT);
        this._formatAdjusted = new ld();
        this.textField.set_defaultTextFormat(this._defaultFormat);
        this.textField.set_text(d);
        this.set_fieldWidth(c);
        this.textField.set_embedFonts(f);
        this.textField.set_sharpness(100);
        this.textField.set_height(d.length <= 0 ? 1 : 10);
        this.set_allowCollisions(0);
        this.set_moves(false);
        this.drawFrame();
        a = b = 1;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = da.pool.get().set(b, a);
        a._inPool = false;
        this.shadowOffset = a;
      }
      h["flixel.text.FlxText"] = R;
      R.__name__ = "flixel.text.FlxText";
      R.__super__ = G;
      R.prototype = q(G.prototype, {
        destroy: function () {
          this._formatAdjusted = this._defaultFormat = this._font = this.textField = null;
          this.shadowOffset = ca.put(this.shadowOffset);
          G.prototype.destroy.call(this);
        },
        drawFrame: function (a) {
          if (a == null) {
            a = false;
          }
          this._regen = this._regen || a;
          G.prototype.drawFrame.call(this, this._regen);
        },
        setFormat: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 8;
          }
          if (e == null) {
            e = cb.NONE;
          }
          if (k) {
            this.set_font(a);
          } else if (a != null) {
            this.set_systemFont(a);
          }
          this.set_size(b);
          this.set_color(c);
          if (d != null) {
            this.set_alignment(d);
          }
          c = f;
          if (c == null) {
            c = 0;
          }
          this.set_borderStyle(e);
          this.set_borderColor(c);
          this.set_borderSize(1);
          this.set_borderQuality(1);
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return this;
        },
        updateHitbox: function () {
          this.regenGraphic();
          G.prototype.updateHitbox.call(this);
        },
        getScreenBounds: function (a, b) {
          this.regenGraphic();
          return G.prototype.getScreenBounds.call(this, a, b);
        },
        set_fieldWidth: function (a) {
          if (this.textField == null) {
            return a;
          }
          if (a <= 0) {
            this.set_wordWrap(false);
            this.set_autoSize(true);
            this._autoHeight = true;
          } else {
            this.set_autoSize(false);
            this.set_wordWrap(true);
            this.textField.set_width(a);
          }
          this._regen = true;
          return a;
        },
        get_fieldWidth: function () {
          if (this.textField != null) {
            return this.textField.get_width();
          } else {
            return 0;
          }
        },
        set_fieldHeight: function (a) {
          if (this.textField == null) {
            return a;
          }
          if (a <= 0) {
            this._autoHeight = true;
          } else {
            this._autoHeight = false;
            this.textField.set_height(a);
          }
          this._regen = true;
          return a;
        },
        set_autoSize: function (a) {
          if (this.textField != null) {
            this.textField.set_autoSize(a ? 1 : 2);
            this._regen = true;
          }
          return a;
        },
        set_text: function (a) {
          this.text = a;
          if (this.textField != null) {
            var b = this.textField.get_text();
            this.textField.set_text(a);
            this._regen = this.textField.get_text() != b || this._regen;
          }
          return a;
        },
        set_size: function (a) {
          this._defaultFormat.size = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_letterSpacing: function (a) {
          this._defaultFormat.letterSpacing = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_color: function (a) {
          if (this._defaultFormat.color == (a & 16777215)) {
            return a;
          }
          this._defaultFormat.color = a & 16777215;
          this.color = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_font: function (a) {
          this.textField.set_embedFonts(true);
          if (a != null) {
            var b = a;
            if (U.exists(a, "FONT")) {
              b = U.getFont(a).name;
            }
            this._defaultFormat.font = b;
          } else {
            this._defaultFormat.font = Md.FONT_DEFAULT;
          }
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return this._font = this._defaultFormat.font;
        },
        set_systemFont: function (a) {
          this.textField.set_embedFonts(false);
          this._defaultFormat.font = a;
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_wordWrap: function (a) {
          if (this.textField.get_wordWrap() != a) {
            this.textField.set_wordWrap(a);
            this._regen = true;
          }
          return a;
        },
        set_alignment: function (a) {
          this._defaultFormat.align = Fn.toOpenFL(a);
          this.textField.set_defaultTextFormat(this._defaultFormat);
          this.textField.setTextFormat(this._defaultFormat);
          this._regen = true;
          return a;
        },
        set_borderStyle: function (a) {
          if (a != this.borderStyle) {
            this._regen = true;
          }
          return this.borderStyle = a;
        },
        set_borderColor: function (a) {
          if (this.borderColor != a && this.borderStyle != cb.NONE) {
            this._regen = true;
          }
          this._hasBorderAlpha = (a >> 24 & 255) / 255 < 1;
          return this.borderColor = a;
        },
        set_borderSize: function (a) {
          if (a != this.borderSize && this.borderStyle != cb.NONE) {
            this._regen = true;
          }
          return this.borderSize = a;
        },
        set_borderQuality: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (a != this.borderQuality && this.borderStyle != cb.NONE) {
            this._regen = true;
          }
          return this.borderQuality = a;
        },
        set_graphic: function (a) {
          var b = this.graphic;
          a = G.prototype.set_graphic.call(this, a);
          g.bitmap.removeIfNoUse(b);
          return a;
        },
        get_width: function () {
          this.regenGraphic();
          return G.prototype.get_width.call(this);
        },
        get_height: function () {
          this.regenGraphic();
          return G.prototype.get_height.call(this);
        },
        updateColorTransform: function () {
          if (this.colorTransform == null) {
            this.colorTransform = new Ob();
          }
          if (this.alpha != 1) {
            this.colorTransform.alphaMultiplier = this.alpha;
            this.useColorTransform = true;
          } else {
            this.colorTransform.alphaMultiplier = 1;
            this.useColorTransform = false;
          }
          this.dirty = true;
        },
        regenGraphic: function () {
          if (this.textField != null && this._regen) {
            var a = 0;
            var b = 4;
            if (this.graphic != null) {
              a = this.graphic.width;
              b = this.graphic.height;
            }
            var c = Math.ceil(this.textField.get_width());
            var d = this._autoHeight ? this.textField.get_textHeight() : this.textField.get_height();
            d = Math.ceil(d) + (this._autoHeight ? 4 : 0);
            if (this.textField.get_textHeight() == 0) {
              d = b;
            }
            if (a != c || b != d) {
              a = g.bitmap.getUniqueKey("text");
              this.makeGraphic(c, d, 0, false, a);
              if (this._hasBorderAlpha) {
                this._borderPixels = this.graphic.bitmap.clone();
              }
              if (this._autoHeight) {
                this.textField.set_height(d);
              }
              this._flashRect.x = 0;
              this._flashRect.y = 0;
              this._flashRect.width = c;
              this._flashRect.height = d;
            } else {
              this.graphic.bitmap.fillRect(this._flashRect, 0);
              if (this._hasBorderAlpha) {
                if (this._borderPixels == null) {
                  this._borderPixels = new N(this.frameWidth, this.frameHeight, true);
                } else {
                  this._borderPixels.fillRect(this._flashRect, 0);
                }
              }
            }
            if (this.textField != null && this.textField.get_text() != null) {
              this.copyTextFormat(this._defaultFormat, this._formatAdjusted);
              this._matrix.identity();
              this.applyBorderStyle();
              if (this._hasBorderAlpha) {
                if (this._borderColorTransform == null) {
                  this._borderColorTransform = new Ob();
                }
                this._borderColorTransform.alphaMultiplier = (this.borderColor >> 24 & 255) / 255;
                this._borderPixels.colorTransform(this._borderPixels.rect, this._borderColorTransform);
                this.graphic.bitmap.draw(this._borderPixels);
              }
              this.applyFormats(this._formatAdjusted, false);
              this.drawTextFieldTo(this.graphic.bitmap);
            }
            this._regen = false;
            this.set_frame(this.frame);
          }
        },
        drawTextFieldTo: function (a) {
          a.draw(this.textField, this._matrix);
        },
        draw: function () {
          this.regenGraphic();
          G.prototype.draw.call(this);
        },
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.textField != null && (!g.renderTile || !!a)) {
            this.regenGraphic();
            G.prototype.calcFrame.call(this, a);
          }
        },
        applyBorderStyle: function () {
          var a = this.borderSize * this.borderQuality | 0;
          if (a <= 0) {
            a = 1;
          }
          var b = this.borderSize / a;
          switch (this.borderStyle._hx_index) {
            case 1:
              this.applyFormats(this._formatAdjusted, true);
              for (var c = 0; c < a;) {
                c++;
                var d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(b, b);
                this.drawTextFieldTo(d);
              }
              this._matrix.translate(-this.shadowOffset.x * this.borderSize, -this.shadowOffset.y * this.borderSize);
              break;
            case 2:
              this.applyFormats(this._formatAdjusted, true);
              var e = b;
              for (c = 0; c < a;) {
                c++;
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, -e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, -e);
                this.drawTextFieldTo(d);
                this._matrix.translate(e, 0);
                e += b;
              }
              break;
            case 3:
              this.applyFormats(this._formatAdjusted, true);
              e = b;
              c = 0;
              while (c < a) {
                c++;
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e, -e);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(e * 2, 0);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(0, e * 2);
                this.drawTextFieldTo(d);
                d = this._hasBorderAlpha ? this._borderPixels : this.graphic.bitmap;
                this._matrix.translate(-e * 2, 0);
                this.drawTextFieldTo(d);
                this._matrix.translate(e, -e);
                e += b;
              }
          }
        },
        applyFormats: function (a, b) {
          if (b == null) {
            b = false;
          }
          this.copyTextFormat(this._defaultFormat, a, false);
          a.color = b ? this.borderColor & 16777215 : this._defaultFormat.color;
          this.textField.setTextFormat(a);
          for (var c = 0, d = this._formatRanges; c < d.length;) {
            var e = d[c];
            ++c;
            if (this.textField.get_text().length - 1 < e.range.start) {
              break;
            } else {
              var f = e.format.format;
              this.copyTextFormat(f, a, false);
              a.color = b ? e.format.borderColor & 16777215 : f.color;
            }
            this.textField.setTextFormat(a, e.range.start, Math.min(e.range.end, this.textField.get_text().length) | 0);
          }
        },
        copyTextFormat: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          b.font = a.font;
          b.bold = a.bold;
          b.italic = a.italic;
          b.underline = a.underline;
          b.size = a.size;
          b.color = a.color;
          b.leading = a.leading;
          if (c) {
            b.align = a.align;
          }
        },
        set_frames: function (a) {
          G.prototype.set_frames.call(this, a);
          this._regen = false;
          return a;
        },
        __class__: R,
        __properties__: q(G.prototype.__properties__, {
          set_alignment: "set_alignment",
          set_wordWrap: "set_wordWrap",
          set_systemFont: "set_systemFont",
          set_font: "set_font",
          set_letterSpacing: "set_letterSpacing",
          set_size: "set_size",
          set_autoSize: "set_autoSize",
          set_fieldHeight: "set_fieldHeight",
          set_fieldWidth: "set_fieldWidth",
          get_fieldWidth: "get_fieldWidth",
          set_borderQuality: "set_borderQuality",
          set_borderSize: "set_borderSize",
          set_borderColor: "set_borderColor",
          set_borderStyle: "set_borderStyle",
          set_text: "set_text"
        })
      });
      function bf(a, b, c, d, e, f, k, t) {
        if (t == null) {
          t = true;
        }
        if (k == null) {
          k = -1;
        }
        if (f == null) {
          f = -16777216;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 150;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.backgroundColor = -1;
        this.fieldBorderThickness = 1;
        this.fieldBorderColor = -16777216;
        this.caretIndex = this.forceCase = this.maxLength = this.filterMode = 0;
        this.hasFocus = false;
        this.caretWidth = 1;
        this.background = false;
        R.call(this, a, b, c, d, e, t);
        this.set_backgroundColor(k);
        if (k != 0) {
          this.background = true;
        }
        this.set_color(f);
        this.set_caretColor(f);
        this.caret = new G();
        this.caret.makeGraphic(this.caretWidth, e + 2 | 0);
        this._caretTimer = new Gc();
        this.set_caretIndex(0);
        this.set_hasFocus(false);
        if (this.background) {
          this.fieldBorderSprite = new G(a, b);
          this.backgroundSprite = new G(a, b);
        }
        this.set_lines(1);
        ia.get_current().stage.addEventListener("keyDown", n(this, this.onKeyDown));
        if (d == null) {
          d = "";
        }
        this.set_text(d);
        this.calcFrame();
      }
      h["flixel.addons.ui.FlxInputText"] = bf;
      bf.__name__ = "flixel.addons.ui.FlxInputText";
      bf.__super__ = R;
      bf.prototype = q(R.prototype, {
        set_caretColor: function (a) {
          this.caretColor = a;
          this.dirty = true;
          return this.caretColor;
        },
        destroy: function () {
          ia.get_current().stage.removeEventListener("keyDown", n(this, this.onKeyDown));
          this.backgroundSprite = ca.destroy(this.backgroundSprite);
          this.fieldBorderSprite = ca.destroy(this.fieldBorderSprite);
          this.callback = null;
          R.prototype.destroy.call(this);
        },
        draw: function () {
          this.drawSprite(this.fieldBorderSprite);
          this.drawSprite(this.backgroundSprite);
          R.prototype.draw.call(this);
          if (this.caretColor != this.caret.color || this.caret.get_height() != (this._defaultFormat.size | 0) + 2) {
            this.caret.set_color(this.caretColor);
          }
          this.drawSprite(this.caret);
        },
        drawSprite: function (a) {
          if (a != null && a.visible) {
            a.scrollFactor = this.scrollFactor;
            a.set_cameras(this.get_cameras());
            a.draw();
          }
        },
        update: function (a) {
          R.prototype.update.call(this, a);
          if (g.mouse._leftButton.current == 2) {
            a = this.hasFocus;
            if (g.mouse.overlaps(this, this.get_camera())) {
              this.set_caretIndex(this.getCaretIndex());
              this.set_hasFocus(true);
              if (!a && this.focusGained != null) {
                this.focusGained();
              }
            } else {
              this.set_hasFocus(false);
              if (a && this.focusLost != null) {
                this.focusLost();
              }
            }
          }
        },
        onKeyDown: function (a) {
          var b = a.keyCode;
          if (this.hasFocus) {
            if (b == 67 && a.ctrlKey) {
              yc.set_text(this.text);
              this.onChange("copy");
            } else if (b == 86 && a.ctrlKey) {
              a = this.filter(yc.get_text());
              if (a.length > 0 && (this.maxLength == 0 || this.text.length + a.length < this.maxLength)) {
                this.set_text(this.insertSubstring(this.text, a, this.caretIndex));
                this.set_caretIndex(this.caretIndex + a.length);
                this.onChange("input");
                this.onChange("paste");
              }
            } else if (b == 88 && a.ctrlKey) {
              yc.set_text(this.text);
              this.set_text("");
              this.set_caretIndex(0);
              this.onChange("input");
              this.onChange("cut");
            } else if (b != 16 && b != 17 && b != 220 && b != 27) {
              if (b == 37) {
                if (this.caretIndex > 0) {
                  this.set_caretIndex(this.caretIndex - 1);
                  this.set_text(this.text);
                }
              } else if (b == 39) {
                if (this.caretIndex < this.text.length) {
                  this.set_caretIndex(this.caretIndex + 1);
                  this.set_text(this.text);
                }
              } else if (b == 35) {
                this.set_caretIndex(this.text.length);
                this.set_text(this.text);
              } else if (b == 36) {
                this.set_caretIndex(0);
                this.set_text(this.text);
              } else if (b == 8) {
                if (this.caretIndex > 0) {
                  this.set_caretIndex(this.caretIndex - 1);
                  this.set_text(this.text.substring(0, this.caretIndex) + this.text.substring(this.caretIndex + 1));
                  this.onChange("backspace");
                }
              } else if (b == 46) {
                if (this.text.length > 0 && this.caretIndex < this.text.length) {
                  this.set_text(this.text.substring(0, this.caretIndex) + this.text.substring(this.caretIndex + 1));
                  this.onChange("delete");
                }
              } else if (b == 13) {
                this.onChange("enter");
              } else if (a.charCode != 0) {
                a = this.filter(String.fromCodePoint(a.charCode));
                if (a.length > 0 && (this.maxLength == 0 || this.text.length + a.length < this.maxLength)) {
                  this.set_text(this.insertSubstring(this.text, a, this.caretIndex));
                  this.set_caretIndex(this.caretIndex + 1);
                  this.onChange("input");
                }
              }
            }
          }
        },
        onChange: function (a) {
          if (this.callback != null) {
            this.callback(this.text, a);
          }
        },
        insertSubstring: function (a, b, c) {
          return a = c != a.length ? a.substring(0, c) + b + a.substring(c) : a + b;
        },
        getCaretIndex: function () {
          var a = g.mouse.x - this.x;
          var b = g.mouse.y - this.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          return this.getCharIndexAtPoint(b.x, b.y);
        },
        getCharBoundaries: function (a) {
          if (this._charBoundaries != null && a >= 0 && this._charBoundaries.length > 0) {
            var b = new ba();
            if (a >= this._charBoundaries.length) {
              a = this._charBoundaries[this._charBoundaries.length - 1];
              var c = b;
            } else {
              a = this._charBoundaries[a];
              c = b;
            }
            if (c == null) {
              c = new ba();
            }
            c.x = a.x;
            c.y = a.y;
            c.width = a.width;
            c.height = a.height;
            return b;
          }
          return null;
        },
        set_text: function (a) {
          var b = R.prototype.set_text.call(this, a);
          if (this.textField == null) {
            return b;
          }
          var c = a.length;
          this.prepareCharBoundaries(c);
          this.textField.set_text("");
          var d = 0;
          var e;
          var f = 0;
          for (var k = 0; k < c;) {
            var t = k++;
            this.textField.appendText(L.substr(a, t, 1));
            e = this.textField.get_textWidth();
            if (t == 0) {
              d = this.textField.get_textHeight();
            }
            this._charBoundaries[t].x = 2 + f;
            this._charBoundaries[t].y = 2;
            this._charBoundaries[t].width = e - f;
            this._charBoundaries[t].height = d;
            f = e;
          }
          this.textField.set_text(a);
          this.onSetTextCheck();
          return b;
        },
        getCharIndexAtPoint: function (a, b) {
          b = 0;
          if (this._charBoundaries != null && this._charBoundaries.length > 0 && this.textField.get_textWidth() <= this.textField.get_width()) {
            switch (this.getAlignStr()) {
              case "center":
                a = a - this.textField.get_width() / 2 + this.textField.get_textWidth() / 2;
                break;
              case "right":
                a = a - this.textField.get_width() + this.textField.get_textWidth();
            }
          }
          if (this._charBoundaries != null) {
            for (var c = 0, d = this._charBoundaries; c < d.length;) {
              var e = d[c];
              ++c;
              if (a >= e.x && a <= e.x + e.width) {
                return b;
              }
              ++b;
            }
          }
          if (this._charBoundaries != null && this._charBoundaries.length > 0 && a > this.textField.get_textWidth()) {
            return this._charBoundaries.length;
          } else {
            return 0;
          }
        },
        prepareCharBoundaries: function (a) {
          if (this._charBoundaries == null) {
            this._charBoundaries = [];
          }
          if (this._charBoundaries.length > a) {
            for (var b = 0, c = this._charBoundaries.length - a; b < c;) {
              b++;
              this._charBoundaries.pop();
            }
          }
          b = 0;
          for (c = a; b < c;) {
            a = b++;
            if (this._charBoundaries.length - 1 < a) {
              a = this._charBoundaries;
              var d = 0;
              var e = 0;
              var f = 0;
              var k = 0;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              var t = Ia._pool.get();
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              t.x = d;
              t.y = e;
              t.width = f;
              t.height = k;
              t._inPool = false;
              a.push(t);
            }
          }
        },
        onSetTextCheck: function () {},
        calcFrame: function (a) {
          if (a == null) {
            a = false;
          }
          R.prototype.calcFrame.call(this, a);
          if (this.fieldBorderSprite != null) {
            if (this.fieldBorderThickness > 0) {
              this.fieldBorderSprite.makeGraphic(this.get_width() + this.fieldBorderThickness * 2 | 0, this.get_height() + this.fieldBorderThickness * 2 | 0, this.fieldBorderColor);
              this.fieldBorderSprite.set_x(this.x - this.fieldBorderThickness);
              this.fieldBorderSprite.set_y(this.y - this.fieldBorderThickness);
            } else if (this.fieldBorderThickness == 0) {
              this.fieldBorderSprite.set_visible(false);
            }
          }
          if (this.backgroundSprite != null) {
            if (this.background) {
              this.backgroundSprite.makeGraphic(this.get_width() | 0, this.get_height() | 0, this.backgroundColor);
              this.backgroundSprite.set_x(this.x);
              this.backgroundSprite.set_y(this.y);
            } else {
              this.backgroundSprite.set_visible(false);
            }
          }
          if (this.caret != null) {
            a = this.caretWidth;
            var b = (this._defaultFormat.size | 0) + 2 | 0;
            var c = this.borderColor & 16777215 | -16777216;
            var d = this.caretColor & 16777215 | -16777216;
            var e = "caret" + a + "x" + b + "c:" + d + "b:" + y.string(this.borderStyle) + "," + this.borderSize + "," + c;
            switch (this.borderStyle._hx_index) {
              case 0:
                this.caret.makeGraphic(a, b, d, false, e);
                this.caret.offset.set_x(this.caret.offset.set_y(0));
                break;
              case 1:
                a += this.borderSize | 0;
                b += this.borderSize | 0;
                this.caret.makeGraphic(a, b, 0, false, e);
                e = new ba(this.borderSize, this.borderSize, this.caretWidth, (this._defaultFormat.size | 0) + 2 | 0);
                this.caret.get_pixels().fillRect(e, c);
                e.x = e.y = 0;
                this.caret.get_pixels().fillRect(e, d);
                this.caret.offset.set_x(this.caret.offset.set_y(0));
                break;
              case 2:
              case 3:
                a += this.borderSize * 2 | 0;
                b += this.borderSize * 2 | 0;
                this.caret.makeGraphic(a, b, c, false, e);
                e = new ba(this.borderSize, this.borderSize, this.caretWidth, (this._defaultFormat.size | 0) + 2 | 0);
                this.caret.get_pixels().fillRect(e, d);
                this.caret.offset.set_x(this.caret.offset.set_y(this.borderSize));
            }
            this.caret.set_width(a);
            this.caret.set_height(b);
            this.set_caretIndex(this.caretIndex);
          }
        },
        toggleCaret: function (a) {
          this.caret.set_visible(!this.caret.visible);
        },
        filter: function (a) {
          if (this.forceCase == 1) {
            a = a.toUpperCase();
          } else if (this.forceCase == 2) {
            a = a.toLowerCase();
          }
          if (this.filterMode != 0) {
            switch (this.filterMode) {
              case 1:
                var b = new na("[^a-zA-Z]*", "g");
                break;
              case 2:
                b = new na("[^0-9]*", "g");
                break;
              case 3:
                b = new na("[^a-zA-Z0-9]*", "g");
                break;
              case 4:
                b = this.customFilterPattern;
                break;
              default:
                throw new Sb("FlxInputText: Unknown filterMode (" + this.filterMode + ")");
            }
            a = a.replace(b.r, "");
          }
          return a;
        },
        set_params: function (a) {
          this.params = a;
          if (this.params == null) {
            this.params = [];
          }
          this.params.push({
            name: "value",
            value: this.text
          });
          return a;
        },
        set_x: function (a) {
          if (this.fieldBorderSprite != null && this.fieldBorderThickness > 0) {
            this.fieldBorderSprite.set_x(a - this.fieldBorderThickness);
          }
          if (this.backgroundSprite != null && this.background) {
            this.backgroundSprite.set_x(a);
          }
          return R.prototype.set_x.call(this, a);
        },
        set_y: function (a) {
          if (this.fieldBorderSprite != null && this.fieldBorderThickness > 0) {
            this.fieldBorderSprite.set_y(a - this.fieldBorderThickness);
          }
          if (this.backgroundSprite != null && this.background) {
            this.backgroundSprite.set_y(a);
          }
          return R.prototype.set_y.call(this, a);
        },
        set_hasFocus: function (a) {
          if (a) {
            if (this.hasFocus != a) {
              this._caretTimer = new Gc().start(0.5, n(this, this.toggleCaret), 0);
              this.caret.set_visible(true);
              this.set_caretIndex(this.text.length);
            }
          } else {
            this.caret.set_visible(false);
            if (this._caretTimer != null) {
              this._caretTimer.cancel();
            }
          }
          if (a != this.hasFocus) {
            this.calcFrame();
          }
          return this.hasFocus = a;
        },
        getAlignStr: function () {
          var a = "left";
          if (this._defaultFormat != null && this._defaultFormat.align != null) {
            a = Fn.fromOpenFL(this._defaultFormat.align);
          }
          return a;
        },
        set_caretIndex: function (a) {
          var b = 0;
          switch (this.getAlignStr()) {
            case "center":
              if (b <= 1) {
                b = 0;
              }
              break;
            case "right":
              b = this.textField.get_width() - 2 - this.textField.get_textWidth() - 2;
              if (b < 0) {
                b = 0;
              }
              break;
            default:
              b = 0;
          }
          this.caretIndex = a;
          if (this.caretIndex > this.text.length + 1) {
            this.caretIndex = -1;
          }
          if (this.caretIndex != -1) {
            if (this.caretIndex < this.text.length) {
              a = this.getCharBoundaries(this.caretIndex);
              if (a != null) {
                this.caret.set_x(b + a.get_left() + this.x);
                this.caret.set_y(a.get_top() + this.y);
              }
            } else {
              a = this.getCharBoundaries(this.caretIndex - 1);
              if (a != null) {
                this.caret.set_x(b + a.get_right() + this.x);
                this.caret.set_y(a.get_top() + this.y);
              } else if (this.text.length == 0) {
                this.caret.set_x(this.x + b + 2);
                this.caret.set_y(this.y + 2);
              }
            }
          }
          if (this.lines == 1 && this.caret.x + this.caret.get_width() > this.x + this.get_width()) {
            this.caret.set_x(this.x + this.get_width() - 2);
          }
          return this.caretIndex;
        },
        set_forceCase: function (a) {
          this.forceCase = a;
          this.set_text(this.filter(this.text));
          return this.forceCase;
        },
        set_size: function (a) {
          R.prototype.set_size.call(this, a);
          this.caret.makeGraphic(1, (this._defaultFormat.size | 0) + 2 | 0);
          return a;
        },
        set_lines: function (a) {
          if (a == 0) {
            return 0;
          }
          if (a > 1) {
            this.textField.set_wordWrap(true);
            this.textField.set_multiline(true);
          } else {
            this.textField.set_wordWrap(false);
            this.textField.set_multiline(false);
          }
          this.lines = a;
          this.calcFrame();
          return this.lines;
        },
        set_passwordMode: function (a) {
          this.textField.set_displayAsPassword(a);
          this.calcFrame();
          return a;
        },
        set_filterMode: function (a) {
          this.filterMode = a;
          this.set_text(this.filter(this.text));
          return this.filterMode;
        },
        set_backgroundColor: function (a) {
          this.backgroundColor = a;
          this.calcFrame();
          return this.backgroundColor;
        },
        __class__: bf,
        __properties__: q(R.prototype.__properties__, {
          set_passwordMode: "set_passwordMode",
          set_backgroundColor: "set_backgroundColor",
          set_filterMode: "set_filterMode",
          set_lines: "set_lines",
          set_forceCase: "set_forceCase",
          set_caretIndex: "set_caretIndex",
          set_hasFocus: "set_hasFocus",
          set_params: "set_params",
          set_caretColor: "set_caretColor"
        })
      });
      function zd(a, b, c, d) {
        this.input = b;
        this.gamepad = a;
        this.combos = c;
        this.forbiddens = d;
      }
      h["flixel.addons.ui.FlxMultiGamepad"] = zd;
      zd.__name__ = "flixel.addons.ui.FlxMultiGamepad";
      zd.__super__ = Jg;
      zd.prototype = q(Jg.prototype, {
        destroy: function () {
          Jg.prototype.destroy.call(this);
          this.gamepad = null;
        },
        checkJustPressed: function () {
          var a = this.gamepad;
          var b = this.input;
          switch (b) {
            case -2:
              return a.anyButton(2);
            case -1:
              return !a.anyButton(2);
            default:
              b = a.mapping.getRawID(b);
              a = a.buttons[b];
              if (a != null) {
                return a.hasState(2);
              } else {
                return false;
              }
          }
        },
        checkPressed: function () {
          var a = this.gamepad;
          var b = this.input;
          switch (b) {
            case -2:
              return a.anyButton(1);
            case -1:
              return !a.anyButton(1);
            default:
              b = a.mapping.getRawID(b);
              a = a.buttons[b];
              if (a != null) {
                return a.hasState(1);
              } else {
                return false;
              }
          }
        },
        checkCombos: function (a) {
          return this.gamepad.checkButtonArrayState(this.combos, 1) == a;
        },
        checkForbiddens: function (a) {
          return this.gamepad.checkButtonArrayState(this.forbiddens, 1) == a;
        },
        __class__: zd
      });
      function xf(a, b, c, d) {
        this.sInput = b;
        zd.call(this, a, b.id, c, d);
      }
      h["flixel.addons.ui.FlxMultiGamepadAnalogStick"] = xf;
      xf.__name__ = "flixel.addons.ui.FlxMultiGamepadAnalogStick";
      xf.__super__ = zd;
      xf.prototype = q(zd.prototype, {
        destroy: function () {
          zd.prototype.destroy.call(this);
          this.sInput = null;
        },
        checkJustPressed: function () {
          if (this.gamepad == null) {
            return false;
          }
          var a = this.gamepad.get_deadZone();
          switch (this.sInput.id) {
            case 19:
              if (this.sInput.axis == Ke.X) {
                var b = this.gamepad.analog.justMoved;
                var c = b.gamepad.mapping.getAnalogStick(19);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.x];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) < -a;
                }
              } else {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(19);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.y];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getYAxisRaw(b.mapping.getAnalogStick(19)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getYAxisRaw(b.mapping.getAnalogStick(19)) < -a;
                }
              }
              return false;
            case 20:
              if (this.sInput.axis == Ke.X) {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(20);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.x];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) < -a;
                }
              } else {
                b = this.gamepad.analog.justMoved;
                c = b.gamepad.mapping.getAnalogStick(20);
                if (c == null) {
                  b = false;
                } else {
                  c = b.gamepad.buttons[c.y];
                  b = c != null && c.hasState(b.status);
                }
                if (b) {
                  if (this.sInput.positive) {
                    b = this.gamepad.analog.value.gamepad;
                    return b.getYAxisRaw(b.mapping.getAnalogStick(20)) > a;
                  }
                  b = this.gamepad.analog.value.gamepad;
                  return b.getYAxisRaw(b.mapping.getAnalogStick(20)) < -a;
                }
              }
              return false;
            default:
              return false;
          }
        },
        checkPressed: function () {
          if (this.gamepad == null) {
            return false;
          }
          var a = this.gamepad.get_deadZone();
          switch (this.sInput.id) {
            case 19:
              if (this.sInput.axis == Ke.X) {
                if (this.sInput.positive) {
                  var b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) > a;
                }
                b = this.gamepad.analog.value.gamepad;
                return b.getAnalogXAxisValue(b.mapping.getAnalogStick(19)) < -a;
              }
              if (this.sInput.positive) {
                b = this.gamepad.analog.value.gamepad;
                return b.getYAxisRaw(b.mapping.getAnalogStick(19)) > a;
              }
              b = this.gamepad.analog.value.gamepad;
              return b.getYAxisRaw(b.mapping.getAnalogStick(19)) < -a;
            case 20:
              if (this.sInput.axis == Ke.X) {
                if (this.sInput.positive) {
                  b = this.gamepad.analog.value.gamepad;
                  return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) > a;
                }
                b = this.gamepad.analog.value.gamepad;
                return b.getAnalogXAxisValue(b.mapping.getAnalogStick(20)) < -a;
              }
              if (this.sInput.positive) {
                b = this.gamepad.analog.value.gamepad;
                return b.getYAxisRaw(b.mapping.getAnalogStick(20)) > a;
              }
              b = this.gamepad.analog.value.gamepad;
              return b.getYAxisRaw(b.mapping.getAnalogStick(20)) < -a;
            default:
              return false;
          }
        },
        checkCombos: function (a) {
          if (this.gamepad == null) {
            return false;
          } else {
            return this.gamepad.checkButtonArrayState(this.combos, 1) == a;
          }
        },
        checkForbiddens: function (a) {
          if (this.gamepad == null) {
            return false;
          } else {
            return this.gamepad.checkButtonArrayState(this.forbiddens, 1) == a;
          }
        },
        __class__: xf
      });
      var Ke = w["flixel.addons.ui.XY"] = {
        __ename__: "flixel.addons.ui.XY",
        __constructs__: null,
        X: {
          _hx_name: "X",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.XY",
          toString: p
        },
        Y: {
          _hx_name: "Y",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.XY",
          toString: p
        }
      };
      Ke.__constructs__ = [Ke.X, Ke.Y];
      function dd(a, b, c) {
        this.input = a;
        this.combos = b;
        this.forbiddens = c;
      }
      h["flixel.addons.ui.FlxMultiKey"] = dd;
      dd.__name__ = "flixel.addons.ui.FlxMultiKey";
      dd.__super__ = Jg;
      dd.prototype = q(Jg.prototype, {
        checkJustPressed: function () {
          return g.keys.checkStatus(this.input, 2);
        },
        checkPressed: function () {
          return g.keys.checkStatus(this.input, 1);
        },
        checkCombos: function (a) {
          return g.keys.checkKeyArrayState(this.combos, 1) == a;
        },
        checkForbiddens: function (a) {
          return g.keys.checkKeyArrayState(this.forbiddens, 1) == a;
        },
        __class__: dd
      });
      function ci(a, b, c, d, e, f, k, t, l, J, V) {
        if (V == null) {
          V = -8224126;
        }
        if (J == null) {
          J = -16777216;
        }
        if (l == null) {
          l = 3;
        }
        if (t == null) {
          t = 15;
        }
        if (k == null) {
          k = 100;
        }
        if (f == null) {
          f = 10;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        this._justClicked = this._justHovered = false;
        this.setVariable = true;
        this.callback = null;
        this.hoverAlpha = 0.5;
        this.decimals = 0;
        Na.call(this);
        this.set_x(c);
        this.set_y(d);
        if (e == f) {
          g.log.advanced("FlxSlider: MinValue and MaxValue can't be the same (" + e + ")", Aa.ERROR, true);
        }
        this.decimals = jc.getDecimals(e);
        if (jc.getDecimals(f) > this.decimals) {
          this.decimals = jc.getDecimals(f);
        }
        this.decimals++;
        this.minValue = e;
        this.maxValue = f;
        this._object = a;
        this.set_varString(b);
        this._width = k;
        this._height = t;
        this._thickness = l;
        this._color = J;
        this._handleColor = V;
        this.createSlider();
      }
      h["flixel.addons.ui.FlxSlider"] = ci;
      ci.__name__ = "flixel.addons.ui.FlxSlider";
      ci.__super__ = Na;
      ci.prototype = q(Na.prototype, {
        createSlider: function () {
          var a = this.offset;
          var b = 7;
          var c = 18;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          c = this.x + this.offset.x;
          var d = this.y + this.offset.y;
          var e = this._width;
          b = this._height;
          if (b == null) {
            b = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a = Ia._pool.get();
          if (b == null) {
            b = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.x = c;
          a.y = d;
          a.width = e;
          a.height = b;
          a._inPool = false;
          this._bounds = a;
          this.body = new G(this.offset.x, this.offset.y);
          a = this._color;
          a = "slider:W=" + this._width + "H=" + this._height + "C=" + ("0x" + v.hex(a >> 24 & 255, 2) + v.hex(a >> 16 & 255, 2) + v.hex(a >> 8 & 255, 2) + v.hex(a & 255, 2)) + "T=" + this._thickness;
          this.body.makeGraphic(this._width, this._height, 0, false, a);
          a = this.body.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          Fc.drawLine(this.body, 0, this._height / 2, this._width, this._height / 2, {
            color: this._color,
            thickness: this._thickness
          });
          this.handle = new G(this.offset.x, this.offset.y);
          this.handle.makeGraphic(this._thickness, this._height, this._handleColor);
          a = this.handle.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.nameLabel = new R(this.offset.x, 0, this._width, this.varString);
          this.nameLabel.set_alignment("center");
          this.nameLabel.set_color(this._color);
          a = this.nameLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          b = this._height + this.offset.y + 3;
          this.valueLabel = new R(this.offset.x, b, this._width);
          this.valueLabel.set_alignment("center");
          this.valueLabel.set_color(this._handleColor);
          a = this.valueLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.minLabel = new R(-50 + this.offset.x, b, 100, y.string(this.minValue));
          this.minLabel.set_alignment("center");
          this.minLabel.set_color(this._color);
          a = this.minLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.maxLabel = new R(this._width - 50 + this.offset.x, b, 100, y.string(this.maxValue));
          this.maxLabel.set_alignment("center");
          this.maxLabel.set_color(this._color);
          a = this.maxLabel.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.body);
          this.add(this.handle);
          this.add(this.nameLabel);
          this.add(this.valueLabel);
          this.add(this.minLabel);
          this.add(this.maxLabel);
        },
        update: function (a) {
          if (this.mouseInRect(this._bounds)) {
            if (this.hoverAlpha != 1) {
              this.set_alpha(this.hoverAlpha);
            }
            if (this.hoverSound != null && !this._justHovered) {
              g.sound.play(this.hoverSound);
            }
            this._justHovered = true;
            var b = g.mouse._leftButton;
            if (b.current == 1 || b.current == 2) {
              this.handle.set_x(g.mouse.getPositionInCameraView(this.get_camera()).x);
              this.updateValue();
              if (this.clickSound != null && !this._justClicked) {
                g.sound.play(this.clickSound);
                this._justClicked = true;
              }
            }
            b = g.mouse._leftButton;
            if (b.current != 1 && b.current != 2) {
              this._justClicked = false;
            }
          } else {
            if (this.hoverAlpha != 1) {
              this.set_alpha(1);
            }
            this._justHovered = false;
          }
          b = g.mouse._leftButton;
          if ((b.current == 1 || b.current == 2) && !!this.mouseInRect(this._bounds)) {
            this.updateValue();
          }
          if (this.varString != null && ha.getProperty(this._object, this.varString) != null) {
            this.value = ha.getProperty(this._object, this.varString);
          }
          if (this.handle.x != this.get_expectedPos()) {
            this.handle.set_x(this.get_expectedPos());
          }
          this.valueLabel.set_text(y.string(jc.roundDecimal(this.value, this.decimals)));
          Na.prototype.update.call(this, a);
        },
        mouseInRect: function (a) {
          if (jc.pointInFlxRect(g.mouse.getPositionInCameraView(this.get_camera()).x, g.mouse.getPositionInCameraView(this.get_camera()).y, a)) {
            return true;
          } else {
            return false;
          }
        },
        updateValue: function () {
          if (this._lastPos != this.get_relativePos()) {
            if (this.setVariable && this.varString != null) {
              ha.setProperty(this._object, this.varString, this.get_relativePos() * (this.maxValue - this.minValue) + this.minValue);
            }
            this._lastPos = this.get_relativePos();
            if (this.callback != null) {
              this.callback(this.get_relativePos());
            }
          }
        },
        destroy: function () {
          this.body = ca.destroy(this.body);
          this.handle = ca.destroy(this.handle);
          this.minLabel = ca.destroy(this.minLabel);
          this.maxLabel = ca.destroy(this.maxLabel);
          this.nameLabel = ca.destroy(this.nameLabel);
          this.valueLabel = ca.destroy(this.valueLabel);
          this._bounds = ca.put(this._bounds);
          Na.prototype.destroy.call(this);
        },
        get_expectedPos: function () {
          var a = this.x + this.offset.x + (this._width - this.handle.get_width()) * ((this.value - this.minValue) / (this.maxValue - this.minValue));
          if (a > this.x + this._width + this.offset.x) {
            a = this.x + this._width + this.offset.x;
          } else if (a < this.x + this.offset.x) {
            a = this.x + this.offset.x;
          }
          return a;
        },
        get_relativePos: function () {
          var a = (this.handle.x - this.x - this.offset.x) / (this._width - this.handle.get_width());
          if (a > 1) {
            a = 1;
          }
          return a;
        },
        set_varString: function (a) {
          try {
            ha.getProperty(this._object, a);
            this.varString = a;
          } catch (b) {
            Oa.lastError = b;
            g.log.advanced("Could not create FlxSlider - '" + a + "' is not a valid field of '" + y.string(this._object) + "'", Aa.ERROR, true);
            this.varString = null;
          }
          return a;
        },
        set_x: function (a) {
          Na.prototype.set_x.call(this, a);
          if (this._bounds != null) {
            var b = this._bounds;
            var c = this.x + this.offset.x;
            var d = this.y + this.offset.y;
            var e = this._width;
            var f = this._height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.x = a;
        },
        set_y: function (a) {
          Na.prototype.set_y.call(this, a);
          if (this._bounds != null) {
            var b = this._bounds;
            var c = this.x + this.offset.x;
            var d = this.y + this.offset.y;
            var e = this._width;
            var f = this._height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.y = a;
        },
        __class__: ci,
        __properties__: q(Na.prototype.__properties__, {
          set_varString: "set_varString",
          get_relativePos: "get_relativePos",
          get_expectedPos: "get_expectedPos"
        })
      });
      function qd() {}
      h["flixel.addons.ui.interfaces.IFlxUIWidget"] = qd;
      qd.__name__ = "flixel.addons.ui.interfaces.IFlxUIWidget";
      qd.__isInterface__ = true;
      qd.__interfaces__ = [dj];
      qd.prototype = {
        __class__: qd,
        __properties__: {
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width"
        }
      };
      function db(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.broadcastToFlxUI = this.autoBounds = true;
        Na.call(this, a, b, undefined);
      }
      h["flixel.addons.ui.FlxTypedUIGroup"] = db;
      db.__name__ = "flixel.addons.ui.FlxTypedUIGroup";
      db.__interfaces__ = [qd];
      db.__super__ = Vf;
      db.prototype = q(Vf.prototype, {
        add: function (a) {
          Vf.prototype.add.call(this, a);
          if (this.autoBounds) {
            this.calcBounds();
          }
          return a;
        },
        remove: function (a, b) {
          if (b == null) {
            b = false;
          }
          a = Vf.prototype.remove.call(this, a, b);
          if (this.autoBounds) {
            this.calcBounds();
          }
          return a;
        },
        setScrollFactor: function (a, b) {
          for (var c = 0, d = this.group.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              e = e.scrollFactor;
              var f = a;
              var k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
          }
        },
        contains: function (a) {
          return this.group.members.indexOf(a) != -1;
        },
        calcBounds: function (a) {
          if (this.group.members == null || this.group.members.length == 0) {
            this.set_width(this.set_height(0));
            if (a != null) {
              a.x = 0;
              a.y = 0;
              a.width = 0;
              a.height = 0;
            }
          } else {
            var b = Infinity;
            var c = -Infinity;
            var d = Infinity;
            var e = -Infinity;
            for (var f = 0, k = this.group.members; f < k.length;) {
              var t = k[f];
              ++f;
              if (t != null) {
                if (t.x < b) {
                  b = t.x;
                }
                if (t.x + t.get_width() > c) {
                  c = t.x + t.get_width();
                }
                if (t.y < d) {
                  d = t.y;
                }
                if (t.y + t.get_height() > e) {
                  e = t.y + t.get_height();
                }
              }
            }
            this.set_width(c - b);
            this.set_height(e - d);
            if (a != null) {
              a.x = b;
              a.y = d;
              a.width = this.get_width();
              a.height = this.get_height();
            }
          }
        },
        __class__: db
      });
      function Ma(a, b, c, d, e, f) {
        this._scaledAssets = [];
        this._assetsToCleanUp = [];
        this._safe_input_delay_elapsed = 0;
        this._curr_mode = "";
        this._pointX = this._pointY = 1;
        this._postLoaded = false;
        this.getTextFallback = this.cursorLists = null;
        this.failed_by = 0;
        this.failed = false;
        this.safe_input_delay_time = 0.01;
        this.do_safe_input_delay = true;
        db.call(this);
        this._ptr_tongue = d;
        this._ptr = b;
        if (c != null) {
          this.setSuperIndex(c);
        }
        if (f != null) {
          this._variable_index = new xa();
          b = Object.keys(f.h);
          c = b.length;
          d = 0;
          while (d < c) {
            e = b[d++];
            this._variable_index.h[e] = f.h[e];
          }
        }
        if (a != null) {
          this.load(a);
        }
      }
      h["flixel.addons.ui.FlxUI"] = Ma;
      Ma.__name__ = "flixel.addons.ui.FlxUI";
      Ma.__interfaces__ = [nh];
      Ma.event = function (a, b, c, d) {
        var e = Ma.getLeafUIState();
        if (e != null) {
          e.getEvent(a, b, c, d);
        }
      };
      Ma.fontSize = function (a, b) {
        var c = Ma.getLeafUIState()._tongue;
        c = c ?? null;
        if (c != null) {
          b = c.getFontSize(a, b);
        }
        return b;
      };
      Ma.font = function (a, b, c) {
        if (c == null) {
          c = ".ttf";
        }
        if (b == null) {
          b = "";
        }
        var d = Ma.getLeafUIState()._tongue;
        d = d ?? null;
        if (d != null) {
          a = d.getFont(a);
        }
        return D.font(a, b, c);
      };
      Ma.forceFocus = function (a, b) {
        var c = Ma.getLeafUIState();
        if (c != null) {
          c.forceFocus(a, b);
        }
      };
      Ma.getLeafUIState = function () {
        var a = g.game._state;
        if (a != null) {
          while (a.subState != null) {
            a = a.subState;
          }
        }
        if (wa.__implements(a, Gg)) {
          return a;
        } else {
          return null;
        }
      };
      Ma.consolidateData = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (a == null && b != null) {
          return b;
        }
        if (b == null) {
          return a;
        }
        b = T.parse(Eg.print(b)).firstElement();
        for (var d = a.attributes(); d.hasNext();) {
          var e = d.next();
          var f = Mb.resolve(a, e);
          b.set(e, f);
        }
        if (a.nodeType == T.Document) {
          f = "Document";
        } else {
          if (a.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
          }
          f = a.nodeName;
        }
        if (b.nodeType != T.Element) {
          throw I.thrown("Bad node type, expected Element but found " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
        }
        b.nodeName = f;
        if (ec.resolve(a, "name") || ec.resolve(a, "id")) {
          b.set("name", D.xml_name(a));
        } else {
          b.set("name", "");
        }
        for (f = a.elements(); f.hasNext();) {
          var k = f.next();
          if (k.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element but found " + (k.nodeType == null ? "null" : lb.toString(k.nodeType)));
          }
          d = k.nodeName;
          var t = !c;
          if (c) {
            e = b.elementsNamed(d);
            var l = e.next();
            if (fc.resolve(a, d).length == 1 && l != null && e.hasNext() == 0) {
              for (d = k.attributes(); d.hasNext();) {
                e = d.next();
                l.set(e, k.get(e));
              }
            } else {
              t = true;
            }
          }
          if (t) {
            b.insertChild(T.parse(Eg.print(k)).firstElement(), 0);
          }
        }
        if (b.nodeType != T.Document && b.nodeType != T.Element) {
          throw I.thrown("Invalid nodeType " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
        }
        return b;
      };
      Ma.sortParams = function (a, b) {
        if (a.sort < b.sort) {
          return -1;
        } else if (a.sort > b.sort) {
          return 1;
        } else {
          return 0;
        }
      };
      Ma.__super__ = db;
      Ma.prototype = q(db.prototype, {
        set_focus: function (a) {
          if (this.focus != null) {
            this.onFocusLost(this.focus);
          }
          this.focus = a;
          if (this.focus != null) {
            this.onFocus(this.focus);
          }
          return a;
        },
        getEvent: function (a, b, c, d) {
          if (this._ptr != null && (this._ptr.getEvent(a, b, c, d), a == "post_load")) {
            a = Object.keys(this._asset_index.h);
            d = a.length;
            for (var e = 0; e < d;) {
              var f = a[e++];
              f = this._asset_index.h[f];
              if (f instanceof Ma) {
                f.getEvent("post_load", b, c);
              }
            }
          }
        },
        getRequest: function (a, b, c, d) {
          if (this._ptr != null) {
            return this._ptr.getRequest(a, b, c, d);
          } else {
            return null;
          }
        },
        onFocus: function (a) {
          if (a instanceof vc) {
            for (var b = 0, c = this.group.members; b < c.length;) {
              var d = c[b];
              ++b;
              this.setWidgetSuppression(d, a);
            }
          }
        },
        setWidgetSuppression: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (wa.__implements(a, yf)) {
            var d = false;
            if (a instanceof vc && a == b) {
              d = true;
            }
            if (!d) {
              a.set_skipButtonUpdate(c);
            }
          } else if (a instanceof db) {
            d = 0;
            a = a.group.members;
            while (d < a.length) {
              var e = a[d];
              ++d;
              this.setWidgetSuppression(e, b, c);
            }
          }
        },
        onFocusLost: function (a) {
          if (a instanceof vc) {
            a = 0;
            for (var b = this.group.members; a < b.length;) {
              var c = b[a];
              ++a;
              this.setWidgetSuppression(c, null, false);
            }
          }
        },
        setSuperIndex: function (a) {
          this._superIndexUI = a;
        },
        update: function (a) {
          if (this.do_safe_input_delay) {
            this._safe_input_delay_elapsed += g.elapsed;
            if (this._safe_input_delay_elapsed > this.safe_input_delay_time) {
              this.do_safe_input_delay = false;
            } else {
              return;
            }
          }
          db.prototype.update.call(this, a);
        },
        addAsset: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = "";
          }
          if (Object.prototype.hasOwnProperty.call(this._asset_index.h, b)) {
            if (b == "screen") {
              g.log.advanced("Failed to add a widget with the name 'screen', that is reserved by the system for the screen itself", Aa.NOTICE);
            } else {
              g.log.advanced("Duplicate screen name '" + b + "'", Aa.NOTICE);
            }
            return false;
          }
          c = this.getGroup(c, d);
          if (c != null) {
            c.add(a);
          } else {
            this.add(a);
          }
          this._asset_index.h[b] = a;
          return true;
        },
        destroy: function () {
          if (this._group_index != null) {
            var a = this._group_index.h;
            a = Object.keys(a);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              var e = this._group_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._group_index = null;
          }
          if (this._asset_index != null) {
            a = this._asset_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._asset_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._asset_index = null;
          }
          if (this._tag_index != null) {
            a = this._tag_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              ue.clearArray(this._tag_index.h[d]);
              e = this._tag_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._tag_index = null;
          }
          if (this._definition_index != null) {
            a = this._definition_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._definition_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._definition_index = null;
          }
          if (this._variable_index != null) {
            a = this._variable_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._variable_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._variable_index = null;
          }
          if (this._mode_index != null) {
            a = this._mode_index.h;
            a = Object.keys(a);
            b = a.length;
            for (c = 0; c < b;) {
              d = a[c++];
              e = this._mode_index;
              if (Object.prototype.hasOwnProperty.call(e.h, d)) {
                delete e.h[d];
              }
            }
            this._mode_index = null;
          }
          this._ptr_tongue = this._superIndexUI = this._ptr = null;
          if (this.cursorLists != null) {
            a = 0;
            for (b = this.cursorLists; a < b.length;) {
              c = b[a];
              ++a;
              ue.clearArray(c);
            }
            ue.clearArray(this.cursorLists);
          }
          this.cursorLists = null;
          ue.clearArray(this._failure_checks);
          this._failure_checks = null;
          ue.clearArray(this._assetsToCleanUp);
          this._assetsToCleanUp = null;
          ue.clearArray(this._scaledAssets);
          this._scaledAssets = null;
          db.prototype.destroy.call(this);
        },
        load: function (a) {
          this._group_index = new xa();
          this._asset_index = new xa();
          this._tag_index = new xa();
          this._definition_index = new xa();
          if (this._variable_index == null) {
            this._variable_index = new xa();
          }
          this._mode_index = new xa();
          if (a != null) {
            if (this._superIndexUI == null) {
              var b = new th(0, 0, g.width, g.height);
              b.name = "screen";
              this.addAsset(b, "screen");
              if (hb.resolve(a, "screen_override") && this._loadTest(Hb.resolve(a, "screen_override"))) {
                var c = Hb.resolve(a, "screen_override");
                this._loadPosition(c, b);
                b.set_width(this._loadWidth(c, g.width));
                b.set_height(this._loadHeight(c, g.height));
              }
            }
            this._data = a;
            if (hb.resolve(a, "inject")) {
              while (hb.resolve(a, "inject")) {
                var d = Hb.resolve(a, "inject");
                b = D.xml_name(d);
                var e = D.xml(b, "xml", false);
                if (e != null) {
                  var f = d.parent;
                  var k = 0;
                  b = 0;
                  for (c = f.children; b < c.length;) {
                    var t = c[b];
                    ++b;
                    if (t == d) {
                      break;
                    }
                    ++k;
                  }
                  if (f.removeChild(d)) {
                    b = 0;
                    c = e.elements();
                    while (c.hasNext()) {
                      d = c.next();
                      f.insertChild(d, k + b);
                      ++b;
                    }
                  }
                }
              }
            }
            if (hb.resolve(a, "include")) {
              b = 0;
              c = fc.resolve(a, "include");
              while (b < c.length) {
                f = c[b];
                ++b;
                f = D.xml_name(f);
                f = D.xml(f);
                if (f != null) {
                  e = 0;
                  for (t = fc.resolve(f, "definition"); e < t.length;) {
                    k = t[e];
                    ++e;
                    d = "include:" + D.xml_name(k);
                    this.unparentXML(k);
                    this._definition_index.h[d] = k;
                  }
                  if (hb.resolve(f, "point_size")) {
                    this._loadPointSize(f);
                  }
                  if (hb.resolve(f, "default")) {
                    k = 0;
                    f = fc.resolve(f, "default");
                    while (k < f.length) {
                      d = f[k];
                      ++k;
                      if (this._loadTest(d)) {
                        e = D.xml_name(d);
                        this.unparentXML(d);
                        this._definition_index.h["default:" + e] = d;
                      }
                    }
                  }
                }
              }
            }
            if (hb.resolve(a, "point_size")) {
              this._loadPointSize(a);
            }
            if (hb.resolve(a, "definition")) {
              b = 0;
              c = fc.resolve(a, "definition");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  d = D.xml_name(k);
                  f = "";
                  if (d.indexOf("default:") != -1) {
                    f = "'default:'";
                  }
                  if (d.indexOf("include:") != -1) {
                    f = "'include:'";
                  }
                  if (f != "") {
                    g.log.advanced("Can't create FlxUI definition '" + d + "', because '" + f + "' is a reserved name prefix!", Aa.WARNING, true);
                  } else {
                    this.unparentXML(k);
                    this._definition_index.h[d] = k;
                  }
                }
              }
            }
            if (hb.resolve(a, "default")) {
              b = 0;
              c = fc.resolve(a, "default");
              while (b < c.length) {
                d = c[b];
                ++b;
                if (this._loadTest(d)) {
                  e = D.xml_name(d);
                  this.unparentXML(d);
                  this._definition_index.h["default:" + e] = d;
                }
              }
            }
            if (hb.resolve(a, "variable")) {
              b = 0;
              c = fc.resolve(a, "variable");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = D.xml_name(k);
                  k = D.xml_str(k, "value");
                  if (f != "") {
                    this._variable_index.h[f] = k;
                  }
                }
              }
            }
            if (hb.resolve(a, "mode")) {
              b = 0;
              c = fc.resolve(a, "mode");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = this.applyNodeConditionals(k);
                  k = D.xml_name(k);
                  this.unparentXML(f);
                  this._mode_index.h[k] = f;
                }
              }
            }
            if (hb.resolve(a, "group")) {
              b = 0;
              c = fc.resolve(a, "group");
              while (b < c.length) {
                k = c[b];
                ++b;
                if (this._loadTest(k)) {
                  f = D.xml_name(k);
                  d = D.xml_str(k, "custom");
                  k = null;
                  if (d != "") {
                    d = this._ptr.getRequest("ui_get_group:", this, d);
                    if (d != null && d instanceof db) {
                      k = d;
                    }
                  }
                  if (k == null) {
                    k = new db();
                  }
                  k.name = f;
                  this._group_index.h[f] = k;
                  this.add(k);
                }
              }
            }
            if (a.firstElement() != null) {
              for (b = a.elements(); b.hasNext();) {
                c = b.next();
                this._loadSub(c);
              }
            }
            this._postLoad(a);
          } else {
            this._onFinishLoad();
          }
        },
        unparentXML: function (a) {
          return D.unparentXML(a);
        },
        _loadPointSize: function (a) {
          var b = Hb.resolve(a, "point_size");
          var c = -1;
          if (c == null) {
            c = 0;
          }
          var d = this._loadWidth(b, c, "x");
          b = Hb.resolve(a, "point_size");
          c = -1;
          if (c == null) {
            c = 0;
          }
          b = this._loadHeight(b, c, "y");
          if (b < 1 && d < 1) {
            d = b = this._loadHeight(Hb.resolve(a, "point_size"), -1, "value");
          }
          if (b > 0) {
            this._pointX = d;
          }
          if (d > 0) {
            this._pointY = b;
          }
        },
        _loadSub: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
          }
          var c = a.nodeName;
          if (a.nodeType != T.Document && a.nodeType != T.Element) {
            throw I.thrown("Invalid nodeType " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
          }
          if (c == "load_if") {
            if (this._loadTest(a) && a.firstElement() != null) {
              for (a = a.elements(); a.hasNext();) {
                var d = a.next();
                this._loadSub(d, b + 1);
              }
            }
          } else {
            d = null;
            b = D.xml_name(a);
            if (ec.resolve(a, "group")) {
              d = Mb.resolve(a, "group");
              d = this.getGroup(d);
            }
            c = this._loadThing(c, a);
            if (c != null) {
              this._loadGlobals(a, c);
              if (b != null && b != "") {
                this._asset_index.h[b] = c;
                c.name = b;
                var e = D.xml_str(a, "tags");
                if (e != "") {
                  e = e.split(",");
                  this._addTags(e, b);
                }
              }
              this._loadTooltip(c, a);
              if (d != null) {
                d.add(c);
              } else {
                this.add(c);
              }
              this._loadPosition(a, c);
            }
          }
        },
        _addTags: function (a, b) {
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (!Object.prototype.hasOwnProperty.call(this._tag_index.h, d)) {
              this._tag_index.h[d] = [];
            }
            d = this._tag_index.h[d];
            if (d.indexOf(b) == -1) {
              d.push(b);
            }
          }
        },
        _loadGlobals: function (a, b) {
          if (b instanceof Ca) {
            var c = D.xml_bool(a, "visible", true);
            var d = D.xml_bool(a, "active", true);
            var e = D.xml_i(a, "num_id");
            b.visible = c;
            b.active = d;
            b.ID = e;
            if (b instanceof G) {
              a = D.xml_f(a, "alpha", 1);
              b.set_alpha(a);
            }
          }
        },
        _postLoad: function (a) {
          this._postLoaded = true;
          if (a.firstElement() != null) {
            for (var b = a.elements(); b.hasNext();) {
              var c = b.next();
              if (c.nodeType != T.Element) {
                throw I.thrown("Bad node type, expected Element but found " + (c.nodeType == null ? "null" : lb.toString(c.nodeType)));
              }
              var d = c.nodeName.toLowerCase();
              if (c.nodeType != T.Document && c.nodeType != T.Element) {
                throw I.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : lb.toString(c.nodeType)));
              }
              this._postLoadThing(d, c);
            }
          }
          if (hb.resolve(a, "mode")) {
            b = 0;
            c = fc.resolve(a, "mode");
            while (b < c.length) {
              a = c[b];
              ++b;
              if (D.xml_bool(a, "is_default")) {
                a = D.xml_name(a);
                this.setMode(a);
                break;
              }
            }
          }
          if (this._failure_checks != null) {
            b = 0;
            for (c = this._failure_checks; b < c.length;) {
              a = c[b];
              ++b;
              if (this._checkFailure(a)) {
                this.failed = true;
                break;
              }
            }
            D.clearArraySoft(this._failure_checks);
            this._failure_checks = null;
          }
          this._onFinishLoad();
        },
        _sendTo: function (a, b) {
          var c = this.getAssetGroup(null, a);
          if (c == null) {
            if (this.group.members.indexOf(a) != -1) {
              c = this;
            } else {
              return;
            }
          }
          if (b == -1 || b == 1) {
            L.remove(c.group.members, a);
            switch (b) {
              case -1:
                c.group.members.splice(0, 0, a);
                break;
              case 1:
                c.group.members.push(a);
            }
          }
        },
        setMode: function (a, b) {
          if (b == null) {
            b = "";
          }
          if (this._curr_mode != a) {
            var c = this.getMode(a);
            this._curr_mode = a;
            if (b == "") {
              if (c != null) {
                for (a = c.elements(); a.hasNext();) {
                  b = a.next();
                  c = b = this.applyNodeConditionals(b);
                  if (c.nodeType != T.Element) {
                    throw I.thrown("Bad node type, expected Element but found " + (c.nodeType == null ? "null" : lb.toString(c.nodeType)));
                  }
                  var d = c.nodeName;
                  var e = D.xml_str(c, "active") == "" ? null : true;
                  if (e != null) {
                    e = D.xml_bool(c, "active");
                  }
                  if (this._loadTest(b)) {
                    switch (d) {
                      case "align":
                        this._alignThing(b);
                        break;
                      case "change":
                        this._changeThing(b);
                        break;
                      case "hide":
                        this.showThing(D.xml_name(c), false, e);
                        break;
                      case "position":
                        c = D.xml_name(c);
                        c = this.getAsset(c);
                        if (c != null) {
                          this._loadPosition(b, c);
                        }
                        break;
                      case "show":
                        this.showThing(D.xml_name(c), true, e);
                    }
                  }
                }
              }
            } else {
              b = this.getAsset(b);
              if (b != null && b instanceof Ma) {
                wa.__cast(b, Ma).setMode(a, "");
              }
            }
          }
        },
        showThing: function (a, b, c) {
          if (b == null) {
            b = true;
          }
          if (a.indexOf(",") != -1) {
            a = a.split(",");
            for (var d = 0; d < a.length;) {
              var e = a[d];
              ++d;
              var f = this.getAsset(e);
              if (f != null) {
                f.set_visible(b);
                if (c != null) {
                  f.set_active(c);
                }
              } else {
                f = this.getGroup(e);
                if (f != null) {
                  f.set_visible(b);
                  if (c != null) {
                    f.set_active(c);
                  }
                }
              }
            }
          } else if (a != "*") {
            f = this.getAsset(a);
            if (f != null) {
              f.set_visible(b);
              if (c != null) {
                f.set_active(c);
              }
            } else {
              f = this.getGroup(a);
              if (f != null) {
                f.set_visible(b);
                if (c != null) {
                  f.set_active(c);
                }
              }
            }
          } else {
            a = Object.keys(this._asset_index.h);
            d = a.length;
            f = 0;
            while (f < d) {
              e = a[f++];
              if (e != "*") {
                this.showThing(e, b, c);
              }
            }
          }
        },
        getGroup: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._group_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getGroup(a, b);
          } else {
            return c;
          }
        },
        hasAsset: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (Object.prototype.hasOwnProperty.call(this._asset_index.h, a)) {
            return true;
          } else if (b && this._superIndexUI != null) {
            return this._superIndexUI.hasAsset(a, b);
          } else {
            return false;
          }
        },
        getAsset: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._asset_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getAsset(a, b);
          } else {
            return c;
          }
        },
        getAssetGroup: function (a, b) {
          if (b == null && (a == null || a == "")) {
            return null;
          }
          if (b == null) {
            b = this.getAsset(a);
          }
          if (b == null) {
            return null;
          }
          var c = Object.keys(this._group_index.h);
          for (var d = c.length, e = 0; e < d;) {
            a = c[e++];
            a = this._group_index.h[a];
            if (a.group.members.indexOf(b) != -1) {
              return a;
            }
          }
          return null;
        },
        getMode: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._mode_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            return this._superIndexUI.getMode(a, b);
          } else {
            return c;
          }
        },
        checkVariable: function (a, b, c, d, e) {
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = "==";
          }
          a = this.getVariable(a, e);
          if (a != null) {
            return D.compareStringVars(a, b, c, d);
          } else {
            return D.compareStringVars("", b, c, d);
          }
        },
        setVariable: function (a, b) {
          this._variable_index.h[a] = b;
        },
        getVariable: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._variable_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            c = this._superIndexUI.getVariable(a, b);
          }
          return c;
        },
        getDefinition: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this._definition_index.h[a];
          if (c == null && b && this._superIndexUI != null) {
            c = this._superIndexUI.getDefinition(a, b);
          }
          if (c == null && a.indexOf("include:") == -1) {
            c = this.getDefinition("include:" + a, b);
          }
          return c;
        },
        screenWidth: function () {
          if (this.hasAsset("screen")) {
            return this.getAsset("screen").get_width() | 0;
          } else {
            return g.width;
          }
        },
        screenHeight: function () {
          if (this.hasAsset("height")) {
            return this.getAsset("screen").get_height() | 0;
          } else {
            return g.height;
          }
        },
        applyNodeConditionals: function (a) {
          if (hb.resolve(a, "locale") || hb.resolve(a, "haxedef")) {
            a = T.parse(Eg.print(a)).firstElement();
            if (a.nodeType != T.Document && a.nodeType != T.Element) {
              throw I.thrown("Invalid nodeType " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
            }
            if (hb.resolve(a, "locale")) {
              a = this.applyNodeChanges(a, "locale");
            }
            if (hb.resolve(a, "haxedef")) {
              a = this.applyNodeChanges(a, "haxedef");
            }
            if (hb.resolve(a, "window")) {
              a = this.applyNodeChanges(a, "window");
            }
          }
          return a;
        },
        applyNodeChanges: function (a, b) {
          var c = "";
          if (b == "locale") {
            if (this._ptr_tongue == null) {
              return a;
            }
            c = this._ptr_tongue.locale.toLowerCase();
          }
          var d = false;
          if (b == "haxedef") {
            d = true;
          }
          if (b == "window") {
            c = g.width + "," + g.height;
          }
          var e = 0;
          for (b = fc.resolve(a, b); e < b.length;) {
            var f = b[e];
            ++e;
            var k = D.xml_name(f);
            if (d) {
              c = "";
              if (D.checkHaxedef(k)) {
                c = k;
              }
            }
            if (k == c && hb.resolve(f, "change")) {
              k = 0;
              f = fc.resolve(f, "change");
              while (k < f.length) {
                var t = f[k];
                ++k;
                for (var l = t.attributes(); l.hasNext();) {
                  var J = l.next();
                  var V = t.get(J);
                  a.set(J, V);
                }
              }
            }
          }
          return a;
        },
        _loadThingGetInfo: function (a) {
          if (a.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
          }
          var b = this.getDefinition("default:" + a.nodeName);
          var c = null;
          if (b != null) {
            c = Ma.consolidateData(a, b, true);
          }
          if (c == null) {
            c = a;
          }
          a = D.xml_str(c, "use_def", true);
          b = null;
          if (a != "") {
            b = this.getDefinition(a);
          }
          c = Ma.consolidateData(c, b);
          c = this.applyNodeConditionals(c);
          if (this._loadTest(c) == 0) {
            return null;
          } else {
            return c;
          }
        },
        _loadTooltip: function (a, b) {
          if (hb.resolve(b, "tooltip")) {
            b = this._loadTooltipData(Hb.resolve(b, "tooltip"));
            var c = Ma.getLeafUIState();
            if (a instanceof Bb) {
              c.tooltips.add(a.button, b);
            } else {
              c.tooltips.add(a, b);
            }
          }
        },
        _loadTooltipData: function (a) {
          var b = {
            title: "",
            body: "",
            anchor: null,
            style: {
              titleFormat: null,
              bodyFormat: null,
              titleBorder: null,
              bodyBorder: null,
              titleOffset: null,
              bodyOffset: null,
              titleWidth: -1,
              bodyWidth: -1,
              background: null,
              borderSize: -1,
              borderColor: null,
              arrow: null,
              autoSizeVertical: null,
              autoSizeHorizontal: null,
              leftPadding: -1,
              rightPadding: -1,
              topPadding: -1,
              bottomPadding: -1
            }
          };
          var c = this.getDefinition("default:tooltip");
          if (c != null) {
            a = Ma.consolidateData(a, c, true);
          }
          if (ec.resolve(a, "use_def")) {
            c = D.xml_str(a, "use_def", true);
            c = this.getDefinition(c);
            if (c != null) {
              a = Ma.consolidateData(a, c, true);
            }
          }
          if (ec.resolve(a, "text")) {
            this._loadTooltipText(a, "text", b);
          }
          if (hb.resolve(a, "title")) {
            this._loadTooltipText(Hb.resolve(a, "title"), "text", b);
          }
          if (hb.resolve(a, "body")) {
            this._loadTooltipText(Hb.resolve(a, "body"), "text", b);
          }
          b.anchor = this._loadAnchor(a);
          this._loadTooltipStyle(a, b);
          return b;
        },
        _loadTooltipStyle: function (a, b) {
          b.style.background = D.xml_color(a, "background");
          b.style.borderSize = D.xml_i(a, "border", -1);
          b.style.borderColor = D.xml_color(a, "border_color");
          if (ec.resolve(a, "arrow")) {
            var c = "";
            if (a.get("arrow") != null) {
              c = a.get("arrow");
              if (c == "" || c == null) {
                c = "";
              } else {
                c = D.gfx(c);
                try {
                  if (!U.exists(c, "IMAGE")) {
                    throw I.thrown("couldn't load bmp \"arrow\"");
                  }
                } catch (e) {
                  Oa.lastError = e;
                  var d = I.caught(e).unwrap();
                  if (typeof d == "string") {
                    g.log.advanced("FlxUI: U.xml_gfx() : " + d, Aa.ERROR, true);
                  } else {
                    throw e;
                  }
                }
              }
            }
          } else {
            c = null;
          }
          b.style.arrow = c;
          b.style.autoSizeHorizontal = D.xml_bool(a, "auto_size_horizontal", true);
          b.style.autoSizeVertical = D.xml_bool(a, "auto_size_vertical", true);
          c = this._loadHeight(a, -1, "pad_all") | 0;
          if (c != -1) {
            b.style.leftPadding = b.style.rightPadding = b.style.topPadding = b.style.bottomPadding = c;
          } else {
            c = this._loadWidth(a, 0, "pad_left") | 0;
            b.style.leftPadding = c;
            c = this._loadWidth(a, 0, "pad_right") | 0;
            b.style.rightPadding = c;
            c = this._loadHeight(a, 0, "pad_top") | 0;
            b.style.topPadding = c;
            c = this._loadHeight(a, 0, "pad_bottom") | 0;
            b.style.bottomPadding = c;
          }
        },
        _loadTooltipText: function (a, b, c) {
          if (a.nodeType == T.Document) {
            var d = "Document";
          } else {
            if (a.nodeType != T.Element) {
              throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
            }
            d = a.nodeName;
          }
          b = this._loadString(a, b);
          var e = this._loadWidth(a, 0, "x");
          var f = this._loadHeight(a, 0, "y");
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          e = da.pool.get().set(e, f);
          e._inPool = false;
          if (ec.resolve(a, "use_def")) {
            f = D.xml_str(a, "use_def", true);
            f = this.getDefinition(f);
            if (f != null) {
              a = Ma.consolidateData(a, f);
            }
          }
          f = this._loadBorder(a);
          var k = this._loadFontDef(a);
          var t = D.xml_color(a, "color", true, -16777216);
          k.format.color = t;
          a = this._loadWidth(a, -1, "width") | 0;
          switch (d) {
            case "body":
              if (b != "") {
                c.body = b;
              }
              c.style.bodyOffset = e;
              c.style.bodyFormat = k;
              c.style.bodyWidth = a;
              c.style.bodyBorder = f;
              break;
            case "title":
            case "tooltip":
              if (b != "") {
                c.title = b;
              }
              c.style.titleOffset = e;
              c.style.titleFormat = k;
              c.style.titleWidth = a;
              c.style.titleBorder = f;
          }
        },
        _loadAnchor: function (a) {
          var b = this._loadWidth(a, 0, "x");
          var c = this._loadHeight(a, 0, "y");
          if (hb.resolve(a, "anchor")) {
            var d = D.xml_str(Hb.resolve(a, "anchor"), "x", true, "right");
            var e = D.xml_str(Hb.resolve(a, "anchor"), "y", true, "top");
            var f = D.xml_str(Hb.resolve(a, "anchor"), "x-flush", true, "left");
            a = D.xml_str(Hb.resolve(a, "anchor"), "y-flush", true, "top");
            return new Ig(b, c, d, e, f, a);
          }
          return null;
        },
        _loadThing: function (a, b) {
          var c = this._loadThingGetInfo(b);
          if (c == null) {
            return null;
          }
          switch (a) {
            case "align":
              this._alignThing(c, true);
              return null;
            case "bar":
              return this._loadBar(c);
            case "box":
              return this._loadBox(c);
            case "button":
              return this._loadButton(c);
            case "button_toggle":
              return this._loadButton(c, true, true);
            case "change":
              this._changeThing(c);
              return null;
            case "checkbox":
              return this._loadCheckBox(c);
            case "failure":
              if (this._failure_checks == null) {
                this._failure_checks = [];
              }
              this.unparentXML(c);
              this._failure_checks.push(c);
              return null;
            case "input_text":
              return this._loadInputText(c);
            case "line":
              return this._loadLine(c);
            case "default":
            case "group":
            case "include":
            case "inject":
            case "load_if":
            case "mode":
              return null;
            case "chrome":
            case "nine_slice":
            case "nine_slice_sprite":
            case "nineslice":
            case "nineslicesprite":
              return this._load9SliceSprite(c);
            case "num_stepper":
            case "numeric_stepper":
            case "numstepper":
              return this._loadNumericStepper(c);
            case "position":
              this.name = D.xml_name(c);
              a = this.getAsset(this.name);
              if (a != null) {
                this._loadPosition(c, a);
              }
              return null;
            case "dropdown":
            case "dropdown_menu":
            case "pulldown":
            case "pulldown_menu":
              return this._loadDropDownMenu(c);
            case "radio_group":
              return this._loadRadioGroup(c);
            case "region":
              return this._loadRegion(c);
            case "sprite":
              return this._loadSprite(c);
            case "tab_menu":
              return this._loadTabMenu(c);
            case "text":
              return this._loadText(c);
            case "tile_test":
              return this._loadTileTest(c);
            case "layout":
            case "ui":
              return this._loadLayout(c);
            default:
              return this._ptr.getRequest("ui_get:" + a, this, c, [b]);
          }
        },
        _loadScale: function (a, b, c) {
          if (c == null) {
            c = "scale";
          }
          if (b == null) {
            b = 1;
          }
          return this._loadHeight(a, b, c, "none");
        },
        _loadScaleX: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return this._loadWidth(a, b, "scale_x", "none");
        },
        _loadScaleY: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return this._loadHeight(a, b, "scale_y", "none");
        },
        _loadWidth: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = "width";
          }
          if (b == null) {
            b = 10;
          }
          c = D.xml_str(a, c, true, b == null ? "null" : "" + b);
          a = this.getRound(a, d);
          return this.doRound(this._getDataSize("w", c, b), a);
        },
        _loadHeight: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = "height";
          }
          if (b == null) {
            b = 10;
          }
          c = D.xml_str(a, c, true, b == null ? "null" : "" + b);
          a = this.getRound(a, d);
          return this.doRound(this._getDataSize("h", c, b), a);
        },
        _loadCompass: function (a, b) {
          if (b == null) {
            b = "resize_point";
          }
          a = D.xml_str(a, b, true, "nw");
          var c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = da.pool.get().set(b, c);
          b._inPool = false;
          switch (a) {
            case "c":
            case "center":
            case "m":
            case "mid":
              b.set_x(0.5);
              b.set_y(0.5);
              break;
            case "ll":
            case "sw":
              b.set_x(0);
              b.set_y(1);
              break;
            case "lr":
            case "se":
              b.set_x(1);
              b.set_y(1);
              break;
            case "e":
            case "r":
              b.set_x(1);
              b.set_y(0.5);
              break;
            case "s":
              b.set_x(0.5);
              b.set_y(1);
              break;
            case "n":
            case "u":
              b.set_x(0.5);
              b.set_y(0);
              break;
            case "nw":
            case "ul":
              b.set_x(0);
              b.set_y(0);
              break;
            case "ne":
            case "ur":
              b.set_x(1);
              b.set_y(0);
              break;
            case "w":
              b.set_x(0.5);
              b.set_y(0);
          }
          return b;
        },
        _changeThing: function (a) {
          var b = D.xml_name(a);
          b = this.getAsset(b);
          if (b != null) {
            var c = -1;
            var d = -1;
            var e;
            var f;
            for (var k = a.attributes(); k.hasNext();) {
              switch (k.next()) {
                case "height":
                  d = this._loadHeight(a);
                  break;
                case "label":
                  var t = D.xml_str(a, "label");
                  e = D.xml_str(a, "context", true, "ui");
                  f = D.xml_str(a, "code", true, "");
                  t = this.getText(t, e, true, f);
                  if (wa.__implements(b, di)) {
                    b.getLabel().set_text(t);
                  }
                  break;
                case "text":
                  if (b instanceof Wd) {
                    t = D.xml_str(a, "text");
                    e = D.xml_str(a, "context", true, "ui");
                    var l = b;
                    f = D.xml_str(a, "code", true, "");
                    l.set_text(this.getText(t, e, true, f));
                  }
                  break;
                case "width":
                  c = this._loadWidth(a);
              }
            }
            if (!!wa.__implements(b, ed) && (c != -1 || d != -1)) {
              if (c == -1) {
                c = b.get_width();
              }
              if (d == -1) {
                d = b.get_height();
              }
              b.resize(c, d);
            }
            if (hb.resolve(a, "param") && wa.__implements(b, Le)) {
              c = null;
              if (hb.resolve(a, "param")) {
                c = [];
                d = 0;
                for (a = fc.resolve(a, "param"); d < a.length;) {
                  f = a[d];
                  ++d;
                  if (ec.resolve(f, "type") && ec.resolve(f, "value")) {
                    k = Mb.resolve(f, "type");
                    k = k.toLowerCase();
                    t = e = Mb.resolve(f, "value");
                    f = D.xml_i(f, "sort", -1);
                    switch (k) {
                      case "bool":
                      case "boolean":
                        e = new String(e);
                        e = e.toLowerCase();
                        t = e == "true" || e == "1" ? true : false;
                        break;
                      case "float":
                        t = parseFloat(e);
                        break;
                      case "color":
                      case "hex":
                        k = Gb.fromString(e);
                        if (k == null) {
                          throw I.thrown("U.parseHex() unable to parse hex String " + e);
                        }
                        t = k;
                        break;
                      case "int":
                        t = y.parseInt(e);
                        break;
                      case "string":
                        t = new String(e);
                    }
                    c.push({
                      sort: f,
                      value: t
                    });
                  }
                }
                c.sort(Ma.sortParams);
                d = 0;
                for (a = c.length; d < a;) {
                  e = d++;
                  c[e] = c[e].value;
                }
              }
              b.set_params(c);
            }
          }
        },
        _alignThing: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (hb.resolve(a, "objects")) {
            for (var c = 0, d = fc.resolve(a, "objects"); c < d.length;) {
              var e = d[c];
              ++c;
              e = D.xml_str(e, "value", true, "").split(",");
              var f = D.xml_str(a, "axis", true);
              if (f != "horizontal" && f != "vertical") {
                throw new Sb("FlxUI._alignThing(): axis must be \"horizontal\" or \"vertical\"!");
              }
              var k = f == "horizontal" ? this._getDataSize("w", D.xml_str(a, "spacing", true), -1) : this._getDataSize("h", D.xml_str(a, "spacing", true), -1);
              var t = D.xml_bool(a, "resize");
              var l = D.xml_bool(a, "grow", true);
              var J = D.xml_bool(a, "shrink", true);
              var V = -1;
              var m = -1;
              if (m == null) {
                m = 0;
              }
              if (V == null) {
                V = 0;
              }
              if (m == null) {
                m = 0;
              }
              if (V == null) {
                V = 0;
              }
              m = da.pool.get().set(V, m);
              m._inPool = false;
              V = "";
              if (hb.resolve(a, "bounds")) {
                if (f == "horizontal") {
                  m.set_x(this._getDataSize("w", D.xml_str(Hb.resolve(a, "bounds"), "left"), -1));
                  m.set_y(this._getDataSize("w", D.xml_str(Hb.resolve(a, "bounds"), "right"), -1));
                } else if (f == "vertical") {
                  m.set_x(this._getDataSize("h", D.xml_str(Hb.resolve(a, "bounds"), "top"), -1));
                  m.set_y(this._getDataSize("h", D.xml_str(Hb.resolve(a, "bounds"), "bottom"), -1));
                }
              }
              if (m.x != -1 && m.y != -1) {
                if (m.y <= m.x) {
                  V = "bounds max must be > bounds min! (max=" + m.y + " min=" + m.x + ")";
                }
              } else {
                V = "missing bound!";
              }
              if (V == "") {
                this._doAlign(e, f, k, t, m, l, J);
              }
              if (hb.resolve(a, "anchor") || ec.resolve(a, "x") || ec.resolve(a, "y")) {
                for (f = 0; f < e.length;) {
                  k = e[f];
                  ++f;
                  k = this.getAsset(k);
                  this._loadPosition(a, k);
                }
              } else if (V != "") {
                if (!b) {
                  g.log.advanced(V, Aa.ERROR, true);
                }
              }
            }
          } else {
            throw new Sb("FlxUI._alignThing(): <objects> node not found!");
          }
        },
        _doAlign: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = true;
          }
          var t = 0;
          var l = e.y - e.x;
          var g = a.length - 1;
          var V = 0;
          var m = "width";
          var Ka = "x";
          if (b == "vertical") {
            m = "height";
            Ka = "y";
          }
          for (var h = 0; h < a.length;) {
            var p = a[h];
            ++h;
            p = this.getAsset(p);
            if (p != null) {
              var n = 0;
              switch (m) {
                case "height":
                  n = p.get_height();
                  break;
                case "width":
                  n = p.get_width();
              }
              t += n;
            }
          }
          if (d == 0) {
            t = (l - t) / g;
          } else {
            t = c;
            V = (l - c * g) / a.length;
          }
          V |= 0;
          t |= 0;
          e = e.x;
          for (h = 0; h < a.length;) {
            p = a[h];
            ++h;
            p = this.getAsset(p);
            if (p != null) {
              c = e;
              if (d) {
                if (wa.__implements(p, ed)) {
                  e = true;
                  l = p;
                  if (b == "vertical") {
                    if (V > l.get_width()) {
                      e = f;
                    } else if (V < l.get_width()) {
                      e = k;
                    }
                    if (e) {
                      l.resize(l.get_width(), V);
                    }
                  } else if (b == "horizontal") {
                    if (V > l.get_height()) {
                      e = f;
                    } else if (V < l.get_height()) {
                      e = k;
                    }
                    if (e) {
                      l.resize(V, l.get_height());
                    }
                  }
                }
              } else {
                switch (m) {
                  case "height":
                    V = p.get_height();
                    break;
                  case "width":
                    V = p.get_width();
                }
              }
              e = c + V + t;
              switch (Ka) {
                case "x":
                  p.set_x(c);
                  break;
                case "y":
                  p.set_y(c);
              }
            }
          }
        },
        _checkFailure: function (a) {
          var b = D.xml_str(a, "target", true);
          var c = D.xml_str(a, "property", true);
          var d = D.xml_str(a, "compare", true);
          a = D.xml_str(a, "value", true);
          var e = this.getAsset(b);
          if (e == null) {
            return false;
          }
          var f = b = 0;
          var k = D.perc_to_float(a);
          switch (c) {
            case "h":
            case "height":
              b = e.get_height();
              break;
            case "w":
            case "width":
              b = e.get_width();
          }
          if (isNaN(k)) {
            if (D.isStrNum(a)) {
              f = parseFloat(a);
            } else {
              return false;
            }
          } else {
            switch (c) {
              case "h":
              case "height":
                f = k * this.screenHeight();
                break;
              case "w":
              case "width":
                f = k * this.screenWidth();
            }
          }
          c = false;
          switch (d) {
            case "<":
              if (b < f) {
                this.failed_by = f - b;
                c = true;
              }
              break;
            case "<=":
              if (b <= f) {
                this.failed_by = f - b;
                c = true;
              }
              break;
            case "=":
            case "==":
              if (b == f) {
                this.failed_by = Math.abs(b - f);
                c = true;
              }
              break;
            case ">":
              if (b > f) {
                this.failed_by = b - f;
                c = true;
              }
              break;
            case ">=":
              if (b >= f) {
                this.failed_by = b - f;
                c = true;
              }
          }
          return c;
        },
        _resizeThing: function (a, b) {
          var c = false;
          var d = a.get_width();
          var e = a.get_height();
          if (d < b.min_width) {
            c = true;
            d = b.min_width;
          } else if (d > b.max_width) {
            c = true;
            d = b.max_width;
          }
          if (e < b.min_height) {
            c = true;
            e = b.min_height;
          } else if (e > b.max_height) {
            c = true;
            e = b.max_height;
          }
          if (c) {
            a.resize(d, e);
          }
        },
        _postLoadThing: function (a, b) {
          if (a == "load_if") {
            if (this._loadTest(b) && b.firstElement() != null) {
              for (var c = b.elements(); c.hasNext();) {
                var d = c.next();
                if (d.nodeType != T.Element) {
                  throw I.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : lb.toString(d.nodeType)));
                }
                b = d.nodeName.toLowerCase();
                if (d.nodeType != T.Document && d.nodeType != T.Element) {
                  throw I.thrown("Invalid nodeType " + (d.nodeType == null ? "null" : lb.toString(d.nodeType)));
                }
                this._postLoadThing(b, d);
              }
            }
          } else if (this._loadTest(b) != 0) {
            var e = D.xml_name(b);
            c = this.getAsset(e);
            if (d = a == "group") {
              c = this.getGroup(e);
            }
            if (a == "align") {
              this._alignThing(b);
            }
            if (a == "change") {
              this._changeThing(b);
            }
            if (a == "position") {
              this._loadPosition(b, c);
            } else {
              if (a == "cursor") {
                this._loadCursor(b);
              }
              if (c != null || d) {
                if (!d) {
                  a = D.xml_str(b, "use_def", true);
                  if (a != "") {
                    this.getDefinition(a);
                  }
                  if (wa.__implements(c, ed)) {
                    a = this._getDataSize("w", D.xml_str(b, "width"));
                    e = this._getDataSize("h", D.xml_str(b, "height"));
                    if (a == 0 || a == c.get_width()) {
                      a = null;
                    }
                    if (e == 0 || e == c.get_height()) {
                      e = null;
                    }
                    var f = this.calcMaxMinSize(b);
                    if (f != null) {
                      if (a != null) {
                        if (a < f.min_width) {
                          a = f.min_width;
                        }
                        if (a > f.max_width) {
                          a = f.max_width;
                        }
                        f.min_width = f.max_width = a;
                      }
                      if (e != null) {
                        if (e < f.min_height) {
                          e = f.min_height;
                        }
                        if (e > f.max_height) {
                          e = f.max_height;
                        }
                        f.min_height = f.max_height = e;
                      }
                      this._resizeThing(wa.__cast(c, ed), f);
                    }
                  }
                  a = -c.x;
                  e = -c.y;
                  if (e == null) {
                    e = 0;
                  }
                  if (a == null) {
                    a = 0;
                  }
                  c.set_x(c.x + a);
                  c.set_y(c.y + e);
                  this._loadPosition(b, c);
                }
                b = D.xml_str(b, "send_to", true, "");
                if (b != "") {
                  switch (b) {
                    case "back":
                    case "bottom":
                      this._sendTo(c, -1);
                      break;
                    case "front":
                    case "top":
                      this._sendTo(c, 1);
                  }
                }
                if (!d && c instanceof Ma && c._postLoaded == 0) {
                  c.getEvent("post_load", this, null);
                }
              }
            }
          }
        },
        _loadTileTest: function (a) {
          var b = D.xml_i(a, "tiles_w", 2);
          var c = D.xml_i(a, "tiles_h", 2);
          var d = this._loadWidth(a);
          var e = this._loadHeight(a);
          var f = this.calcMaxMinSize(a);
          if (d < f.min_width) {
            d = f.min_width;
          }
          if (e < f.min_height) {
            e = f.min_height;
          }
          d = d / b | 0;
          e = e / c | 0;
          if (d < e) {
            e = d;
          } else if (e < d) {
            d = e;
          }
          if (d * b > f.max_width) {
            d = f.max_width / b | 0;
          }
          if (e * c > f.max_height) {
            e = f.max_height / c | 0;
          }
          if (d < e) {
            e = d;
          } else if (e < d) {
            d = e;
          }
          if (d < 2) {
            d = 2;
          }
          if (e < 2) {
            e = 2;
          }
          var k = Gb.fromString(D.xml_str(a, "color1", true, "0x808080"));
          var t = Gb.fromString(D.xml_str(a, "color2", true, "0xc4c4c4"));
          f = D.xml_i(a, "base_tile_size", -1);
          a = D.xml_bool(a, "floor_to_even", false);
          b = new hj(0, 0, d, e, b, c, k, t, a);
          b.baseTileSize = f;
          return b;
        },
        _loadString: function (a, b) {
          b = D.xml_str(a, b);
          var c = D.xml_str(a, "context", true, "ui");
          a = D.xml_str(a, "code", true, "");
          return b = this.getText(b, c, true, a);
        },
        _loadText: function (a) {
          var b = D.xml_str(a, "text");
          var c = D.xml_str(a, "context", true, "ui");
          var d = D.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          d = this._loadWidth(a, 100) | 0;
          c = this._loadHeight(a, -1) | 0;
          var e = this._loadFontFace(a);
          if (D.xml_bool(a, "input")) {
            throw new Sb("FlxUI._loadText(): <text> with input has been deprecated. Use <input_text> instead.");
          }
          var f = D.xml_str(a, "align");
          if (f == "") {
            f = null;
          }
          var k = this._loadHeight(a, 8, "size", "floor") | 0;
          var t = this._loadColor(a);
          var l = this._loadBorder(a);
          d = new Wd(0, 0, d, b, k);
          d.setFormat(e, k, t, f);
          l.apply(d);
          d.drawFrame();
          if (hb.resolve(a, "param")) {
            e = null;
            if (hb.resolve(a, "param")) {
              e = [];
              f = 0;
              for (a = fc.resolve(a, "param"); f < a.length;) {
                t = a[f];
                ++f;
                if (ec.resolve(t, "type") && ec.resolve(t, "value")) {
                  l = Mb.resolve(t, "type");
                  l = l.toLowerCase();
                  var g = k = Mb.resolve(t, "value");
                  t = D.xml_i(t, "sort", -1);
                  switch (l) {
                    case "bool":
                    case "boolean":
                      k = new String(k);
                      k = k.toLowerCase();
                      g = k == "true" || k == "1" ? true : false;
                      break;
                    case "float":
                      g = parseFloat(k);
                      break;
                    case "color":
                    case "hex":
                      l = Gb.fromString(k);
                      if (l == null) {
                        throw I.thrown("U.parseHex() unable to parse hex String " + k);
                      }
                      g = l;
                      break;
                    case "int":
                      g = y.parseInt(k);
                      break;
                    case "string":
                      g = new String(k);
                  }
                  e.push({
                    sort: t,
                    value: g
                  });
                }
              }
              e.sort(Ma.sortParams);
              f = 0;
              for (a = e.length; f < a;) {
                k = f++;
                e[k] = e[k].value;
              }
            }
            d.set_params(e);
          }
          if (c > 0 && d.get_height() != c && wa.__implements(d, ed)) {
            d.resize(d.get_width(), c);
          }
          d.set_text(" ");
          d.set_text(b);
          return d;
        },
        _loadInputText: function (a) {
          var b = D.xml_str(a, "text");
          var c = D.xml_str(a, "context", true, "ui");
          var d = D.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          var e = this._loadWidth(a, 100) | 0;
          c = this._loadHeight(a, -1) | 0;
          d = this._loadFontFace(a);
          var f = D.xml_str(a, "align");
          if (f == "") {
            f = null;
          }
          var k = this._loadHeight(a, 8, "size") | 0;
          var t = this._loadColor(a);
          var l = this._loadBorder(a);
          var g = D.xml_str(a, "background", true, "0x00000000");
          var V = true;
          var m = 0;
          if (m == null) {
            m = 0;
          }
          if (V == null) {
            V = false;
          }
          var Ka = Gb.fromString(g);
          if (Ka == null) {
            if (V) {
              Ka = m;
            } else {
              throw I.thrown("U.parseHex() unable to parse hex String " + g);
            }
          }
          g = Ka;
          Ka = D.xml_bool(a, "password_mode");
          b = new pb(0, 0, e, b, k, t, g);
          b.set_passwordMode(Ka);
          switch (D.xml_str(a, "force_case", true, "")) {
            case "l":
            case "u":
              throw new Sb("FlxUI._loadInputText(): 1 letter values have been deprecated (force_case attribute).");
            case "lower":
            case "lower_case":
            case "lowercase":
              Ka = 2;
              break;
            case "upper":
            case "upper_case":
            case "uppercase":
              Ka = 1;
              break;
            default:
              Ka = 0;
          }
          for (g = D.xml_str(a, "filter", true, ""); g.indexOf("_") != -1;) {
            g = v.replace(g, "_", "");
          }
          switch (g) {
            case "a":
            case "an":
            case "n":
              throw new Sb("FlxUI._loadInputText(): 1 letter values have been deprecated (filter attribute).");
            case "alpha":
            case "onlyalpha":
              g = 1;
              break;
            case "alphanum":
            case "alphanumeric":
            case "onlyalphanumeric":
              g = 3;
              break;
            case "num":
            case "numeric":
            case "onlynumeric":
              g = 2;
              break;
            default:
              g = 0;
          }
          b.setFormat(d, k, t, f);
          b.set_forceCase(Ka);
          b.set_filterMode(g);
          l.apply(b);
          b.drawFrame();
          if (hb.resolve(a, "param")) {
            d = null;
            if (hb.resolve(a, "param")) {
              d = [];
              f = 0;
              for (a = fc.resolve(a, "param"); f < a.length;) {
                t = a[f];
                ++f;
                if (ec.resolve(t, "type") && ec.resolve(t, "value")) {
                  l = Mb.resolve(t, "type");
                  l = l.toLowerCase();
                  Ka = k = Mb.resolve(t, "value");
                  t = D.xml_i(t, "sort", -1);
                  switch (l) {
                    case "bool":
                    case "boolean":
                      g = new String(k);
                      g = g.toLowerCase();
                      Ka = g == "true" || g == "1" ? true : false;
                      break;
                    case "float":
                      Ka = parseFloat(k);
                      break;
                    case "color":
                    case "hex":
                      Ka = Gb.fromString(k);
                      if (Ka == null) {
                        throw I.thrown("U.parseHex() unable to parse hex String " + k);
                      }
                      break;
                    case "int":
                      Ka = y.parseInt(k);
                      break;
                    case "string":
                      Ka = new String(k);
                  }
                  d.push({
                    sort: t,
                    value: Ka
                  });
                }
              }
              d.sort(Ma.sortParams);
              f = 0;
              for (a = d.length; f < a;) {
                k = f++;
                d[k] = d[k].value;
              }
            }
            b.set_params(d);
          }
          if (c > 0 && b.get_height() != c && wa.__implements(b, ed)) {
            b.resize(b.get_width(), c);
          }
          return b;
        },
        _loadRadioGroup: function (a) {
          var b = D.xml_str(a, "dot_src", true);
          var c = D.xml_str(a, "radio_src", true);
          var d = [];
          var e = [];
          var f = this._loadWidth(a, 11, "radio_width");
          var k = this._loadHeight(a, 11, "radio_height");
          var t = this._loadHeight(a, 0, "height");
          var l = this._loadHeight(a, 0, "width");
          var g = this._loadWidth(a, 100, "label_width");
          for (var V = 0, m = fc.resolve(a, "radio"); V < m.length;) {
            var Ka = m[V];
            ++V;
            var h = D.xml_name(Ka);
            var p = D.xml_str(Ka, "label");
            var n = D.xml_str(Ka, "context", true, "ui");
            Ka = D.xml_str(Ka, "code", true, "");
            p = this.getText(p, n, true, Ka);
            e.push(h);
            d.push(p);
          }
          e.reverse();
          d.reverse();
          Ka = this._loadHeight(a, 25, "y_space");
          n = null;
          if (hb.resolve(a, "param")) {
            n = [];
            V = 0;
            for (m = fc.resolve(a, "param"); V < m.length;) {
              h = m[V];
              ++V;
              if (ec.resolve(h, "type") && ec.resolve(h, "value")) {
                var q = Mb.resolve(h, "type");
                q = q.toLowerCase();
                var r = p = Mb.resolve(h, "value");
                h = D.xml_i(h, "sort", -1);
                switch (q) {
                  case "bool":
                  case "boolean":
                    p = new String(p);
                    p = p.toLowerCase();
                    r = p == "true" || p == "1" ? true : false;
                    break;
                  case "float":
                    r = parseFloat(p);
                    break;
                  case "color":
                  case "hex":
                    q = Gb.fromString(p);
                    if (q == null) {
                      throw I.thrown("U.parseHex() unable to parse hex String " + p);
                    }
                    r = q;
                    break;
                  case "int":
                    r = y.parseInt(p);
                    break;
                  case "string":
                    r = new String(p);
                }
                n.push({
                  sort: h,
                  value: r
                });
              }
            }
            n.sort(Ma.sortParams);
            V = 0;
            for (m = n.length; V < m;) {
              p = V++;
              n[p] = n[p].value;
            }
          }
          p = n;
          n = null;
          if (c != "") {
            n = D.gfx(c);
          } else if (hb.resolve(a, "box")) {
            n = D.xml_str(Hb.resolve(a, "box"), "slice9") != "" ? this._load9SliceSprite(Hb.resolve(a, "box")) : this._loadSprite(Hb.resolve(a, "box"));
          }
          c = null;
          if (b != "") {
            c = D.gfx(b);
          } else if (hb.resolve(a, "dot")) {
            c = D.xml_str(Hb.resolve(a, "dot"), "slice9") != "" ? this._load9SliceSprite(Hb.resolve(a, "dot")) : this._loadSprite(Hb.resolve(a, "dot"));
          }
          q = b = null;
          if (hb.resolve(a, "button")) {
            V = 0;
            m = fc.resolve(a, "button");
            while (V < m.length) {
              r = m[V];
              ++V;
              h = D.xml_name(r);
              if (h == "previous" || h == "prev") {
                b = D.xml_f(r, "x");
                h = D.xml_f(r, "y");
                if (h == null) {
                  h = 0;
                }
                if (b == null) {
                  b = 0;
                }
                if (h == null) {
                  h = 0;
                }
                if (b == null) {
                  b = 0;
                }
                b = da.pool.get().set(b, h);
                b._inPool = false;
              } else if (h == "next") {
                h = D.xml_f(r, "x");
                q = D.xml_f(r, "y");
                if (q == null) {
                  q = 0;
                }
                if (h == null) {
                  h = 0;
                }
                if (q == null) {
                  q = 0;
                }
                if (h == null) {
                  h = 0;
                }
                h = da.pool.get().set(h, q);
                h._inPool = false;
                q = h;
              }
            }
          }
          d = new ij(0, 0, e, d, null, Ka, f, k, g, null, b, q);
          d.set_params(p);
          if (n != "" && n != null) {
            d.loadGraphics(n, c);
          }
          e = this._loadWidth(a, 0, "text_x") | 0;
          f = this._loadHeight(a, 0, "text_y") | 0;
          k = d.getRadios();
          p = 0;
          n = false;
          g = a.elementsNamed("radio");
          V = 0;
          for (m = k.length; V < m;) {
            Ka = V++;
            b = k[k.length - 1 - Ka];
            Ka = g.hasNext() ? g.next() : null;
            if (b != null && b instanceof Bb && (b = wa.__cast(b, Bb), c = this.formatButtonText(a, b), c != null && n == 0 && (n = md.copyFromFlxText(c), h = new af(c.borderStyle, c.borderColor, c.borderSize, c.borderQuality), d.set_activeStyle(new jj(16777215, n, Fn.fromOpenFL(c._defaultFormat.align), c.color, h)), n = true), b.set_textX(e), b.set_textY(f), ++p, Ka != null)) {
              if (Ka.nodeType != T.Document && Ka.nodeType != T.Element) {
                throw I.thrown("Invalid nodeType " + (Ka.nodeType == null ? "null" : lb.toString(Ka.nodeType)));
              }
              this._loadTooltip(b, Ka);
            }
          }
          if (l != 0) {
            d.fixedSize = true;
            d.set_width(l);
          }
          if (t != 0) {
            d.fixedSize = true;
            d.set_height(t);
          }
          return d;
        },
        _loadCheckBox: function (a) {
          var b = D.xml_str(a, "label");
          var c = D.xml_str(a, "context", true, "ui");
          var d = D.xml_str(a, "code", true, "");
          var e = D.xml_bool(a, "checked", false);
          b = this.getText(b, c, true, d);
          c = this._loadWidth(a, 100, "label_width");
          d = D.xml_str(a, "check_src", true);
          var f = D.xml_str(a, "box_src", true);
          var k = null;
          if (hb.resolve(a, "param")) {
            k = [];
            for (var t = 0, l = fc.resolve(a, "param"); t < l.length;) {
              var g = l[t];
              ++t;
              if (ec.resolve(g, "type") && ec.resolve(g, "value")) {
                var V = Mb.resolve(g, "type");
                V = V.toLowerCase();
                var m = Mb.resolve(g, "value");
                var h = m;
                g = D.xml_i(g, "sort", -1);
                switch (V) {
                  case "bool":
                  case "boolean":
                    m = new String(m);
                    m = m.toLowerCase();
                    h = m == "true" || m == "1" ? true : false;
                    break;
                  case "float":
                    h = parseFloat(m);
                    break;
                  case "color":
                  case "hex":
                    V = Gb.fromString(m);
                    if (V == null) {
                      throw I.thrown("U.parseHex() unable to parse hex String " + m);
                    }
                    h = V;
                    break;
                  case "int":
                    h = y.parseInt(m);
                    break;
                  case "string":
                    h = new String(m);
                }
                k.push({
                  sort: g,
                  value: h
                });
              }
            }
            k.sort(Ma.sortParams);
            t = 0;
            for (l = k.length; t < l;) {
              m = t++;
              k[m] = k[m].value;
            }
          }
          l = t = null;
          if (f != "") {
            t = D.gfx(f);
          } else if (hb.resolve(a, "box")) {
            t = D.xml_str(Hb.resolve(a, "box"), "slice9") != "" ? this._load9SliceSprite(Hb.resolve(a, "box")) : this._loadSprite(Hb.resolve(a, "box"));
          }
          if (d != "") {
            l = D.gfx(d);
          } else if (hb.resolve(a, "check")) {
            l = D.xml_str(Hb.resolve(a, "check"), "slice9") != "" ? this._load9SliceSprite(Hb.resolve(a, "check")) : this._loadSprite(Hb.resolve(a, "check"));
          }
          c = new Bb(0, 0, t, l, b, c, k);
          this.formatButtonText(a, c);
          d = this._loadWidth(a, 0, "text_x") | 0;
          a = this._loadHeight(a, 0, "text_y") | 0;
          c.set_textX(d);
          c.set_textY(a);
          c.set_text(b);
          c.set_checked(e);
          return c;
        },
        _loadDropDownMenu: function (a) {
          var b = D.xml_str(a, "label");
          var c = D.xml_str(a, "context", true, "ui");
          var d = D.xml_str(a, "code", true, "");
          b = this.getText(b, c, true, d);
          var e = D.xml_str(a, "back_def", true);
          var f = D.xml_str(a, "panel_def", true);
          var k = D.xml_str(a, "button_def", true);
          var t = D.xml_str(a, "label_def", true);
          var l = c = d = null;
          var J = null;
          if (e != "") {
            d = this._loadSprite(this.getDefinition(e));
          }
          if (f != "") {
            c = this._load9SliceSprite(this.getDefinition(f));
          }
          if (k != "") {
            try {
              l = this._loadButton(this.getDefinition(k), false, false);
            } catch (m) {
              if (I.caught(m) instanceof Sb) {
                g.log.advanced("couldn't loadButton with definition \"" + k + "\"", Aa.NORMAL);
                l = null;
              } else {
                throw m;
              }
            }
          }
          if (t != "") {
            try {
              J = this._loadText(this.getDefinition(t));
            } catch (m) {
              if (I.caught(m) instanceof Sb) {
                g.log.advanced("couldn't loadText with definition \"" + t + "\"", Aa.NORMAL);
                J = null;
              } else {
                throw m;
              }
            }
            if (J != null && b != "") {
              J.set_text(b);
            }
          }
          e = b = null;
          if (hb.resolve(a, "data")) {
            f = 0;
            a = fc.resolve(a, "data");
            while (f < a.length) {
              k = a[f];
              ++f;
              if (e == null) {
                e = [];
              }
              k = new Rk(D.xml_str(k, "name", true), D.xml_str(k, "label"));
              e.push(k);
            }
          } else if (hb.resolve(a, "asset")) {
            f = 0;
            a = fc.resolve(a, "asset");
            while (f < a.length) {
              t = a[f];
              ++f;
              if (b == null) {
                b = [];
              }
              k = D.xml_str(t, "def", true);
              t = D.xml_name(t);
              var V = null;
              try {
                V = this._loadButton(this.getDefinition(k), false);
              } catch (m) {
                if (I.caught(m) instanceof Sb) {
                  g.log.advanced("couldn't loadButton with definition \"" + k + "\"", Aa.NORMAL);
                } else {
                  throw m;
                }
              }
              if (V != null) {
                V.name = t;
                if (b == null) {
                  b = [];
                }
                b.push(V);
              }
            }
          }
          d = new kj(120, d, J, l);
          return new vc(0, 0, e, null, d, c, b);
        },
        _loadTest: function (a) {
          var b = true;
          if (a.nodeType == T.Document) {
            var c = "Document";
          } else {
            if (a.nodeType != T.Element) {
              throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
            }
            c = a.nodeName;
          }
          if (c == "load_if" && (b = this._loadTestSub(a), b == 0)) {
            return false;
          }
          if (hb.resolve(a, "load_if")) {
            c = 0;
            a = fc.resolve(a, "load_if");
            while (c < a.length) {
              var d = a[c];
              ++c;
              var e = d;
              if (e.nodeType != T.Document && e.nodeType != T.Element) {
                throw I.thrown("Bad node type, expected Element or Document but found " + (e.nodeType == null ? "null" : lb.toString(e.nodeType)));
              }
              if (e.children[0] == null && (b = this._loadTestSub(d), b == 0)) {
                return false;
              }
            }
          }
          return b;
        },
        _loadTestSub: function (a) {
          var b = D.xml_bool(a, "is", true);
          var c = D.xml_f(a, "aspect_ratio", -1);
          if (c != -1) {
            var d = true;
            var e = wa.__cast(g.width, tp) / wa.__cast(g.height, tp);
            var f = Math.abs(e - c);
            if (ec.resolve(a, "tolerance")) {
              c = D.xml_f(a, "tolerance", 0.1);
              if (f > c) {
                d = false;
              }
            } else if (ec.resolve(a, "tolerance_plus") || ec.resolve(a, "tolerance_minus")) {
              var k = D.xml_f(a, "tolerance_minus", -1);
              var t = D.xml_f(a, "tolerance_plus", -1);
              if (e > c && t != -1 && f > t) {
                d = false;
              }
              if (e < c && k != -1 && f > k) {
                d = false;
              }
            }
            if (d != b) {
              return false;
            }
          }
          f = D.xml_pt(a, "resolution", null);
          if (f != null) {
            d = true;
            c = D.xml_pt(a, "tolerance", null);
            if (c == null) {
              e = c = 0;
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (c == null) {
                c = 0;
              }
              c = da.pool.get().set(c, e);
              c._inPool = false;
            }
            e = Math.abs(f.y - g.height);
            if (Math.abs(f.x - g.width) > c.x || e > c.y) {
              d = false;
            }
            if (d != b) {
              return false;
            }
          }
          d = D.xml_str(a, "haxedef", true, "");
          f = D.xml_bool(a, "value", true);
          if (d != "" && D.checkHaxedef(d) == f != b) {
            return false;
          }
          f = D.xml_str(a, "variable", false, "");
          a = D.xml_str(a, "type", true, "string");
          if (f != "" && (d = true, f = this.parseVarValue(f), f != null && (d = this.checkVariable(f.variable, f.value, a, f.op)), d != b)) {
            return false;
          } else {
            return true;
          }
        },
        parseVarValue: function (a) {
          for (var b = "== = != !== < > <= >=".split(" "), c, d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            if (a.indexOf(e) != -1 && (c = a.split(e), c != null && c.length == 2)) {
              return {
                variable: c[0],
                value: c[1],
                op: e
              };
            }
          }
          return null;
        },
        _loadLayout: function (a) {
          var b = D.xml_str(a, "name", true);
          var c = this._loadWidth(a, 0, "x");
          var d = this._loadHeight(a, 0, "y");
          a = this.createUI(a);
          a.set_x(c);
          a.set_y(d);
          a.name = b;
          return a;
        },
        addToCleanup: function (a) {
          if (this._assetsToCleanUp != null && this._assetsToCleanUp.indexOf(a) == -1) {
            this._assetsToCleanUp.push(a);
          }
        },
        addToScaledAssets: function (a) {
          if (this._scaledAssets != null && this._scaledAssets.indexOf(a) == -1) {
            this._scaledAssets.push(a);
          }
        },
        cleanup: function () {
          for (var a = 0, b = this._assetsToCleanUp; a < b.length;) {
            var c = b[a];
            ++a;
            g.bitmap.removeByKey(c);
          }
          this._scaledAssets = this._assetsToCleanUp = null;
        },
        createUI: function (a) {
          return new Ma(a, this, this, this._ptr_tongue, this.liveFilePath);
        },
        _loadTabMenu: function (a) {
          var b = D.xml_str(a, "back_def");
          b = this.getDefinition(b);
          if (b == null) {
            b = a;
          }
          b = Ma.consolidateData(b, a);
          switch (D.xml_str(a, "back_type", true, "chrome")) {
            case "region":
              b = new th();
              break;
            case "sprite":
              b = this._loadSprite(b);
              break;
            default:
              b = this._load9SliceSprite(b, "tab_menu");
          }
          var c = null;
          var d = D.xml_bool(a, "stretch_tabs", false);
          var e = "front";
          var f = "back";
          if (hb.resolve(a, "stacking")) {
            e = D.xml_str(Hb.resolve(a, "stacking"), "toggled", true, "front");
            f = D.xml_str(Hb.resolve(a, "stacking"), "untoggled", true, "back");
          }
          var k = null;
          if (D.xml_str(a, "spacing", true, "") != "") {
            k = this._loadWidth(a, 0, "spacing");
          }
          var t = this._loadWidth(a, 0, "tab_x");
          var l = this._loadHeight(a, 0, "tab_y");
          if (l == null) {
            l = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (t == null) {
            t = 0;
          }
          t = da.pool.get().set(t, l);
          t._inPool = false;
          var g = "";
          if (hb.resolve(a, "tab")) {
            l = 0;
            for (var V = fc.resolve(a, "tab"); l < V.length;) {
              c = V[l];
              ++l;
              c = D.xml_str(c, "use_def");
              if (c != "") {
                g = c;
              }
            }
            c = g != "" ? this.getDefinition(g) : Hb.resolve(a, "tab");
          }
          g = [];
          if (hb.resolve(a, "tab")) {
            l = 0;
            V = fc.resolve(a, "tab");
            while (l < V.length) {
              var m = V[l];
              ++l;
              var h = D.xml_name(m);
              if (h != "") {
                var p = D.xml_str(m, "label");
                var n = D.xml_str(m, "context", true, "ui");
                var q = D.xml_str(m, "code", true, "");
                p = this.getText(p, n, true, q);
                this.getText(p, n, true, q);
                m = Ma.consolidateData(m, c);
                p = this._loadButton(m, true, true, "tab_menu");
                p.name = h;
                g.push(p);
                this._loadTooltip(p, m);
              }
            }
          }
          if (g.length > 0) {
            if (c == null || !hb.resolve(c, "text")) {
              for (l = 0; l < g.length;) {
                V = g[l];
                ++l;
                if (V instanceof Hc) {
                  V.label.set_color(16777215);
                  if (V.label instanceof Wd) {
                    V = V.label;
                    V.set_borderStyle(cb.OUTLINE);
                    V.set_borderColor(0);
                    V.set_borderSize(1);
                    V.set_borderQuality(1);
                  }
                }
              }
            }
            if (c == null || !ec.resolve(c, "width")) {
              d = true;
            }
          }
          b = new ie(b, g, null, t, d, k, [e, f]);
          if (hb.resolve(a, "group")) {
            l = 0;
            V = fc.resolve(a, "group");
            while (l < V.length) {
              a = V[l];
              ++l;
              h = D.xml_name(a);
              a = new Ma(a, b, this, this._ptr_tongue);
              if (g != null && g.length > 0) {
                a.set_y(a.y + g[0].get_height());
              }
              a.name = h;
              b.addGroup(a);
            }
          }
          return b;
        },
        _loadNumericStepper: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = D.xml_f(a, "step", 1);
          var d = D.xml_f(a, "value", 0);
          var e = D.xml_f(a, "min", 0);
          var f = D.xml_f(a, "max", 10);
          var k = D.xml_i(a, "decimals", 0);
          var t = D.xml_bool(a, "percent");
          var l = D.xml_str(a, "stack", true, "");
          if (l == "") {
            l = D.xml_str(a, "stacking", true, "");
          }
          l = l.toLowerCase();
          switch (l) {
            case "h":
            case "horizontal":
            case "horz":
              l = 1;
              break;
            case "v":
            case "vert":
            case "vertical":
              l = 0;
              break;
            default:
              l = 1;
          }
          var g = null;
          var V = null;
          var m = null;
          if (hb.resolve(a, "text")) {
            g = this._loadThing("text", Hb.resolve(a, "text"));
          }
          if (hb.resolve(a, "plus")) {
            V = this._loadThing("button", Hb.resolve(a, "plus"));
          }
          if (hb.resolve(a, "minus")) {
            m = this._loadThing("button", Hb.resolve(a, "minus"));
          }
          c = new Lb(0, 0, c, d, e, f, k, l, g, V, m, t);
          if (b) {
            b = null;
            if (hb.resolve(a, "param")) {
              b = [];
              d = 0;
              for (a = fc.resolve(a, "param"); d < a.length;) {
                f = a[d];
                ++d;
                if (ec.resolve(f, "type") && ec.resolve(f, "value")) {
                  k = Mb.resolve(f, "type");
                  k = k.toLowerCase();
                  t = e = Mb.resolve(f, "value");
                  f = D.xml_i(f, "sort", -1);
                  switch (k) {
                    case "bool":
                    case "boolean":
                      e = new String(e);
                      e = e.toLowerCase();
                      t = e == "true" || e == "1" ? true : false;
                      break;
                    case "float":
                      t = parseFloat(e);
                      break;
                    case "color":
                    case "hex":
                      k = Gb.fromString(e);
                      if (k == null) {
                        throw I.thrown("U.parseHex() unable to parse hex String " + e);
                      }
                      t = k;
                      break;
                    case "int":
                      t = y.parseInt(e);
                      break;
                    case "string":
                      t = new String(e);
                  }
                  b.push({
                    sort: f,
                    value: t
                  });
                }
              }
              b.sort(Ma.sortParams);
              d = 0;
              for (a = b.length; d < a;) {
                e = d++;
                b[e] = b[e].value;
              }
            }
            c.set_params(b);
          }
          return c;
        },
        getResizeRatio: function (a, b) {
          if (b == null) {
            b = 1;
          }
          var c = D.xml_str(a, "resize_ratio_x", true);
          if (c == "") {
            c = D.xml_str(a, "resize_ratio_y", true);
            if (c == "") {
              a = D.xml_f(a, "resize_ratio", -1);
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              b = da.pool.get().set(a, b);
            } else {
              a = parseFloat(c);
              b = 1;
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (a == null) {
                a = 0;
              }
              b = da.pool.get().set(a, b);
            }
          } else {
            a = parseFloat(c);
            b = 0;
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (a == null) {
              a = 0;
            }
            b = da.pool.get().set(a, b);
          }
          b._inPool = false;
          return b;
        },
        _loadButton: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = true;
          }
          var e = this._loadColor(a);
          var f = D.xml_f(a, "resize_ratio", -1);
          var k = this._loadCompass(a, "resize_point");
          var t = D.xml_bool(a, "resize_label", false);
          var l = D.xml_str(a, "label");
          var g = null;
          var V = null;
          if (hb.resolve(a, "sprite")) {
            for (var m = 0, h = fc.resolve(a, "sprite"); m < h.length;) {
              var p = h[m];
              ++m;
              if (c && D.xml_bool(p, "toggle")) {
                V = this._loadThing("sprite", p);
              } else {
                g = this._loadThing("sprite", p);
              }
            }
          }
          m = D.xml_str(a, "context", true, "ui");
          p = D.xml_str(a, "code", true, "");
          l = this.getText(l, m, true, p);
          p = this._loadWidth(a, 0, "width") | 0;
          var n = this._loadHeight(a, 0, "height") | 0;
          var q = null;
          if (hb.resolve(a, "param")) {
            q = [];
            m = 0;
            for (h = fc.resolve(a, "param"); m < h.length;) {
              var r = h[m];
              ++m;
              if (ec.resolve(r, "type") && ec.resolve(r, "value")) {
                var Ub = Mb.resolve(r, "type");
                Ub = Ub.toLowerCase();
                var w = Mb.resolve(r, "value");
                var u = w;
                r = D.xml_i(r, "sort", -1);
                switch (Ub) {
                  case "bool":
                  case "boolean":
                    w = new String(w);
                    w = w.toLowerCase();
                    u = w == "true" || w == "1" ? true : false;
                    break;
                  case "float":
                    u = parseFloat(w);
                    break;
                  case "color":
                  case "hex":
                    Ub = Gb.fromString(w);
                    if (Ub == null) {
                      throw I.thrown("U.parseHex() unable to parse hex String " + w);
                    }
                    u = Ub;
                    break;
                  case "int":
                    u = y.parseInt(w);
                    break;
                  case "string":
                    u = new String(w);
                }
                q.push({
                  sort: r,
                  value: u
                });
              }
            }
            q.sort(Ma.sortParams);
            m = 0;
            for (h = q.length; m < h;) {
              w = m++;
              q[w] = q[w].value;
            }
          }
          m = q;
          if (g == null) {
            h = hb.resolve(a, "graphic") == 0;
            e = new rd(0, 0, l, null, h, false, e);
            e._autoCleanup = false;
          } else if (l != "") {
            e = new Wd(0, 0, 80, l, 8);
            e.setFormat(null, 8, 3355443, "center");
            h = new Na();
            h.add(g);
            h.add(e);
            e = new cf(0, 0, h);
          } else {
            e = new cf(0, 0, g);
          }
          e.resize_ratio = f;
          e.resize_point = k;
          e.autoResizeLabel = t;
          if (b) {
            e.set_params(m);
          }
          if (hb.resolve(a, "graphic")) {
            if (D.xml_bool(Hb.resolve(a, "graphic"), "blank")) {
              e.loadGraphicSlice9(["", "", ""], p, n, null, 0, f);
            } else {
              t = null;
              if (c) {
                b = "     ".split(" ");
                k = [null, null, null, null, null, null];
              } else {
                b = ["", "", ""];
                k = [null, null, null];
              }
              q = D.xml_i(Hb.resolve(a, "graphic"), "src_w", 0);
              w = D.xml_i(Hb.resolve(a, "graphic"), "src_h", 0);
              r = D.xml_str(Hb.resolve(a, "graphic"), "tile", true, "");
              var v = 0;
              switch (r) {
                case "h":
                case "horizontal":
                  v = 16;
                  break;
                case "v":
                case "vertical":
                  v = 1;
                  break;
                case "all":
                case "both":
                case "hv":
                case "true":
                case "vh":
                  v = 17;
              }
              r = v;
              m = D.xml_str(Hb.resolve(a, "graphic"), "frames", true);
              if (m != "") {
                t = [];
                h = m.split(",");
                m = 0;
                while (m < h.length) {
                  Ub = h[m];
                  ++m;
                  t.push(y.parseInt(Ub));
                }
              }
              m = 0;
              for (h = fc.resolve(a, "graphic"); m < h.length;) {
                Ub = h[m];
                ++m;
                var A = D.xml_name(Ub);
                u = D.xml_str(Ub, "image");
                var Y = Xb.toIntArray(D.xml_str(Ub, "slice9"));
                r = D.xml_str(Ub, "tile", true, "");
                v = 0;
                switch (r) {
                  case "h":
                  case "horizontal":
                    v = 16;
                    break;
                  case "v":
                  case "vertical":
                    v = 1;
                    break;
                  case "all":
                  case "both":
                  case "hv":
                  case "true":
                  case "vh":
                    v = 17;
                }
                r = v;
                var z = D.xml_bool(Ub, "toggle");
                z = z && c;
                v = D.gfx(u);
                switch (A) {
                  case "all":
                    A = c ? 6 : 3;
                    if (w != 0) {
                      A = D.getBmp(v).height / w | 0;
                    }
                    if (u != "") {
                      b = [this.loadScaledSrc(Ub, "image", "scale_src", 1, A)];
                    }
                    k = [this.load9SliceSprite_scaleSub(Y, Ub, b[0], "image")];
                    w = D.getBmp(b[0]);
                    q = w.width;
                    w = w.height / A | 0;
                    break;
                  case "active":
                  case "highlight":
                  case "hilight":
                  case "hover":
                  case "over":
                    if (u != "") {
                      if (z) {
                        b[4] = this.loadScaledSrc(Ub, "image", "scale_src");
                      } else {
                        b[1] = this.loadScaledSrc(Ub, "image", "scale_src");
                      }
                    }
                    if (z) {
                      k[4] = this.load9SliceSprite_scaleSub(Y, Ub, b[4], "image");
                    } else {
                      k[1] = this.load9SliceSprite_scaleSub(Y, Ub, b[1], "image");
                    }
                    break;
                  case "down":
                  case "pressed":
                  case "pushed":
                    if (u != "") {
                      if (z) {
                        b[5] = this.loadScaledSrc(Ub, "image", "scale_src");
                      } else {
                        b[2] = this.loadScaledSrc(Ub, "image", "scale_src");
                      }
                    }
                    if (z) {
                      k[5] = this.load9SliceSprite_scaleSub(Y, Ub, b[5], "image");
                    } else {
                      k[2] = this.load9SliceSprite_scaleSub(Y, Ub, b[2], "image");
                    }
                    break;
                  case "":
                  case "inactive":
                  case "normal":
                  case "up":
                    if (u != "") {
                      if (z) {
                        b[3] = this.loadScaledSrc(Ub, "image", "scale_src");
                      } else {
                        b[0] = this.loadScaledSrc(Ub, "image", "scale_src");
                      }
                    }
                    if (z) {
                      k[3] = this.load9SliceSprite_scaleSub(Y, Ub, b[3], "image");
                    } else {
                      k[0] = this.load9SliceSprite_scaleSub(Y, Ub, b[0], "image");
                    }
                }
                if (b[0] != "" && b.length >= 3) {
                  if (b[1] == "") {
                    b[1] = b[0];
                  }
                  if (b[2] == "") {
                    b[2] = b[1];
                  }
                  if (b.length >= 6) {
                    if (b[3] == "") {
                      b[3] = b[0];
                    }
                    if (b[4] == "") {
                      b[4] = b[1];
                    }
                    if (b[5] == "") {
                      b[5] = b[2];
                    }
                  }
                }
              }
              e.loadGraphicSlice9(b, p, n, k, r, f, c, q, w, t);
            }
          } else if (d == "tab_menu") {
            b = "flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png".split(" ");
            m = Xb.toIntArray("6,6,11,11");
            k = [m, m, m, m, m, m];
            e.loadGraphicSlice9(b, p, n, k, 0, f, c);
          } else {
            if (p <= 0) {
              p = 80;
            }
            if (n <= 0) {
              n = 20;
            }
            e.loadGraphicSlice9(null, p, n, null, 0, f, c);
          }
          if (g == null) {
            if (a != null && hb.resolve(a, "text")) {
              this.formatButtonText(a, e);
            } else if (d == "tab_menu") {
              e.up_color = 16777215;
              e.down_color = 16777215;
              e.over_color = 16777215;
              e.up_toggle_color = 16777215;
              e.down_toggle_color = 16777215;
              e.over_toggle_color = 16777215;
            } else {
              e.autoCenterLabel();
            }
          } else {
            e.autoCenterLabel();
          }
          if (g != null && l != "" && a != null && hb.resolve(a, "text")) {
            this.formatButtonText(a, e);
          }
          d = c = 0;
          if (a.get("text_x") != null) {
            c = this._loadWidth(a, 0, "text_x") | 0;
          } else if (a.get("label_x") != null) {
            c = this._loadWidth(a, 0, "label_x") | 0;
          }
          if (a.get("text_y") != null) {
            d = this._loadHeight(a, 0, "text_y") | 0;
          } else if (a.get("label_y") != null) {
            d = this._loadHeight(a, 0, "label_y") | 0;
          }
          if (e instanceof cf) {
            f = e;
            if (f.label instanceof Na) {
              a = f.label;
              m = 0;
              h = a.group.members;
              while (m < h.length) {
                a = h[m];
                ++m;
                if (a instanceof Wd) {
                  a.offset.set_x(a.offset.x - c);
                  a.offset.set_y(a.offset.y - d);
                  break;
                }
              }
            } else {
              a = f.label;
              a.offset.set_x(a.offset.x - c);
              a = f.label;
              a.offset.set_y(a.offset.y - d);
              if (V != null) {
                V.offset.set_x(V.offset.x - c);
                V.offset.set_y(V.offset.y - d);
              }
            }
          } else {
            f = e;
            a = f.label;
            a.offset.set_x(a.offset.x - c);
            a = f.label;
            a.offset.set_y(a.offset.y - d);
          }
          if (g != null && V != null) {
            e.set_toggle_label(V);
          }
          if (e instanceof Hc && (g = e, g._assetsToCleanup != null)) {
            m = 0;
            h = g._assetsToCleanup;
            while (m < h.length) {
              g = h[m];
              ++m;
              this.addToCleanup(g);
            }
          }
          return e;
        },
        _loadRegion: function (a) {
          var b = this.calcMaxMinSize(a);
          var c = this._loadWidth(a) | 0;
          var d = this._loadHeight(a) | 0;
          if (b != null) {
            d = D.conformToBounds(new ob(c, d), b);
            c = d.x | 0;
            d = d.y | 0;
          }
          a = D.xml_bool(a, "visible", true);
          c = new th(0, 0, c, d);
          c.set_visible(a);
          return c;
        },
        _load9SliceSprite: function (a, b) {
          if (b == null) {
            b = "";
          }
          var c = this.getResizeRatio(a);
          var d = this._loadColor(a);
          var e = c.x;
          var f = this._loadCompass(a, "resize_point");
          c = c.y | 0;
          var k = this.calcMaxMinSize(a);
          var t = "";
          if (a.get("src") != null) {
            t = a.get("src");
            if (t == "" || t == null) {
              t = "";
            } else {
              t = D.gfx(t);
              try {
                if (!U.exists(t, "IMAGE")) {
                  throw I.thrown("couldn't load bmp \"src\"");
                }
              } catch (m) {
                Oa.lastError = m;
                var l = I.caught(m).unwrap();
                if (typeof l == "string") {
                  g.log.advanced("FlxUI: U.xml_gfx() : " + l, Aa.ERROR, true);
                } else {
                  throw m;
                }
              }
            }
          }
          if (l = hb.resolve(a, "scale_src")) {
            var J = t;
            t = this.loadScaledSrc(a, "src", "scale_src");
            if (t != J) {
              this.addToCleanup(J);
            }
          }
          if (t == "") {
            t = null;
          }
          if (t == null && b == "tab_menu") {
            t = "flixel/flixel-ui/img/chrome_flat.png";
          }
          b = this._loadWidth(a) | 0;
          J = this._loadHeight(a) | 0;
          if (k != null) {
            if (b < k.min_width) {
              b = k.min_width | 0;
            } else if (b > k.max_width) {
              b = k.max_width;
            }
            if (J < k.min_height) {
              J = k.min_height | 0;
            } else if (J > k.max_height) {
              J = k.max_height | 0;
            }
          }
          if (b == 0 || J == 0) {
            return null;
          }
          k = new ba(0, 0, b, J);
          b = Xb.toIntArray(D.xml_str(a, "slice9"));
          J = "";
          var h = t;
          if (l) {
            b = this.load9SliceSprite_scaleSub(b, a, t);
            J = t;
            h = g.bitmap._cache.h[t];
          }
          t = D.xml_bool(a, "smooth", false);
          l = 0;
          switch (D.xml_str(a, "tile", true, "")) {
            case "h":
            case "horizontal":
              l = 16;
              break;
            case "v":
            case "vertical":
              l = 1;
              break;
            case "all":
            case "both":
            case "hv":
            case "true":
            case "vh":
              l = 17;
          }
          return new W(0, 0, h, k, b, l, t, J, e, f, c, false, d);
        },
        load9SliceSprite_scaleSub: function (a, b, c, d) {
          if (d == null) {
            d = "src";
          }
          var e = "";
          if (b.get(d) != null) {
            e = b.get(d);
            if (e == "" || e == null) {
              e = "";
            } else {
              e = D.gfx(e);
              try {
                if (!U.exists(e, "IMAGE")) {
                  throw I.thrown("couldn't load bmp \"" + d + "\"");
                }
              } catch (k) {
                Oa.lastError = k;
                b = I.caught(k).unwrap();
                if (typeof b == "string") {
                  g.log.advanced("FlxUI: U.xml_gfx() : " + b, Aa.ERROR, true);
                } else {
                  throw k;
                }
              }
            }
          }
          if (c == e) {
            return a;
          }
          c = g.bitmap._cache.h[c] != null ? g.bitmap._cache.h[c].bitmap : null;
          if (c == null) {
            c = U.getBitmapData(e);
          }
          e = U.getBitmapData(e, false);
          b = c.width / e.width;
          d = c.height / e.height;
          if (Math.abs(1 - b) <= 0.001 && Math.abs(1 - d) <= 0.001) {
            return a;
          }
          if (a != null) {
            a[0] = a[0] * b | 0;
            a[1] = a[1] * d | 0;
            var f = e.height - a[3];
            a[2] = c.width - ((e.width - a[2]) * b | 0) | 0;
            a[3] = c.height - (f * d | 0) | 0;
          }
          return a;
        },
        _loadBox: function (a) {
          var b = this._loadWidth(a, 1, "thickness") | 0;
          var c = this.calcMaxMinSize(a);
          if (c == null) {
            c = {
              min_width: -Infinity,
              min_height: -Infinity,
              max_width: Infinity,
              max_height: Infinity
            };
          }
          var d = this._loadWidth(a) | 0;
          var e = this._loadHeight(a) | 0;
          if (c != null) {
            if (d < c.min_width) {
              d = c.min_width | 0;
            } else if (d > c.max_width) {
              d = c.max_width | 0;
            }
            if (e < c.min_height) {
              e = c.max_height | 0;
            } else if (e > c.max_height) {
              e = c.max_height | 0;
            }
          }
          a = D.xml_str(a, "color", true, "0xff000000");
          c = 0;
          if (a != "" && (c = Gb.fromString(a), c == null)) {
            throw I.thrown("U.parseHex() unable to parse hex String " + a);
          }
          a = new Bc(0, 0);
          var f = d + "x" + e + ":" + c + ":" + b;
          if (g.bitmap._cache.h[f] != null) {
            a.loadGraphic(f);
          } else {
            a.makeGraphic(d, e, c, false, f);
            b = new ba(b, b, d - b * 2, e - b * 2);
            a.graphic.bitmap.fillRect(b, 0);
          }
          return a;
        },
        _loadLine: function (a) {
          var b = D.xml_str(a, "axis", true, "horizontal");
          var c = this._loadWidth(a, -1, "thickness") | 0;
          var d = this.calcMaxMinSize(a);
          if (d == null) {
            d = {
              min_width: 1,
              min_height: 1,
              max_width: Infinity,
              max_height: Infinity
            };
          }
          switch (b) {
            case "h":
            case "horizontal":
            case "horz":
              d.max_height = c;
              d.min_height = c;
              break;
            case "v":
            case "vert":
            case "vertical":
              d.max_width = c;
              d.min_width = c;
          }
          var e = this._loadWidth(a) | 0;
          var f = this._loadHeight(a) | 0;
          if (d != null) {
            if (e < d.min_width) {
              e = d.min_width | 0;
            } else if (e > d.max_width) {
              e = d.max_width | 0;
            }
            if (f < d.min_height) {
              f = d.max_height | 0;
            } else if (f > d.max_height) {
              f = d.max_height | 0;
            }
          }
          a = D.xml_str(a, "color", true, "0xff000000");
          d = 0;
          if (a != "" && (d = Gb.fromString(a), d == null)) {
            throw I.thrown("U.parseHex() unable to parse hex String " + a);
          }
          b = b == "horizontal" ? Kg.HORIZONTAL : Kg.VERTICAL;
          return new lj(0, 0, b, b == Kg.HORIZONTAL ? e : f, c != -1 ? c : b == Kg.HORIZONTAL ? f : e, d);
        },
        _loadBar: function (a) {
          var b = {
            filledColors: null,
            emptyColors: null,
            chunkSize: null,
            gradRotation: null,
            filledColor: null,
            emptyColor: null,
            borderColor: null,
            filledImgSrc: "",
            emptyImgSrc: ""
          };
          var c = this._loadWidth(a, -1) | 0;
          var d = this._loadHeight(a, -1) | 0;
          switch (D.xml_str(a, "fill_direction", true)) {
            case "bottom_to_top":
              var e = Ad.BOTTOM_TO_TOP;
              break;
            case "horizontal_inside_out":
              e = Ad.HORIZONTAL_INSIDE_OUT;
              break;
            case "horizontal_outside_in":
              e = Ad.HORIZONTAL_OUTSIDE_IN;
              break;
            case "left_to_right":
              e = Ad.LEFT_TO_RIGHT;
              break;
            case "right_to_left":
              e = Ad.RIGHT_TO_LEFT;
              break;
            case "top_to_bottom":
              e = Ad.TOP_TO_BOTTOM;
              break;
            case "vertical_inside_out":
              e = Ad.VERTICAL_INSIDE_OUT;
              break;
            case "vertical_outside_in":
              e = Ad.VERTICAL_OUTSIDE_IN;
              break;
            default:
              e = Ad.LEFT_TO_RIGHT;
          }
          var f = D.xml_str(a, "parent_ref", true);
          var k = f != "" ? this.getAsset(f) : null;
          var t = D.xml_str(a, "variable");
          f = D.xml_f(a, "value", -1);
          var l = D.xml_f(a, "min", 0);
          var g = D.xml_f(a, "max", 100);
          if (f == -1) {
            f = g;
          }
          b.borderColor = D.xml_color(a, "border_color");
          var h = b.borderColor != null;
          b.filledColor = D.xml_color(a, "filled_color");
          if (b.filledColor == null) {
            b.filledColor = D.xml_color(a, "color");
          }
          b.emptyColor = D.xml_color(a, "empty_color");
          b.filledColors = D.xml_colorArray(a, "filled_colors");
          b.emptyColors = D.xml_colorArray(a, "empty_colors");
          if (b.filledColors == null) {
            b.filledColors = D.xml_colorArray(a, "colors");
          }
          b.filledImgSrc = this.loadScaledSrc(a, "src_filled");
          b.emptyImgSrc = this.loadScaledSrc(a, "src_empty");
          if (b.filledImgSrc == "") {
            b.filledImgSrc = this.loadScaledSrc(a, "src");
          }
          b.chunkSize = D.xml_i(a, "chunk_size", 1);
          b.gradRotation = D.xml_i(a, "rotation", 90);
          if (b.filledImgSrc == "" && b.filledColor == null && b.filledColors == null) {
            b.filledColor = -65536;
          }
          a = c == -1 && d == -1 ? new ei(0, 0, e, 100, 10, k, t, l, g, h) : new ei(0, 0, e, c, d, k, t, l, g, h);
          a.set_style(b);
          a.resize(a.barWidth, a.barHeight);
          a.set_value(f);
          return a;
        },
        _loadSprite: function (a) {
          var b = this.loadScaledSrc(a);
          var c = this.calcMaxMinSize(a);
          var d = this.getResizeRatio(a, -1);
          var e = d.x;
          d = d.y | 0;
          var f = this._loadCompass(a, "resize_point");
          var k = this._loadWidth(a, -1) | 0;
          var t = this._loadHeight(a, -1) | 0;
          if (c != null) {
            if (k < c.min_width) {
              k = c.min_width | 0;
            } else if (k > c.max_width) {
              k = c.max_width | 0;
            }
            if (t < c.min_height) {
              t = c.max_height | 0;
            } else if (t > c.max_height) {
              t = c.max_height | 0;
            }
          }
          if (b != "") {
            if (k == -1 && t == -1) {
              a = new Bc(0, 0, b);
            } else {
              if (e != -1 && (k == -1 || t == -1)) {
                if (d == -1) {
                  if (k == -1) {
                    d = 0;
                  }
                  if (t == -1) {
                    d = 1;
                  }
                }
                if (d == 1) {
                  t = 1 / e * k;
                } else if (d == 0) {
                  k = 1 / e * t;
                }
              }
              b = this.loadSmooth(a, true);
              a = new Bc(0, 0, D.loadScaledImage(D.xml_str(a, "src"), k, t, b));
            }
          } else {
            a = D.xml_str(a, "color");
            b = 0;
            if (a != "" && (b = Gb.fromString(a), b == null)) {
              throw I.thrown("U.parseHex() unable to parse hex String " + a);
            }
            a = new Bc(0, 0);
            a.makeGraphic(k, t, b);
          }
          a.set_resize_point(f);
          a.set_resize_ratio(e);
          a.resize_ratio_axis = d;
          return a;
        },
        loadSmooth: function (a, b) {
          b = b ? "true" : "false";
          var c = D.xml_str(a, "smooth", true, b);
          if (c == "") {
            c = D.xml_str(a, "antialias", true, b);
          }
          return D.boolify(c);
        },
        loadScaledSrc: function (a, b, c, d, e) {
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = "scale";
          }
          if (b == null) {
            b = "src";
          }
          var f = D.xml_str(a, b);
          if (hb.resolve(a, c)) {
            for (var k = 0, t = fc.resolve(a, c); k < t.length;) {
              c = t[k];
              ++k;
              var l = D.xml_f(c, "screen_ratio", -1);
              var J = D.xml_f(c, "tolerance", 0.1);
              var h = g.width / g.height;
              if (l < 0 || l > 0 && Math.abs(l - h) <= J) {
                k = D.xml_str(c, "suffix");
                k = f + k;
                J = -1;
                t = this.loadSmooth(c, true);
                l = this._loadHeight(c, -1, "to_height");
                if (l != -1) {
                  h = D.getBmp(D.gfx(f));
                  if (h != null) {
                    J = l / h.height;
                  }
                } else {
                  J = this._loadScale(c, -1);
                  if (J == -1) {
                    J = this._loadScale(c, -1, "value");
                  }
                }
                l = J != -1 ? J : this._loadScaleX(c, -1);
                J = J != -1 ? J : this._loadScaleY(c, -1);
                if (l > 0 && J > 0) {
                  if (l <= 0) {
                    l = 1;
                  }
                  if (J <= 0) {
                    J = 1;
                  }
                  h = this._loadWidth(c, -1);
                  var m = this._loadHeight(c, -1);
                  if (h == -1 || m == -1) {
                    c = U.getBitmapData(D.gfx(f));
                    h = c.width;
                    m = c.height;
                  }
                  h *= l;
                  m *= J;
                } else {
                  h = this._loadWidth(c, -1);
                  m = this._loadHeight(c, -1);
                }
                if (h != 0 && m != 0) {
                  if (e > 1 || d > 1) {
                    c = U.getBitmapData(D.gfx(f));
                    d = D.scaleAndStoreTileset(D.gfx(k), J, c.width / d | 0, c.height / e | 0, h | 0, m / e | 0, t);
                    this.addToScaledAssets(d);
                    return d;
                  }
                  a = D.loadScaledImage(k, h, m, t);
                  this.addToScaledAssets(a);
                  return a;
                }
                break;
              }
            }
          }
          d = "";
          if (a.get(b) != null) {
            d = a.get(b);
            if (d == "" || d == null) {
              d = "";
            } else {
              d = D.gfx(d);
              try {
                if (!U.exists(d, "IMAGE")) {
                  throw I.thrown("couldn't load bmp \"" + b + "\"");
                }
              } catch (Ka) {
                Oa.lastError = Ka;
                t = I.caught(Ka).unwrap();
                if (typeof t == "string") {
                  g.log.advanced("FlxUI: U.xml_gfx() : " + t, Aa.ERROR, true);
                } else {
                  throw Ka;
                }
              }
            }
          }
          return d;
        },
        _getAnchorPos: function (a, b, c) {
          switch (c) {
            case "":
              break;
            case "center":
              if (b == "x") {
                return this.screenWidth() / 2;
              }
              if (b == "y") {
                return this.screenHeight() / 2;
              }
              break;
            case "bottom":
            case "down":
              return this.screenHeight();
            case "left":
              break;
            case "right":
              return this.screenWidth();
            case "top":
            case "up":
              break;
            default:
              a = D.perc_to_float(c);
              if (!isNaN(a)) {
                if (b == "x") {
                  return a * this.screenWidth();
                }
                if (b == "y") {
                  return a * this.screenHeight();
                }
              } else if (new na("[\\w]+\\.[\\w]+", "").match(c)) {
                a = "";
                if (b == "x") {
                  a = "w";
                }
                if (b == "y") {
                  a = "h";
                }
                return this._getStretch(1, a, c);
              }
          }
          return 0;
        },
        getRound: function (a, b) {
          if (b == null) {
            b = "";
          }
          switch (D.xml_str(a, "round", true, b)) {
            case "1":
            case "ceil":
            case "ceiling":
            case "up":
              return uh.Ceil;
            case "-1":
            case "down":
            case "floor":
              return uh.Floor;
            case "0":
            case "round":
            case "true":
              return uh.Round;
          }
          return uh.None;
        },
        doRound: function (a, b) {
          switch (b._hx_index) {
            case 0:
              return Math.floor(a);
            case 1:
              return Math.ceil(a);
            case 2:
              return Math.round(a);
            case 3:
              return a;
          }
        },
        calcMaxMinSize: function (a, b, c) {
          var d = 0;
          var e = 0;
          var f = Infinity;
          var k = Infinity;
          if (hb.resolve(a, "exact_size")) {
            var t = 0;
            for (a = fc.resolve(a, "exact_size"); t < a.length;) {
              f = a[t];
              ++t;
              d = D.xml_str(f, "width");
              e = D.xml_str(f, "height");
              var l = this.getRound(f);
              d = this.doRound(this._getDataSize("w", d, 0), l);
              e = this.doRound(this._getDataSize("h", e, 0), l);
              f = this.doRound(d, l);
              k = this.doRound(e, l);
            }
          } else if (hb.resolve(a, "min_size")) {
            t = 0;
            a = fc.resolve(a, "min_size");
            while (t < a.length) {
              l = a[t];
              ++t;
              var g = D.xml_str(l, "width");
              var h = D.xml_str(l, "height");
              l = this.getRound(l);
              g = this.doRound(this._getDataSize("w", g, 0), l);
              l = this.doRound(this._getDataSize("h", h, 0), l);
              if (g > d) {
                d = g;
              }
              if (l > e) {
                e = l;
              }
            }
          } else if (hb.resolve(a, "max_size")) {
            t = 0;
            a = fc.resolve(a, "max_size");
            while (t < a.length) {
              l = a[t];
              ++t;
              g = D.xml_str(l, "width");
              h = D.xml_str(l, "height");
              l = this.getRound(l);
              g = this.doRound(this._getDataSize("w", g, Infinity), l);
              l = this.doRound(this._getDataSize("h", h, Infinity), l);
              if (g < f) {
                f = g;
              }
              if (l < k) {
                k = l;
              }
            }
          } else {
            return null;
          }
          if (b != null) {
            if (b > d) {
              d = b;
            }
            if (b < f) {
              f = b;
            }
          }
          if (c != null) {
            if (c > e) {
              e = c;
            }
            if (c < k) {
              k = c;
            }
          }
          if (f <= 0) {
            f = Infinity;
          }
          if (k <= 0) {
            k = Infinity;
          }
          return {
            min_width: d,
            min_height: e,
            max_width: f,
            max_height: k
          };
        },
        _getDataSize: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (D.isStrNum(b)) {
            return parseFloat(b);
          }
          var d = D.perc_to_float(b);
          if (isNaN(d)) {
            if (b.indexOf("stretch:") == 0) {
              b = v.replace(b, "stretch:", "");
              d = b.split(",");
              b = this._getStretch(0, a, d[0]);
              a = this._getStretch(1, a, d[1]);
              if (b != -1 && a != -1) {
                return a - b;
              } else {
                return c;
              }
            }
            if (b.indexOf("asset:") == 0) {
              b = v.replace(b, "asset:", "");
              return c = this._getStretch(1, a, b);
            }
            if (new na("[\\w]+\\.[\\w]+", "").match(b)) {
              return c = this._getStretch(1, a, b);
            }
            d = "";
            if (b.indexOf("pt") == b.length - 2) {
              d = L.substr(b, 0, b.length - 2);
            }
            if (d != "" && D.isStrNum(d)) {
              b = parseFloat(d);
              switch (a) {
                case "h":
                case "height":
                  return this._pointY * b;
                case "w":
                case "width":
                  return this._pointX * b;
              }
            }
          } else {
            switch (a) {
              case "h":
              case "height":
                return this.screenHeight() * d;
              case "scale":
              case "scale_x":
              case "scale_y":
                return d;
              case "w":
              case "width":
                return this.screenWidth() * d;
            }
          }
          return c;
        },
        _getOperation: function (a) {
          for (var b = ["+", "-", "*", "/", "^"], c = "", d = Infinity, e = 0; e < b.length;) {
            var f = b[e];
            ++e;
            var k = a.indexOf(f);
            if (k != -1 && k < d) {
              d = k;
              c = f;
            }
          }
          d = false;
          if (c != "" && a.indexOf(c) != -1 && (e = a.indexOf(c), e != a.length - 1 && (b = L.substr(a, 0, e), a = L.substr(a, e + 1, a.length - (e + 1)), e = a.indexOf("pt"), e != -1 && e == a.length - 2 ? (d = v.replace(a, "pt", ""), e = parseFloat(d), d = true) : e = parseFloat(a), isNaN(e) && (e = this.getAssetProperty(1, "", a)), e != 0 || a == "0"))) {
            return [b, c, e, d];
          } else {
            return null;
          }
        },
        _doOperation: function (a, b, c) {
          switch (b) {
            case "*":
              return a * c;
            case "+":
              return a + c;
            case "-":
              return a - c;
            case "/":
              return a / c;
            case "^":
              return Math.pow(a, c);
          }
          return a;
        },
        _getStretch: function (a, b, c) {
          var d = "";
          var e = 0;
          var f = this._getOperation(c);
          if (f != null && (c = f[0], d = f[1], e = f[2], f = f[3])) {
            switch (b) {
              case "h":
              case "height":
                e *= this._pointY;
                break;
              case "w":
              case "width":
                e *= this._pointX;
                break;
              default:
                e *= this._pointY;
            }
          }
          a = this.getAssetProperty(a, b, c);
          if (a != -1 && d != "") {
            a = this._doOperation(a, d, e);
          }
          return a;
        },
        getAssetProperty: function (a, b, c) {
          var d = "";
          if (c.indexOf(".") != -1) {
            d = c.split(".");
            c = d[0];
            d = d[1];
          }
          var e = this.getAsset(c);
          var f = 0;
          if (e == null) {
            switch (c) {
              case "bottom":
              case "down":
                f = this.screenHeight();
                break;
              case "left":
                f = 0;
                break;
              case "right":
                f = this.screenWidth();
                break;
              case "top":
              case "up":
                f = 0;
                break;
              default:
                f = D.isStrNum(c) ? parseFloat(c) : -1;
            }
          } else {
            switch (b) {
              case "h":
              case "height":
                if (d == "") {
                  if (a == 0) {
                    f = e.y + e.get_height();
                  }
                  if (a == 1) {
                    f = e.y;
                  }
                } else {
                  switch (d) {
                    case "center":
                      f = e.y + e.get_height() / 2;
                      break;
                    case "bottom":
                    case "down":
                      f = e.y + e.get_height();
                      break;
                    case "halfheight":
                      f = e.get_height() / 2;
                      break;
                    case "halfwidth":
                      f = e.get_width() / 2;
                      break;
                    case "height":
                      f = e.get_height();
                      break;
                    case "right":
                      f = e.x + e.get_width();
                      break;
                    case "width":
                      f = e.get_width();
                      break;
                    case "left":
                    case "x":
                      f = e.x;
                      break;
                    case "top":
                    case "up":
                    case "y":
                      f = e.y;
                  }
                }
                break;
              case "w":
              case "width":
                if (d == "") {
                  if (a == 0) {
                    f = e.x + e.get_width();
                  }
                  if (a == 1) {
                    f = e.x;
                  }
                } else {
                  switch (d) {
                    case "center":
                      f = e.x + e.get_width() / 2;
                      break;
                    case "bottom":
                    case "down":
                      f = e.y + e.get_height();
                      break;
                    case "halfheight":
                      f = e.get_height() / 2;
                      break;
                    case "halfwidth":
                      f = e.get_width() / 2;
                      break;
                    case "height":
                      f = e.get_height();
                      break;
                    case "right":
                      f = e.x + e.get_width();
                      break;
                    case "width":
                      f = e.get_width();
                      break;
                    case "left":
                    case "x":
                      f = e.x;
                      break;
                    case "top":
                    case "up":
                    case "y":
                      f = e.y;
                  }
                }
                break;
              default:
                switch (d) {
                  case "centerx":
                    f = e.x + e.get_width() / 2;
                    break;
                  case "centery":
                    f = e.y + e.get_height() / 2;
                    break;
                  case "bottom":
                  case "down":
                    f = e.y + e.get_height();
                    break;
                  case "halfheight":
                    f = e.get_height() / 2;
                    break;
                  case "halfwidth":
                    f = e.get_width() / 2;
                    break;
                  case "height":
                    f = e.get_height();
                    break;
                  case "right":
                    f = e.x + e.get_width();
                    break;
                  case "width":
                    f = e.get_width();
                    break;
                  case "left":
                  case "x":
                    f = e.x;
                    break;
                  case "top":
                  case "up":
                  case "y":
                    f = e.y;
                }
            }
          }
          return f;
        },
        _loadCursor: function (a) {
          if (hb.resolve(a, "list")) {
            if (this.cursorLists == null) {
              this.cursorLists = [];
            }
            var b = 0;
            for (a = fc.resolve(a, "list"); b < a.length;) {
              var c = a[b];
              ++b;
              c = D.xml_str(c, "ids").split(",");
              if (c != null && c.length > 0) {
                var d = [];
                for (var e = 0; e < c.length;) {
                  var f = c[e];
                  ++e;
                  f = this.getAsset(f);
                  if (f != null) {
                    d.push(f);
                  }
                }
                this.cursorLists.push(d);
              }
            }
          }
        },
        _loadPosition: function (a, b) {
          var c = this._loadWidth(a, 0, "x");
          var d = this._loadHeight(a, 0, "y");
          var e = D.xml_bool(a, "center_x");
          var f = D.xml_bool(a, "center_y");
          var k = D.xml_str(a, "center_on");
          var t = D.xml_str(a, "center_on_x");
          var l = D.xml_str(a, "center_on_y");
          var J = "";
          var h = "";
          var m = 0;
          var Ka = 0;
          var p = "";
          var n = "";
          if (hb.resolve(a, "anchor")) {
            J = D.xml_str(Hb.resolve(a, "anchor"), "x");
            h = D.xml_str(Hb.resolve(a, "anchor"), "y");
            p = this.getRound(Hb.resolve(a, "anchor"));
            m = this._getAnchorPos(b, "x", J);
            Ka = this._getAnchorPos(b, "y", h);
            m = this.doRound(m, p);
            Ka = this.doRound(Ka, p);
            p = D.xml_str(Hb.resolve(a, "anchor"), "x-flush", true);
            n = D.xml_str(Hb.resolve(a, "anchor"), "y-flush", true);
          }
          if (J != "" || h != "") {
            switch (p) {
              case "center":
                m -= b.get_width() / 2;
                break;
              case "right":
                m -= b.get_width();
            }
            switch (n) {
              case "bottom":
              case "down":
                Ka -= b.get_height();
                break;
              case "center":
                Ka -= b.get_height() / 2;
            }
            if (J != "") {
              b.set_x(m);
            }
            if (h != "") {
              b.set_y(Ka);
            }
          }
          if (e || f) {
            a = e;
            if (f == null) {
              f = true;
            }
            if (a == null) {
              a = true;
            }
            if (a) {
              b.set_x((g.width - b.get_width()) / 2);
            }
            if (f) {
              b.set_y((g.height - b.get_height()) / 2);
            }
          }
          if (k != "") {
            k = this.getAsset(k);
            if (k != null) {
              k = wa.__cast(k, hc);
              t = wa.__cast(b, hc);
              t.set_x(k.x + (k.get_width() - t.get_width()) / 2);
              t.set_y(k.y + (k.get_height() - t.get_height()) / 2);
            }
          } else {
            if (t != "") {
              k = this.getAsset(t);
              if (k != null) {
                k = wa.__cast(k, hc);
                t = wa.__cast(b, hc);
                f = true;
                a = false;
                if (a == null) {
                  a = true;
                }
                if (f == null) {
                  f = true;
                }
                if (f) {
                  t.set_x(k.x + (k.get_width() - t.get_width()) / 2);
                }
                if (a) {
                  t.set_y(k.y + (k.get_height() - t.get_height()) / 2);
                }
              }
            }
            if (l != "") {
              k = this.getAsset(l);
              if (k != null) {
                k = wa.__cast(k, hc);
                t = wa.__cast(b, hc);
                f = false;
                a = true;
                if (a == null) {
                  a = true;
                }
                if (f == null) {
                  f = true;
                }
                if (f) {
                  t.set_x(k.x + (k.get_width() - t.get_width()) / 2);
                }
                if (a) {
                  t.set_y(k.y + (k.get_height() - t.get_height()) / 2);
                }
              }
            }
          }
          a = c;
          f = d;
          if (f == null) {
            f = 0;
          }
          if (a == null) {
            a = 0;
          }
          b.set_x(b.x + a);
          b.set_y(b.y + f);
        },
        _loadBorder: function (a) {
          var b = af.fromXML(a);
          var c = this.getRound(a, "floor");
          a = this._getDataSize("h", D.xml_str(a, "border_size"), 1);
          c = this.doRound(a, c) | 0;
          b.size = c;
          return b;
        },
        _loadColor: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = "color";
          }
          var d = D.xml_str(a, b);
          if (d == "") {
            if (a.nodeType != T.Element) {
              throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
            }
            b = a.nodeName == b;
          } else {
            b = false;
          }
          if (b) {
            d = D.xml_str(a, "value");
          }
          a = c;
          if (d != "" && (a = Gb.fromString(d), a == null)) {
            throw I.thrown("U.parseHex() unable to parse hex String " + d);
          }
          return a;
        },
        _loadFontDef: function (a) {
          var b = md.fromXML(a);
          a = this._loadHeight(a, 8, "size") | 0;
          b.format.size = Ma.fontSize(b.file, a);
          b.set_size(a);
          return b;
        },
        _loadFontFace: function (a) {
          var b = D.xml_str(a, "font");
          a = D.xml_str(a, "style");
          var c = null;
          if (b != "") {
            c = Ma.font(b, a);
          }
          return c;
        },
        _onFinishLoad: function () {
          if (this._ptr != null) {
            this._ptr.getEvent("finish_load", this, null);
          }
        },
        getText: function (a, b, c, d) {
          if (d == null) {
            d = "";
          }
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "data";
          }
          if (this._ptr_tongue != null) {
            a = this._ptr_tongue.get(a, b, c);
            return this.formatFromCode(a, d);
          } else if (this.getTextFallback != null) {
            a = this.getTextFallback(a, b, c);
            return this.formatFromCode(a, d);
          } else {
            return a;
          }
        },
        formatFromCode: function (a, b) {
          switch (b) {
            case "fu":
              return D.FU(a);
            case "fu_":
              return D.FU_(a);
            case "l":
              return a.toLowerCase();
            case "u":
              return a.toUpperCase();
          }
          return a;
        },
        formatButtonText: function (a, b) {
          if (a != null && hb.resolve(a, "text")) {
            a = Hb.resolve(a, "text");
            var c = D.xml_str(a, "use_def", true);
            var d = null;
            if (c != "") {
              d = this.getDefinition(c);
            }
            var e = Ma.consolidateData(a, d);
            var f = this._loadFontFace(e);
            var k = this._loadHeight(e, 8, "size", "floor") | 0;
            a = this._loadColor(e);
            var t = D.xml_f(e, "width");
            var l = this._loadBorder(e);
            var g = D.xml_str(e, "align", true);
            if (g == "") {
              g = null;
            }
            var h = c = null;
            var m = null;
            if (b instanceof Bb == 0) {
              if (g == "" || g == null) {
                g = "center";
              }
            } else {
              b = b.button;
              g = "left";
            }
            if (b != null) {
              if (b instanceof rd) {
                h = b;
                c = h.label;
              } else if (b instanceof cf) {
                m = b;
                if (m.label instanceof R) {
                  c = m.label;
                } else if (m.label instanceof Na) {
                  d = 0;
                  for (var Ka = m.label.group.members; d < Ka.length;) {
                    var p = Ka[d];
                    ++d;
                    if (p instanceof R) {
                      c = p;
                      break;
                    }
                  }
                }
              }
              b.up_color = a;
              b.down_color = 0;
              b.over_color = 0;
            }
            if (c != null) {
              if (t != 0) {
                c.set_width(t);
                c.resetHelpers();
              }
              if (h != null) {
                h.setLabelFormat(f, k, a, g);
              } else {
                c.setFormat(f, k, a, g);
              }
              c.set_borderStyle(l.style);
              c.set_borderColor(l.color);
              c.set_borderSize(l.size);
              c.set_borderQuality(l.quality);
              if (c instanceof Wd) {
                c.drawFrame();
              }
              if (h != null) {
                h.autoCenterLabel();
              }
              if (m != null) {
                m.autoCenterLabel();
              }
            }
            d = 0;
            for (Ka = fc.resolve(e, "color"); d < Ka.length;) {
              k = Ka[d];
              ++d;
              a = this._loadColor(k);
              e = D.xml_bool(k, "visible", true);
              f = D.xml_name(k);
              k = D.xml_bool(k, "toggle");
              switch (f) {
                case "active":
                case "hilight":
                case "hover":
                case "over":
                  if (k) {
                    b.over_toggle_color = a;
                    b.over_toggle_visible = e;
                  } else {
                    b.over_color = a;
                    b.over_visible = e;
                  }
                  break;
                case "":
                case "inactive":
                case "normal":
                case "up":
                  if (k) {
                    b.up_toggle_color = a;
                    b.up_toggle_visible = e;
                  } else {
                    b.up_color = a;
                    b.up_visible = e;
                  }
                  break;
                case "down":
                case "pressed":
                case "pushed":
                  if (k) {
                    b.down_toggle_color = a;
                    b.down_toggle_visible = e;
                  } else {
                    b.down_color = a;
                    b.down_visible = e;
                  }
              }
            }
            if (b.over_color == 0) {
              b.over_color = b.up_color;
            }
            if (b.down_color == 0) {
              b.down_color = b.over_color;
            }
            if (b.up_toggle_color == 0) {
              b.up_toggle_color = b.up_color;
            }
            if (b.over_toggle_color == 0) {
              b.over_toggle_color = b.over_color;
            }
            if (b.down_toggle_color == 0) {
              b.down_toggle_color = b.down_color;
            }
            if (c != null) {
              c.set_visible(b.up_visible);
              c.set_color(b.up_color);
            }
            return c;
          }
          return null;
        },
        __class__: Ma,
        __properties__: q(db.prototype.__properties__, {
          set_focus: "set_focus"
        })
      });
      var uh = w["flixel.addons.ui.Rounding"] = {
        __ename__: "flixel.addons.ui.Rounding",
        __constructs__: null,
        Floor: {
          _hx_name: "Floor",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        Ceil: {
          _hx_name: "Ceil",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        Round: {
          _hx_name: "Round",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        },
        None: {
          _hx_name: "None",
          _hx_index: 3,
          __enum__: "flixel.addons.ui.Rounding",
          toString: p
        }
      };
      uh.__constructs__ = [uh.Floor, uh.Ceil, uh.Round, uh.None];
      function ed() {}
      h["flixel.addons.ui.interfaces.IResizable"] = ed;
      ed.__name__ = "flixel.addons.ui.interfaces.IResizable";
      ed.__isInterface__ = true;
      ed.prototype = {
        __class__: ed,
        __properties__: {
          get_height: "get_height",
          get_width: "get_width"
        }
      };
      function Bc(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._originalKey = "";
        this.resize_ratio_axis = 1;
        this.ptr_owner = null;
        G.call(this, a, b, c);
      }
      h["flixel.addons.ui.FlxUISprite"] = Bc;
      Bc.__name__ = "flixel.addons.ui.FlxUISprite";
      Bc.__interfaces__ = [ed, qd];
      Bc.__super__ = G;
      Bc.prototype = q(G.prototype, {
        set_resize_ratio: function (a) {
          return this.resize_ratio = a;
        },
        set_resize_point: function (a) {
          if (a != null) {
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = da.pool.get().set(b, c);
            b._inPool = false;
            this.resize_point = b;
            this.resize_point.set_x(a.x);
            this.resize_point.set_y(a.y);
          }
          return this.resize_point;
        },
        resize: function (a, b) {
          var c = this.get_width();
          var d = this.get_height();
          if (this.resize_ratio > 0 && Math.abs(a / b - this.resize_ratio) > 0.0001) {
            if (this.resize_ratio_axis == 1) {
              b = 1 / this.resize_ratio * a;
            } else {
              a = 1 / this.resize_ratio * b;
            }
          }
          if (this._originalKey != "" && this._originalKey != null) {
            a = D.loadScaledImage(this._originalKey, a, b);
            if (a != "" && a != null) {
              this.loadFromScaledGraphic(a);
            }
          }
          c = this.get_width() - c;
          d = this.get_height() - d;
          if (this.resize_point != null) {
            d *= this.resize_point.y;
            this.set_x(this.x - c * this.resize_point.x);
            this.set_y(this.y - d);
          }
        },
        loadGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          a = G.prototype.loadGraphic.call(this, a, b, c, d, e, f);
          this._originalKey = this.graphic.assetsKey;
          if (this._originalKey == null) {
            this._originalKey = this.graphic.key;
          }
          return a;
        },
        destroy: function () {
          this.ptr_owner = null;
          G.prototype.destroy.call(this);
        },
        loadFromScaledGraphic: function (a, b, c, d, e, f) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          G.prototype.loadGraphic.call(this, a, b, c, d, e, f);
        },
        __class__: Bc,
        __properties__: q(G.prototype.__properties__, {
          set_resize_point: "set_resize_point",
          set_resize_ratio: "set_resize_ratio"
        })
      });
      function ob(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
      }
      h["openfl.geom.Point"] = ob;
      ob.__name__ = "openfl.geom.Point";
      ob.prototype = {
        copyFrom: function (a) {
          this.x = a.x;
          this.y = a.y;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setTo: function (a, b) {
          this.x = a;
          this.y = b;
        },
        __toLimeVector2: function () {
          if (ob.__limeVector2 == null) {
            ob.__limeVector2 = new bi();
          }
          var a = ob.__limeVector2;
          a.x = this.x;
          a.y = this.y;
          return ob.__limeVector2;
        },
        __class__: ob
      };
      function ba(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      h["openfl.geom.Rectangle"] = ba;
      ba.__name__ = "openfl.geom.Rectangle";
      ba.prototype = {
        clone: function () {
          return new ba(this.x, this.y, this.width, this.height);
        },
        contains: function (a, b) {
          if (a >= this.x && b >= this.y && a < this.get_right()) {
            return b < this.get_bottom();
          } else {
            return false;
          }
        },
        containsPoint: function (a) {
          return this.contains(a.x, a.y);
        },
        copyFrom: function (a) {
          this.x = a.x;
          this.y = a.y;
          this.width = a.width;
          this.height = a.height;
        },
        equals: function (a) {
          if (a == this) {
            return true;
          } else if (a != null && this.x == a.x && this.y == a.y && this.width == a.width) {
            return this.height == a.height;
          } else {
            return false;
          }
        },
        inflate: function (a, b) {
          this.x -= a;
          this.width += a * 2;
          this.y -= b;
          this.height += b * 2;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setEmpty: function () {
          this.x = this.y = this.width = this.height = 0;
        },
        setTo: function (a, b, c, d) {
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
        },
        union: function (a) {
          if (this.width == 0 || this.height == 0) {
            return a.clone();
          }
          if (a.width == 0 || a.height == 0) {
            return this.clone();
          }
          var b = this.x > a.x ? a.x : this.x;
          var c = this.get_right() < a.get_right() ? a.get_right() : this.get_right();
          var d = this.y > a.y ? a.y : this.y;
          a = this.get_bottom() < a.get_bottom() ? a.get_bottom() : this.get_bottom();
          return new ba(b, d, c - b, a - d);
        },
        __contract: function (a, b, c, d) {
          if (this.width != 0 || this.height != 0) {
            var e = 0;
            var f = 0;
            var k = 0;
            var t = 0;
            if (this.x < a) {
              e = a - this.x;
            }
            if (this.y < b) {
              f = b - this.y;
            }
            if (this.get_right() > a + c) {
              k = a + c - this.get_right();
            }
            if (this.get_bottom() > b + d) {
              t = b + d - this.get_bottom();
            }
            this.x += e;
            this.y += f;
            this.width += k - e;
            this.height += t - f;
          }
        },
        __expand: function (a, b, c, d) {
          if (this.width == 0 && this.height == 0) {
            this.x = a;
            this.y = b;
            this.width = c;
            this.height = d;
          } else {
            var e = this.get_right();
            var f = this.get_bottom();
            if (this.x > a) {
              this.x = a;
              this.width = e - a;
            }
            if (this.y > b) {
              this.y = b;
              this.height = f - b;
            }
            if (e < a + c) {
              this.width = a + c - this.x;
            }
            if (f < b + d) {
              this.height = b + d - this.y;
            }
          }
        },
        __toLimeRectangle: function () {
          if (ba.__limeRectangle == null) {
            ba.__limeRectangle = new Je();
          }
          ba.__limeRectangle.setTo(this.x, this.y, this.width, this.height);
          return ba.__limeRectangle;
        },
        __transform: function (a, b) {
          var c = b.a * this.x + b.c * this.y;
          var d = c;
          var e = b.b * this.x + b.d * this.y;
          var f = e;
          var k = b.a * (this.x + this.width) + b.c * this.y;
          var t = b.b * (this.x + this.width) + b.d * this.y;
          if (k < c) {
            c = k;
          }
          if (t < e) {
            e = t;
          }
          if (k > d) {
            d = k;
          }
          if (t > f) {
            f = t;
          }
          k = b.a * (this.x + this.width) + b.c * (this.y + this.height);
          t = b.b * (this.x + this.width) + b.d * (this.y + this.height);
          if (k < c) {
            c = k;
          }
          if (t < e) {
            e = t;
          }
          if (k > d) {
            d = k;
          }
          if (t > f) {
            f = t;
          }
          k = b.a * this.x + b.c * (this.y + this.height);
          t = b.b * this.x + b.d * (this.y + this.height);
          if (k < c) {
            c = k;
          }
          if (t < e) {
            e = t;
          }
          if (k > d) {
            d = k;
          }
          if (t > f) {
            f = t;
          }
          a.setTo(c + b.tx, e + b.ty, d - c, f - e);
        },
        get_bottom: function () {
          return this.y + this.height;
        },
        get_left: function () {
          return this.x;
        },
        get_right: function () {
          return this.x + this.width;
        },
        get_top: function () {
          return this.y;
        },
        get_topLeft: function () {
          return new ob(this.x, this.y);
        },
        __class__: ba,
        __properties__: {
          get_topLeft: "get_topLeft",
          get_top: "get_top",
          get_right: "get_right",
          get_left: "get_left",
          get_bottom: "get_bottom"
        }
      };
      function W(a, b, c, d, e, f, k, t, l, g, h, m, p) {
        if (p == null) {
          p = -1;
        }
        if (m == null) {
          m = false;
        }
        if (h == null) {
          h = 1;
        }
        if (l == null) {
          l = -1;
        }
        if (t == null) {
          t = "";
        }
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = 0;
        }
        this._asset_id = "";
        this._smooth = false;
        this._tile = 0;
        this._slice9 = null;
        this.paintScale9_id = "";
        Bc.call(this, a, b, null);
        this.set_color(p);
        this._slice9 = e;
        this._tile = f;
        this._smooth = k;
        this._asset_id = "";
        if (c == null) {
          c = "flixel/flixel-ui/img/chrome.png";
        }
        if (typeof c == "string") {
          this._asset_id = c;
          this._raw_pixels = null;
        } else if (c instanceof N) {
          this._asset_id = t;
          this._raw_pixels = c;
        } else if (c instanceof cc) {
          a = c;
          this._asset_id = a.key;
          this._raw_pixels = a.bitmap;
        }
        this.set_resize_ratio(l);
        this.resize_ratio_axis = h;
        if (g != null) {
          this.set_resize_point(g);
        }
        if (m) {
          d = D.applyResize(this.resize_ratio, this.resize_ratio_axis, d.width, d.height);
          this.set_width(d.x);
          this.set_height(d.y);
        } else {
          this.resize(d.width, d.height);
        }
      }
      h["flixel.addons.ui.FlxUI9SliceSprite"] = W;
      W.__name__ = "flixel.addons.ui.FlxUI9SliceSprite";
      W.__interfaces__ = [qd, ed];
      W.paintScale9 = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 0;
        }
        if (c != null) {
          if (k == null) {
            var t = D.getBmp(b);
            if (t != null) {
              var l = t.width;
              t = t.height;
            } else {
              t = g.bitmap._cache.h[b];
              l = t.width;
              t = t.height;
            }
          } else {
            l = k.width;
            t = k.height;
          }
          var J = c[0];
          var h = c[1];
          var m = c[2];
          var p = c[3];
          if (W._staticRects == null) {
            W._staticRects = new xa();
            var n = W._staticRects;
            var ta = Ia._pool.get();
            var q = 0;
            var r = 0;
            var w = 0;
            var u = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h["top.left"] = ta;
            n = W._staticRects;
            ta = Ia._pool.get();
            u = w = r = q = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h.top = ta;
            n = W._staticRects;
            ta = Ia._pool.get();
            u = w = r = q = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h["top.right"] = ta;
            n = W._staticRects;
            ta = Ia._pool.get();
            u = w = r = q = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h.left = ta;
            n = W._staticRects;
            ta = Ia._pool.get();
            u = w = r = q = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h.middle = ta;
            n = W._staticRects;
            ta = Ia._pool.get();
            u = w = r = q = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h.right = ta;
            n = W._staticRects;
            ta = Ia._pool.get();
            u = w = r = q = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h["bottom.left"] = ta;
            n = W._staticRects;
            ta = Ia._pool.get();
            u = w = r = q = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h.bottom = ta;
            n = W._staticRects;
            ta = Ia._pool.get();
            u = w = r = q = 0;
            if (u == null) {
              u = 0;
            }
            if (w == null) {
              w = 0;
            }
            if (r == null) {
              r = 0;
            }
            if (q == null) {
              q = 0;
            }
            ta.x = q;
            ta.y = r;
            ta.width = w;
            ta.height = u;
            ta._inPool = false;
            n.h["bottom.right"] = ta;
          }
          ta = W._staticRects.h["top.left"];
          r = q = 0;
          w = J;
          u = h;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          ta = W._staticRects.h.top;
          q = J;
          r = 0;
          w = m - J;
          u = h;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          ta = W._staticRects.h["top.right"];
          q = m;
          r = 0;
          w = l - m;
          u = h;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          ta = W._staticRects.h.left;
          q = 0;
          r = h;
          w = J;
          u = p - h;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          ta = W._staticRects.h.middle;
          q = J;
          r = h;
          w = m - J;
          u = p - h;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          ta = W._staticRects.h.right;
          q = m;
          r = h;
          w = l - m;
          u = p - h;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          ta = W._staticRects.h["bottom.left"];
          q = 0;
          r = p;
          w = J;
          u = t - p;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          ta = W._staticRects.h.bottom;
          q = J;
          r = p;
          w = m - J;
          u = t - p;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          ta = W._staticRects.h["bottom.right"];
          q = m;
          r = p;
          w = l - m;
          u = t - p;
          if (u == null) {
            u = 0;
          }
          if (w == null) {
            w = 0;
          }
          if (r == null) {
            r = 0;
          }
          if (q == null) {
            q = 0;
          }
          ta.x = q;
          ta.y = r;
          ta.width = w;
          ta.height = u;
          if (W.cacheCounter == null) {
            W.cacheCounter = new xa();
          }
          c = W.makePaintScale9Id(b, c, d);
          l = W.cacheCounter.h[c];
          if (l == null) {
            l = {
              useCount: 0,
              subKeys: []
            };
            for (t = 0; t < 9;) {
              switch (t++) {
                case 0:
                  ta = W._staticRects.h["top.left"];
                  break;
                case 1:
                  ta = W._staticRects.h.top;
                  break;
                case 2:
                  ta = W._staticRects.h["top.right"];
                  break;
                case 3:
                  ta = W._staticRects.h.left;
                  break;
                case 4:
                  ta = W._staticRects.h.middle;
                  break;
                case 5:
                  ta = W._staticRects.h.right;
                  break;
                case 6:
                  ta = W._staticRects.h["bottom.left"];
                  break;
                case 7:
                  ta = W._staticRects.h.bottom;
                  break;
                case 8:
                  ta = W._staticRects.h["bottom.right"];
                  break;
                default:
                  ta = W._staticRects.h["top.left"];
              }
              l.subKeys.push(b + "_" + ta.x + "_" + ta.y + "_" + ta.width + "_" + ta.height + "_");
            }
            W.cacheCounter.h[c] = l;
          }
          W.paintCompoundBitmap(a, b, W._staticRects, d, e, f, k);
          return c;
        }
        return "";
      };
      W.makePaintScale9Id = function (a, b, c) {
        a = a + "_" + b.join(",") + "_";
        b = c.x;
        var d = Xc._pool.get();
        d.label = "x";
        d.value = b;
        b = c.y;
        var e = Xc._pool.get();
        e.label = "y";
        e.value = b;
        b = c.width;
        var f = Xc._pool.get();
        f.label = "w";
        f.value = b;
        b = c.height;
        c = Xc._pool.get();
        c.label = "h";
        c.value = b;
        return a + Xb.getDebugString([d, e, f, c]);
      };
      W.paintCompoundBitmap = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = 0;
        }
        d.x |= 0;
        d.y |= 0;
        d.width |= 0;
        d.height |= 0;
        var t = c.h["top.left"];
        if (t != null) {
          var l = W._staticFlxRect2;
          var g = 0;
          var h = 0;
          var m = t.width;
          var p = t.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, t, W._staticFlxRect2, null, 0, f, k);
        }
        var n = c.h["top.right"];
        if (n != null) {
          l = W._staticFlxRect2;
          g = d.width - n.width;
          h = 0;
          m = n.width;
          p = n.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, n, W._staticFlxRect2, null, 0, f, k);
        }
        var q = c.h.top;
        if (q != null) {
          l = W._staticFlxRect2;
          g = t.width;
          h = 0;
          m = d.width - t.width - n.width;
          p = q.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, q, W._staticFlxRect2, null, e & 16, f, k);
        }
        var r = c.h["bottom.left"];
        if (r != null) {
          l = W._staticFlxRect2;
          g = 0;
          h = d.height - r.height;
          m = r.width;
          p = r.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, r, W._staticFlxRect2, null, 0, f, k);
        }
        var w = c.h["bottom.right"];
        if (w != null) {
          l = W._staticFlxRect2;
          g = d.width - w.width;
          h = d.height - w.height;
          m = w.width;
          p = w.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, w, W._staticFlxRect2, null, 0, f, k);
        }
        var u = c.h.bottom;
        if (u != null) {
          l = W._staticFlxRect2;
          g = r.width;
          h = d.height - u.height;
          m = d.width - r.width - w.width;
          p = u.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, u, W._staticFlxRect2, null, e & 16, f, k);
        }
        w = c.h.left;
        if (w != null) {
          l = W._staticFlxRect2;
          g = 0;
          h = t.height;
          m = w.width;
          p = d.height - t.height - r.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, w, W._staticFlxRect2, null, e & 1, f, k);
        }
        var v = c.h.right;
        if (v != null) {
          l = W._staticFlxRect2;
          g = d.width - v.width;
          h = n.height;
          m = v.width;
          p = d.height - t.height - r.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, v, W._staticFlxRect2, null, e & 1, f, k);
        }
        c = c.h.middle;
        if (c != null) {
          l = W._staticFlxRect2;
          g = w.width;
          h = q.height;
          m = d.width - w.width - v.width;
          p = d.height - q.height - u.height;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (g == null) {
            g = 0;
          }
          l.x = g;
          l.y = h;
          l.width = m;
          l.height = p;
          W.paintBitmapSection(a, b, c, W._staticFlxRect2, null, e, f, k);
        }
      };
      W.paintBitmapSection = function (a, b, c, d, e, f, k, t) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = t ?? D.getBmp(b);
        }
        c.x |= 0;
        c.y |= 0;
        c.width |= 0;
        c.height |= 0;
        d.x |= 0;
        d.y |= 0;
        d.width |= 0;
        d.height |= 0;
        var l = t = null;
        if (W.useSectionCache == 1 && b != null) {
          if (W.sectionCache == null) {
            W.sectionCache = new xa();
          }
          l = b + "_" + c.x + "_" + c.y + "_" + c.width + "_" + c.height + "_";
          t = W.sectionCache.h[l];
        }
        if (t == null) {
          t = new N(c.width | 0, c.height | 0, true, 16777215);
          W._staticRect2.x = c.x;
          W._staticRect2.y = c.y;
          W._staticRect2.width = c.width;
          W._staticRect2.height = c.height;
          t.copyPixels(e, W._staticRect2, W._staticPointZero);
          if (W.useSectionCache == 1 && l != null) {
            W.sectionCache.h[l] = t;
          }
          W.bitmapsCreated++;
        }
        if (d.width > 0 && d.height > 0) {
          W._staticRect2.x = d.x;
          W._staticRect2.y = d.y;
          W._staticRect2.width = d.width;
          W._staticRect2.height = d.height;
          W.bitmapFillRect(a, W._staticRect2, t, f, k);
        }
      };
      W.bitmapFillRect = function (a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        var f = new N(b.width | 0, b.height | 0, true, 0);
        W._staticMatrix.identity();
        W._staticRect.x = 0;
        W._staticRect.y = 0;
        W._staticRect.width = c.width;
        W._staticRect.height = c.height;
        if ((d & 16) == 0) {
          W._staticMatrix.scale(b.width / c.width, 1);
          W._staticRect.width = b.width;
        }
        if ((d & 1) == 0) {
          W._staticMatrix.scale(1, b.height / c.height);
          W._staticRect.height = b.height;
        }
        if (c.width == b.width && c.height == b.height) {
          W._staticPoint.x = 0;
          W._staticPoint.y = 0;
          f.copyPixels(c, c.rect, W._staticPoint);
        } else if (e) {
          f.draw(c, W._staticMatrix, null, null, null, true);
        } else {
          f.draw(c, W._staticMatrix, null, null, null, false);
        }
        if (d != 0) {
          if ((d & 16) == 16) {
            W._staticPoint.x = 0;
            W._staticPoint.y = 0;
            while (W._staticPoint.x < b.width) {
              W._staticPoint.x += W._staticRect.width;
              f.copyPixels(f, W._staticRect, W._staticPoint);
            }
          }
          if ((d & 1) == 1) {
            W._staticPoint.x = 0;
            W._staticPoint.y = 0;
            W._staticRect.width = f.width;
            while (W._staticPoint.y < b.height) {
              W._staticPoint.y += W._staticRect.height;
              f.copyPixels(f, W._staticRect, W._staticPoint);
            }
          }
        }
        W._staticPoint.x = b.x;
        W._staticPoint.y = b.y;
        a.copyPixels(f, f.rect, W._staticPoint);
        ca.dispose(f);
      };
      W.__super__ = Bc;
      W.prototype = q(Bc.prototype, {
        destroy: function () {
          this.noLongerUsingCachedID(this.paintScale9_id);
          Bc.prototype.destroy.call(this);
        },
        resize: function (a, b) {
          if ((a | 0) < 1) {
            a = 1;
          }
          if ((b | 0) < 1) {
            b = 1;
          }
          var c = this.get_width();
          var d = this.get_height();
          var e = D.applyResize(this.resize_ratio, this.resize_ratio_axis, a, b);
          a = e.x;
          b = e.y;
          var f = e.x | 0;
          var k = e.y | 0;
          if (this._slice9 == null || this._slice9.length != 4) {
            if (this._slice9 != null) {
              g.log.advanced("Invalid 9slice array, expected a length of 4", Aa.WARNING, true);
            }
            this._slice9 = [4, 4, 7, 7];
          }
          e = this._asset_id + "_" + this._slice9.join(",") + "_" + f + "x" + k + "_" + this._tile + "_" + y.string(this._smooth);
          if (g.bitmap._cache.h[e] != null) {
            this.loadGraphic(e, false, f, k);
          } else {
            f = new N(a | 0, b | 0);
            W._staticFlxRect.x = 0;
            W._staticFlxRect.y = 0;
            W._staticFlxRect.width = a;
            W._staticFlxRect.height = b;
            a = this.paintScale9_id;
            if (W.makePaintScale9Id(this._asset_id, this._slice9, W._staticFlxRect) != a) {
              this.paintScale9_id = W.paintScale9(f, this._asset_id, this._slice9, W._staticFlxRect, this._tile, this._smooth, this._raw_pixels);
              W.cacheCounter.h[this.paintScale9_id].useCount++;
              this.noLongerUsingCachedID(a);
            }
            this.loadGraphic(f, false, f.width, f.height, false, e);
          }
          c = this.get_width() - c;
          d = this.get_height() - d;
          if (this.resize_point != null) {
            d *= this.resize_point.y;
            this.set_x(this.x - c * this.resize_point.x);
            this.set_y(this.y - d);
          }
        },
        noLongerUsingCachedID: function (a) {
          if (Object.prototype.hasOwnProperty.call(W.cacheCounter.h, a)) {
            var b = W.cacheCounter.h[a];
            b.useCount--;
            if (b.useCount <= 0) {
              this.purgeSections(a);
            }
          }
        },
        purgeSections: function (a) {
          var b = W.cacheCounter.h[a];
          if (b != null) {
            for (var c = 0, d = b.subKeys; c < d.length;) {
              var e = d[c];
              ++c;
              var f = W.sectionCache;
              if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                delete f.h[e];
              }
            }
            b.subKeys = null;
            f = W.cacheCounter;
            if (Object.prototype.hasOwnProperty.call(f.h, a)) {
              delete f.h[a];
            }
          }
        },
        __class__: W
      });
      function Lg(a, b, c, d, e, f, k, t, l, J) {
        if (J == null) {
          J = false;
        }
        if (l == null) {
          l = 100;
        }
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = "";
        }
        if (e == null) {
          e = 10;
        }
        if (d == null) {
          d = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.numDivisions = this._maxPercent = 100;
        this.killOnEmpty = false;
        this.fixedPosition = true;
        G.call(this, a, b);
        if (c == null) {
          c = Ad.LEFT_TO_RIGHT;
        }
        this.barWidth = d;
        this.barHeight = e;
        this._filledBarPoint = new ob();
        this._filledBarRect = new ba();
        if (g.renderBlit) {
          this._zeroOffset = new ob();
          this._emptyBarRect = new ba();
          this.makeGraphic(d, e, 0, true);
        } else {
          a = Ia._pool.get();
          var h = e = d = b = 0;
          if (h == null) {
            h = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.x = b;
          a.y = d;
          a.width = e;
          a.height = h;
          a._inPool = false;
          this._filledFlxRect = a;
        }
        if (f != null) {
          this.parent = f;
          this.parentVariable = k;
        }
        this.set_fillDirection(c);
        this.createFilledBar(-16756480, -16714752, J);
        this.setRange(t, l);
      }
      h["flixel.ui.FlxBar"] = Lg;
      Lg.__name__ = "flixel.ui.FlxBar";
      Lg.__super__ = G;
      Lg.prototype = q(G.prototype, {
        destroy: function () {
          this.positionOffset = ca.put(this.positionOffset);
          if (g.renderTile) {
            this.set_frontFrames(null);
            this._filledFlxRect = ca.put(this._filledFlxRect);
          } else {
            this._zeroOffset = this._emptyBarRect = null;
            this._emptyBar = ca.dispose(this._emptyBar);
            this._filledBar = ca.dispose(this._filledBar);
          }
          this.filledCallback = this.emptyCallback = this.parent = this._filledBarPoint = this._filledBarRect = null;
          G.prototype.destroy.call(this);
        },
        trackParent: function (a, b) {
          this.fixedPosition = false;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.positionOffset = b;
          if (Object.prototype.hasOwnProperty.call(this.parent, "scrollFactor")) {
            this.scrollFactor.set_x(this.parent.scrollFactor.x);
            this.scrollFactor.set_y(this.parent.scrollFactor.y);
          }
        },
        setParent: function (a, b, c, d, e) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          this.parent = a;
          this.parentVariable = b;
          if (c) {
            this.trackParent(d, e);
          }
          this.updateValueFromParent();
        },
        setRange: function (a, b) {
          if (b <= a) {
            throw I.thrown("FlxBar: max cannot be less than or equal to min");
          }
          this.min = a;
          this.max = b;
          this.range = b - a;
          this.pct = this.range / this._maxPercent;
          this.pxPerPercent = this._fillHorizontal ? this.barWidth / this._maxPercent : this.barHeight / this._maxPercent;
          var c = this.get_value();
          if (isNaN(c)) {
            this.set_value(a);
          } else {
            this.set_value(Math.max(a, Math.min(this.get_value(), b)));
          }
        },
        createFilledBar: function (a, b, c, d) {
          if (d == null) {
            d = -1;
          }
          if (c == null) {
            c = false;
          }
          this.createColoredEmptyBar(a, c, d);
          this.createColoredFilledBar(b, c, d);
          return this;
        },
        createColoredEmptyBar: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = false;
          }
          if (g.renderTile) {
            var d = "empty: " + this.barWidth + "x" + this.barHeight + ":" + ("0x" + v.hex(a >> 24 & 255, 2) + v.hex(a >> 16 & 255, 2) + v.hex(a >> 8 & 255, 2) + v.hex(a & 255, 2));
            if (b) {
              d += ",border: " + ("0x" + v.hex(c >> 24 & 255, 2) + v.hex(c >> 16 & 255, 2) + v.hex(c >> 8 & 255, 2) + v.hex(c & 255, 2));
            }
            if (g.bitmap._cache.h[d] == null) {
              if (b) {
                b = new N(this.barWidth, this.barHeight, true, c);
                b.fillRect(new ba(1, 1, this.barWidth - 2, this.barHeight - 2), a);
              } else {
                b = new N(this.barWidth, this.barHeight, true, a);
              }
              g.bitmap.add(b, false, d);
            }
            this.set_frames(g.bitmap._cache.h[d].get_imageFrame());
          } else {
            if (b) {
              this._emptyBar = new N(this.barWidth, this.barHeight, true, c);
              this._emptyBar.fillRect(new ba(1, 1, this.barWidth - 2, this.barHeight - 2), a);
            } else {
              this._emptyBar = new N(this.barWidth, this.barHeight, true, a);
            }
            this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateEmptyBar();
          }
          return this;
        },
        createColoredFilledBar: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = false;
          }
          if (g.renderTile) {
            var d = "filled: " + this.barWidth + "x" + this.barHeight + ":" + ("0x" + v.hex(a >> 24 & 255, 2) + v.hex(a >> 16 & 255, 2) + v.hex(a >> 8 & 255, 2) + v.hex(a & 255, 2));
            if (b) {
              d += ",border: " + ("0x" + v.hex(c >> 24 & 255, 2) + v.hex(c >> 16 & 255, 2) + v.hex(c >> 8 & 255, 2) + v.hex(c & 255, 2));
            }
            if (g.bitmap._cache.h[d] == null) {
              if (b) {
                b = new N(this.barWidth, this.barHeight, true, c);
                b.fillRect(new ba(1, 1, this.barWidth - 2, this.barHeight - 2), a);
              } else {
                b = new N(this.barWidth, this.barHeight, true, a);
              }
              g.bitmap.add(b, false, d);
            }
            this.set_frontFrames(g.bitmap._cache.h[d].get_imageFrame());
          } else {
            if (b) {
              this._filledBar = new N(this.barWidth, this.barHeight, true, c);
              this._filledBar.fillRect(new ba(1, 1, this.barWidth - 2, this.barHeight - 2), a);
            } else {
              this._filledBar = new N(this.barWidth, this.barHeight, true, a);
            }
            this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateFilledBar();
          }
          return this;
        },
        createGradientBar: function (a, b, c, d, e, f) {
          if (f == null) {
            f = -1;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 180;
          }
          if (c == null) {
            c = 1;
          }
          this.createGradientEmptyBar(a, c, d, e, f);
          this.createGradientFilledBar(b, c, d, e, f);
          return this;
        },
        createGradientEmptyBar: function (a, b, c, d, e) {
          if (e == null) {
            e = -1;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 180;
          }
          if (b == null) {
            b = 1;
          }
          if (g.renderTile) {
            var f = "Gradient:" + this.barWidth + "x" + this.barHeight + ",colors:[";
            for (var k = 0; k < a.length;) {
              var t = a[k];
              ++k;
              f += "0x" + v.hex(t >> 24 & 255, 2) + v.hex(t >> 16 & 255, 2) + v.hex(t >> 8 & 255, 2) + v.hex(t & 255, 2) + ",";
            }
            f += "],chunkSize: " + b + ",rotation: " + c;
            if (d) {
              f += ",border: " + ("0x" + v.hex(e >> 24 & 255, 2) + v.hex(e >> 16 & 255, 2) + v.hex(e >> 8 & 255, 2) + v.hex(e & 255, 2));
            }
            if (g.bitmap._cache.h[f] == null) {
              if (d) {
                d = new N(this.barWidth, this.barHeight, true, e);
                pd.overlayGradientOnBitmapData(d, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
              } else {
                d = pd.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
              }
              g.bitmap.add(d, false, f);
            }
            this.set_frames(g.bitmap._cache.h[f].get_imageFrame());
          } else {
            if (d) {
              this._emptyBar = new N(this.barWidth, this.barHeight, true, e);
              pd.overlayGradientOnBitmapData(this._emptyBar, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
            } else {
              this._emptyBar = pd.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
            }
            this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateEmptyBar();
          }
          return this;
        },
        createGradientFilledBar: function (a, b, c, d, e) {
          if (e == null) {
            e = -1;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 180;
          }
          if (b == null) {
            b = 1;
          }
          if (g.renderTile) {
            var f = "Gradient:" + this.barWidth + "x" + this.barHeight + ",colors:[";
            for (var k = 0; k < a.length;) {
              var t = a[k];
              ++k;
              f += "0x" + v.hex(t >> 24 & 255, 2) + v.hex(t >> 16 & 255, 2) + v.hex(t >> 8 & 255, 2) + v.hex(t & 255, 2) + ",";
            }
            f += "],chunkSize: " + b + ",rotation: " + c;
            if (d) {
              f += ",border: " + ("0x" + v.hex(e >> 24 & 255, 2) + v.hex(e >> 16 & 255, 2) + v.hex(e >> 8 & 255, 2) + v.hex(e & 255, 2));
            }
            if (g.bitmap._cache.h[f] == null) {
              if (d) {
                d = new N(this.barWidth, this.barHeight, true, e);
                pd.overlayGradientOnBitmapData(d, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
              } else {
                d = pd.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
              }
              g.bitmap.add(d, false, f);
            }
            this.set_frontFrames(g.bitmap._cache.h[f].get_imageFrame());
          } else {
            if (d) {
              this._filledBar = new N(this.barWidth, this.barHeight, true, e);
              pd.overlayGradientOnBitmapData(this._filledBar, this.barWidth - 2, this.barHeight - 2, a, 1, 1, b, c);
            } else {
              this._filledBar = pd.createGradientBitmapData(this.barWidth, this.barHeight, a, b, c);
            }
            this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
            this.updateFilledBar();
          }
          return this;
        },
        createImageBar: function (a, b, c, d) {
          if (d == null) {
            d = -16711936;
          }
          if (c == null) {
            c = -16777216;
          }
          this.createImageEmptyBar(a, c);
          this.createImageFilledBar(b, d);
          return this;
        },
        createImageEmptyBar: function (a, b) {
          if (b == null) {
            b = -16777216;
          }
          if (a != null) {
            a = g.bitmap.add(a);
            if (g.renderTile) {
              this.set_frames(a.get_imageFrame());
            } else {
              this._emptyBar = a.bitmap.clone();
              this.barWidth = this._emptyBar.width;
              this.barHeight = this._emptyBar.height;
              this._emptyBarRect.setTo(0, 0, this.barWidth, this.barHeight);
              if (this.graphic == null || this.frame.sourceSize.x != this.barWidth || this.frame.sourceSize.y != this.barHeight) {
                this.makeGraphic(this.barWidth, this.barHeight, 0, true);
              }
              this.updateEmptyBar();
            }
          } else {
            this.createColoredEmptyBar(b);
          }
          return this;
        },
        createImageFilledBar: function (a, b) {
          if (b == null) {
            b = -16711936;
          }
          if (a != null) {
            a = g.bitmap.add(a);
            if (g.renderTile) {
              this.set_frontFrames(a.get_imageFrame());
            } else {
              this._filledBar = a.bitmap.clone();
              this._filledBarRect.setTo(0, 0, this.barWidth, this.barHeight);
              if (this.graphic == null || this.frame.sourceSize.x != this.barWidth || this.frame.sourceSize.y != this.barHeight) {
                this.makeGraphic(this.barWidth, this.barHeight, 0, true);
              }
              this.pxPerPercent = this._fillHorizontal ? this.barWidth / this._maxPercent : this.barHeight / this._maxPercent;
              this.updateFilledBar();
            }
          } else {
            this.createColoredFilledBar(b);
          }
          return this;
        },
        set_fillDirection: function (a) {
          this.fillDirection = a;
          switch (a._hx_index) {
            case 0:
            case 1:
            case 4:
            case 5:
              this._fillHorizontal = true;
              break;
            case 2:
            case 3:
            case 6:
            case 7:
              this._fillHorizontal = false;
          }
          return this.fillDirection;
        },
        updateValueFromParent: function () {
          this.set_value(ha.getProperty(this.parent, this.parentVariable));
        },
        updateBar: function () {
          this.updateEmptyBar();
          this.updateFilledBar();
        },
        updateEmptyBar: function () {
          if (g.renderBlit) {
            this.get_pixels().copyPixels(this._emptyBar, this._emptyBarRect, this._zeroOffset);
            this.dirty = true;
          }
        },
        updateFilledBar: function () {
          this._filledBarRect.width = this.barWidth;
          this._filledBarRect.height = this.barHeight;
          var a = (this.get_value() - this.min) / this.range;
          var b = a * this._maxPercent;
          var c = this._fillHorizontal ? this.barWidth : this.barHeight;
          var d = c / this.numDivisions;
          a = Math.round((a * c / d | 0) * d);
          if (this._fillHorizontal) {
            this._filledBarRect.width = a | 0;
          } else {
            this._filledBarRect.height = a | 0;
          }
          if (b > 0) {
            switch (this.fillDirection._hx_index) {
              case 1:
                this._filledBarRect.x = this.barWidth - this._filledBarRect.width;
                this._filledBarPoint.x = this.barWidth - this._filledBarRect.width;
                break;
              case 3:
                this._filledBarRect.y = this.barHeight - this._filledBarRect.height;
                this._filledBarPoint.y = this.barHeight - this._filledBarRect.height;
                break;
              case 4:
                this._filledBarRect.x = this.barWidth / 2 - this._filledBarRect.width / 2 | 0;
                this._filledBarPoint.x = this.barWidth / 2 - this._filledBarRect.width / 2 | 0;
                break;
              case 5:
                this._filledBarRect.width = c - a | 0;
                this._filledBarPoint.x = (this.barWidth - this._filledBarRect.width) / 2 | 0;
                break;
              case 6:
                this._filledBarRect.y = this.barHeight / 2 - this._filledBarRect.height / 2 | 0;
                this._filledBarPoint.y = this.barHeight / 2 - this._filledBarRect.height / 2 | 0;
                break;
              case 7:
                this._filledBarRect.height = c - a | 0;
                this._filledBarPoint.y = (this.barHeight - this._filledBarRect.height) / 2 | 0;
            }
            if (g.renderBlit) {
              this.get_pixels().copyPixels(this._filledBar, this._filledBarRect, this._filledBarPoint, null, null, true);
            } else if (this.get_frontFrames() != null) {
              c = this._filledFlxRect;
              a = this._filledBarRect;
              c.x = a.x;
              c.y = a.y;
              c.width = a.width;
              c.height = a.height;
              c.x = Math.round(c.x);
              c.y = Math.round(c.y);
              c.width = Math.round(c.width);
              c.height = Math.round(c.height);
              if ((b | 0) > 0) {
                this._frontFrame = this.get_frontFrames().get_frame().clipTo(this._filledFlxRect, this._frontFrame);
              }
            }
          }
          if (g.renderBlit) {
            this.dirty = true;
          }
        },
        update: function (a) {
          if (this.parent != null) {
            if (ha.getProperty(this.parent, this.parentVariable) != this.get_value()) {
              this.updateValueFromParent();
            }
            if (!this.fixedPosition) {
              this.set_x(this.parent.x + this.positionOffset.x);
              this.set_y(this.parent.y + this.positionOffset.y);
            }
          }
          G.prototype.update.call(this, a);
        },
        draw: function () {
          G.prototype.draw.call(this);
          if (g.renderTile && this.alpha != 0 && this.get_percent() > 0 && this._frontFrame.type != 2) {
            for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
              var c = b[a];
              ++a;
              if (c.visible && c.exists && this.isOnScreen(c)) {
                var d = this.flipX != this._frame.flipX;
                var e = this.flipY != this._frame.flipY;
                this._frontFrame.prepareMatrix(this._matrix, 0, this.animation._curAnim != null ? d != this.animation._curAnim.flipX : d, this.animation._curAnim != null ? e != this.animation._curAnim.flipY : e);
                this._matrix.translate(-this.origin.x, -this.origin.y);
                this._matrix.scale(this.scale.x, this.scale.y);
                if (this.bakedRotationAngle <= 0 && (this._angleChanged && (d = Math.PI / 180 * this.angle, this._sinAngle = Math.sin(d), this._cosAngle = Math.cos(d), this._angleChanged = false), this.angle != 0)) {
                  d = this._matrix;
                  e = this._cosAngle;
                  var f = this._sinAngle;
                  var k = d.a * e - d.b * f;
                  d.b = d.a * f + d.b * e;
                  d.a = k;
                  k = d.c * e - d.d * f;
                  d.d = d.c * f + d.d * e;
                  d.c = k;
                  k = d.tx * e - d.ty * f;
                  d.ty = d.tx * f + d.ty * e;
                  d.tx = k;
                }
                d = this.getScreenPosition(this._point, c);
                e = this.offset;
                f = e.x;
                k = e.y;
                if (k == null) {
                  k = 0;
                }
                if (f == null) {
                  f = 0;
                }
                d.set_x(d.x - f);
                d.set_y(d.y - k);
                d = e;
                if (d._weak) {
                  d.put();
                }
                d = this._point;
                e = this.origin.x;
                f = this.origin.y;
                if (f == null) {
                  f = 0;
                }
                if (e == null) {
                  e = 0;
                }
                d.set_x(d.x + e);
                d.set_y(d.y + f);
                this._matrix.translate(this._point.x, this._point.y);
                if (this.isPixelPerfectRender(c)) {
                  this._matrix.tx = Math.floor(this._matrix.tx);
                  this._matrix.ty = Math.floor(this._matrix.ty);
                }
                c.drawPixels(this._frontFrame, null, this._matrix, this.colorTransform, this.blend, this.antialiasing, this.shader);
              }
            }
          }
        },
        set_pixels: function (a) {
          if (g.renderTile) {
            return a;
          } else {
            return G.prototype.set_pixels.call(this, a);
          }
        },
        toString: function () {
          var a = this.min;
          var b = Xc._pool.get();
          b.label = "min";
          b.value = a;
          a = this.max;
          var c = Xc._pool.get();
          c.label = "max";
          c.value = a;
          a = this.range;
          var d = Xc._pool.get();
          d.label = "range";
          d.value = a;
          a = this.pct;
          var e = Xc._pool.get();
          e.label = "%";
          e.value = a;
          a = this.pxPerPercent;
          var f = Xc._pool.get();
          f.label = "px/%";
          f.value = a;
          a = this.get_value();
          var k = Xc._pool.get();
          k.label = "value";
          k.value = a;
          return Xb.getDebugString([b, c, d, e, f, k]);
        },
        get_percent: function () {
          if (this.get_value() > this.max) {
            return this._maxPercent;
          } else {
            return Math.floor((this.get_value() - this.min) / this.range * this._maxPercent);
          }
        },
        set_value: function (a) {
          this.value = Math.max(this.min, Math.min(a, this.max));
          if (this.get_value() == this.min && this.emptyCallback != null) {
            this.emptyCallback();
          }
          if (this.get_value() == this.max && this.filledCallback != null) {
            this.filledCallback();
          }
          if (this.get_value() == this.min && this.killOnEmpty) {
            this.kill();
          }
          this.updateBar();
          return a;
        },
        get_value: function () {
          return this.value;
        },
        set_numDivisions: function (a) {
          this.numDivisions = a > 0 ? a : 100;
          this.updateFilledBar();
          return a;
        },
        get_frontFrames: function () {
          if (g.renderTile) {
            return this.frontFrames;
          } else {
            return null;
          }
        },
        set_frontFrames: function (a) {
          if (g.renderTile) {
            if (a != null) {
              a.parent.incrementUseCount();
            }
            if (this.get_frontFrames() != null) {
              this.get_frontFrames().parent.decrementUseCount();
            }
            this.frontFrames = a;
            this._frontFrame = a != null ? a.get_frame().copyTo(this._frontFrame) : ca.destroy(this._frontFrame);
          } else {
            this.createImageFilledBar(a.get_frame().paint());
          }
          return a;
        },
        __class__: Lg,
        __properties__: q(G.prototype.__properties__, {
          set_fillDirection: "set_fillDirection",
          set_frontFrames: "set_frontFrames",
          get_frontFrames: "get_frontFrames",
          set_numDivisions: "set_numDivisions",
          set_value: "set_value",
          get_value: "get_value",
          get_percent: "get_percent"
        })
      });
      function Le() {}
      h["flixel.addons.ui.interfaces.IHasParams"] = Le;
      Le.__name__ = "flixel.addons.ui.interfaces.IHasParams";
      Le.__isInterface__ = true;
      Le.prototype = {
        __class__: Le,
        __properties__: {
          set_params: "set_params"
        }
      };
      function ei(a, b, c, d, e, f, k, t, l, g) {
        if (g == null) {
          g = false;
        }
        if (l == null) {
          l = 100;
        }
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = "";
        }
        if (e == null) {
          e = 10;
        }
        if (d == null) {
          d = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Lg.call(this, a, b, c, d, e, f, k, t, l, g);
      }
      h["flixel.addons.ui.FlxUIBar"] = ei;
      ei.__name__ = "flixel.addons.ui.FlxUIBar";
      ei.__interfaces__ = [Le, qd, ed];
      ei.__super__ = Lg;
      ei.prototype = q(Lg.prototype, {
        set_style: function (a) {
          this.style = a;
          this.resize(this.barWidth, this.barHeight);
          return this.style;
        },
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.barWidth = this.get_width() | 0;
          this.barHeight = this.get_height() | 0;
          if (g.renderBlit) {
            this.makeGraphic(this.barWidth, this.barHeight, 0, true);
          }
          a = this.style.borderColor != null;
          b = this.style.emptyColor == null ? -16777216 : this.style.emptyColor;
          var c = this.style.filledColor == null ? -65536 : this.style.filledColor;
          var d = this.style.borderColor == null ? -16777216 : this.style.borderColor;
          if (this.style.filledColor != null) {
            this.createFilledBar(b, c, a, d);
          }
          if (this.style.filledColors != null) {
            this.createGradientBar(this.style.emptyColors == null ? [-16777216] : this.style.emptyColors, this.style.filledColors == null ? [-65536] : this.style.filledColors, this.style.chunkSize == null ? 1 : this.style.chunkSize, this.style.emptyImgSrc == null ? 180 : this.style.gradRotation, a, d);
          }
          if (this.style.filledImgSrc != "") {
            this.createImageBar(this.style.emptyImgSrc, this.style.filledImgSrc, b, c);
          }
          this.setRange(this.min, this.max);
          this.set_value(this.get_value());
        },
        set_params: function (a) {
          return this.params = a;
        },
        __class__: ei,
        __properties__: q(Lg.prototype.__properties__, {
          set_params: "set_params",
          set_style: "set_style"
        })
      });
      function vh() {}
      h["flixel.input.IFlxInput"] = vh;
      vh.__name__ = "flixel.input.IFlxInput";
      vh.__isInterface__ = true;
      vh.prototype = {
        __class__: vh,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      };
      function fd(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.lastStatus = -1;
        this.maxInputMovement = Infinity;
        this.mouseButtons = [-1];
        this.allowSwiping = true;
        this.statusAnimations = ["normal", "highlight", "pressed", "disabled"];
        this.labelAlphas = [0.8, 1, 0.5, 0.3];
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var f = da.pool.get().set(d, e);
        f._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var k = da.pool.get().set(d, e);
        k._inPool = false;
        d = 0;
        e = 1;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var t = d;
        if (e == null) {
          e = 0;
        }
        if (t == null) {
          t = 0;
        }
        t = da.pool.get().set(t, e);
        t._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        e = da.pool.get().set(d, e);
        e._inPool = false;
        this.labelOffsets = [f, k, t, e];
        G.call(this, a, b);
        this.loadDefaultGraphic();
        this.onUp = new zf(c);
        this.onDown = new zf();
        this.onOver = new zf();
        this.onOut = new zf();
        this.set_status(0);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        ia.get_current().stage.addEventListener("mouseUp", n(this, this.onUpEventListener));
        this.input = new je(0);
      }
      h["flixel.ui.FlxTypedButton"] = fd;
      fd.__name__ = "flixel.ui.FlxTypedButton";
      fd.__interfaces__ = [vh];
      fd.__super__ = G;
      fd.prototype = q(G.prototype, {
        graphicLoaded: function () {
          G.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal", 0);
          this.setupAnimation("highlight", 1);
          this.setupAnimation("pressed", 2);
          this.setupAnimation("disabled", 3);
        },
        loadDefaultGraphic: function () {
          this.loadGraphic("flixel/images/ui/button.png", true, 80, 20);
        },
        setupAnimation: function (a, b) {
          b = Math.min(b, this.animation._sprite.get_numFrames() - 1) | 0;
          this.animation.add(a, [b]);
        },
        destroy: function () {
          this.set_label(ca.destroy(this.label));
          this._spriteLabel = null;
          this.onUp = ca.destroy(this.onUp);
          this.onDown = ca.destroy(this.onDown);
          this.onOver = ca.destroy(this.onOver);
          this.onOut = ca.destroy(this.onOut);
          this.labelOffsets = ca.putArray(this.labelOffsets);
          this.input = this.currentInput = this.labelAlphas = null;
          ia.get_current().stage.removeEventListener("mouseUp", n(this, this.onUpEventListener));
          G.prototype.destroy.call(this);
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.visible) {
            this.updateButton();
            if (this.lastStatus != this.status) {
              this.updateStatusAnimation();
              this.lastStatus = this.status;
            }
          }
          this.input.update();
        },
        updateStatusAnimation: function () {
          this.animation.play(this.statusAnimations[this.status]);
        },
        draw: function () {
          G.prototype.draw.call(this);
          if (this._spriteLabel != null && this._spriteLabel.visible) {
            this._spriteLabel.set_cameras(this._cameras);
            this._spriteLabel.draw();
          }
        },
        updateButton: function () {
          if (this.status != 3) {
            var a = this.checkMouseOverlap();
            a ||= this.checkTouchOverlap();
            if (this.currentInput != null && this.currentInput.get_justReleased() && a) {
              this.onUpHandler();
            }
            if (this.status != 0 && (!a || this.currentInput != null && this.currentInput.get_justReleased())) {
              this.onOutHandler();
            }
          }
        },
        checkMouseOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = this.mouseButtons; e < f.length;) {
              var k = f[e];
              ++e;
              k = df.getByID(k);
              if (k != null && this.checkInput(g.mouse, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkTouchOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = g.touches.list; e < f.length;) {
              var k = f[e];
              ++e;
              if (this.checkInput(k, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkInput: function (a, b, c, d) {
          if (this.maxInputMovement != Infinity) {
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            f = da.pool.get().set(e, f);
            f._inPool = false;
            f._weak = true;
            c = Ak.distanceTo(c, a.getScreenPosition(null, f)) > this.maxInputMovement;
          } else {
            c = false;
          }
          if (c && b == this.currentInput) {
            this.currentInput = null;
          } else if (this.overlapsPoint(a.getWorldPosition(d, this._point), true, d)) {
            this.updateStatus(b);
            return true;
          }
          return false;
        },
        updateStatus: function (a) {
          if (a.get_justPressed()) {
            this.currentInput = a;
            this.onDownHandler();
          } else if (this.status == 0) {
            if (this.allowSwiping && a.get_pressed()) {
              this.onDownHandler();
            } else {
              this.onOverHandler();
            }
          }
        },
        updateLabelPosition: function () {
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x((this.pixelPerfectPosition ? Math.floor(this.x) : this.x) + this.labelOffsets[this.status].x);
            this._spriteLabel.set_y((this.pixelPerfectPosition ? Math.floor(this.y) : this.y) + this.labelOffsets[this.status].y);
          }
        },
        updateLabelAlpha: function () {
          if (this._spriteLabel != null && this.labelAlphas.length > this.status) {
            this._spriteLabel.set_alpha(this.alpha * this.labelAlphas[this.status]);
          }
        },
        onUpEventListener: function (a) {
          if (this.visible && this.exists && this.active && this.status == 2) {
            this.onUpHandler();
          }
        },
        onUpHandler: function () {
          this.set_status(1);
          this.input.release();
          this.currentInput = null;
          var a = this.onUp;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onDownHandler: function () {
          this.set_status(2);
          this.input.press();
          var a = this.onDown;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onOverHandler: function () {
          if (g.mouse.enabled) {
            this.set_status(1);
            var a = this.onOver;
            if (a.callback != null) {
              a.callback();
            }
            if (a.sound != null) {
              a.sound.play(true);
            }
          } else {
            this.set_status(0);
          }
        },
        onOutHandler: function () {
          this.set_status(0);
          this.input.release();
          var a = this.onOut;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        set_label: function (a) {
          if (a != null) {
            a.scrollFactor.put();
            a.scrollFactor = this.scrollFactor;
          }
          this._spriteLabel = this.label = a;
          this.updateLabelPosition();
          return a;
        },
        set_status: function (a) {
          this.status = a;
          this.updateLabelAlpha();
          return this.status;
        },
        set_alpha: function (a) {
          G.prototype.set_alpha.call(this, a);
          this.updateLabelAlpha();
          return this.alpha;
        },
        set_x: function (a) {
          G.prototype.set_x.call(this, a);
          this.updateLabelPosition();
          return this.x;
        },
        set_y: function (a) {
          G.prototype.set_y.call(this, a);
          this.updateLabelPosition();
          return this.y;
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: fd,
        __properties__: q(G.prototype.__properties__, {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased",
          set_status: "set_status",
          set_label: "set_label"
        })
      });
      function mj() {}
      h["flixel.addons.ui.interfaces.ICursorPointable"] = mj;
      mj.__name__ = "flixel.addons.ui.interfaces.ICursorPointable";
      mj.__isInterface__ = true;
      function yf() {}
      h["flixel.addons.ui.interfaces.IFlxUIClickable"] = yf;
      yf.__name__ = "flixel.addons.ui.interfaces.IFlxUIClickable";
      yf.__isInterface__ = true;
      yf.prototype = {
        __class__: yf,
        __properties__: {
          set_skipButtonUpdate: "set_skipButtonUpdate"
        }
      };
      function Mg() {}
      h["flixel.addons.ui.interfaces.IFlxUIButton"] = Mg;
      Mg.__name__ = "flixel.addons.ui.interfaces.IFlxUIButton";
      Mg.__isInterface__ = true;
      Mg.__interfaces__ = [ub, Le, qd];
      Mg.prototype = {
        __class__: Mg,
        __properties__: {
          get_justMousedOut: "get_justMousedOut",
          get_mouseIsOut: "get_mouseIsOut",
          get_mouseIsOver: "get_mouseIsOver",
          get_justMousedOver: "get_justMousedOver",
          set_toggle_label: "set_toggle_label",
          set_toggled: "set_toggled"
        }
      };
      function Hc(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._centerLabelOffset = null;
        this._src_w = this._src_h = 0;
        this._no_graphic = false;
        this._assetsToCleanup = [];
        this._autoCleanup = true;
        this.skipButtonUpdate = this.autoResizeLabel = false;
        this.up_visible = this.over_visible = this.down_visible = this.up_toggle_visible = this.over_toggle_visible = this.down_toggle_visible = this.round_labels = true;
        this.up_color = this.over_color = this.down_color = this.up_toggle_color = this.over_toggle_color = this.down_toggle_color = null;
        this.broadcastToFlxUI = true;
        this.has_toggle = this.toggled = false;
        this.tile = 0;
        this.resize_point = null;
        this.resize_ratio_axis = 1;
        this.resize_ratio = -1;
        fd.call(this, a, b, c);
        a = b = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = da.pool.get().set(b, a);
        a._inPool = false;
        this._centerLabelOffset = a;
        this.statusAnimations[3] = "normal_toggled";
        this.statusAnimations[4] = "highlight_toggled";
        this.statusAnimations[5] = "pressed_toggled";
        a = [];
        a.push(1);
        a.push(1);
        a.push(1);
        this.labelAlphas = a;
        this.inputOver = new je(0);
      }
      h["flixel.addons.ui.FlxUITypedButton"] = Hc;
      Hc.__name__ = "flixel.addons.ui.FlxUITypedButton";
      Hc.__interfaces__ = [mj, Le, yf, qd, ed, Mg];
      Hc.__super__ = fd;
      Hc.prototype = q(fd.prototype, {
        set_toggled: function (a) {
          this.toggled = a;
          this.updateStatusAnimation();
          return this.toggled;
        },
        get_justMousedOver: function () {
          return this.inputOver.current == 2;
        },
        get_justMousedOut: function () {
          return this.inputOver.current == -1;
        },
        get_mouseIsOver: function () {
          var a = this.inputOver;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_mouseIsOut: function () {
          var a = this.inputOver;
          if (a.current != 0) {
            return a.current == -1;
          } else {
            return true;
          }
        },
        set_toggle_label: function (a) {
          if (this.label != null) {
            return this.toggle_label = a;
          } else {
            return null;
          }
        },
        set_visible: function (a) {
          if (this.visible && a == 0) {
            this.inputOver.release();
          }
          return fd.prototype.set_visible.call(this, a);
        },
        set_skipButtonUpdate: function (a) {
          return this.skipButtonUpdate = a;
        },
        set_params: function (a) {
          return this.params = a;
        },
        destroy: function () {
          this.resize_point = ca.put(this.resize_point);
          fd.prototype.destroy.call(this);
        },
        graphicLoaded: function () {
          fd.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal_toggled", 3);
          this.setupAnimation("highlight_toggled", 4);
          this.setupAnimation("pressed_toggled", 5);
          if (this._autoCleanup) {
            this.cleanup();
          }
        },
        copyStyle: function (a) {
          this.up_color = a.up_color;
          this.over_color = a.over_color;
          this.down_color = a.down_color;
          this.up_toggle_color = a.up_toggle_color;
          this.down_toggle_color = this.over_toggle_color = a.over_toggle_color;
          this.up_visible = a.up_visible;
          this.over_visible = a.over_visible;
          this.down_visible = a.down_visible;
          this.up_toggle_visible = a.up_toggle_visible;
          this.over_toggle_visible = a.over_toggle_visible;
          this.down_toggle_visible = a.down_toggle_visible;
          var b = a.getCenterLabelOffset();
          this.setCenterLabelOffset(b.x, b.y);
          for (var c = b = 0, d = a.labelOffsets; c < d.length;) {
            var e = d[c];
            ++c;
            this.labelOffsets[b].set_x(e.x);
            this.labelOffsets[b].set_y(e.y);
            ++b;
          }
          c = b = 0;
          for (d = a.labelAlphas; c < d.length;) {
            a = d[c];
            ++c;
            this.labelAlphas[b] = a;
            ++b;
          }
        },
        setAllLabelOffsets: function (a, b) {
          for (var c = 0, d = this.labelOffsets; c < d.length;) {
            var e = d[c];
            ++c;
            var f = a;
            var k = b;
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(k);
          }
        },
        update: function (a) {
          fd.prototype.update.call(this, a);
          if (this.status == 0) {
            a = this.inputOver;
            a = a.current == 1 || a.current == 2;
          } else {
            a = false;
          }
          if (a && this.input.current == -1 == 0) {
            this.inputOver.release();
          }
          this.inputOver.update();
          if (this.label != null) {
            a = this.fetchAndShowCorrectLabel();
            a.set_x(this.x + this._centerLabelOffset.x + this.labelOffsets[this.status].x);
            a.set_y(this.y + this._centerLabelOffset.y + this.labelOffsets[this.status].y);
            if (this.round_labels) {
              a.set_x(a.x + 0.5 | 0);
              a.set_y(a.y + 0.5 | 0);
            }
            a.scrollFactor = this.scrollFactor;
          }
        },
        updateStatusAnimation: function () {
          if (this.has_toggle && this.toggled) {
            this.animation.play(this.statusAnimations[this.status + 3]);
          } else {
            fd.prototype.updateStatusAnimation.call(this);
          }
        },
        draw: function () {
          fd.prototype.draw.call(this);
          if (this.has_toggle && this.toggled && this.toggle_label != null && this.toggle_label.visible == 1) {
            this.toggle_label._cameras = this._cameras;
            this.toggle_label.draw();
          }
        },
        resize: function (a, b) {
          this.doResize(a, b);
        },
        doResize: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          var d = this.get_width();
          var e = this.get_height();
          var f = 0;
          var k = 0;
          if (this.label != null) {
            f = this.get_width() - this._spriteLabel.get_width();
            k = this.get_height() - this._spriteLabel.get_height();
          }
          if (a <= 0) {
            a = 80;
          }
          if (b <= 0) {
            b = 20;
          }
          if (c) {
            if (this._slice9_assets != null) {
              this.loadGraphicSlice9(this._slice9_assets, a | 0, b | 0, this._slice9_arrays, this.tile, this.resize_ratio, this.has_toggle, this._src_w, this._src_h, this._frame_indeces);
            } else if (this._no_graphic) {
              c = this.has_toggle ? new N(a | 0, b * 6 | 0, true, 0) : new N(a | 0, b * 3 | 0, true, 0);
              this.loadGraphicsUpOverDown(c);
            } else {
              this.loadGraphicSlice9(null, a | 0, b | 0, null, this.tile);
            }
          }
          if (this.label != null && this.autoResizeLabel && wa.__implements(this.label, ed)) {
            this.label.resize(a - f, b - k);
          }
          this.autoCenterLabel();
          a = this.get_width() - d;
          e = this.get_height() - e;
          if (this.resize_point != null) {
            e *= this.resize_point.y;
            this.set_x(this.x - a * this.resize_point.x);
            this.set_y(this.y - e);
          }
        },
        getBmp: function (a) {
          return D.getBmp(a);
        },
        loadGraphicsUpOverDown: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          this._slice9_arrays = this._slice9_assets = null;
          this.resize_ratio = -1;
          if (b) {
            this.has_toggle = true;
          }
          b = null;
          if (a instanceof N) {
            b = a;
          } else if (typeof a == "string") {
            b = this.getBmp(a);
          }
          a = this.grabButtonFrame(b, 0, this.has_toggle, 0, 0, c);
          var d = this.grabButtonFrame(b, 1, this.has_toggle, 0, 0, c);
          var e = this.grabButtonFrame(b, 2, this.has_toggle, 0, 0, c);
          var f = c;
          if (c == null || c == "" || g.bitmap._cache.h[c] != null == 0) {
            f = this.assembleButtonFrames(a, d, e);
          }
          if (this.has_toggle) {
            f = this.assembleButtonFrames(a, d, e);
            a = this.grabButtonFrame(b, 3, true, 0, 0, c);
            d = this.grabButtonFrame(b, 4, true, 0, 0, c);
            e = this.grabButtonFrame(b, 5, true, 0, 0, c);
            b = this.assembleButtonFrames(a, d, e);
            d = this.combineToggleBitmaps(f, b);
            ca.dispose(f);
            ca.dispose(b);
            this.loadGraphic(d, true, a.width, a.height, false, c);
          } else {
            this.loadGraphic(f, true, a.width, a.height, false, c);
          }
        },
        loadGraphicSlice9: function (a, b, c, d, e, f, k, t, l, J) {
          if (l == null) {
            l = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = -1;
          }
          if (e == null) {
            e = 0;
          }
          if (c == null) {
            c = 20;
          }
          if (b == null) {
            b = 80;
          }
          if (t != 0) {
            this._src_w = t;
          }
          if (l != 0) {
            this._src_h = l;
          }
          this.tile = e;
          this.has_toggle = k;
          this.resize_ratio = f;
          this._slice9_assets = a;
          this._slice9_arrays = d;
          e = "";
          if (J == null) {
            J = this.has_toggle ? [0, 1, 2, 3, 4, 5] : [0, 1, 2];
          } else {
            f = 2;
            for (this.has_toggle && (f = 5); J.length < f + 1;) {
              J.push(J.length - 1);
            }
            for (var h = 0, m = J.length; h < m;) {
              var p = h++;
              if (J[p] > 5) {
                J[p] = 5;
              } else if (J[p] < 0) {
                J[p] = 0;
              }
            }
          }
          this._frame_indeces = J;
          if (b == 0) {
            b = 80;
          }
          if (c == 0) {
            c = 20;
          }
          c = D.applyResize(this.resize_ratio, this.resize_ratio_axis, b, c);
          b = c.x | 0;
          c = c.y | 0;
          if (a == null) {
            if (k) {
              a = ["flixel/flixel-ui/img/button_toggle.png"];
              d = [Xb.toIntArray("6,6,11,11")];
              k = this.getBmp(a[0]);
              this._src_w = k.width | 0;
              this._src_h = k.height / 6 | 0;
            } else {
              a = ["flixel/flixel-ui/img/button.png"];
              d = [Xb.toIntArray("6,6,11,11")];
              k = this.getBmp(a[0]);
              this._src_w = k.width | 0;
              this._src_h = k.height / 3 | 0;
            }
          }
          if (!this.has_toggle && a.length <= 3) {
            k = [null, null, null];
            f = [null, null, null];
          } else {
            this.has_toggle = true;
            k = [null, null, null, null, null, null];
            f = [null, null, null, null, null, null];
          }
          this._flashRect2.width = b;
          this._flashRect2.height = c;
          t = e += y.string(a) + "_slice9=" + y.string(d) + "_src=" + this._src_w + "x" + this._src_h;
          e += "_final=" + b + "x" + c + "_fi=" + y.string(this._frame_indeces);
          if (a.length == 1) {
            l = this.getBmp(a[0]);
            h = "_all";
            if (this._src_w == 0 || this._src_h == 0) {
              throw new Sb("Ambiguous situation! If you only provide one asset, you MUST provide src_w and src_h. Otherwise I can't tell if it's a stacked set of frames or a single frame.");
            }
            m = l.height > this._src_h;
            h += m ? "_multiframe" : "";
            e += h;
            t += h;
            if (g.bitmap._cache.h[e] != null) {
              this.loadGraphic(e, true, b, c);
              return;
            }
            if (m) {
              h = 0;
              for (m = k.length; h < m;) {
                p = h++;
                k[p] = this.grabButtonFrame(l, p, this.has_toggle, this._src_w, this._src_h, t);
              }
              if (d != null && d[0] != []) {
                h = 0;
                for (m = k.length; h < m;) {
                  p = h++;
                  f[p] = new W(0, 0, k[p], this._flashRect2, d[0], this.tile, false, a[0] + ":" + p, this.resize_ratio);
                  f[p].set_resize_point(this.resize_point);
                }
                h = 0;
                for (m = k.length; h < m;) {
                  p = h++;
                  k[p] = f[p].get_pixels();
                }
                b = k[0].width;
                c = k[0].height;
              }
            } else {
              k[0] = l;
            }
          } else {
            if (g.bitmap._cache.h[e] != null) {
              this.loadGraphic(e, true, b, c);
              return;
            }
            if (this.has_toggle) {
              while (a.length < 6) {
                a.push("");
              }
            } else {
              while (a.length < 3) {
                a.push("");
              }
            }
            if (a[0] != "") {
              if (d != null && d.length > 0 && d[0] != null && d[0].length > 0) {
                while (d.length < a.length) {
                  d.push(null);
                }
                f[0] = d[0] != null ? new W(0, 0, a[0], this._flashRect2, d[0], this.tile, false, "", this.resize_ratio) : new Bc(0, 0, a[0]);
                k[0] = f[0].get_pixels();
                h = 1;
                for (m = a.length; h < m;) {
                  p = h++;
                  if (a[p] != "") {
                    f[p] = d[p] != null ? new W(0, 0, a[p], this._flashRect2, d[p], this.tile, false, "", this.resize_ratio) : new Bc(0, 0, a[p]);
                    k[p] = f[p].get_pixels();
                  }
                }
              } else {
                h = 0;
                m = a.length;
                while (h < m) {
                  p = h++;
                  k[p] = this.getBmp(a[p]);
                }
              }
              b = k[0].width;
              c = k[0].height;
            } else {
              if (b == 0) {
                b = 80;
              }
              if (c == 0) {
                c = 20;
              }
              k[0] = new N(b, c * 3, true, 0);
              this._no_graphic = true;
            }
          }
          if (this.has_toggle) {
            a = this.assembleButtonFrames(k[J[0]], k[J[1]], k[J[2]]);
            J = this.assembleButtonFrames(k[J[3]], k[J[4]], k[J[5]]);
            d = this.combineToggleBitmaps(a, J);
            ca.dispose(a);
            ca.dispose(J);
            g.bitmap.add(d, true, e);
          } else {
            a = this.assembleButtonFrames(k[J[0]], k[J[1]], k[J[2]]);
            g.bitmap.add(a, true, e);
          }
          this.loadGraphic(e, true, b, c);
          h = 0;
          for (m = f.length; h < m;) {
            p = h++;
            if (f[p] != null) {
              f[p].destroy();
              f[p] = null;
            }
          }
          while (f.length > 0) {
            f.pop();
          }
          while (k.length > 0) {
            k.pop();
          }
        },
        autoCenterLabel: function () {
          if (this.label != null) {
            this.get_width();
            this._spriteLabel.get_width();
            if (this.label instanceof Wd) {
              var a = this.label;
              var b = (this.get_width() - a.get_fieldWidth()) / 2;
              a = (this.get_height() - a.get_height()) / 2;
            } else {
              b = (this.get_width() - this._spriteLabel.get_width()) / 2;
              a = (this.get_height() - this._spriteLabel.get_height()) / 2;
            }
            this._centerLabelOffset.set_x(b);
            this._centerLabelOffset.set_y(a);
          }
        },
        setCenterLabelOffset: function (a, b) {
          this._centerLabelOffset.set_x(a);
          this._centerLabelOffset.set_y(b);
        },
        getCenterLabelOffset: function () {
          var a = this._centerLabelOffset.x;
          var b = this._centerLabelOffset.y;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          return b;
        },
        forceStateHandler: function (a) {
          switch (a) {
            case "click_button":
              this.onUpHandler();
              break;
            case "down_button":
              this.onDownHandler();
              break;
            case "out_button":
              this.onOutHandler();
              break;
            case "over_button":
              this.onOverHandler();
          }
        },
        grabButtonFrame: function (a, b, c, d, e, f) {
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (e == 0) {
            e = c ? a.height / 6 | 0 : a.height / 3 | 0;
          }
          c = d;
          if (c == 0) {
            c = a.width;
          }
          this._flashRect.x = 0;
          this._flashRect.y = b * e;
          this._flashRect.width = c;
          this._flashRect.height = e;
          if (this._flashRect.y >= a.height && (a.height / e | 0) == 4) {
            if (b == 4) {
              this._flashRect.y = e * 3;
            } else if (b == 5) {
              this._flashRect.y = e * 2;
            }
          }
          b = f + "{x:" + this._flashRect.x + "y:" + this._flashRect.y + "w:" + this._flashRect.width + "h:" + this._flashRect.height + "}";
          if (b != null && g.bitmap._cache.h[b] != null) {
            return g.bitmap._cache.h[b].bitmap;
          }
          e = new N(c, e);
          e.copyPixels(a, this._flashRect, this._flashPointZero);
          if (f != null) {
            g.bitmap.add(e, true, b);
            this.addToCleanup(b);
          }
          return e;
        },
        combineToggleBitmaps: function (a, b) {
          var c = new N(a.width, a.height + b.height);
          c.copyPixels(a, a.rect, this._flashPointZero);
          this._flashPoint.x = 0;
          this._flashPoint.y = a.height;
          c.copyPixels(b, b.rect, this._flashPoint);
          return c;
        },
        assembleButtonFrames: function (a, b, c) {
          var d = b != null ? c != null ? new N(a.width, a.height * 3) : new N(a.width, a.height * 2) : new N(a.width, a.height);
          d.copyPixels(a, a.rect, this._flashPointZero);
          if (b != null) {
            this._flashPoint.x = 0;
            this._flashPoint.y = a.height;
            d.copyPixels(b, b.rect, this._flashPoint);
            if (c != null) {
              this._flashPoint.y = a.height * 2;
              d.copyPixels(c, c.rect, this._flashPoint);
            }
          }
          return d;
        },
        updateButton: function () {
          if (!this.skipButtonUpdate) {
            fd.prototype.updateButton.call(this);
          }
        },
        addToCleanup: function (a) {
          if (this._assetsToCleanup == null) {
            this._assetsToCleanup = [];
          }
          if (this._assetsToCleanup.indexOf(a) == -1) {
            this._assetsToCleanup.push(a);
          }
        },
        cleanup: function () {
          if (this._assetsToCleanup != null) {
            for (var a = 0, b = this._assetsToCleanup; a < b.length;) {
              var c = b[a];
              ++a;
              g.bitmap.removeByKey(c);
            }
            this._assetsToCleanup = null;
          }
        },
        fetchAndShowCorrectLabel: function () {
          if (this.has_toggle) {
            if (this.toggled && this.toggle_label != null) {
              this._spriteLabel.set_visible(false);
              this.toggle_label.set_visible(true);
              return this.toggle_label;
            }
            if (this.toggle_label != null) {
              this.toggle_label.set_visible(false);
            }
            this._spriteLabel.set_visible(true);
          }
          return this.label;
        },
        onUpHandler: function () {
          if (this.has_toggle) {
            this.set_toggled(!this.toggled);
          }
          fd.prototype.onUpHandler.call(this);
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.up_toggle_visible : this.up_visible);
            var b = this.toggled ? this.up_toggle_color : this.up_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ma.event("click_button", this, null, this.params);
          }
        },
        onDownHandler: function () {
          fd.prototype.onDownHandler.call(this);
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.down_toggle_visible : this.down_visible);
            var b = this.toggled ? this.down_toggle_color : this.down_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ma.event("down_button", this, null, this.params);
          }
        },
        onOverHandler: function () {
          fd.prototype.onOverHandler.call(this);
          this.inputOver.press();
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.over_toggle_visible : this.over_visible);
            var b = this.toggled ? this.over_toggle_color : this.over_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ma.event("over_button", this, null, this.params);
          }
        },
        onOutHandler: function () {
          fd.prototype.onOutHandler.call(this);
          this.inputOver.release();
          if (this.label != null) {
            var a = this.fetchAndShowCorrectLabel();
            a.set_visible(this.toggled ? this.up_toggle_visible : this.up_visible);
            var b = this.toggled ? this.up_toggle_color : this.up_color;
            if (b != null) {
              a.set_color(b);
            }
          }
          if (this.broadcastToFlxUI) {
            Ma.event("out_button", this, null, this.params);
          }
        },
        set_x: function (a) {
          fd.prototype.set_x.call(this, a);
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x(this.x + this._centerLabelOffset.x + this.labelOffsets[this.status].x);
            if (this.round_labels) {
              this._spriteLabel.set_x(this._spriteLabel.x + 0.5 | 0);
            }
            if (this.has_toggle && this.toggle_label != null) {
              this.toggle_label.set_x(this._spriteLabel.x);
            }
          }
          return a;
        },
        set_y: function (a) {
          fd.prototype.set_y.call(this, a);
          if (this.label != null) {
            this._spriteLabel.set_y(this.y + this._centerLabelOffset.y + this.labelOffsets[this.status].y);
            if (this.round_labels) {
              this._spriteLabel.set_y(this._spriteLabel.y + 0.5 | 0);
            }
            if (this.has_toggle && this.toggle_label != null) {
              this.toggle_label.set_y(this._spriteLabel.y);
            }
          }
          return a;
        },
        __class__: Hc,
        __properties__: q(fd.prototype.__properties__, {
          set_params: "set_params",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_toggle_label: "set_toggle_label",
          get_justMousedOut: "get_justMousedOut",
          get_mouseIsOut: "get_mouseIsOut",
          get_mouseIsOver: "get_mouseIsOver",
          get_justMousedOver: "get_justMousedOver",
          set_toggled: "set_toggled"
        })
      });
      function di() {}
      h["flixel.addons.ui.interfaces.ILabeled"] = di;
      di.__name__ = "flixel.addons.ui.interfaces.ILabeled";
      di.__isInterface__ = true;
      di.prototype = {
        __class__: di
      };
      function rd(a, b, c, d, e, f, k) {
        if (k == null) {
          k = -1;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = true;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.up_style = this.over_style = this.down_style = this.up_toggle_style = this.over_toggle_style = this.down_toggle_style = null;
        Hc.call(this, a, b, d);
        this.set_color(k);
        if (c != null) {
          this.set_label(new Wd(0, 0, 80, c, 8));
          this.label.setFormat(null, 8, 3355443, "center");
        }
        if (f) {
          this._no_graphic = true;
        }
        if (e) {
          this.resize(this.get_width(), this.get_height());
        } else if (this._no_graphic == 0) {
          this.doResize(this.get_width(), this.get_height(), false);
        } else {
          this.doResize(this.get_width(), this.get_height(), true);
        }
      }
      h["flixel.addons.ui.FlxUIButton"] = rd;
      rd.__name__ = "flixel.addons.ui.FlxUIButton";
      rd.__interfaces__ = [Mg, di];
      rd.__super__ = Hc;
      rd.prototype = q(Hc.prototype, {
        setLabelFormat: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = true;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 8;
          }
          if (this.label != null) {
            this.label.setFormat(a, b, c, d, e, f, k);
            return this.label;
          } else {
            return null;
          }
        },
        autoCenterLabel: function () {
          Hc.prototype.autoCenterLabel.call(this);
        },
        copyStyle: function (a) {
          Hc.prototype.copyStyle.call(this, a);
          if (a instanceof rd) {
            this.up_style = a.up_style;
            this.over_style = a.over_style;
            this.down_style = a.down_style;
            this.up_toggle_style = a.up_toggle_style;
            this.over_toggle_style = a.over_toggle_style;
            this.down_toggle_style = a.down_toggle_style;
            a = a.label;
            var b = a.textField.get_defaultTextFormat();
            if (a._font.indexOf(Md.FONT_DEFAULT) == -1) {
              md.copyFromFlxText(a).apply(null, this.label);
            } else {
              var c = Fn.fromOpenFL(b.align);
              this.label.setFormat(null, b.size | 0, b.color, c, a.borderStyle, a.borderColor, a.textField.get_embedFonts());
            }
          }
        },
        getLabel: function () {
          return this.label;
        },
        resize: function (a, b) {
          Hc.prototype.resize.call(this, a, b);
        },
        destroy: function () {
          this._noIconGraphicsBkup = ca.dispose(this._noIconGraphicsBkup);
          Hc.prototype.destroy.call(this);
        },
        loadDefaultGraphic: function () {},
        resetHelpers: function () {
          Hc.prototype.resetHelpers.call(this);
          if (this.label != null) {
            var a = this.label;
            var b = this.get_width() | 0;
            a.set_width(this.label.frameWidth = b);
            this.label.set_fieldWidth(this.label.get_width());
            this.label.set_size(this.label._defaultFormat.size | 0);
          }
        },
        onDownHandler: function () {
          Hc.prototype.onDownHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.down_toggle_style != null) {
              this.label.set_color(this.down_toggle_style.color);
              if (this.down_toggle_style.border != null) {
                this.label.set_borderStyle(this.down_toggle_style.border.style);
                this.label.set_borderColor(this.down_toggle_style.border.color);
                this.label.set_borderSize(this.down_toggle_style.border.size);
                this.label.set_borderQuality(this.down_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.down_style != null) {
              this.label.set_color(this.down_style.color);
              if (this.down_style.border != null) {
                this.label.set_borderStyle(this.down_style.border.style);
                this.label.set_borderColor(this.down_style.border.color);
                this.label.set_borderSize(this.down_style.border.size);
                this.label.set_borderQuality(this.down_style.border.quality);
              }
            }
          }
        },
        onOverHandler: function () {
          Hc.prototype.onOverHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.over_toggle_style != null) {
              this.label.set_color(this.over_toggle_style.color);
              if (this.over_toggle_style.border != null) {
                this.label.set_borderStyle(this.over_toggle_style.border.style);
                this.label.set_borderColor(this.over_toggle_style.border.color);
                this.label.set_borderSize(this.over_toggle_style.border.size);
                this.label.set_borderQuality(this.over_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.over_style != null) {
              this.label.set_color(this.over_style.color);
              if (this.over_style.border != null) {
                this.label.set_borderStyle(this.over_style.border.style);
                this.label.set_borderColor(this.over_style.border.color);
                this.label.set_borderSize(this.over_style.border.size);
                this.label.set_borderQuality(this.over_style.border.quality);
              }
            }
          }
        },
        onOutHandler: function () {
          Hc.prototype.onOutHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.up_toggle_style != null) {
              this.label.set_color(this.up_toggle_style.color);
              if (this.up_toggle_style.border != null) {
                this.label.set_borderStyle(this.up_toggle_style.border.style);
                this.label.set_borderColor(this.up_toggle_style.border.color);
                this.label.set_borderSize(this.up_toggle_style.border.size);
                this.label.set_borderQuality(this.up_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.up_style != null) {
              this.label.set_color(this.up_style.color);
              if (this.up_style.border != null) {
                this.label.set_borderStyle(this.up_style.border.style);
                this.label.set_borderColor(this.up_style.border.color);
                this.label.set_borderSize(this.up_style.border.size);
                this.label.set_borderQuality(this.up_style.border.quality);
              }
            }
          }
        },
        onUpHandler: function () {
          Hc.prototype.onUpHandler.call(this);
          if (this.label != null) {
            if (this.toggled && this.up_toggle_style != null) {
              this.label.set_color(this.up_toggle_style.color);
              if (this.up_toggle_style.border != null) {
                this.label.set_borderStyle(this.up_toggle_style.border.style);
                this.label.set_borderColor(this.up_toggle_style.border.color);
                this.label.set_borderSize(this.up_toggle_style.border.size);
                this.label.set_borderQuality(this.up_toggle_style.border.quality);
              }
            } else if (!this.toggled && this.up_style != null) {
              this.label.set_color(this.up_style.color);
              if (this.up_style.border != null) {
                this.label.set_borderStyle(this.up_style.border.style);
                this.label.set_borderColor(this.up_style.border.color);
                this.label.set_borderSize(this.up_style.border.size);
                this.label.set_borderQuality(this.up_style.border.quality);
              }
            }
          }
        },
        __class__: rd
      });
      function Bb(a, b, c, d, e, f, k, t) {
        if (f == null) {
          f = 100;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.skipButtonUpdate = false;
        this.box_space = 2;
        this.textX = this.textY = 0;
        this.checked = this.checkbox_dirty = false;
        this.max_width = -1;
        db.call(this);
        this.callback = t;
        this.set_params(k);
        if (c == null) {
          c = "flixel/flixel-ui/img/check_box.png";
        }
        if (c instanceof G) {
          this.box = c;
        } else {
          this.box = new G();
          this.box.loadGraphic(c, true);
        }
        this.button = new rd(0, 0, e, n(this, this._clickCheck));
        this.button.label.setFormat(null, 8, 16777215, "left", cb.OUTLINE);
        this.button.label.set_fieldWidth(f);
        this.button.up_color = 16777215;
        this.button.down_color = 16777215;
        this.button.over_color = 16777215;
        this.button.up_toggle_color = 16777215;
        this.button.down_toggle_color = 16777215;
        this.button.over_toggle_color = 16777215;
        this.button.loadGraphicSlice9(["", "", ""], this.box.get_width() + this.box_space + f | 0, this.box.get_height() | 0);
        this.max_width = this.box.get_width() + this.box_space + f | 0;
        this.button.onUp.callback = n(this, this._clickCheck);
        if (d == null) {
          d = "flixel/flixel-ui/img/check_mark.png";
        }
        if (d instanceof G) {
          this.mark = d;
        } else {
          this.mark = new G();
          this.mark.loadGraphic(d);
        }
        this.add(this.box);
        this.add(this.mark);
        this.add(this.button);
        this.anchorLabelX();
        this.anchorLabelY();
        this.set_checked(false);
        this.button.setAllLabelOffsets(0, 0);
        this.set_x(a);
        this.set_y(b);
        this.set_textX(0);
        this.set_textY(0);
      }
      h["flixel.addons.ui.FlxUICheckBox"] = Bb;
      Bb.__name__ = "flixel.addons.ui.FlxUICheckBox";
      Bb.__interfaces__ = [mj, Le, yf, di];
      Bb.__super__ = db;
      Bb.prototype = q(db.prototype, {
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.button.set_skipButtonUpdate(this.skipButtonUpdate);
          return this.skipButtonUpdate;
        },
        set_params: function (a) {
          this.params = a;
          if (this.params == null) {
            this.params = [];
          }
          this.params.push({
            name: "checked",
            value: false
          });
          return this.params;
        },
        set_color: function (a) {
          if (this.button != null) {
            this.button.label.set_color(a);
          }
          return db.prototype.set_color.call(this, a);
        },
        getLabel: function () {
          if (this.button == null) {
            return null;
          } else {
            return this.button.label;
          }
        },
        set_visible: function (a) {
          return this.visible = a;
        },
        set_textX: function (a) {
          this.textX = a;
          this.anchorLabelX();
          return this.textX;
        },
        set_textY: function (a) {
          this.textY = a;
          this.anchorLabelY();
          return this.textY;
        },
        anchorLabelX: function () {
          if (this.button != null) {
            this.button.label.offset.set_x(-(this.box.get_width() + this.box_space + this.textX));
          }
        },
        anchorLabelY: function () {
          if (this.button != null) {
            this.button.set_y(this.box.y + (this.box.get_height() - this.button.get_height()) / 2 + this.textY);
          }
        },
        destroy: function () {
          db.prototype.destroy.call(this);
          if (this.mark != null) {
            this.mark.destroy();
            this.mark = null;
          }
          if (this.box != null) {
            this.box.destroy();
            this.box = null;
          }
          if (this.button != null) {
            this.button.destroy();
            this.button = null;
          }
        },
        set_text: function (a) {
          this.button.label.set_text(a);
          this.checkbox_dirty = true;
          return a;
        },
        update: function (a) {
          db.prototype.update.call(this, a);
          if (this.checkbox_dirty && this.button.label != null) {
            if (this.button.label instanceof Wd) {
              this.button.label.drawFrame();
            }
            this.anchorLabelX();
            this.anchorLabelY();
            this.button.set_width(this.box.frameWidth + this.box_space + this.button.label.textField.get_textWidth());
            this.checkbox_dirty = false;
          }
        },
        set_checked: function (a) {
          this.mark.set_visible(a);
          return this.checked = a;
        },
        _clickCheck: function () {
          if (this.visible) {
            this.set_checked(!this.checked);
            if (this.callback != null) {
              this.callback();
            }
            if (this.broadcastToFlxUI) {
              Ma.event("click_check_box", this, this.checked, this.params);
            }
          }
        },
        __class__: Bb,
        __properties__: q(db.prototype.__properties__, {
          set_text: "set_text",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_textY: "set_textY",
          set_textX: "set_textX",
          set_params: "set_params",
          set_checked: "set_checked"
        })
      });
      function Xi(a, b, c, d) {
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 1;
        }
        this._clickTime = 0;
        this._clickPressed = false;
        this.inputMethod = this.lastMouseX = this.lastMouseY = 0;
        this.dispatchEvents = true;
        this.gamepadAutoConnect = Sk.FirstActive;
        this.listIndex = 0;
        this.location = -1;
        this.wrap = true;
        if (d == null) {
          d = g.height < 400 ? "flixel/flixel-ui/img/finger_small.png" : "flixel/flixel-ui/img/finger_big.png";
        }
        Bc.call(this, 0, 0, d);
        this.inputMethod = b;
        this._lists = [{
          x: 0,
          y: 0,
          width: 0,
          height: 0,
          widgets: []
        }];
        this._widgets = this._lists[0].widgets;
        this.anchor = new Ig(-2, 0, "left", "center", "right", "center");
        this.setDefaultKeys(c);
        this.callback = a;
        a = this.scrollFactor;
        c = b = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        if (g.mouse != null && g.mouse instanceof nj == 0) {
          this._newMouse = new nj(g.mouse.cursorContainer);
          g.set_mouse(this._newMouse);
        } else {
          this._newMouse = g.mouse;
        }
      }
      h["flixel.addons.ui.FlxUICursor"] = Xi;
      Xi.__name__ = "flixel.addons.ui.FlxUICursor";
      Xi.__super__ = Bc;
      Xi.prototype = q(Bc.prototype, {
        findVisibleLocation: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = true;
          }
          this.set_location(a);
          if (this.location != -1) {
            for (a = false; this._widgets[this.location] == null || this._widgets[this.location].visible == 0;) {
              if (b) {
                if (this.location == this._widgets.length - 1) {
                  if (c) {
                    if (a) {
                      this.set_location(-1);
                      break;
                    } else {
                      a = true;
                      this.set_location(0);
                    }
                  } else {
                    this.set_location(-1);
                    break;
                  }
                } else {
                  this.set_location(this.location + 1);
                }
              } else if (this.location == 0) {
                if (c) {
                  if (a) {
                    this.set_location(-1);
                    break;
                  } else {
                    a = true;
                    this.set_location(this._widgets.length - 1);
                  }
                } else {
                  this.set_location(-1);
                  break;
                }
              } else {
                this.set_location(this.location - 1);
              }
            }
          }
        },
        set_listIndex: function (a) {
          if (a >= this._lists.length) {
            a = this._lists.length - 1;
          } else if (a < 0) {
            a = 0;
          }
          this.listIndex = a;
          this.set_location(0);
          this._updateCursor();
          return this.listIndex;
        },
        set_visible: function (a) {
          return a = Bc.prototype.set_visible.call(this, a);
        },
        set_location: function (a) {
          if (a >= this._widgets.length) {
            a = this._widgets.length - 1;
          }
          this.location = a;
          this._updateCursor();
          return this.location;
        },
        set_gamepad: function (a) {
          this._gamepad = a;
          this.setDefaultKeys(this._defaultCode);
          for (var b = [this.keysUp, this.keysDown, this.keysLeft, this.keysRight, this.keysClick], c = 0; c < b.length;) {
            var d = b[c];
            ++c;
            if (d != null) {
              for (var e = 0; e < d.length;) {
                var f = d[e];
                ++e;
                if (f instanceof zd) {
                  f.gamepad = this._gamepad;
                }
              }
            }
          }
          return a;
        },
        get_gamepad: function () {
          return this._gamepad;
        },
        destroy: function () {
          Bc.prototype.destroy.call(this);
          if (g.mouse == this._newMouse) {
            this._newMouse = null;
          }
          this.keysUp = ca.destroyArray(this.keysUp);
          this.keysDown = ca.destroyArray(this.keysDown);
          this.keysLeft = ca.destroyArray(this.keysLeft);
          this.keysRight = ca.destroyArray(this.keysRight);
          this.keysClick = ca.destroyArray(this.keysClick);
          this.anchor = ca.destroy(this.anchor);
          for (var a = 0, b = this._lists; a < b.length;) {
            var c = b[a];
            ++a;
            D.clearArraySoft(c.widgets);
          }
          D.clearArraySoft(this._lists);
          this._widgets = null;
        },
        update: function (a) {
          if (this.get_gamepad() == null || !this.get_gamepad().connected) {
            var b = this.getGamepad(false);
            if (this.get_gamepad() != b) {
              this.set_gamepad(b);
            }
          }
          if (this.lastMouseX != g.mouse.x || this.lastMouseY != g.mouse.y) {
            b = this.visible;
            if (this.scrollFactor.x == 0 && this.scrollFactor.y == 0) {
              this.jumpToXY(g.mouse.screenX, g.mouse.screenY);
            } else {
              this.jumpToXY(g.mouse.x, g.mouse.y);
            }
            this.set_visible(b);
            this.lastMouseX = g.mouse.x;
            this.lastMouseY = g.mouse.y;
          }
          this._checkKeys();
          this._clickTime += a;
          Bc.prototype.update.call(this, a);
        },
        addWidgetsFromUI: function (a) {
          if (a.cursorLists != null) {
            var b = 0;
            for (a = a.cursorLists; b < a.length;) {
              var c = a[b];
              ++b;
              this.addWidgetList(c);
            }
            this._widgets = this._lists[0].widgets;
            this.set_location(0);
            this.set_listIndex(0);
          } else {
            b = 0;
            a = a.group.members;
            while (b < a.length) {
              c = a[b];
              ++b;
              if (wa.__implements(c, mj) || c instanceof db) {
                this.addWidget(c);
              }
            }
          }
        },
        jumpToXY: function (a, b) {
          var c = 0;
          var d = Infinity;
          var e = -1;
          var f = -1;
          if (this._lists != null) {
            for (var k = 0, t = this._lists; k < t.length;) {
              var l = t[k];
              ++k;
              for (var g = 0, h = l.widgets.length; g < h;) {
                var m = g++;
                var p = l.widgets[m];
                if (p.visible == 1 && a >= p.x && b >= p.y && a <= p.x + p.get_width() && b <= p.y + p.get_height()) {
                  var n = p.x + p.get_width() / 2 - a;
                  p = p.y + p.get_height() / 2 - b;
                  n = n * n + p * p;
                  if (n < d) {
                    d = n;
                    e = c;
                    f = m;
                  }
                }
              }
              ++c;
            }
            if (e != -1 && f != -1) {
              this.set_listIndex(e);
              this.set_location(f);
              return true;
            }
          } else {
            k = 0;
            for (t = this._widgets.length; k < t;) {
              m = k++;
              p = this._widgets[m];
              if (p.visible == 1 && a >= p.x && b >= p.y && a <= p.x + p.get_width() && b <= p.y + p.get_height()) {
                n = p.x + p.get_width() / 2 - a;
                p = p.y + p.get_height() / 2 - b;
                n = n * n + p * p;
                if (n < d) {
                  d = n;
                  f = m;
                }
              }
            }
            if (f != -1) {
              this.set_location(f);
              return true;
            }
          }
          return false;
        },
        addWidgetList: function (a) {
          for (var b = 0, c = this._lists; b < c.length;) {
            var d = c[b];
            ++b;
            if (ue.equals(d.widgets, a)) {
              return;
            }
          }
          d = c = Infinity;
          var e = -Infinity;
          var f = -Infinity;
          for (b = 0; b < a.length;) {
            var k = a[b];
            ++b;
            if (k.x < c) {
              c = k.x;
            }
            if (k.y < d) {
              d = k.y;
            }
            if (k.x + k.get_width() > e) {
              e = k.x;
            }
            if (k.y + k.get_height() > f) {
              f = k.y;
            }
          }
          if (this._lists.length == 1 && this._lists[0].widgets != null && this._lists[0].widgets.length == 0) {
            this._lists[0].widgets = [];
            this._lists[0].x = c | 0;
            this._lists[0].y = d | 0;
            this._lists[0].width = e - c | 0;
            this._lists[0].height = f - d | 0;
            b = this._lists[0];
          } else {
            this._lists.push({
              x: c | 0,
              y: d | 0,
              width: e - c | 0,
              height: f - d | 0,
              widgets: []
            });
            b = this._lists[this._lists.length - 1];
          }
          c = this._widgets;
          this._widgets = b.widgets;
          for (b = 0; b < a.length;) {
            d = a[b];
            ++b;
            this.addWidget(d);
          }
          this._widgets = c;
          this._lists.sort(n(this, this._sortXYWidgetList));
          b = 0;
          for (c = this._lists; b < c.length;) {
            a = c[b];
            ++b;
            a.widgets.sort(n(this, this._sortXYVisible));
          }
        },
        addWidget: function (a) {
          if (wa.__implements(a, mj)) {
            this._widgets.push(a);
          } else if (a instanceof db) {
            var b = 0;
            for (a = a.group.members; b < a.length;) {
              var c = a[b];
              ++b;
              if (wa.__implements(c, qd)) {
                this.addWidget(c);
              }
            }
          }
          this._widgets.sort(n(this, this._sortXYVisible));
        },
        setDefaultKeys: function (a) {
          this._defaultCode = a;
          this._clearKeys();
          this._newKeys();
          var b = 1;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new dd(9, null, [16]));
            this._addToKeys(this.keysLeft, new dd(9, [16]));
            this._addToKeys(this.keysClick, new dd(13));
          }
          b = 256;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new dd(39));
            this._addToKeys(this.keysLeft, new dd(37));
            this._addToKeys(this.keysDown, new dd(40));
            this._addToKeys(this.keysUp, new dd(38));
            this._addToKeys(this.keysClick, new dd(13));
          }
          b = 16;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new dd(68));
            this._addToKeys(this.keysLeft, new dd(65));
            this._addToKeys(this.keysDown, new dd(83));
            this._addToKeys(this.keysUp, new dd(87));
            this._addToKeys(this.keysClick, new dd(13));
          }
          b = 4096;
          if ((a & b) == b) {
            this._addToKeys(this.keysRight, new dd(102));
            this._addToKeys(this.keysLeft, new dd(100));
            this._addToKeys(this.keysDown, new dd(98));
            this._addToKeys(this.keysUp, new dd(104));
            this._addToKeys(this.keysClick, new dd(13));
          }
          if (this._gamepad == null || !this._gamepad.connected) {
            this._gamepad = this.getGamepad();
          }
          if (this._gamepad != null && this._gamepad.connected) {
            b = 65536;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new zd(this.get_gamepad(), 13));
              this._addToKeys(this.keysRight, new zd(this.get_gamepad(), 14));
              this._addToKeys(this.keysDown, new zd(this.get_gamepad(), 12));
              this._addToKeys(this.keysUp, new zd(this.get_gamepad(), 11));
              this._addToKeys(this.keysClick, new zd(this.get_gamepad(), 0));
            }
            b = 268435456;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new zd(this.get_gamepad(), 4));
              this._addToKeys(this.keysRight, new zd(this.get_gamepad(), 5));
              this._addToKeys(this.keysClick, new zd(this.get_gamepad(), 0));
            }
            b = 1048576;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new xf(this.get_gamepad(), {
                id: 19,
                axis: Ke.X,
                positive: false
              }));
              this._addToKeys(this.keysRight, new xf(this.get_gamepad(), {
                id: 19,
                axis: Ke.X,
                positive: true
              }));
              this._addToKeys(this.keysUp, new xf(this.get_gamepad(), {
                id: 19,
                axis: Ke.Y,
                positive: false
              }));
              this._addToKeys(this.keysDown, new xf(this.get_gamepad(), {
                id: 19,
                axis: Ke.Y,
                positive: true
              }));
              this._addToKeys(this.keysClick, new zd(this.get_gamepad(), 0));
            }
            b = 16777216;
            if ((a & b) == b) {
              this._addToKeys(this.keysLeft, new xf(this.get_gamepad(), {
                id: 20,
                axis: Ke.X,
                positive: false
              }));
              this._addToKeys(this.keysRight, new xf(this.get_gamepad(), {
                id: 20,
                axis: Ke.X,
                positive: true
              }));
              this._addToKeys(this.keysUp, new xf(this.get_gamepad(), {
                id: 20,
                axis: Ke.Y,
                positive: false
              }));
              this._addToKeys(this.keysDown, new xf(this.get_gamepad(), {
                id: 20,
                axis: Ke.Y,
                positive: true
              }));
              this._addToKeys(this.keysClick, new zd(this.get_gamepad(), 0));
            }
          }
        },
        getGamepad: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.gamepadAutoConnect;
          switch (b._hx_index) {
            case 0:
              var c = null;
              break;
            case 1:
              c = g.gamepads.getFirstActiveGamepad();
              break;
            case 2:
              c = g.gamepads.lastActive;
              break;
            case 3:
              c = b.i;
              c = g.gamepads._activeGamepads[c];
          }
          if (c != null && c.connected || !a) {
            return c;
          }
          b = 0;
          for (a = g.gamepads.get_numActiveGamepads(); b < a;) {
            c = b++;
            c = g.gamepads._activeGamepads[c];
            if (c != null && c.connected) {
              return c;
            }
          }
          return null;
        },
        _sortXYWidgetList: function (a, b) {
          if (a.y < b.y) {
            return -1;
          } else if (a.y > b.y) {
            return 1;
          } else if (a.x < b.x) {
            return -1;
          } else if (a.x > b.x) {
            return 1;
          } else {
            return 0;
          }
        },
        _sortXYVisible: function (a, b) {
          if (a.visible && !b.visible) {
            return -1;
          } else if (b.visible && !a.visible) {
            return 1;
          } else if (a.y < b.y) {
            return -1;
          } else if (a.y > b.y) {
            return 1;
          } else if (a.x < b.x) {
            return -1;
          } else if (a.x > b.x) {
            return 1;
          } else {
            return 0;
          }
        },
        _addToKeys: function (a, b) {
          var c = false;
          for (var d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            if (b.equals(e)) {
              c = true;
              break;
            }
          }
          if (!c) {
            a.push(b);
          }
        },
        _clearKeys: function () {
          D.clearArray(this.keysUp);
          this.keysUp = null;
          D.clearArray(this.keysDown);
          this.keysDown = null;
          D.clearArray(this.keysLeft);
          this.keysLeft = null;
          D.clearArray(this.keysRight);
          this.keysRight = null;
          D.clearArray(this.keysClick);
          this.keysClick = null;
        },
        _newKeys: function () {
          this.keysUp = [];
          this.keysDown = [];
          this.keysLeft = [];
          this.keysRight = [];
          this.keysClick = [];
        },
        _checkKeys: function () {
          var a = this.visible == 0;
          var b = this.location;
          for (var c = 0, d = this.keysUp; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(0, -1);
              break;
            }
          }
          c = 0;
          for (d = this.keysDown; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(0, 1);
              break;
            }
          }
          c = 0;
          for (d = this.keysLeft; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(-1, 0);
              break;
            }
          }
          c = 0;
          for (d = this.keysRight; c < d.length;) {
            e = d[c];
            ++c;
            if (e.justPressed()) {
              this._doInput(1, 0);
              break;
            }
          }
          if (a && this.visible && b != -1) {
            this.set_location(b);
          }
          if (this._clickKeysJustPressed()) {
            if (this.ignoreNextInput) {
              this.ignoreNextInput = false;
            } else {
              this._clickPressed = true;
              this._clickTime = 0;
              this._doPress();
            }
          }
          if (this._clickKeysPressed()) {
            this._clickPressed = true;
            this._doMouseMove();
          } else if (this._clickTime > 0 && this._clickPressed) {
            this._doRelease();
            this._clickPressed = false;
          }
        },
        _clickKeysJustPressed: function () {
          for (var a = 0, b = this.keysClick; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.justPressed()) {
              return true;
            }
          }
          return false;
        },
        _clickKeysPressed: function () {
          for (var a = 0, b = this.keysClick; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.pressed()) {
              return true;
            }
          }
          return false;
        },
        _getWidgetPoint: function (a) {
          if (a == null) {
            a = g.camera;
          }
          var b = this._widgets[this.location];
          if (b == null) {
            return null;
          }
          var c = null;
          if (b instanceof hc) {
            c = b.getScreenPosition();
          }
          c.set_x(c.x * a.totalScaleX);
          c.set_y(c.y * a.totalScaleY);
          if (c == null) {
            var d = b.x;
            c = b.y;
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            c = da.pool.get().set(d, c);
            c._inPool = false;
          }
          c.set_x(c.x + b.get_width() * a.totalScaleX * 0.5);
          c.set_y(c.y + b.get_height() * a.totalScaleY * 0.5);
          return c;
        },
        _doMouseMove: function (a) {
          var b = false;
          if (a == null) {
            a = this._getWidgetPoint();
            if (a == null) {
              return;
            }
            b = true;
          }
          if (this.dispatchEvents) {
            var c = g.mouse;
            c._globalScreenX = a.x / g.scaleMode.scale.x | 0;
            c._globalScreenY = a.y / g.scaleMode.scale.y | 0;
            c.updatePositions();
            if (this._newMouse != null) {
              this._newMouse.updateGlobalScreenPosition = false;
            }
            var d = ia.get_current().stage;
            var e = a.x;
            var f = a.y;
            var k = ia.get_current().stage;
            c = g.keys.pressed;
            var t = c.keyManager.checkStatusUnsafe(17, c.status);
            c = g.keys.pressed;
            var l = c.keyManager.checkStatusUnsafe(18, c.status);
            c = g.keys.pressed;
            d.dispatchEvent(new Wb("mouseMove", true, false, e, f, k, t, l, c.keyManager.checkStatusUnsafe(16, c.status)));
          }
          if (b) {
            a.put();
          }
        },
        _doPress: function (a) {
          var b = this._widgets[this.location];
          if (b != null) {
            var c = false;
            if (a == null) {
              a = this._getWidgetPoint();
              if (a == null) {
                return;
              }
              c = true;
            }
            if (this.dispatchEvents) {
              var d = a.x * g.camera.zoom;
              var e = a.y * g.camera.zoom;
              var f = g.keys.pressed;
              var k = f.keyManager.checkStatusUnsafe(17, f.status);
              f = g.keys.pressed;
              var t = f.keyManager.checkStatusUnsafe(18, f.status);
              f = g.keys.pressed;
              f = f.keyManager.checkStatusUnsafe(16, f.status);
              ia.get_current().stage.dispatchEvent(new Wb("mouseDown", true, false, d, e, ia.get_current().stage, k, t, f));
            }
            if (this.callback != null) {
              this.callback("cursor_down", b);
            }
            if (c) {
              a.put();
            }
          }
        },
        _doRelease: function (a) {
          var b = this._widgets[this.location];
          if (b != null) {
            var c = false;
            if (a == null) {
              a = this._getWidgetPoint();
              if (a == null) {
                return;
              }
              c = true;
            }
            if (this.dispatchEvents) {
              var d = a.x * g.camera.zoom;
              var e = a.y * g.camera.zoom;
              var f = g.keys.pressed;
              var k = f.keyManager.checkStatusUnsafe(17, f.status);
              f = g.keys.pressed;
              var t = f.keyManager.checkStatusUnsafe(18, f.status);
              f = g.keys.pressed;
              f = f.keyManager.checkStatusUnsafe(16, f.status);
              ia.get_current().stage.dispatchEvent(new Wb("mouseUp", true, false, d, e, ia.get_current().stage, k, t, f));
              if (this._clickPressed) {
                ia.get_current().stage.dispatchEvent(new Wb("click", true, false, d, e, ia.get_current().stage, k, t, f));
              }
            }
            if (this.callback != null) {
              this.callback("cursor_click", b);
            }
            if (c) {
              a.put();
            }
            if (this._newMouse != null) {
              this._newMouse.updateGlobalScreenPosition = true;
              f = this._newMouse;
              a = g.game.get_mouseX() | 0;
              b = g.game.get_mouseY() | 0;
              f._globalScreenX = a / g.scaleMode.scale.x | 0;
              f._globalScreenY = b / g.scaleMode.scale.y | 0;
              f.updatePositions();
            }
          }
        },
        _findNextY: function (a, b, c, d) {
          var e = 0;
          var f = 0;
          var k = 0;
          if (c != null) {
            e = c[b].x | 0;
            f = c[b].y | 0;
            k = c.length;
          } else if (d != null) {
            e = d[b].x;
            f = d[b].y;
            k = d.length;
          }
          var t = 0;
          var l = 0;
          var g = Infinity;
          var h = Infinity;
          var m = g;
          var p = h;
          var n = -1;
          for (var q = 0; q < k;) {
            var r = q++;
            if (r != b) {
              if (c != null) {
                t = c[r].x | 0;
                l = c[r].y | 0;
              } else if (d != null) {
                t = d[r].x;
                l = d[r].y;
              }
              h = l - f;
              if ((h < 0 ? -1 : 1) == (a < 0 ? -1 : 1) && h != 0) {
                h = Math.abs(h);
                if (h < p) {
                  p = h;
                  m = Math.abs(e - t);
                  n = r;
                } else if (h == p) {
                  g = Math.abs(e - t);
                  if (g < m) {
                    m = g;
                    n = r;
                  }
                }
              }
            }
          }
          return n;
        },
        _wrapX: function (a, b, c) {
          if (b + a < 0) {
            b = b + a + c;
          } else if (b + a >= c) {
            b = b + a - c;
          }
          return b;
        },
        _wrapY: function (a, b, c, d) {
          var e;
          var f;
          var k = -1;
          var t = Infinity;
          var l = f = 0;
          var g = 0;
          var h = 0;
          if (c != null) {
            l = c.length;
            g = c[b].x | 0;
            h = c[b].y | 0;
          }
          if (d != null) {
            l = d.length;
            g = d[b].x;
            h = d[b].y;
          }
          for (var m = 0; m < l;) {
            var p = m++;
            if (p != this.location) {
              var n = e = 0;
              if (c != null) {
                e = c[p].x | 0;
                n = c[p].y | 0;
              } else if (d != null) {
                e = d[p].x | 0;
                n = d[p].y | 0;
              }
              n -= h;
              if ((n < 0 ? -1 : 1) == (a < 0 ? -1 : 1) == 0 && n != 0) {
                n = Math.abs(n);
                if (n > f) {
                  f = n;
                  t = Math.abs(g - e);
                  k = p;
                } else if (n == f) {
                  e = Math.abs(g - e);
                  if (e < t) {
                    t = e;
                    k = p;
                  }
                }
              }
            }
          }
          if (k != -1) {
            b = k;
          }
          return b;
        },
        _doInput: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (this.ignoreNextInput) {
            this.ignoreNextInput = false;
          } else {
            var d = null;
            if (b == 0) {
              if (this.location + a >= 0 && this.location + a < this._widgets.length) {
                this.set_location(this.location + a);
              } else if (this.wrap) {
                if (this._lists.length == 1) {
                  this.set_location(this._wrapX(a, this.location, this._widgets.length));
                } else {
                  if (this.listIndex + a >= 0 && this.listIndex + a < this._lists.length) {
                    this.set_listIndex(this.listIndex + a);
                  } else {
                    this.set_listIndex(this._wrapX(a, this.listIndex, this._lists.length));
                  }
                  if (a == -1) {
                    this.set_location(this._widgets.length - 1);
                  }
                }
              }
              d = this._widgets[this.location];
            } else {
              var e = this._findNextY(b, this.location, this._widgets, null);
              if (e != -1) {
                this.set_location(e);
                d = this._widgets[this.location];
              } else if (this.wrap) {
                if (this._lists.length == 1) {
                  this.set_location(this._wrapY(b, this.location, this._widgets, null));
                } else {
                  d = this._findNextY(b, this.listIndex, null, this._lists);
                  if (d != -1) {
                    this.set_listIndex(d);
                  } else {
                    this.set_listIndex(this._wrapY(b, this.listIndex, null, this._lists));
                  }
                  if (b == -1) {
                    this.set_location(this._widgets.length - 1);
                  }
                }
                d = this._widgets[this.location];
              }
            }
            if (d != null && this._widgets != null && d.visible == 0 && c < this._widgets.length) {
              this._doInput(a, b, c + 1);
            } else if (this.callback != null) {
              this.callback("cursor_jump", d);
            }
          }
        },
        _updateCursor: function () {
          this._widgets = this._lists[this.listIndex].widgets;
          if (this.location < 0 || this._lists == null || this._widgets == null) {
            this.set_visible(false);
          } else {
            this.set_visible(this.set_active(true));
            var a = this._widgets[this.location];
            var b = false;
            var c = false;
            if (a != null) {
              var d = a;
              if (d instanceof G) {
                var e = d;
                if (e != null && e.scrollFactor != null) {
                  var f = this.scrollFactor;
                  var k = e.scrollFactor.x;
                  e = e.scrollFactor.y;
                  if (e == null) {
                    e = 0;
                  }
                  if (k == null) {
                    k = 0;
                  }
                  f.set_x(k);
                  f.set_y(e);
                }
              }
              if (a instanceof Bb) {
                d = d.box;
              }
              this.anchor.anchorThing(this, d);
              if (this.x < 0) {
                this._flipAnchor("left", d);
                b = true;
              } else if (this.x > g.width + this.get_width()) {
                this._flipAnchor("right", d);
                b = true;
              }
              if (this.y < 0) {
                this._flipAnchor("top", d);
                c = true;
              } else if (this.y > g.height + this.get_height()) {
                this._flipAnchor("bottom", d);
                c = true;
              }
              this.set_flipX(b);
              this.set_flipY(c);
            }
          }
        },
        _flipAnchor: function (a, b) {
          var c = null;
          switch (a) {
            case "bottom":
              if (this.anchor.y.side == "bottom") {
                c = this._bottomAnchor = this.anchor.getFlipped(true, false, this._bottomAnchor);
              }
              break;
            case "left":
              if (this.anchor.x.side == "left") {
                c = this._leftAnchor = this.anchor.getFlipped(true, false, this._leftAnchor);
              }
              break;
            case "right":
              if (this.anchor.x.side == "right") {
                this._topAnchor = this.anchor.getFlipped(true, false, this._rightAnchor);
                c = this._rightAnchor;
              }
              break;
            case "top":
              if (this.anchor.y.side == "top") {
                c = this._topAnchor = this.anchor.getFlipped(true, false, this._topAnchor);
              }
          }
          if (c != null) {
            c.anchorThing(this, b);
          }
        },
        __class__: Xi,
        __properties__: q(Bc.prototype.__properties__, {
          set_gamepad: "set_gamepad",
          get_gamepad: "get_gamepad",
          set_listIndex: "set_listIndex",
          set_location: "set_location"
        })
      });
      var Sk = w["flixel.addons.ui.GamepadAutoConnectPreference"] = {
        __ename__: "flixel.addons.ui.GamepadAutoConnectPreference",
        __constructs__: null,
        Never: {
          _hx_name: "Never",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        FirstActive: {
          _hx_name: "FirstActive",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        LastActive: {
          _hx_name: "LastActive",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
          toString: p
        },
        GamepadID: (r = function (a) {
          return {
            _hx_index: 3,
            i: a,
            __enum__: "flixel.addons.ui.GamepadAutoConnectPreference",
            toString: p
          };
        }, r._hx_name = "GamepadID", r.__params__ = ["i"], r)
      };
      Sk.__constructs__ = [Sk.Never, Sk.FirstActive, Sk.LastActive, Sk.GamepadID];
      function vc(a, b, c, d, e, f, k, t) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.dropDirection = oj.Down;
        this.list = [];
        this.canScroll = true;
        this.currentScroll = 0;
        db.call(this, a, b);
        this.callback = d;
        this.header = e;
        this.dropPanel = f;
        if (this.header == null) {
          this.header = new kj();
        }
        if (this.dropPanel == null) {
          a = new ba(0, 0, this.header.background.get_width(), this.header.background.get_height());
          this.dropPanel = new W(0, 0, "flixel/flixel-ui/img/box.png", a, [1, 1, 14, 14]);
        }
        if (c != null) {
          a = 0;
          for (k = c.length; a < k;) {
            b = a++;
            d = c[b];
            this.list.push(this.makeListButton(b, d.label, d.name));
          }
          this.selectSomething(c[0].name, c[0].label);
        } else if (k != null) {
          for (a = 0; a < k.length;) {
            c = k[a];
            ++a;
            this.list.push(c);
            c.resize(this.header.background.get_width(), this.header.background.get_height());
            c.set_x(1);
          }
        }
        this.updateButtonPositions();
        this.dropPanel.resize(this.header.background.get_width(), this.getPanelHeight());
        this.dropPanel.set_visible(false);
        this.add(this.dropPanel);
        a = 0;
        for (k = this.list; a < k.length;) {
          c = k[a];
          ++a;
          this.add(c);
          c.set_visible(false);
        }
        this.header.button.onUp.callback = n(this, this.onDropdown);
        this.add(this.header);
      }
      h["flixel.addons.ui.FlxUIDropDownMenu"] = vc;
      vc.__name__ = "flixel.addons.ui.FlxUIDropDownMenu";
      vc.__interfaces__ = [Le, yf, qd];
      vc.makeStrIdLabelArray = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = [];
        for (var d = 0, e = a.length; d < e;) {
          var f = d++;
          var k = a[f];
          if (b) {
            k = f == null ? "null" : "" + f;
          }
          c[f] = new Rk(k, a[f]);
        }
        return c;
      };
      vc.__super__ = db;
      vc.prototype = q(db.prototype, {
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.header.button.set_skipButtonUpdate(a);
          return a;
        },
        get_selectedId: function () {
          return this._selectedId;
        },
        set_selectedId: function (a) {
          if (this._selectedId == a) {
            return a;
          }
          var b = 0;
          for (var c = 0, d = this.list; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && e.name == a) {
              b = this.list[b];
              this._selectedId = a;
              if (b.label != null) {
                this._selectedLabel = b.label.text;
                this.header.text.set_text(b.label.text);
              } else {
                this._selectedLabel = "";
                this.header.text.set_text("");
              }
              break;
            }
            ++b;
          }
          return a;
        },
        get_selectedLabel: function () {
          return this._selectedLabel;
        },
        set_selectedLabel: function (a) {
          if (this._selectedLabel == a) {
            return a;
          }
          var b = 0;
          for (var c = 0, d = this.list; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.label.text == a) {
              this._selectedId = this.list[b].name;
              this._selectedLabel = a;
              this.header.text.set_text(a);
              break;
            }
            ++b;
          }
          return a;
        },
        set_params: function (a) {
          return this.params = a;
        },
        updateButtonPositions: function () {
          var a = this.header.background.get_height();
          this.dropPanel.set_y(this.header.background.y);
          if (this.dropsUp()) {
            var b = this.dropPanel;
            b.set_y(b.y - this.getPanelHeight());
          } else {
            b = this.dropPanel;
            b.set_y(b.y + a);
          }
          b = this.dropPanel.y;
          for (var c = 0, d = this.currentScroll; c < d;) {
            var e = c++;
            e = this.list[e];
            if (e != null) {
              e.set_y(g.height + 250);
            }
          }
          c = this.currentScroll;
          for (d = this.list.length; c < d;) {
            e = c++;
            e = this.list[e];
            if (e != null) {
              e.set_y(b);
              b += a;
            }
          }
        },
        set_visible: function (a) {
          var b = this.dropPanel.visible;
          var c = [];
          for (var d = 0, e = this.list.length; d < e;) {
            var f = d++;
            if (this.list[f] != null) {
              c.push(this.list[f].visible);
            } else {
              c.push(false);
            }
          }
          db.prototype.set_visible.call(this, a);
          this.dropPanel.set_visible(b);
          d = 0;
          for (e = this.list.length; d < e;) {
            f = d++;
            if (this.list[f] != null) {
              this.list[f].set_visible(c[f]);
            }
          }
          return a;
        },
        dropsUp: function () {
          if (this.dropDirection != oj.Up) {
            if (this.dropDirection == oj.Automatic) {
              return this.exceedsHeight();
            } else {
              return false;
            }
          } else {
            return true;
          }
        },
        exceedsHeight: function () {
          return this.y + this.getPanelHeight() + this.header.background.get_height() > g.height;
        },
        getPanelHeight: function () {
          return this.list.length * this.header.background.get_height();
        },
        setData: function (a) {
          var b = 0;
          if (a != null) {
            for (var c = 0; c < a.length;) {
              var d = a[c];
              ++c;
              var e = false;
              if (this.list != null) {
                if (b <= this.list.length - 1) {
                  var f = this.list[b];
                  if (f != null) {
                    f.label.set_text(d.label);
                    this.list[b].name = d.name;
                    e = true;
                  }
                }
              } else {
                this.list = [];
              }
              if (!e) {
                d = this.makeListButton(b, d.label, d.name);
                this.list.push(d);
                this.add(d);
                d.set_visible(false);
              }
              ++b;
            }
            if (this.list.length > a.length) {
              c = a.length;
              b = this.list.length;
              while (c < b) {
                c++;
                d = this.list.pop();
                d.set_visible(false);
                d.set_active(false);
                this.remove(d, true);
                d.destroy();
              }
            }
            this.selectSomething(a[0].name, a[0].label);
          }
          this.dropPanel.resize(this.header.background.get_width(), this.getPanelHeight());
          this.updateButtonPositions();
        },
        selectSomething: function (a, b) {
          this.header.text.set_text(b);
          this.set_selectedId(a);
          this.set_selectedLabel(b);
        },
        makeListButton: function (a, b, c) {
          b = new rd(0, 0, b);
          b.broadcastToFlxUI = false;
          var d = this;
          b.onUp.callback = function () {
            d.onClickItem(a);
          };
          b.name = c;
          b.loadGraphicSlice9(["flixel/flixel-ui/img/invis.png", "flixel/flixel-ui/img/hilight.png", "flixel/flixel-ui/img/hilight.png"], this.header.background.get_width() | 0, this.header.background.get_height() | 0, [[1, 1, 3, 3], [1, 1, 3, 3], [1, 1, 3, 3]], 0);
          c = b.labelOffsets;
          c[2].set_y(c[2].y - 1);
          b.up_color = -16777216;
          b.over_color = -1;
          b.down_color = -1;
          b.resize(this.header.background.get_width() - 2, this.header.background.get_height() - 1);
          b.label.set_alignment("left");
          b.autoCenterLabel();
          b.set_x(1);
          c = 0;
          for (var e = b.labelOffsets; c < e.length;) {
            var f = e[c];
            ++c;
            f.set_x(f.x + 2);
          }
          return b;
        },
        update: function (a) {
          db.prototype.update.call(this, a);
          if (this.dropPanel.visible) {
            if (this.list.length > 1 && this.canScroll) {
              a = this.currentScroll;
              if (g.mouse.wheel <= 0) {
                var b = g.keys.justPressed;
                b = b.keyManager.checkStatusUnsafe(38, b.status);
              } else {
                b = true;
              }
              if (b) {
                --this.currentScroll;
                if (this.currentScroll < 0) {
                  this.currentScroll = 0;
                }
              } else {
                if (g.mouse.wheel >= 0) {
                  b = g.keys.justPressed;
                  b = b.keyManager.checkStatusUnsafe(40, b.status);
                } else {
                  b = true;
                }
                if (b) {
                  this.currentScroll++;
                  if (this.currentScroll >= this.list.length) {
                    this.currentScroll = this.list.length - 1;
                  }
                }
              }
              if (a != this.currentScroll) {
                this.updateButtonPositions();
              }
            }
            if (g.mouse._leftButton.current == 2 && !g.mouse.overlaps(this, this.get_camera())) {
              this.showList(false);
            }
          }
        },
        destroy: function () {
          db.prototype.destroy.call(this);
          this.dropPanel = ca.destroy(this.dropPanel);
          this.list = ca.destroyArray(this.list);
          this.callback = null;
        },
        showList: function (a) {
          for (var b = 0, c = this.list; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_visible(a);
            d.set_active(a);
          }
          this.dropPanel.set_visible(a);
          if (this.currentScroll != 0) {
            this.currentScroll = 0;
            this.updateButtonPositions();
          }
          Ma.forceFocus(a, this);
        },
        onDropdown: function () {
          if (this.dropPanel.visible) {
            this.showList(false);
          } else {
            this.showList(true);
          }
        },
        onClickItem: function (a) {
          a = this.list[a];
          this.selectSomething(a.name, a.label.text);
          this.showList(false);
          if (this.callback != null) {
            this.callback(a.name);
          }
          if (this.broadcastToFlxUI) {
            Ma.event("click_dropdown", this, a.name, this.params);
          }
        },
        __class__: vc,
        __properties__: q(db.prototype.__properties__, {
          set_params: "set_params",
          set_selectedLabel: "set_selectedLabel",
          get_selectedLabel: "get_selectedLabel",
          set_selectedId: "set_selectedId",
          get_selectedId: "get_selectedId",
          set_skipButtonUpdate: "set_skipButtonUpdate"
        })
      });
      function kj(a, b, c, d) {
        if (a == null) {
          a = 120;
        }
        db.call(this);
        this.background = b;
        this.text = c;
        this.button = d;
        if (this.background == null) {
          this.background = new W(0, 0, "flixel/flixel-ui/img/box.png", new ba(0, 0, a, 20), [1, 1, 14, 14]);
        }
        if (this.button == null) {
          this.button = new cf(0, 0, new G(0, 0, "flixel/flixel-ui/img/dropdown_mark.png"));
          this.button.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], 80, 20, [Xb.toIntArray("6,6,11,11")], 0, -1, false, 18, 18);
        }
        this.button.resize(this.background.get_height(), this.background.get_height());
        this.button.set_x(this.background.x + this.background.get_width() - this.button.get_width());
        this.button.set_width(a);
        b = this.button;
        b.offset.set_x(b.offset.x - (a - this.button.frameWidth));
        this.button.set_x(this.offset.x);
        b = this.button.label;
        b.offset.set_x(b.offset.x + this.button.offset.x);
        if (this.text == null) {
          this.text = new Wd(0, 0, this.background.get_width() | 0);
        }
        this.text.setPosition(2, 4);
        this.text.set_color(-16777216);
        this.add(this.background);
        this.add(this.button);
        this.add(this.text);
      }
      h["flixel.addons.ui.FlxUIDropDownHeader"] = kj;
      kj.__name__ = "flixel.addons.ui.FlxUIDropDownHeader";
      kj.__super__ = db;
      kj.prototype = q(db.prototype, {
        destroy: function () {
          db.prototype.destroy.call(this);
          this.background = ca.destroy(this.background);
          this.text = ca.destroy(this.text);
          this.button = ca.destroy(this.button);
        },
        __class__: kj
      });
      var oj = w["flixel.addons.ui.FlxUIDropDownMenuDropDirection"] = {
        __ename__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
        __constructs__: null,
        Automatic: {
          _hx_name: "Automatic",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        },
        Down: {
          _hx_name: "Down",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        },
        Up: {
          _hx_name: "Up",
          _hx_index: 2,
          __enum__: "flixel.addons.ui.FlxUIDropDownMenuDropDirection",
          toString: p
        }
      };
      oj.__constructs__ = [oj.Automatic, oj.Down, oj.Up];
      function pb(a, b, c, d, e, f, k, t) {
        this.broadcastToFlxUI = true;
        bf.call(this, a, b, c, d, e, f, k, t);
      }
      h["flixel.addons.ui.FlxUIInputText"] = pb;
      pb.__name__ = "flixel.addons.ui.FlxUIInputText";
      pb.__interfaces__ = [Le, qd, ed];
      pb.__super__ = bf;
      pb.prototype = q(bf.prototype, {
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
          this.calcFrame();
        },
        onChange: function (a) {
          bf.prototype.onChange.call(this, a);
          if (this.broadcastToFlxUI) {
            switch (a) {
              case "backspace":
              case "delete":
                Ma.event("delete_input_text", this, this.text, this.params);
                Ma.event("change_input_text", this, this.text, this.params);
                break;
              case "copy":
                Ma.event("copy_input_text", this, this.text, this.params);
                break;
              case "cut":
                Ma.event("cut_input_text", this, this.text, this.params);
                Ma.event("change_input_text", this, this.text, this.params);
                break;
              case "enter":
                Ma.event("enter_input_text", this, this.text, this.params);
                break;
              case "input":
                Ma.event("input_input_text", this, this.text, this.params);
                Ma.event("change_input_text", this, this.text, this.params);
                break;
              case "paste":
                Ma.event("paste_input_text", this, this.text, this.params);
                Ma.event("change_input_text", this, this.text, this.params);
            }
          }
        },
        __class__: pb
      });
      function lj(a, b, c, d, e, f) {
        this.thickness = 1;
        this.length = 10;
        this.axis = Kg.HORIZONTAL;
        Bc.call(this, a, b);
        this.makeGraphic(2, 2, -1);
        this.set_color(f);
        this.set_axis(c);
        this.set_length(d);
        this.set_thickness(e);
      }
      h["flixel.addons.ui.FlxUILine"] = lj;
      lj.__name__ = "flixel.addons.ui.FlxUILine";
      lj.__interfaces__ = [ed];
      lj.__super__ = Bc;
      lj.prototype = q(Bc.prototype, {
        set_axis: function (a) {
          this.axis = a;
          this.refresh();
          return a;
        },
        set_length: function (a) {
          this.length = a;
          this.refresh();
          return a;
        },
        set_thickness: function (a) {
          this.thickness = a;
          this.refresh();
          return a;
        },
        refresh: function () {
          if (this.axis == Kg.HORIZONTAL) {
            var a = this.scale;
            var b = this.length * 0.5;
            var c = this.thickness * 0.5;
          } else {
            a = this.scale;
            b = this.thickness * 0.5;
            c = this.length * 0.5;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.updateHitbox();
        },
        resize: function (a, b) {
          if (this.axis == Kg.HORIZONTAL) {
            this.set_length(a);
            this.set_thickness(b);
          } else {
            this.set_length(b);
            this.set_thickness(a);
          }
        },
        __class__: lj,
        __properties__: q(Bc.prototype.__properties__, {
          set_thickness: "set_thickness",
          set_length: "set_length",
          set_axis: "set_axis"
        })
      });
      var Kg = w["flixel.addons.ui.LineAxis"] = {
        __ename__: "flixel.addons.ui.LineAxis",
        __constructs__: null,
        HORIZONTAL: {
          _hx_name: "HORIZONTAL",
          _hx_index: 0,
          __enum__: "flixel.addons.ui.LineAxis",
          toString: p
        },
        VERTICAL: {
          _hx_name: "VERTICAL",
          _hx_index: 1,
          __enum__: "flixel.addons.ui.LineAxis",
          toString: p
        }
      };
      Kg.__constructs__ = [Kg.HORIZONTAL, Kg.VERTICAL];
      function Tk(a, b, c, d, e, f, k, t, l, g, h, m) {
        if (t == null) {
          t = 0;
        }
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = "<X> more...";
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._skipRefresh = false;
        this.scrollIndex = 0;
        this._skipRefresh = true;
        db.call(this, a, b);
        this.set_stacking(k);
        this.set_spacing(t);
        if (c != null) {
          for (var J = 0; J < c.length;) {
            a = c[J];
            ++J;
            this.add(a);
          }
        }
        this.prevButton = h;
        this.nextButton = m;
        this.prevButtonOffset = l;
        this.nextButtonOffset = g;
        this.set_moreString(f);
        if (this.prevButton == null) {
          J = this;
          c = new rd(0, 0, " ", function () {
            J.onClick(-1);
          });
          if (this.stacking == 0) {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_left.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(c.get_width() - c.label.get_width(), c.get_height() + 2);
            c.label.set_alignment("right");
          } else {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_up.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, 0);
            c.setCenterLabelOffset(c.get_width() + 2, c.get_height() - c.label.get_height());
            c.label.set_alignment("left");
          }
          this.prevButton = c;
        } else {
          if (this.prevButton instanceof rd) {
            c = this.prevButton;
            var p = this;
            c.onUp.callback = function () {
              p.onClick(-1);
            };
          }
          if (this.prevButton instanceof cf) {
            c = this.prevButton;
            var V = this;
            c.onUp.callback = function () {
              V.onClick(-1);
            };
          }
        }
        if (this.nextButton == null) {
          var n = this;
          c = new rd(0, 0, " ", function () {
            n.onClick(1);
          });
          if (this.stacking == 0) {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_right.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, c.get_height() + 2);
          } else {
            c.loadGraphicsUpOverDown("flixel/flixel-ui/img/button_arrow_down.png");
            c.label.set_width(c.label.set_fieldWidth(100));
            c.label.set_text(this.getMoreString(0));
            c.setAllLabelOffsets(0, 0);
            c.setCenterLabelOffset(c.get_width() + 2, 0);
          }
          c.label.set_alignment("left");
          this.nextButton = c;
        } else {
          if (this.nextButton instanceof rd) {
            c = this.nextButton;
            var q = this;
            c.onUp.callback = function () {
              q.onClick(1);
            };
          }
          if (this.nextButton instanceof cf) {
            c = this.nextButton;
            var r = this;
            c.onUp.callback = function () {
              r.onClick(1);
            };
          }
        }
        if (this.prevButtonOffset == null) {
          c = f = 0;
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          c = da.pool.get().set(f, c);
          c._inPool = false;
          this.prevButtonOffset = c;
        }
        if (this.nextButtonOffset == null) {
          c = f = 0;
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          c = da.pool.get().set(f, c);
          c._inPool = false;
          this.nextButtonOffset = c;
        }
        this._skipRefresh = false;
        this.setSize(d, e);
      }
      h["flixel.addons.ui.FlxUIList"] = Tk;
      Tk.__name__ = "flixel.addons.ui.FlxUIList";
      Tk.__super__ = db;
      Tk.prototype = q(db.prototype, {
        set_scrollIndex: function (a) {
          this.scrollIndex = a;
          this.refreshList();
          return a;
        },
        set_stacking: function (a) {
          this.stacking = a;
          this.refreshList();
          return a;
        },
        set_spacing: function (a) {
          this.spacing = a;
          this.refreshList();
          return a;
        },
        set_moreString: function (a) {
          this.moreString = a;
          this.refreshList();
          return this.moreString;
        },
        destroy: function () {
          this.prevButton = ca.destroy(this.prevButton);
          this.nextButton = ca.destroy(this.nextButton);
          this.prevButtonOffset = ca.put(this.prevButtonOffset);
          this.nextButtonOffset = ca.put(this.nextButtonOffset);
          db.prototype.destroy.call(this);
        },
        setSize: function (a, b) {
          var c = false;
          if (this._skipRefresh == 0) {
            c = this._skipRefresh = true;
          }
          this.set_width(a);
          this.set_height(b);
          if (c) {
            this._skipRefresh = false;
          }
          this.refreshList();
        },
        add: function (a) {
          db.prototype.add.call(this, a);
          this.refreshList();
          return a;
        },
        safeAdd: function (a) {
          return db.prototype.add.call(this, a);
        },
        getMoreString: function (a) {
          for (var b = this.moreString; b.indexOf("<X>") != -1;) {
            b = v.replace(b, "<X>", a == null ? "null" : "" + a);
          }
          return b;
        },
        set_visible: function (a) {
          db.prototype.set_visible.call(this, a);
          this.refreshList();
          return a;
        },
        onClick: function (a) {
          this.set_scrollIndex(this.scrollIndex + a);
          this.refreshList();
        },
        refreshList: function () {
          if (!this._skipRefresh) {
            this.autoBounds = false;
            if (this.group.members.indexOf(this.prevButton) != -1) {
              this.remove(this.prevButton, true);
            }
            if (this.group.members.indexOf(this.nextButton) != -1) {
              this.remove(this.nextButton, true);
            }
            var a = 0;
            var b = 0;
            var c = 0;
            if (this.stacking == 0) {
              this.prevButton.set_x(this.prevButtonOffset.x - this.prevButton.get_width() - 2);
              this.prevButton.set_y(this.prevButtonOffset.y);
              this.nextButton.set_x(this.nextButtonOffset.x + this.get_width() + 2);
              this.nextButton.set_y(this.nextButtonOffset.y);
            } else {
              this.prevButton.set_x(this.prevButtonOffset.x);
              this.prevButton.set_y(this.prevButtonOffset.y - this.prevButton.get_height() - 2);
              this.nextButton.set_x(this.nextButtonOffset.x);
              this.nextButton.set_y(this.nextButtonOffset.y + this.get_height() + 2);
            }
            this.prevButton.set_x(this.prevButton.x | 0);
            this.prevButton.set_y(this.prevButton.y | 0);
            this.nextButton.set_x(this.nextButton.x | 0);
            this.nextButton.set_y(this.nextButton.y | 0);
            var d = 0;
            for (var e = 0, f = this.group.members; e < f.length;) {
              var k = f[e];
              ++e;
              var t = false;
              if (c >= this.scrollIndex) {
                t = this.stacking == 1 ? b + k.get_height() <= this.get_height() || this.get_height() <= 0 : a + k.get_width() <= this.get_width() || this.get_width() <= 0;
              }
              if (t) {
                d = c;
                k.set_visible(k.set_active(true));
                k.set_x(this.x + a);
                k.set_y(this.y + b);
                if (this.stacking == 1) {
                  b += k.get_height() + this.spacing;
                } else {
                  a += k.get_width() + this.spacing;
                }
              } else {
                k.set_x(k.set_y(0));
                k.set_visible(k.set_active(false));
              }
              ++c;
            }
            this.amountPrevious = this.scrollIndex;
            this.amountNext = this.group.members.length - (d + 1);
            if (this.amountPrevious > 0) {
              this.safeAdd(this.prevButton);
              if (this.prevButton instanceof rd) {
                a = this.prevButton;
                a.label.set_text(this.getMoreString(this.amountPrevious));
              }
            }
            if (this.amountNext > 0) {
              this.safeAdd(this.nextButton);
              if (this.nextButton instanceof rd) {
                a = this.nextButton;
                a.label.set_text(this.getMoreString(this.amountNext));
              }
            }
          }
        },
        get_width: function () {
          return this.width;
        },
        get_height: function () {
          return this.height;
        },
        set_width: function (a) {
          this.width = a;
          this.refreshList();
          return a;
        },
        set_height: function (a) {
          this.height = a;
          this.refreshList();
          return a;
        },
        __class__: Tk,
        __properties__: q(db.prototype.__properties__, {
          set_moreString: "set_moreString",
          set_spacing: "set_spacing",
          set_stacking: "set_stacking",
          set_scrollIndex: "set_scrollIndex"
        })
      });
      function gd() {
        this.x = this.y = this.screenX = this.screenY = this._globalScreenX = this._globalScreenY = 0;
      }
      h["flixel.input.FlxPointer"] = gd;
      gd.__name__ = "flixel.input.FlxPointer";
      gd.prototype = {
        getWorldPosition: function (a, b) {
          if (a == null) {
            a = g.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = da.pool.get().set(b, c);
            b._inPool = false;
          }
          this.getScreenPosition(a, gd._cachedPoint);
          b.set_x(gd._cachedPoint.x + a.scroll.x);
          b.set_y(gd._cachedPoint.y + a.scroll.y);
          return b;
        },
        getScreenPosition: function (a, b) {
          if (a == null) {
            a = g.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = da.pool.get().set(b, c);
            b._inPool = false;
          }
          b.set_x((this._globalScreenX - a.x + a.width * 0.5 * (a.zoom - a.initialZoom)) / a.zoom);
          b.set_y((this._globalScreenY - a.y + a.height * 0.5 * (a.zoom - a.initialZoom)) / a.zoom);
          return b;
        },
        getPositionInCameraView: function (a, b) {
          if (a == null) {
            a = g.camera;
          }
          if (b == null) {
            var c = b = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            b = da.pool.get().set(b, c);
            b._inPool = false;
          }
          b.set_x((this._globalScreenX - a.x) / a.zoom + a.viewMarginX);
          b.set_y((this._globalScreenY - a.y) / a.zoom + a.viewMarginY);
          return b;
        },
        overlaps: function (a, b) {
          var c = this;
          var d = false;
          var e = ab.resolveGroup(a);
          if (e != null) {
            e.forEachExists(function (a) {
              if (c.overlaps(a, b)) {
                d = true;
              }
            });
          } else {
            this.getWorldPosition(b, gd._cachedPoint);
            d = a.overlapsPoint(gd._cachedPoint, true, b);
          }
          return d;
        },
        updatePositions: function () {
          this.getScreenPosition(g.camera, gd._cachedPoint);
          this.screenX = gd._cachedPoint.x | 0;
          this.screenY = gd._cachedPoint.y | 0;
          this.getWorldPosition(g.camera, gd._cachedPoint);
          this.x = gd._cachedPoint.x | 0;
          this.y = gd._cachedPoint.y | 0;
        },
        __class__: gd
      };
      function Ng() {}
      h["flixel.input.IFlxInputManager"] = Ng;
      Ng.__name__ = "flixel.input.IFlxInputManager";
      Ng.__isInterface__ = true;
      Ng.__interfaces__ = [ub];
      Ng.prototype = {
        __class__: Ng
      };
      function kg(a) {
        this._prevX = this._prevY = this._prevScreenX = this._prevScreenY = 0;
        this._visibleWhenFocusLost = true;
        this.useSystemCursor = this._wheelUsed = false;
        this.visible = true;
        this.wheel = 0;
        this.enabled = true;
        gd.call(this);
        this.cursorContainer = a;
        this.cursorContainer.mouseChildren = false;
        this.cursorContainer.mouseEnabled = false;
        this._leftButton = new df(-1);
        this._stage = ia.get_current().stage;
        this._stage.addEventListener("mouseDown", (r = this._leftButton, n(r, r.onDown)));
        this._stage.addEventListener("mouseUp", (r = this._leftButton, n(r, r.onUp)));
        this._middleButton = new df(-2);
        this._rightButton = new df(-3);
        this._stage.addEventListener("middleMouseDown", (r = this._middleButton, n(r, r.onDown)));
        this._stage.addEventListener("middleMouseUp", (r = this._middleButton, n(r, r.onUp)));
        this._stage.addEventListener("rightMouseDown", (r = this._rightButton, n(r, r.onDown)));
        this._stage.addEventListener("rightMouseUp", (r = this._rightButton, n(r, r.onUp)));
        this._stage.addEventListener("mouseLeave", n(this, this.onMouseLeave));
        this._stage.addEventListener("mouseWheel", n(this, this.onMouseWheel));
        g.signals.postGameStart.add(n(this, this.onGameStart));
        hd.hide();
      }
      h["flixel.input.mouse.FlxMouse"] = kg;
      kg.__name__ = "flixel.input.mouse.FlxMouse";
      kg.__interfaces__ = [Ng];
      kg.__super__ = gd;
      kg.prototype = q(gd.prototype, {
        load: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 1;
          }
          if (this.cursor != null) {
            ca.removeChild(this.cursorContainer, this.cursor);
          }
          if (a == null) {
            a = new Me(0, 0);
          }
          if (wa.__instanceof(a, aj)) {
            this.cursor = yb.createInstance(a, []);
          } else if (a instanceof N) {
            this.cursor = new Lc(a);
          } else if (typeof a == "string") {
            if (U.exists(a)) {
              a = U.getBitmapData(a, true);
            } else {
              g.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", Aa.ERROR, true);
              a = null;
            }
            this.cursor = new Lc(a);
          } else {
            this.cursor = new Lc(new Me(0, 0));
          }
          this.cursor.set_x(c);
          this.cursor.set_y(d);
          this.cursor.set_scaleX(b);
          this.cursor.set_scaleY(b);
          this.cursorContainer.addChild(this.cursor);
        },
        destroy: function () {
          if (this._stage != null) {
            this._stage.removeEventListener("mouseDown", (r = this._leftButton, n(r, r.onDown)));
            this._stage.removeEventListener("mouseUp", (r = this._leftButton, n(r, r.onUp)));
            this._stage.removeEventListener("middleMouseDown", (r = this._middleButton, n(r, r.onDown)));
            this._stage.removeEventListener("middleMouseUp", (r = this._middleButton, n(r, r.onUp)));
            this._stage.removeEventListener("rightMouseDown", (r = this._rightButton, n(r, r.onDown)));
            this._stage.removeEventListener("rightMouseUp", (r = this._rightButton, n(r, r.onUp)));
            this._stage.removeEventListener("mouseLeave", n(this, this.onMouseLeave));
            this._stage.removeEventListener("mouseWheel", n(this, this.onMouseWheel));
          }
          this.cursor = this.cursorContainer = null;
          this._leftButton = ca.destroy(this._leftButton);
          this._middleButton = ca.destroy(this._middleButton);
          this._rightButton = ca.destroy(this._rightButton);
          this._cursorBitmapData = ca.dispose(this._cursorBitmapData);
          g.signals.postGameStart.remove(n(this, this.onGameStart));
        },
        reset: function () {
          this._leftButton.reset();
          this._middleButton.reset();
          this._rightButton.reset();
        },
        update: function () {
          this._prevX = this.x;
          this._prevY = this.y;
          this._prevScreenX = this.screenX;
          this._prevScreenY = this.screenY;
          var a = g.game.get_mouseX();
          var b = g.game.get_mouseY();
          this._globalScreenX = a / g.scaleMode.scale.x | 0;
          this._globalScreenY = b / g.scaleMode.scale.y | 0;
          this.updatePositions();
          if (this.visible) {
            this.cursorContainer.set_x(g.game.get_mouseX());
            this.cursorContainer.set_y(g.game.get_mouseY());
          }
          this._leftButton.update();
          this._middleButton.update();
          this._rightButton.update();
          if (!this._wheelUsed) {
            this.wheel = 0;
          }
          this._wheelUsed = false;
        },
        onFocus: function () {
          this.reset();
          this.set_useSystemCursor(this.useSystemCursor);
          this.set_visible(this._visibleWhenFocusLost);
        },
        onFocusLost: function () {
          if (this._visibleWhenFocusLost = this.visible) {
            this.set_visible(false);
          }
          hd.show();
        },
        onGameStart: function () {
          this.set_visible(this.visible);
        },
        onMouseWheel: function (a) {
          if (this.enabled) {
            this._wheelUsed = true;
            this.wheel = a.delta;
          }
        },
        onMouseLeave: function (a) {
          this._rightButton.onUp();
          this._middleButton.onUp();
        },
        showSystemCursor: function () {
          this.cursorContainer.set_visible(false);
          hd.show();
        },
        hideSystemCursor: function () {
          hd.hide();
          if (this.visible) {
            this.cursorContainer.set_visible(true);
          }
        },
        set_useSystemCursor: function (a) {
          if (a) {
            this.showSystemCursor();
          } else {
            this.hideSystemCursor();
          }
          return this.useSystemCursor = a;
        },
        showCursor: function () {
          if (this.useSystemCursor) {
            hd.show();
          } else {
            if (this.cursor == null) {
              this.load();
            }
            this.cursorContainer.set_visible(true);
            hd.hide();
          }
        },
        hideCursor: function () {
          this.cursorContainer.set_visible(false);
          hd.hide();
        },
        set_visible: function (a) {
          if (a) {
            this.showCursor();
          } else {
            this.hideCursor();
          }
          return this.visible = a;
        },
        __class__: kg,
        __properties__: {
          set_useSystemCursor: "set_useSystemCursor",
          set_visible: "set_visible"
        }
      });
      function nj(a) {
        this.updateGlobalScreenPosition = true;
        kg.call(this, a);
      }
      h["flixel.addons.ui.FlxUIMouse"] = nj;
      nj.__name__ = "flixel.addons.ui.FlxUIMouse";
      nj.__super__ = kg;
      nj.prototype = q(kg.prototype, {
        update: function () {
          var a = this._globalScreenX;
          var b = this._globalScreenY;
          kg.prototype.update.call(this);
          if (!this.updateGlobalScreenPosition) {
            this._globalScreenX = a;
            this._globalScreenY = b;
          }
        },
        __class__: nj
      });
      function Lb(a, b, c, d, e, f, k, t, l, g, h, m) {
        if (m == null) {
          m = false;
        }
        if (t == null) {
          t = 1;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 999;
        }
        if (e == null) {
          e = -999;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.isPercent = false;
        this.stack = 1;
        this.value = 0;
        this.max = 10;
        this.stepSize = this.decimals = this.min = 0;
        db.call(this, a, b);
        if (l == null) {
          l = new pb(0, 0, 25);
        }
        l.set_x(0);
        l.set_y(0);
        this.text_field = l;
        this.text_field.set_text(d == null ? "null" : "" + d);
        if (this.text_field instanceof pb) {
          a = this.text_field;
          a.set_lines(1);
          a.callback = n(this, this._onInputTextEvent);
          a.broadcastToFlxUI = false;
        }
        this.stepSize = c;
        this.set_decimals(k);
        this.set_min(e);
        this.set_max(f);
        this.set_value(d);
        this.set_isPercent(m);
        c = 1 + l.get_height();
        if (g == null) {
          g = new Hc(0, 0);
          g.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], c, c, [Xb.toIntArray("2,2,15,15")], 0, -1, false, 18, 18);
          g.set_label(new G(0, 0, "flixel/flixel-ui/img/plus_mark.png"));
        }
        if (h == null) {
          h = new Hc(0, 0);
          h.loadGraphicSlice9(["flixel/flixel-ui/img/button_thin.png"], c, c, [Xb.toIntArray("2,2,15,15")], 0, -1, false, 18, 18);
          h.set_label(new G(0, 0, "flixel/flixel-ui/img/minus_mark.png"));
        }
        this.button_plus = g;
        this.button_minus = h;
        this.add(this.text_field);
        this.add(this.button_plus);
        this.add(this.button_minus);
        this.button_plus.onUp.callback = n(this, this._onPlus);
        this.button_plus.broadcastToFlxUI = false;
        this.button_minus.onUp.callback = n(this, this._onMinus);
        this.button_minus.broadcastToFlxUI = false;
        this.set_stack(t);
      }
      h["flixel.addons.ui.FlxUINumericStepper"] = Lb;
      Lb.__name__ = "flixel.addons.ui.FlxUINumericStepper";
      Lb.__interfaces__ = [Le, yf, qd];
      Lb.__super__ = db;
      Lb.prototype = q(db.prototype, {
        set_params: function (a) {
          return this.params = a;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          this.button_plus.set_skipButtonUpdate(a);
          this.button_minus.set_skipButtonUpdate(a);
          return a;
        },
        set_color: function (a) {
          this.color = a;
          this.button_plus.set_color(a);
          this.button_minus.set_color(a);
          if (this.text_field instanceof bf) {
            this.text_field.set_backgroundColor(a);
          } else {
            this.text_field.set_color(a);
          }
          return a;
        },
        set_min: function (a) {
          this.min = a;
          if (this.value < this.min) {
            this.set_value(this.min);
          }
          return this.min;
        },
        set_max: function (a) {
          this.max = a;
          if (this.value > this.max) {
            this.set_value(this.max);
          }
          return this.max;
        },
        set_value: function (a) {
          this.value = a;
          if (this.value < this.min) {
            this.value = this.min;
          }
          if (this.value > this.max) {
            this.value = this.max;
          }
          if (this.text_field != null) {
            a = this.value;
            if (this.isPercent) {
              var b = Math.pow(10, this.decimals);
              this.text_field.set_text(y.string(y.string(Math.round(a * 100 * b) / b)) + "%");
            } else {
              b = Math.pow(10, this.decimals);
              this.text_field.set_text(y.string(Math.round(a * b) / b));
            }
          }
          return this.value;
        },
        set_decimals: function (a) {
          this.decimals = a;
          if (a < 0) {
            this.decimals = 0;
          }
          this.set_value(this.value);
          return this.decimals;
        },
        set_isPercent: function (a) {
          this.isPercent = a;
          this.set_value(this.value);
          return this.isPercent;
        },
        set_stack: function (a) {
          this.stack = a;
          var b = 0;
          var c = 0;
          if (this.text_field instanceof pb) {
            c = b = 1;
          }
          switch (this.stack) {
            case 0:
              a = 1 + this.text_field.get_height() / 2;
              if (this.button_plus.get_height() != a) {
                this.button_plus.resize(a, a);
              }
              if (this.button_minus.get_height() != a) {
                this.button_minus.resize(a, a);
              }
              this.button_plus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_plus.set_y(-c + this.text_field.y);
              this.button_minus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_minus.set_y(c + this.text_field.y + (this.text_field.get_height() - this.button_minus.get_height()));
              break;
            case 1:
              a = 2 + this.text_field.get_height();
              if (this.button_plus.get_height() != a) {
                this.button_plus.resize(a, a);
              }
              if (this.button_minus.get_height() != a) {
                this.button_minus.resize(a, a);
              }
              this.button_plus.set_x(b + this.text_field.x + this.text_field.get_width());
              this.button_plus.set_y(-c + this.text_field.y);
              this.button_minus.set_x(this.button_plus.x + this.button_plus.get_width());
              this.button_minus.set_y(this.button_plus.y);
          }
          return this.stack;
        },
        _onInputTextEvent: function (a, b) {
          if (a == "") {
            a = y.string(this.min);
          }
          for (var c = b = 0, d = a.length; c < d;) {
            var e = c++;
            if (a.charAt(e) == ".") {
              ++b;
            }
          }
          if (b != 1 || a.indexOf(".") != a.length - 1) {
            this.set_value(parseFloat(a));
            this._doCallback("edit_numeric_stepper");
            this._doCallback("change_numeric_stepper");
          }
        },
        _onPlus: function () {
          this.set_value(this.value + this.stepSize);
          this._doCallback("click_numeric_stepper");
          this._doCallback("change_numeric_stepper");
        },
        _onMinus: function () {
          this.set_value(this.value - this.stepSize);
          this._doCallback("click_numeric_stepper");
          this._doCallback("change_numeric_stepper");
        },
        _doCallback: function (a) {
          if (this.broadcastToFlxUI) {
            Ma.event(a, this, this.value, this.params);
          }
        },
        __class__: Lb,
        __properties__: q(db.prototype.__properties__, {
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_params: "set_params",
          set_isPercent: "set_isPercent",
          set_stack: "set_stack",
          set_value: "set_value",
          set_max: "set_max",
          set_min: "set_min",
          set_decimals: "set_decimals"
        })
      });
      function Wf(a) {
        if (a == null) {
          a = 0;
        }
        this.getTextFallback = null;
        this._reload_countdown = 0;
        this.reload_ui_on_resize = this._reload = false;
        this._xml_id = "";
        this.cursor = null;
        od.call(this, a);
      }
      h["flixel.addons.ui.FlxUISubState"] = Wf;
      Wf.__name__ = "flixel.addons.ui.FlxUISubState";
      Wf.__interfaces__ = [Gg];
      Wf.__super__ = od;
      Wf.prototype = q(od.prototype, {
        forceScrollFactor: function (a, b) {
          if (this._ui != null) {
            for (var c = 0, d = this._ui.group.members; c < d.length;) {
              var e = d[c];
              ++c;
              e = e.scrollFactor;
              var f = a;
              var k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
            if (this._ui.scrollFactor != null) {
              e = this._ui.scrollFactor;
              f = a;
              k = b;
              if (k == null) {
                k = 0;
              }
              if (f == null) {
                f = 0;
              }
              e.set_x(f);
              e.set_y(k);
            }
          }
        },
        forceFocus: function (a, b) {
          if (this._ui != null) {
            if (a) {
              this._ui.set_focus(b);
            } else {
              this._ui.set_focus(null);
            }
          }
        },
        create: function () {
          if (Sd.static_tongue != null) {
            this._tongue = Sd.static_tongue;
          }
          if (this._makeCursor == 1) {
            this.cursor = this.createCursor();
          }
          this.tooltips = new Wi(null, this);
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          this._ui.getTextFallback = this.getTextFallback;
          if (this._xml_id != "" && this._xml_id != null) {
            var a = D.xml(this._xml_id);
            if (a == null) {
              a = D.xml(this._xml_id, "xml", true, "");
            }
            if (a != null) {
              this._ui.load(a);
            }
          } else {
            this._ui.load(null);
          }
          if (this.cursor != null && this._ui != null) {
            this.add(this.cursor);
            this.cursor.addWidgetsFromUI(this._ui);
            this.cursor.findVisibleLocation(0);
          }
          g.mouse.set_visible(true);
          this.tooltips.init();
          od.prototype.create.call(this);
          this.cleanup();
          if (this._parentState instanceof Sd) {
            this.reload_ui_on_resize = wa.__cast(this._parentState, Sd).reload_ui_on_resize;
          }
        },
        onCursorEvent: function (a, b) {
          this.getEvent(a, b, null);
        },
        onShowTooltip: function (a) {},
        onResize: function (a, b) {
          if (this.reload_ui_on_resize) {
            g.scaleMode.onMeasure(a, b);
            this._reload_countdown = 5;
            this._reload = true;
          }
        },
        update: function (a) {
          od.prototype.update.call(this, a);
          this.tooltips.update(a);
          if (this._reload && this._reload_countdown > 0) {
            this._reload_countdown--;
            if (this._reload_countdown == 0) {
              this.reloadUI();
            }
          }
        },
        destroy: function () {
          this.destroyed = true;
          if (this.tooltips != null) {
            this.tooltips.destroy();
            this.tooltips = null;
          }
          if (this._ui != null) {
            this._ui.destroy();
            this.remove(this._ui, true);
            this._ui = null;
          }
          od.prototype.destroy.call(this);
        },
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        getText: function (a, b, c) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = "ui";
          }
          if (this._tongue != null) {
            return this._tongue.get(a, b, c);
          } else if (this.getTextFallback != null) {
            return this.getTextFallback(a, b, c);
          } else {
            return a;
          }
        },
        cleanup: function () {
          this._ui.cleanup();
        },
        createCursor: function () {
          return new Xi(n(this, this.onCursorEvent));
        },
        createUI: function (a, b, c, d, e) {
          if (e == null) {
            e = "";
          }
          return new Ma(a, b, c, d, e);
        },
        reloadUI: function () {
          if (this._ui != null) {
            this.remove(this._ui, true);
            this._ui.destroy();
            this._ui = null;
          }
          this._ui = this.createUI(null, this, null, this._tongue);
          this.add(this._ui);
          var a = D.xml(this._xml_id);
          this._ui.load(a);
          this._reload = false;
          this._reload_countdown = 0;
        },
        __class__: Wf
      });
      function pj(a) {
        this._quickSetupParams = null;
        this._width = this._height = 0;
        this.alpha = 1;
        this.params = null;
        this.x = this.y = 0;
        this.broadcastToFlxUI = true;
        Wf.call(this, a);
      }
      h["flixel.addons.ui.FlxUIPopup"] = pj;
      pj.__name__ = "flixel.addons.ui.FlxUIPopup";
      pj.__interfaces__ = [qd];
      pj.__super__ = Wf;
      pj.prototype = q(Wf.prototype, {
        set_immovable: function (a) {
          return this.immovable;
        },
        set_x: function (a) {
          return this.x = a;
        },
        set_y: function (a) {
          return this.y = a;
        },
        get_width: function () {
          return this._width;
        },
        get_height: function () {
          return this._height;
        },
        set_width: function (a) {
          return this._width = a;
        },
        set_height: function (a) {
          return this._height = a;
        },
        set_angle: function (a) {
          return this.angle = a;
        },
        set_alpha: function (a) {
          return this.alpha = a;
        },
        set_facing: function (a) {
          return this.facing = a;
        },
        set_moves: function (a) {
          return this.moves = a;
        },
        set_offset: function (a) {
          return this.offset = a;
        },
        set_origin: function (a) {
          return this.origin = a;
        },
        set_scale: function (a) {
          return this.scale = a;
        },
        set_scrollFactor: function (a) {
          return this.scrollFactor = a;
        },
        reset: function (a, b) {
          this.setPosition(a, b);
        },
        setPosition: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.set_x(a);
          this.set_y(b);
        },
        create: function () {
          if (this._xml_id == "") {
            this._xml_id = "flixel/flixel-ui/xml/default_popup";
          }
          var a = 0;
          var b = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          b = da.pool.get().set(a, b);
          b._inPool = false;
          this.set_scrollFactor(b);
          this.getTextFallback = n(this, this.myGetTextFallback);
          Wf.prototype.create.call(this);
          if (this._quickSetupParams != null) {
            this._doQuickSetup();
          }
          var c = this.scrollFactor;
          b = a = 0;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this._ui.setScrollFactor(0, 0);
        },
        quickSetup: function (a, b, c) {
          this._quickSetupParams = {
            title: a,
            body: b,
            button_labels: c
          };
        },
        getEvent: function (a, b, c, d) {
          if (d == null && this.params != null) {
            d = [];
          }
          if (this.params != null) {
            d = d.concat(this.params);
          }
          if (a == "click_button") {
            var e = "";
            if (d != null) {
              if (typeof d[0] == "string") {
                e = y.string(d[0]);
              }
              var f = d[0] | 0;
              if (e == "affirm" || e == "cancel" || e == "alt") {
                if (wa.__implements(this._parentState, Gg)) {
                  this.castParent().getEvent("click_popup", this, f, d);
                } else {
                  Ma.event("click_popup", this, f, d);
                }
                this.close();
              }
            }
          }
          Wf.prototype.getEvent.call(this, a, b, c, d);
        },
        castParent: function () {
          return this._parentState;
        },
        myGetTextFallback: function (a, b, c) {
          switch (a) {
            case "$POPUP_BODY_DEFAULT":
              return "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam consectetur vehicula pellentesque. Phasellus at blandit augue. Suspendisse vel leo ut elit imperdiet eleifend ut quis purus. Quisque imperdiet turpis vitae justo hendrerit molestie. Quisque tempor ante eget posuere viverra.";
            case "$POPUP_CANCEL":
              return "Cancel";
            case "$POPUP_NO":
              return "No";
            case "$POPUP_OK":
              return "Ok";
            case "$POPUP_TITLE_DEFAULT":
              return "Alert!";
            case "$POPUP_YES":
              return "Yes";
          }
          return a;
        },
        _doQuickSetup: function () {
          if (this._ui.hasAsset("title")) {
            this._ui.getAsset("title").set_text(this._quickSetupParams.title);
          }
          if (this._ui.hasAsset("body")) {
            this._ui.getAsset("body").set_text(this._quickSetupParams.body);
          }
          this._doQuickSetupButtons();
          this._quickSetupParams = this._quickSetupParams.button_labels = null;
        },
        _doQuickSetupButtons: function () {
          var a = ["btn0", "btn1", "btn2"];
          var b = 0;
          switch (this._quickSetupParams.button_labels.length) {
            case 1:
              this._ui.setMode("1btn");
              break;
            case 2:
              this._ui.setMode("2btn");
              break;
            case 3:
              this._ui.setMode("3btn");
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (this._ui.hasAsset(d) && (d = this._ui.getAsset(d), this._quickSetupParams.button_labels.length > b)) {
              var e = this._quickSetupParams.button_labels[b];
              var f = e;
              switch (e) {
                case "<cancel>":
                case "<no>":
                case "<yes>":
                  e = L.substr(e, 1, e.length - 2).toUpperCase();
                  f = "$POPUP_" + e;
                  f = this._ui.getText(f, "ui", false);
                  if (f == null || f == "") {
                    f = e;
                  }
              }
              D.setButtonLabel(d, f);
            }
            ++b;
          }
        },
        __class__: pj,
        __properties__: q(Wf.prototype.__properties__, {
          set_height: "set_height",
          get_height: "get_height",
          set_width: "set_width",
          get_width: "get_width",
          set_alpha: "set_alpha",
          set_y: "set_y",
          set_x: "set_x",
          set_scrollFactor: "set_scrollFactor",
          set_scale: "set_scale",
          set_origin: "set_origin",
          set_offset: "set_offset",
          set_moves: "set_moves",
          set_facing: "set_facing",
          set_angle: "set_angle",
          set_immovable: "set_immovable"
        })
      });
      function ij(a, b, c, d, e, f, k, t, l, g, h, m, p, n) {
        if (g == null) {
          g = "<X> more...";
        }
        if (l == null) {
          l = 100;
        }
        if (t == null) {
          t = 20;
        }
        if (k == null) {
          k = 100;
        }
        if (f == null) {
          f = 25;
        }
        this._clickable = true;
        this._selected = 0;
        this._y_space = 25;
        this._height = 20;
        this._label_width = this._width = 100;
        this.fixedSize = false;
        db.call(this);
        this._y_space = f;
        this._width = k;
        this._height = t;
        this._label_width = l;
        if (c == null) {
          c = [];
        }
        if (d == null) {
          d = [];
        }
        this.callback = e;
        this._list_radios = [];
        this._list_active = [];
        this._list = new Tk(0, 0, null, 0, 0, g, 1, 0, h, m, p, n);
        this.add(this._list);
        this.updateRadios(c, d);
        this.loadGraphics(null, null);
        this.set_x(a);
        this.set_y(b);
      }
      h["flixel.addons.ui.FlxUIRadioGroup"] = ij;
      ij.__name__ = "flixel.addons.ui.FlxUIRadioGroup";
      ij.__interfaces__ = [Le, yf];
      ij.__super__ = db;
      ij.prototype = q(db.prototype, {
        set_activeStyle: function (a) {
          this.activeStyle = a;
          this.updateActives();
          return this.activeStyle;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          for (var b = 0, c = this._list_radios; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_skipButtonUpdate(a);
          }
          return this.skipButtonUpdate;
        },
        set_params: function (a) {
          return this.params = a;
        },
        set_width: function (a) {
          db.prototype.set_width.call(this, a);
          if (this.fixedSize && this._list != null) {
            this._list.set_width(a);
          }
          return a;
        },
        set_height: function (a) {
          db.prototype.set_height.call(this, a);
          if (this.fixedSize && this._list != null) {
            this._list.set_height(a);
          }
          return a;
        },
        loadGraphics: function (a, b) {
          this._box_asset = a ?? "flixel/flixel-ui/img/radio.png";
          this._dot_asset = b ?? "flixel/flixel-ui/img/radio_dot.png";
          if (this._box_asset instanceof G) {
            a = this._box_asset;
            this._box_asset = a.graphic.key;
          }
          if (this._dot_asset instanceof G) {
            a = this._dot_asset;
            this._dot_asset = a.graphic.key;
          }
          a = 0;
          for (b = this._list_radios; a < b.length;) {
            var c = b[a];
            ++a;
            c.box.loadGraphic(this._box_asset, true);
            c.mark.loadGraphic(this._dot_asset);
          }
          this._refreshRadios();
        },
        destroy: function () {
          if (this._list_radios != null) {
            D.clearArray(this._list_radios);
          }
          if (this._list_active != null) {
            D.clearArray(this._list_active);
          }
          this._labels = this._ids = this._list = this._list_radios = this._list_active = null;
          db.prototype.destroy.call(this);
        },
        updateRadios: function (a, b) {
          this._ids = a;
          this._labels = b;
          a = 0;
          for (b = this._list_radios; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(false);
          }
          this._refreshRadios();
        },
        getRadios: function () {
          return this._list_radios;
        },
        get_selectedId: function () {
          return this._ids[this._selected];
        },
        _refreshRadios: function () {
          var a = this.x;
          var b = this.y;
          var c = 0;
          var d = 0;
          var e = 0;
          this._list._skipRefresh = true;
          for (var f = 0, k = this._ids; f < k.length;) {
            var t = k[f];
            ++f;
            var g = "";
            g = this._labels != null && this._labels.length > c ? this._labels[c] : "<" + t + ">";
            if (this._list_radios.length > c) {
              t = this._list_radios[c];
              t.set_visible(true);
              t.set_text(g);
              if (c == 0) {
                a = t.x;
                b = t.y;
              } else {
                t.set_x(a | 0);
                t.set_y(b | 0);
              }
            } else {
              t = new Bb(0, 0, this._box_asset, this._dot_asset, g, this._label_width, [t, false]);
              t.broadcastToFlxUI = false;
              t.callback = function (a, b) {
                return function () {
                  a[0]._onCheckBoxEvent(b[0]);
                };
              }([this], [t]);
              this._list.add(t);
              t.set_x(a | 0);
              t.set_y(b | 0);
              t.set_text(g);
              if (this._list_radios.length > 0) {
                t.button.copyStyle(this._list_radios[0].button);
                if (this.activeStyle == null) {
                  this.set_activeStyle(this.makeActiveStyle());
                }
                t.button.set_width(this._list_radios[0].button.get_width());
                t.button.set_height(this._list_radios[0].button.get_height());
                t.set_textX(this._list_radios[0].textX);
                t.set_textY(this._list_radios[0].textY);
              }
              this._list_radios.push(t);
              this._list_active.push(true);
            }
            if (a + t.get_width() > d) {
              d = a + t.get_width();
            }
            if (b + t.get_height() > e) {
              e = b + t.get_height();
            }
            b += this._y_space;
            ++c;
          }
          if (this.fixedSize == 0) {
            d += 5;
            e += 5;
            if (d > this._list.get_width()) {
              this._list.set_width(d);
            }
            if (e > this._list.get_height()) {
              this._list.set_height(e);
            }
            this.set_width(d);
            this.set_height(e);
          }
          this._list._skipRefresh = false;
          if (this.fixedSize == 1) {
            this._list.refreshList();
          }
          this.updateActives();
        },
        updateActives: function () {
          var a = 0;
          for (var b = 0, c = this._list_radios; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_active(this._list_active[a]);
            if (this._list_active[a] == 0 && this.inactiveStyle != null) {
              this.inactiveStyle.applyToCheck(d);
            } else if (this._list_active[a] == 1 && this.activeStyle != null) {
              this.activeStyle.applyToCheck(d);
            }
            ++a;
          }
        },
        makeActiveStyle: function () {
          if (this._list_radios.length > 0) {
            var a = this._list_radios[0].button.label;
            var b = md.copyFromFlxText(a);
            var c = new af(a.borderStyle, a.borderColor, a.borderSize, a.borderQuality);
            return new jj(16777215, b, Fn.fromOpenFL(a._defaultFormat.align), a.color, c);
          }
          return null;
        },
        _onCheckBoxEvent: function (a) {
          this._onClick(a, true);
        },
        _onClick: function (a, b) {
          if (!this._clickable) {
            return false;
          }
          var c = 0;
          for (var d = 0, e = this._list_radios; d < e.length;) {
            var f = e[d];
            ++d;
            f.set_checked(false);
            if (a == f) {
              this._selected = c;
              f.set_checked(true);
            }
            ++c;
          }
          if (b) {
            if (this.callback != null) {
              this.callback(this.get_selectedId());
            }
            if (this.broadcastToFlxUI) {
              Ma.event("click_radio_group", this, this._ids[this._selected], this.params);
            }
          }
          return true;
        },
        __class__: ij,
        __properties__: q(db.prototype.__properties__, {
          set_params: "set_params",
          set_skipButtonUpdate: "set_skipButtonUpdate",
          set_activeStyle: "set_activeStyle",
          get_selectedId: "get_selectedId"
        })
      });
      function jj(a, b, c, d, e) {
        this.checkColor = a;
        gj.call(this, b, c, d, e);
      }
      h["flixel.addons.ui.CheckStyle"] = jj;
      jj.__name__ = "flixel.addons.ui.CheckStyle";
      jj.__super__ = gj;
      jj.prototype = q(gj.prototype, {
        applyToCheck: function (a) {
          if (this.checkColor != null) {
            a.set_color(this.checkColor);
          }
          this.apply(a.button.label);
        },
        __class__: jj
      });
      function th(a, b, c, d) {
        if (d == null) {
          d = 16;
        }
        if (c == null) {
          c = 16;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        G.call(this, a, b);
        this.makeGraphic(1, 1, 0);
        if (d < 1) {
          d = 1;
        }
        if (c < 1) {
          c = 1;
        }
        this.resize(c, d);
      }
      h["flixel.addons.ui.FlxUIRegion"] = th;
      th.__name__ = "flixel.addons.ui.FlxUIRegion";
      th.__interfaces__ = [ed, qd];
      th.__super__ = G;
      th.prototype = q(G.prototype, {
        resize: function (a, b) {
          this.set_width(a);
          this.set_height(b);
        },
        __class__: th
      });
      function wh(a, b, c, d, e, f, k, t, g, J, h) {
        ci.call(this, a, b, c, d, e, f, k, t, g, J, h);
      }
      h["flixel.addons.ui.FlxUISlider"] = wh;
      wh.__name__ = "flixel.addons.ui.FlxUISlider";
      wh.__interfaces__ = [qd];
      wh.__super__ = ci;
      wh.prototype = q(ci.prototype, {
        __class__: wh
      });
      function cf(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Hc.call(this, a, b, d);
        this.up_color = this.over_color = this.down_color = this.up_toggle_color = this.over_toggle_color = this.down_toggle_color = -1;
        if (c != null) {
          this.set_label(c);
        }
      }
      h["flixel.addons.ui.FlxUISpriteButton"] = cf;
      cf.__name__ = "flixel.addons.ui.FlxUISpriteButton";
      cf.__interfaces__ = [Mg];
      cf.__super__ = Hc;
      cf.prototype = q(Hc.prototype, {
        resize: function (a, b) {
          Hc.prototype.resize.call(this, a, b);
          this.autoCenterLabel();
        },
        autoCenterLabel: function () {
          if (this.label != null) {
            if (this.label instanceof Na) {
              var a = this.label;
              for (var b = 0, c = a.group.members; b < c.length;) {
                var d = c[b];
                ++b;
                d.set_x(-d.get_width() / 2);
                d.set_y(-d.get_height() / 2);
              }
              var e = a.get_width();
              var f = a.get_height();
              b = 0;
              for (c = a.group.members; b < c.length;) {
                d = c[b];
                ++b;
                d.set_x((e - d.get_width()) / 2);
                d.set_y((f - d.get_height()) / 2);
              }
            }
            Hc.prototype.autoCenterLabel.call(this);
          }
        },
        __class__: cf
      });
      function ie(a, b, c, d, e, f, k) {
        if (e == null) {
          e = false;
        }
        this._selected_tab = -1;
        this._selected_tab_id = "";
        this._tab_spacing = this._tab_stacking = this._tab_offset = null;
        this._stretch_tabs = false;
        db.call(this);
        if (a == null) {
          a = new W(0, 0, "flixel/flixel-ui/img/chrome_flat.png", new ba(0, 0, 200, 200));
        }
        this._back = a;
        this.add(this._back);
        if (b == null && c != null) {
          b = [];
          a = 0;
          while (a < c.length) {
            var t = c[a];
            ++a;
            var g = new rd(0, 0, t.label);
            g.up_color = 16777215;
            g.down_color = 16777215;
            g.over_color = 16777215;
            g.up_toggle_color = 16777215;
            g.down_toggle_color = 16777215;
            g.over_toggle_color = 16777215;
            g.label.set_color(16777215);
            var J = g.label;
            J.set_borderStyle(cb.OUTLINE);
            J.set_borderColor(0);
            J.set_borderSize(1);
            J.set_borderQuality(1);
            g.name = t.name;
            t = Xb.toIntArray("6,6,11,11");
            g.loadGraphicSlice9("flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab_back.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png flixel/flixel-ui/img/tab.png".split(" "), 0, 0, [t, t, t, t, t, t], 0, -1, true);
            b.push(g);
          }
        }
        this._tabs = b;
        this._stretch_tabs = e;
        this._tab_spacing = f;
        this._tab_stacking = k;
        if (this._tab_stacking == null) {
          this._tab_stacking = ["front", "back"];
        }
        this._tab_offset = d;
        b = 0;
        d = null;
        a = 0;
        for (c = this._tabs; a < c.length;) {
          d = c[a];
          ++a;
          this.add(d);
          e = function (a, b) {
            return function () {
              a[0]._onTabEvent(b[0]);
            };
          }([this], [d.name]);
          d.onUp.callback = e;
          ++b;
        }
        this.distributeTabs();
        this._tab_groups = [];
      }
      h["flixel.addons.ui.FlxUITabMenu"] = ie;
      ie.__name__ = "flixel.addons.ui.FlxUITabMenu";
      ie.__interfaces__ = [nh, yf, ed];
      ie.__super__ = db;
      ie.prototype = q(db.prototype, {
        getEvent: function (a, b, c, d) {},
        getRequest: function (a, b, c, d) {
          return null;
        },
        set_skipButtonUpdate: function (a) {
          this.skipButtonUpdate = a;
          for (var b = 0, c = this._tabs; b < c.length;) {
            var d = c[b];
            ++b;
            d.set_skipButtonUpdate(a);
          }
          b = 0;
          for (c = this._tab_groups; b < c.length;) {
            var e = c[b];
            ++b;
            d = 0;
            for (e = e.group.members; d < e.length;) {
              var f = e[d];
              ++d;
              if (wa.__implements(f, yf)) {
                f.set_skipButtonUpdate(a);
              }
            }
          }
          return a;
        },
        get_width: function () {
          return this._back.get_width();
        },
        get_height: function () {
          var a = this.getFirstTab();
          if (a != null) {
            return this._back.y + this._back.get_height() - a.y;
          } else {
            return this._back.get_height();
          }
        },
        resize: function (a, b) {
          if (wa.__implements(this._back, ed)) {
            this.distributeTabs(a);
            var c = this._back;
            var d = this.getFirstTab();
            if (d != null) {
              c.resize(a, b - d.get_height());
            } else {
              c.resize(a, b);
            }
          } else {
            this.distributeTabs();
          }
        },
        get_selected_tab: function () {
          return this._selected_tab;
        },
        set_selected_tab: function (a) {
          this.showTabInt(a);
          return this._selected_tab;
        },
        get_selected_tab_id: function () {
          return this._selected_tab_id;
        },
        set_selected_tab_id: function (a) {
          this.showTabId(a);
          return this._selected_tab_id;
        },
        destroy: function () {
          db.prototype.destroy.call(this);
          D.clearArray(this._tab_groups);
          D.clearArray(this._tabs);
          this._tab_groups = this._tabs = this._back = null;
        },
        getTab: function (a, b) {
          if (a != null) {
            for (var c = 0, d = this._tabs; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.name == a) {
                return e;
              }
            }
          }
          if (b != null && b < this._tabs.length) {
            return this._tabs[b];
          } else {
            return null;
          }
        },
        addGroup: function (a) {
          if (a != this) {
            if (!this.contains(a)) {
              a.set_y(this._back.y - this.y);
              this.add(a);
              this._tab_groups.push(a);
            }
            this._showOnlyGroup("");
            if (this._tab_groups.length == 1) {
              this.set_selected_tab(0);
            }
            if (this._selected_tab != -1) {
              this.set_selected_tab(this._selected_tab);
            }
          }
        },
        _onTabEvent: function (a) {
          this.showTabId(a);
          var b = this.getTab(a);
          b = b != null ? b.params : null;
          if (this.broadcastToFlxUI) {
            Ma.event("tab_menu_click", this, a, b);
          }
        },
        stackTabs: function () {
          var a = this._back.x;
          var b = this._back.y;
          this.group.remove(this._back, true);
          var c;
          for (var d = 0, e = this._tabs; d < e.length;) {
            c = e[d];
            ++d;
            if (c.toggled) {
              this.group.remove(c, true);
            }
          }
          this.group.add(this._back);
          d = 0;
          for (e = this._tabs; d < e.length;) {
            c = e[d];
            ++d;
            if (c.toggled) {
              this.group.add(c);
            }
          }
          d = 0;
          for (e = this._tab_groups; d < e.length;) {
            c = e[d];
            ++d;
            var f = c.x;
            var k = c.y;
            this.remove(c, true);
            this.add(c);
            c.set_x(f);
            c.set_y(k);
          }
          this._back.set_x(a);
          this._back.set_y(b);
        },
        showTabId: function (a) {
          this._selected_tab = -1;
          this._selected_tab_id = "";
          var b = 0;
          for (var c = 0, d = this._tabs; c < d.length;) {
            var e = d[c];
            ++c;
            e.set_toggled(false);
            e.forceStateHandler("out_button");
            if (e.name == a) {
              e.set_toggled(true);
              this._selected_tab_id = a;
              this._selected_tab = b;
            }
            ++b;
          }
          this._showOnlyGroup(a);
          this.stackTabs();
        },
        sortTabs: function (a, b) {
          if (!(a.name < b.name) && a.name > b.name) {
            return 1;
          } else {
            return -1;
          }
        },
        showTabInt: function (a) {
          if (a >= 0 && this._tabs != null && this._tabs.length > a) {
            this.showTabId(this._tabs[a].name);
          } else {
            this.showTabId("");
          }
        },
        _showOnlyGroup: function (a) {
          for (var b = 0, c = this._tab_groups; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              d.set_visible(d.set_active(true));
            } else {
              d.set_visible(d.set_active(false));
            }
          }
        },
        getFirstTab: function () {
          var a = null;
          if (this._tabs != null && this._tabs.length > 0) {
            a = this._tabs[0];
          }
          return a;
        },
        distributeTabs: function (a) {
          if (a == null) {
            a = -1;
          }
          var b = 0;
          var c = 0;
          if (a == -1) {
            a = this._back.get_width();
          }
          var d = 0;
          if (this._stretch_tabs) {
            c = a / this._tabs.length;
            var e = (c | 0) * this._tabs.length;
            if (e < a) {
              d = a - e;
            }
          }
          this._tabs.sort(n(this, this.sortTabs));
          e = a = 0;
          var f;
          for (var k = 0, t = this._tabs; k < t.length;) {
            f = t[k];
            ++k;
            f.set_x(this.x + b);
            f.set_y(this.y);
            if (this._tab_offset != null) {
              f.set_x(f.x + this._tab_offset.x);
              f.set_y(f.y + this._tab_offset.y);
            }
            if (this._stretch_tabs) {
              var g = f.get_height();
              if (a != 0) {
                g = e;
                f.resize_ratio = -1;
              }
              if (d > 0) {
                f.resize(c + 1, g);
                b += (c | 0) + 1;
                --d;
              } else {
                f.resize(c, g);
                b += c | 0;
              }
            } else {
              b = this._tab_spacing != null ? b + (f.get_width() + this._tab_spacing) : b + f.get_width();
            }
            if (a == 0) {
              e = f.get_height();
            }
            ++a;
          }
          if (this._tabs != null && this._tabs.length > 0 && this._tabs[0] != null) {
            this._back.set_y(this._tabs[0].y + this._tabs[0].get_height() - 2);
            if (this._tab_offset != null) {
              b = this._back;
              b.set_y(b.y - this._tab_offset.y);
            }
          }
          this.calcBounds();
        },
        __class__: ie,
        __properties__: q(db.prototype.__properties__, {
          set_selected_tab_id: "set_selected_tab_id",
          get_selected_tab_id: "get_selected_tab_id",
          set_selected_tab: "set_selected_tab",
          get_selected_tab: "get_selected_tab",
          set_skipButtonUpdate: "set_skipButtonUpdate"
        })
      });
      function Wd(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.minimumHeight = 1;
        R.call(this, a, b, c, d, e, f);
      }
      h["flixel.addons.ui.FlxUIText"] = Wd;
      Wd.__name__ = "flixel.addons.ui.FlxUIText";
      Wd.__interfaces__ = [Le, qd, ed];
      Wd.__super__ = R;
      Wd.prototype = q(R.prototype, {
        resize: function (a, b) {
          var c = 1;
          if (b < this.minimumHeight) {
            b = this.minimumHeight;
          }
          if (b < this.get_height()) {
            c = -1;
          }
          this.set_width(a);
          this.set_height(b);
          this.textField.set_width(this.get_width());
          var d = this._defaultFormat.size | 0;
          for (var e = this.get_height() - this.graphic.bitmap.height, f = 0, k = this.textField.get_numLines(); e * c > 0 && f < 999;) {
            ++f;
            this.set_size((this._defaultFormat.size | 0) + c);
            if (c > 0 && this.textField.get_numLines() > k) {
              this.set_size((this._defaultFormat.size | 0) - c);
              break;
            }
            this._regen = true;
            this.calcFrame(true);
            e = b - this.graphic.bitmap.height;
          }
          if (f >= 999) {
            g.log.advanced("Loop failsafe tripped while resizing FlxUIText to height(" + b + ")", Aa.WARNING, true);
            this.set_size(d);
          }
          this.set_width(a);
          this.set_height(b);
          this._regen = true;
          this.calcFrame(true);
        },
        set_params: function (a) {
          return this.params = a;
        },
        __class__: Wd,
        __properties__: q(R.prototype.__properties__, {
          set_params: "set_params"
        })
      });
      function hj(a, b, c, d, e, f, k, t, g) {
        if (g == null) {
          g = false;
        }
        if (t == null) {
          t = 12895428;
        }
        if (k == null) {
          k = 8421504;
        }
        this.baseTileSize = -1;
        this.floorToEven = false;
        this._color1 = this._color2 = 0;
        this._tilesWide = this._tilesTall = 2;
        Bc.call(this, a, b);
        this.tileWidth = c;
        this.tileHeight = d;
        this._tilesWide = e;
        this._tilesTall = f;
        this._color1 = k;
        this._color2 = t;
        this.floorToEven = g;
        this.makeTiles(this.tileWidth, this.tileHeight, this._tilesWide, this._tilesTall, this._color1, this._color2);
      }
      h["flixel.addons.ui.FlxUITileTest"] = hj;
      hj.__name__ = "flixel.addons.ui.FlxUITileTest";
      hj.__interfaces__ = [qd, ed];
      hj.__super__ = Bc;
      hj.prototype = q(Bc.prototype, {
        makeTiles: function (a, b, c, d, e, f) {
          if (f == null) {
            f = -3881788;
          }
          if (e == null) {
            e = -8355712;
          }
          b = this.constrain(a * this._tilesWide, b * this._tilesTall);
          a = b.x | 0;
          b = b.y | 0;
          this.makeGraphic(c, d, e);
          e = this.get_pixels();
          var k = 0;
          for (var t = 0; t < c;) {
            var g = t++;
            for (var J = 0, h = d; J < h;) {
              var m = J++;
              if (k % 2 == 0) {
                e.setPixel(g, m, f);
              }
              ++k;
            }
            if (c % 2 != 0) {
              ++k;
            }
          }
          this.set_pixels(e);
          c = this.scale;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          c.set_x(a);
          c.set_y(b);
          this.updateHitbox();
        },
        constrain: function (a, b) {
          a = a / this._tilesWide | 0;
          var c = b / this._tilesTall | 0;
          if (a < c) {
            c = a;
          } else if (c < a) {
            a = c;
          }
          if (this.floorToEven && a % 2 == 1) {
            --a;
            c = a;
          }
          if (this.baseTileSize > 0) {
            c = a = (a / this.baseTileSize | 0) * this.baseTileSize;
          }
          b = a;
          a = c;
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = da.pool.get().set(b, a);
          b._inPool = false;
          return b;
        },
        resize: function (a, b) {
          this.makeTiles(this.tileWidth, this.tileHeight, this._tilesWide, this._tilesTall, this._color1, this._color2);
        },
        __class__: hj
      });
      function Nd(a, b, c, d) {
        db.call(this, 0, 0);
        if (c == null) {
          c = new Ig(0, 0, "left", "top", "right", "top");
        }
        d = Nd.styleFix(d);
        this.refresh(a, b, "", "", c, d);
        this.setScrollFactor(0, 0);
      }
      h["flixel.addons.ui.FlxUITooltip"] = Nd;
      Nd.__name__ = "flixel.addons.ui.FlxUITooltip";
      Nd.styleFix = function (a, b) {
        if (a == null) {
          a = {
            titleFormat: null,
            bodyFormat: null,
            titleBorder: null,
            bodyBorder: null,
            titleOffset: null,
            bodyOffset: null,
            background: null,
            borderSize: -1,
            borderColor: null,
            arrow: null,
            titleWidth: -1,
            bodyWidth: -1,
            autoSizeHorizontal: null,
            autoSizeVertical: null,
            leftPadding: -1,
            rightPadding: -1,
            topPadding: -1,
            bottomPadding: -1
          };
        }
        if (b != null) {
          if (a.titleFormat == null) {
            a.titleFormat = b.titleFormat;
          }
          if (a.bodyFormat == null) {
            a.bodyFormat = b.bodyFormat;
          }
          if (a.titleBorder == null) {
            a.titleBorder = b.titleBorder;
          }
          if (a.bodyBorder == null) {
            a.bodyBorder = b.bodyBorder;
          }
          if (a.titleOffset == null) {
            a.titleOffset = b.titleOffset;
          }
          if (a.bodyOffset == null) {
            a.bodyOffset = b.bodyOffset;
          }
          if (a.background == null) {
            a.background = b.background;
          }
          if (a.borderColor == null) {
            a.borderColor = b.borderColor;
          }
          if (a.arrow == null) {
            a.arrow = b.arrow;
          }
          if (a.borderSize == null || a.borderSize < 0) {
            a.borderSize = b.borderSize;
          }
          if (a.titleWidth == null || a.titleWidth < 0) {
            a.titleWidth = b.titleWidth;
          }
          if (a.bodyWidth == null || a.bodyWidth < 0) {
            a.bodyWidth = b.bodyWidth;
          }
          if (a.autoSizeHorizontal == null) {
            a.autoSizeHorizontal = b.autoSizeHorizontal;
          }
          if (a.autoSizeVertical == null) {
            a.autoSizeVertical = b.autoSizeVertical;
          }
          if (a.leftPadding == null || a.leftPadding < 0) {
            a.leftPadding = b.leftPadding;
          }
          if (a.rightPadding == null || a.rightPadding < 0) {
            a.rightPadding = b.rightPadding;
          }
          if (a.topPadding == null || a.topPadding < 0) {
            a.topPadding = b.topPadding;
          }
          if (a.leftPadding == null || a.bottomPadding < 0) {
            a.bottomPadding = b.bottomPadding;
          }
        }
        if (b != null) {
          if (a.titleFormat != null) {
            Nd.fillFontDefNulls(a.titleFormat, b.titleFormat);
            if (a.titleFormat.format != null && b.titleFormat.format != null) {
              Nd.fillFormatNulls(a.titleFormat.format, b.titleFormat.format);
            }
          }
          if (a.bodyFormat != null) {
            Nd.fillFontDefNulls(a.bodyFormat, b.bodyFormat);
            if (a.bodyFormat.format != null && b.bodyFormat.format != null) {
              Nd.fillFormatNulls(a.bodyFormat.format, b.bodyFormat.format);
            }
          }
        }
        if (a.titleFormat == null) {
          a.titleFormat = new md(null, null, null, new ld(null, 8, -16777216), null);
        }
        if (a.bodyFormat == null) {
          a.bodyFormat = new md(null, null, null, new ld(null, 8, -16777216), null);
        }
        if (a.titleBorder == null) {
          a.titleBorder = new af(cb.NONE, 0, 0, 1);
        }
        if (a.bodyBorder == null) {
          a.bodyBorder = new af(cb.NONE, 0, 0, 1);
        }
        if (a.titleOffset == null) {
          var c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = da.pool.get().set(b, c);
          b._inPool = false;
          a.titleOffset = b;
        }
        if (a.bodyOffset == null) {
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = da.pool.get().set(b, c);
          b._inPool = false;
          a.bodyOffset = b;
        }
        if (a.background == null) {
          a.background = 16777162;
        }
        if (a.borderColor == null) {
          a.borderColor = -16777216;
        }
        if (a.arrow == null) {
          a.arrow = "flixel/flixel-ui/img/tooltip_arrow.png";
        }
        if (a.borderSize == null || a.borderSize < 0) {
          a.borderSize = 1;
        }
        if (a.titleWidth == null || a.titleWidth < 0) {
          a.titleWidth = 100;
        }
        if (a.bodyWidth == null || a.bodyWidth < 0) {
          a.bodyWidth = 100;
        }
        if (a.autoSizeHorizontal == null) {
          a.autoSizeHorizontal = true;
        }
        if (a.autoSizeVertical == null) {
          a.autoSizeVertical = true;
        }
        if (a.leftPadding == null || a.leftPadding < 0) {
          a.leftPadding = 0;
        }
        if (a.rightPadding == null || a.rightPadding < 0) {
          a.rightPadding = 0;
        }
        if (a.topPadding == null || a.topPadding < 0) {
          a.topPadding = 0;
        }
        if (a.leftPadding == null || a.bottomPadding < 0) {
          a.bottomPadding = 0;
        }
        return a;
      };
      Nd.cloneStyle = function (a) {
        var b = a.titleFormat != null ? a.titleFormat.clone() : null;
        var c = a.bodyFormat != null ? a.bodyFormat.clone() : null;
        var d = a.borderSize;
        var e = a.titleWidth;
        var f = a.bodyWidth;
        var k = a.background;
        var t = a.borderColor;
        var g = a.arrow;
        var J = a.titleOffset;
        var h = null;
        if (h == null) {
          var m = 0;
          var p = 0;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          m = da.pool.get().set(m, p);
          m._inPool = false;
          h = m;
        }
        m = J.x;
        p = J.y;
        if (p == null) {
          p = 0;
        }
        if (m == null) {
          m = 0;
        }
        h.set_x(m);
        h.set_y(p);
        J = a.bodyOffset;
        var n = null;
        if (n == null) {
          p = m = 0;
          if (p == null) {
            p = 0;
          }
          if (m == null) {
            m = 0;
          }
          m = da.pool.get().set(m, p);
          m._inPool = false;
          n = m;
        }
        m = J.x;
        p = J.y;
        if (p == null) {
          p = 0;
        }
        if (m == null) {
          m = 0;
        }
        n.set_x(m);
        n.set_y(p);
        return {
          titleFormat: b,
          bodyFormat: c,
          borderSize: d,
          titleWidth: e,
          bodyWidth: f,
          background: k,
          borderColor: t,
          arrow: g,
          titleOffset: h,
          bodyOffset: n,
          titleBorder: a.titleBorder.clone(),
          bodyBorder: a.bodyBorder.clone(),
          autoSizeVertical: a.autoSizeVertical,
          autoSizeHorizontal: a.autoSizeHorizontal,
          leftPadding: a.leftPadding,
          rightPadding: a.rightPadding,
          topPadding: a.topPadding,
          bottomPadding: a.bottomPadding
        };
      };
      Nd.fillFontDefNulls = function (a, b) {
        if (a.get_size() == 0) {
          a.set_size(b.get_size());
        }
        if (a.name == null || a.name == "") {
          a.name = b.name;
        }
        if (a.file == null || a.file == "") {
          a.file = b.file;
        }
        if (a.extension == null || a.extension == "") {
          a.extension = b.extension;
        }
        if (a.border == null) {
          a.border = b.border != null ? b.border.clone() : null;
        }
      };
      Nd.fillFormatNulls = function (a, b) {
        if (a.align == null) {
          a.align = b.align;
        }
        if (a.blockIndent == null) {
          a.blockIndent = b.blockIndent;
        }
        if (a.bold == null) {
          a.bold = b.bold;
        }
        if (a.bullet == null) {
          a.bullet = b.bullet;
        }
        if (a.color == null) {
          a.color = b.color;
        }
        if (a.font == null) {
          a.font = b.font;
        }
        if (a.indent == null) {
          a.indent = b.indent;
        }
        if (a.italic == null) {
          a.italic = b.italic;
        }
        if (a.kerning == null) {
          a.kerning = b.kerning;
        }
        if (a.leading == null) {
          a.leading = b.leading;
        }
        if (a.leftMargin == null) {
          a.leftMargin = b.leftMargin;
        }
        if (a.letterSpacing == null) {
          a.letterSpacing = b.letterSpacing;
        }
        if (a.rightMargin == null) {
          a.rightMargin = b.rightMargin;
        }
        if (a.size == null) {
          a.size = b.size;
        }
        if (a.tabStops == null) {
          a.tabStops = b.tabStops;
        }
        if (a.target == null) {
          a.target = b.target;
        }
        if (a.underline == null) {
          a.underline = b.underline;
        }
        if (a.url == null) {
          a.url = b.url;
        }
      };
      Nd.__super__ = db;
      Nd.prototype = q(db.prototype, {
        show: function (a, b, c, d, e, f) {
          if (f == null) {
            f = true;
          }
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = "";
          }
          if (b == null) {
            b = "";
          }
          this.set_visible(true);
          this.set_active(true);
          this.set_x(0);
          this.set_y(0);
          this._bkg.set_x(0);
          this._bkg.set_y(0);
          this._arrow.set_x(0);
          this._arrow.set_y(0);
          this._arrowBkg.set_x(0);
          this._arrowBkg.set_y(0);
          this._arrowBkg = this.makeArrowBkg(this._arrowBkg);
          this._arrow.set_color(this.style.background);
          this._arrow.set_visible(this._arrowBkg.set_visible(f));
          if (this.style.titleWidth > 0) {
            this._titleText.set_width(this._titleText.textField.set_width(this.style.titleWidth) | 0);
          }
          if (this.style.bodyWidth > 0) {
            this._bodyText.set_width(this._bodyText.textField.set_width(this.style.bodyWidth) | 0);
          }
          if (this.style.titleFormat != null) {
            this.style.titleFormat.apply(null, this._titleText);
          }
          if (this.style.bodyFormat != null) {
            this.style.bodyFormat.apply(null, this._bodyText);
          }
          if (this.style.titleBorder != null) {
            this.style.titleBorder.apply(this._titleText);
          }
          if (this.style.bodyBorder != null) {
            this.style.bodyBorder.apply(this._bodyText);
          }
          this._titleText.set_text(b);
          this._bodyText.set_text(c);
          this._titleText.update(0);
          this._bodyText.update(0);
          b = this._titleText.textField.get_textHeight() + 4 | 0;
          if (this.style.titleOffset != null) {
            this._titleText.set_x(this.style.titleOffset.x | 0);
            this._titleText.set_y(this.style.titleOffset.y | 0);
          }
          if (this.style.bodyOffset != null) {
            this._bodyText.set_x(this.style.bodyOffset.x | 0);
            this._bodyText.set_y(this._titleText.y + b + this.style.bodyOffset.y | 0);
          }
          f = this._bkg.get_width() | 0;
          c = this._bkg.get_height() | 0;
          if (e) {
            e = this._titleText.text != "" ? this._titleText.x + this._titleText.get_width() : 0;
            f = this._bodyText.text != "" ? this._bodyText.x + this._bodyText.get_width() : 0;
            f = Math.max(e, f) | 0;
          }
          if (d) {
            c = this._titleText.text != "" ? this._titleText.y + this._titleText.get_height() : 0;
            d = this._bodyText.text != "" ? this._bodyText.y + this._bodyText.get_height() : 0;
            c = Math.max(c, d) | 0;
            c = Math.max(c, this._arrowBkg.get_height()) | 0;
          }
          if (this.style.leftPadding == null) {
            this.style.leftPadding = 0;
          }
          if (this.style.rightPadding == null) {
            this.style.rightPadding = 0;
          }
          if (this.style.topPadding == null) {
            this.style.topPadding = 0;
          }
          if (this.style.bottomPadding == null) {
            this.style.bottomPadding = 0;
          }
          f += this.style.leftPadding + this.style.rightPadding;
          c += this.style.topPadding + this.style.bottomPadding;
          c |= 0;
          this.refreshBkg(f | 0, c, this.style);
          d = this._anchorArrow.x.offset | 0;
          e = this._anchorArrow.y.offset | 0;
          this._anchorArrow.x.offset -= this.anchor.x.offset;
          this._anchorArrow.y.offset += this.anchor.y.offset;
          this._anchorArrow.x.offset |= 0;
          this._anchorArrow.y.offset |= 0;
          this._anchorArrow.anchorThing(this._arrow, this._bkg);
          this._anchorArrow.x.offset = d;
          this._anchorArrow.y.offset = e;
          if (this._arrow.x < 0) {
            e = Math.abs(this._arrow.x) | 0;
            d = this._bkg;
            d.set_x(d.x + e);
            d = this._titleText;
            d.set_x(d.x + e);
            d = this._bodyText;
            d.set_x(d.x + e);
            this._arrow.set_x(0);
          }
          if (this._arrow.y < 0) {
            e = Math.abs(this._arrow.y) | 0;
            d = this._bkg;
            d.set_y(d.y + e);
            d = this._titleText;
            d.set_y(d.y + e);
            d = this._bodyText;
            d.set_y(d.y + e);
            this._arrow.set_y(0);
          }
          if (this._titleText.text != "" && this._bodyText.text == "") {
            c -= this.style.topPadding + this.style.bottomPadding;
            d = this._titleText;
            d.set_y(d.y + ((c - b) / 2 | 0));
          }
          d = this._titleText;
          d.set_x(d.x + this.style.leftPadding);
          d = this._bodyText;
          d.set_x(d.x + this.style.leftPadding);
          d = this._titleText;
          d.set_y(d.y + this.style.topPadding);
          d = this._bodyText;
          d.set_y(d.y + this.style.topPadding);
          if (this._titleText.text == "") {
            this._titleText.set_x(this._bkg.x);
            this._titleText.set_y(this._bkg.y);
            this._titleText.set_width(this._bkg.get_width());
          }
          if (this._bodyText.text == "") {
            this._bodyText.set_x(this._bkg.x);
            this._bodyText.set_y(this._bkg.y);
            this._bodyText.set_width(this._bkg.get_width());
          }
          this.anchor.anchorThing(this, a);
          this.set_x(this.x | 0);
          this.set_y(this.y | 0);
          this._arrowBkg.set_x(this._arrow.x - this.style.borderSize | 0);
          this._arrowBkg.set_y(this._arrow.y - this.style.borderSize | 0);
          this._titleText.set_x(this._titleText.x | 0);
          this._bodyText.set_x(this._bodyText.x | 0);
          this._bkg.set_x(this._bkg.x | 0);
          this._bkg.set_y(this._bkg.y | 0);
          this._arrowBkg.set_x(this._arrowBkg.x | 0);
          this._arrowBkg.set_y(this._arrowBkg.y | 0);
          this._arrow.set_x(this._arrow.x | 0);
          this._arrow.set_y(this._arrow.y | 0);
        },
        get_height: function () {
          if (this.group.length == 0) {
            return 0;
          }
          var a = Infinity;
          var b = -Infinity;
          for (var c = 0, d = this.group.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null && !(e instanceof R)) {
              var f = e.y;
              e = f + e.get_height();
              if (e > b) {
                b = e;
              }
              if (f < a) {
                a = f;
              }
            }
          }
          return b - a;
        },
        hide: function () {
          this.set_visible(false);
          this.set_active(false);
        },
        set_anchor: function (a) {
          this.anchor = a;
          this._anchorArrow = this.getArrowAnchor(a, this._anchorArrow);
          if (this._arrowBkg != null) {
            this.makeArrowBkg(this._arrowBkg);
          }
          return a;
        },
        set_style: function (a) {
          return this.style = a;
        },
        refresh: function (a, b, c, d, e, f) {
          var k = this._bkg == null;
          var t = this._arrow == null;
          var l = this._titleText == null;
          var J = this._bodyText == null;
          if (k) {
            this._bkg = new G();
          }
          if (t) {
            this._arrow = new G();
          }
          if (l) {
            this._titleText = new Wd(0, 0, a);
            if (f.titleFormat != null) {
              f.titleFormat.apply(null, this._titleText);
            }
            if (f.titleBorder != null) {
              f.titleBorder.apply(this._titleText);
            }
          }
          if (J) {
            this._bodyText = new Wd(0, 0, a);
            if (f.bodyFormat != null) {
              f.bodyFormat.apply(null, this._bodyText);
            }
            if (f.bodyBorder != null) {
              f.bodyBorder.apply(this._bodyText);
            }
          }
          this._titleText.set_text(c);
          this._bodyText.set_text(d);
          this._arrow.set_color(f.background);
          c = g.bitmap.add(f.arrow);
          if (f.arrow == null) {
            f.arrow = "flixel/flixel-ui/img/tooltip_arrow.png";
            g.bitmap.add(f.arrow);
          }
          this._arrow.loadGraphic(f.arrow, true, c.height, c.height);
          if (t) {
            this._arrow.animation.add("right", [0], 0, false);
            this._arrow.animation.add("down", [1], 0, false);
            this._arrow.animation.add("left", [2], 0, false);
            this._arrow.animation.add("up", [3], 0, false);
          }
          this.refreshBkg(a, b, f);
          this.set_style(f);
          if (t && f.borderSize > 0) {
            this._arrowBkg = new G();
            this.add(this._arrowBkg);
          }
          this.set_anchor(e);
          if (k) {
            this.add(this._bkg);
          }
          if (t) {
            this.add(this._arrow);
          }
          if (l) {
            this.add(this._titleText);
          }
          if (J) {
            this.add(this._bodyText);
          }
        },
        refreshBkg: function (a, b, c) {
          var d = this.getStyleKey(a, b, c);
          if (g.bitmap._cache.h[d] == null) {
            if (c.borderSize > 0) {
              var e = new N(a, b, false, c.borderColor);
              e.fillRect(new ba(c.borderSize, c.borderSize, a - c.borderSize * 2, b - c.borderSize * 2), c.background);
            } else {
              e = new N(a, b, false, c.background);
            }
            g.bitmap.add(e, true, d);
          }
          this._bkg.loadGraphic(d);
        },
        getStyleKey: function (a, b, c) {
          var d = c.background;
          a = a + "," + b + "," + ("0x" + v.hex(d >> 24 & 255, 2) + v.hex(d >> 16 & 255, 2) + v.hex(d >> 8 & 255, 2) + v.hex(d & 255, 2)) + "," + c.borderSize + ",";
          d = c.borderColor;
          return a + ("0x" + v.hex(d >> 24 & 255, 2) + v.hex(d >> 16 & 255, 2) + v.hex(d >> 8 & 255, 2) + v.hex(d & 255, 2));
        },
        makeArrowBkg: function (a) {
          if (a == null) {
            a = new G();
          }
          var b = "arrowBkg:" + this.style.background + "," + this.style.borderSize + "," + this.style.borderColor + "," + (this._arrow == null ? "null" : this._arrow.animation._curAnim == null ? "null" : this._arrow.animation._curAnim.name);
          if (g.bitmap._cache.h[b] == null) {
            var c = this.style.borderSize;
            if (c < 0 || c == null) {
              c = 0;
            }
            var d = this._arrow.get_width() + c | 0;
            c = this._arrow.get_height() + c | 0;
            d = new N(d, c, true, 0);
            g.bitmap.add(d, false, b);
            a.loadGraphic(b);
            d = this._arrow.color;
            this._arrow.set_color(this.style.borderColor);
            new ya().identity();
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize * 0);
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize);
            a.stamp(this._arrow, this.style.borderSize * 0, this.style.borderSize * 2);
            a.stamp(this._arrow, this.style.borderSize, this.style.borderSize * 2);
            a.stamp(this._arrow, this.style.borderSize * 2, this.style.borderSize * 2);
            this._arrow.set_color(d);
          }
          a.loadGraphic(b);
          return a;
        },
        getArrowAnchor: function (a, b) {
          var c = a.x.side == "left" && a.x.flush == "right" || a.x.side == "right" && a.x.flush == "left";
          var d = a.y.side == "top" && a.y.flush == "bottom" || a.y.side == "bottom" && a.y.flush == "top";
          var e = a.x.side == "left" && a.x.flush == "left" || a.x.side == "right" && a.x.flush == "right";
          var f = a.y.side == "top" && a.y.flush == "top" || a.y.side == "bottom" && a.y.flush == "bottom";
          var k = e && f;
          var t = this.style.borderSize;
          if (!c || !d) {
            if (c) {
              b = a.getFlipped(true, false, b);
              if (b.x.flush == "left") {
                b.x.offset -= t;
                this._arrow.animation.play("right");
              }
              if (b.x.flush == "right") {
                b.x.offset += t;
                this._arrow.animation.play("left");
              }
            }
            if (d) {
              b = a.getFlipped(false, true, b);
              if (b.y.flush == "top") {
                b.y.offset -= t;
                this._arrow.animation.play("down");
              }
              if (b.y.flush == "bottom") {
                b.y.offset += t;
                this._arrow.animation.play("up");
              }
            }
          }
          if (!k) {
            if (e) {
              if (b.x.flush == "left") {
                b.x.offset += t;
              }
              if (b.x.flush == "right") {
                b.x.offset -= t;
              }
            }
            if (f) {
              if (b.y.flush == "top") {
                b.y.offset += t;
              }
              if (b.y.flush == "bottom") {
                b.y.offset -= t;
              }
            }
          }
          return b ?? a;
        },
        __class__: Nd,
        __properties__: q(db.prototype.__properties__, {
          set_anchor: "set_anchor",
          set_style: "set_style"
        })
      });
      function Wi(a, b) {
        this.current = -1;
        this._init = false;
        this.delay = 0.1;
        this.defaultAnchor = this.fixedPosition = this.defaultStyle = null;
        this.autoFlipAnchor = true;
        if (a != null) {
          this.state = a;
        } else if (b != null) {
          this.subState = b;
        }
        this.list = [];
        this.tooltip = new Nd(100, 50);
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        this.lastPosition = a;
        this.defaultAnchor = this.tooltip.anchor.clone();
        this.defaultStyle = Nd.cloneStyle(this.tooltip.style);
      }
      h["flixel.addons.ui.FlxUITooltipManager"] = Wi;
      Wi.__name__ = "flixel.addons.ui.FlxUITooltipManager";
      Wi.__interfaces__ = [ub];
      Wi.prototype = {
        init: function () {
          var a = this.state != null ? this.state._ui : this.subState != null ? this.subState._ui : null;
          if (a != null && a != null && a.getDefinition("default:tooltip") != null) {
            a = a._loadTooltipData(null);
            this.defaultStyle = Nd.cloneStyle(a.style);
            this.tooltip.set_style(this.defaultStyle);
          }
        },
        destroy: function () {
          ca.destroyArray(this.list);
          this.defaultStyle = this.defaultAnchor = this.subState = this.state = this.lastPosition = this.tooltip = this.list = null;
        },
        add: function (a, b) {
          if (this._init) {
            b.style = Nd.styleFix(b.style, this.defaultStyle);
          }
          if (wa.__implements(a, Mg)) {
            var c = a;
            var d = this.findBtn(c);
            if (d == -1) {
              this.list.push(new qj(c, b));
            } else {
              this.list[d].data = b;
              this.list[d].count = 0;
            }
          } else {
            d = this.findObj(a);
            if (d == -1) {
              c = new rd(0, 0, "", null, false, true);
              c.resize(a.get_width(), a.get_height());
              c.set_x(a.x);
              c.set_y(a.y);
              c.set_width(a.get_width());
              c.set_height(a.get_height());
              d = c.scrollFactor;
              var e = a.scrollFactor.x;
              var f = a.scrollFactor.y;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(f);
              if (this.state != null) {
                this.state.add(c);
              } else if (this.subState != null) {
                this.subState.add(c);
              }
              this.list.push(new qj(c, b, a));
            } else {
              this.list[d].data = b;
              this.list[d].count = 0;
              this.list[d].btn.set_x(a.x);
              this.list[d].btn.set_y(a.y);
              this.list[d].btn.set_width(a.get_width());
              this.list[d].btn.set_height(a.get_height());
              d = this.list[d].btn.scrollFactor;
              e = a.scrollFactor.x;
              f = a.scrollFactor.y;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(f);
            }
          }
        },
        update: function (a) {
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            var e = this.list[d].btn;
            var f = this.list[d].obj;
            if (this.list[d].enabled == 0) {
              if (this.current == d) {
                this.hide(d);
              }
              this.list[d].count = 0;
            } else {
              if (f != null) {
                e.set_x(f.x);
                e.set_y(f.y);
                e.set_width(f.get_width());
                e.set_height(f.get_height());
                e.set_visible(f.visible);
              }
              if (this.list[d].sticky == 0 && (e.visible == 0 || e.get_justMousedOut() || e.get_mouseIsOut())) {
                this.list[d].count = 0;
                this.hide(d);
              } else if ((e.get_justMousedOver() || e.get_mouseIsOver()) && e.get_mouseIsOver()) {
                this.list[d].count += a;
              }
              if (this.list[d].count > this.delay || this.list[d].data.delay >= 0 && this.list[d].count > this.list[d].data.delay) {
                if (this.current != d) {
                  this.show(d);
                } else if (this.list[d].data.moving) {
                  this.show(d);
                }
              }
            }
          }
        },
        hide: function (a) {
          if (this.current == a) {
            this.tooltip.hide();
            if (this.state != null) {
              this.state.remove(this.tooltip, true);
            }
            if (this.subState != null) {
              this.subState.remove(this.tooltip, true);
            }
            this.current = -1;
          }
        },
        findBtn: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            if (this.list[d] != null && this.list[d].btn == a) {
              return d;
            }
          }
          return -1;
        },
        findObj: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = this.list.length; b < c;) {
            var d = b++;
            if (this.list[d] != null && this.list[d].obj == a) {
              return d;
            }
          }
          return -1;
        },
        show: function (a) {
          if (!(a < 0) && !(a >= this.list.length)) {
            var b = this.list[a].btn;
            if (b.visible != 0 && (this.list[a].obj == null || this.list[a].obj.visible != 0)) {
              if (this.current == a) {
                a = b.x - this.lastPosition.x;
                var c = b.y - this.lastPosition.y;
                this.lastPosition.set_x(b.x);
                this.lastPosition.set_y(b.y);
                b = this.tooltip;
                b.set_x(b.x + a);
                b = this.tooltip;
                b.set_y(b.y + c);
              } else {
                this.current = a;
                a = this.list[a].data;
                if (a.init != 1) {
                  a.style = Nd.styleFix(a.style, this.defaultStyle);
                  a.init = true;
                }
                var d = c = true;
                if (a.style != null) {
                  this.tooltip.set_style(a.style);
                  c = a.style.autoSizeVertical;
                  d = a.style.autoSizeHorizontal;
                }
                if (a.anchor != null) {
                  this.tooltip.set_anchor(a.anchor);
                } else if (this.defaultAnchor != null) {
                  this.tooltip.set_anchor(this.defaultAnchor);
                }
                if (this.state != null) {
                  this.state.add(this.tooltip);
                }
                if (this.subState != null) {
                  this.subState.add(this.tooltip);
                }
                this.tooltip.show(b, a.title, a.body, c, d);
                if (this.fixedPosition != null) {
                  this.fixedPosition.anchor.anchorThing(this.tooltip, this.fixedPosition.object);
                }
                if (this.autoFlipAnchor && this.checkAutoFlip(this.tooltip, this.fixedPosition != null ? this.fixedPosition.anchor : null)) {
                  if (this.fixedPosition != null) {
                    this.fixedPosition.anchor.anchorThing(this.tooltip, this.fixedPosition.object);
                  } else {
                    this.tooltip.show(b, a.title, a.body, c, d, this.showTooltipArrow);
                  }
                }
                a = this.lastPosition;
                c = b.x;
                b = b.y;
                if (b == null) {
                  b = 0;
                }
                if (c == null) {
                  c = 0;
                }
                a.set_x(c);
                a.set_y(b);
                if (this.state != null) {
                  this.state.onShowTooltip(this.tooltip);
                } else if (this.subState != null) {
                  this.subState.onShowTooltip(this.tooltip);
                }
              }
            }
          }
        },
        checkAutoFlip: function (a, b) {
          var c = a.x < 0 || a.x + a.get_width() > g.width;
          var d = a.y < 0 || a.y + a.get_height() > g.height;
          if (c || d) {
            if (b == null) {
              b = a.anchor;
            }
            b.getFlipped(c, d, b);
            return true;
          } else {
            return false;
          }
        },
        __class__: Wi
      };
      function qj(a, b, c) {
        this.sticky = false;
        this.btn = a;
        this.data = b;
        this.obj = c;
        this.count = 0;
        this.enabled = true;
        if (this.data != null) {
          if (this.data.delay == null) {
            this.data.delay = -1;
          }
          if (this.data.moving == null) {
            this.data.moving = false;
          }
        }
      }
      h["flixel.addons.ui._FlxUITooltipManager.FlxUITooltipEntry"] = qj;
      qj.__name__ = "flixel.addons.ui._FlxUITooltipManager.FlxUITooltipEntry";
      qj.__interfaces__ = [ub];
      qj.prototype = {
        destroy: function () {
          this.count = 0;
          this.btn = this.obj = null;
          this.data.anchor = null;
          this.data = this.data.style = null;
        },
        __class__: qj
      };
      function md(a, b, c, d, e) {
        if (c == null) {
          c = "";
        }
        if (b == null) {
          b = ".ttf";
        }
        this._size = 0;
        this.name = a;
        this.extension = b;
        this.file = c;
        this.format = d;
        if (this.format == null) {
          this.format = new ld();
        }
        this.border = e;
        if (this.border == null) {
          this.border = new af(cb.NONE, 0);
        }
      }
      h["flixel.addons.ui.FontDef"] = md;
      md.__name__ = "flixel.addons.ui.FontDef";
      md.copyFromTextField = function (a) {
        a = a.get_defaultTextFormat();
        var b = new md("");
        b.fromStr(a.font);
        b.format.font = a.font;
        b.format.size = a.size;
        b.format.color = a.color;
        b.format.bold = a.bold;
        b.format.italic = a.italic;
        b.format.underline = a.underline;
        b.format.url = a.url;
        b.format.letterSpacing = a.letterSpacing;
        b.format.leading = a.leading;
        b.format.target = a.target;
        b.format.align = a.align;
        return b;
      };
      md.copyFromFlxText = function (a) {
        var b = md.copyFromTextField(a.textField);
        b.fromStr(a._font);
        b.border.style = a.borderStyle;
        b.border.color = a.borderColor;
        b.border.quality = a.borderQuality;
        b.border.size = a.borderSize;
        return b;
      };
      md.fromXML = function (a) {
        var b = D.xml_str(a, "font");
        var c = D.xml_str(a, "style");
        var d = null;
        if (b != "") {
          d = Ma.font(b, c);
        }
        c = D.xml_str(a, "style");
        b = Ma.fontSize(d, D.xml_i(a, "size", 8));
        var e = D.xml_color(a, "color", true, -1);
        switch (D.xml_str(a, "align").toLowerCase()) {
          case "center":
            var f = 0;
            break;
          case "justify":
            f = 2;
            break;
          case "left":
            f = 3;
            break;
          case "right":
            f = 4;
            break;
          default:
            f = 3;
        }
        d = new md(D.xml_str(a, "font"), ".ttf", d);
        d.format.color = e;
        d.format.size = b;
        d.format.align = f;
        d.set_size(b);
        d.setFontStyle(c);
        d.border = af.fromXML(a);
        return d;
      };
      md.prototype = {
        get_size: function () {
          if (this.format != null) {
            this._size = this.format.size | 0;
          }
          return this._size;
        },
        set_size: function (a) {
          if (this.format != null) {
            this.format.size = a;
          }
          return this._size = a;
        },
        clone: function () {
          var a = this.border == null ? null : this.border.clone();
          var b = this.format == null ? null : new ld(this.format.font, this.format.size, this.format.color, this.format.bold, this.format.italic, this.format.underline, this.format.url, this.format.target, this.format.align, this.format.leftMargin, this.format.rightMargin, this.format.indent, this.format.leading);
          if (this.format != null) {
            b.letterSpacing = this.format.letterSpacing;
          }
          a = new md(this.name, this.extension, this.file, b, a);
          a.set_size(this.get_size());
          return a;
        },
        applyFlx: function (a) {
          var b = null;
          if (this.format.align != null) {
            switch (this.format.align) {
              case 0:
                b = "center";
                break;
              case 2:
                b = "justify";
                break;
              case 3:
                b = "left";
                break;
              case 4:
                b = "right";
                break;
              default:
                b = "left";
            }
          }
          a.setFormat(this.file == "" || this.file == null ? null : this.file, this.format.size | 0, this.format.color, b, this.border.style, this.border.color);
          a.textField.get_defaultTextFormat().leading = this.format.leading;
          a.textField.get_defaultTextFormat().letterSpacing = this.format.letterSpacing;
          return a;
        },
        apply: function (a, b) {
          if (a != null) {
            a.setTextFormat(this.format);
          }
          if (b != null) {
            this.applyFlx(b);
          }
        },
        fromStr: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (!(b > 3)) {
            a = ke.fix(a);
            var c = this.getFontStyle(a);
            this.setFontStyle(c);
            var d = "";
            for (var e = 0, f = md.EXTENSIONS; e < f.length;) {
              var k = f[e];
              ++e;
              if (a.indexOf(k) != -1 && U.exists(a + d, "FONT")) {
                this.name = v.replace(a, d, "");
                this.file = a;
                d = k;
                break;
              }
            }
            if (d == "") {
              e = 0;
              for (f = md.EXTENSIONS; e < f.length;) {
                k = f[e];
                ++e;
                if (U.exists(a + k, "FONT")) {
                  d = k;
                  this.name = a;
                  this.file = a + d;
                  break;
                }
              }
              this.setFontStyle(c);
            } else {
              a = this.stripFontExtensions(a);
              if (this.getFontStyle(a) != "") {
                a = L.substr(a, a.length - 1, 1);
              }
              this.fromStr(a, b + 1);
            }
          }
        },
        stripFontExtensions: function (a) {
          if (a == null) {
            return a;
          }
          for (var b = 0, c = md.EXTENSIONS; b < c.length;) {
            var d = c[b];
            ++b;
            if (a != null && a.indexOf(d) != -1) {
              a = v.replace(a, d, "");
            }
          }
          return a;
        },
        getFontExtension: function (a) {
          if (a == null) {
            return "";
          }
          for (var b = 0, c = md.EXTENSIONS; b < c.length;) {
            var d = c[b];
            ++b;
            if (a.indexOf(d) != -1) {
              return d;
            }
          }
          return a;
        },
        fixFontName: function () {
          var a = this.getFontStyle(this.file);
          var b = this.getFontExtension(this.file);
          var c = this.stripFontExtensions(this.file);
          if (a != "") {
            c = L.substr(c, 0, c.length - 1);
          }
          a = "";
          if (this.format.bold && this.format.italic) {
            a = "z";
          } else if (this.format.bold) {
            a = "b";
          } else if (this.format.italic) {
            a = "i";
          }
          this.file = c + a + b;
        },
        getFontStyle: function (a) {
          if (a == null) {
            return "";
          }
          a = this.stripFontExtensions(a);
          a = L.substr(a, a.length - 1, 1);
          if (a != "" && a != null) {
            a = a.toLowerCase();
            switch (a) {
              case "b":
                return "b";
              case "i":
                return "i";
              case "z":
                return "z";
            }
          }
          return "";
        },
        setFontStyle: function (a) {
          a = a.toLowerCase();
          switch (a) {
            case "b":
            case "bold":
              this.format.bold = true;
              this.format.italic = false;
              break;
            case "all":
            case "bi":
            case "bold-italic":
            case "bolditalic":
            case "both":
            case "ib":
            case "italicbold":
            case "z":
              this.format.bold = true;
              this.format.italic = true;
              break;
            case "i":
            case "italic":
              this.format.bold = false;
              this.format.italic = true;
              break;
            default:
              this.format.bold = false;
              this.format.italic = false;
          }
          this.fixFontName();
        },
        __class__: md,
        __properties__: {
          set_size: "set_size",
          get_size: "get_size"
        }
      };
      function ke() {}
      h["flixel.addons.ui.FontFixer"] = ke;
      ke.__name__ = "flixel.addons.ui.FontFixer";
      ke.init = function () {
        if (ke.name2File == null) {
          ke.name2File = new xa();
        }
      };
      ke.fix = function (a) {
        ke.init();
        if (a.indexOf(".ttf") == -1 && Object.prototype.hasOwnProperty.call(ke.name2File.h, a)) {
          a = ke.name2File.h[a];
        }
        return a;
      };
      ke.add = function (a, b) {
        if (b == null) {
          b = "";
        }
        ke.init();
        if (b != "" && Object.prototype.hasOwnProperty.call(ke.name2File.h, b)) {
          return ke.name2File.h[b];
        }
        if (!U.exists(a, "FONT")) {
          return a;
        }
        var c = U.getFont(a);
        if (c == null) {
          return a;
        }
        if (b == "") {
          b = c.name;
        }
        ke.name2File.h[b] = a;
        return ke.fix(a);
      };
      function Rk(a, b) {
        if (b == null) {
          b = "";
        }
        if (a == null) {
          a = "";
        }
        this.name = a;
        this.label = b;
      }
      h["flixel.addons.ui.StrNameLabel"] = Rk;
      Rk.__name__ = "flixel.addons.ui.StrNameLabel";
      Rk.prototype = {
        __class__: Rk
      };
      function D() {}
      h["flixel.addons.ui.U"] = D;
      D.__name__ = "flixel.addons.ui.U";
      D.xml_str = function (a, b, c, d) {
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (a.get(b) != null) {
          if (c) {
            return a.get(b).toLowerCase();
          } else {
            return a.get(b);
          }
        } else {
          return d;
        }
      };
      D.xml_name = function (a) {
        var b = D.xml_str(a, "name", true, "");
        if (b == "") {
          b = D.xml_str(a, "id", true, "");
        }
        return b;
      };
      D.xml_color = function (a, b, c, d) {
        c = null;
        a = D.xml_str(a, b, true);
        if (a != "") {
          b = Gb.fromString(a);
          if (b == null) {
            throw I.thrown("U.parseHex() unable to parse hex String " + a);
          }
          c = b;
        }
        if (c == null && d != null) {
          c = d;
        }
        return c;
      };
      D.xml_strArray = function (a, b, c, d) {
        if (c == null) {
          c = true;
        }
        a = D.xml_str(a, b, c);
        if (a != "") {
          return a.split(",");
        } else {
          return d;
        }
      };
      D.xml_colorArray = function (a, b, c) {
        a = D.xml_strArray(a, b);
        b = null;
        if (a != null && a.length > 0) {
          b = [];
          c = 0;
          for (var d = a.length; c < d;) {
            var e = c++;
            var f = a[e];
            var k = Gb.fromString(f);
            if (k == null) {
              throw I.thrown("U.parseHex() unable to parse hex String " + f);
            }
            b[e] = k;
          }
        }
        return b;
      };
      D.perc_to_float = function (a) {
        if (a.lastIndexOf("%") == a.length - 1) {
          a = L.substr(a, 0, a.length - 1);
          var b = new na("([0-9]+)?(\\.)?([0-9]*)?", "");
          if (b.match(a) && (b = b.matchedPos(), b.pos == 0 && b.len == a.length)) {
            return parseFloat(a) / 100;
          }
        }
        return NaN;
      };
      D.isStrNum = function (a) {
        if (a == null || a == "") {
          return false;
        }
        var b = new na("-?([0-9]+)?(\\.)?([0-9]*)?", "");
        if (b.match(a) && (b = b.matchedPos(), b.pos == 0 && b.len == a.length)) {
          return true;
        } else {
          return false;
        }
      };
      D.xml_f = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (a.get(b) != null) {
          return parseFloat(a.get(b));
        } else {
          return c;
        }
      };
      D.xml_i = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (a.get(b) != null) {
          return y.parseInt(a.get(b));
        } else {
          return c;
        }
      };
      D.xml_pt = function (a, b, c) {
        if (a.get(b) != null) {
          return D.pointify(a.get(b));
        } else {
          return c;
        }
      };
      D.boolify = function (a) {
        a = a.toLowerCase();
        if (a == "true" || a == "1") {
          return true;
        } else {
          return false;
        }
      };
      D.pointify = function (a) {
        var b = null;
        if (a != null) {
          for (var c = ["(", ")", " ", "=", ":"], d = 0; d < c.length;) {
            var e = c[d];
            for (++d; a.indexOf(e) != -1;) {
              a = v.replace(a, e, "");
            }
          }
          if (a.indexOf(",") == -1 && a.indexOf("x") != -1) {
            a = v.replace(a, "x", ",");
          }
          c = a.split(",");
          if (c.length == 2) {
            a = parseFloat(c[0]);
            c = parseFloat(c[1]);
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (a == null) {
              a = 0;
            }
            c = da.pool.get().set(a, c);
            c._inPool = false;
            b = c;
          }
        }
        return b;
      };
      D.compareStringVars = function (a, b, c, d) {
        if (d == null) {
          d = "==";
        }
        switch (c) {
          case "bool":
            a = D.boolify(a);
            b = D.boolify(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            break;
          case "float":
            a = parseFloat(a);
            b = parseFloat(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            if (d == "<") {
              return a < b;
            }
            if (d == ">") {
              return a > b;
            }
            if (d == "<=") {
              return a <= b;
            }
            if (d == ">=") {
              return a >= b;
            }
            break;
          case "int":
            a = y.parseInt(a);
            b = y.parseInt(b);
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
            if (d == "<") {
              return a < b;
            }
            if (d == ">") {
              return a > b;
            }
            if (d == "<=") {
              return a <= b;
            }
            if (d == ">=") {
              return a >= b;
            }
            break;
          case "string":
            if (d == "==" || d == "=") {
              return a == b;
            }
            if (d == "!==" || d == "!=") {
              return a != b;
            }
        }
        return false;
      };
      D.xml_bool = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (a.get(b) != null) {
          a = a.get(b);
          a = a.toLowerCase();
          if (a == "true" || a == "1") {
            return true;
          } else {
            return false;
          }
        } else {
          return c;
        }
      };
      D.conformToBounds = function (a, b) {
        if (b != null) {
          if (a.x < b.min_width) {
            a.x = b.min_width;
          }
          if (a.y < b.min_height) {
            a.y = b.min_height;
          }
          if (a.x > b.max_width) {
            a.x = b.max_width;
          }
          if (a.x > b.max_height) {
            a.y = b.max_height;
          }
        }
        return a;
      };
      D.applyResize = function (a, b, c, d, e) {
        if (e == null) {
          var f = 0;
          var k = 0;
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          e = f;
          if (k == null) {
            k = 0;
          }
          if (e == null) {
            e = 0;
          }
          k = da.pool.get().set(e, k);
          k._inPool = false;
          e = k;
        }
        if (a > 0 && Math.abs(c / d - a) > 0.0001) {
          if (b == 1) {
            d = 1 / a * c;
          } else {
            c = 1 / a * d;
          }
        }
        if ((c | 0) < 1) {
          c = 1;
        }
        if ((d | 0) < 1) {
          d = 1;
        }
        f = c;
        k = d;
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        e.set_x(f);
        e.set_y(k);
        return e;
      };
      D.xml = function (a, b, c, d) {
        if (d == null) {
          d = "assets/xml/";
        }
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = "xml";
        }
        if (a.indexOf("raw:") == 0 || a.indexOf("RAW:") == 0) {
          a = L.substr(a, 4, a.length - 4);
          d = "";
        }
        if (!U.exists(d + a + "." + b, "TEXT")) {
          return null;
        }
        a = U.getText(d + a + "." + b);
        if (a == null) {
          return null;
        }
        a = T.parse(a);
        if (c) {
          c = a.firstElement();
          if (c.nodeType != T.Document && c.nodeType != T.Element) {
            throw I.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : lb.toString(c.nodeType)));
          }
          return c;
        }
        return a.firstElement();
      };
      D.clearArraySoft = function (a) {
        if (a != null) {
          for (var b = a.length - 1; b >= 0;) {
            a[b] = null;
            a.splice(b, 1);
            --b;
          }
        }
      };
      D.clearArray = function (a) {
        if (a != null) {
          for (var b = a.length - 1; b >= 0;) {
            D.destroyThing(a[b]);
            a[b] = null;
            a.splice(b, 1);
            --b;
          }
        }
      };
      D.destroyThing = function (a) {
        if (a != null) {
          if (a instanceof Array) {
            D.clearArray(a);
          } else if (wa.__implements(a, ub)) {
            wa.__cast(a, ub).destroy();
          } else if (a instanceof Ca) {
            wa.__cast(a, Ca).destroy();
          }
        }
      };
      D.font = function (a, b, c) {
        if (c == null) {
          c = ".ttf";
        }
        if (b == null) {
          b = "";
        }
        var d = a;
        var e = b;
        if (e == null) {
          e = "";
        }
        e = e.toLowerCase();
        var f = "";
        switch (e) {
          case "":
          case "none":
          case "normal":
          case "regular":
            f = "";
            break;
          case "b":
          case "bold":
            f = "b";
            break;
          case "i":
          case "italic":
            f = "i";
            break;
          case "bi":
          case "bold-italic":
          case "boldi":
          case "bolditalic":
          case "ib":
          case "ibold":
          case "italic-bold":
          case "italicbold":
          case "z":
            f = "z";
        }
        a = a.indexOf("assets/fonts/") != 0 ? "assets/fonts/" + a + f : a + f;
        if (a.indexOf(c) == -1) {
          a += c;
        }
        a = ke.add(a);
        if (!U.exists(a, "FONT") && c == ".ttf" && (b = D.font(d, b, ".otf"), U.exists(b, "FONT"))) {
          return b;
        } else {
          return a;
        }
      };
      D.FU = function (a) {
        return L.substr(a, 0, 1).toUpperCase() + L.substr(a, 1, a.length - 1);
      };
      D.getBmp = function (a) {
        var b = null;
        if (typeof a == "string") {
          b = a;
        } else if (a instanceof cc) {
          b = a.key;
        } else if (a instanceof N) {
          return a;
        }
        if (g.bitmap._cache.h[b] != null && (a = g.bitmap._cache.h[b], a.bitmap != null)) {
          return a.bitmap;
        } else {
          return U.getBitmapData(b, false);
        }
      };
      D.checkHaxedef = function (a) {
        a = a.toLowerCase();
        switch (a) {
          case "html5":
            return true;
          case "js":
            return true;
          case "lime_next":
          case "next":
            return true;
          case "web":
            return true;
        }
        return false;
      };
      D.FU_ = function (a) {
        var b = a.split(" ");
        a = "";
        for (var c = 0, d = b.length; c < d;) {
          var e = c++;
          a += D.FU(b[e]);
          if (e != b.length - 1) {
            a += " ";
          }
        }
        return a;
      };
      D.scaleTileBmp = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = true;
        }
        if (f == null) {
          f = -1;
        }
        if (e == null) {
          e = -1;
        }
        var t = U.getBitmapData(a, false);
        if (t == null) {
          if (g.bitmap._cache.h[a] != null) {
            t = g.bitmap._cache.h[a].bitmap;
          } else {
            return null;
          }
        }
        a = t.width / c | 0;
        var l = t.height / d | 0;
        if (e == -1) {
          e = c * b | 0;
        }
        if (f == -1) {
          f = d * b | 0;
          b = f / d;
        }
        if (Math.abs(b - 1) > 0.001) {
          var J = new N(e * a | 0, f * l | 0, true, 0);
          var h = new ba();
          var m = new ob();
          var p = new ya();
          p.scale(b, b);
          for (b = 0; b < l;) {
            var n = b++;
            for (var q = 0, r = a; q < r;) {
              var w = q++;
              var u = new N(c, d, true, 0);
              h.setTo(w * c, n * d, c, d);
              m.setTo(0, 0);
              u.copyPixels(t, h, m);
              var v = new N(e, f, true, 0);
              v.draw(u, p, null, null, null, k);
              m.setTo(w * e, n * f);
              J.copyPixels(v, v.rect, m);
            }
          }
          return J;
        }
        return t.clone();
      };
      D.scaleAndStoreTileset = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = true;
        }
        if (f == null) {
          f = -1;
        }
        if (e == null) {
          e = -1;
        }
        var t = a + "_x" + b;
        if (g.bitmap._cache.h[t] != null == 0) {
          a = D.scaleTileBmp(a, b, c, d, e, f, k);
          g.bitmap.add(a, false, t);
        }
        return t;
      };
      D.loadScaledImage = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        var e = D.gfx(a);
        a = U.getBitmapData(e, false);
        if (a != null) {
          if (b < 0) {
            b = a.width;
          }
          if (c < 0) {
            c = a.height;
          }
          if (Math.abs(b - a.width) + Math.abs(c - a.height) > 0.01 && (e = e + "_" + (b | 0) + "x" + (c | 0), g.bitmap._cache.h[e] == null)) {
            var f = new N(b | 0, c | 0, true, 0);
            var k = D.getMatrix();
            k.identity();
            k.scale(b / a.width, c / a.height);
            f.draw(a, k, null, null, null, d);
            g.bitmap.add(f, true, e);
          }
          return e;
        }
        return null;
      };
      D.gfx = function (a, b, c, d, e, f) {
        if (e == null) {
          e = "";
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = "";
        }
        if (b == null) {
          b = "";
        }
        if (a != null) {
          a = a.toLowerCase();
        }
        f = "";
        if (b != "") {
          f = b + "/";
          if (c != "") {
            f += c + "/";
            if (d != "") {
              f += d + "/";
              if (e != "") {
                f += e + "/";
              }
            }
          }
        }
        if (f != "") {
          a = f + a;
        }
        if (a.indexOf("raw:") != 0) {
          a = v.replace(a, "-", "_");
        }
        return D.get_gfx(a);
      };
      D.get_gfx = function (a) {
        var b = "";
        var c = a.indexOf(".jpg") != -1 ? ".jpg" : ".png";
        if (a != null && a.length > 4 && a.indexOf(c) != -1) {
          a = L.substr(a, 0, a.length - 4);
        }
        if (a.indexOf("raw:") == 0 || a.indexOf("RAW:") == 0) {
          a = L.substr(a, 4, a.length - 4);
          b = a + c;
        }
        if (a != null && a.indexOf("assets/gfx/") == 0) {
          b = a + c;
        }
        if (b == "") {
          b = "assets/gfx/" + a + c;
        }
        if (b.indexOf(".stitch.txt" + c) != -1) {
          b = v.replace(b, ".stitch.txt" + c, ".stitch.txt");
        }
        return b;
      };
      D.unparentXML = function (a) {
        if (a.parent != null) {
          a.parent.removeChild(a);
        }
        return a;
      };
      D.setButtonLabel = function (a, b) {
        if (a != null) {
          if (a instanceof rd) {
            wa.__cast(a, rd).label.set_text(b);
          } else if (a instanceof cf && a.label != null && a.label instanceof Na) {
            var c = a.label;
            if (c.group.members != null) {
              a = 0;
              c = c.group.members;
              while (a < c.length) {
                var d = c[a];
                ++a;
                if (d != null && d instanceof R) {
                  wa.__cast(d, R).set_text(b);
                  break;
                }
              }
            }
          }
        }
      };
      D.getMatrix = function () {
        if (D._matrix == null) {
          D._matrix = new ya();
        }
        return D._matrix;
      };
      function Gn() {}
      h["flixel.addons.ui.interfaces.IFireTongue"] = Gn;
      Gn.__name__ = "flixel.addons.ui.interfaces.IFireTongue";
      Gn.__isInterface__ = true;
      Gn.prototype = {
        __class__: Gn
      };
      function ef(a, b) {
        this.curIndex = 0;
        this.parent = a;
        this.name = b;
      }
      h["flixel.animation.FlxBaseAnimation"] = ef;
      ef.__name__ = "flixel.animation.FlxBaseAnimation";
      ef.__interfaces__ = [ub];
      ef.prototype = {
        set_curIndex: function (a) {
          this.curIndex = a;
          if (this.parent != null && this.parent._curAnim == this) {
            this.parent.set_frameIndex(a);
          }
          return a;
        },
        destroy: function () {
          this.name = this.parent = null;
        },
        __class__: ef,
        __properties__: {
          set_curIndex: "set_curIndex"
        }
      };
      function Vh(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = 0;
        }
        this._frameTimer = 0;
        this.timeScale = 1;
        this.reversed = this.flipX = this.flipY = false;
        this.loopPoint = 0;
        this.finished = this.paused = this.looped = true;
        this.curFrame = this.frameDuration = 0;
        ef.call(this, a, b);
        this.set_frameRate(d);
        this.frames = c;
        this.looped = e;
        this.flipX = f;
        this.flipY = k;
      }
      h["flixel.animation.FlxAnimation"] = Vh;
      Vh.__name__ = "flixel.animation.FlxAnimation";
      Vh.__super__ = ef;
      Vh.prototype = q(ef.prototype, {
        destroy: function () {
          this.name = this.frames = null;
          ef.prototype.destroy.call(this);
        },
        play: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = false;
          }
          if (a || this.finished || this.reversed != b) {
            this.reversed = b;
            this.paused = false;
            this._frameTimer = 0;
            this.finished = this.frameDuration == 0;
            a = this.frames.length - 1;
            if (c < 0) {
              this.set_curFrame(g.random.int(0, a));
            } else {
              if (c > a) {
                c = a;
              }
              if (this.reversed) {
                c = a - c;
              }
              this.set_curFrame(c);
            }
            if (this.finished) {
              c = this.parent;
              if (c.finishCallback != null) {
                c.finishCallback(this.name);
              }
            }
          } else {
            this.paused = false;
          }
        },
        restart: function () {
          this.play(true, this.reversed);
        },
        stop: function () {
          this.paused = this.finished = true;
        },
        finish: function () {
          this.stop();
          this.set_curFrame(this.reversed ? 0 : this.frames.length - 1);
        },
        pause: function () {
          this.paused = true;
        },
        reverse: function () {
          this.reversed = !this.reversed;
          if (this.finished) {
            this.play(false, this.reversed);
          }
        },
        update: function (a) {
          var b = this.getCurrentFrameDuration();
          if (b != 0 && !this.finished && !this.paused) {
            for (this._frameTimer += a * this.timeScale; this._frameTimer > b && !this.finished;) {
              this._frameTimer -= b;
              if (this.reversed) {
                if (this.looped && this.curFrame == this.loopPoint) {
                  this.set_curFrame(this.frames.length - 1);
                } else {
                  this.set_curFrame(this.curFrame - 1);
                }
              } else if (this.looped && this.curFrame == this.frames.length - 1) {
                this.set_curFrame(this.loopPoint);
              } else {
                this.set_curFrame(this.curFrame + 1);
              }
              if (this.finished) {
                break;
              }
              b = this.getCurrentFrameDuration();
            }
          }
        },
        getCurrentFrameDuration: function () {
          var a = this.parent.getFrameDuration(this.frames[this.curFrame]);
          if (a > 0) {
            return a;
          } else {
            return this.frameDuration;
          }
        },
        set_frameRate: function (a) {
          this.frameRate = a;
          this.frameDuration = a > 0 ? 1 / a : 0;
          return a;
        },
        set_curFrame: function (a) {
          var b = this.frames.length - 1;
          var c = this.reversed ? b - a : a;
          if (c >= 0) {
            if (!this.looped && c > b) {
              this.finished = true;
              this.curFrame = this.reversed ? 0 : b;
            } else {
              this.curFrame = a;
            }
          } else {
            this.curFrame = g.random.int(0, b);
          }
          this.set_curIndex(this.frames[this.curFrame]);
          if (this.finished && this.parent != null) {
            b = this.parent;
            if (b.finishCallback != null) {
              b.finishCallback(this.name);
            }
          }
          return a;
        },
        __class__: Vh,
        __properties__: q(ef.prototype.__properties__, {
          set_curFrame: "set_curFrame",
          set_frameRate: "set_frameRate"
        })
      });
      function yk(a, b) {
        this.angle = 0;
        ef.call(this, a, "prerotated_animation");
        this.baked = b;
        this.rotations = Math.round(360 / b);
      }
      h["flixel.animation.FlxPrerotatedAnimation"] = yk;
      yk.__name__ = "flixel.animation.FlxPrerotatedAnimation";
      yk.__super__ = ef;
      yk.prototype = q(ef.prototype, {
        set_angle: function (a) {
          if (isNaN(a)) {
            throw I.thrown("angle must not be NaN");
          }
          var b = this.curIndex;
          for (var c = Math.floor(a % 360); c < 0;) {
            c += 360;
          }
          c = Math.floor(c / this.baked + 0.5);
          c = c % this.rotations | 0;
          if (b != c) {
            this.set_curIndex(c);
          }
          return this.angle = a;
        },
        set_curIndex: function (a) {
          this.curIndex = a;
          if (this.parent != null) {
            this.parent.set_frameIndex(a);
          }
          return a;
        },
        __class__: yk,
        __properties__: q(ef.prototype.__properties__, {
          set_angle: "set_angle"
        })
      });
      function Hn() {}
      h["flixel.effects.FlxFlicker"] = Hn;
      Hn.__name__ = "flixel.effects.FlxFlicker";
      Hn.__interfaces__ = [ub];
      Hn.prototype = {
        destroy: function () {
          this.progressCallback = this.completionCallback = this.timer = this.object = null;
        },
        __class__: Hn
      };
      function cc(a, b, c) {
        this.unique = false;
        this.useCount = 0;
        this.isDumped = false;
        this.destroyOnNoUse = true;
        this.persist = false;
        this.width = this.height = 0;
        this.key = a;
        this.persist = c ?? cc.defaultPersist;
        this.frameCollections = new rj();
        this.frameCollectionTypes = [];
        this.set_bitmap(b);
        this.shader = new Vd();
      }
      h["flixel.graphics.FlxGraphic"] = cc;
      cc.__name__ = "flixel.graphics.FlxGraphic";
      cc.__interfaces__ = [ub];
      cc.fromAssetKey = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          if (U.exists(a)) {
            var e = U.getBitmapData(a, true);
          } else {
            g.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", Aa.ERROR, true);
            e = null;
          }
          if (e == null) {
            return null;
          } else {
            return cc.createGraphic(e, c, b, d);
          }
        }
        c = g.bitmap.generateKey(a, c, b);
        e = g.bitmap._cache.h[c];
        if (e != null) {
          return e;
        }
        if (U.exists(a)) {
          e = U.getBitmapData(a, true);
        } else {
          g.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", Aa.ERROR, true);
          e = null;
        }
        if (e == null) {
          return null;
        }
        e = cc.createGraphic(e, c, b);
        e.assetsKey = a;
        return e;
      };
      cc.fromClass = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          var e = yb.createInstance(a, []);
          return cc.createGraphic(e, c, b, d);
        }
        d = a.__name__;
        d = g.bitmap.generateKey(d, c, b);
        c = g.bitmap._cache.h[d];
        if (c != null) {
          return c;
        }
        e = yb.createInstance(a, []);
        c = cc.createGraphic(e, d, b);
        c.assetsClass = a;
        return c;
      };
      cc.fromBitmapData = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (b == null) {
          b = false;
        }
        if (!d) {
          return cc.createGraphic(a, c, b, d);
        }
        d = g.bitmap.findKeyForBitmap(a);
        var e = null;
        var f = null;
        if (d != null) {
          var k = g.bitmap._cache.h[d];
          e = k.assetsKey;
          f = k.assetsClass;
        }
        d = g.bitmap.generateKey(d, c, b);
        k = g.bitmap._cache.h[d];
        if (k != null) {
          return k;
        }
        k = cc.createGraphic(a, d, b);
        k.assetsKey = e;
        k.assetsClass = f;
        return k;
      };
      cc.fromGraphic = function (a, b, c) {
        if (b == null) {
          b = false;
        }
        if (!b) {
          return a;
        }
        c = g.bitmap.generateKey(a.key, c, b);
        c = cc.createGraphic(a.bitmap, c, b);
        c.unique = b;
        c.assetsClass = a.assetsClass;
        c.assetsKey = a.assetsKey;
        return g.bitmap._cache.h[c.key] = c;
      };
      cc.fromRectangle = function (a, b, c, d, e) {
        if (d == null) {
          d = false;
        }
        d = g.bitmap.generateKey(a + "x" + b + ":" + c, e, d);
        e = g.bitmap._cache.h[d];
        if (e != null) {
          return e;
        }
        a = new N(a, b, true, c);
        return cc.createGraphic(a, d);
      };
      cc.createGraphic = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (c == null) {
          c = false;
        }
        var e = c;
        if (e == null) {
          e = false;
        }
        if (e) {
          a = a.clone();
        }
        if (d) {
          a = new cc(b, a);
          a.unique = c;
          g.bitmap._cache.h[a.key] = a;
        } else {
          a = new cc(null, a);
        }
        return a;
      };
      cc.prototype = {
        dump: function () {},
        undump: function () {
          var a = this.getBitmapFromSystem();
          if (a != null) {
            this.set_bitmap(a);
          }
          this.isDumped = false;
        },
        onContext: function () {
          if (this.isDumped) {
            this.undump();
            this.dump();
          }
        },
        onAssetsReload: function () {
          if (this.assetsClass != null || this.assetsKey != null) {
            var a = this.isDumped;
            this.undump();
            if (a) {
              this.dump();
            }
          }
        },
        destroy: function () {
          this.set_bitmap(ca.dispose(this.bitmap));
          this.assetsClass = this.assetsKey = this.key = this.shader = null;
          this.imageFrame = ca.destroy(this.get_imageFrame());
          if (this.frameCollections != null) {
            var a;
            for (var b = 0, c = this.frameCollectionTypes; b < c.length;) {
              a = c[b];
              ++b;
              a = this.frameCollections.get(a);
              ca.destroyArray(a);
            }
            this.frameCollectionTypes = this.frameCollections = null;
          }
        },
        addFrameCollection: function (a) {
          if (a.type != null) {
            var b = a.type;
            var c = this.frameCollections.get(b);
            if (c == null) {
              c = [];
              this.frameCollections.set(b, c);
            }
            b = c;
            if (b.indexOf(a) != -1) {
              g.log.advanced("Attempting to add already added collection", Aa.WARNING, true);
            } else {
              b.push(a);
            }
          }
        },
        getBitmapFromSystem: function () {
          var a = null;
          if (this.assetsClass != null) {
            a = yb.createInstance(this.assetsClass, []);
          } else if (this.assetsKey != null) {
            a = this.assetsKey;
            if (U.exists(a)) {
              a = U.getBitmapData(a, true);
            } else {
              g.log.advanced("Could not find a BitmapData asset with ID '" + a + "'.", Aa.ERROR, true);
              a = null;
            }
          }
          if (a != null) {
            var b = this.unique;
            if (b == null) {
              b = false;
            }
            if (b) {
              return a.clone();
            } else {
              return a;
            }
          }
          return null;
        },
        incrementUseCount: function () {
          this.useCount++;
        },
        decrementUseCount: function () {
          this.useCount--;
          this.checkUseCount();
        },
        checkUseCount: function () {
          if (this.useCount <= 0 && this.destroyOnNoUse && !this.persist) {
            g.bitmap.remove(this);
          }
        },
        set_destroyOnNoUse: function (a) {
          this.destroyOnNoUse = a;
          this.checkUseCount();
          return a;
        },
        get_imageFrame: function () {
          if (this.imageFrame == null) {
            this.imageFrame = Xf.fromRectangle(this);
          }
          return this.imageFrame;
        },
        set_bitmap: function (a) {
          if (a != null) {
            this.bitmap = a;
            this.width = this.bitmap.width;
            this.height = this.bitmap.height;
          }
          return a;
        },
        __class__: cc,
        __properties__: {
          get_imageFrame: "get_imageFrame",
          set_destroyOnNoUse: "set_destroyOnNoUse",
          set_bitmap: "set_bitmap"
        }
      };
      function Be(a, b, c) {
        this.parent = a;
        this.type = b;
        if (c == null) {
          c = b = 0;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = da.pool.get().set(b, c);
          b._inPool = false;
        } else {
          b = c;
        }
        this.border = b;
        this.frames = [];
        this.framesByName = new xa();
        if (a != null) {
          a.addFrameCollection(this);
        }
      }
      h["flixel.graphics.frames.FlxFramesCollection"] = Be;
      Be.__name__ = "flixel.graphics.frames.FlxFramesCollection";
      Be.__interfaces__ = [ub];
      Be.prototype = {
        destroy: function () {
          this.frames = ca.destroyArray(this.frames);
          this.border = ca.put(this.border);
          this.type = this.parent = this.framesByName = null;
        },
        addEmptyFrame: function (a) {
          var b = new sb(this.parent);
          b.type = 2;
          var c = Ia._pool.get();
          var d = 0;
          var e = 0;
          var f = 0;
          var k = 0;
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.x = d;
          c.y = e;
          c.width = f;
          c.height = k;
          c._inPool = false;
          b.set_frame(c);
          c = b.sourceSize;
          d = a.width;
          a = a.height;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          this.frames.push(b);
          return b;
        },
        addSpriteSheetFrame: function (a) {
          var b = Ia._pool.get();
          var c = 0;
          var d = 0;
          var e = 0;
          var f = 0;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          b._inPool = false;
          b.x = a.x;
          b.y = a.y;
          b.width = a.width;
          b.height = a.height;
          if (a._weak && !a._inPool) {
            a._inPool = true;
            a._weak = false;
            Ia._pool.putUnsafe(a);
          }
          a = b;
          b = new sb(this.parent);
          b.set_frame(this.checkFrame(a));
          c = b.sourceSize;
          d = a.width;
          a = a.height;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          c = b.offset;
          a = d = 0;
          if (a == null) {
            a = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(a);
          return this.pushFrame(b);
        },
        addAtlasFrame: function (a, b, c, d, e, f, k, t) {
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = 0;
          }
          if (d != null && Object.prototype.hasOwnProperty.call(this.framesByName.h, d)) {
            return this.framesByName.h[d];
          }
          e = new sb(this.parent, e, f, k, t);
          e.name = d;
          f = e.sourceSize;
          k = b.x;
          t = b.y;
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.set_x(k);
          f.set_y(t);
          f = e.offset;
          k = c.x;
          t = c.y;
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.set_x(k);
          f.set_y(t);
          e.set_frame(this.checkFrame(a, d));
          ca.put(b);
          ca.put(c);
          return this.pushFrame(e);
        },
        checkFrame: function (a, b) {
          var c = a.x;
          var d = this.parent.width;
          var e = c < 0 ? 0 : c;
          var f = d != null && e > d ? d : e;
          c = a.y;
          d = this.parent.height;
          e = c < 0 ? 0 : c;
          var k = d != null && e > d ? d : e;
          c = a.x + a.width;
          d = this.parent.width;
          e = c < 0 ? 0 : c;
          var t = d != null && e > d ? d : e;
          c = a.y + a.height;
          d = this.parent.height;
          e = c < 0 ? 0 : c;
          c = f;
          var l = k;
          f = t - f;
          d = (d != null && e > d ? d : e) - k;
          if (d == null) {
            d = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.x = c;
          a.y = l;
          a.width = f;
          a.height = d;
          if (a.width <= 0 || a.height <= 0) {
            g.log.advanced("The frame " + b + " has incorrect data and results in an image with the size of (0, 0)", Aa.WARNING, true);
          }
          return a;
        },
        pushFrame: function (a, b) {
          if (b == null) {
            b = false;
          }
          var c = a.name;
          if (c != null && Object.prototype.hasOwnProperty.call(this.framesByName.h, c) && !b) {
            return this.framesByName.h[c];
          }
          this.frames.push(a);
          a.cacheFrameMatrix();
          if (c != null) {
            this.framesByName.h[c] = a;
          }
          return a;
        },
        __class__: Be
      };
      function Sa(a, b) {
        this.usedGraphics = [];
        Be.call(this, a, Af.ATLAS, b);
      }
      h["flixel.graphics.frames.FlxAtlasFrames"] = Sa;
      Sa.__name__ = "flixel.graphics.frames.FlxAtlasFrames";
      Sa.fromTexturePackerJson = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        var d = g.bitmap.add(a, false);
        if (d == null) {
          return null;
        }
        a = Sa.findFrame(d);
        if (a != null) {
          return a;
        }
        if (d == null || b == null) {
          return null;
        }
        a = new Sa(d);
        b = Kp.getData(b);
        if (b.frames instanceof Array) {
          d = 0;
          for (var e = b.frames; d < e.length;) {
            b = e[d];
            ++d;
            Sa.texturePackerHelper(b.filename, b, a, c);
          }
        } else {
          d = b.frames;
          e = ha.fields(d);
          for (var f = 0; f < e.length;) {
            var k = b = e[f++];
            b = d[b];
            Sa.texturePackerHelper(k, b, a, c);
          }
        }
        return a;
      };
      Sa.texturePackerHelper = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        var e = 0;
        var f = b.frame;
        if (b.rotated) {
          var k = f.x;
          var t = f.y;
          var g = f.h;
          var J = f.w;
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ia._pool.get();
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = t;
          f.width = g;
          f.height = J;
          f._inPool = false;
          e = -90;
        } else {
          k = f.x;
          t = f.y;
          g = f.w;
          J = f.h;
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ia._pool.get();
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = t;
          f.width = g;
          f.height = J;
          f._inPool = false;
        }
        k = b.sourceSize.w;
        J = b.sourceSize.h;
        if (J == null) {
          J = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (J == null) {
          J = 0;
        }
        if (k == null) {
          k = 0;
        }
        J = da.pool.get().set(k, J);
        J._inPool = false;
        g = J;
        k = b.spriteSourceSize.x;
        J = b.spriteSourceSize.y;
        if (J == null) {
          J = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (J == null) {
          J = 0;
        }
        if (k == null) {
          k = 0;
        }
        J = da.pool.get().set(k, J);
        J._inPool = false;
        c.addAtlasFrame(f, g, J, a, e, false, false, d && b.duration != null ? b.duration / 1000 : 0);
      };
      Sa.fromSparrow = function (a, b) {
        var c = g.bitmap.add(a);
        if (c == null) {
          return null;
        }
        a = Sa.findFrame(c);
        if (a != null) {
          return a;
        }
        if (c == null || b == null) {
          return null;
        }
        a = new Sa(c);
        var d = Lp.getXml(b).firstElement();
        if (d.nodeType != T.Document && d.nodeType != T.Element) {
          throw I.thrown("Invalid nodeType " + (d.nodeType == null ? "null" : lb.toString(d.nodeType)));
        }
        b = 0;
        for (c = fc.resolve(d, "SubTexture"); b < c.length;) {
          var e = c[b];
          ++b;
          if (!ec.resolve(e, "width") && ec.resolve(e, "w")) {
            throw I.thrown("Sparrow v1 is not supported, use Sparrow v2");
          }
          var f = Mb.resolve(e, "name");
          var k = ec.resolve(e, "frameX");
          var t = ec.resolve(e, "rotated") && Mb.resolve(e, "rotated") == "true";
          var l = ec.resolve(e, "flipX") && Mb.resolve(e, "flipX") == "true";
          var J = ec.resolve(e, "flipY") && Mb.resolve(e, "flipY") == "true";
          var h = parseFloat(Mb.resolve(e, "x"));
          var m = parseFloat(Mb.resolve(e, "y"));
          d = parseFloat(Mb.resolve(e, "width"));
          var p = parseFloat(Mb.resolve(e, "height"));
          if (p == null) {
            p = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          var n = Ia._pool.get();
          if (p == null) {
            p = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (h == null) {
            h = 0;
          }
          n.x = h;
          n.y = m;
          n.width = d;
          n.height = p;
          n._inPool = false;
          if (k) {
            d = y.parseInt(Mb.resolve(e, "frameX"));
            m = y.parseInt(Mb.resolve(e, "frameY"));
            p = y.parseInt(Mb.resolve(e, "frameWidth"));
            h = y.parseInt(Mb.resolve(e, "frameHeight"));
            if (h == null) {
              h = 0;
            }
            if (p == null) {
              p = 0;
            }
            if (m == null) {
              m = 0;
            }
            if (d == null) {
              d = 0;
            }
            e = Ia._pool.get();
            if (h == null) {
              h = 0;
            }
            if (p == null) {
              p = 0;
            }
            if (m == null) {
              m = 0;
            }
            if (d == null) {
              d = 0;
            }
            e.x = d;
            e.y = m;
            e.width = p;
            e.height = h;
            e._inPool = false;
          } else {
            m = h = 0;
            d = n.width;
            p = n.height;
            if (p == null) {
              p = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (m == null) {
              m = 0;
            }
            if (h == null) {
              h = 0;
            }
            e = Ia._pool.get();
            if (p == null) {
              p = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (m == null) {
              m = 0;
            }
            if (h == null) {
              h = 0;
            }
            e.x = h;
            e.y = m;
            e.width = d;
            e.height = p;
            e._inPool = false;
          }
          p = t ? -90 : 0;
          d = -e.x;
          h = -e.y;
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          h = da.pool.get().set(d, h);
          h._inPool = false;
          m = e.width;
          d = e.height;
          if (d == null) {
            d = 0;
          }
          if (m == null) {
            m = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (m == null) {
            m = 0;
          }
          d = da.pool.get().set(m, d);
          d._inPool = false;
          if (t && !k) {
            t = e.height;
            m = e.width;
            if (m == null) {
              m = 0;
            }
            if (t == null) {
              t = 0;
            }
            d.set_x(t);
            d.set_y(m);
          }
          if (n.width == 0 || n.height == 0) {
            if (!k) {
              e.width = 1;
              e.height = 1;
            }
            k = a.addEmptyFrame(e);
            k.name = f;
            f = k.offset;
            k = h.x;
            l = h.y;
            if (l == null) {
              l = 0;
            }
            if (k == null) {
              k = 0;
            }
            f.set_x(k);
            f.set_y(l);
            f = h;
            if (f._weak) {
              f.put();
            }
          } else {
            a.addAtlasFrame(n, d, h, f, p, l, J);
          }
        }
        return a;
      };
      Sa.fromSpriteSheetPacker = function (a, b) {
        var c = g.bitmap.add(a);
        if (c == null) {
          return null;
        }
        a = Sa.findFrame(c);
        if (a != null) {
          return a;
        }
        if (c == null || b == null) {
          return null;
        }
        a = new Sa(c);
        if (U.exists(b)) {
          b = U.getText(b);
        }
        b = v.trim(b).split("\n");
        c = 0;
        for (var d = b.length; c < d;) {
          var e = c++;
          var f = b[e].split("=");
          e = v.trim(f[0]);
          f = v.trim(f[1]).split(" ");
          var k = y.parseInt(f[0]);
          var t = y.parseInt(f[1]);
          var l = y.parseInt(f[2]);
          var J = y.parseInt(f[3]);
          if (J == null) {
            J = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f = Ia._pool.get();
          if (J == null) {
            J = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (t == null) {
            t = 0;
          }
          if (k == null) {
            k = 0;
          }
          f.x = k;
          f.y = t;
          f.width = l;
          f.height = J;
          f._inPool = false;
          J = f.width;
          l = f.height;
          if (l == null) {
            l = 0;
          }
          if (J == null) {
            J = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (J == null) {
            J = 0;
          }
          l = da.pool.get().set(J, l);
          l._inPool = false;
          k = J = 0;
          if (k == null) {
            k = 0;
          }
          if (J == null) {
            J = 0;
          }
          J = da.pool.get().set(J, k);
          J._inPool = false;
          a.addAtlasFrame(f, l, J, e, 0);
        }
        return a;
      };
      Sa.findFrame = function (a, b) {
        if (b == null) {
          var c = 0;
          b = 0;
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          b = da.pool.get().set(c, b);
          b._inPool = false;
          b._weak = true;
        }
        c = Af.ATLAS;
        var d = a.frameCollections.get(c);
        if (d == null) {
          d = [];
          a.frameCollections.set(c, d);
        }
        a = d;
        for (c = 0; c < a.length;) {
          d = a[c];
          ++c;
          var e = d.border;
          e = Math.abs(e.x - b.x) <= 1e-7 && Math.abs(e.y - b.y) <= 1e-7;
          if (b._weak) {
            b.put();
          }
          if (e) {
            return d;
          }
        }
        return null;
      };
      Sa.__super__ = Be;
      Sa.prototype = q(Be.prototype, {
        destroy: function () {
          while (this.usedGraphics.length > 0) {
            this.usedGraphics.shift().decrementUseCount();
          }
          Be.prototype.destroy.call(this);
        },
        addAtlas: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (var c = 0, d = a.frames; c < d.length;) {
            var e = d[c];
            ++c;
            this.pushFrame(e, b);
          }
          if (this.usedGraphics.indexOf(a.parent) == -1) {
            this.usedGraphics.push(a.parent);
            a.parent.incrementUseCount();
          }
          return this;
        },
        __class__: Sa
      });
      function Rc(a, b, c, d, e, f) {
        ya.call(this, a, b, c, d, e, f);
      }
      h["flixel.math.FlxMatrix"] = Rc;
      Rc.__name__ = "flixel.math.FlxMatrix";
      Rc.__super__ = ya;
      Rc.prototype = q(ya.prototype, {
        __class__: Rc
      });
      function sb(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = 0;
        }
        this.parent = a;
        this.angle = b;
        this.flipX = c;
        this.flipY = d;
        this.duration = e;
        b = a = this.type = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        this.sourceSize = a;
        b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        this.offset = a;
        this.blitMatrix = Array(6);
        if (g.renderTile) {
          this.tileMatrix = Array(6);
        }
      }
      h["flixel.graphics.frames.FlxFrame"] = sb;
      sb.__name__ = "flixel.graphics.frames.FlxFrame";
      sb.__interfaces__ = [ub];
      sb.sortHelper = function (a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (d) {
          for (d = 0; d < a.length;) {
            var e = a[d];
            ++d;
            e = e.name;
            var f = e.substring(b, e.length - c);
            var k = y.parseInt(f);
            if (k == null) {
              g.log.advanced("Could not parse frame number of \"" + f + "\" in frame named \"" + e + "\"", Aa.WARNING, true);
            } else if (k < 0) {
              g.log.advanced("Found negative frame number \"" + f + "\" in frame named \"" + e + "\"", Aa.WARNING, true);
            }
          }
        }
        Zc.sort(a, function (a, d) {
          return sb.sortByName(a, d, b, c);
        });
      };
      sb.sortByName = function (a, b, c, d) {
        var e = a.name;
        a = y.parseInt(e.substring(c, e.length - d));
        e = b.name;
        b = y.parseInt(e.substring(c, e.length - d));
        return (a == null ? 0 : a > 0 ? a : -a) - (b == null ? 0 : b > 0 ? b : -b);
      };
      sb.prototype = {
        cacheFrameMatrix: function () {
          var a = sb._matrix;
          var b = true;
          if (b == null) {
            b = true;
          }
          a.identity();
          if (b) {
            a.translate(-this.frame.x, -this.frame.y);
          }
          if (this.angle == 90) {
            a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
            a.translate(this.frame.height, 0);
          } else if (this.angle == -90) {
            a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
            a.translate(0, this.frame.width);
          }
          a.translate(this.offset.x, this.offset.y);
          this.blitMatrix[0] = sb._matrix.a;
          this.blitMatrix[1] = sb._matrix.b;
          this.blitMatrix[2] = sb._matrix.c;
          this.blitMatrix[3] = sb._matrix.d;
          this.blitMatrix[4] = sb._matrix.tx;
          this.blitMatrix[5] = sb._matrix.ty;
          if (g.renderTile) {
            a = sb._matrix;
            b = false;
            if (b == null) {
              b = true;
            }
            a.identity();
            if (b) {
              a.translate(-this.frame.x, -this.frame.y);
            }
            if (this.angle == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.frame.height, 0);
            } else if (this.angle == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.frame.width);
            }
            a.translate(this.offset.x, this.offset.y);
            this.tileMatrix[0] = sb._matrix.a;
            this.tileMatrix[1] = sb._matrix.b;
            this.tileMatrix[2] = sb._matrix.c;
            this.tileMatrix[3] = sb._matrix.d;
            this.tileMatrix[4] = sb._matrix.tx;
            this.tileMatrix[5] = sb._matrix.ty;
          }
        },
        prepareTransformedBlitMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          a.a = this.blitMatrix[0];
          a.b = this.blitMatrix[1];
          a.c = this.blitMatrix[2];
          a.d = this.blitMatrix[3];
          a.tx = this.blitMatrix[4];
          a.ty = this.blitMatrix[5];
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          var e = this.sourceSize.x | 0;
          var f = this.sourceSize.y | 0;
          if (b != 0) {
            var k = e;
            e = f;
            f = k;
            if (b == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.sourceSize.y, 0);
            } else if (b == -90 || b == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.sourceSize.x);
            }
          }
          if (c) {
            a.scale(-1, 1);
            a.translate(e, 0);
          }
          if (d) {
            a.scale(1, -1);
            a.translate(0, f);
          }
          return a;
        },
        prepareMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          if (g.renderBlit) {
            a.identity();
            return a;
          }
          a.a = this.tileMatrix[0];
          a.b = this.tileMatrix[1];
          a.c = this.tileMatrix[2];
          a.d = this.tileMatrix[3];
          a.tx = this.tileMatrix[4];
          a.ty = this.tileMatrix[5];
          c = c != this.flipX;
          d = d != this.flipY;
          if (b == 0 && !c && !d) {
            return a;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          var e = this.sourceSize.x | 0;
          var f = this.sourceSize.y | 0;
          if (b != 0) {
            var k = e;
            e = f;
            f = k;
            if (b == 90) {
              a.setTo(-a.b, a.a, -a.d, a.c, -a.ty, a.tx);
              a.translate(this.sourceSize.y, 0);
            } else if (b == -90 || b == -90) {
              a.setTo(a.b, -a.a, a.d, -a.c, a.ty, -a.tx);
              a.translate(0, this.sourceSize.x);
            }
          }
          if (c) {
            a.scale(-1, 1);
            a.translate(e, 0);
          }
          if (d) {
            a.scale(1, -1);
            a.translate(0, f);
          }
          return a;
        },
        paint: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = false;
          }
          var e = 0;
          var f = c;
          if (d == null) {
            d = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = 0;
          }
          var k = e != 0;
          e = (k ? this.sourceSize.y : this.sourceSize.x) | 0;
          k = (k ? this.sourceSize.x : this.sourceSize.y) | 0;
          if (a != null && d) {
            a = ca.disposeIfNotEqual(a, e, k);
          }
          if (a == null || f) {
            if (a == null) {
              a = new N(e, k, true, 0);
            }
          } else {
            if (b != null) {
              sb._rect.setTo(b.x, b.y, e, k);
            } else {
              sb._rect.setTo(0, 0, e, k);
            }
            a.fillRect(sb._rect, 0);
          }
          if (this.type == 2) {
            return a;
          }
          if (this.angle == 0) {
            f = this.offset;
            d = sb._point;
            if (d == null) {
              d = new ob();
            }
            d.x = f.x;
            d.y = f.y;
            if (b != null) {
              sb._point.offset(b.x, b.y);
            }
            f = this.parent.bitmap;
            k = this.frame;
            e = sb._rect;
            if (e == null) {
              e = new ba();
            }
            e.x = k.x;
            e.y = k.y;
            e.width = k.width;
            e.height = k.height;
            a.copyPixels(f, e, sb._point, null, null, c);
          } else {
            var t = sb._matrix;
            t.a = this.blitMatrix[0];
            t.b = this.blitMatrix[1];
            t.c = this.blitMatrix[2];
            t.d = this.blitMatrix[3];
            t.tx = this.blitMatrix[4];
            t.ty = this.blitMatrix[5];
            if (b != null) {
              sb._matrix.translate(b.x, b.y);
            }
            f = this.parent.bitmap;
            t = c = sb._matrix;
            d = sb._rect;
            var g = this.frame.x;
            k = this.frame.y;
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            b = da.pool.get().set(g, k);
            b._inPool = false;
            b._weak = true;
            e = b;
            k = this.frame;
            g = k.x + k.width;
            k = this.frame;
            k = k.y + k.height;
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            b = da.pool.get().set(g, k);
            b._inPool = false;
            b._weak = true;
            g = e.x * t.a + e.y * t.c + t.tx;
            k = e.x * t.b + e.y * t.d + t.ty;
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            e.set_x(g);
            e.set_y(k);
            g = b.x * t.a + b.y * t.c + t.tx;
            k = b.x * t.b + b.y * t.d + t.ty;
            if (k == null) {
              k = 0;
            }
            if (g == null) {
              g = 0;
            }
            b.set_x(g);
            b.set_y(k);
            k = Ia._pool.get();
            var J = g = t = 0;
            var h = 0;
            if (h == null) {
              h = 0;
            }
            if (J == null) {
              J = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (t == null) {
              t = 0;
            }
            k.x = t;
            k.y = g;
            k.width = J;
            k.height = h;
            k._inPool = false;
            J = Math.min(e.x, b.x);
            h = Math.min(e.y, b.y);
            var m = Math.max(e.x, b.x);
            var p = Math.max(e.y, b.y);
            if (e._weak) {
              e.put();
            }
            e = b;
            if (e._weak) {
              e.put();
            }
            t = J;
            g = h;
            J = m - J;
            h = p - h;
            if (h == null) {
              h = 0;
            }
            if (J == null) {
              J = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (t == null) {
              t = 0;
            }
            k.x = t;
            k.y = g;
            k.width = J;
            k.height = h;
            b = k;
            e = d;
            if (e == null) {
              e = new ba();
            }
            e.x = b.x;
            e.y = b.y;
            e.width = b.width;
            e.height = b.height;
            if (!b._inPool) {
              b._inPool = true;
              b._weak = false;
              Ia._pool.putUnsafe(b);
            }
            a.draw(f, c, null, null, d);
          }
          return a;
        },
        paintRotatedAndFlipped: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 0;
          }
          if (this.type == 2 && c == 0) {
            return this.paint(a, b, f, k);
          }
          var t = c;
          if (k == null) {
            k = false;
          }
          if (f == null) {
            f = false;
          }
          if (t == null) {
            t = 0;
          }
          var g = t != 0;
          t = (g ? this.sourceSize.y : this.sourceSize.x) | 0;
          g = (g ? this.sourceSize.x : this.sourceSize.y) | 0;
          if (a != null && k) {
            a = ca.disposeIfNotEqual(a, t, g);
          }
          if (a == null || f) {
            if (a == null) {
              a = new N(t, g, true, 0);
            }
          } else {
            if (b != null) {
              sb._rect.setTo(b.x, b.y, t, g);
            } else {
              sb._rect.setTo(0, 0, t, g);
            }
            a.fillRect(sb._rect, 0);
          }
          if (this.type == 2) {
            return a;
          }
          this.prepareTransformedBlitMatrix(sb._matrix, c, d != this.flipX, e != this.flipY);
          if (b != null) {
            sb._matrix.translate(b.x, b.y);
          }
          c = this.parent.bitmap;
          t = d = sb._matrix;
          e = sb._rect;
          g = this.frame.x;
          k = this.frame.y;
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          b = da.pool.get().set(g, k);
          b._inPool = false;
          b._weak = true;
          f = b;
          k = this.frame;
          g = k.x + k.width;
          k = this.frame;
          k = k.y + k.height;
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          b = da.pool.get().set(g, k);
          b._inPool = false;
          b._weak = true;
          g = f.x * t.a + f.y * t.c + t.tx;
          k = f.x * t.b + f.y * t.d + t.ty;
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          f.set_x(g);
          f.set_y(k);
          g = b.x * t.a + b.y * t.c + t.tx;
          k = b.x * t.b + b.y * t.d + t.ty;
          if (k == null) {
            k = 0;
          }
          if (g == null) {
            g = 0;
          }
          b.set_x(g);
          b.set_y(k);
          k = Ia._pool.get();
          var J = g = t = 0;
          var h = 0;
          if (h == null) {
            h = 0;
          }
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (t == null) {
            t = 0;
          }
          k.x = t;
          k.y = g;
          k.width = J;
          k.height = h;
          k._inPool = false;
          J = Math.min(f.x, b.x);
          h = Math.min(f.y, b.y);
          var m = Math.max(f.x, b.x);
          var p = Math.max(f.y, b.y);
          if (f._weak) {
            f.put();
          }
          f = b;
          if (f._weak) {
            f.put();
          }
          t = J;
          g = h;
          J = m - J;
          h = p - h;
          if (h == null) {
            h = 0;
          }
          if (J == null) {
            J = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (t == null) {
            t = 0;
          }
          k.x = t;
          k.y = g;
          k.width = J;
          k.height = h;
          f = k;
          b = e;
          if (b == null) {
            b = new ba();
          }
          b.x = f.x;
          b.y = f.y;
          b.width = f.width;
          b.height = f.height;
          if (!f._inPool) {
            f._inPool = true;
            f._weak = false;
            Ia._pool.putUnsafe(f);
          }
          a.draw(c, d, null, null, e);
          return a;
        },
        clipTo: function (a, b) {
          if (b == null) {
            b = new sb(this.parent, this.angle);
          } else {
            b.parent = this.parent;
            b.angle = this.angle;
            b.set_frame(ca.put(b.frame));
          }
          var c = b.sourceSize;
          var d = this.sourceSize;
          var e = d.x;
          var f = d.y;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          c.set_x(e);
          c.set_y(f);
          e = d;
          if (e._weak) {
            e.put();
          }
          b.name = this.name;
          if (this.type == 2) {
            b.type = 2;
            c = b.offset;
            f = e = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
            return b;
          }
          var k = 0;
          c = 0;
          if (c == null) {
            c = 0;
          }
          if (k == null) {
            k = 0;
          }
          e = Ia._pool.get();
          d = k;
          var g = 0;
          f = 0;
          if (f == null) {
            f = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          e.x = d;
          e.y = c;
          e.width = g;
          e.height = f;
          d = e;
          d._inPool = false;
          e = d;
          e.width = this.frame.width;
          e.height = this.frame.height;
          c = e;
          if (this.angle != 0) {
            c.width = this.frame.height;
            c.height = this.frame.width;
          }
          a.x += -this.offset.x;
          a.y += -this.offset.y;
          d = c.intersection(a);
          if (!c._inPool) {
            c._inPool = true;
            c._weak = false;
            Ia._pool.putUnsafe(c);
          }
          if (d.width == 0 || d.height == 0) {
            b.type = 2;
            f = g = c = k = 0;
            if (f == null) {
              f = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (k == null) {
              k = 0;
            }
            d.x = k;
            d.y = c;
            d.width = g;
            d.height = f;
            b.set_frame(d);
            c = b.offset;
            f = e = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
          } else {
            b.type = 0;
            c = b.offset;
            e = d.x;
            f = d.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(f);
            k = this.offset;
            e = k.x;
            f = k.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(c.x + e);
            c.set_y(c.y + f);
            e = k;
            if (e._weak) {
              e.put();
            }
            e = d.x;
            f = d.y;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            k = da.pool.get().set(e, f);
            k._inPool = false;
            e = k;
            e._weak = true;
            c = e;
            e = d.x + d.width;
            f = d.y + d.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            k = da.pool.get().set(e, f);
            k._inPool = false;
            e = k;
            e._weak = true;
            k = e;
            sb._matrix.identity();
            if (this.angle == -90) {
              e = sb._matrix;
              e.setTo(-e.b, e.a, -e.d, e.c, -e.ty, e.tx);
              sb._matrix.translate(this.frame.width, 0);
            } else if (this.angle == 90) {
              e = sb._matrix;
              e.setTo(e.b, -e.a, e.d, -e.c, e.ty, -e.tx);
              sb._matrix.translate(0, this.frame.height);
            }
            if (this.angle != 0) {
              f = sb._matrix;
              e = c.x * f.a + c.y * f.c + f.tx;
              f = c.x * f.b + c.y * f.d + f.ty;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(f);
              f = sb._matrix;
              e = k.x * f.a + k.y * f.c + f.tx;
              f = k.x * f.b + k.y * f.d + f.ty;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              k.set_x(e);
              k.set_y(f);
            }
            g = Math.min(c.x, k.x);
            f = Math.min(c.y, k.y);
            var l = Math.max(c.x, k.x);
            var J = Math.max(c.y, k.y);
            e = c;
            if (e._weak) {
              e.put();
            }
            e = k;
            if (e._weak) {
              e.put();
            }
            k = g;
            c = f;
            g = l - g;
            f = J - f;
            if (f == null) {
              f = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (k == null) {
              k = 0;
            }
            d.x = k;
            d.y = c;
            d.width = g;
            d.height = f;
            d.x += this.frame.x;
            d.y += this.frame.y;
            b.set_frame(d);
            b.cacheFrameMatrix();
          }
          a.x += this.offset.x;
          a.y += this.offset.y;
          return b;
        },
        copyTo: function (a) {
          if (a == null) {
            a = new sb(this.parent, this.angle);
          } else {
            a.parent = this.parent;
            a.angle = this.angle;
            a.set_frame(ca.put(a.frame));
          }
          var b = a.offset;
          var c = this.offset;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          a.flipX = this.flipX;
          a.flipY = this.flipY;
          b = a.sourceSize;
          c = this.sourceSize;
          d = c.x;
          e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          b = c;
          if (b._weak) {
            b.put();
          }
          b = Ia._pool.get();
          var f = e = d = c = 0;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.x = c;
          b.y = d;
          b.width = e;
          b.height = f;
          b._inPool = false;
          c = this.frame;
          b.x = c.x;
          b.y = c.y;
          b.width = c.width;
          b.height = c.height;
          if (c._weak && !c._inPool) {
            c._inPool = true;
            c._weak = false;
            Ia._pool.putUnsafe(c);
          }
          a.set_frame(b);
          a.type = this.type;
          a.name = this.name;
          a.cacheFrameMatrix();
          return a;
        },
        destroy: function () {
          this.parent = this.name = null;
          this.sourceSize = ca.put(this.sourceSize);
          this.offset = ca.put(this.offset);
          this.set_frame(ca.put(this.frame));
          this.uv = ca.put(this.uv);
          this.tileMatrix = this.blitMatrix = null;
        },
        set_frame: function (a) {
          if (a != null) {
            if (this.uv == null) {
              var b = Ia._pool.get();
              var c = 0;
              var d = 0;
              var e = 0;
              var f = 0;
              if (f == null) {
                f = 0;
              }
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.x = c;
              b.y = d;
              b.width = e;
              b.height = f;
              b._inPool = false;
              this.uv = b;
            }
            b = this.uv;
            c = a.x / this.parent.width;
            d = a.y / this.parent.height;
            e = (a.x + a.width) / this.parent.width;
            f = (a.y + a.height) / this.parent.height;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.x = c;
            b.y = d;
            b.width = e;
            b.height = f;
          }
          return this.frame = a;
        },
        __class__: sb,
        __properties__: {
          set_frame: "set_frame"
        }
      };
      var Af = w["flixel.graphics.frames.FlxFrameCollectionType"] = {
        __ename__: "flixel.graphics.frames.FlxFrameCollectionType",
        __constructs__: null,
        IMAGE: {
          _hx_name: "IMAGE",
          _hx_index: 0,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        TILES: {
          _hx_name: "TILES",
          _hx_index: 1,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        ATLAS: {
          _hx_name: "ATLAS",
          _hx_index: 2,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        FONT: {
          _hx_name: "FONT",
          _hx_index: 3,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        },
        USER: (r = function (a) {
          return {
            _hx_index: 4,
            type: a,
            __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
            toString: p
          };
        }, r._hx_name = "USER", r.__params__ = ["type"], r),
        FILTER: {
          _hx_name: "FILTER",
          _hx_index: 5,
          __enum__: "flixel.graphics.frames.FlxFrameCollectionType",
          toString: p
        }
      };
      Af.__constructs__ = [Af.IMAGE, Af.TILES, Af.ATLAS, Af.FONT, Af.USER, Af.FILTER];
      function Xf(a, b) {
        Be.call(this, a, Af.IMAGE, b);
      }
      h["flixel.graphics.frames.FlxImageFrame"] = Xf;
      Xf.__name__ = "flixel.graphics.frames.FlxImageFrame";
      Xf.fromGraphic = function (a, b) {
        if (a == null || a.shader == null) {
          return null;
        }
        var c = 0;
        var d = 0;
        var e = a.width;
        var f = a.height;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        var k = Ia._pool.get();
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        k.x = c;
        k.y = d;
        k.width = e;
        k.height = f;
        k._inPool = false;
        if (b != null) {
          k.x = b.x;
          k.y = b.y;
          k.width = b.width;
          k.height = b.height;
          if (k._weak && !k._inPool) {
            k._inPool = true;
            k._weak = false;
            Ia._pool.putUnsafe(k);
          }
        }
        var g = Xf.findFrame(a, k);
        if (!k._inPool) {
          k._inPool = true;
          k._weak = false;
          Ia._pool.putUnsafe(k);
        }
        if (g != null) {
          if (b != null && b._weak && !b._inPool) {
            b._inPool = true;
            b._weak = false;
            Ia._pool.putUnsafe(b);
          }
          return g;
        }
        g = new Xf(a);
        if (b == null) {
          d = c = 0;
          e = a.width;
          f = a.height;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          k = Ia._pool.get();
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          k.x = c;
          k.y = d;
          k.width = e;
          k.height = f;
          k._inPool = false;
          a = k;
          a._weak = true;
          b = a;
        } else {
          if (b.width == 0) {
            b.width = a.width - b.x;
          }
          if (b.height == 0) {
            b.height = a.height - b.y;
          }
        }
        g.addSpriteSheetFrame(b);
        return g;
      };
      Xf.fromRectangle = function (a, b) {
        a = g.bitmap.add(a, false);
        return Xf.fromGraphic(a, b);
      };
      Xf.findFrame = function (a, b, c) {
        if (c == null) {
          var d = 0;
          c = 0;
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          var e = da.pool.get().set(d, c);
          e._inPool = false;
          c = e;
          c._weak = true;
        }
        d = Af.IMAGE;
        var f = a.frameCollections.get(d);
        if (f == null) {
          f = [];
          a.frameCollections.set(d, f);
        }
        a = f;
        for (d = 0; d < a.length;) {
          f = a[d];
          ++d;
          e = f.get_frame().frame;
          var k = Math.abs(b.x - e.x) <= 1e-7 && Math.abs(b.y - e.y) <= 1e-7 && Math.abs(b.width - e.width) <= 1e-7 && Math.abs(b.height - e.height) <= 1e-7;
          if (e._weak && !e._inPool) {
            e._inPool = true;
            e._weak = false;
            Ia._pool.putUnsafe(e);
          }
          if (k) {
            k = c;
            e = f.border;
            k = Math.abs(k.x - e.x) <= 1e-7 && Math.abs(k.y - e.y) <= 1e-7;
            if (e._weak) {
              e.put();
            }
            e = k;
          } else {
            e = false;
          }
          if (e && f.get_frame().type != 2) {
            return f;
          }
        }
        k = c;
        if (k._weak) {
          k.put();
        }
        if (b._weak && !b._inPool) {
          b._inPool = true;
          b._weak = false;
          Ia._pool.putUnsafe(b);
        }
        return null;
      };
      Xf.__super__ = Be;
      Xf.prototype = q(Be.prototype, {
        get_frame: function () {
          return this.frames[0];
        },
        __class__: Xf,
        __properties__: {
          get_frame: "get_frame"
        }
      });
      function Hg(a, b) {
        this.numRows = this.numCols = 0;
        Be.call(this, a, Af.TILES, b);
      }
      h["flixel.graphics.frames.FlxTileFrames"] = Hg;
      Hg.__name__ = "flixel.graphics.frames.FlxTileFrames";
      Hg.fromGraphic = function (a, b, c, d) {
        var e = Hg.findFrame(a, b, c, null, d);
        if (e != null) {
          return e;
        }
        if (c == null) {
          var f = 0;
          var k = 0;
          var g = a.width;
          var l = a.height;
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          var J = Ia._pool.get();
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          J.x = f;
          J.y = k;
          J.width = g;
          J.height = l;
          J._inPool = false;
          c = J;
        } else {
          if (c.width == 0) {
            c.width = a.width - c.x;
          }
          if (c.height == 0) {
            c.height = a.height - c.y;
          }
        }
        if (d == null) {
          var h = 0;
          e = 0;
          if (e == null) {
            e = 0;
          }
          if (h == null) {
            h = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (h == null) {
            h = 0;
          }
          e = da.pool.get().set(h, e);
          e._inPool = false;
          d = e;
        }
        e = new Hg(a);
        e.region = c;
        e.atlasFrame = null;
        e.tileSize = b;
        e.tileSpacing = d;
        c.x = Math.floor(c.x);
        c.y = Math.floor(c.y);
        c.width = Math.floor(c.width);
        c.height = Math.floor(c.height);
        d.set_x(Math.floor(d.x));
        d.set_y(Math.floor(d.y));
        b.set_x(Math.floor(b.x));
        b.set_y(Math.floor(b.y));
        a = b.x + d.x;
        h = b.y + d.y;
        var m = b.y == 0 ? 1 : (c.height + d.y) / h | 0;
        d = b.x == 0 ? 1 : (c.width + d.x) / a | 0;
        for (var p = 0; p < m;) {
          var n = p++;
          for (var q = 0, r = d; q < r;) {
            J = q++;
            f = c.x + J * a;
            k = c.y + n * h;
            g = b.x;
            l = b.y;
            if (l == null) {
              l = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            J = Ia._pool.get();
            if (l == null) {
              l = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            J.x = f;
            J.y = k;
            J.width = g;
            J.height = l;
            J._inPool = false;
            e.addSpriteSheetFrame(J);
          }
        }
        e.numCols = d;
        e.numRows = m;
        return e;
      };
      Hg.findFrame = function (a, b, c, d, e, f) {
        d = Af.TILES;
        var k = a.frameCollections.get(d);
        if (k == null) {
          k = [];
          a.frameCollections.set(d, k);
        }
        a = k;
        for (d = 0; d < a.length;) {
          k = a[d];
          ++d;
          if (k.equals(b, c, null, e, f)) {
            return k;
          }
        }
        return null;
      };
      Hg.__super__ = Be;
      Hg.prototype = q(Be.prototype, {
        equals: function (a, b, c, d, e) {
          if (this.region == null && this.atlasFrame == null) {
            return false;
          }
          if (c != null) {
            b = c.frame;
          }
          if (b == null) {
            var f = b = 0;
            var k = this.parent.width;
            var g = this.parent.height;
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            var l = Ia._pool.get();
            if (g == null) {
              g = 0;
            }
            if (k == null) {
              k = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (b == null) {
              b = 0;
            }
            l.x = b;
            l.y = f;
            l.width = k;
            l.height = g;
            l._inPool = false;
            l._weak = true;
            b = l;
          }
          if (d == null) {
            l = f = 0;
            if (l == null) {
              l = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (l == null) {
              l = 0;
            }
            if (f == null) {
              f = 0;
            }
            l = da.pool.get().set(f, l);
            l._inPool = false;
            l._weak = true;
            d = l;
          }
          if (e == null) {
            l = f = 0;
            if (l == null) {
              l = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (l == null) {
              l = 0;
            }
            if (f == null) {
              f = 0;
            }
            l = da.pool.get().set(f, l);
            l._inPool = false;
            l._weak = true;
            e = l;
          }
          if (this.atlasFrame == c) {
            l = this.region;
            c = Math.abs(l.x - b.x) <= 1e-7 && Math.abs(l.y - b.y) <= 1e-7 && Math.abs(l.width - b.width) <= 1e-7 && Math.abs(l.height - b.height) <= 1e-7;
            if (b._weak && !b._inPool) {
              b._inPool = true;
              b._weak = false;
              Ia._pool.putUnsafe(b);
            }
          } else {
            c = false;
          }
          if (c) {
            l = this.tileSize;
            c = Math.abs(l.x - a.x) <= 1e-7 && Math.abs(l.y - a.y) <= 1e-7;
            if (a._weak) {
              a.put();
            }
            a = c;
          } else {
            a = false;
          }
          if (a) {
            l = this.tileSpacing;
            c = Math.abs(l.x - d.x) <= 1e-7 && Math.abs(l.y - d.y) <= 1e-7;
            if (d._weak) {
              d.put();
            }
            d = c;
          } else {
            d = false;
          }
          if (d) {
            l = this.border;
            c = Math.abs(l.x - e.x) <= 1e-7 && Math.abs(l.y - e.y) <= 1e-7;
            if (e._weak) {
              e.put();
            }
            return c;
          } else {
            return false;
          }
        },
        destroy: function () {
          Be.prototype.destroy.call(this);
          this.atlasFrame = null;
          this.region = ca.put(this.region);
          this.tileSize = ca.put(this.tileSize);
          this.tileSpacing = ca.put(this.tileSpacing);
        },
        __class__: Hg
      });
      function Kd() {
        this.blending = 0;
        this.antialiasing = this.colored = this.hasColorOffsets = false;
      }
      h["flixel.graphics.tile.FlxDrawBaseItem"] = Kd;
      Kd.__name__ = "flixel.graphics.tile.FlxDrawBaseItem";
      Kd.blendToInt = function (a) {
        return 0;
      };
      Kd.prototype = {
        reset: function () {
          this.graphics = null;
          this.antialiasing = false;
          this.next = this.nextTyped = null;
        },
        render: function (a) {
          Kd.drawCalls++;
        },
        __class__: Kd
      };
      var wk = w["flixel.graphics.tile.FlxDrawItemType"] = {
        __ename__: "flixel.graphics.tile.FlxDrawItemType",
        __constructs__: null,
        TILES: {
          _hx_name: "TILES",
          _hx_index: 0,
          __enum__: "flixel.graphics.tile.FlxDrawItemType",
          toString: p
        },
        TRIANGLES: {
          _hx_name: "TRIANGLES",
          _hx_index: 1,
          __enum__: "flixel.graphics.tile.FlxDrawItemType",
          toString: p
        }
      };
      wk.__constructs__ = [wk.TILES, wk.TRIANGLES];
      function xk() {
        Kd.call(this);
        this.type = wk.TILES;
        this.rects = kb.toFloatVector(null);
        this.transforms = kb.toFloatVector(null);
        this.alphas = [];
      }
      h["flixel.graphics.tile.FlxDrawQuadsItem"] = xk;
      xk.__name__ = "flixel.graphics.tile.FlxDrawQuadsItem";
      xk.__super__ = Kd;
      xk.prototype = q(Kd.prototype, {
        reset: function () {
          Kd.prototype.reset.call(this);
          this.rects.set_length(0);
          this.transforms.set_length(0);
          this.alphas.splice(0, this.alphas.length);
          if (this.colorMultipliers != null) {
            this.colorMultipliers.splice(0, this.colorMultipliers.length);
          }
          if (this.colorOffsets != null) {
            this.colorOffsets.splice(0, this.colorOffsets.length);
          }
        },
        addQuad: function (a, b, c) {
          a = a.frame;
          this.rects.push(a.x);
          this.rects.push(a.y);
          this.rects.push(a.width);
          this.rects.push(a.height);
          this.transforms.push(b.a);
          this.transforms.push(b.b);
          this.transforms.push(b.c);
          this.transforms.push(b.d);
          this.transforms.push(b.tx);
          this.transforms.push(b.ty);
          b = c != null ? c.alphaMultiplier : 1;
          this.alphas.push(b);
          this.alphas.push(b);
          this.alphas.push(b);
          this.alphas.push(b);
          if (this.colored || this.hasColorOffsets) {
            if (this.colorMultipliers == null) {
              this.colorMultipliers = [];
            }
            if (this.colorOffsets == null) {
              this.colorOffsets = [];
            }
            b = 0;
            while (b < 4) {
              b++;
              if (c != null) {
                this.colorMultipliers.push(c.redMultiplier);
                this.colorMultipliers.push(c.greenMultiplier);
                this.colorMultipliers.push(c.blueMultiplier);
                this.colorOffsets.push(c.redOffset);
                this.colorOffsets.push(c.greenOffset);
                this.colorOffsets.push(c.blueOffset);
                this.colorOffsets.push(c.alphaOffset);
              } else {
                this.colorMultipliers.push(1);
                this.colorMultipliers.push(1);
                this.colorMultipliers.push(1);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
                this.colorOffsets.push(0);
              }
              this.colorMultipliers.push(1);
            }
          }
        },
        render: function (a) {
          if (this.rects.get_length() != 0) {
            if (this.shader == null && this.graphics.shader == null) {
              throw I.thrown("Attempted to render an invalid FlxDrawItem, did you destroy a cached sprite?");
            }
            var b = this.shader ?? this.graphics.shader;
            b.bitmap.input = this.graphics.bitmap;
            b.bitmap.filter = a.antialiasing || this.antialiasing ? 4 : 5;
            b.alpha.value = this.alphas;
            if (this.colored || this.hasColorOffsets) {
              b.colorMultiplier.value = this.colorMultipliers;
              b.colorOffset.value = this.colorOffsets;
            }
            var c = b.hasTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = true;
            c = b.hasColorTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = this.colored || this.hasColorOffsets;
            a.canvas.get_graphics().overrideBlendMode(this.blend);
            a.canvas.get_graphics().beginShaderFill(b);
            a.canvas.get_graphics().drawQuads(this.rects, null, this.transforms);
            Kd.prototype.render.call(this, a);
          }
        },
        __class__: xk
      });
      function In() {
        this.verticesPosition = this.indicesPosition = this.colorsPosition = 0;
        this.colors = kb.toIntVector(null);
        this.uvtData = kb.toFloatVector(null);
        this.indices = kb.toIntVector(null);
        this.vertices = kb.toFloatVector(null);
        Kd.call(this);
        this.type = wk.TRIANGLES;
        this.alphas = [];
      }
      h["flixel.graphics.tile.FlxDrawTrianglesItem"] = In;
      In.__name__ = "flixel.graphics.tile.FlxDrawTrianglesItem";
      In.__super__ = Kd;
      In.prototype = q(Kd.prototype, {
        render: function (a) {
          if (g.renderTile && !(this.get_numTriangles() <= 0)) {
            var b = this.shader ?? this.graphics.shader;
            b.bitmap.input = this.graphics.bitmap;
            b.bitmap.filter = a.antialiasing || this.antialiasing ? 4 : 5;
            b.bitmap.wrap = 2;
            b.alpha.value = this.alphas;
            if (this.colored || this.hasColorOffsets) {
              b.colorMultiplier.value = this.colorMultipliers;
              b.colorOffset.value = this.colorOffsets;
            }
            var c = b.hasTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = true;
            c = b.hasColorTransform;
            if (c.value == null) {
              c.value = [];
            }
            c.value[0] = this.colored || this.hasColorOffsets;
            a.canvas.get_graphics().overrideBlendMode(this.blend);
            a.canvas.get_graphics().beginShaderFill(b);
            a.canvas.get_graphics().drawTriangles(this.vertices, this.indices, this.uvtData, 1);
            a.canvas.get_graphics().endFill();
            Kd.prototype.render.call(this, a);
          }
        },
        reset: function () {
          Kd.prototype.reset.call(this);
          var a = this.vertices;
          var b = this.vertices.get_length();
          for (var c = a.__tempIndex = 0, d = []; c < d.length;) {
            var e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.indices;
          b = this.indices.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.uvtData;
          b = this.uvtData.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          a = this.colors;
          b = this.colors.get_length();
          c = a.__tempIndex = 0;
          for (d = []; c < d.length;) {
            e = d[c++];
            a.insertAt(a.__tempIndex, e);
            a.__tempIndex++;
          }
          a.splice(a.__tempIndex, b);
          this.colorsPosition = this.indicesPosition = this.verticesPosition = 0;
          this.alphas.splice(0, this.alphas.length);
          if (this.colorMultipliers != null) {
            this.colorMultipliers.splice(0, this.colorMultipliers.length);
          }
          if (this.colorOffsets != null) {
            this.colorOffsets.splice(0, this.colorOffsets.length);
          }
        },
        get_numTriangles: function () {
          return this.indices.get_length() / 3 | 0;
        },
        __class__: In
      });
      function Cc(a, b) {
        this._groupMembers = a;
        this._filter = b;
        this._cursor = 0;
        this._length = this._groupMembers.length;
      }
      h["flixel.group.FlxTypedGroupIterator"] = Cc;
      Cc.__name__ = "flixel.group.FlxTypedGroupIterator";
      Cc.prototype = {
        next: function () {
          if (this.hasNext()) {
            return this._groupMembers[this._cursor++];
          } else {
            return null;
          }
        },
        hasNext: function () {
          while (this._cursor < this._length && (this._groupMembers[this._cursor] == null || this._filter != null && !this._filter(this._groupMembers[this._cursor]))) {
            this._cursor++;
          }
          return this._cursor < this._length;
        },
        __class__: Cc
      };
      function Pk(a, b) {
        this.parentSprite = a;
        Xe.call(this, b);
      }
      h["flixel.group._FlxSpriteContainer.SpriteContainer"] = Pk;
      Pk.__name__ = "flixel.group._FlxSpriteContainer.SpriteContainer";
      Pk.__super__ = Xe;
      Pk.prototype = q(Xe.prototype, {
        get_container: function () {
          return this.parentSprite.get_container();
        },
        getCamerasLegacy: function () {
          return this._cameras ?? this.parentSprite.getCamerasLegacy();
        },
        getCameras: function () {
          return this._cameras ?? this.parentSprite.getCameras();
        },
        __class__: Pk
      });
      function xn() {
        this.x = this.y = this.z = 0;
        if (pc.get_isSupported()) {
          this._sensor = new pc();
          this._sensor.addEventListener("update", n(this, this.update));
        }
      }
      h["flixel.input.FlxAccelerometer"] = xn;
      xn.__name__ = "flixel.input.FlxAccelerometer";
      xn.prototype = {
        update: function (a) {
          this.x = a.accelerationX;
          this.y = a.accelerationY;
          this.z = a.accelerationZ;
          this.x /= 10;
          this.y /= 10;
          this.z /= 10;
        },
        __class__: xn
      };
      function sj(a, b) {
        this.status = a;
        this.keyManager = b;
      }
      h["flixel.input.FlxBaseKeyList"] = sj;
      sj.__name__ = "flixel.input.FlxBaseKeyList";
      sj.prototype = {
        get_ANY: function () {
          for (var a = 0, b = this.keyManager._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && this.keyManager.checkStatusUnsafe(c.ID, this.status)) {
              return true;
            }
          }
          return false;
        },
        get_NONE: function () {
          for (var a = 0, b = this.keyManager._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && this.keyManager.checkStatusUnsafe(c.ID, this.status)) {
              return false;
            }
          }
          return true;
        },
        __class__: sj,
        __properties__: {
          get_NONE: "get_NONE",
          get_ANY: "get_ANY"
        }
      };
      function je(a) {
        this.current = this.last = 0;
        this.ID = a;
      }
      h["flixel.input.FlxInput"] = je;
      je.__name__ = "flixel.input.FlxInput";
      je.__interfaces__ = [vh];
      je.prototype = {
        press: function () {
          this.last = this.current;
          this.current = this.current == 1 || this.current == 2 ? 1 : 2;
        },
        release: function () {
          this.last = this.current;
          this.current = this.current == 1 || this.current == 2 ? -1 : 0;
        },
        update: function () {
          if (this.last == -1 && this.current == -1) {
            this.current = 0;
          } else if (this.last == 2 && this.current == 2) {
            this.current = 1;
          }
          this.last = this.current;
        },
        reset: function () {
          this.last = this.current = 0;
        },
        hasState: function (a) {
          switch (a) {
            case -1:
              return this.current == -1;
            case 0:
              if (this.current != 0) {
                return this.current == -1;
              } else {
                return true;
              }
            case 1:
              if (this.current != 1) {
                return this.current == 2;
              } else {
                return true;
              }
            case 2:
              return this.current == 2;
          }
        },
        get_justReleased: function () {
          return this.current == -1;
        },
        get_pressed: function () {
          if (this.current != 1) {
            return this.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.current == 2;
        },
        __class__: je,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      };
      function Og(a) {
        this._keyListMap = new Ac();
        this._keyListArray = [];
        this.preventDefaultKeys = [];
        this.enabled = true;
        ia.get_current().stage.addEventListener("keyDown", n(this, this.onKeyDown));
        ia.get_current().stage.addEventListener("keyUp", n(this, this.onKeyUp));
        this.pressed = a(1, this);
        this.released = a(0, this);
        this.justPressed = a(2, this);
        this.justReleased = a(-1, this);
      }
      h["flixel.input.FlxKeyManager"] = Og;
      Og.__name__ = "flixel.input.FlxKeyManager";
      Og.__interfaces__ = [Ng];
      Og.prototype = {
        firstJustPressed: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == 2) {
              return c.ID;
            }
          }
          return -1;
        },
        firstJustReleased: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == -1) {
              return c.ID;
            }
          }
          return -1;
        },
        checkStatus: function (a, b) {
          if (a == -2) {
            switch (b) {
              case -1:
                return this.justReleased.get_ANY();
              case 0:
                return this.released.get_ANY();
              case 1:
                return this.pressed.get_ANY();
              case 2:
                return this.justPressed.get_ANY();
            }
          }
          if (a == -1) {
            switch (b) {
              case -1:
                return this.justReleased.get_NONE();
              case 0:
                return this.released.get_NONE();
              case 1:
                return this.pressed.get_NONE();
              case 2:
                return this.justPressed.get_NONE();
            }
          }
          if (this._keyListMap.h.hasOwnProperty(a)) {
            return this.checkStatusUnsafe(a, b);
          } else {
            return false;
          }
        },
        checkStatusUnsafe: function (a, b) {
          return this._keyListMap.h[a].hasState(b);
        },
        destroy: function () {
          this._keyListMap = this._keyListArray = null;
        },
        reset: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.release();
            }
          }
        },
        update: function () {
          for (var a = 0, b = this._keyListArray; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.update();
            }
          }
        },
        checkKeyArrayState: function (a, b) {
          if (a == null) {
            return false;
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            if (this.checkStatus(d, b)) {
              return true;
            }
          }
          return false;
        },
        onKeyUp: function (a) {
          var b = this.resolveKeyCode(a);
          this.handlePreventDefaultKeys(b, a);
          if (this.enabled) {
            a = this._keyListMap.h[b];
            if (a != null) {
              a.release();
            }
          }
        },
        onKeyDown: function (a) {
          var b = this.resolveKeyCode(a);
          this.handlePreventDefaultKeys(b, a);
          if (this.enabled) {
            a = this._keyListMap.h[b];
            if (a != null) {
              a.press();
            }
          }
        },
        handlePreventDefaultKeys: function (a, b) {
          a = this._keyListMap.h[a];
          if (a != null && this.preventDefaultKeys != null && this.preventDefaultKeys.indexOf(a.ID) != -1) {
            b.stopImmediatePropagation();
            b.stopPropagation();
            b.preventDefault();
          }
        },
        resolveKeyCode: function (a) {
          return a.keyCode;
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        __class__: Og
      };
      function tj(a, b, c, d) {
        this.ID = a;
        this.startPosition = b;
        this.endPosition = c;
        this._startTimeInTicks = d;
        this._endTimeInTicks = g.game.ticks;
      }
      h["flixel.input.FlxSwipe"] = tj;
      tj.__name__ = "flixel.input.FlxSwipe";
      tj.__interfaces__ = [ub];
      tj.prototype = {
        destroy: function () {
          this.startPosition = ca.put(this.startPosition);
          this.endPosition = ca.put(this.endPosition);
        },
        __class__: tj
      };
      function Vk(a, b, c, d) {
        this.buttons = [];
        this._deadZone = 0.15;
        d = [];
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        d.push(0);
        this.axis = d;
        this.deadZoneMode = Uk.INDEPENDENT_AXES;
        this.connected = true;
        this.id = a;
        this.manager = b;
        this.pressed = new xh(1, this);
        this.released = new xh(0, this);
        this.justPressed = new xh(2, this);
        this.justReleased = new xh(-1, this);
        this.analog = new Jn(this);
        this.motion = new Kn(this);
        this.pointer = new Ln(this);
        if (c == null) {
          c = uc.XINPUT;
        }
        this.set_model(c);
        this.detectedModel = c;
      }
      h["flixel.input.gamepad.FlxGamepad"] = Vk;
      Vk.__name__ = "flixel.input.gamepad.FlxGamepad";
      Vk.__interfaces__ = [ub];
      Vk.prototype = {
        getButton: function (a) {
          if (a == -1) {
            return null;
          }
          var b = this.buttons[a];
          if (b == null) {
            b = new Wk(a);
            this.buttons[a] = b;
          }
          return b;
        },
        update: function () {
          if (this._device != null) {
            for (var a = 0, b = this._device.get_numControls(); a < b;) {
              var c = a++;
              var d = this._device.getControlAt(c);
              var e = this.getButton(c);
              if (this.isAxisForAnalogStick(c)) {
                this.handleAxisMove(c, d.value, e.value);
              }
              e.value = d.value;
              d = Math.abs(d.value);
              if (d < this.get_deadZone()) {
                e.release();
              } else if (d > this.get_deadZone()) {
                e.press();
              }
            }
            a = 0;
            for (b = this.buttons; a < b.length;) {
              e = b[a];
              ++a;
              if (e != null) {
                e.update();
              }
            }
          }
        },
        reset: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.reset();
            }
          }
          b = this.axis.length;
          for (a = 0; a < b;) {
            c = a++;
            this.axis[c] = 0;
          }
        },
        destroy: function () {
          this.connected = false;
          this.manager = this.axis = this.buttons = null;
        },
        checkButtonArrayState: function (a, b) {
          if (a == null) {
            return false;
          }
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            switch (d) {
              case -2:
                d = this.anyButton(b);
                break;
              case -1:
                d = !this.anyButton(b);
                break;
              default:
                d = this.mapping.getRawID(d);
                d = this.buttons[d];
                d = d != null && d.hasState(b);
            }
            if (d) {
              return true;
            }
          }
          return false;
        },
        firstJustPressedRawID: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == 2) {
              return c.ID;
            }
          }
          return -1;
        },
        firstJustReleasedRawID: function () {
          for (var a = 0, b = this.buttons; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.current == -1) {
              return c.ID;
            }
          }
          return -1;
        },
        getAxis: function (a) {
          a = this.getAxisValue(this.mapping.getRawID(a));
          if (Math.abs(a) > this.get_deadZone()) {
            return a;
          } else {
            return 0;
          }
        },
        isAxisForAnalogStick: function (a) {
          var b = this.mapping.leftStick;
          var c = this.mapping.rightStick;
          if (b != null && (a == b.x || a == b.y) || c != null && (a == c.x || a == c.y)) {
            return true;
          } else {
            return false;
          }
        },
        getYAxisRaw: function (a) {
          return this.getAnalogYAxisValue(a);
        },
        anyButton: function (a) {
          if (a == null) {
            a = 1;
          }
          for (var b = 0, c = this.buttons; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.hasState(a)) {
              return true;
            }
          }
          return false;
        },
        anyInput: function () {
          if (this.anyButton()) {
            return true;
          }
          for (var a = 0, b = this.axis.length; a < b;) {
            a++;
            if (this.axis[0] != 0) {
              return true;
            }
          }
          return false;
        },
        getAxisValue: function (a) {
          var b = 0;
          if (a == -1) {
            return 0;
          }
          if (this._device != null && this._device.enabled) {
            var c = this._device.get_numControls() - 1;
            c = a >= 0 && (c == null || a <= c);
          } else {
            c = false;
          }
          if (c) {
            b = this._device.getControlAt(a).value;
          }
          if (this.isAxisForAnalogStick(a) && this.mapping.isAxisFlipped(a)) {
            b *= -1;
          }
          return b;
        },
        getAnalogXAxisValue: function (a) {
          if (a == null) {
            return 0;
          } else if (this.deadZoneMode == Uk.CIRCULAR) {
            return this.getAnalogAxisValueCircular(a, a.x);
          } else {
            return this.getAnalogAxisValueIndependent(a.x);
          }
        },
        getAnalogYAxisValue: function (a) {
          if (a == null) {
            return 0;
          } else if (this.deadZoneMode == Uk.CIRCULAR) {
            return this.getAnalogAxisValueCircular(a, a.y);
          } else {
            return this.getAnalogAxisValueIndependent(a.y);
          }
        },
        getAnalogAxisValueCircular: function (a, b) {
          if (a == null) {
            return 0;
          }
          var c = this.getAxisValue(a.x);
          a = this.getAxisValue(a.y);
          if (a == null) {
            a = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (c == null) {
            c = 0;
          }
          c = da.pool.get().set(c, a);
          c._inPool = false;
          a = Math.sqrt(c.x * c.x + c.y * c.y);
          c.put();
          if (a > this.get_deadZone()) {
            return this.getAxisValue(b);
          } else {
            return 0;
          }
        },
        getAnalogAxisValueIndependent: function (a) {
          a = this.getAxisValue(a);
          if (Math.abs(a) > this.get_deadZone()) {
            return a;
          } else {
            return 0;
          }
        },
        handleAxisMove: function (a, b, c) {
          var d = b;
          if (this.mapping.isAxisFlipped(a)) {
            d *= -1;
          }
          b = d;
          d = c;
          if (this.mapping.isAxisFlipped(a)) {
            d *= -1;
          }
          c = d;
          d = this.mapping.leftStick;
          var e = this.mapping.rightStick;
          d = d != null && a == d.x || a == d.y ? d : e != null && a == e.x || a == e.y ? e : null;
          if (d.mode == Pg.ONLY_DIGITAL || d.mode == Pg.BOTH) {
            this.handleAxisMoveSub(d, a, b, c, 1);
            this.handleAxisMoveSub(d, a, b, c, -1);
          }
        },
        handleAxisMoveSub: function (a, b, c, d, e) {
          if (e == null) {
            e = 1;
          }
          var f = -1;
          if (b == a.x) {
            f = e < 0 ? a.rawLeft : a.rawRight;
          } else if (b == a.y) {
            f = e < 0 ? a.rawUp : a.rawDown;
          }
          a = a.digitalThreshold;
          c *= e;
          d *= e;
          if (c > a && d <= a) {
            f = this.getButton(f);
            if (f != null) {
              f.press();
            }
          } else if (c <= a && d > a) {
            f = this.getButton(f);
            if (f != null) {
              f.release();
            }
          }
        },
        createMappingForModel: function (a) {
          switch (a._hx_index) {
            case 0:
              return new Xk(this.attachment);
            case 1:
              return new Yk(this.attachment);
            case 2:
              return new Zk(this.attachment);
            case 3:
              return new $k(this.attachment);
            case 4:
              return new uj(this.attachment);
            case 5:
              return new al(this.attachment);
            case 6:
              return new bl(this.attachment);
            case 7:
              return new cl(this.attachment);
            case 8:
              return new dl(this.attachment);
            case 9:
              return new el(this.attachment);
            case 10:
              return new fl(this.attachment);
            default:
              return new uj(this.attachment);
          }
        },
        set_model: function (a) {
          this.model = a;
          this.mapping = this.createMappingForModel(this.model);
          return this.model;
        },
        get_deadZone: function () {
          if (this.manager == null || this.manager.globalDeadZone == null) {
            return this._deadZone;
          } else {
            return this.manager.globalDeadZone;
          }
        },
        __class__: Vk,
        __properties__: {
          get_deadZone: "get_deadZone",
          set_model: "set_model"
        }
      };
      var Uk = w["flixel.input.gamepad.FlxGamepadDeadZoneMode"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
        __constructs__: null,
        INDEPENDENT_AXES: {
          _hx_name: "INDEPENDENT_AXES",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
          toString: p
        },
        CIRCULAR: {
          _hx_name: "CIRCULAR",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadDeadZoneMode",
          toString: p
        }
      };
      Uk.__constructs__ = [Uk.INDEPENDENT_AXES, Uk.CIRCULAR];
      var uc = w["flixel.input.gamepad.FlxGamepadModel"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadModel",
        __constructs__: null,
        LOGITECH: {
          _hx_name: "LOGITECH",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        OUYA: {
          _hx_name: "OUYA",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        PS4: {
          _hx_name: "PS4",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        PSVITA: {
          _hx_name: "PSVITA",
          _hx_index: 3,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        XINPUT: {
          _hx_name: "XINPUT",
          _hx_index: 4,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        MAYFLASH_WII_REMOTE: {
          _hx_name: "MAYFLASH_WII_REMOTE",
          _hx_index: 5,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        WII_REMOTE: {
          _hx_name: "WII_REMOTE",
          _hx_index: 6,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        MFI: {
          _hx_name: "MFI",
          _hx_index: 7,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_PRO: {
          _hx_name: "SWITCH_PRO",
          _hx_index: 8,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_JOYCON_LEFT: {
          _hx_name: "SWITCH_JOYCON_LEFT",
          _hx_index: 9,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        SWITCH_JOYCON_RIGHT: {
          _hx_name: "SWITCH_JOYCON_RIGHT",
          _hx_index: 10,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 11,
          __enum__: "flixel.input.gamepad.FlxGamepadModel",
          toString: p
        }
      };
      uc.__constructs__ = [uc.LOGITECH, uc.OUYA, uc.PS4, uc.PSVITA, uc.XINPUT, uc.MAYFLASH_WII_REMOTE, uc.WII_REMOTE, uc.MFI, uc.SWITCH_PRO, uc.SWITCH_JOYCON_LEFT, uc.SWITCH_JOYCON_RIGHT, uc.UNKNOWN];
      var Mn = w["flixel.input.gamepad.FlxGamepadAttachment"] = {
        __ename__: "flixel.input.gamepad.FlxGamepadAttachment",
        __constructs__: null,
        WII_NUNCHUCK: {
          _hx_name: "WII_NUNCHUCK",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        },
        WII_CLASSIC_CONTROLLER: {
          _hx_name: "WII_CLASSIC_CONTROLLER",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        },
        NONE: {
          _hx_name: "NONE",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxGamepadAttachment",
          toString: p
        }
      };
      Mn.__constructs__ = [Mn.WII_NUNCHUCK, Mn.WII_CLASSIC_CONTROLLER, Mn.NONE];
      function Mc(a, b, c) {
        this.mode = Pg.BOTH;
        this.digitalThreshold = 0.5;
        this.rawUp = this.rawDown = this.rawLeft = this.rawRight = -1;
        this.x = a;
        this.y = b;
        if (c != null) {
          this.mode = c.mode ?? Pg.BOTH;
          this.rawUp = c.up ?? -1;
          this.rawDown = c.down ?? -1;
          this.rawLeft = c.left ?? -1;
          this.rawRight = c.right ?? -1;
          this.digitalThreshold = c.threshold ?? 0.5;
        }
      }
      h["flixel.input.gamepad.FlxGamepadAnalogStick"] = Mc;
      Mc.__name__ = "flixel.input.gamepad.FlxGamepadAnalogStick";
      Mc.prototype = {
        __class__: Mc
      };
      var Pg = w["flixel.input.gamepad.FlxAnalogToDigitalMode"] = {
        __ename__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
        __constructs__: null,
        BOTH: {
          _hx_name: "BOTH",
          _hx_index: 0,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        },
        ONLY_DIGITAL: {
          _hx_name: "ONLY_DIGITAL",
          _hx_index: 1,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        },
        ONLY_ANALOG: {
          _hx_name: "ONLY_ANALOG",
          _hx_index: 2,
          __enum__: "flixel.input.gamepad.FlxAnalogToDigitalMode",
          toString: p
        }
      };
      Pg.__constructs__ = [Pg.BOTH, Pg.ONLY_DIGITAL, Pg.ONLY_ANALOG];
      function Wk(a) {
        this.value = 0;
        je.call(this, a);
      }
      h["flixel.input.gamepad.FlxGamepadButton"] = Wk;
      Wk.__name__ = "flixel.input.gamepad.FlxGamepadButton";
      Wk.__super__ = je;
      Wk.prototype = q(je.prototype, {
        __class__: Wk
      });
      var hg = {};
      function vb() {
        va.call(this);
        vb.__instances.push(this);
      }
      h["openfl.ui.GameInput"] = vb;
      vb.__name__ = "openfl.ui.GameInput";
      vb.getDeviceAt = function (a) {
        if (a >= 0 && a < vb.__deviceList.length) {
          return vb.__deviceList[a];
        } else {
          return null;
        }
      };
      vb.__getDevice = function (a) {
        if (a == null) {
          return null;
        }
        if (vb.__devices.h.__keys__[a.__id__] == null) {
          var b = Kc.__getDeviceData();
          var c = b[a.id].id;
          b = Kc.__getDeviceData();
          b = new Nn(c, b[a.id].id);
          vb.__deviceList.push(b);
          vb.__devices.set(a, b);
          vb.numDevices = vb.__deviceList.length;
        }
        return vb.__devices.h[a.__id__];
      };
      vb.__onGamepadAxisMove = function (a, b, c) {
        a = vb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__axis.h.hasOwnProperty(b)) {
            if (b == null) {
              var d = "null";
            } else {
              switch (b) {
                case 0:
                  d = "LEFT_X";
                  break;
                case 1:
                  d = "LEFT_Y";
                  break;
                case 2:
                  d = "RIGHT_X";
                  break;
                case 3:
                  d = "RIGHT_Y";
                  break;
                case 4:
                  d = "TRIGGER_LEFT";
                  break;
                case 5:
                  d = "TRIGGER_RIGHT";
                  break;
                default:
                  d = "UNKNOWN (" + b + ")";
              }
            }
            d = new Ne(a, "AXIS_" + d, -1, 1);
            a.__axis.h[b] = d;
            a.__controls.push(d);
          }
          d = a.__axis.h[b];
          d.value = c;
          d.dispatchEvent(new za("change"));
        }
      };
      vb.__onGamepadButtonDown = function (a, b) {
        a = vb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__button.h.hasOwnProperty(b)) {
            if (b == null) {
              var c = "null";
            } else {
              switch (b) {
                case 0:
                  c = "A";
                  break;
                case 1:
                  c = "B";
                  break;
                case 2:
                  c = "X";
                  break;
                case 3:
                  c = "Y";
                  break;
                case 4:
                  c = "BACK";
                  break;
                case 5:
                  c = "GUIDE";
                  break;
                case 6:
                  c = "START";
                  break;
                case 7:
                  c = "LEFT_STICK";
                  break;
                case 8:
                  c = "RIGHT_STICK";
                  break;
                case 9:
                  c = "LEFT_SHOULDER";
                  break;
                case 10:
                  c = "RIGHT_SHOULDER";
                  break;
                case 11:
                  c = "DPAD_UP";
                  break;
                case 12:
                  c = "DPAD_DOWN";
                  break;
                case 13:
                  c = "DPAD_LEFT";
                  break;
                case 14:
                  c = "DPAD_RIGHT";
                  break;
                default:
                  c = "UNKNOWN (" + b + ")";
              }
            }
            c = new Ne(a, "BUTTON_" + c, 0, 1);
            a.__button.h[b] = c;
            a.__controls.push(c);
          }
          c = a.__button.h[b];
          c.value = 1;
          c.dispatchEvent(new za("change"));
        }
      };
      vb.__onGamepadButtonUp = function (a, b) {
        a = vb.__getDevice(a);
        if (a != null && a.enabled) {
          if (!a.__button.h.hasOwnProperty(b)) {
            if (b == null) {
              var c = "null";
            } else {
              switch (b) {
                case 0:
                  c = "A";
                  break;
                case 1:
                  c = "B";
                  break;
                case 2:
                  c = "X";
                  break;
                case 3:
                  c = "Y";
                  break;
                case 4:
                  c = "BACK";
                  break;
                case 5:
                  c = "GUIDE";
                  break;
                case 6:
                  c = "START";
                  break;
                case 7:
                  c = "LEFT_STICK";
                  break;
                case 8:
                  c = "RIGHT_STICK";
                  break;
                case 9:
                  c = "LEFT_SHOULDER";
                  break;
                case 10:
                  c = "RIGHT_SHOULDER";
                  break;
                case 11:
                  c = "DPAD_UP";
                  break;
                case 12:
                  c = "DPAD_DOWN";
                  break;
                case 13:
                  c = "DPAD_LEFT";
                  break;
                case 14:
                  c = "DPAD_RIGHT";
                  break;
                default:
                  c = "UNKNOWN (" + b + ")";
              }
            }
            c = new Ne(a, "BUTTON_" + c, 0, 1);
            a.__button.h[b] = c;
            a.__controls.push(c);
          }
          c = a.__button.h[b];
          c.value = 0;
          c.dispatchEvent(new za("change"));
        }
      };
      vb.__onGamepadConnect = function (a) {
        a = vb.__getDevice(a);
        if (a != null) {
          for (var b = 0, c = vb.__instances; b < c.length;) {
            var d = c[b];
            ++b;
            d.dispatchEvent(new fi("deviceAdded", true, false, a));
          }
        }
      };
      vb.__onGamepadDisconnect = function (a) {
        var b = vb.__devices.h[a.__id__];
        if (b != null) {
          if (vb.__devices.h.__keys__[a.__id__] != null) {
            L.remove(vb.__deviceList, vb.__devices.h[a.__id__]);
            vb.__devices.remove(a);
          }
          vb.numDevices = vb.__deviceList.length;
          a = 0;
          for (var c = vb.__instances; a < c.length;) {
            var d = c[a];
            ++a;
            d.dispatchEvent(new fi("deviceRemoved", true, false, b));
          }
        }
      };
      vb.__super__ = va;
      vb.prototype = q(va.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          va.prototype.addEventListener.call(this, a, b, c, d, e);
          if (a == "deviceAdded") {
            a = 0;
            b = vb.__deviceList;
            while (a < b.length) {
              c = b[a];
              ++a;
              this.dispatchEvent(new fi("deviceAdded", true, false, c));
            }
          }
        },
        __class__: vb
      });
      function lg() {
        this._activeGamepads = [];
        this._gamepads = [];
        this.deviceConnected = new vf();
        this.deviceDisconnected = new vf();
        lg._gameInput.addEventListener("deviceAdded", n(this, this.onDeviceAdded));
        lg._gameInput.addEventListener("deviceRemoved", n(this, this.onDeviceRemoved));
        for (var a = 0, b = vb.numDevices; a < b;) {
          var c = a++;
          this.addGamepad(vb.getDeviceAt(c));
        }
      }
      h["flixel.input.gamepad.FlxGamepadManager"] = lg;
      lg.__name__ = "flixel.input.gamepad.FlxGamepadManager";
      lg.__interfaces__ = [Ng];
      lg.prototype = {
        removeByID: function (a) {
          var b = this._gamepads[a];
          if (b != null) {
            this._gamepads[a] = null;
            a = this._activeGamepads.indexOf(b);
            if (a != -1) {
              this._activeGamepads[a] = null;
              this.deviceDisconnected.dispatch(b);
            }
            ca.destroy(b);
          }
          if (this.lastActive == b) {
            this.lastActive = null;
          }
          if (this.firstActive == b) {
            this.firstActive = null;
          }
        },
        createByID: function (a, b) {
          var c = this._gamepads[a];
          if (c == null) {
            c = new Vk(a, this, b);
            this._gamepads[a] = c;
            a = false;
            b = 0;
            for (var d = this._activeGamepads.length; b < d;) {
              var e = b++;
              if (this._activeGamepads[e] == null) {
                this._activeGamepads[e] = c;
                a = true;
                break;
              }
            }
            if (!a) {
              this._activeGamepads.push(c);
            }
          }
          this.lastActive = c;
          if (this.firstActive == null) {
            this.firstActive = c;
          }
          return c;
        },
        getActiveGamepads: function (a) {
          if (a == null) {
            a = [];
          }
          for (var b = 0, c = this._gamepads; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && d.anyInput()) {
              a.push(d);
            }
          }
          return a;
        },
        getFirstActiveGamepad: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.anyInput()) {
              return c;
            }
          }
          return null;
        },
        anyHasState: function (a, b) {
          for (var c = 0, d = this._gamepads; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              switch (a) {
                case -2:
                  e = e.anyButton(b);
                  break;
                case -1:
                  e = !e.anyButton(b);
                  break;
                default:
                  var f = e.mapping.getRawID(a);
                  e = e.buttons[f];
                  e = e != null && e.hasState(b);
              }
            } else {
              e = false;
            }
            if (e) {
              return true;
            }
          }
          return false;
        },
        destroy: function () {
          ca.destroyArray(this._gamepads);
          this._gamepads = this.lastActive = this.firstActive = null;
          lg._gameInput.removeEventListener("deviceAdded", n(this, this.onDeviceAdded));
          lg._gameInput.removeEventListener("deviceRemoved", n(this, this.onDeviceRemoved));
        },
        reset: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.reset();
            }
          }
        },
        onDeviceAdded: function (a) {
          this.addGamepad(a.device);
        },
        onDeviceRemoved: function (a) {
          this.removeGamepad(a.device);
        },
        findGamepadIndex: function (a) {
          if (a == null) {
            return -1;
          }
          for (var b = 0, c = vb.numDevices; b < c;) {
            var d = b++;
            if (vb.getDeviceAt(d) == a) {
              return d;
            }
          }
          return -1;
        },
        addGamepad: function (a) {
          if (a != null) {
            a.enabled = true;
            var b = this.findGamepadIndex(a);
            if (!(b < 0)) {
              b = this.createByID(b, this.getModelFromDeviceName(a.name));
              b._device = a;
              this.deviceConnected.dispatch(b);
            }
          }
        },
        getModelFromDeviceName: function (a) {
          if (a == null) {
            return uc.UNKNOWN;
          }
          a = v.replace(v.replace(a.toLowerCase(), "-", ""), "_", "");
          if (a.indexOf("ouya") != -1) {
            return uc.OUYA;
          } else if (a.indexOf("wireless controller") != -1 || a.indexOf("ps4") != -1) {
            return uc.PS4;
          } else if (a.indexOf("logitech") != -1) {
            return uc.LOGITECH;
          } else if (a.indexOf("xbox") != -1 && a.indexOf("360") != -1 || a.indexOf("xinput") != -1) {
            return uc.XINPUT;
          } else if (a.indexOf("nintendo rvlcnt01tr") != -1) {
            return uc.WII_REMOTE;
          } else if (a.indexOf("nintendo rvlcnt01") != -1) {
            return uc.WII_REMOTE;
          } else if (a.indexOf("mayflash wiimote pc adapter") != -1) {
            return uc.MAYFLASH_WII_REMOTE;
          } else if (a.indexOf("pro controller") != -1 || a.indexOf("joycon l+r") != -1) {
            return uc.SWITCH_PRO;
          } else if (a.indexOf("joycon (l)") != -1) {
            return uc.SWITCH_JOYCON_LEFT;
          } else if (a.indexOf("joycon (r)") != -1) {
            return uc.SWITCH_JOYCON_RIGHT;
          } else if (a.indexOf("mfi") != -1) {
            return uc.MFI;
          } else {
            return uc.UNKNOWN;
          }
        },
        removeGamepad: function (a) {
          if (a != null) {
            for (var b = 0, c = this._gamepads.length; b < c;) {
              var d = b++;
              var e = this._gamepads[d];
              if (e != null && e._device == a) {
                this.removeByID(d);
              }
            }
          }
        },
        update: function () {
          for (var a = 0, b = this._gamepads; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.update();
            }
          }
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        get_numActiveGamepads: function () {
          var a = 0;
          for (var b = 0, c = this._gamepads; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null) {
              ++a;
            }
          }
          return a;
        },
        __class__: lg,
        __properties__: {
          get_numActiveGamepads: "get_numActiveGamepads"
        }
      };
      function ff() {}
      h["flixel.input.gamepad.id.LogitechID"] = ff;
      ff.__name__ = "flixel.input.gamepad.id.LogitechID";
      function gf() {}
      h["flixel.input.gamepad.id.MFiID"] = gf;
      gf.__name__ = "flixel.input.gamepad.id.MFiID";
      function Bd() {}
      h["flixel.input.gamepad.id.MayflashWiiRemoteID"] = Bd;
      Bd.__name__ = "flixel.input.gamepad.id.MayflashWiiRemoteID";
      function hf() {}
      h["flixel.input.gamepad.id.OUYAID"] = hf;
      hf.__name__ = "flixel.input.gamepad.id.OUYAID";
      function jf() {}
      h["flixel.input.gamepad.id.PS4ID"] = jf;
      jf.__name__ = "flixel.input.gamepad.id.PS4ID";
      function Ce() {}
      h["flixel.input.gamepad.id.PSVitaID"] = Ce;
      Ce.__name__ = "flixel.input.gamepad.id.PSVitaID";
      function gi() {}
      h["flixel.input.gamepad.id.SwitchJoyconLeftID"] = gi;
      gi.__name__ = "flixel.input.gamepad.id.SwitchJoyconLeftID";
      function hi() {}
      h["flixel.input.gamepad.id.SwitchJoyconRightID"] = hi;
      hi.__name__ = "flixel.input.gamepad.id.SwitchJoyconRightID";
      function kf() {}
      h["flixel.input.gamepad.id.SwitchProID"] = kf;
      kf.__name__ = "flixel.input.gamepad.id.SwitchProID";
      function Cd() {}
      h["flixel.input.gamepad.id.WiiRemoteID"] = Cd;
      Cd.__name__ = "flixel.input.gamepad.id.WiiRemoteID";
      function lf() {}
      h["flixel.input.gamepad.id.XInputID"] = lf;
      lf.__name__ = "flixel.input.gamepad.id.XInputID";
      function vj(a, b) {
        this.status = a;
        this.gamepad = b;
      }
      h["flixel.input.gamepad.lists.FlxBaseGamepadList"] = vj;
      vj.__name__ = "flixel.input.gamepad.lists.FlxBaseGamepadList";
      vj.prototype = {
        __class__: vj
      };
      function Jn(a) {
        this.value = new On(a);
        this.justMoved = new gl(2, a);
        this.justReleased = new gl(-1, a);
      }
      h["flixel.input.gamepad.lists.FlxGamepadAnalogList"] = Jn;
      Jn.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogList";
      Jn.prototype = {
        __class__: Jn
      };
      function gl(a, b) {
        this.status = a;
        this.gamepad = b;
      }
      h["flixel.input.gamepad.lists.FlxGamepadAnalogStateList"] = gl;
      gl.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogStateList";
      gl.prototype = {
        get_LEFT_STICK: function () {
          return this.checkXY(19);
        },
        get_LEFT_STICK_X: function () {
          var a = this.gamepad.mapping.getAnalogStick(19);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_LEFT_STICK_Y: function () {
          var a = this.gamepad.mapping.getAnalogStick(19);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_RIGHT_STICK: function () {
          return this.checkXY(20);
        },
        get_RIGHT_STICK_X: function () {
          var a = this.gamepad.mapping.getAnalogStick(20);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        get_RIGHT_STICK_Y: function () {
          var a = this.gamepad.mapping.getAnalogStick(20);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkXY: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          var b = this.gamepad.buttons[a.x];
          var c = b != null && b.hasState(this.status);
          b = this.gamepad.buttons[a.y];
          var d = b != null && b.hasState(this.status);
          if (c && d || c && (b = this.gamepad.buttons[a.y], c = b != null && b.hasState(0), b = this.gamepad.buttons[a.y], b = b != null && b.hasState(-1), c || b) || d && (b = this.gamepad.buttons[a.x], d = b != null && b.hasState(0), b = this.gamepad.buttons[a.x], a = b != null && b.hasState(-1), d || a)) {
            return true;
          } else {
            return false;
          }
        },
        checkX: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.x];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkY: function (a) {
          a = this.gamepad.mapping.getAnalogStick(a);
          if (a == null) {
            return false;
          }
          a = this.gamepad.buttons[a.y];
          if (a != null) {
            return a.hasState(this.status);
          } else {
            return false;
          }
        },
        checkRaw: function (a, b) {
          a = this.gamepad.buttons[a];
          if (a != null) {
            return a.hasState(b);
          } else {
            return false;
          }
        },
        __class__: gl,
        __properties__: {
          get_RIGHT_STICK_Y: "get_RIGHT_STICK_Y",
          get_RIGHT_STICK_X: "get_RIGHT_STICK_X",
          get_RIGHT_STICK: "get_RIGHT_STICK",
          get_LEFT_STICK_Y: "get_LEFT_STICK_Y",
          get_LEFT_STICK_X: "get_LEFT_STICK_X",
          get_LEFT_STICK: "get_LEFT_STICK"
        }
      };
      function On(a) {
        this.gamepad = a;
      }
      h["flixel.input.gamepad.lists.FlxGamepadAnalogValueList"] = On;
      On.__name__ = "flixel.input.gamepad.lists.FlxGamepadAnalogValueList";
      On.prototype = {
        get_LEFT_STICK_X: function () {
          var a = this.gamepad;
          return a.getAnalogXAxisValue(a.mapping.getAnalogStick(19));
        },
        get_LEFT_STICK_Y: function () {
          var a = this.gamepad;
          return a.getYAxisRaw(a.mapping.getAnalogStick(19));
        },
        get_RIGHT_STICK_X: function () {
          var a = this.gamepad;
          return a.getAnalogXAxisValue(a.mapping.getAnalogStick(20));
        },
        get_RIGHT_STICK_Y: function () {
          var a = this.gamepad;
          return a.getYAxisRaw(a.mapping.getAnalogStick(20));
        },
        get_LEFT_TRIGGER: function () {
          return this.gamepad.getAxis(17);
        },
        get_RIGHT_TRIGGER: function () {
          return this.gamepad.getAxis(18);
        },
        get_POINTER_X: function () {
          return this.gamepad.getAxis(28);
        },
        get_POINTER_Y: function () {
          return this.gamepad.getAxis(29);
        },
        getAxis: function (a) {
          return this.gamepad.getAxis(a);
        },
        getXAxis: function (a) {
          var b = this.gamepad;
          return b.getAnalogXAxisValue(b.mapping.getAnalogStick(a));
        },
        getYAxis: function (a) {
          var b = this.gamepad;
          return b.getYAxisRaw(b.mapping.getAnalogStick(a));
        },
        __class__: On,
        __properties__: {
          get_POINTER_Y: "get_POINTER_Y",
          get_POINTER_X: "get_POINTER_X",
          get_RIGHT_TRIGGER: "get_RIGHT_TRIGGER",
          get_LEFT_TRIGGER: "get_LEFT_TRIGGER",
          get_RIGHT_STICK_Y: "get_RIGHT_STICK_Y",
          get_RIGHT_STICK_X: "get_RIGHT_STICK_X",
          get_LEFT_STICK_Y: "get_LEFT_STICK_Y",
          get_LEFT_STICK_X: "get_LEFT_STICK_X"
        }
      };
      function xh(a, b) {
        vj.call(this, a, b);
      }
      h["flixel.input.gamepad.lists.FlxGamepadButtonList"] = xh;
      xh.__name__ = "flixel.input.gamepad.lists.FlxGamepadButtonList";
      xh.__super__ = vj;
      xh.prototype = q(vj.prototype, {
        __class__: xh
      });
      function Kn(a) {
        this.gamepad = a;
      }
      h["flixel.input.gamepad.lists.FlxGamepadMotionValueList"] = Kn;
      Kn.__name__ = "flixel.input.gamepad.lists.FlxGamepadMotionValueList";
      Kn.prototype = {
        get_TILT_PITCH: function () {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(26);
          } else {
            return 0;
          }
        },
        get_TILT_ROLL: function () {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(27);
          } else {
            return 0;
          }
        },
        getAxis: function (a) {
          if (this.gamepad.mapping.supportsMotion) {
            return this.gamepad.getAxis(a);
          } else {
            return 0;
          }
        },
        get_isSupported: function () {
          return this.gamepad.mapping.supportsMotion;
        },
        __class__: Kn,
        __properties__: {
          get_TILT_ROLL: "get_TILT_ROLL",
          get_TILT_PITCH: "get_TILT_PITCH",
          get_isSupported: "get_isSupported"
        }
      };
      function Ln(a) {
        this.gamepad = a;
      }
      h["flixel.input.gamepad.lists.FlxGamepadPointerValueList"] = Ln;
      Ln.__name__ = "flixel.input.gamepad.lists.FlxGamepadPointerValueList";
      Ln.prototype = {
        get_X: function () {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(28);
          } else {
            return 0;
          }
        },
        get_Y: function () {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(29);
          } else {
            return 0;
          }
        },
        getAxis: function (a) {
          if (this.gamepad.mapping.supportsPointer) {
            return this.gamepad.getAxis(a);
          } else {
            return 0;
          }
        },
        get_isSupported: function () {
          return this.gamepad.mapping.supportsPointer;
        },
        __class__: Ln,
        __properties__: {
          get_Y: "get_Y",
          get_X: "get_X",
          get_isSupported: "get_isSupported"
        }
      };
      function $b(a) {
        this.attachment = Mn.NONE;
        this.supportsMotion = this.supportsPointer = false;
        if (a != null) {
          this.set_attachment(a);
        }
        this.initValues();
      }
      h["flixel.input.gamepad.mappings.FlxGamepadMapping"] = $b;
      $b.__name__ = "flixel.input.gamepad.mappings.FlxGamepadMapping";
      $b.prototype = {
        initValues: function () {},
        getAnalogStick: function (a) {
          switch (a) {
            case 19:
              return this.leftStick;
            case 20:
              return this.rightStick;
            default:
              return null;
          }
        },
        getID: function (a) {
          return -1;
        },
        getRawID: function (a) {
          return -1;
        },
        isAxisFlipped: function (a) {
          return false;
        },
        set_attachment: function (a) {
          return this.attachment = a;
        },
        __class__: $b,
        __properties__: {
          set_attachment: "set_attachment"
        }
      };
      function Xk(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.LogitechMapping"] = Xk;
      Xk.__name__ = "flixel.input.gamepad.mappings.LogitechMapping";
      Xk.__super__ = $b;
      Xk.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = ff.LEFT_ANALOG_STICK;
          this.rightStick = ff.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case -5:
              return 10;
            case 0:
              return 2;
            case 1:
              return 0;
            case 2:
              return 1;
            case 3:
              return 3;
            case 4:
              return 4;
            case 5:
              return 5;
            case 6:
              return 17;
            case 7:
              return 18;
            case 8:
              return 6;
            case 9:
              return 7;
            case 10:
              return 8;
            case 11:
              return 9;
            case 16:
              return 11;
            case 17:
              return 12;
            case 18:
              return 13;
            case 19:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 1;
            case 1:
              return 2;
            case 2:
              return 0;
            case 3:
              return 3;
            case 4:
              return 4;
            case 5:
              return 5;
            case 6:
              return 8;
            case 7:
              return 9;
            case 8:
              return 10;
            case 9:
              return 11;
            case 10:
              return -5;
            case 11:
              return 16;
            case 12:
              return 17;
            case 13:
              return 18;
            case 14:
              return 19;
            case 17:
              return 6;
            case 18:
              return 7;
            case 34:
              return ff.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return ff.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return ff.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return ff.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return ff.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return ff.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return ff.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return ff.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Xk
      });
      function cl(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.MFiMapping"] = cl;
      cl.__name__ = "flixel.input.gamepad.mappings.MFiMapping";
      cl.__super__ = $b;
      cl.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = gf.LEFT_ANALOG_STICK;
          this.rightStick = gf.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return gf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return gf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return gf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return gf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return gf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return gf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return gf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return gf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: cl
      });
      function al(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.MayflashWiiRemoteMapping"] = al;
      al.__name__ = "flixel.input.gamepad.mappings.MayflashWiiRemoteMapping";
      al.__super__ = $b;
      al.prototype = q($b.prototype, {
        initValues: function () {
          this.supportsPointer = true;
        },
        getID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getIDNunchuk(a);
            case 1:
              return this.getIDClassicController(a);
            case 2:
              return this.getIDDefault(a);
          }
        },
        getIDClassicController: function (a) {
          switch (a) {
            case 4:
              return 11;
            case 5:
              return 12;
            case 6:
              return 13;
            case 7:
              return 14;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 17;
            case 13:
              return 18;
            case 14:
              return 4;
            case 15:
              return 5;
            case 16:
              return 6;
            case 17:
              return 7;
            case 19:
              return 10;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getIDNunchuk: function (a) {
          switch (a) {
            case 4:
              return 11;
            case 5:
              return 12;
            case 6:
              return 13;
            case 7:
              return 14;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 17;
            case 15:
              return 4;
            case 19:
              return 10;
            default:
              return -1;
          }
        },
        getIDDefault: function (a) {
          switch (a) {
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 0;
            case 11:
              return 1;
            case 12:
              return 6;
            case 13:
              return 7;
            case 19:
              return 10;
            case 22:
              return 11;
            case 23:
              return 12;
            case 24:
              return 13;
            case 25:
              return 14;
            default:
              return -1;
          }
        },
        getRawID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getRawNunchuk(a);
            case 1:
              return this.getRawClassicController(a);
            case 2:
              return this.getRawDefault(a);
          }
        },
        getRawClassicController: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 14;
            case 5:
              return 15;
            case 6:
              return 16;
            case 7:
              return 17;
            case 10:
              return 19;
            case 11:
              return 4;
            case 12:
              return 5;
            case 13:
              return 6;
            case 14:
              return 7;
            case 17:
              return 12;
            case 18:
              return 13;
            case 30:
              return -1;
            case 31:
              return -1;
            case 34:
              return Bd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Bd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Bd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Bd.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Bd.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Bd.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Bd.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Bd.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return this.getRawDefault(a);
          }
        },
        getRawNunchuk: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 6:
              return 12;
            case 7:
              return 13;
            case 10:
              return 19;
            case 11:
              return 4;
            case 12:
              return 5;
            case 13:
              return 6;
            case 14:
              return 7;
            case 17:
              return 14;
            case 28:
              return 2;
            case 29:
              return 3;
            case 34:
              return Bd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Bd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Bd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Bd.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawDefault: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 11;
            case 2:
              return 8;
            case 3:
              return 9;
            case 6:
              return 12;
            case 7:
              return 13;
            case 10:
              return 19;
            case 11:
              return 22;
            case 12:
              return 23;
            case 13:
              return 24;
            case 14:
              return 25;
            default:
              return -1;
          }
        },
        set_attachment: function (a) {
          switch (a._hx_index) {
            case 0:
            case 1:
              var b = Bd.LEFT_ANALOG_STICK;
              break;
            case 2:
              b = Bd.REMOTE_DPAD;
          }
          this.leftStick = b;
          this.rightStick = a._hx_index == 1 ? Bd.RIGHT_ANALOG_STICK : null;
          return $b.prototype.set_attachment.call(this, a);
        },
        __class__: al
      });
      function Yk(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.OUYAMapping"] = Yk;
      Yk.__name__ = "flixel.input.gamepad.mappings.OUYAMapping";
      Yk.__super__ = $b;
      Yk.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = hf.LEFT_ANALOG_STICK;
          this.rightStick = hf.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            case 16777234:
              return 10;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 16777234;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return hf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return hf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return hf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return hf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return hf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return hf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return hf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return hf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Yk
      });
      function Zk(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.PS4Mapping"] = Zk;
      Zk.__name__ = "flixel.input.gamepad.mappings.PS4Mapping";
      Zk.__super__ = $b;
      Zk.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = jf.LEFT_ANALOG_STICK;
          this.rightStick = jf.RIGHT_ANALOG_STICK;
          this.supportsPointer = this.supportsMotion = true;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return jf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return jf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return jf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return jf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return jf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return jf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return jf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return jf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: Zk
      });
      function $k(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.PSVitaMapping"] = $k;
      $k.__name__ = "flixel.input.gamepad.mappings.PSVitaMapping";
      $k.__super__ = $b;
      $k.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = Ce.LEFT_ANALOG_STICK;
          this.rightStick = Ce.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 12:
              return 7;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 34;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 34:
              return Ce.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Ce.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Ce.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Ce.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Ce.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Ce.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Ce.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Ce.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        isAxisFlipped: function (a) {
          if (a != Ce.LEFT_ANALOG_STICK.y) {
            return a == Ce.RIGHT_ANALOG_STICK.y;
          } else {
            return true;
          }
        },
        __class__: $k
      });
      function el(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.SwitchJoyconLeftMapping"] = el;
      el.__name__ = "flixel.input.gamepad.mappings.SwitchJoyconLeftMapping";
      el.__super__ = $b;
      el.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = gi.LEFT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 30;
            case 12:
              return 7;
            case 13:
              return 8;
            case 15:
              return 4;
            case 16:
              return 5;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 7:
              return 12;
            case 8:
              return 13;
            case 17:
              return 4;
            case 30:
              return 10;
            case 34:
              return gi.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return gi.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return gi.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return gi.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: el
      });
      function fl(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.SwitchJoyconRightMapping"] = fl;
      fl.__name__ = "flixel.input.gamepad.mappings.SwitchJoyconRightMapping";
      fl.__super__ = $b;
      fl.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = hi.LEFT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 30;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 15:
              return 4;
            case 16:
              return 5;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 7:
              return 12;
            case 8:
              return 13;
            case 10:
              return 11;
            case 18:
              return 5;
            case 30:
              return 10;
            case 34:
              return hi.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return hi.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return hi.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return hi.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: fl
      });
      function dl(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.SwitchProMapping"] = dl;
      dl.__name__ = "flixel.input.gamepad.mappings.SwitchProMapping";
      dl.__super__ = $b;
      dl.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = kf.LEFT_ANALOG_STICK;
          this.rightStick = kf.RIGHT_ANALOG_STICK;
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (a) {
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 11:
              return 10;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            case 21:
              return 30;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return 11;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 30:
              return 21;
            case 34:
              return kf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return kf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return kf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return kf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return kf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return kf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return kf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return kf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: dl
      });
      function bl(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.WiiRemoteMapping"] = bl;
      bl.__name__ = "flixel.input.gamepad.mappings.WiiRemoteMapping";
      bl.__super__ = $b;
      bl.prototype = q($b.prototype, {
        initValues: function () {
          this.supportsMotion = true;
          this.supportsPointer = false;
        },
        getID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getIDNunchuk(a);
            case 1:
              return this.getIDClassicController(a);
            case 2:
              return this.getIDDefault(a);
          }
        },
        getIDClassicController: function (a) {
          switch (a) {
            case 5:
              return 11;
            case 6:
              return 12;
            case 7:
              return 13;
            case 8:
              return 14;
            case 9:
              return 1;
            case 10:
              return 0;
            case 11:
              return 2;
            case 12:
              return 3;
            case 13:
              return 17;
            case 14:
              return 18;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 7;
            case 18:
              return 6;
            case 19:
              return 10;
            case 20:
              return 30;
            case 21:
              return 31;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getIDNunchuk: function (a) {
          switch (a) {
            case 5:
              return 11;
            case 6:
              return 12;
            case 7:
              return 13;
            case 8:
              return 14;
            case 9:
              return 0;
            case 10:
              return 1;
            case 11:
              return 4;
            case 12:
              return 17;
            case 13:
              return 2;
            case 14:
              return 3;
            case 15:
              return 7;
            case 16:
              return 6;
            case 17:
              return 10;
            default:
              return -1;
          }
        },
        getIDDefault: function (a) {
          switch (a) {
            case 9:
              return 2;
            case 10:
              return 3;
            case 11:
              return 0;
            case 12:
              return 1;
            case 13:
              return 7;
            case 14:
              return 6;
            case 15:
              return 10;
            case 22:
              return 11;
            case 23:
              return 12;
            case 24:
              return 13;
            case 25:
              return 14;
            default:
              return -1;
          }
        },
        getRawID: function (a) {
          switch (this.attachment._hx_index) {
            case 0:
              return this.getRawNunchuk(a);
            case 1:
              return this.getRawClassicController(a);
            case 2:
              return this.getRawDefault(a);
          }
        },
        getRawClassicController: function (a) {
          switch (a) {
            case 0:
              return 10;
            case 1:
              return 9;
            case 2:
              return 11;
            case 3:
              return 12;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 18;
            case 7:
              return 17;
            case 10:
              return 19;
            case 11:
              return 5;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 8;
            case 17:
              return 13;
            case 18:
              return 14;
            case 30:
              return 20;
            case 31:
              return 21;
            case 34:
              return Cd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Cd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Cd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Cd.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return Cd.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return Cd.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return Cd.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return Cd.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawNunchuk: function (a) {
          switch (a) {
            case 0:
              return 9;
            case 1:
              return 10;
            case 2:
              return 13;
            case 3:
              return 14;
            case 4:
              return 11;
            case 6:
              return 16;
            case 7:
              return 15;
            case 10:
              return 17;
            case 11:
              return 5;
            case 12:
              return 6;
            case 13:
              return 7;
            case 14:
              return 8;
            case 17:
              return 12;
            case 26:
              return 3;
            case 27:
              return 2;
            case 34:
              return Cd.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return Cd.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return Cd.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return Cd.LEFT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        getRawDefault: function (a) {
          switch (a) {
            case 0:
              return 11;
            case 1:
              return 12;
            case 2:
              return 9;
            case 3:
              return 10;
            case 6:
              return 14;
            case 7:
              return 13;
            case 10:
              return 15;
            case 11:
              return 22;
            case 12:
              return 23;
            case 13:
              return 24;
            case 14:
              return 25;
            case 26:
              return 2;
            case 27:
              return 3;
            default:
              return -1;
          }
        },
        isAxisFlipped: function (a) {
          return a == 4;
        },
        set_attachment: function (a) {
          switch (a._hx_index) {
            case 0:
            case 1:
              var b = Cd.LEFT_ANALOG_STICK;
              break;
            case 2:
              b = Cd.REMOTE_DPAD;
          }
          this.leftStick = b;
          this.rightStick = a._hx_index == 1 ? Cd.RIGHT_ANALOG_STICK : null;
          return $b.prototype.set_attachment.call(this, a);
        },
        __class__: bl
      });
      function uj(a) {
        $b.call(this, a);
      }
      h["flixel.input.gamepad.mappings.XInputMapping"] = uj;
      uj.__name__ = "flixel.input.gamepad.mappings.XInputMapping";
      uj.__super__ = $b;
      uj.prototype = q($b.prototype, {
        initValues: function () {
          this.leftStick = lf.LEFT_ANALOG_STICK;
          this.rightStick = lf.RIGHT_ANALOG_STICK;
        },
        getID: function (a) {
          switch (a) {
            case -1:
              return 10;
            case 4:
              return 17;
            case 5:
              return 18;
            case 6:
              return 0;
            case 7:
              return 1;
            case 8:
              return 2;
            case 9:
              return 3;
            case 10:
              return 6;
            case 12:
              return 7;
            case 13:
              return 8;
            case 14:
              return 9;
            case 15:
              return 4;
            case 16:
              return 5;
            case 17:
              return 11;
            case 18:
              return 12;
            case 19:
              return 13;
            case 20:
              return 14;
            default:
              if (a == this.leftStick.rawUp) {
                return 34;
              } else if (a == this.leftStick.rawDown) {
                return 36;
              } else if (a == this.leftStick.rawLeft) {
                return 37;
              } else if (a == this.leftStick.rawRight) {
                return 35;
              } else if (a == this.rightStick.rawUp) {
                return 38;
              } else if (a == this.rightStick.rawDown) {
                return 40;
              } else if (a == this.rightStick.rawLeft) {
                return 41;
              } else if (a == this.rightStick.rawRight) {
                return 39;
              } else {
                return -1;
              }
          }
        },
        getRawID: function (a) {
          switch (a) {
            case 0:
              return 6;
            case 1:
              return 7;
            case 2:
              return 8;
            case 3:
              return 9;
            case 4:
              return 15;
            case 5:
              return 16;
            case 6:
              return 10;
            case 7:
              return 12;
            case 8:
              return 13;
            case 9:
              return 14;
            case 10:
              return -1;
            case 11:
              return 17;
            case 12:
              return 18;
            case 13:
              return 19;
            case 14:
              return 20;
            case 17:
              return 4;
            case 18:
              return 5;
            case 34:
              return lf.LEFT_ANALOG_STICK.rawUp;
            case 35:
              return lf.LEFT_ANALOG_STICK.rawRight;
            case 36:
              return lf.LEFT_ANALOG_STICK.rawDown;
            case 37:
              return lf.LEFT_ANALOG_STICK.rawLeft;
            case 38:
              return lf.RIGHT_ANALOG_STICK.rawUp;
            case 39:
              return lf.RIGHT_ANALOG_STICK.rawRight;
            case 40:
              return lf.RIGHT_ANALOG_STICK.rawDown;
            case 41:
              return lf.RIGHT_ANALOG_STICK.rawLeft;
            default:
              return -1;
          }
        },
        __class__: uj
      });
      var Fg = {};
      function hl(a, b) {
        sj.call(this, a, b);
      }
      h["flixel.input.keyboard.FlxKeyList"] = hl;
      hl.__name__ = "flixel.input.keyboard.FlxKeyList";
      hl.__super__ = sj;
      hl.prototype = q(sj.prototype, {
        __class__: hl
      });
      function Gk() {
        Og.call(this, function (a, b) {
          return new hl(a, b);
        });
        this.preventDefaultKeys = [38, 40, 37, 39, 32, 9];
        var a = Fg.fromStringMap.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          var e = a[b[d++]];
          if (e != -2 && e != -1) {
            var f = new je(e);
            this._keyListArray.push(f);
            this._keyListMap.h[e] = f;
          }
        }
      }
      h["flixel.input.keyboard.FlxKeyboard"] = Gk;
      Gk.__name__ = "flixel.input.keyboard.FlxKeyboard";
      Gk.__super__ = Og;
      Gk.prototype = q(Og.prototype, {
        onKeyUp: function (a) {
          Og.prototype.onKeyUp.call(this, a);
        },
        onKeyDown: function (a) {
          Og.prototype.onKeyDown.call(this, a);
        },
        resolveKeyCode: function (a) {
          return a.keyCode;
        },
        __class__: Gk
      });
      function Me(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        N.call(this, 0, 0, c, d);
        if (Me.preload != null) {
          this.__fromImage(Me.preload);
        } else {
          var f = this;
          Fb.loadFromBase64($e.getString(Me.resourceName), Me.resourceType).then(function (a) {
            f.__fromImage(a);
            return Eb.withValue(f);
          }).onComplete(function (a) {
            if (Me.preload == null) {
              Me.preload = a.image;
            }
            if (e != null && ha.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.input.mouse._FlxMouse.GraphicCursor"] = Me;
      Me.__name__ = "flixel.input.mouse._FlxMouse.GraphicCursor";
      Me.__super__ = N;
      Me.prototype = q(N.prototype, {
        __class__: Me
      });
      function df(a) {
        this.justPressedTimeInTicks = -1;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        b = da.pool.get().set(b, c);
        b._inPool = false;
        this.justPressedPosition = b;
        je.call(this, a);
      }
      h["flixel.input.mouse.FlxMouseButton"] = df;
      df.__name__ = "flixel.input.mouse.FlxMouseButton";
      df.__interfaces__ = [ub];
      df.getByID = function (a) {
        switch (a) {
          case -3:
            return g.mouse._rightButton;
          case -2:
            return g.mouse._middleButton;
          case -1:
            return g.mouse._leftButton;
        }
      };
      df.__super__ = je;
      df.prototype = q(je.prototype, {
        update: function () {
          je.prototype.update.call(this);
          if (this.current == 2) {
            var a = this.justPressedPosition;
            var b = g.mouse.screenX;
            var c = g.mouse.screenY;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.justPressedTimeInTicks = g.game.ticks;
          } else if (this.current == -1) {
            var d = g.swipes;
            var e = this.ID;
            a = this.justPressedPosition;
            var f = null;
            if (f == null) {
              c = b = 0;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = da.pool.get().set(b, c);
              b._inPool = false;
              f = b;
            }
            b = a.x;
            c = a.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            f.set_x(b);
            f.set_y(c);
            d.push(new tj(e, f, g.mouse.getScreenPosition(), this.justPressedTimeInTicks));
          }
        },
        destroy: function () {
          this.justPressedPosition = ca.put(this.justPressedPosition);
        },
        onDown: function (a) {
          if (g.mouse.enabled) {
            this.press();
          }
        },
        onUp: function (a) {
          if (g.mouse.enabled) {
            this.release();
          }
        },
        __class__: df
      });
      function il(a, b, c, d, e, f, k, g, l) {
        this.object = a;
        this.onMouseDown = b;
        this.onMouseUp = c;
        this.onMouseOver = d;
        this.onMouseOut = e;
        this.mouseChildren = f;
        this.mouseEnabled = k;
        this.pixelPerfect = g;
        this.mouseButtons = l == null ? [-1] : l;
        if (a instanceof G) {
          this.sprite = a;
        }
      }
      h["flixel.input.mouse.FlxMouseEvent"] = il;
      il.__name__ = "flixel.input.mouse.FlxMouseEvent";
      il.__interfaces__ = [ub];
      il.prototype = {
        destroy: function () {
          this.mouseButtons = this.onMouseWheel = this.onMouseMove = this.onMouseOut = this.onMouseOver = this.onMouseDoubleClick = this.onMouseClick = this.onMouseUp = this.onMouseDown = this.sprite = this.object = null;
        },
        __class__: il
      };
      function jl() {
        this.maxDoubleClickDelay = 500;
        var a = 0;
        var b = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        this._point = a;
        this.mouseClickedTime = -1;
        this._clickList = [];
        this._downList = [];
        this._overList = [];
        this._list = [];
        Ca.call(this);
        if (this._list != null) {
          this.clearRegistry();
        }
        this._list = [];
        this._overList = [];
        this._downList = [];
        this._clickList = [];
        g.signals.preStateSwitch.add(n(this, this.removeAll));
      }
      h["flixel.input.mouse.FlxMouseEventManager"] = jl;
      jl.__name__ = "flixel.input.mouse.FlxMouseEventManager";
      jl.__super__ = Ca;
      jl.prototype = q(Ca.prototype, {
        destroy: function () {
          this.clearRegistry();
          this._point = ca.put(this._point);
          g.signals.preStateSwitch.remove(n(this, this.removeAll));
          Ca.prototype.destroy.call(this);
        },
        update: function (a) {
          Ca.prototype.update.call(this, a);
          a = [];
          for (var b = 0, c = this._list; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.object.alive && d.object.exists && d.object.visible && d.mouseEnabled && this.checkOverlap(d) && (a.push(d), !d.mouseChildren)) {
              break;
            }
          }
          b = 0;
          for (c = this._overList; b < c.length;) {
            d = c[b];
            ++b;
            if (d.onMouseOut != null && (!d.object.exists || !d.object.visible || this.get(d.object, a) == null)) {
              d.onMouseOut(d.object);
            }
          }
          for (b = 0; b < a.length;) {
            d = a[b];
            ++b;
            if (d.onMouseOver != null && d.object.exists && d.object.visible && this.get(d.object, this._overList) == null) {
              d.onMouseOver(d.object);
            }
          }
          if (g.mouse.enabled) {
            b = g.mouse;
            if (b._prevX != b.x || b._prevY != b.y) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if (d.onMouseMove != null && d.object.exists && d.object.visible) {
                  d.onMouseMove(d.object);
                }
              }
            }
            for (b = 0; b < a.length;) {
              d = a[b];
              ++b;
              if (d.onMouseDown != null && d.object.exists && d.object.visible) {
                c = 0;
                for (var e = d.mouseButtons; c < e.length;) {
                  var f = e[c];
                  ++c;
                  if (df.getByID(f).current == 2) {
                    d.onMouseDown(d.object);
                  }
                }
              }
            }
            if (g.mouse._leftButton.current == 2) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if ((d.onMouseClick != null || d.onMouseDoubleClick != null) && d.object.exists && d.object.visible) {
                  this._downList.push(d);
                }
              }
            }
            for (b = 0; b < a.length;) {
              d = a[b];
              ++b;
              if (d.onMouseUp != null && d.object.exists && d.object.visible) {
                c = 0;
                e = d.mouseButtons;
                while (c < e.length) {
                  f = e[c];
                  ++c;
                  if (df.getByID(f).current == -1) {
                    d.onMouseUp(d.object);
                  }
                }
              }
            }
            if (this._clickList.length > 0 && g.game.ticks - this.mouseClickedTime > this.maxDoubleClickDelay) {
              this._clickList = [];
            }
            if (g.mouse._leftButton.current == -1) {
              this.mouseClickedTime = g.game.ticks;
              d = this._clickList;
              if (this._clickList.length > 0) {
                this._clickList = [];
              }
              b = 0;
              c = this._downList;
              while (b < c.length) {
                e = c[b];
                ++b;
                if (e.object != null && e.object.exists && e.object.visible && this.get(e.object, a) != null) {
                  if (e.onMouseClick != null) {
                    e.onMouseClick(e.object);
                  }
                  if (e.onMouseDoubleClick != null) {
                    if (this.get(e.object, d) != null) {
                      e.onMouseDoubleClick(e.object);
                    } else {
                      this._clickList.push(e);
                    }
                  }
                }
              }
            }
            if (this._downList.length > 0) {
              b = g.mouse._leftButton;
              b = b.current != 1 && b.current != 2;
            } else {
              b = false;
            }
            if (b) {
              this._downList = [];
            }
            if (g.mouse.wheel != 0) {
              for (b = 0; b < a.length;) {
                d = a[b];
                ++b;
                if (d.onMouseWheel != null && d.object.exists && d.object.visible) {
                  d.onMouseWheel(d.object);
                }
              }
            }
            this._overList = a;
          }
        },
        removeAll: function () {
          if (this._list != null) {
            for (var a = 0, b = this._list; a < b.length;) {
              var c = b[a];
              ++a;
              c.destroy();
            }
          }
          this._list.splice(0, this._list.length);
          this._overList = [];
          this._downList = [];
          this._clickList = [];
        },
        get: function (a, b) {
          if (b == null) {
            b = this._list;
          }
          for (var c = 0; c < b.length;) {
            var d = b[c];
            ++c;
            if (d.object == a) {
              return d;
            }
          }
          return null;
        },
        clearRegistry: function () {
          this._clickList = this._downList = this._overList = null;
          this._list = ca.destroyArray(this._list);
        },
        checkOverlap: function (a) {
          for (var b = 0, c = a.object.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            var e = this._point = g.mouse.getPositionInCameraView(d, this._point);
            var f = e.x > d.viewMarginX && e.x < d.width - d.viewMarginX && e.y > d.viewMarginY && e.y < d.height - d.viewMarginY;
            if (e._weak) {
              e.put();
            }
            if (f && (f = this._point = g.mouse.getWorldPosition(d, this._point), a.pixelPerfect && a.sprite != null ? a.sprite.pixelsOverlapPoint(f, 1, d) : a.object.overlapsPoint(f, true, d))) {
              return true;
            }
            f = 0;
            for (e = g.touches.list; f < e.length;) {
              var k = e[f];
              ++f;
              var t = this._point = k.getPositionInCameraView(d, this._point);
              var l = t.x > d.viewMarginX && t.x < d.width - d.viewMarginX && t.y > d.viewMarginY && t.y < d.height - d.viewMarginY;
              if (t._weak) {
                t.put();
              }
              if (l && (k = this._point = k.getWorldPosition(d, this._point), a.pixelPerfect && a.sprite != null ? a.sprite.pixelsOverlapPoint(k, 1, d) : a.object.overlapsPoint(k, true, d))) {
                return true;
              }
            }
          }
          return false;
        },
        __class__: jl
      });
      function wj(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.justPressedTimeInTicks = -1;
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = da.pool.get().set(e, f);
        e._inPool = false;
        this.justPressedPosition = e;
        this.flashPoint = new ob();
        gd.call(this);
        this.input = new je(c);
        this.setXY(a, b);
        this.pressure = d;
      }
      h["flixel.input.touch.FlxTouch"] = wj;
      wj.__name__ = "flixel.input.touch.FlxTouch";
      wj.__interfaces__ = [vh, ub];
      wj.__super__ = gd;
      wj.prototype = q(gd.prototype, {
        destroy: function () {
          this.input = null;
          this.justPressedPosition = ca.put(this.justPressedPosition);
          this.flashPoint = null;
        },
        recycle: function (a, b, c, d) {
          this.setXY(a, b);
          this.input.ID = c;
          this.input.reset();
          this.pressure = d;
        },
        update: function () {
          this.input.update();
          if (this.input.current == 2) {
            var a = this.justPressedPosition;
            var b = this.screenX;
            var c = this.screenY;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.justPressedTimeInTicks = g.game.ticks;
          } else if (this.input.current == -1) {
            var d = g.swipes;
            var e = this.input.ID;
            a = this.justPressedPosition;
            var f = null;
            if (f == null) {
              c = b = 0;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = da.pool.get().set(b, c);
              b._inPool = false;
              f = b;
            }
            b = a.x;
            c = a.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            f.set_x(b);
            f.set_y(c);
            d.push(new tj(e, f, this.getScreenPosition(), this.justPressedTimeInTicks));
          }
        },
        setXY: function (a, b) {
          this.flashPoint.setTo(a, b);
          this.flashPoint = g.game.globalToLocal(this.flashPoint);
          this._globalScreenX = this.flashPoint.x / g.scaleMode.scale.x | 0;
          this._globalScreenY = this.flashPoint.y / g.scaleMode.scale.y | 0;
          this.updatePositions();
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: wj,
        __properties__: {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased"
        }
      });
      function Xh() {
        this.list = [];
        this._inactiveTouches = [];
        this._touchesCache = new Ac();
        Xh.maxTouchPoints = ii.maxTouchPoints;
        ii.inputMode = 2;
        ia.get_current().stage.addEventListener("touchBegin", n(this, this.handleTouchBegin));
        ia.get_current().stage.addEventListener("touchEnd", n(this, this.handleTouchEnd));
        ia.get_current().stage.addEventListener("touchMove", n(this, this.handleTouchMove));
      }
      h["flixel.input.touch.FlxTouchManager"] = Xh;
      Xh.__name__ = "flixel.input.touch.FlxTouchManager";
      Xh.__interfaces__ = [Ng];
      Xh.prototype = {
        destroy: function () {
          for (var a = 0, b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.destroy();
          }
          this.list = null;
          a = 0;
          for (b = this._inactiveTouches; a < b.length;) {
            c = b[a];
            ++a;
            c.destroy();
          }
          this._touchesCache = this._inactiveTouches = null;
        },
        reset: function () {
          for (var a = this._touchesCache.keys(); a.hasNext();) {
            var b = a.next();
            this._touchesCache.remove(b);
          }
          a = 0;
          for (b = this.list; a < b.length;) {
            var c = b[a];
            ++a;
            c.input.reset();
            this._inactiveTouches.push(c);
          }
          this.list.splice(0, this.list.length);
        },
        handleTouchBegin: function (a) {
          var b = this._touchesCache.h[a.touchPointID];
          if (b != null) {
            b.setXY(a.stageX | 0, a.stageY | 0);
            b.pressure = a.pressure;
          } else {
            b = this.recycle(a.stageX | 0, a.stageY | 0, a.touchPointID, a.pressure);
          }
          b.input.press();
        },
        handleTouchEnd: function (a) {
          a = this._touchesCache.h[a.touchPointID];
          if (a != null) {
            a.input.release();
          }
        },
        handleTouchMove: function (a) {
          var b = this._touchesCache.h[a.touchPointID];
          if (b != null) {
            b.setXY(a.stageX | 0, a.stageY | 0);
            b.pressure = a.pressure;
          }
        },
        add: function (a) {
          this.list.push(a);
          return this._touchesCache.h[a.input.ID] = a;
        },
        recycle: function (a, b, c, d) {
          if (this._inactiveTouches.length > 0) {
            var e = this._inactiveTouches.pop();
            e.recycle(a, b, c, d);
            return this.add(e);
          }
          return this.add(new wj(a, b, c, d));
        },
        update: function () {
          for (var a = this.list.length - 1, b; a >= 0;) {
            b = this.list[a];
            var c = b.input;
            if (c.current != 0 && c.current != -1 || b.input.current == -1) {
              b.update();
            } else {
              b.input.reset();
              this._touchesCache.remove(b.input.ID);
              this.list.splice(a, 1);
              this._inactiveTouches.push(b);
            }
            --a;
          }
        },
        onFocus: function () {},
        onFocusLost: function () {
          this.reset();
        },
        __class__: Xh
      };
      function jc() {}
      h["flixel.math.FlxMath"] = jc;
      jc.__name__ = "flixel.math.FlxMath";
      jc.roundDecimal = function (a, b) {
        var c = 1;
        for (var d = 0; d < b;) {
          d++;
          c *= 10;
        }
        return Math.round(a * c) / c;
      };
      jc.pointInFlxRect = function (a, b, c) {
        if (a >= c.x && a <= c.x + c.width && b >= c.y) {
          return b <= c.y + c.height;
        } else {
          return false;
        }
      };
      jc.maxAdd = function (a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        a += b;
        if (a > c) {
          a = c;
        } else if (a <= d) {
          a = d;
        }
        return a;
      };
      jc.wrap = function (a, b, c) {
        c = c - b + 1;
        if (a < b) {
          a += c * ((b - a) / c + 1 | 0);
        }
        return b + (a - b) % c;
      };
      jc.remapToRange = function (a, b, c, d, e) {
        return d + (e - d) / (c - b) * (a - b);
      };
      jc.getDecimals = function (a) {
        a = (a == null ? "null" : "" + a).split(".");
        var b = 0;
        if (a.length > 1) {
          b = a[1].length;
        }
        return b;
      };
      var Ak = {
        __properties__: {
          get_radians: "get_radians"
        },
        distanceTo: function (a, b) {
          var c = a.x - b.x;
          a = a.y - b.y;
          if (b._weak) {
            b.put();
          }
          return Math.sqrt(c * c + a * a);
        },
        get_radians: function (a) {
          var b = a.x;
          a = a.y;
          var c = false;
          if (c == null) {
            c = false;
          }
          if (c) {
            return 180 / Math.PI * Math.atan2(a, b);
          } else {
            return Math.atan2(a, b);
          }
        }
      };
      function qh(a, b, c) {
        da.call(this);
        this._setXCallback = a;
        this._setXYCallback = this._setYCallback = c;
        if (this._setXCallback != null) {
          if (this._setYCallback == null) {
            this._setYCallback = a;
          }
          if (this._setXYCallback == null) {
            this._setXYCallback = a;
          }
        }
      }
      h["flixel.math.FlxCallbackPoint"] = qh;
      qh.__name__ = "flixel.math.FlxCallbackPoint";
      qh.__super__ = da;
      qh.prototype = q(da.prototype, {
        set: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          da.prototype.set.call(this, a, b);
          if (this._setXYCallback != null) {
            this._setXYCallback(this);
          }
          return this;
        },
        set_x: function (a) {
          da.prototype.set_x.call(this, a);
          if (this._setXCallback != null) {
            this._setXCallback(this);
          }
          return a;
        },
        set_y: function (a) {
          da.prototype.set_y.call(this, a);
          if (this._setYCallback != null) {
            this._setYCallback(this);
          }
          return a;
        },
        destroy: function () {
          da.prototype.destroy.call(this);
          this._setXYCallback = this._setYCallback = this._setXCallback = null;
        },
        put: function () {},
        __class__: qh
      });
      function zk() {}
      h["flixel.math.FlxVelocity"] = zk;
      zk.__name__ = "flixel.math.FlxVelocity";
      zk.computeVelocity = function (a, b, c, d, e) {
        if (b != 0) {
          a += b * e;
        } else if (c != 0) {
          b = c * e;
          a = a - b > 0 ? a - b : a + b < 0 ? a + b : 0;
        }
        if (a != 0 && d != 0) {
          if (a > d) {
            a = d;
          } else if (a < -d) {
            a = -d;
          }
        }
        return a;
      };
      var kl = w["flixel.path.CenterMode"] = {
        __ename__: "flixel.path.CenterMode",
        __constructs__: null,
        TOP_LEFT: {
          _hx_name: "TOP_LEFT",
          _hx_index: 0,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        ORIGIN: {
          _hx_name: "ORIGIN",
          _hx_index: 2,
          __enum__: "flixel.path.CenterMode",
          toString: p
        },
        CUSTOM: (r = function (a) {
          return {
            _hx_index: 3,
            offset: a,
            __enum__: "flixel.path.CenterMode",
            toString: p
          };
        }, r._hx_name = "CUSTOM", r.__params__ = ["offset"], r)
      };
      kl.__constructs__ = [kl.TOP_LEFT, kl.CENTER, kl.ORIGIN, kl.CUSTOM];
      function Xd(a) {
        this._firstUpdate = false;
        this._wasObjectImmovable = null;
        this._inc = 1;
        this.axes = 17;
        this.finished = false;
        this.nodeIndex = 0;
        this.active = false;
        this.angleOffset = 0;
        this.autoRotate = false;
        this.centerMode = kl.CENTER;
        this.angle = 0;
        this.immovable = false;
        this.speed = 0;
        this._nodes = a != null ? a.slice() : [];
      }
      h["flixel.path.FlxPath"] = Xd;
      Xd.__name__ = "flixel.path.FlxPath";
      Xd.__interfaces__ = [ub];
      Xd.prototype = {
        computeCenter: function (a) {
          a.set_x(this.object.x);
          a.set_y(this.object.y);
          var b = this.centerMode;
          switch (b._hx_index) {
            case 0:
              return a;
            case 1:
              b = this.object.get_width() * 0.5;
              var c = this.object.get_height() * 0.5;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(a.x + b);
              a.set_y(a.y + c);
              return a;
            case 2:
              if (this.object instanceof G) {
                b = wa.__cast(this.object, G).origin.x;
                c = wa.__cast(this.object, G).origin.y;
                if (c == null) {
                  c = 0;
                }
                if (b == null) {
                  b = 0;
                }
                a.set_x(a.x + b);
                a.set_y(a.y + c);
              }
              return a;
            case 3:
              var d = b.offset;
              b = d.x;
              c = d.y;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(a.x + b);
              a.set_y(a.y + c);
              if (d._weak) {
                d.put();
              }
              return a;
          }
        },
        update: function (a) {
          if (this.object != null) {
            if (this._firstUpdate) {
              if (this.immovable) {
                this._wasObjectImmovable = this.object.immovable;
                this.object.set_immovable(true);
              }
              this._firstUpdate = false;
            }
            Xd._point = this.computeCenter(Xd._point);
            var b = this._nodes[this.nodeIndex];
            var c = b.x - Xd._point.x;
            var d = b.y - Xd._point.y;
            var e = this.axes == 1;
            var f = this.axes == 16;
            if (e) {
              if ((c > 0 ? c : -c) < this.speed * a) {
                b = this.advancePath();
              }
            } else if (f) {
              if ((d > 0 ? d : -d) < this.speed * a) {
                b = this.advancePath();
              }
            } else if (Math.sqrt(c * c + d * d) < this.speed * a) {
              b = this.advancePath();
            }
            if (this.object != null && this.speed != 0) {
              Xd._point = this.computeCenter(Xd._point);
              a = Xd._point;
              a = Math.abs(a.x - b.x) <= 1e-7 && Math.abs(a.y - b.y) <= 1e-7;
              if (b._weak) {
                b.put();
              }
              if (a) {
                b = this.object.velocity;
                b.set_x(0);
                b.set_y(0);
              } else {
                this.calculateVelocity(b, e, f);
              }
              if (this.autoRotate) {
                this.object.angularVelocity = 0;
                this.object.angularAcceleration = 0;
                this.object.set_angle(this.angle + this.angleOffset);
              }
              if (this.finished) {
                this.cancel();
              }
            }
          }
        },
        calculateVelocity: function (a, b, c) {
          if (b || Xd._point.y == a.y) {
            this.object.velocity.set_x(Xd._point.x < a.x ? this.speed : -this.speed);
            this.angle = this.object.velocity.x < 0 ? 180 : 0;
            if (!b) {
              this.object.velocity.set_y(0);
            }
          } else if (c || Xd._point.x == a.x) {
            this.object.velocity.set_y(Xd._point.y < a.y ? this.speed : -this.speed);
            this.angle = this.object.velocity.y < 0 ? -90 : 90;
            if (!c) {
              this.object.velocity.set_x(0);
            }
          } else {
            b = this.object.velocity;
            c = a.x;
            var d = a.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            if (a._weak) {
              a.put();
            }
            a = Xd._point;
            c = a.x;
            d = a.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(b.x - c);
            b.set_y(b.y - d);
            if (a._weak) {
              a.put();
            }
            a = this.speed;
            if (!(Math.abs(b.x) < 1e-7) || !(Math.abs(b.y) < 1e-7)) {
              c = Ak.get_radians(b);
              b.set_x(a * Math.cos(c));
              b.set_y(a * Math.sin(c));
            }
            this.angle = Ak.get_radians(b) * (180 / Math.PI);
          }
        },
        advancePath: function (a) {
          if (a == null) {
            a = true;
          }
          if (a && (a = this._nodes[this.nodeIndex], a != null)) {
            var b = this.axes;
            if (b == 1 || b == 17) {
              this.object.set_x(a.x);
              b = this.centerMode;
              switch (b._hx_index) {
                case 1:
                  b = this.object;
                  b.set_x(b.x - this.object.get_width() * 0.5);
                  break;
                case 2:
                  if (this.object instanceof G) {
                    b = this.object;
                    b.set_x(b.x - this.object.origin.x);
                  }
                  break;
                case 3:
                  var c = b.offset;
                  b = this.object;
                  b.set_x(b.x - c.x);
              }
            }
            b = this.axes;
            if (b == 16 || b == 17) {
              this.object.set_y(a.y);
              b = this.centerMode;
              switch (b._hx_index) {
                case 1:
                  b = this.object;
                  b.set_y(b.y - this.object.get_height() * 0.5);
                  break;
                case 2:
                  if (this.object instanceof G) {
                    b = this.object;
                    b.set_y(b.y - this.object.origin.y);
                  }
                  break;
                case 3:
                  c = b.offset;
                  b = this.object;
                  b.set_y(b.y - c.y);
              }
            }
          }
          a = false;
          this.nodeIndex += this._inc;
          if (this._mode == 1) {
            if (this.nodeIndex < 0) {
              this.nodeIndex = 0;
              a = true;
              this.onEnd();
            }
          } else if (this._mode == 16) {
            if (this.nodeIndex >= this._nodes.length) {
              a = true;
              this.nodeIndex = 0;
            }
          } else if (this._mode == 256) {
            if (this.nodeIndex < 0) {
              this.nodeIndex = this._nodes.length - 1;
              a = true;
              if (this.nodeIndex < 0) {
                this.nodeIndex = 0;
              }
            }
          } else if (this._mode == 4096) {
            if (this._inc > 0) {
              if (this.nodeIndex >= this._nodes.length) {
                this.nodeIndex = this._nodes.length - 2;
                a = true;
                if (this.nodeIndex < 0) {
                  this.nodeIndex = 0;
                }
                this._inc = -this._inc;
              }
            } else if (this.nodeIndex < 0) {
              this.nodeIndex = 1;
              a = true;
              if (this.nodeIndex >= this._nodes.length) {
                this.nodeIndex = this._nodes.length - 1;
              }
              if (this.nodeIndex < 0) {
                this.nodeIndex = 0;
              }
              this._inc = -this._inc;
            }
          } else if (this.nodeIndex >= this._nodes.length) {
            this.nodeIndex = this._nodes.length - 1;
            a = true;
            this.onEnd();
          }
          if (a && this.onComplete != null) {
            this.onComplete(this);
          }
          return this._nodes[this.nodeIndex];
        },
        cancel: function () {
          this.onEnd();
          if (this.object != null) {
            var a = this.object.velocity;
            var b = 0;
            var c = 0;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
          }
          return this;
        },
        onEnd: function () {
          this.finished = true;
          this.active = false;
          if (this._wasObjectImmovable != null) {
            this.object.set_immovable(this._wasObjectImmovable);
          }
          this._wasObjectImmovable = null;
        },
        destroy: function () {
          ca.putArray(this._nodes);
          this.onComplete = this.object = this._nodes = null;
        },
        __class__: Xd
      };
      function Yd() {
        this._alreadyPaused = false;
        this._pitch = this._volumeAdjust = 1;
        this.loopTime = this._time = this._length = 0;
        Ca.call(this);
        this.reset();
      }
      h["flixel.sound.FlxSound"] = Yd;
      Yd.__name__ = "flixel.sound.FlxSound";
      Yd.__super__ = Ca;
      Yd.prototype = q(Ca.prototype, {
        reset: function () {
          this.destroy();
          this._time = this.y = this.x = 0;
          this._paused = false;
          this._volumeAdjust = this._volume = 1;
          this.looped = false;
          this.endTime = this.loopTime = 0;
          this._target = null;
          this._radius = 0;
          this._proximityPan = false;
          this.set_visible(false);
          this.amplitudeRight = this.amplitudeLeft = this.amplitude = 0;
          this.autoDestroy = false;
          if (this._transform == null) {
            this._transform = new pg();
          }
          this._transform.pan = 0;
        },
        destroy: function () {
          if (this.group != null) {
            this.group.remove(this);
          }
          this._transform = null;
          this.set_exists(false);
          this.set_active(false);
          this.artist = this.name = this._target = null;
          if (this._channel != null) {
            this._channel.removeEventListener("soundComplete", n(this, this.stopped));
            this._channel.stop();
            this._channel = null;
          }
          if (this._sound != null) {
            this._sound.removeEventListener("id3", n(this, this.gotID3));
            this._sound = null;
          }
          this.onComplete = null;
          Ca.prototype.destroy.call(this);
        },
        update: function (a) {
          if (this._channel != null) {
            this._time = this._channel.get_position();
            var b = 1;
            if (this._target != null) {
              a = this._target.getPosition();
              b = this.x;
              var c = this.y;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              b = da.pool.get().set(b, c);
              b._inPool = false;
              b._weak = true;
              b = Ak.distanceTo(a, b) / this._radius;
              a.put();
              a = b < 0 ? 0 : b;
              b = 1 - (a > 1 ? 1 : a);
              if (this._proximityPan) {
                a = (this.x - this._target.x) / this._radius;
                a = a < -1 ? -1 : a;
                this._transform.pan = a > 1 ? 1 : a;
              }
            }
            this._volumeAdjust = b;
            this.updateTransform();
            if (this._transform.volume > 0) {
              this.amplitudeLeft = this._channel.leftPeak / this._transform.volume;
              this.amplitudeRight = this._channel.rightPeak / this._transform.volume;
              this.amplitude = (this.amplitudeLeft + this.amplitudeRight) * 0.5;
            } else {
              this.amplitude = this.amplitudeRight = this.amplitudeLeft = 0;
            }
            if (this.endTime != null && this._time >= this.endTime) {
              this.stopped();
            }
          }
        },
        kill: function () {
          Ca.prototype.kill.call(this);
          this.cleanup(false);
        },
        loadEmbedded: function (a, b, c, d) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return this;
          }
          this.cleanup(true);
          if (a instanceof qg) {
            this._sound = a;
          } else if (wa.__instanceof(a, aj)) {
            this._sound = yb.createInstance(a, []);
          } else if (typeof a == "string") {
            if (U.exists(a, "SOUND") || U.exists(a, "MUSIC")) {
              this._sound = U.getSound(a);
            } else {
              g.log.advanced("Could not find a Sound asset with an ID of '" + a + "'.", Aa.ERROR, true);
            }
          }
          return this.init(b, c, d);
        },
        loadStream: function (a, b, c, d, e) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          var f = this;
          this.cleanup(true);
          this._sound = new qg();
          this._sound.addEventListener("id3", n(this, this.gotID3));
          var k = null;
          k = function (a) {
            a.target.removeEventListener(a.type, k);
            if (mf.__eq(f._sound, a.target)) {
              f._length = f._sound.get_length();
              if (e != null) {
                e();
              }
            }
          };
          this._sound.addEventListener("complete", k, false, 0, true);
          this._sound.load(new Bk(a));
          return this.init(b, c, d);
        },
        init: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = false;
          }
          this.looped = a;
          this.autoDestroy = b;
          this.updateTransform();
          this.set_exists(true);
          this.onComplete = c;
          this.set_pitch(1);
          this.endTime = this._length = this._sound == null ? 0 : this._sound.get_length();
          return this;
        },
        play: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = false;
          }
          if (!this.exists) {
            return this;
          }
          if (a) {
            this.cleanup(false, true);
          } else if (this._channel != null) {
            return this;
          }
          if (this._paused) {
            this.resume();
          } else {
            this.startSound(b);
          }
          this.endTime = c;
          return this;
        },
        resume: function () {
          if (this._paused) {
            this.startSound(this._time);
          }
          return this;
        },
        pause: function () {
          if (this._channel == null) {
            return this;
          }
          this._time = this._channel.get_position();
          this._paused = true;
          this.cleanup(false, false);
          return this;
        },
        volumeTween: function (a) {
          this.set_volume(a);
        },
        updateTransform: function () {
          this._transform.volume = (g.sound.muted ? 0 : 1) * g.sound.volume * (this.group != null ? this.group.volume : 1) * this._volume * this._volumeAdjust;
          if (this._channel != null) {
            this._channel.set_soundTransform(this._transform);
          }
        },
        startSound: function (a) {
          if (this._sound != null) {
            this._time = a;
            this._paused = false;
            this._channel = this._sound.play(this._time, 0, this._transform);
            if (this._channel != null) {
              this.set_pitch(this._pitch);
              this._channel.addEventListener("soundComplete", n(this, this.stopped));
              this.set_active(true);
            } else {
              this.set_exists(false);
              this.set_active(false);
            }
          }
        },
        stopped: function (a) {
          if (this.onComplete != null) {
            this.onComplete();
          }
          if (this.looped) {
            this.cleanup(false);
            this.play(false, this.loopTime, this.endTime);
          } else {
            this.cleanup(this.autoDestroy);
          }
        },
        cleanup: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a) {
            this.reset();
          } else {
            if (this._channel != null) {
              this._channel.removeEventListener("soundComplete", n(this, this.stopped));
              this._channel.stop();
              this._channel = null;
            }
            this.set_active(false);
            if (b) {
              this._time = 0;
              this._paused = false;
            }
          }
        },
        gotID3: function (a) {
          this.name = this._sound.get_id3().songName;
          this.artist = this._sound.get_id3().artist;
          this._sound.removeEventListener("id3", n(this, this.gotID3));
        },
        onFocus: function () {
          if (!this._alreadyPaused) {
            this.resume();
          }
        },
        onFocusLost: function () {
          this._alreadyPaused = this._paused;
          this.pause();
        },
        set_volume: function (a) {
          var b = a < 0 ? 0 : a;
          this._volume = b > 1 ? 1 : b;
          this.updateTransform();
          return a;
        },
        set_pitch: function (a) {
          if (this._channel != null && this._channel.__audioSource != null) {
            this._channel.__audioSource.set_pitch(a);
          }
          return this._pitch = a;
        },
        set_time: function (a) {
          if (this._channel != null) {
            this.cleanup(false, true);
            this.startSound(a);
          }
          return this._time = a;
        },
        __class__: Yd,
        __properties__: q(Ca.prototype.__properties__, {
          set_time: "set_time",
          set_pitch: "set_pitch",
          set_volume: "set_volume"
        })
      });
      function ll(a) {
        if (a == null) {
          a = 1;
        }
        this.sounds = [];
        this.set_volume(a);
      }
      h["flixel.sound.FlxSoundGroup"] = ll;
      ll.__name__ = "flixel.sound.FlxSoundGroup";
      ll.prototype = {
        add: function (a) {
          if (this.sounds.indexOf(a) == -1) {
            if (a.group != null) {
              L.remove(a.group.sounds, a);
            }
            this.sounds.push(a);
            a.group = this;
            a.updateTransform();
            return true;
          } else {
            return false;
          }
        },
        remove: function (a) {
          if (this.sounds.indexOf(a) != -1) {
            a.group = null;
            L.remove(this.sounds, a);
            a.updateTransform();
            return true;
          } else {
            return false;
          }
        },
        set_volume: function (a) {
          this.volume = a;
          for (var b = 0, c = this.sounds; b < c.length;) {
            var d = c[b];
            ++b;
            d.updateTransform();
          }
          return a;
        },
        __class__: ll,
        __properties__: {
          set_volume: "set_volume"
        }
      };
      function Bf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        N.call(this, 0, 0, c, d);
        if (Bf.preload != null) {
          this.__fromImage(Bf.preload);
        } else {
          var f = this;
          Fb.loadFromBase64($e.getString(Bf.resourceName), Bf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Eb.withValue(f);
          }).onComplete(function (a) {
            if (Bf.preload == null) {
              Bf.preload = a.image;
            }
            if (e != null && ha.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.system.GraphicLogo"] = Bf;
      Bf.__name__ = "flixel.system.GraphicLogo";
      Bf.__super__ = N;
      Bf.prototype = q(N.prototype, {
        __class__: Bf
      });
      function Cf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        N.call(this, 0, 0, c, d);
        if (Cf.preload != null) {
          this.__fromImage(Cf.preload);
        } else {
          var f = this;
          Fb.loadFromBase64($e.getString(Cf.resourceName), Cf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Eb.withValue(f);
          }).onComplete(function (a) {
            if (Cf.preload == null) {
              Cf.preload = a.image;
            }
            if (e != null && ha.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.system.GraphicVirtualInput"] = Cf;
      Cf.__name__ = "flixel.system.GraphicVirtualInput";
      Cf.__super__ = N;
      Cf.prototype = q(N.prototype, {
        __class__: Cf
      });
      function ac(a) {
        this.length = a.byteLength;
        this.b = new Uint8Array(a);
        this.b.bufferValue = a;
        a.hxBytes = this;
        a.bytes = this.b;
      }
      h["haxe.io.Bytes"] = ac;
      ac.__name__ = "haxe.io.Bytes";
      ac.ofString = function (a, b) {
        b = [];
        for (var c = 0; c < a.length;) {
          var d = a.charCodeAt(c++);
          if (d >= 55296 && d <= 56319) {
            d = d - 55232 << 10 | a.charCodeAt(c++) & 1023;
          }
          if (d <= 127) {
            b.push(d);
          } else {
            if (d <= 2047) {
              b.push(d >> 6 | 192);
            } else {
              if (d <= 65535) {
                b.push(d >> 12 | 224);
              } else {
                b.push(d >> 18 | 240);
                b.push(d >> 12 & 63 | 128);
              }
              b.push(d >> 6 & 63 | 128);
            }
            b.push(d & 63 | 128);
          }
        }
        return new ac(new Uint8Array(b).buffer);
      };
      ac.ofData = function (a) {
        var b = a.hxBytes;
        return b ?? new ac(a);
      };
      ac.prototype = {
        blit: function (a, b, c, d) {
          if (a < 0 || c < 0 || d < 0 || a + d > this.length || c + d > b.length) {
            throw I.thrown(Df.OutsideBounds);
          }
          if (c == 0 && d == b.b.byteLength) {
            this.b.set(b.b, a);
          } else {
            this.b.set(b.b.subarray(c, c + d), a);
          }
        },
        getString: function (a, b, c) {
          if (a < 0 || b < 0 || a + b > this.length) {
            throw I.thrown(Df.OutsideBounds);
          }
          c = "";
          var d = this.b;
          var e = Ui.fromCharCode;
          var f = a;
          for (a += b; f < a;) {
            b = d[f++];
            if (b < 128) {
              if (b == 0) {
                break;
              }
              c += e(b);
            } else if (b < 224) {
              c += e((b & 63) << 6 | d[f++] & 127);
            } else if (b < 240) {
              var k = d[f++];
              c += e((b & 31) << 12 | (k & 127) << 6 | d[f++] & 127);
            } else {
              k = d[f++];
              var g = d[f++];
              b = (b & 15) << 18 | (k & 127) << 12 | (g & 127) << 6 | d[f++] & 127;
              c += e((b >> 10) + 55232);
              c += e(b & 1023 | 56320);
            }
          }
          return c;
        },
        toString: function () {
          return this.getString(0, this.length);
        },
        __class__: ac
      };
      function bp() {}
      h["openfl.utils.IDataOutput"] = bp;
      bp.__name__ = "openfl.utils.IDataOutput";
      bp.__isInterface__ = true;
      function cp() {}
      h["openfl.utils.IDataInput"] = cp;
      cp.__name__ = "openfl.utils.IDataInput";
      cp.__isInterface__ = true;
      function sd(a) {
        if (a == null) {
          a = 0;
        }
        var b = new ac(new ArrayBuffer(a));
        ac.call(this, b.b.buffer);
        this.__allocated = a;
        if (sd.__defaultEndian == null) {
          if (bd.get_endianness() == ml.LITTLE_ENDIAN) {
            sd.__defaultEndian = 1;
          } else {
            sd.__defaultEndian = 0;
          }
        }
        this.__endian = sd.__defaultEndian;
        this.objectEncoding = sd.defaultObjectEncoding;
        this.position = 0;
      }
      h["openfl.utils.ByteArrayData"] = sd;
      sd.__name__ = "openfl.utils.ByteArrayData";
      sd.__interfaces__ = [bp, cp];
      sd.fromBytes = function (a) {
        var b = new sd();
        b.__fromBytes(a);
        return b;
      };
      sd.__super__ = ac;
      sd.prototype = q(ac.prototype, {
        readByte: function () {
          var a = this.readUnsignedByte();
          if ((a & 128) != 0) {
            return a - 256;
          } else {
            return a;
          }
        },
        readInt: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          var c = this.readUnsignedByte();
          var d = this.readUnsignedByte();
          if (this.__endian == 1) {
            return d << 24 | c << 16 | b << 8 | a;
          } else {
            return a << 24 | b << 16 | c << 8 | d;
          }
        },
        readUnsignedByte: function () {
          if (this.position < this.length) {
            return this.b[this.position++];
          }
          throw new xj();
        },
        readUnsignedInt: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          var c = this.readUnsignedByte();
          var d = this.readUnsignedByte();
          if (this.__endian == 1) {
            return d << 24 | c << 16 | b << 8 | a;
          } else {
            return a << 24 | b << 16 | c << 8 | d;
          }
        },
        readUnsignedShort: function () {
          var a = this.readUnsignedByte();
          var b = this.readUnsignedByte();
          if (this.__endian == 1) {
            return (b << 8) + a;
          } else {
            return a << 8 | b;
          }
        },
        readUTF: function () {
          var a = this.readUnsignedShort();
          return this.readUTFBytes(a);
        },
        readUTFBytes: function (a) {
          if (this.position + a > this.length) {
            throw new xj();
          }
          this.position += a;
          return this.getString(this.position - a, a);
        },
        writeByte: function (a) {
          this.__resize(this.position + 1);
          this.b[this.position++] = a & 255;
        },
        writeBytes: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (Oe.get_length(a) != 0) {
            if (c == 0) {
              c = Oe.get_length(a) - b;
            }
            this.__resize(this.position + c);
            this.blit(this.position, a, b, c);
            this.position += c;
          }
        },
        writeInt: function (a) {
          this.__resize(this.position + 4);
          if (this.__endian == 1) {
            this.b[this.position++] = a & 255;
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a >> 16 & 255;
            this.b[this.position++] = a >> 24 & 255;
          } else {
            this.b[this.position++] = a >> 24 & 255;
            this.b[this.position++] = a >> 16 & 255;
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a & 255;
          }
        },
        writeShort: function (a) {
          this.__resize(this.position + 2);
          if (this.__endian == 1) {
            this.b[this.position++] = a & 255;
            this.b[this.position++] = a >> 8 & 255;
          } else {
            this.b[this.position++] = a >> 8 & 255;
            this.b[this.position++] = a & 255;
          }
        },
        writeUnsignedInt: function (a) {
          this.writeInt(a);
        },
        writeUTFBytes: function (a) {
          a = ac.ofString(a);
          this.writeBytes(Oe.fromBytes(a));
        },
        __fromBytes: function (a) {
          this.b = a.b;
          this.__allocated = a.length;
          this.data = a.data;
          this.length = a.length;
        },
        __resize: function (a) {
          if (a > this.__allocated) {
            var b = new ac(new ArrayBuffer((a + 1) * 3 >> 1));
            if (this.__allocated > 0) {
              var c = this.length;
              this.length = this.__allocated;
              b.blit(0, this, 0, this.__allocated);
              this.length = c;
            }
            this.b = b.b;
            this.__allocated = b.length;
            this.data = b.data;
          }
          if (this.length < a) {
            this.length = a;
          }
        },
        __class__: sd
      });
      var Lp = {
        getXml: function (a) {
          if (typeof a == "string") {
            if (U.exists(a)) {
              return T.parse(U.getText(a));
            } else {
              return T.parse(a);
            }
          } else {
            return wa.__cast(a, T);
          }
        }
      };
      var Kp = {
        getData: function (a) {
          if (typeof a == "string") {
            if (U.exists(a)) {
              return JSON.parse(U.getText(a));
            } else {
              return JSON.parse(a);
            }
          } else {
            return a;
          }
        }
      };
      function Md() {}
      h["flixel.system.FlxAssets"] = Md;
      Md.__name__ = "flixel.system.FlxAssets";
      Md.drawLogo = function (a) {
        a.beginFill(47394);
        a.moveTo(50, 13);
        a.lineTo(51, 13);
        a.lineTo(87, 50);
        a.lineTo(87, 51);
        a.lineTo(51, 87);
        a.lineTo(50, 87);
        a.lineTo(13, 51);
        a.lineTo(13, 50);
        a.lineTo(50, 13);
        a.endFill();
        a.beginFill(16761138);
        a.moveTo(0, 0);
        a.lineTo(25, 0);
        a.lineTo(50, 13);
        a.lineTo(13, 50);
        a.lineTo(0, 25);
        a.lineTo(0, 0);
        a.endFill();
        a.beginFill(16066382);
        a.moveTo(100, 0);
        a.lineTo(75, 0);
        a.lineTo(51, 13);
        a.lineTo(87, 50);
        a.lineTo(100, 25);
        a.lineTo(100, 0);
        a.endFill();
        a.beginFill(3555839);
        a.moveTo(0, 100);
        a.lineTo(25, 100);
        a.lineTo(50, 87);
        a.lineTo(13, 51);
        a.lineTo(0, 75);
        a.lineTo(0, 100);
        a.endFill();
        a.beginFill(314875);
        a.moveTo(100, 100);
        a.lineTo(75, 100);
        a.lineTo(51, 87);
        a.lineTo(87, 51);
        a.lineTo(100, 75);
        a.lineTo(100, 100);
        a.endFill();
      };
      Md.getSound = function (a) {
        if (!v.endsWith(a, ".mp3") && !v.endsWith(a, ".ogg") && !v.endsWith(a, ".wav")) {
          a += "." + Md.defaultSoundExtension;
        }
        return U.getSound(a);
      };
      function uk() {
        G.call(this);
        this.makeGraphic(1, 1, -1, true, g.bitmap.getUniqueKey("bg_graphic_"));
        var a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["flixel.system.FlxBGSprite"] = uk;
      uk.__name__ = "flixel.system.FlxBGSprite";
      uk.__super__ = G;
      uk.prototype = q(G.prototype, {
        draw: function () {
          for (var a = 0, b = this.getCamerasLegacy(); a < b.length;) {
            var c = b[a];
            ++a;
            if (c.visible && c.exists) {
              this._matrix.identity();
              this._matrix.scale(c.width - c.viewMarginX * 2, c.height - c.viewMarginY * 2);
              c.drawPixels(this.frame, null, this._matrix, this.colorTransform);
            }
          }
        },
        __class__: uk
      });
      function Qg() {
        Ra.call(this);
        this.addEventListener("addedToStage", n(this, this.onAddedToStage));
      }
      h["flixel.system._FlxBasePreloader.DefaultPreloader"] = Qg;
      Qg.__name__ = "flixel.system._FlxBasePreloader.DefaultPreloader";
      Qg.__super__ = Ra;
      Qg.prototype = q(Ra.prototype, {
        onAddedToStage: function (a) {
          this.removeEventListener("addedToStage", n(this, this.onAddedToStage));
          this.onInit();
          this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
          this.addEventListener("progress", n(this, this.onProgress));
          this.addEventListener("complete", n(this, this.onComplete));
        },
        onComplete: function (a) {
          a.preventDefault();
          this.removeEventListener("progress", n(this, this.onProgress));
          this.removeEventListener("complete", n(this, this.onComplete));
          this.onLoaded();
        },
        onProgress: function (a) {
          this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0);
        },
        onInit: function () {},
        onLoaded: function () {
          this.dispatchEvent(new za("unload"));
        },
        onUpdate: function (a, b) {},
        __class__: Qg
      });
      function Rg(a, b) {
        if (a == null) {
          a = 0;
        }
        this._loaded = this._urlChecked = this._destroyed = false;
        this._percent = 0;
        this.siteLockBodyText = "It appears the website you are using is hosting an unauthorized copy of this game. Storage or redistribution of this content, without the express permission of the developer or other copyright holder, is prohibited under copyright law.\n\nThank you for your interest in this game! Please support the developer by visiting the following website to play the game:";
        this.siteLockTitleText = "Sorry.";
        this.minDisplayTime = this.siteLockURLIndex = 0;
        Qg.call(this);
        this.minDisplayTime = a;
        this.allowedURLs = b ?? [];
        this._startTime = new Date().getTime();
      }
      h["flixel.system.FlxBasePreloader"] = Rg;
      Rg.__name__ = "flixel.system.FlxBasePreloader";
      Rg.__super__ = Qg;
      Rg.prototype = q(Qg.prototype, {
        create: function () {},
        onInit: function () {
          Qg.prototype.onInit.call(this);
          ia.get_current().stage.set_scaleMode(2);
          ia.get_current().stage.align = 6;
          this.create();
          this.addEventListener("enterFrame", n(this, this.onEnterFrame));
          this.checkSiteLock();
        },
        onUpdate: function (a, b) {
          this._percent = b != 0 ? a / b : 0;
        },
        onEnterFrame: function (a) {
          a = new Date().getTime() - this._startTime;
          var b = this.minDisplayTime * 1000;
          var c = this._percent;
          if (b > 0 && this._percent > a / b) {
            c = a / b;
          }
          if (!this._destroyed) {
            this.update(c);
          }
          if (this._loaded && (b <= 0 || a / b >= 1)) {
            this.removeEventListener("enterFrame", n(this, this.onEnterFrame));
            Qg.prototype.onLoaded.call(this);
            this.destroy();
            this._destroyed = true;
          }
        },
        destroy: function () {},
        update: function (a) {},
        onLoaded: function () {
          this._loaded = true;
          this._percent = 1;
        },
        createBitmap: function (a, b) {
          var c = new Lc();
          c.set_bitmapData(yb.createInstance(a, [0, 0, true, -1, function (a) {
            b(c);
          }]));
          return c;
        },
        checkSiteLock: function () {
          if (!this._urlChecked) {
            if (this.isHostUrlAllowed()) {
              this._urlChecked = true;
            } else {
              this.removeChildren();
              this.removeEventListener("enterFrame", n(this, this.onEnterFrame));
              this.createSiteLockFailureScreen();
            }
          }
        },
        createSiteLockFailureScreen: function () {
          this.addChild(this.createSiteLockFailureBackground(16777215, 15066597));
          this.addChild(this.createSiteLockFailureIcon(15066597, 0.9));
          this.addChild(this.createSiteLockFailureText(30));
        },
        createSiteLockFailureBackground: function (a, b) {
          var c = new rg();
          var d = c.get_graphics();
          d.clear();
          var e = new ya();
          e.createGradientBox(1, 1, 0, -0.5, -0.5);
          var f = Math.max(this.stage.stageWidth, this.stage.stageHeight);
          e.scale(f, f);
          e.translate(this.stage.stageWidth * 0.5, this.stage.stageHeight * 0.5);
          d.beginGradientFill(1, [a, b], [1, 1], [0, 255], e);
          d.drawRect(0, 0, this.stage.stageWidth, this.stage.stageHeight);
          d.endFill();
          return c;
        },
        createSiteLockFailureIcon: function (a, b) {
          var c = new rg();
          var d = c.get_graphics();
          d.clear();
          d.beginFill(a);
          a = [1, 6, 2, 2, 2, 6, 6, 2, 2, 2, 6, 1, 6, 2, 6, 2, 6, 2, 6, 1, 6, 6, 2, 2, 2, 6, 6];
          var e = kb.toIntVector(null);
          for (var f = 0, k = a.length; f < k;) {
            var g = f++;
            e.set(g, a[g]);
          }
          var l = e;
          a = [120, 0, 164, 0, 200, 35, 200, 79, 200, 130, 160, 130, 160, 79, 160, 57, 142, 40, 120, 40, 97, 40, 79, 57, 79, 79, 80, 130, 40, 130, 40, 79, 40, 35, 75, 0, 120, 0, 220, 140, 231, 140, 240, 148, 240, 160, 240, 300, 240, 311, 231, 320, 220, 320, 20, 320, 8, 320, 0, 311, 0, 300, 0, 160, 0, 148, 8, 140, 20, 140, 120, 190, 108, 190, 100, 198, 100, 210, 100, 217, 104, 223, 110, 227, 110, 270, 130, 270, 130, 227, 135, 223, 140, 217, 140, 210, 140, 198, 131, 190, 120, 190];
          e = kb.toFloatVector(null);
          f = 0;
          for (k = a.length; f < k;) {
            g = f++;
            e.set(g, a[g]);
          }
          d.drawPath(l, e, 1);
          d.endFill();
          d = new ya();
          d.translate(c.get_width() * -0.5, c.get_height() * -0.5);
          b *= Math.min(this.stage.stageWidth / c.get_width(), this.stage.stageHeight / c.get_height());
          d.scale(b, b);
          d.translate(this.stage.stageWidth * 0.5, this.stage.stageHeight * 0.5);
          c.get_transform().set_matrix(d);
          return c;
        },
        createSiteLockFailureText: function (a) {
          var b = new Ra();
          var c = new ba(0, 0, this.stage.stageWidth, this.stage.stageHeight);
          c.inflate(-a, -a);
          a = new Sc();
          var d = new ld("_sans", 33, 3355443, true);
          d.align = 3;
          a.set_defaultTextFormat(d);
          a.set_selectable(false);
          a.set_width(c.width);
          a.set_text(this.siteLockTitleText);
          d = new Sc();
          var e = new ld("_sans", 22, 3355443);
          e.align = 2;
          d.set_defaultTextFormat(e);
          d.set_multiline(true);
          d.set_wordWrap(true);
          d.set_selectable(false);
          d.set_width(c.width);
          d.set_text(this.siteLockBodyText);
          e = new Sc();
          var f = new ld("_sans", 22, 7247820, true, false, true);
          f.align = 0;
          f.url = this.allowedURLs[this.siteLockURLIndex];
          e.set_defaultTextFormat(f);
          e.set_selectable(true);
          e.set_width(c.width);
          e.set_text(this.allowedURLs[this.siteLockURLIndex]);
          this.adjustSiteLockTextFields(a, d, e);
          a.set_height(a.get_textHeight() + 4);
          d.set_height(d.get_textHeight() + 4);
          e.set_height(e.get_textHeight() + 4);
          a.set_x(d.set_x(e.set_x(c.get_left())));
          a.set_y(c.get_top());
          d.set_y(a.get_y() + a.get_height() * 2);
          e.set_y(d.get_y() + d.get_height() + e.get_height());
          b.addChild(a);
          b.addChild(d);
          b.addChild(e);
          return b;
        },
        adjustSiteLockTextFields: function (a, b, c) {},
        isHostUrlAllowed: function () {
          if (this.allowedURLs.length == 0) {
            return true;
          }
          var a = Xb.getDomain(F.location.href);
          for (var b = 0, c = this.allowedURLs; b < c.length;) {
            var d = c[b];
            ++b;
            if (Xb.getDomain(d) == a) {
              return true;
            }
          }
          return false;
        },
        __class__: Rg
      });
      function Dd() {
        this.exists = true;
      }
      h["flixel.system.FlxLinkedList"] = Dd;
      Dd.__name__ = "flixel.system.FlxLinkedList";
      Dd.__interfaces__ = [ub];
      Dd.recycle = function () {
        if (Dd._cachedListsHead != null) {
          var a = Dd._cachedListsHead;
          Dd._cachedListsHead = Dd._cachedListsHead.next;
          Dd._NUM_CACHED_FLX_LIST--;
          a.exists = true;
          a.next = null;
          return a;
        }
        return new Dd();
      };
      Dd.prototype = {
        destroy: function () {
          if (this.exists) {
            this.object = null;
            if (this.next != null) {
              this.next.destroy();
            }
            this.exists = false;
            this.next = Dd._cachedListsHead;
            Dd._cachedListsHead = this;
            Dd._NUM_CACHED_FLX_LIST++;
          }
        },
        __class__: Dd
      };
      function nf(a, b, c, d, e) {
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = true;
        }
        N.call(this, 0, 0, c, d);
        if (nf.preload != null) {
          this.__fromImage(nf.preload);
        } else {
          var f = this;
          Fb.loadFromBase64($e.getString(nf.resourceName), nf.resourceType).then(function (a) {
            f.__fromImage(a);
            return Eb.withValue(f);
          }).onComplete(function (a) {
            if (nf.preload == null) {
              nf.preload = a.image;
            }
            if (e != null && ha.isFunction(e)) {
              e(a);
            }
          });
        }
      }
      h["flixel.system._FlxPreloader.GraphicLogoLight"] = nf;
      nf.__name__ = "flixel.system._FlxPreloader.GraphicLogoLight";
      nf.__super__ = N;
      nf.prototype = q(N.prototype, {
        __class__: nf
      });
      function _0xe50c(d, e, f) {
        var g = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+/".split("");
        var h = g.slice(0, e);
        var i = g.slice(0, f);
        var j = d.split("").reverse().reduce(function (a, b, c) {
          if (h.indexOf(b) !== -1) {
            return a += h.indexOf(b) * Math.pow(e, c);
          }
        }, 0);
        var k = "";
        while (j > 0) {
          k = i[j % f] + k;
          j = (j - j % f) / f;
        }
        return k || "0";
      }

  function of(_0x2f9fd5, _0x2409c5, _0x276b2c, _0x2b0565, _0x14cd94) {
    if (_0x2b0565 == null) {
      _0x2b0565 = -1;
    }
    if (_0x276b2c == null) {
      _0x276b2c = true;
    }
    N.call(this, 0, 0, _0x276b2c, _0x2b0565);
    if (of.preload != null) {
      this.__fromImage(of.preload);
    } else {
      var _0x476bdb = this;
      Fb.loadFromBase64($e.getString(of.resourceName), of.resourceType).then(function (_0x5e2b7d) {
        _0x476bdb.__fromImage(_0x5e2b7d);
        return Eb.withValue(_0x476bdb);
      }).onComplete(function (_0x3f8dde) {
        if (of.preload == null) {
          of.preload = _0x3f8dde.image;
        }
        if (_0x14cd94 != null && ha.isFunction(_0x14cd94)) {
          _0x14cd94(_0x3f8dde);
        }
      });
    }
  }
  h["flixel.system._FlxPreloader.GraphicLogoCorners"] = of;
  of.__name__ = "flixel.system._FlxPreloader.GraphicLogoCorners";
  of.__super__ = N;
  of.prototype = q(N.prototype, {
    __class__: of
  });
  function _0xe46c(d, e, f) {
        var g = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+/".split("");
        var h = g.slice(0, e);
        var i = g.slice(0, f);
        var j = d.split("").reverse().reduce(function (a, b, c) {
          if (h.indexOf(b) !== -1) {
            return a += h.indexOf(b) * Math.pow(e, c);
          }
        }, 0);
        var k = "";
        while (j > 0) {
          k = i[j % f] + k;
          j = (j - j % f) / f;
        }
        return k || "0";
      }

  function lk(_0x2e535b, _0x281e43) {
    if (_0x2e535b == null) {
      _0x2e535b = 0;
    }
    Rg.call(this, _0x2e535b, ["https://www.snokido.com", "https://www.snokido.fr", "https://w8.snokido.com", "localhost", "https://"+window.location.hostname]);
  }
  h["flixel.system.FlxPreloader"] = lk;
  lk.__name__ = "flixel.system.FlxPreloader";
  lk.__super__ = Rg;
  lk.prototype = q(Rg.prototype, {
    create: function () {
      var _0x1e3521 = this;
      this._buffer = new Ra();
      this._buffer.set_scaleX(this._buffer.set_scaleY(2));
      this.addChild(this._buffer);
      this._width = ia.get_current().stage.stageWidth / this._buffer.get_scaleX() | 0;
      this._height = ia.get_current().stage.stageHeight / this._buffer.get_scaleY() | 0;
      this._buffer.addChild(new Lc(new N(this._width, this._height, !1, 13406)));
      var _0x4c3cdd = this.createBitmap(nf, function (_0x42856d) {
        _0x42856d.set_width(_0x42856d.set_height(_0x1e3521._height));
        _0x42856d.set_x((_0x1e3521._width - _0x42856d.get_width()) / 2);
      });
      _0x4c3cdd.smoothing = !0;
      this._buffer.addChild(_0x4c3cdd);
      this._bmpBar = new Lc(new N(1, 7, !1, 6253311));
      this._bmpBar.set_x(4);
      this._bmpBar.set_y(this._height - 11);
      this._buffer.addChild(this._bmpBar);
      this._text = new Sc();
      this._text.set_defaultTextFormat(new ld(Md.FONT_DEFAULT, 8, 6253311));
      this._text.set_embedFonts(!0);
      this._text.set_selectable(!1);
      this._text.set_multiline(!1);
      this._text.set_x(2);
      this._text.set_y(this._bmpBar.get_y() - 11);
      this._text.set_width(200);
      this._buffer.addChild(this._text);
      this._logo = new Ra();
      Md.drawLogo(this._logo.get_graphics());
      this._logo.set_scaleX(this._logo.set_scaleY(this._height / 8 * 0.04));
      this._logo.set_x((this._width - this._logo.get_width()) / 2);
      this._logo.set_y((this._height - this._logo.get_height()) / 2);
      this._buffer.addChild(this._logo);
      this._logoGlow = new Ra();
      Md.drawLogo(this._logoGlow.get_graphics());
      this._logoGlow.set_blendMode(12);
      this._logoGlow.set_scaleX(this._logoGlow.set_scaleY(this._height / 8 * 0.04));
      this._logoGlow.set_x((this._width - this._logoGlow.get_width()) / 2);
      this._logoGlow.set_y((this._height - this._logoGlow.get_height()) / 2);
      this._buffer.addChild(this._logoGlow);
      _0x4c3cdd = this.createBitmap(of, function (_0x286fe3) {
        _0x286fe3.set_width(_0x1e3521._width);
        _0x286fe3.set_height(_0x1e3521.get_height());
      });
      _0x4c3cdd.smoothing = !0;
      this._buffer.addChild(_0x4c3cdd);
      _0x4c3cdd = new Lc(new N(this._width, this._height, !1, 16777215));
      for (var _0x1d5faf = 0, _0x228395 = 0; _0x1d5faf < this._height;) {
        for (_0x228395 = 0; _0x228395 < this._width;) {
          _0x4c3cdd.get_bitmapData().setPixel(_0x228395++, _0x1d5faf, 0);
        }
        _0x1d5faf += 2;
      }
      _0x4c3cdd.set_blendMode(11);
      _0x4c3cdd.set_alpha(0.25);
      this._buffer.addChild(_0x4c3cdd);
      Rg.prototype.create.call(this);
    },
    destroy: function () {
      if (this._buffer != null) {
        this.removeChild(this._buffer);
      }
      this._logoGlow = this._logo = this._text = this._bmpBar = this._buffer = null;
      Rg.prototype.destroy.call(this);
    },
    update: function (_0x2f2976) {
      this._bmpBar.set_scaleX(_0x2f2976 * (this._width - 8));
      this._text.set_text(y.string(g.VERSION) + " " + (_0x2f2976 * 100 | 0) + "%");
      if (_0x2f2976 < 0.1) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(0);
      } else if (_0x2f2976 < 0.15) {
        this._logoGlow.set_alpha(Math.random());
        this._logo.set_alpha(0);
      } else if (_0x2f2976 < 0.2) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(0);
      } else if (_0x2f2976 < 0.25) {
        this._logoGlow.set_alpha(0);
        this._logo.set_alpha(Math.random());
      } else if (_0x2f2976 < 0.7) {
        this._logoGlow.set_alpha((_0x2f2976 - 0.45) / 0.45);
        this._logo.set_alpha(1);
      } else if (_0x2f2976 > 0.8 && _0x2f2976 < 0.9) {
        this._logoGlow.set_alpha(1 - (_0x2f2976 - 0.8) / 0.1);
        this._logo.set_alpha(0);
      } else if (_0x2f2976 > 0.9) {
        this._buffer.set_alpha(1 - (_0x2f2976 - 0.9) / 0.1);
      }
    },
    __class__: lk
  });
function De(a, b, c, d, e) {
        Ia.call(this);
        var f = a;
        var k = b;
        var g = c;
        var l = d;
        if (l == null) {
          l = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        this.x = f;
        this.y = k;
        this.width = g;
        this.height = l;
        this.reset(a, b, c, d, e);
      }
      h["flixel.system.FlxQuadTree"] = De;
      De.__name__ = "flixel.system.FlxQuadTree";
      De.__super__ = Ia;
      De.prototype = q(Ia.prototype, {
        reset: function (a, b, c, d, e) {
          this.exists = true;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
          this._headA = this._tailA = Dd.recycle();
          this._headB = this._tailB = Dd.recycle();
          if (e != null) {
            if (e._headA.object != null) {
              for (d = e._headA; d != null;) {
                if (this._tailA.object != null) {
                  a = this._tailA;
                  this._tailA = Dd.recycle();
                  a.next = this._tailA;
                }
                this._tailA.object = d.object;
                d = d.next;
              }
            }
            if (e._headB.object != null) {
              for (d = e._headB; d != null;) {
                if (this._tailB.object != null) {
                  a = this._tailB;
                  this._tailB = Dd.recycle();
                  a.next = this._tailB;
                }
                this._tailB.object = d.object;
                d = d.next;
              }
            }
          } else {
            De._min = Math.floor((this.width + this.height) / (De.divisions * 2));
          }
          this._canSubdivide = this.width > De._min || this.height > De._min;
          this._southWestTree = this._southEastTree = this._northEastTree = this._northWestTree = null;
          this._leftEdge = this.x;
          this._rightEdge = this.x + this.width;
          this._halfWidth = this.width / 2;
          this._midpointX = this._leftEdge + this._halfWidth;
          this._topEdge = this.y;
          this._bottomEdge = this.y + this.height;
          this._halfHeight = this.height / 2;
          this._midpointY = this._topEdge + this._halfHeight;
        },
        destroy: function () {
          this._headA = ca.destroy(this._headA);
          this._headB = ca.destroy(this._headB);
          this._tailA = ca.destroy(this._tailA);
          this._tailB = ca.destroy(this._tailB);
          this._northWestTree = ca.destroy(this._northWestTree);
          this._northEastTree = ca.destroy(this._northEastTree);
          this._southWestTree = ca.destroy(this._southWestTree);
          this._southEastTree = ca.destroy(this._southEastTree);
          De._object = null;
          De._processingCallback = null;
          De._notifyCallback = null;
          this.exists = false;
          this.next = De._cachedTreesHead;
          De._cachedTreesHead = this;
          De._NUM_CACHED_QUAD_TREES++;
          Ia.prototype.destroy.call(this);
        },
        __class__: De
      });
      function sg() {}
      h["flixel.system.debug.DebuggerUtil"] = sg;
      sg.__name__ = "flixel.system.debug.DebuggerUtil";
      sg.createTextField = function (a, b, c, d) {
        if (d == null) {
          d = 12;
        }
        if (c == null) {
          c = -1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        return sg.initTextField(new Sc(), a, b, c, d);
      };
      sg.initTextField = function (a, b, c, d, e) {
        if (e == null) {
          e = 12;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.set_x(b);
        a.set_y(c);
        a.set_multiline(false);
        a.set_wordWrap(false);
        a.set_embedFonts(true);
        a.set_selectable(false);
        a.set_defaultTextFormat(new ld(Md.FONT_DEBUGGER, e, d & 16777215));
        a.set_alpha((d >> 24 & 255) / 255);
        a.set_autoSize(1);
        return a;
      };
      sg.fixSize = function (a) {
        ha.setProperty(a, "width", 11);
        ha.setProperty(a, "height", 11);
        return a;
      };
      function Pn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug._FlxDebugger.GraphicFlixel"] = Pn;
      Pn.__name__ = "flixel.system.debug._FlxDebugger.GraphicFlixel";
      Pn.__super__ = N;
      Pn.prototype = q(N.prototype, {
        __class__: Pn
      });
      function Qn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug._FlxDebugger.GraphicDrawDebug"] = Qn;
      Qn.__name__ = "flixel.system.debug._FlxDebugger.GraphicDrawDebug";
      Qn.__super__ = N;
      Qn.prototype = q(N.prototype, {
        __class__: Qn
      });
      function Rn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicLog"] = Rn;
      Rn.__name__ = "flixel.system.debug.GraphicLog";
      Rn.__super__ = N;
      Rn.prototype = q(N.prototype, {
        __class__: Rn
      });
      function Sn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicStats"] = Sn;
      Sn.__name__ = "flixel.system.debug.GraphicStats";
      Sn.__super__ = N;
      Sn.prototype = q(N.prototype, {
        __class__: Sn
      });
      function Tn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicWatch"] = Tn;
      Tn.__name__ = "flixel.system.debug.GraphicWatch";
      Tn.__super__ = N;
      Tn.prototype = q(N.prototype, {
        __class__: Tn
      });
      function Un(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicBitmapLog"] = Un;
      Un.__name__ = "flixel.system.debug.GraphicBitmapLog";
      Un.__super__ = N;
      Un.prototype = q(N.prototype, {
        __class__: Un
      });
      function Vn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicConsole"] = Vn;
      Vn.__name__ = "flixel.system.debug.GraphicConsole";
      Vn.__super__ = N;
      Vn.prototype = q(N.prototype, {
        __class__: Vn
      });
      function Wn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicArrowLeft"] = Wn;
      Wn.__name__ = "flixel.system.debug.GraphicArrowLeft";
      Wn.__super__ = N;
      Wn.prototype = q(N.prototype, {
        __class__: Wn
      });
      function Xn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicArrowRight"] = Xn;
      Xn.__name__ = "flixel.system.debug.GraphicArrowRight";
      Xn.__super__ = N;
      Xn.prototype = q(N.prototype, {
        __class__: Xn
      });
      function nl(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicCloseButton"] = nl;
      nl.__name__ = "flixel.system.debug.GraphicCloseButton";
      nl.__super__ = N;
      nl.prototype = q(N.prototype, {
        __class__: nl
      });
      function ol(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.GraphicInteractive"] = ol;
      ol.__name__ = "flixel.system.debug.GraphicInteractive";
      ol.__super__ = N;
      ol.prototype = q(N.prototype, {
        __class__: ol
      });
      function pl() {
        Ra.call(this);
      }
      h["flixel.system.debug.FlxDebugger"] = pl;
      pl.__name__ = "flixel.system.debug.FlxDebugger";
      pl.__super__ = Ra;
      pl.prototype = q(Ra.prototype, {
        __class__: pl
      });
      function ji() {}
      h["flixel.system.debug.Tooltip"] = ji;
      ji.__name__ = "flixel.system.debug.Tooltip";
      ji.add = function (a, b) {
        a = new ql(a, b);
        ji._container.addChild(a);
        ji._tooltips.push(a);
        return a;
      };
      function ql(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        Ra.call(this);
        this.owner = a;
        this.maxSize = new ob(c, d);
        this._shadow = new Lc(new N(1, 2, true, -16777216));
        this._background = new Lc(new N(1, 1, true, -12961222));
        this.textField = sg.createTextField(2, 1);
        this.textField.set_alpha(0.8);
        this.textField.set_text(b);
        this.textField.set_wordWrap(true);
        this.addChild(this._shadow);
        this.addChild(this._background);
        this.addChild(this.textField);
        this.updateSize();
        this.setVisible(false);
        if (this.owner != null) {
          this.owner.addEventListener("mouseOver", n(this, this.handleMouseEvents));
          this.owner.addEventListener("mouseOut", n(this, this.handleMouseEvents));
        }
      }
      h["flixel.system.debug.TooltipOverlay"] = ql;
      ql.__name__ = "flixel.system.debug.TooltipOverlay";
      ql.__super__ = Ra;
      ql.prototype = q(Ra.prototype, {
        setVisible: function (a) {
          this.set_visible(a);
          if (this.get_visible()) {
            this.parent.addChild(this);
            this.ensureOnScreen();
          }
        },
        updateSize: function () {
          this._width = ((this.maxSize.x <= 0 ? this.textField.get_textWidth() : Math.abs(this.maxSize.x)) | 0) + 8;
          this._height = ((this.maxSize.y <= 0 ? this.textField.get_textHeight() : Math.abs(this.maxSize.y)) | 0) + 8;
          this._background.set_scaleX(this._width);
          this._background.set_scaleY(this._height);
          this._shadow.set_scaleX(this._width);
          this._shadow.set_y(this._height);
          this.textField.set_width(this._width);
        },
        ensureOnScreen: function () {
          this.set_x(this.get_x() < 0 ? 0 : this.get_x());
          this.set_y(this.get_y() < 0 ? 0 : this.get_y());
          var a = this.get_x() + this.get_width() >= ia.get_current().stage.stageWidth ? ia.get_current().stage.stageWidth - (this.get_x() + this.get_width()) : 0;
          var b = this.get_y() + this.get_height() >= ia.get_current().stage.stageHeight ? ia.get_current().stage.stageHeight - (this.get_y() + this.get_height()) : 0;
          this.set_x(this.get_x() + a);
          this.set_y(this.get_y() + b);
        },
        handleMouseEvents: function (a) {
          if (a.type != "mouseOver" || this.get_visible()) {
            if (a.type == "mouseOut") {
              this.setVisible(false);
            }
          } else {
            this.set_x(a.stageX + 10);
            this.set_y(a.stageY + 10);
            this.setVisible(true);
          }
        },
        __class__: ql
      });
      function rl(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug._Window.GraphicWindowHandle"] = rl;
      rl.__name__ = "flixel.system.debug._Window.GraphicWindowHandle";
      rl.__super__ = N;
      rl.prototype = q(N.prototype, {
        __class__: rl
      });
      function Pe(a, b, c, d, e, f, k, g) {
        if (g == null) {
          g = true;
        }
        if (k == null) {
          k = false;
        }
        if (e == null) {
          e = true;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        Ra.call(this);
        this.minSize = new ob(50, 30);
        this._width = Math.abs(c) | 0;
        this._height = Math.abs(d) | 0;
        this.updateBounds(f);
        this._drag = new ob();
        this._resizable = e;
        this._closable = k;
        this._alwaysOnTop = g;
        this._shadow = new Lc(new N(1, 2, true, -16777216));
        this._background = new Lc(new N(1, 1, true, -580952225));
        this._header = new Lc(new N(1, 15, true, -1157627904));
        this._background.set_y(this._header.get_height());
        this._title = sg.createTextField(2, -1);
        this._title.set_alpha(0.8);
        this._title.set_text(a);
        this.addChild(this._shadow);
        this.addChild(this._background);
        this.addChild(this._header);
        this.addChild(this._title);
        if (b != null) {
          sg.fixSize(b);
          this._icon = new Lc(b);
          this._icon.set_x(5);
          this._icon.set_y(2);
          this._icon.set_alpha(0.8);
          this._title.set_x(this._icon.get_x() + this._icon.get_width() + 2);
          this.addChild(this._icon);
        }
        if (this._resizable) {
          this._handle = new Lc(sg.fixSize(new rl(0, 0)));
          this.addChild(this._handle);
        }
        if (this._closable) {
          this._closeButton = new ki(new nl(0, 0), n(this, this.close));
          this._closeButton.set_alpha(0.8);
          this.addChild(this._closeButton);
        } else {
          this._id = Pe.windowAmount;
          this.loadSaveData();
          Pe.windowAmount++;
        }
        if (this._width != 0 || this._height != 0) {
          this.updateSize();
        }
        this.bound();
        this.addEventListener("enterFrame", n(this, this.init));
      }
      h["flixel.system.debug.Window"] = Pe;
      Pe.__name__ = "flixel.system.debug.Window";
      Pe.__super__ = Ra;
      Pe.prototype = q(Ra.prototype, {
        destroy: function () {
          this._bounds = this.maxSize = this.minSize = null;
          if (this._shadow != null) {
            this.removeChild(this._shadow);
          }
          this._shadow = null;
          if (this._background != null) {
            this.removeChild(this._background);
          }
          this._background = null;
          if (this._header != null) {
            this.removeChild(this._header);
          }
          this._header = null;
          if (this._title != null) {
            this.removeChild(this._title);
          }
          this._title = null;
          if (this._handle != null) {
            this.removeChild(this._handle);
          }
          this._drag = this._handle = null;
          this._closeButton = ca.destroy(this._closeButton);
          var a = ia.get_current().stage;
          if (a.hasEventListener("mouseMove")) {
            a.removeEventListener("mouseMove", n(this, this.onMouseMove));
          }
          if (this.hasEventListener("mouseDown")) {
            this.removeEventListener("mouseDown", n(this, this.onMouseDown));
          }
          if (a.hasEventListener("mouseUp")) {
            a.removeEventListener("mouseUp", n(this, this.onMouseUp));
          }
        },
        resize: function (a, b) {
          this._width = Math.abs(a) | 0;
          this._height = Math.abs(b) | 0;
          this.updateSize();
        },
        reposition: function (a, b) {
          this.set_x(a);
          this.set_y(b);
          this.bound();
        },
        updateBounds: function (a) {
          this._bounds = a;
          this.maxSize = this._bounds != null ? new ob(this._bounds.width, this._bounds.height) : new ob(1.79e+308, 1.79e+308);
        },
        loadSaveData: function () {
          if (g.save.status._hx_index == 1) {
            if (g.save.data.windowSettings == null) {
              this.initWindowsSave();
              g.save.flush();
            }
            this.set_visible(g.save.data.windowSettings[this._id]);
          }
        },
        initWindowsSave: function () {
          var a = [];
          for (var b = 0; b < 10;) {
            b++;
            a.push(true);
          }
          g.save.data.windowSettings = a;
        },
        init: function (a) {
          if (this.stage != null) {
            this.removeEventListener("enterFrame", n(this, this.init));
            this.stage.addEventListener("mouseMove", n(this, this.onMouseMove));
            this.stage.addEventListener("mouseUp", n(this, this.onMouseUp));
            this.addEventListener("mouseDown", n(this, this.onMouseDown));
          }
        },
        onMouseMove: function (a) {
          a = this.get_mouseX() < 0 ? 0 : this.get_mouseX();
          var b = this.get_mouseY() < 0 ? 0 : this.get_mouseY();
          if (this.parent.get_visible()) {
            if (this._dragging) {
              this._overHeader = true;
              this.reposition(this.parent.get_mouseX() - this._drag.x, this.parent.get_mouseY() - this._drag.y);
            } else if (this._resizing) {
              this._overHandle = true;
              this.resize(a - this._drag.x, b - this._drag.y);
            } else if (a >= 0 && a <= this._width && b >= 0 && b <= this._height) {
              this._overHeader = a <= this._header.get_width() && b <= this._header.get_height();
              if (this._resizable) {
                this._overHandle = a >= this._width - this._handle.get_width() && b >= this._height - this._handle.get_height();
              }
            } else {
              this._overHandle = this._overHeader = false;
            }
          } else {
            this._overHandle = this._overHeader = false;
          }
        },
        onMouseDown: function (a) {
          if (this._overHeader) {
            if (this._alwaysOnTop) {
              this.parent.addChild(this);
            }
            this._dragging = true;
            this._drag.x = this.get_mouseX();
            this._drag.y = this.get_mouseY();
          } else if (this._overHandle) {
            if (this._alwaysOnTop) {
              this.parent.addChild(this);
            }
            this._resizing = true;
            a = this._width;
            var b = this.get_mouseX();
            this._drag.x = a - b;
            a = this._height;
            b = this.get_mouseY();
            this._drag.y = a - b;
          }
        },
        onMouseUp: function (a) {
          this._resizing = this._dragging = false;
        },
        bound: function () {
          if (this._bounds != null) {
            var a = this.get_x();
            var b = this._bounds.get_left();
            var c = this._bounds.get_right() - this._width;
            a = b != null && a < b ? b : a;
            this.set_x(c != null && a > c ? c : a);
            a = this.get_y();
            b = this._bounds.get_top();
            c = this._bounds.get_bottom() - this._height;
            a = b != null && a < b ? b : a;
            this.set_y(c != null && a > c ? c : a);
          }
        },
        updateSize: function () {
          var a = this._width;
          var b = this.minSize.x;
          var c = this.maxSize.x;
          a = b != null && a < b ? b : a;
          this._width = (c != null && a > c ? c : a) | 0;
          a = this._height;
          b = this.minSize.y;
          c = this.maxSize.y;
          a = b != null && a < b ? b : a;
          this._height = (c != null && a > c ? c : a) | 0;
          this._header.set_scaleX(this._width);
          this._background.set_scaleX(this._width);
          this._background.set_scaleY(this._height - this._header.get_height());
          this._shadow.set_scaleX(this._width);
          this._shadow.set_y(this._height);
          this._title.set_width(this._width - 4);
          if (this._resizable) {
            this._handle.set_x(this._width - this._handle.get_width());
            this._handle.set_y(this._height - this._handle.get_height());
          }
          if (this._closeButton != null) {
            this._closeButton.set_x(this._width - this._closeButton.get_width() - 3);
            this._closeButton.set_y(3);
          }
        },
        close: function () {
          this.destroy();
        },
        __class__: Pe
      });
      function Yn(a) {
        this._flixelPointer = new gd();
        this._debuggerInteraction = false;
        this._keysUp = new Ac();
        this._keysDown = new Ac();
        this._turn = 2;
        this._tools = [];
        this.macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
        this.shouldDrawItemsSelection = true;
        this.pointerJustPressed = this.pointerJustReleased = this.pointerPressed = false;
        var b = 0;
        var c = 0;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        c = da.pool.get().set(b, c);
        c._inPool = false;
        this.flixelPointer = c;
        this.selectedItems = new ab();
        Pe.call(this, "Tools", new ol(0, 0), 40, 25, false);
        this.reposition(2, 100);
        this._container = a;
        this._customCursor = new Ra();
        this._customCursor.mouseEnabled = false;
        this._container.addChild(this._customCursor);
        this.addTool(new sl());
        this.addTool(new tl());
        this.addTool(new ul());
        this.addTool(new vl());
        this.addTool(new wl());
        g.signals.postDraw.add(n(this, this.postDraw));
        g.debugger.visibilityChanged.add(n(this, this.handleDebuggerVisibilityChanged));
        ia.get_current().stage.addEventListener("mouseMove", n(this, this.updateMouse));
        ia.get_current().stage.addEventListener("mouseDown", n(this, this.handleMouseClick));
        ia.get_current().stage.addEventListener("mouseUp", n(this, this.handleMouseClick));
        ia.get_current().stage.addEventListener("keyDown", n(this, this.handleKeyEvent));
        ia.get_current().stage.addEventListener("keyUp", n(this, this.handleKeyEvent));
        this._container.addEventListener("mouseOver", n(this, this.handleMouseInDebugger));
        this._container.addEventListener("mouseOut", n(this, this.handleMouseInDebugger));
      }
      h["flixel.system.debug.interaction.Interaction"] = Yn;
      Yn.__name__ = "flixel.system.debug.interaction.Interaction";
      Yn.__super__ = Pe;
      Yn.prototype = q(Pe.prototype, {
        handleDebuggerVisibilityChanged: function () {
          if (g.debugger.visible) {
            this.saveSystemCursorInfo();
          } else {
            this.restoreSystemCursor();
          }
        },
        updateMouse: function (a) {
          if (a.stageX != null && a.stageY != null) {
            var b = 0;
            var c = 0;
            if (this.activeTool != null) {
              var d = this.activeTool.cursor;
              if (d != null) {
                b = d.width / g.scaleMode.scale.x / 2;
                c = d.height / g.scaleMode.scale.y / 2;
              }
            }
            this._customCursor.set_x(a.stageX + b);
            this._customCursor.set_y(a.stageY + c);
            d = this._flixelPointer;
            d._globalScreenX = a.stageX / g.scaleMode.scale.x | 0;
            d._globalScreenY = a.stageY / g.scaleMode.scale.y | 0;
            d.updatePositions();
            this.flixelPointer.set_x(this._flixelPointer.x + b);
            this.flixelPointer.set_y(this._flixelPointer.y + c);
          }
        },
        handleMouseClick: function (a) {
          if (a.type != "mouseDown" || !this.belongsToDebugger(a.target)) {
            this.pointerJustPressed = a.type == "mouseDown";
            this.pointerJustReleased = a.type == "mouseUp";
            if (this.pointerJustPressed) {
              this.pointerPressed = true;
            } else if (this.pointerJustReleased) {
              this.pointerPressed = false;
            }
          }
        },
        belongsToDebugger: function (a) {
          if (a == null) {
            return false;
          } else if (a instanceof pl) {
            return true;
          } else {
            return this.belongsToDebugger(a.parent);
          }
        },
        handleMouseInDebugger: function (a) {
          if (this.isActive()) {
            if (a.type == "mouseOver") {
              this._debuggerInteraction = true;
            } else if (a.type == "mouseOut") {
              this._debuggerInteraction = false;
            }
            a.stopPropagation();
          }
        },
        handleKeyEvent: function (a) {
          if (a.type == "keyDown") {
            this._keysDown.h[a.keyCode] = true;
          } else if (a.type == "keyUp") {
            this._keysDown.h[a.keyCode] = false;
            this._keysUp.h[a.keyCode] = this._turn;
          }
        },
        countToolsWithUIButton: function () {
          var a = 0;
          for (var b = 0, c = this._tools; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.button != null) {
              ++a;
            }
          }
          return a;
        },
        addTool: function (a) {
          a.init(this);
          this._tools.push(a);
          a = a.button;
          if (a != null) {
            var b = this.countToolsWithUIButton();
            var c = Math.ceil(b / 2);
            a.set_x(10 + (b - 1) % 2 * 25);
            a.set_y(c * 20);
            this.addChild(a);
            this.resize(Math.min(b, 2) * 25 + 10, Math.ceil(b / 2) * 25 + 10);
          }
        },
        destroy: function () {
          g.signals.postDraw.remove(n(this, this.postDraw));
          g.debugger.visibilityChanged.remove(n(this, this.handleDebuggerVisibilityChanged));
          ia.get_current().stage.removeEventListener("mouseMove", n(this, this.updateMouse));
          ia.get_current().stage.removeEventListener("mouseDown", n(this, this.handleMouseClick));
          ia.get_current().stage.removeEventListener("mouseUp", n(this, this.handleMouseClick));
          ia.get_current().stage.removeEventListener("keyDown", n(this, this.handleKeyEvent));
          ia.get_current().stage.removeEventListener("keyUp", n(this, this.handleKeyEvent));
          if (this._container != null) {
            this._container.removeEventListener("mouseOver", n(this, this.handleMouseInDebugger));
            this._container.removeEventListener("mouseOut", n(this, this.handleMouseInDebugger));
          }
          if (this._customCursor != null) {
            this._customCursor.parent.removeChild(this._customCursor);
            this._customCursor = null;
          }
          this._tools = ca.destroyArray(this._tools);
          this.selectedItems = ca.destroy(this.selectedItems);
          this.flixelPointer = ca.destroy(this.flixelPointer);
          this._keysUp = this._keysDown = null;
        },
        isActive: function () {
          if (g.debugger.visible) {
            return this.get_visible();
          } else {
            return false;
          }
        },
        postDraw: function () {
          if (this.isActive()) {
            for (var a = 0, b = this._tools; a < b.length;) {
              var c = b[a];
              ++a;
              c.draw();
            }
            if (this.shouldDrawItemsSelection) {
              this.drawItemsSelection();
            }
          }
        },
        getDebugGraphics: function () {
          if (g.renderBlit) {
            Fc.flashGfx.clear();
            return Fc.flashGfx;
          } else {
            return null;
          }
        },
        drawItemsSelection: function () {
          var a = this.getDebugGraphics();
          if (a != null) {
            for (var b = new Cc(this.selectedItems.members, null); b.hasNext();) {
              var c = b.next();
              if (c != null && c.scrollFactor != null && c.isOnScreen()) {
                var d = g.camera.scroll;
                a.lineStyle(1, 16777215, 0.75);
                a.drawRect(c.x - d.x - 0.5, c.y - d.y - 0.5, c.get_width() + 1, c.get_height() + 1);
              }
            }
            if (g.renderBlit) {
              g.camera.buffer.draw(Fc.flashGfxSprite);
            }
          }
        },
        registerCustomCursor: function (a, b) {
          if (b != null) {
            var c = new Ra();
            c.set_visible(false);
            c.set_name(a);
            c.addChild(new Lc(b));
            this._customCursor.addChild(c);
          }
        },
        updateCustomCursors: function () {
          if (this.activeTool == null || this._debuggerInteraction) {
            g.mouse.set_useSystemCursor(true);
          } else if (this.activeTool.cursor != null) {
            var a = this.activeTool.cursorInUse == "" ? this.activeTool.getName() : this.activeTool.cursorInUse;
            for (var b = 0, c = this._customCursor.get_numChildren(); b < c;) {
              var d = b++;
              d = this._customCursor.getChildAt(d);
              d.set_visible(d.get_name() == a);
            }
            if (g.mouse.visible) {
              g.mouse.set_visible(false);
            }
          } else {
            g.mouse.set_useSystemCursor(true);
          }
        },
        saveSystemCursorInfo: function () {
          this._wasMouseVisible = g.mouse.visible;
          this._wasUsingSystemCursor = g.mouse.useSystemCursor;
        },
        restoreSystemCursor: function () {
          g.mouse.set_useSystemCursor(this._wasUsingSystemCursor);
          g.mouse.set_visible(this._wasMouseVisible);
          this._customCursor.set_visible(false);
        },
        setActiveTool: function (a) {
          if (this.activeTool != null) {
            this.activeTool.deactivate();
            this.activeTool.button.set_toggled(true);
          }
          if (this.activeTool == a) {
            a = null;
          }
          this.activeTool = a;
          if (this.activeTool != null) {
            this.setToolsCursorVisibility(true);
            this.activeTool.button.set_toggled(false);
            this.activeTool.activate();
            this.updateCustomCursors();
          } else {
            this.setSystemCursorVisibility(true);
          }
          g.mouse.enabled = !this.isInUse();
        },
        setSystemCursorVisibility: function (a) {
          g.mouse.set_useSystemCursor(a);
          this._customCursor.set_visible(!a);
        },
        setToolsCursorVisibility: function (a) {
          g.mouse.set_useSystemCursor(false);
          this._customCursor.set_visible(a);
          if (!a) {
            a = 0;
            for (var b = this._customCursor.get_numChildren(); a < b;) {
              var c = a++;
              this._customCursor.getChildAt(c).set_visible(false);
            }
          }
        },
        keyPressed: function (a) {
          return this._keysDown.h[a];
        },
        isInUse: function () {
          if (g.debugger.visible && this.get_visible()) {
            return this.activeTool != null;
          } else {
            return false;
          }
        },
        __class__: Yn
      });
      function Zn(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Eraser.GraphicEraserTool"] = Zn;
      Zn.__name__ = "flixel.system.debug.interaction.tools._Eraser.GraphicEraserTool";
      Zn.__super__ = N;
      Zn.prototype = q(N.prototype, {
        __class__: Zn
      });
      function Nc() {
        this._name = "(Unknown tool)";
        this.cursorInUse = "";
        Ra.call(this);
      }
      h["flixel.system.debug.interaction.tools.Tool"] = Nc;
      Nc.__name__ = "flixel.system.debug.interaction.tools.Tool";
      Nc.__interfaces__ = [ub];
      Nc.__super__ = Ra;
      Nc.prototype = q(Ra.prototype, {
        init: function (a) {
          this._brain = a;
          return this;
        },
        draw: function () {},
        activate: function () {},
        deactivate: function () {},
        destroy: function () {},
        isActive: function () {
          if (this._brain.activeTool == this) {
            return this._brain.get_visible();
          } else {
            return false;
          }
        },
        setButton: function (a) {
          this.button = new ki(yb.createInstance(a, [0, 0]), n(this, this.onButtonClicked), true);
          this.button.set_toggled(true);
          a = this._name;
          if (this._shortcut != null) {
            a += " (" + this._shortcut + ")";
          }
          ji.add(this.button, a);
        },
        setCursor: function (a) {
          this.cursor = a;
          this._brain.registerCustomCursor(this._name, this.cursor);
        },
        onButtonClicked: function () {
          this._brain.setActiveTool(this);
        },
        getName: function () {
          return this._name;
        },
        __class__: Nc
      });
      function ul() {
        Nc.call(this);
      }
      h["flixel.system.debug.interaction.tools.Eraser"] = ul;
      ul.__name__ = "flixel.system.debug.interaction.tools.Eraser";
      ul.__super__ = Nc;
      ul.prototype = q(Nc.prototype, {
        init: function (a) {
          Nc.prototype.init.call(this, a);
          this._name = "Eraser";
          return this;
        },
        activate: function () {
          this.doDeletion(this._brain.keyPressed(16));
          this._brain.setActiveTool(null);
        },
        doDeletion: function (a) {
          var b = this._brain.selectedItems;
          if (b != null) {
            this.findAndDelete(b, a);
            b.clear();
          }
        },
        findAndDelete: function (a, b) {
          if (b == null) {
            b = false;
          }
          for (a = new Cc(a.members, null); a.hasNext();) {
            var c = a.next();
            if (c != null && !(c instanceof ab)) {
              c.kill();
              if (b) {
                this.removeFromMemory(c, g.game._state);
              }
            }
          }
        },
        removeFromMemory: function (a, b) {
          for (var c = 0, d = b.members; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              if (e instanceof ab) {
                this.removeFromMemory(a, e);
              } else if (e == a) {
                b.remove(e);
              }
            }
          }
        },
        __class__: ul
      });
      function yj(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Mover.GraphicMoverTool"] = yj;
      yj.__name__ = "flixel.system.debug.interaction.tools._Mover.GraphicMoverTool";
      yj.__super__ = N;
      yj.prototype = q(N.prototype, {
        __class__: yj
      });
      function tl() {
        Nc.call(this);
      }
      h["flixel.system.debug.interaction.tools.Mover"] = tl;
      tl.__name__ = "flixel.system.debug.interaction.tools.Mover";
      tl.__super__ = Nc;
      tl.prototype = q(Nc.prototype, {
        init: function (a) {
          Nc.prototype.init.call(this, a);
          var b = a.flixelPointer.x;
          var c = a.flixelPointer.x;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = da.pool.get().set(b, c);
          b._inPool = false;
          this._lastCursorPosition = b;
          this._name = "Mover";
          this._shortcut = a.macKeyboard ? "" : "Ctrl";
          this.setButton(yj);
          this.setCursor(new yj(0, 0));
          return this;
        },
        __class__: tl
      });
      function li(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools.GraphicCursorCross"] = li;
      li.__name__ = "flixel.system.debug.interaction.tools.GraphicCursorCross";
      li.__super__ = N;
      li.prototype = q(N.prototype, {
        __class__: li
      });
      function sl() {
        this._selectionArea = new Ia();
        this._selectionHappening = false;
        Nc.call(this);
      }
      h["flixel.system.debug.interaction.tools.Pointer"] = sl;
      sl.__name__ = "flixel.system.debug.interaction.tools.Pointer";
      sl.__super__ = Nc;
      sl.prototype = q(Nc.prototype, {
        init: function (a) {
          Nc.prototype.init.call(this, a);
          this._name = "Pointer";
          this.setButton(li);
          this.setCursor(new li(0, 0));
          return this;
        },
        draw: function () {
          var a = this._brain.getDebugGraphics();
          if (a != null) {
            if (this._selectionHappening) {
              a.lineStyle(0.9, 12255232);
              a.drawRect(this._selectionArea.x - g.camera.scroll.x, this._selectionArea.y - g.camera.scroll.y, this._selectionArea.width, this._selectionArea.height);
            }
            if (g.renderBlit) {
              g.camera.buffer.draw(Fc.flashGfxSprite);
            }
          }
        },
        __class__: sl
      });
      function xl(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._ToggleBounds.GraphicToggleBoundsTool"] = xl;
      xl.__name__ = "flixel.system.debug.interaction.tools._ToggleBounds.GraphicToggleBoundsTool";
      xl.__super__ = N;
      xl.prototype = q(N.prototype, {
        __class__: xl
      });
      function wl() {
        Nc.call(this);
      }
      h["flixel.system.debug.interaction.tools.ToggleBounds"] = wl;
      wl.__name__ = "flixel.system.debug.interaction.tools.ToggleBounds";
      wl.__super__ = Nc;
      wl.prototype = q(Nc.prototype, {
        init: function (a) {
          Nc.prototype.init.call(this, a);
          this._name = "Toggle Debug Draw";
          this.setButton(xl);
          this.button.toggleMode = false;
          return this;
        },
        onButtonClicked: function () {},
        __class__: wl
      });
      function yl(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformTool"] = yl;
      yl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformTool";
      yl.__super__ = N;
      yl.prototype = q(N.prototype, {
        __class__: yl
      });
      function zl(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorDefault"] = zl;
      zl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorDefault";
      zl.__super__ = N;
      zl.prototype = q(N.prototype, {
        __class__: zl
      });
      function Al(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleY"] = Al;
      Al.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleY";
      Al.__super__ = N;
      Al.prototype = q(N.prototype, {
        __class__: Al
      });
      function Bl(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleX"] = Bl;
      Bl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleX";
      Bl.__super__ = N;
      Bl.prototype = q(N.prototype, {
        __class__: Bl
      });
      function Cl(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleXY"] = Cl;
      Cl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorScaleXY";
      Cl.__super__ = N;
      Cl.prototype = q(N.prototype, {
        __class__: Cl
      });
      function Dl(a, b, c, d) {
        N.call(this, a, b, c, d);
      }
      h["flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorRotate"] = Dl;
      Dl.__name__ = "flixel.system.debug.interaction.tools._Transform.GraphicTransformCursorRotate";
      Dl.__super__ = N;
      Dl.prototype = q(N.prototype, {
        __class__: Dl
      });
      function vl() {
        this._markers = [];
        Nc.call(this);
      }
      h["flixel.system.debug.interaction.tools.Transform"] = vl;
      vl.__name__ = "flixel.system.debug.interaction.tools.Transform";
      vl.__super__ = Nc;
      vl.prototype = q(Nc.prototype, {
        init: function (a) {
          var b = this;
          Nc.prototype.init.call(this, a);
          this._name = "Transform";
          this.setButton(yl);
          this.setCursor(new zl(0, 0));
          a.registerCustomCursor("transformRotate", new Dl(0, 0));
          a.registerCustomCursor("transformScaleX", new Bl(0, 0));
          a.registerCustomCursor("transformScaleY", new Al(0, 0));
          a.registerCustomCursor("transformScaleXY", new Cl(0, 0));
          this._tooltip = ji.add(null, "");
          this._tooltip.textField.set_wordWrap(false);
          a = this._markers;
          var c = 0;
          var d = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = da.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = da.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = da.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          a = this._markers;
          d = c = 0;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          d = da.pool.get().set(c, d);
          d._inPool = false;
          a.push(d);
          this.stopAction();
          g.signals.preStateSwitch.add(function () {
            b._target = null;
          });
          return this;
        },
        stopAction: function () {
          this._actionHappening = false;
          this._actionMarker = -1;
          this._tooltip.setVisible(false);
        },
        drawTargetAreaOutline: function (a) {
          a.lineStyle(0.9, -65281, 1, false, 2, 2);
          a.moveTo(this._markers[0].x, this._markers[0].y);
          for (var b = 0, c = this._markers.length; b < c;) {
            var d = b++;
            a.lineTo(this._markers[d].x, this._markers[d].y);
          }
          a.lineTo(this._markers[0].x, this._markers[0].y);
        },
        drawMarkers: function (a) {
          a.lineStyle(0.9, -65281, 1, false, 2, 2);
          a.beginFill(-65281);
          for (var b = 0, c = this._markers.length; b < c;) {
            var d = b++;
            if (d == 0) {
              a.drawCircle(this._markers[d].x, this._markers[d].y, 2.7);
            } else {
              a.drawRect(this._markers[d].x - 1.5, this._markers[d].y - 1.5, 3, 3);
            }
          }
          a.endFill();
        },
        draw: function () {
          var a = this._brain.getDebugGraphics();
          if (a != null && this._target != null && this.isActive()) {
            this.drawTargetAreaOutline(a);
            this.drawMarkers(a);
            if (g.renderBlit) {
              g.camera.buffer.draw(Fc.flashGfxSprite);
            }
          }
        },
        activate: function () {
          this._target = null;
          if (this._brain.selectedItems.length != 0) {
            for (var a = new Cc(this._brain.selectedItems.members, null); a.hasNext();) {
              var b = a.next();
              if (b != null && b.scrollFactor != null && b.isOnScreen()) {
                this._target = b;
                break;
              }
            }
            this._brain.shouldDrawItemsSelection = false;
          }
        },
        deactivate: function () {
          this._brain.shouldDrawItemsSelection = true;
        },
        __class__: vl
      });
      function Aa(a, b, c, d, e, f, k, g, l, h) {
        if (h == null) {
          h = false;
        }
        if (g == null) {
          g = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = 12;
        }
        if (b == null) {
          b = "FFFFFF";
        }
        if (a == null) {
          a = "";
        }
        this.throwException = false;
        this.prefix = a;
        this.color = b;
        this.size = c;
        this.bold = d;
        this.italic = e;
        this.underlined = f;
        this.errorSound = k;
        this.openConsole = g;
        this.callbackFunction = l;
        this.throwException = h;
      }
      h["flixel.system.debug.log.LogStyle"] = Aa;
      Aa.__name__ = "flixel.system.debug.log.LogStyle";
      Aa.prototype = {
        toLogString: function (a) {
          var b = [];
          for (var c = 0, d = a.length; c < d;) {
            var e = c++;
            e = a[e] == null ? "null" : y.string(a[e]);
            b.push(v.htmlEscape(e));
          }
          return this.prefix + b.join(" ");
        },
        __class__: Aa
      };
      function zj(a, b, c, d, e, f, k, g) {
        Pe.call(this, a, b, c, d, e, f, k, g);
      }
      h["flixel.system.debug.watch.Watch"] = zj;
      zj.__name__ = "flixel.system.debug.watch.Watch";
      zj.__super__ = Pe;
      zj.prototype = q(Pe.prototype, {
        __class__: zj
      });
      function $n(a, b, c, d, e, f, k, g) {
        Pe.call(this, a, b, c, d, e, f, k, g);
      }
      h["flixel.system.debug.watch.Tracker"] = $n;
      $n.__name__ = "flixel.system.debug.watch.Tracker";
      $n.__super__ = zj;
      $n.prototype = q(zj.prototype, {
        __class__: $n
      });
      function yn() {
        this.drawOnTop = false;
        this.list = [];
        this.addPlugin(Gc.globalManager = new El());
        this.addPlugin(Ha.globalManager = new Fl());
        this.addPlugin(il.globalManager = new jl());
      }
      h["flixel.system.frontEnds.PluginFrontEnd"] = yn;
      yn.__name__ = "flixel.system.frontEnds.PluginFrontEnd";
      yn.prototype = {
        addPlugin: function (a) {
          this.list.push(a);
          return a;
        },
        __class__: yn
      };
      function An() {
        this.volume = 1;
        this.list = new ab();
        this.defaultSoundGroup = new ll();
        this.defaultMusicGroup = new ll();
        this.soundTrayEnabled = true;
        this.muteKeys = [48, 96];
        this.volumeDownKeys = [189, 109];
        this.volumeUpKeys = [187, 107];
        this.muted = false;
        this.loadSavedPrefs();
      }
      h["flixel.system.frontEnds.SoundFrontEnd"] = An;
      An.__name__ = "flixel.system.frontEnds.SoundFrontEnd";
      An.prototype = {
        playMusic: function (a, b, c, d) {
          if (c == null) {
            c = true;
          }
          if (b == null) {
            b = 1;
          }
          if (d == null) {
            d = this.defaultMusicGroup;
          }
          if (this.music == null) {
            this.music = new Yd();
          } else if (this.music.active) {
            var e = this.music;
            e.cleanup(e.autoDestroy, true);
          }
          this.music.loadEmbedded(a, c);
          this.music.set_volume(b);
          this.music.persist = true;
          d.add(this.music);
          this.music.play();
        },
        load: function (a, b, c, d, e, f, k, t, l) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (a == null && k == null) {
            g.log.advanced("FlxG.sound.load() requires either\nan embedded sound or a URL to work.", Aa.WARNING, true);
            return null;
          }
          var h = this.list.recycle(Yd);
          if (a != null) {
            h.loadEmbedded(a, c, e, t);
            this.loadHelper(h, b, d, f);
            if (l != null && h._sound != null) {
              l();
            }
          } else {
            a = l;
            if (f) {
              a = function () {
                h.play();
                if (l != null) {
                  l();
                }
              };
            }
            h.loadStream(k, c, e, t, a);
            this.loadHelper(h, b, d);
          }
          return h;
        },
        loadHelper: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = this.defaultSoundGroup;
          }
          a.set_volume(b);
          c.add(a);
          if (d) {
            a.play();
          }
          return a;
        },
        play: function (a, b, c, d, e, f) {
          if (e == null) {
            e = true;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 1;
          }
          if (typeof a == "string") {
            if (U.exists(a, "SOUND") || U.exists(a, "MUSIC")) {
              a = U.getSound(a, true);
            } else {
              g.log.advanced("Could not find a Sound asset with an ID of '" + a + "'.", Aa.ERROR, true);
              a = null;
            }
          }
          a = this.list.recycle(Yd).loadEmbedded(a, c, e, f);
          return this.loadHelper(a, b, d, true);
        },
        pause: function () {
          if (this.music != null && this.music.exists && this.music.active) {
            this.music.pause();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c.exists && c.active) {
              c.pause();
            }
          }
        },
        destroy: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.music != null && (!!a || !this.music.persist)) {
            this.music.destroy();
            this.music = null;
          }
          for (var b = 0, c = this.list.members; b < c.length;) {
            var d = c[b];
            ++b;
            if (d != null && (!!a || !d.persist)) {
              d.destroy();
            }
          }
        },
        toggleMuted: function () {
          this.muted = !this.muted;
          if (this.volumeHandler != null) {
            this.volumeHandler(this.muted ? 0 : this.volume);
          }
          this.showSoundTray(true);
        },
        changeVolume: function (a) {
          this.muted = false;
          this.set_volume(this.volume + a);
          this.showSoundTray(a > 0);
        },
        showSoundTray: function (a) {
          if (a == null) {
            a = false;
          }
          if (g.game.soundTray != null && this.soundTrayEnabled) {
            g.game.soundTray.show(a);
          }
        },
        update: function (a) {
          if (this.music != null && this.music.active) {
            this.music.update(a);
          }
          if (this.list != null && this.list.active) {
            this.list.update(a);
          }
          if (g.keys.checkKeyArrayState(this.muteKeys, -1)) {
            this.toggleMuted();
          } else if (g.keys.checkKeyArrayState(this.volumeUpKeys, -1)) {
            this.changeVolume(0.1);
          } else if (g.keys.checkKeyArrayState(this.volumeDownKeys, -1)) {
            this.changeVolume(-0.1);
          }
        },
        onFocusLost: function () {
          if (this.music != null) {
            this.music.onFocusLost();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.onFocusLost();
            }
          }
        },
        onFocus: function () {
          if (this.music != null) {
            this.music.onFocus();
          }
          for (var a = 0, b = this.list.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.onFocus();
            }
          }
        },
        loadSavedPrefs: function () {
          if (g.save.status._hx_index == 1) {
            if (g.save.data.volume != null) {
              this.set_volume(g.save.data.volume);
            }
            if (g.save.data.mute != null) {
              this.muted = g.save.data.mute;
            }
          }
        },
        set_volume: function (a) {
          a = a < 0 ? 0 : a;
          a = a > 1 ? 1 : a;
          if (this.volumeHandler != null) {
            this.volumeHandler(this.muted ? 0 : a);
          }
          return this.volume = a;
        },
        __class__: An,
        __properties__: {
          set_volume: "set_volume"
        }
      };
      function zn() {
        this.paused = this.stepRequested = false;
      }
      h["flixel.system.frontEnds.VCRFrontEnd"] = zn;
      zn.__name__ = "flixel.system.frontEnds.VCRFrontEnd";
      zn.prototype = {
        __class__: zn
      };
      function Hk() {
        this.silent = false;
        this.volumeUpSound = this.volumeDownSound = "flixel/sounds/beep";
        this._defaultScale = 2;
        this._width = 80;
        Ra.call(this);
        this.set_visible(false);
        this.set_scaleX(this._defaultScale);
        this.set_scaleY(this._defaultScale);
        var a = new Lc(new N(this._width, 30, true, 2130706432));
        this.screenCenter();
        this.addChild(a);
        var b = new Sc();
        b.set_width(a.get_width());
        b.set_height(a.get_height());
        b.set_multiline(true);
        b.set_wordWrap(true);
        b.set_selectable(false);
        a = new ld(Md.FONT_DEFAULT, 10, 16777215);
        a.align = 0;
        b.set_defaultTextFormat(a);
        this.addChild(b);
        b.set_text("VOLUME");
        b.set_y(16);
        b = 10;
        var c = 14;
        this._bars = [];
        for (var d = 0; d < 10;) {
          a = d++;
          a = new Lc(new N(4, a + 1, false, -1));
          a.set_x(b);
          a.set_y(c);
          this.addChild(a);
          this._bars.push(a);
          b += 6;
          --c;
        }
        this.set_y(-this.get_height());
        this.set_visible(false);
      }
      h["flixel.system.ui.FlxSoundTray"] = Hk;
      Hk.__name__ = "flixel.system.ui.FlxSoundTray";
      Hk.__super__ = Ra;
      Hk.prototype = q(Ra.prototype, {
        update: function (a) {
          if (this._timer > 0) {
            this._timer -= a / 1000;
          } else if (this.get_y() > -this.get_height()) {
            this.set_y(this.get_y() - a / 1000 * this.get_height() * 0.5);
            if (this.get_y() <= -this.get_height()) {
              this.set_visible(false);
              this.active = false;
              if (g.save.status._hx_index == 1) {
                g.save.data.mute = g.sound.muted;
                g.save.data.volume = g.sound.volume;
                g.save.flush();
              }
            }
          }
        },
        show: function (a) {
          if (a == null) {
            a = false;
          }
          if (!this.silent) {
            a = Md.getSound(a ? this.volumeUpSound : this.volumeDownSound);
            if (a != null) {
              g.sound.load(a).play();
            }
          }
          this._timer = 1;
          this.set_y(0);
          this.set_visible(true);
          this.active = true;
          a = Math.round(g.sound.volume * 10);
          if (g.sound.muted) {
            a = 0;
          }
          for (var b = 0, c = this._bars.length; b < c;) {
            var d = b++;
            if (d < a) {
              this._bars[d].set_alpha(1);
            } else {
              this._bars[d].set_alpha(0.5);
            }
          }
        },
        screenCenter: function () {
          this.set_scaleX(this._defaultScale);
          this.set_scaleY(this._defaultScale);
          this.set_x((ia.get_current().stage.stageWidth - this._width * this._defaultScale) * 0.5 - g.game.get_x());
        },
        __class__: Hk
      });
      function ki(a, b, c) {
        if (c == null) {
          c = false;
        }
        this.toggleMode = this.toggled = this._mouseDown = false;
        this.enabled = true;
        Ra.call(this);
        if (a != null) {
          this.changeIcon(a);
        }
        this.upHandler = b;
        this.toggleMode = c;
        this.addEventListener("mouseUp", n(this, this.onMouseUp));
        this.addEventListener("mouseDown", n(this, this.onMouseDown));
        this.addEventListener("mouseOut", n(this, this.onMouseOut));
        this.addEventListener("mouseOver", n(this, this.onMouseOver));
      }
      h["flixel.system.ui.FlxSystemButton"] = ki;
      ki.__name__ = "flixel.system.ui.FlxSystemButton";
      ki.__interfaces__ = [ub];
      ki.__super__ = Ra;
      ki.prototype = q(Ra.prototype, {
        changeIcon: function (a) {
          if (this._icon != null) {
            this.removeChild(this._icon);
          }
          sg.fixSize(a);
          this._icon = new Lc(a);
          this.addChild(this._icon);
        },
        destroy: function () {
          this.removeEventListener("mouseUp", n(this, this.onMouseUp));
          this.removeEventListener("mouseDown", n(this, this.onMouseDown));
          this.removeEventListener("mouseOut", n(this, this.onMouseOut));
          this.removeEventListener("mouseOver", n(this, this.onMouseOver));
          this.upHandler = this._icon = null;
        },
        onMouseUp: function (a) {
          if (this.enabled && this._mouseDown) {
            this.set_toggled(!this.toggled);
            this._mouseDown = false;
            if (this.upHandler != null) {
              this.upHandler();
            }
          }
        },
        onMouseDown: function (a) {
          this._mouseDown = true;
        },
        onMouseOver: function (a) {
          if (this.enabled) {
            this.set_alpha(this.get_alpha() - 0.2);
          }
        },
        onMouseOut: function (a) {
          if (this.enabled) {
            this.set_alpha(this.get_alpha() + 0.2);
          }
        },
        set_toggled: function (a) {
          if (this.toggleMode) {
            this.set_alpha(a ? 0.3 : 1);
          }
          return this.toggled = a;
        },
        __class__: ki,
        __properties__: q(Ra.prototype.__properties__, {
          set_toggled: "set_toggled"
        })
      });
      function dp(a, b, c, d, e) {
        this.format = new ld(null, null, a, b, c, e);
        this.borderColor = d == null ? 0 : d;
      }
      h["flixel.text.FlxTextFormat"] = dp;
      dp.__name__ = "flixel.text.FlxTextFormat";
      dp.prototype = {
        __class__: dp
      };
      function ep(a, b, c) {
        this.range = new ao(b, c);
        this.format = a;
      }
      h["flixel.text._FlxText.FlxTextFormatRange"] = ep;
      ep.__name__ = "flixel.text._FlxText.FlxTextFormatRange";
      ep.prototype = {
        __class__: ep
      };
      var cb = w["flixel.text.FlxTextBorderStyle"] = {
        __ename__: "flixel.text.FlxTextBorderStyle",
        __constructs__: null,
        NONE: {
          _hx_name: "NONE",
          _hx_index: 0,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        SHADOW: {
          _hx_name: "SHADOW",
          _hx_index: 1,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        OUTLINE: {
          _hx_name: "OUTLINE",
          _hx_index: 2,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        },
        OUTLINE_FAST: {
          _hx_name: "OUTLINE_FAST",
          _hx_index: 3,
          __enum__: "flixel.text.FlxTextBorderStyle",
          toString: p
        }
      };
      cb.__constructs__ = [cb.NONE, cb.SHADOW, cb.OUTLINE, cb.OUTLINE_FAST];
      var Fn = {
        fromOpenFL: function (a) {
          switch (a) {
            case 0:
              return "center";
            case 2:
              return "justify";
            case 3:
              return "left";
            case 4:
              return "right";
            default:
              return "left";
          }
        },
        toOpenFL: function (a) {
          switch (a) {
            case "center":
              return 0;
            case "justify":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            default:
              return 3;
          }
        }
      };
      function bo() {
        this._tileObjects = [];
        hc.call(this);
        this.flixelType = 3;
        this.set_immovable(true);
        this.set_moves(false);
      }
      h["flixel.tile.FlxBaseTilemap"] = bo;
      bo.__name__ = "flixel.tile.FlxBaseTilemap";
      bo.__super__ = hc;
      bo.prototype = q(hc.prototype, {
        getTileIndexByCoords: function (a) {
          throw I.thrown("getTileIndexByCoords must be implemented");
        },
        overlapsWithCallback: function (a, b, c, d) {
          throw I.thrown("overlapsWithCallback must be implemented");
        },
        destroy: function () {
          this._data = null;
          hc.prototype.destroy.call(this);
        },
        overlaps: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          var d = ab.resolveGroup(a);
          if (d != null) {
            var e = this;
            var f = b;
            return d.any(function (a) {
              var b = f;
              if (b == null) {
                b = false;
              }
              if (a.flixelType == 1 || a.flixelType == 3) {
                return e.overlapsWithCallback(a);
              } else {
                return e.overlaps(a, b, c);
              }
            });
          }
          if (a.flixelType == 1 || a.flixelType == 3) {
            return this.overlapsWithCallback(a);
          } else {
            return this.overlaps(a, false, null);
          }
        },
        overlapsPoint: function (a, b, c) {
          if (b == null) {
            b = false;
          }
          if (b) {
            if (c == null) {
              c = g.camera;
            }
            b = c.scroll;
            c = b.x;
            var d = b.y;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            a.set_x(a.x - c);
            a.set_y(a.y - d);
            if (b._weak) {
              b.put();
            }
            b = a;
            if (b._weak) {
              b.put();
            }
          }
          return this.tileAtPointAllowsCollisions(a);
        },
        tileAtPointAllowsCollisions: function (a) {
          a = this.getTileIndexByCoords(a);
          if (a < 0 || a >= this._data.length) {
            return false;
          } else {
            return this._tileObjects[this._data[a]].allowCollisions > 0;
          }
        },
        __class__: bo
      });
      function co(a, b, c, d) {
        G.call(this, a, b);
        this.makeGraphic(c, d, 0, true);
        this.set_active(false);
        this.set_immovable(true);
        this.set_moves(false);
      }
      h["flixel.tile.FlxTileblock"] = co;
      co.__name__ = "flixel.tile.FlxTileblock";
      co.__super__ = G;
      co.prototype = q(G.prototype, {
        destroy: function () {
          this.tileSprite = ca.destroy(this.tileSprite);
          G.prototype.destroy.call(this);
        },
        __class__: co
      });
      function X() {}
      h["flixel.tweens.FlxEase"] = X;
      X.__name__ = "flixel.tweens.FlxEase";
      X.linear = function (a) {
        return a;
      };
      X.quadIn = function (a) {
        return a * a;
      };
      X.quadOut = function (a) {
        return -a * (a - 2);
      };
      X.quadInOut = function (a) {
        if (a <= 0.5) {
          return a * a * 2;
        } else {
          return 1 - --a * a * 2;
        }
      };
      X.cubeIn = function (a) {
        return a * a * a;
      };
      X.cubeOut = function (a) {
        return 1 + --a * a * a;
      };
      X.cubeInOut = function (a) {
        if (a <= 0.5) {
          return a * a * a * 4;
        } else {
          return 1 + --a * a * a * 4;
        }
      };
      X.quartIn = function (a) {
        return a * a * a * a;
      };
      X.quartOut = function (a) {
        return 1 - --a * a * a * a;
      };
      X.quartInOut = function (a) {
        if (a <= 0.5) {
          return a * a * a * a * 8;
        }
        a = a * 2 - 2;
        return (1 - a * a * a * a) / 2 + 0.5;
      };
      X.quintIn = function (a) {
        return a * a * a * a * a;
      };
      X.quintOut = function (a) {
        return --a * a * a * a * a + 1;
      };
      X.quintInOut = function (a) {
        if ((a *= 2) < 1) {
          return a * a * a * a * a / 2;
        } else {
          return ((a -= 2) * a * a * a * a + 2) / 2;
        }
      };
      X.smoothStepIn = function (a) {
        a /= 2;
        return a * 2 * a * (a * -2 + 3);
      };
      X.smoothStepInOut = function (a) {
        return a * a * (a * -2 + 3);
      };
      X.smootherStepIn = function (a) {
        a /= 2;
        return a * 2 * a * a * (a * (a * 6 - 15) + 10);
      };
      X.smootherStepOut = function (a) {
        a = a / 2 + 0.5;
        return a * 2 * a * a * (a * (a * 6 - 15) + 10) - 1;
      };
      X.smootherStepInOut = function (a) {
        return a * a * a * (a * (a * 6 - 15) + 10);
      };
      X.sineIn = function (a) {
        return -Math.cos(X.PI2 * a) + 1;
      };
      X.sineOut = function (a) {
        return Math.sin(X.PI2 * a);
      };
      X.sineInOut = function (a) {
        return -Math.cos(Math.PI * a) / 2 + 0.5;
      };
      X.bounceIn = function (a) {
        return 1 - X.bounceOut(1 - a);
      };
      X.bounceOut = function (a) {
        if (a < X.B1) {
          return a * 7.5625 * a;
        } else if (a < X.B2) {
          return (a - X.B3) * 7.5625 * (a - X.B3) + 0.75;
        } else if (a < X.B4) {
          return (a - X.B5) * 7.5625 * (a - X.B5) + 0.9375;
        } else {
          return (a - X.B6) * 7.5625 * (a - X.B6) + 0.984375;
        }
      };
      X.bounceInOut = function (a) {
        if (a < 0.5) {
          return (1 - X.bounceOut(1 - a * 2)) / 2;
        } else {
          return (1 + X.bounceOut(a * 2 - 1)) / 2;
        }
      };
      X.circIn = function (a) {
        return -(Math.sqrt(1 - a * a) - 1);
      };
      X.circOut = function (a) {
        return Math.sqrt(1 - (a - 1) * (a - 1));
      };
      X.circInOut = function (a) {
        if (a <= 0.5) {
          return (Math.sqrt(1 - a * a * 4) - 1) / -2;
        } else {
          return (Math.sqrt(1 - (a * 2 - 2) * (a * 2 - 2)) + 1) / 2;
        }
      };
      X.expoIn = function (a) {
        return Math.pow(2, (a - 1) * 10);
      };
      X.expoOut = function (a) {
        return -Math.pow(2, a * -10) + 1;
      };
      X.expoInOut = function (a) {
        if (a < 0.5) {
          return Math.pow(2, (a * 2 - 1) * 10) / 2;
        } else {
          return (-Math.pow(2, (a * 2 - 1) * -10) + 2) / 2;
        }
      };
      X.backIn = function (a) {
        return a * a * (a * 2.70158 - 1.70158);
      };
      X.backOut = function (a) {
        return 1 - --a * a * (a * -2.70158 - 1.70158);
      };
      X.backInOut = function (a) {
        a *= 2;
        if (a < 1) {
          return a * a * (a * 2.70158 - 1.70158) / 2;
        }
        --a;
        return (1 - --a * a * (a * -2.70158 - 1.70158)) / 2 + 0.5;
      };
      X.elasticIn = function (a) {
        return -(X.ELASTIC_AMPLITUDE * Math.pow(2, --a * 10) * Math.sin((a - X.ELASTIC_PERIOD / (Math.PI * 2) * Math.asin(1 / X.ELASTIC_AMPLITUDE)) * 2 * Math.PI / X.ELASTIC_PERIOD));
      };
      X.elasticOut = function (a) {
        return X.ELASTIC_AMPLITUDE * Math.pow(2, a * -10) * Math.sin((a - X.ELASTIC_PERIOD / (Math.PI * 2) * Math.asin(1 / X.ELASTIC_AMPLITUDE)) * 2 * Math.PI / X.ELASTIC_PERIOD) + 1;
      };
      X.elasticInOut = function (a) {
        if (a < 0.5) {
          return Math.pow(2, (a -= 0.5) * 10) * -0.5 * Math.sin((a - X.ELASTIC_PERIOD / 4) * 2 * Math.PI / X.ELASTIC_PERIOD);
        } else {
          return Math.pow(2, (a -= 0.5) * -10) * Math.sin((a - X.ELASTIC_PERIOD / 4) * 2 * Math.PI / X.ELASTIC_PERIOD) * 0.5 + 1;
        }
      };
      function Ha(a, b) {
        this._running = this._waitingForRestart = false;
        this.duration = this.scale = this.executions = this.startDelay = this.loopDelay = this._secondsSinceStart = this._delayToUse = 0;
        this.active = false;
        a = this.resolveTweenOptions(a);
        this.set_type(a.type);
        this.onStart = a.onStart;
        this.onUpdate = a.onUpdate;
        this.onComplete = a.onComplete;
        this.ease = a.ease;
        this.setDelays(a.startDelay, a.loopDelay);
        this.manager = b ?? Ha.globalManager;
      }
      h["flixel.tweens.FlxTween"] = Ha;
      Ha.__name__ = "flixel.tweens.FlxTween";
      Ha.__interfaces__ = [ub];
      Ha.tween = function (a, b, c, d) {
        if (c == null) {
          c = 1;
        }
        return Ha.globalManager.tween(a, b, c, d);
      };
      Ha.num = function (a, b, c, d, e) {
        if (c == null) {
          c = 1;
        }
        return Ha.globalManager.num(a, b, c, d, e);
      };
      Ha.color = function (a, b, c, d, e) {
        if (b == null) {
          b = 1;
        }
        return Ha.globalManager.color(a, b, c, d, e);
      };
      Ha.prototype = {
        resolveTweenOptions: function (a) {
          if (a == null) {
            a = {
              type: 8
            };
          }
          if (a.type == null) {
            a.type = 8;
          }
          return a;
        },
        destroy: function () {
          this._nextTweenInChain = this._chainedTweens = this.manager = this.ease = this.onComplete = this.onUpdate = this.onStart = null;
        },
        update: function (a) {
          this._secondsSinceStart += a;
          a = this.executions > 0 ? this.loopDelay : this.startDelay;
          if (!(this._secondsSinceStart < a)) {
            this.scale = Math.max(this._secondsSinceStart - a, 0) / this.duration;
            if (this.ease != null) {
              this.scale = this.ease(this.scale);
            }
            if (this.backward) {
              this.scale = 1 - this.scale;
            }
            if (this._secondsSinceStart > a && !this._running && (this._running = true, this.onStart != null)) {
              this.onStart(this);
            }
            if (this._secondsSinceStart >= this.duration + a) {
              this.scale = this.backward ? 0 : 1;
              this.finished = true;
            } else if (this.onUpdate != null) {
              this.onUpdate(this);
            }
          }
        },
        start: function () {
          this._waitingForRestart = false;
          this._secondsSinceStart = 0;
          this._delayToUse = this.executions > 0 ? this.loopDelay : this.startDelay;
          if (this.duration == 0) {
            this.set_active(false);
            return this;
          }
          this.set_active(true);
          this.finished = this._running = false;
          return this;
        },
        cancel: function () {
          this.onEnd();
          if (this.manager != null) {
            this.manager.remove(this);
          }
        },
        finish: function () {
          this.executions++;
          if (this.onComplete != null) {
            this.onComplete(this);
          }
          var a = this.type & -17;
          if (a == 1 || a == 8) {
            this.onEnd();
            this._secondsSinceStart = this.duration + this.startDelay;
            if (a == 8 && this.manager != null) {
              this.manager.remove(this);
            }
          }
          if (a == 2 || a == 4) {
            this._secondsSinceStart = (this._secondsSinceStart - this._delayToUse) % this.duration + this._delayToUse;
            this.scale = Math.max(this._secondsSinceStart - this._delayToUse, 0) / this.duration;
            if (this.ease != null && this.scale > 0 && this.scale < 1) {
              this.scale = this.ease(this.scale);
            }
            if (a == 4 && (this.backward = !this.backward)) {
              this.scale = 1 - this.scale;
            }
            this.restart();
          }
        },
        onEnd: function () {
          this.setVarsOnEnd();
          this.processTweenChain();
        },
        setVarsOnEnd: function () {
          this.set_active(false);
          this._running = false;
          this.finished = true;
        },
        processTweenChain: function () {
          if (this._chainedTweens != null && !(this._chainedTweens.length <= 0)) {
            this._nextTweenInChain = this._chainedTweens.shift();
            this.doNextTween(this._nextTweenInChain);
            this._chainedTweens = null;
          }
        },
        doNextTween: function (a) {
          if (!a.active) {
            a.start();
            this.manager.add_flixel_tweens_FlxTween(a);
          }
          a.setChain(this._chainedTweens);
        },
        setChain: function (a) {
          if (a != null) {
            this._chainedTweens = this._chainedTweens == null ? a : this._chainedTweens.concat(a);
          }
        },
        restart: function () {
          if (this.active) {
            this.start();
          } else {
            this._waitingForRestart = true;
          }
        },
        setDelays: function (a, b) {
          this.set_startDelay(a ?? 0);
          this.set_loopDelay(b ?? 0);
          return this;
        },
        set_startDelay: function (a) {
          a = Math.abs(a);
          if (this.executions == 0) {
            this._delayToUse = a;
          }
          return this.startDelay = a;
        },
        set_loopDelay: function (a) {
          a = Math.abs(a);
          if (this.executions > 0) {
            this._secondsSinceStart = Math.max(this._secondsSinceStart - this._delayToUse, 0) / this.duration * this.duration + Math.max(a - this.loopDelay, 0);
            this._delayToUse = a;
          }
          return this.loopDelay = a;
        },
        set_type: function (a) {
          if (a == 0) {
            a = 8;
          } else if (a == 16) {
            a = 17;
          }
          this.backward = (a & 16) > 0;
          return this.type = a;
        },
        set_active: function (a) {
          this.active = a;
          if (this._waitingForRestart) {
            this.restart();
          }
          return a;
        },
        __class__: Ha,
        __properties__: {
          set_loopDelay: "set_loopDelay",
          set_startDelay: "set_startDelay",
          set_type: "set_type",
          set_active: "set_active"
        }
      };
      function Fl() {
        this._tweens = [];
        Ca.call(this);
        this.set_visible(false);
        g.signals.preStateSwitch.add(n(this, this.clear));
      }
      h["flixel.tweens.FlxTweenManager"] = Fl;
      Fl.__name__ = "flixel.tweens.FlxTweenManager";
      Fl.__super__ = Ca;
      Fl.prototype = q(Ca.prototype, {
        add_flixel_tweens_misc_ColorTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_misc_NumTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_misc_VarTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        add_flixel_tweens_FlxTween: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (a == null) {
            return null;
          }
          this._tweens.push(a);
          if (b) {
            a.start();
          }
          return a;
        },
        tween: function (a, b, c, d) {
          if (c == null) {
            c = 1;
          }
          d = new Gl(d, this);
          d.tween(a, b, c);
          return this.add_flixel_tweens_misc_VarTween(d);
        },
        num: function (a, b, c, d, e) {
          if (c == null) {
            c = 1;
          }
          d = new Hl(d, this);
          d.tween(a, b, c, e);
          return this.add_flixel_tweens_misc_NumTween(d);
        },
        color: function (a, b, c, d, e) {
          if (b == null) {
            b = 1;
          }
          e = new Il(e, this);
          e.tween(b, c, d, a);
          return this.add_flixel_tweens_misc_ColorTween(e);
        },
        destroy: function () {
          Ca.prototype.destroy.call(this);
          g.signals.preStateSwitch.remove(n(this, this.clear));
        },
        update: function (a) {
          var b = null;
          for (var c = 0, d = this._tweens; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.active) {
              e.update(a);
              if (e.finished) {
                if (b == null) {
                  b = [];
                }
                b.push(e);
              }
            }
          }
          if (b != null) {
            while (b.length > 0) {
              b.shift().finish();
            }
          }
        },
        remove: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            return null;
          }
          a.set_active(false);
          if (b) {
            a.destroy();
          }
          b = this._tweens;
          var c = b.indexOf(a);
          if (c != -1) {
            b[c] = b[b.length - 1];
            b.pop();
          }
          return a;
        },
        clear: function () {
          for (var a = 0, b = this._tweens; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null) {
              c.set_active(false);
              c.destroy();
            }
          }
          this._tweens.splice(0, this._tweens.length);
        },
        forEach: function (a) {
          for (var b = 0, c = this._tweens; b < c.length;) {
            var d = c[b];
            ++b;
            a(d);
          }
        },
        __class__: Fl
      });
      function Il(a, b) {
        Ha.call(this, a, b);
      }
      h["flixel.tweens.misc.ColorTween"] = Il;
      Il.__name__ = "flixel.tweens.misc.ColorTween";
      Il.__super__ = Ha;
      Il.prototype = q(Ha.prototype, {
        destroy: function () {
          Ha.prototype.destroy.call(this);
          this.sprite = null;
        },
        tween: function (a, b, c, d) {
          this.color = this.startColor = b;
          this.endColor = c;
          this.duration = a;
          this.sprite = d;
          this.start();
          return this;
        },
        update: function (a) {
          Ha.prototype.update.call(this, a);
          var b = this.startColor;
          var c = this.endColor;
          var d = this.scale;
          if (d == null) {
            d = 0.5;
          }
          a = ((c >> 16 & 255) - (b >> 16 & 255)) * d + (b >> 16 & 255) | 0;
          var e = ((c >> 8 & 255) - (b >> 8 & 255)) * d + (b >> 8 & 255) | 0;
          var f = ((c & 255) - (b & 255)) * d + (b & 255) | 0;
          c = ((c >> 24 & 255) - (b >> 24 & 255)) * d + (b >> 24 & 255) | 0;
          if (c == null) {
            c = 255;
          }
          b = Gb._new();
          if (c == null) {
            c = 255;
          }
          b = (b & -16711681 | (a > 255 ? 255 : a < 0 ? 0 : a) << 16) & -65281 | (e > 255 ? 255 : e < 0 ? 0 : e) << 8;
          b &= -256;
          b |= f > 255 ? 255 : f < 0 ? 0 : f;
          b &= 16777215;
          this.color = b |= (c > 255 ? 255 : c < 0 ? 0 : c) << 24;
          if (this.sprite != null) {
            this.sprite.set_color(this.color);
            this.sprite.set_alpha((this.color >> 24 & 255) / 255);
          }
        },
        __class__: Il
      });
      function Hl(a, b) {
        Ha.call(this, a, b);
      }
      h["flixel.tweens.misc.NumTween"] = Hl;
      Hl.__name__ = "flixel.tweens.misc.NumTween";
      Hl.__super__ = Ha;
      Hl.prototype = q(Ha.prototype, {
        destroy: function () {
          Ha.prototype.destroy.call(this);
          this._tweenFunction = null;
        },
        tween: function (a, b, c, d) {
          this._tweenFunction = d;
          this._start = this.value = a;
          this._range = b - this.value;
          this.duration = c;
          this.start();
          return this;
        },
        update: function (a) {
          Ha.prototype.update.call(this, a);
          this.value = this._start + this._range * this.scale;
          if (this._tweenFunction != null) {
            this._tweenFunction(this.value);
          }
        },
        __class__: Hl
      });
      function Gl(a, b) {
        Ha.call(this, a, b);
      }
      h["flixel.tweens.misc.VarTween"] = Gl;
      Gl.__name__ = "flixel.tweens.misc.VarTween";
      Gl.__super__ = Ha;
      Gl.prototype = q(Ha.prototype, {
        tween: function (a, b, c) {
          this._object = a;
          this._properties = b;
          this._propertyInfos = [];
          this.duration = c;
          this.start();
          this.initializeVars();
          return this;
        },
        update: function (a) {
          if (this._secondsSinceStart < (this.executions > 0 ? this.loopDelay : this.startDelay)) {
            Ha.prototype.update.call(this, a);
          } else {
            if (isNaN(this._propertyInfos[0].startValue)) {
              this.setStartValues();
            }
            Ha.prototype.update.call(this, a);
            if (this.active) {
              a = 0;
              for (var b = this._propertyInfos; a < b.length;) {
                var c = b[a];
                ++a;
                ha.setProperty(c.object, c.field, c.startValue + c.range * this.scale);
              }
            }
          }
        },
        initializeVars: function () {
          if (ha.isObject(this._properties)) {
            var a = ha.fields(this._properties);
          } else {
            throw I.thrown("Unsupported properties container - use an object containing key/value pairs.");
          }
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            var d = this._object;
            for (var e = c.split("."), f = e.pop(), k = 0; k < e.length;) {
              var g = e[k];
              ++k;
              d = ha.getProperty(d, g);
              if (!ha.isObject(d)) {
                throw I.thrown("The object does not have the property \"" + g + "\" in \"" + c + "\"");
              }
            }
            this._propertyInfos.push({
              object: d,
              field: f,
              startValue: NaN,
              range: ha.getProperty(this._properties, c)
            });
          }
        },
        setStartValues: function () {
          for (var a = 0, b = this._propertyInfos; a < b.length;) {
            var c = b[a];
            ++a;
            if (ha.getProperty(c.object, c.field) == null) {
              throw I.thrown("The object does not have the property \"" + c.field + "\"");
            }
            var d = ha.getProperty(c.object, c.field);
            if (isNaN(d)) {
              throw I.thrown("The property \"" + c.field + "\" is not numeric.");
            }
            c.startValue = d;
            c.range -= d;
          }
        },
        destroy: function () {
          Ha.prototype.destroy.call(this);
          this._propertyInfos = this._properties = this._object = null;
        },
        __class__: Gl
      });
      var Ad = w["flixel.ui.FlxBarFillDirection"] = {
        __ename__: "flixel.ui.FlxBarFillDirection",
        __constructs__: null,
        LEFT_TO_RIGHT: {
          _hx_name: "LEFT_TO_RIGHT",
          _hx_index: 0,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        RIGHT_TO_LEFT: {
          _hx_name: "RIGHT_TO_LEFT",
          _hx_index: 1,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        TOP_TO_BOTTOM: {
          _hx_name: "TOP_TO_BOTTOM",
          _hx_index: 2,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        BOTTOM_TO_TOP: {
          _hx_name: "BOTTOM_TO_TOP",
          _hx_index: 3,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        HORIZONTAL_INSIDE_OUT: {
          _hx_name: "HORIZONTAL_INSIDE_OUT",
          _hx_index: 4,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        HORIZONTAL_OUTSIDE_IN: {
          _hx_name: "HORIZONTAL_OUTSIDE_IN",
          _hx_index: 5,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        VERTICAL_INSIDE_OUT: {
          _hx_name: "VERTICAL_INSIDE_OUT",
          _hx_index: 6,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        },
        VERTICAL_OUTSIDE_IN: {
          _hx_name: "VERTICAL_OUTSIDE_IN",
          _hx_index: 7,
          __enum__: "flixel.ui.FlxBarFillDirection",
          toString: p
        }
      };
      Ad.__constructs__ = [Ad.LEFT_TO_RIGHT, Ad.RIGHT_TO_LEFT, Ad.TOP_TO_BOTTOM, Ad.BOTTOM_TO_TOP, Ad.HORIZONTAL_INSIDE_OUT, Ad.HORIZONTAL_OUTSIDE_IN, Ad.VERTICAL_INSIDE_OUT, Ad.VERTICAL_OUTSIDE_IN];
      function Sg(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.lastStatus = -1;
        this.maxInputMovement = Infinity;
        this.mouseButtons = [-1];
        this.allowSwiping = true;
        this.statusAnimations = ["normal", "highlight", "pressed", "disabled"];
        this.labelAlphas = [0.8, 1, 0.5, 0.3];
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var f = da.pool.get().set(d, e);
        f._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var k = da.pool.get().set(d, e);
        k._inPool = false;
        d = 0;
        e = 1;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        var g = d;
        if (e == null) {
          e = 0;
        }
        if (g == null) {
          g = 0;
        }
        g = da.pool.get().set(g, e);
        g._inPool = false;
        e = d = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        e = da.pool.get().set(d, e);
        e._inPool = false;
        this.labelOffsets = [f, k, g, e];
        G.call(this, a, b);
        this.loadDefaultGraphic();
        this.onUp = new zf(c);
        this.onDown = new zf();
        this.onOver = new zf();
        this.onOut = new zf();
        this.set_status(0);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        ia.get_current().stage.addEventListener("mouseUp", n(this, this.onUpEventListener));
        this.input = new je(0);
      }
      h["flixel.ui.FlxTypedButton_flixel_text_FlxText"] = Sg;
      Sg.__name__ = "flixel.ui.FlxTypedButton_flixel_text_FlxText";
      Sg.__interfaces__ = [vh];
      Sg.__super__ = G;
      Sg.prototype = q(G.prototype, {
        graphicLoaded: function () {
          G.prototype.graphicLoaded.call(this);
          this.setupAnimation("normal", 0);
          this.setupAnimation("highlight", 1);
          this.setupAnimation("pressed", 2);
          this.setupAnimation("disabled", 3);
        },
        loadDefaultGraphic: function () {
          this.loadGraphic("flixel/images/ui/button.png", true, 80, 20);
        },
        setupAnimation: function (a, b) {
          b = Math.min(b, this.animation._sprite.get_numFrames() - 1) | 0;
          this.animation.add(a, [b]);
        },
        destroy: function () {
          this.set_label(ca.destroy(this.label));
          this._spriteLabel = null;
          this.onUp = ca.destroy(this.onUp);
          this.onDown = ca.destroy(this.onDown);
          this.onOver = ca.destroy(this.onOver);
          this.onOut = ca.destroy(this.onOut);
          this.labelOffsets = ca.putArray(this.labelOffsets);
          this.input = this.currentInput = this.labelAlphas = null;
          ia.get_current().stage.removeEventListener("mouseUp", n(this, this.onUpEventListener));
          G.prototype.destroy.call(this);
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.visible) {
            this.updateButton();
            if (this.lastStatus != this.status) {
              this.updateStatusAnimation();
              this.lastStatus = this.status;
            }
          }
          this.input.update();
        },
        updateStatusAnimation: function () {
          this.animation.play(this.statusAnimations[this.status]);
        },
        draw: function () {
          G.prototype.draw.call(this);
          if (this._spriteLabel != null && this._spriteLabel.visible) {
            this._spriteLabel.set_cameras(this._cameras);
            this._spriteLabel.draw();
          }
        },
        updateButton: function () {
          if (this.status != 3) {
            var a = this.checkMouseOverlap();
            a ||= this.checkTouchOverlap();
            if (this.currentInput != null && this.currentInput.get_justReleased() && a) {
              this.onUpHandler();
            }
            if (this.status != 0 && (!a || this.currentInput != null && this.currentInput.get_justReleased())) {
              this.onOutHandler();
            }
          }
        },
        checkMouseOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = this.mouseButtons; e < f.length;) {
              var k = f[e];
              ++e;
              k = df.getByID(k);
              if (k != null && this.checkInput(g.mouse, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkTouchOverlap: function () {
          var a = false;
          for (var b = 0, c = this.getCameras(); b < c.length;) {
            var d = c[b];
            ++b;
            for (var e = 0, f = g.touches.list; e < f.length;) {
              var k = f[e];
              ++e;
              if (this.checkInput(k, k, k.justPressedPosition, d)) {
                a = true;
              }
            }
          }
          return a;
        },
        checkInput: function (a, b, c, d) {
          if (this.maxInputMovement != Infinity) {
            var e = 0;
            var f = 0;
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            if (e == null) {
              e = 0;
            }
            f = da.pool.get().set(e, f);
            f._inPool = false;
            f._weak = true;
            c = Ak.distanceTo(c, a.getScreenPosition(null, f)) > this.maxInputMovement;
          } else {
            c = false;
          }
          if (c && b == this.currentInput) {
            this.currentInput = null;
          } else if (this.overlapsPoint(a.getWorldPosition(d, this._point), true, d)) {
            this.updateStatus(b);
            return true;
          }
          return false;
        },
        updateStatus: function (a) {
          if (a.get_justPressed()) {
            this.currentInput = a;
            this.onDownHandler();
          } else if (this.status == 0) {
            if (this.allowSwiping && a.get_pressed()) {
              this.onDownHandler();
            } else {
              this.onOverHandler();
            }
          }
        },
        updateLabelPosition: function () {
          if (this._spriteLabel != null) {
            this._spriteLabel.set_x((this.pixelPerfectPosition ? Math.floor(this.x) : this.x) + this.labelOffsets[this.status].x);
            this._spriteLabel.set_y((this.pixelPerfectPosition ? Math.floor(this.y) : this.y) + this.labelOffsets[this.status].y);
          }
        },
        updateLabelAlpha: function () {
          if (this._spriteLabel != null && this.labelAlphas.length > this.status) {
            this._spriteLabel.set_alpha(this.alpha * this.labelAlphas[this.status]);
          }
        },
        onUpEventListener: function (a) {
          if (this.visible && this.exists && this.active && this.status == 2) {
            this.onUpHandler();
          }
        },
        onUpHandler: function () {
          this.set_status(1);
          this.input.release();
          this.currentInput = null;
          var a = this.onUp;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onDownHandler: function () {
          this.set_status(2);
          this.input.press();
          var a = this.onDown;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        onOverHandler: function () {
          if (g.mouse.enabled) {
            this.set_status(1);
            var a = this.onOver;
            if (a.callback != null) {
              a.callback();
            }
            if (a.sound != null) {
              a.sound.play(true);
            }
          } else {
            this.set_status(0);
          }
        },
        onOutHandler: function () {
          this.set_status(0);
          this.input.release();
          var a = this.onOut;
          if (a.callback != null) {
            a.callback();
          }
          if (a.sound != null) {
            a.sound.play(true);
          }
        },
        set_label: function (a) {
          if (a != null) {
            a.scrollFactor.put();
            a.scrollFactor = this.scrollFactor;
          }
          this._spriteLabel = this.label = a;
          this.updateLabelPosition();
          return a;
        },
        set_status: function (a) {
          this.status = a;
          this.updateLabelAlpha();
          return this.status;
        },
        set_alpha: function (a) {
          G.prototype.set_alpha.call(this, a);
          this.updateLabelAlpha();
          return this.alpha;
        },
        set_x: function (a) {
          G.prototype.set_x.call(this, a);
          this.updateLabelPosition();
          return this.x;
        },
        set_y: function (a) {
          G.prototype.set_y.call(this, a);
          this.updateLabelPosition();
          return this.y;
        },
        get_justReleased: function () {
          return this.input.current == -1;
        },
        get_pressed: function () {
          var a = this.input;
          if (a.current != 1) {
            return a.current == 2;
          } else {
            return true;
          }
        },
        get_justPressed: function () {
          return this.input.current == 2;
        },
        __class__: Sg,
        __properties__: q(G.prototype.__properties__, {
          get_justPressed: "get_justPressed",
          get_pressed: "get_pressed",
          get_justReleased: "get_justReleased",
          set_status: "set_status",
          set_label: "set_label"
        })
      });
      function zb(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Sg.call(this, a, b, d);
        a = 0;
        for (b = this.labelOffsets; a < b.length;) {
          d = b[a];
          ++a;
          var e = d.x;
          var f = d.y + 3;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
        }
        if (c != null) {
          this.set_label(new R(this.x + this.labelOffsets[0].x, this.y + this.labelOffsets[0].y, 80, c));
          this.label.setFormat(null, 8, 3355443, "center");
          this.label.set_alpha(this.labelAlphas[this.status]);
          this.label.drawFrame(true);
        }
      }
      h["flixel.ui.FlxButton"] = zb;
      zb.__name__ = "flixel.ui.FlxButton";
      zb.__super__ = Sg;
      zb.prototype = q(Sg.prototype, {
        resetHelpers: function () {
          Sg.prototype.resetHelpers.call(this);
          if (this.label != null) {
            var a = this.label;
            var b = this.get_width() | 0;
            a.set_fieldWidth(this.label.frameWidth = b);
            this.label.set_size(this.label._defaultFormat.size | 0);
          }
        },
        __class__: zb
      });
      function zf(a, b) {
        this.callback = a;
        this.sound = b;
      }
      h["flixel.ui._FlxButton.FlxButtonEvent"] = zf;
      zf.__name__ = "flixel.ui._FlxButton.FlxButtonEvent";
      zf.__interfaces__ = [ub];
      zf.prototype = {
        destroy: function () {
          this.callback = null;
          this.sound = ca.destroy(this.sound);
        },
        __class__: zf
      };
      function ue() {}
      h["flixel.util.FlxArrayUtil"] = ue;
      ue.__name__ = "flixel.util.FlxArrayUtil";
      ue.clearArray = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          return a;
        }
        if (b) {
          while (a.length > 0) {
            if (a.pop() instanceof Array) {
              ue.clearArray(a, b);
            }
          }
        } else {
          while (a.length > 0) {
            a.pop();
          }
        }
        return a;
      };
      ue.equals = function (a, b) {
        if (a == null && b == null) {
          return true;
        }
        if (a == null && b != null || a != null && b == null || a.length != b.length) {
          return false;
        }
        for (var c = 0, d = a.length; c < d;) {
          var e = c++;
          if (a[e] != b[e]) {
            return false;
          }
        }
        return true;
      };
      var Gb = {
        fromString: function (a) {
          var b = null;
          a = v.trim(a);
          if (Gb.COLOR_REGEX.match(a)) {
            a = "0x" + Gb.COLOR_REGEX.matched(2);
            b = Gb._new(y.parseInt(a));
            if (a.length == 8) {
              b = b & 16777215 | -16777216;
            }
          } else {
            a = a.toUpperCase();
            var c = Object.keys(Gb.colorLookup.h);
            for (var d = c.length, e = 0; e < d;) {
              var f = c[e++];
              if (f.toUpperCase() == a) {
                b = Gb._new(Gb.colorLookup.h[f]);
                break;
              }
            }
          }
          return b;
        },
        _new: function (a) {
          if (a == null) {
            a = 0;
          }
          return a;
        }
      };
      function Ye() {}
      h["flixel.util.FlxColorTransformUtil"] = Ye;
      Ye.__name__ = "flixel.util.FlxColorTransformUtil";
      Ye.setMultipliers = function (a, b, c, d, e) {
        a.redMultiplier = b;
        a.greenMultiplier = c;
        a.blueMultiplier = d;
        a.alphaMultiplier = e;
        return a;
      };
      Ye.hasRGBMultipliers = function (a) {
        if (a.redMultiplier == 1 && a.greenMultiplier == 1) {
          return a.blueMultiplier != 1;
        } else {
          return true;
        }
      };
      Ye.hasRGBOffsets = function (a) {
        if (a.redOffset == 0 && a.greenOffset == 0) {
          return a.blueOffset != 0;
        } else {
          return true;
        }
      };
      Ye.hasRGBAOffsets = function (a) {
        if (Ye.hasRGBOffsets(a)) {
          return true;
        } else {
          return a.alphaOffset != 0;
        }
      };
      function ca() {}
      h["flixel.util.FlxDestroyUtil"] = ca;
      ca.__name__ = "flixel.util.FlxDestroyUtil";
      ca.destroy = function (a) {
        if (a != null) {
          a.destroy();
        }
        return null;
      };
      ca.destroyArray = function (a) {
        if (a != null) {
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            ca.destroy(c);
          }
          a.splice(0, a.length);
        }
        return null;
      };
      ca.put = function (a) {
        if (a != null) {
          a.put();
        }
        return null;
      };
      ca.putArray = function (a) {
        if (a != null) {
          for (var b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            ca.put(c);
          }
          a.splice(0, a.length);
        }
        return null;
      };
      ca.dispose = function (a) {
        if (a != null) {
          a.dispose();
        }
        return null;
      };
      ca.disposeIfNotEqual = function (a, b, c) {
        if (a != null && (a.width != b || a.height != c)) {
          a.dispose();
        } else if (a != null) {
          return a;
        }
        return null;
      };
      ca.removeChild = function (a, b) {
        if (a != null && b != null && a.contains(b)) {
          a.removeChild(b);
        }
        return null;
      };
      function pd() {}
      h["flixel.util.FlxGradient"] = pd;
      pd.__name__ = "flixel.util.FlxGradient";
      pd.createGradientMatrix = function (a, b, c, d, e) {
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        var f = new ya();
        e *= Math.PI / 180;
        f.createGradientBox(a, mc.toFloat(b) / mc.toFloat(d), e, 0, 0);
        a = [];
        b = 0;
        for (d = c.length; b < d;) {
          e = b++;
          a.push((c[e] >> 24 & 255) / 255);
        }
        e = [];
        if (c.length == 2) {
          e[0] = 0;
          e[1] = 255;
        } else {
          var k = 255 / (c.length - 1) | 0;
          e.push(0);
          b = 1;
          for (d = c.length - 1; b < d;) {
            c = b++;
            e.push(c * k);
          }
          e.push(255);
        }
        return {
          matrix: f,
          alpha: a,
          ratio: e
        };
      };
      pd.createGradientFlxSprite = function (a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        a = pd.createGradientBitmapData(a, b, c, d, e, f);
        b = new G();
        b.set_pixels(a);
        return b;
      };
      pd.createGradientBitmapData = function (a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 90;
        }
        if (d == null) {
          d = 1;
        }
        if (mc.gt(1, a)) {
          a = 1;
        }
        if (mc.gt(1, b)) {
          b = 1;
        }
        var k = pd.createGradientMatrix(a, b, c, d, e);
        e = new rg();
        f = f ? 1 : 0;
        e.get_graphics().beginGradientFill(0, c, k.alpha, k.ratio, k.matrix, 0, f, 0);
        e.get_graphics().drawRect(0, 0, mc.toFloat(a), mc.toFloat(b) / mc.toFloat(d));
        f = new N(a, b, true, 0);
        if (d == 1) {
          f.draw(e);
        } else {
          k = new Lc(new N(a, mc.toFloat(b) / mc.toFloat(d) | 0, true, 0));
          k.get_bitmapData().draw(e);
          k.set_scaleY(mc.toFloat(d));
          d = new ya();
          d.scale(k.get_scaleX(), k.get_scaleY());
          f.draw(k, d);
          d = k.get_height();
          a = mc.toFloat(a);
          e = k.get_height();
          b = new ba(0, d, a, mc.toFloat(b) - e);
          f.fillRect(b, c[c.length - 1]);
        }
        return f;
      };
      pd.overlayGradientOnBitmapData = function (a, b, c, d, e, f, k, g, l) {
        if (l == null) {
          l = true;
        }
        if (g == null) {
          g = 90;
        }
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (b > a.width) {
          b = a.width;
        }
        if (c > a.height) {
          c = a.height;
        }
        b = pd.createGradientBitmapData(b, c, d, k, g, l);
        a.copyPixels(b, new ba(0, 0, b.width, b.height), new ob(e, f), null, null, true);
        b.dispose();
        return a;
      };
      var vn = w["flixel.util.FlxHorizontalAlign"] = {
        __ename__: "flixel.util.FlxHorizontalAlign",
        __constructs__: null,
        LEFT: {
          _hx_name: "LEFT",
          _hx_index: 0,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        },
        RIGHT: {
          _hx_name: "RIGHT",
          _hx_index: 2,
          __enum__: "flixel.util.FlxHorizontalAlign",
          toString: p
        }
      };
      vn.__constructs__ = [vn.LEFT, vn.CENTER, vn.RIGHT];
      function Yf() {
        va.call(this);
        this.client = this;
        this.objectEncoding = Yf.defaultObjectEncoding;
      }
      h["openfl.net.SharedObject"] = Yf;
      Yf.__name__ = "openfl.net.SharedObject";
      Yf.__resolveClass = function (a) {
        if (a != null) {
          if (v.startsWith(a, "neash.")) {
            a = v.replace(a, "neash.", "openfl.");
          }
          if (v.startsWith(a, "native.")) {
            a = v.replace(a, "native.", "openfl.");
          }
          if (v.startsWith(a, "flash.")) {
            a = v.replace(a, "flash.", "openfl.");
          }
          if (v.startsWith(a, "openfl._v2.")) {
            a = v.replace(a, "openfl._v2.", "openfl.");
          }
          if (v.startsWith(a, "openfl._legacy.")) {
            a = v.replace(a, "openfl._legacy.", "openfl.");
          }
          return h[a];
        } else {
          return null;
        }
      };
      Yf.__super__ = va;
      Yf.prototype = q(va.prototype, {
        clear: function () {
          this.data = {};
          try {
            var a = tg.getLocalStorage();
            if (a != null) {
              a.removeItem(this.__localPath + ":" + this.__name);
            }
          } catch (b) {
            Oa.lastError = b;
          }
        },
        flush: function (a) {
          if (ha.fields(this.data).length == 0) {
            return 0;
          }
          a = le.run(this.data);
          try {
            var b = tg.getLocalStorage();
            if (b != null) {
              b.removeItem(this.__localPath + ":" + this.__name);
              b.setItem(this.__localPath + ":" + this.__name, a);
            }
          } catch (c) {
            Oa.lastError = c;
            return 1;
          }
          return 0;
        },
        __class__: Yf
      });
      function cd() {
        Yf.call(this);
      }
      h["flixel.util._FlxSave.FlxSharedObject"] = cd;
      cd.__name__ = "flixel.util._FlxSave.FlxSharedObject";
      cd.init = function () {
        if (cd.all == null) {
          cd.all = new xa();
          var a = ka.current;
          if (a != null) {
            a.onExit.add(cd.onExit);
          }
        }
      };
      cd.onExit = function (a) {
        a = cd.all.h;
        var b = Object.keys(a);
        for (var c = b.length, d = 0; d < c;) {
          a[b[d++]].flush();
        }
      };
      cd.getDefaultLocalPath = function () {
        var a = ia.get_current().stage.application.meta.h.company;
        return a = a == null || a == "" ? "HaxeFlixel" : Jd.validate(a);
      };
      cd.getLocal = function (a, b) {
        if (a == null || a == "") {
          throw new Sb("Error: Invalid name:\"" + a + "\".");
        }
        if (b == null) {
          b = "";
        }
        var c = b + "/" + a;
        cd.init();
        if (!Object.prototype.hasOwnProperty.call(cd.all.h, c)) {
          var d = null;
          try {
            if (new na("(?:^|/)\\.\\./", "").match(b)) {
              throw new Sb("../ not allowed in localPath");
            }
            d = cd.getData(a, b);
          } catch (k) {
            Oa.lastError = k;
          }
          if (b == "") {
            b = cd.getDefaultLocalPath();
          }
          var e = new cd();
          e.data = {};
          e.__localPath = b;
          e.__name = a;
          if (d != null && d != "") {
            try {
              var f = new Zd(d);
              f.setResolver({
                resolveEnum: yb.resolveEnum,
                resolveClass: Yf.__resolveClass
              });
              e.data = f.unserialize();
            } catch (k) {
              Oa.lastError = k;
            }
          }
          cd.all.h[c] = e;
        }
        return cd.all.h[c];
      };
      cd.getData = function (a, b) {
        var c = tg.getLocalStorage();
        if (c == null) {
          return null;
        }
        if (b != "") {
          return c.getItem(b + ":" + a);
        }
        b = c.getItem(cd.getDefaultLocalPath() + ":" + a);
        if (b != null) {
          return b;
        }
        b = c.getItem(window.location.pathname + ":" + a);
        return b ?? c.getItem(window.location.href + ":" + a);
      };
      cd.__super__ = Yf;
      cd.prototype = q(Yf.prototype, {
        __class__: cd
      });
      var rh = w["flixel.util.FlxSaveStatus"] = {
        __ename__: "flixel.util.FlxSaveStatus",
        __constructs__: null,
        EMPTY: {
          _hx_name: "EMPTY",
          _hx_index: 0,
          __enum__: "flixel.util.FlxSaveStatus",
          toString: p
        },
        BOUND: (r = function (a, b) {
          return {
            _hx_index: 1,
            name: a,
            path: b,
            __enum__: "flixel.util.FlxSaveStatus",
            toString: p
          };
        }, r._hx_name = "BOUND", r.__params__ = ["name", "path"], r),
        ERROR: (r = function (a) {
          return {
            _hx_index: 2,
            msg: a,
            __enum__: "flixel.util.FlxSaveStatus",
            toString: p
          };
        }, r._hx_name = "ERROR", r.__params__ = ["msg"], r)
      };
      rh.__constructs__ = [rh.EMPTY, rh.BOUND, rh.ERROR];
      function Jl(a, b) {
        this.dispatchOnce = false;
        this.listener = a;
        this.dispatchOnce = b;
      }
      h["flixel.util._FlxSignal.FlxSignalHandler"] = Jl;
      Jl.__name__ = "flixel.util._FlxSignal.FlxSignalHandler";
      Jl.__interfaces__ = [ub];
      Jl.prototype = {
        destroy: function () {
          this.listener = null;
        },
        __class__: Jl
      };
      function Aj() {}
      h["flixel.util.IFlxSignal"] = Aj;
      Aj.__name__ = "flixel.util.IFlxSignal";
      Aj.__isInterface__ = true;
      Aj.__interfaces__ = [ub];
      Aj.prototype = {
        __class__: Aj
      };
      function pf() {
        this.processingListeners = false;
        this.handlers = [];
        this.pendingRemove = [];
      }
      h["flixel.util._FlxSignal.FlxBaseSignal"] = pf;
      pf.__name__ = "flixel.util._FlxSignal.FlxBaseSignal";
      pf.__interfaces__ = [Aj];
      pf.prototype = {
        add: function (a) {
          if (a != null) {
            this.registerListener(a, false);
          }
        },
        remove: function (a) {
          if (a != null) {
            a = this.getHandler(a);
            if (a != null) {
              if (this.processingListeners) {
                this.pendingRemove.push(a);
              } else {
                L.remove(this.handlers, a);
                a.destroy();
              }
            }
          }
        },
        destroy: function () {
          ca.destroyArray(this.handlers);
          this.pendingRemove = this.handlers = null;
        },
        registerListener: function (a, b) {
          var c = this.getHandler(a);
          if (c == null) {
            c = new Jl(a, b);
            this.handlers.push(c);
            return c;
          }
          if (c.dispatchOnce != b) {
            throw I.thrown("You cannot addOnce() then add() the same listener without removing the relationship first.");
          }
          return c;
        },
        getHandler: function (a) {
          for (var b = 0, c = this.handlers; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.listener == a) {
              return d;
            }
          }
          return null;
        },
        __class__: pf
      };
      function Ud() {
        pf.call(this);
        this.dispatch = n(this, this.dispatch0);
      }
      h["flixel.util._FlxSignal.FlxSignal0"] = Ud;
      Ud.__name__ = "flixel.util._FlxSignal.FlxSignal0";
      Ud.__super__ = pf;
      Ud.prototype = q(pf.prototype, {
        dispatch0: function () {
          this.processingListeners = true;
          for (var a = 0, b = this.handlers; a < b.length;) {
            var c = b[a];
            ++a;
            c.listener();
            if (c.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(c);
              } else {
                L.remove(this.handlers, c);
                c.destroy();
              }
            }
          }
          this.processingListeners = false;
          a = 0;
          for (b = this.pendingRemove; a < b.length;) {
            c = b[a];
            ++a;
            if (this.processingListeners) {
              this.pendingRemove.push(c);
            } else {
              L.remove(this.handlers, c);
              c.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: Ud
      });
      function vf() {
        pf.call(this);
        this.dispatch = n(this, this.dispatch1);
      }
      h["flixel.util._FlxSignal.FlxSignal1"] = vf;
      vf.__name__ = "flixel.util._FlxSignal.FlxSignal1";
      vf.__super__ = pf;
      vf.prototype = q(pf.prototype, {
        dispatch1: function (a) {
          this.processingListeners = true;
          for (var b = 0, c = this.handlers; b < c.length;) {
            var d = c[b];
            ++b;
            d.listener(a);
            if (d.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(d);
              } else {
                L.remove(this.handlers, d);
                d.destroy();
              }
            }
          }
          this.processingListeners = false;
          b = 0;
          for (c = this.pendingRemove; b < c.length;) {
            d = c[b];
            ++b;
            if (this.processingListeners) {
              this.pendingRemove.push(d);
            } else {
              L.remove(this.handlers, d);
              d.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: vf
      });
      function Fk() {
        pf.call(this);
        this.dispatch = n(this, this.dispatch2);
      }
      h["flixel.util._FlxSignal.FlxSignal2"] = Fk;
      Fk.__name__ = "flixel.util._FlxSignal.FlxSignal2";
      Fk.__super__ = pf;
      Fk.prototype = q(pf.prototype, {
        dispatch2: function (a, b) {
          this.processingListeners = true;
          for (var c = 0, d = this.handlers; c < d.length;) {
            var e = d[c];
            ++c;
            e.listener(a, b);
            if (e.dispatchOnce) {
              if (this.processingListeners) {
                this.pendingRemove.push(e);
              } else {
                L.remove(this.handlers, e);
                e.destroy();
              }
            }
          }
          this.processingListeners = false;
          c = 0;
          for (d = this.pendingRemove; c < d.length;) {
            e = d[c];
            ++c;
            if (this.processingListeners) {
              this.pendingRemove.push(e);
            } else {
              L.remove(this.handlers, e);
              e.destroy();
            }
          }
          if (this.pendingRemove.length > 0) {
            this.pendingRemove = [];
          }
        },
        __class__: Fk
      });
      function eo() {}
      h["flixel.util.FlxSort"] = eo;
      eo.__name__ = "flixel.util.FlxSort";
      eo.byY = function (a, b, c) {
        b = b.y;
        c = c.y;
        var d = 0;
        if (b < c) {
          d = a;
        } else if (b > c) {
          d = -a;
        }
        return d;
      };
      function Fc() {}
      h["flixel.util.FlxSpriteUtil"] = Fc;
      Fc.__name__ = "flixel.util.FlxSpriteUtil";
      Fc.drawLine = function (a, b, c, d, e, f, k) {
        if (f == null) {
          f = {
            thickness: 1,
            color: -1
          };
        }
        if (f.thickness == null) {
          f.thickness = 1;
        }
        if (f.color == null) {
          f.color = -1;
        }
        Fc.flashGfx.clear();
        if (f != null) {
          var g = f.color == null ? -16777216 : f.color;
          if (f.thickness == null) {
            f.thickness = 1;
          }
          if (f.pixelHinting == null) {
            f.pixelHinting = false;
          }
          if (f.miterLimit == null) {
            f.miterLimit = 3;
          }
          Fc.flashGfx.lineStyle(f.thickness, g & 16777215, (g >> 24 & 255) / 255, f.pixelHinting, f.scaleMode, f.capsStyle, f.jointStyle, f.miterLimit);
        }
        Fc.flashGfx.moveTo(b, c);
        Fc.flashGfx.lineTo(d, e);
        Fc.flashGfx.endFill();
        Fc.updateSpriteGraphic(a, k);
        return a;
      };
      Fc.drawCircle = function (a, b, c, d, e, f, k) {
        if (e == null) {
          e = -1;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = -1;
        }
        if (b == null) {
          b = -1;
        }
        if (b == -1 || c == -1) {
          var g = a.getGraphicMidpoint();
          if (b == -1) {
            b = g.x - a.x;
          }
          if (c == -1) {
            c = g.y - a.y;
          }
          g.put();
        }
        if (d < 1) {
          d = Math.min(a.frameWidth, a.frameHeight) / 2;
        }
        Fc.flashGfx.clear();
        if (f != null) {
          g = f.color == null ? -16777216 : f.color;
          if (f.thickness == null) {
            f.thickness = 1;
          }
          if (f.pixelHinting == null) {
            f.pixelHinting = false;
          }
          if (f.miterLimit == null) {
            f.miterLimit = 3;
          }
          Fc.flashGfx.lineStyle(f.thickness, g & 16777215, (g >> 24 & 255) / 255, f.pixelHinting, f.scaleMode, f.capsStyle, f.jointStyle, f.miterLimit);
        }
        if (e != 0) {
          Fc.flashGfx.beginFill(e & 16777215, (e >> 24 & 255) / 255);
        }
        Fc.flashGfx.drawCircle(b, c, d);
        Fc.flashGfx.endFill();
        Fc.updateSpriteGraphic(a, k);
        return a;
      };
      Fc.updateSpriteGraphic = function (a, b) {
        if (b == null) {
          b = {
            smoothing: false
          };
        } else if (b.smoothing == null) {
          b.smoothing = false;
        }
        a.get_pixels().draw(Fc.flashGfxSprite, b.matrix, b.colorTransform, b.blendMode, b.clipRect, b.smoothing);
        a.dirty = true;
        return a;
      };
      function Xb() {}
      h["flixel.util.FlxStringUtil"] = Xb;
      Xb.__name__ = "flixel.util.FlxStringUtil";
      Xb.formatTime = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = (a / 60 | 0) + ":";
        var d = (a | 0) % 60;
        if (d < 10) {
          c += "0";
        }
        c += d;
        if (b) {
          c += ".";
          d = (a - (a | 0)) * 100 | 0;
          if (d < 10) {
            c += "0";
          }
          c += d;
        }
        return c;
      };
      Xb.formatBytes = function (a, b) {
        if (b == null) {
          b = 2;
        }
        for (var c = "Bytes kB MB GB TB PB".split(" "), d = 0; a >= 1024 && d < c.length - 1;) {
          a /= 1024;
          ++d;
        }
        return jc.roundDecimal(a, b) + c[d];
      };
      Xb.getClassName = function (a, b) {
        if (b == null) {
          b = false;
        }
        a = wa.__instanceof(a, aj) ? a : wa.getClass(a);
        return Xb.formatPackage(a.__name__, b);
      };
      Xb.formatPackage = function (a, b) {
        if (a == null) {
          return null;
        }
        a = v.replace(a, "::", ".");
        if (b) {
          a = L.substr(a, a.lastIndexOf(".") + 1, null);
        }
        return a;
      };
      Xb.getHost = function (a) {
        var b = new na("^(?:[a-z][a-z0-9+\\-.]*://)?(?:[a-z0-9\\-._~%!$&'()*+,;=]+@)?([a-z0-9\\-._~%]{3,}|\\[[a-f0-9:.]+\\])?(?::[0-9]+)?", "i");
        if (b.match(a) && (a = b.matched(1), a != null)) {
          return decodeURIComponent(a.split("+").join(" ")).toLowerCase();
        } else {
          return "";
        }
      };
      Xb.getDomain = function (a) {
        a = Xb.getHost(a);
        var b = new na("^(localhost|[0-9.]+|\\[[a-f0-9:.]+\\])$", "i");
        var c = new na("^(?:[a-z0-9\\-]+\\.)*([a-z0-9\\-]+\\.[a-z0-9\\-]+)$", "i");
        if (!b.match(a) && c.match(a) && (a = c.matched(1), a != null)) {
          return a.toLowerCase();
        } else {
          return "";
        }
      };
      Xb.toIntArray = function (a) {
        if (a != null && a != "") {
          a = a.split(",");
          var b = [];
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            b.push(y.parseInt(d));
          }
          return b;
        }
        return null;
      };
      Xb.getDebugString = function (a) {
        var b = "(";
        for (var c = 0; c < a.length;) {
          var d = a[c];
          ++c;
          b += d.label + ": ";
          var e = d.value;
          if (typeof e == "number") {
            e = jc.roundDecimal(e, g.debugger.precision);
          }
          b += y.string(e) + " | ";
          Xc._pool.put(d);
        }
        b = v.trim(L.substr(b, 0, b.length - 2));
        return b + ")";
      };
      function Xc() {}
      h["flixel.util.LabelValuePair"] = Xc;
      Xc.__name__ = "flixel.util.LabelValuePair";
      Xc.__interfaces__ = [ub];
      Xc.prototype = {
        destroy: function () {
          this.value = this.label = null;
        },
        __class__: Xc
      };
      function Gc(a) {
        this._inManager = false;
        this._timeCounter = this._loopsCounter = 0;
        this.active = this.finished = false;
        this.time = this.loops = 0;
        this.manager = a ?? Gc.globalManager;
      }
      h["flixel.util.FlxTimer"] = Gc;
      Gc.__name__ = "flixel.util.FlxTimer";
      Gc.__interfaces__ = [ub];
      Gc.prototype = {
        destroy: function () {
          this.onComplete = null;
        },
        start: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          if (a == null) {
            a = 1;
          }
          if (this.manager != null && !this._inManager) {
            this.manager.add(this);
            this._inManager = true;
          }
          this.active = true;
          this.finished = false;
          this.time = Math.abs(a);
          if (c < 0) {
            c *= -1;
          }
          this.loops = c;
          this.onComplete = b;
          this._loopsCounter = this._timeCounter = 0;
          return this;
        },
        cancel: function () {
          this.finished = true;
          this.active = false;
          if (this.manager != null && this._inManager) {
            this.manager.remove(this);
            this._inManager = false;
          }
        },
        update: function (a) {
          for (this._timeCounter += a; this._timeCounter >= this.time && this.active && !this.finished;) {
            this._timeCounter -= this.time;
            this._loopsCounter++;
            if (this.loops > 0 && this._loopsCounter >= this.loops) {
              this.finished = true;
            }
          }
        },
        onLoopFinished: function () {
          if (this.finished) {
            this.cancel();
          }
          if (this.onComplete != null) {
            this.onComplete(this);
          }
        },
        __class__: Gc
      };
      function El() {
        this._timers = [];
        Ca.call(this);
        this.set_visible(false);
        g.signals.preStateSwitch.add(n(this, this.clear));
      }
      h["flixel.util.FlxTimerManager"] = El;
      El.__name__ = "flixel.util.FlxTimerManager";
      El.__super__ = Ca;
      El.prototype = q(Ca.prototype, {
        destroy: function () {
          ue.clearArray(this._timers);
          this._timers = null;
          g.signals.preStateSwitch.remove(n(this, this.clear));
          Ca.prototype.destroy.call(this);
        },
        update: function (a) {
          var b = null;
          for (var c = 0, d = this._timers; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.active && !e.finished && e.time >= 0) {
              var f = e._loopsCounter;
              e.update(a);
              if (f != e._loopsCounter) {
                if (b == null) {
                  b = [];
                }
                b.push(e);
              }
            }
          }
          if (b != null) {
            while (b.length > 0) {
              b.shift().onLoopFinished();
            }
          }
        },
        add: function (a) {
          this._timers.push(a);
        },
        remove: function (a) {
          var b = this._timers;
          a = b.indexOf(a);
          if (a != -1) {
            b[a] = b[b.length - 1];
            b.pop();
          }
        },
        clear: function () {
          ue.clearArray(this._timers);
        },
        forEach: function (a) {
          for (var b = 0, c = this._timers; b < c.length;) {
            var d = c[b];
            ++b;
            a(d);
          }
        },
        __class__: El
      });
      var un = w["flixel.util.FlxVerticalAlign"] = {
        __ename__: "flixel.util.FlxVerticalAlign",
        __constructs__: null,
        TOP: {
          _hx_name: "TOP",
          _hx_index: 0,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        },
        CENTER: {
          _hx_name: "CENTER",
          _hx_index: 1,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        },
        BOTTOM: {
          _hx_name: "BOTTOM",
          _hx_index: 2,
          __enum__: "flixel.util.FlxVerticalAlign",
          toString: p
        }
      };
      un.__constructs__ = [un.TOP, un.CENTER, un.BOTTOM];
      function ao(a, b) {
        this.start = a;
        this.end = b == null ? a : b;
      }
      h["flixel.util.helpers.FlxRange"] = ao;
      ao.__name__ = "flixel.util.helpers.FlxRange";
      ao.prototype = {
        __class__: ao
      };
      var fg = {
        fromState: function (a) {
          return a;
        },
        fromMaker: function (a) {
          return a;
        },
        createInstance: function (a) {
          if (a instanceof nc) {
            return a;
          } else if (wa.__instanceof(a, aj)) {
            return yb.createInstance(a, []);
          } else {
            return a();
          }
        }
      };
      var xp = {
        fromType: function (a) {
          return a;
        },
        toNextState: function (a) {
          if (wa.__instanceof(a, aj)) {
            return fg.fromMaker(function () {
              return yb.createInstance(a, []);
            });
          } else {
            return a;
          }
        }
      };
      function mi(a, b, c, d) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this._mat = new Rc();
        this.pressed = false;
        this.renderer = new fo();
        this.showPivot = false;
        G.call(this, a, b);
        this._sprite = new Ra();
        this.anim = new Kl(this);
        if (c != null) {
          this.loadAtlas(c);
        }
        if (d != null) {
          this.setTheSettings(d);
        }
        this._pivot = cc.fromBitmapData(U.getBitmapData("flxanimate/images/pivot.png"), null, "__pivot").get_imageFrame().get_frame();
        this._indicator = cc.fromBitmapData(U.getBitmapData("flxanimate/images/indicator.png"), null, "__indicator").get_imageFrame().get_frame();
        this.get_camera().canvas.addChild(this._sprite);
        this.rect = ba.__pool.get();
      }
      h["flxanimate.FlxAnimate"] = mi;
      mi.__name__ = "flxanimate.FlxAnimate";
      mi.__super__ = G;
      mi.prototype = q(G.prototype, {
        loadAtlas: function (a) {
          if (Ic.extension(a) == "zip" || U.exists("" + a + "/Animation.json")) {
            this.anim._loadAtlas(this.atlasSetting(a));
            this.set_frames(td.fromTextureAtlas(a));
            this.origin = this.anim.curInstance.symbol.transformationPoint;
          } else {
            g.log.advanced("Animation file not found in specified path: \"" + y.string(this.path) + "\", have you written the correct path?", Aa.ERROR, true);
          }
        },
        draw: function () {
          this._matrix.identity();
          if (this.flipX) {
            this._matrix.a *= -1;
            this._matrix.tx += this.get_width();
          }
          if (this.flipY) {
            this._matrix.d *= -1;
            this._matrix.ty += this.get_height();
          }
          this.frameHeight = this.frameWidth = 0;
          this.set_width(0);
          this.set_height(0);
          this._flashRect.setEmpty();
          this.parseElement(this.anim.curInstance, this.anim.get_curFrame(), this._matrix, this.colorTransform, true, null, this.get_cameras());
          this.set_width(this._flashRect.width);
          this.set_height(this._flashRect.height);
          this.frameWidth = this.get_width() | 0;
          this.frameHeight = this.get_height() | 0;
          if (this.showPivot) {
            this.drawLimb(this._pivot, new Rc(1, 0, 0, 1, this.origin.x - this._pivot.frame.width * 0.5, this.origin.y - this._pivot.frame.height * 0.5), null, null, this.get_cameras());
            this.drawLimb(this._indicator, new Rc(1, 0, 0, 1, -this._indicator.frame.width * 0.5, -this._indicator.frame.height * 0.5), null, null, this.get_cameras());
          }
        },
        parseElement: function (a, b, c, d, e, f, k) {
          if (e == null) {
            e = false;
          }
          var g = f != null;
          if (k == null) {
            k = this.get_cameras();
          }
          var l = new Rc();
          l.concat(a.matrix);
          l.concat(c);
          var h = new Ob();
          h.__copyFrom(d);
          d = a.symbol != null ? this.anim.symbolDictionary.h[a.symbol.name] : null;
          if (a.symbol != null && (a.symbol.colorEffect != null && h.concat(a.symbol.colorEffect.__create()), a.symbol.get_cacheAsBitmap() && (a.symbol._renderDirty && (a.symbol._renderDirty = false, this.filterCamera == null && (this.filterCamera = new Pb(0, 0, 0, 0, 1)), a.symbol._cacheBitmapMatrix.copyFrom(a.symbol.cacheAsBitmapMatrix), this.parseElement(a, b, a.symbol._cacheBitmapMatrix, new Ob(), e, {
            instance: a
          }, [this.filterCamera]), a.symbol._filterBitmap == null && (a.symbol._filterBitmap = cc.fromRectangle(1, 1, 0, true).get_imageFrame().get_frame()), this.renderFilter(this.filterCamera, a.symbol.filters, a.symbol._filterBitmap, a.symbol._cacheBitmapMatrix, this.renderer), a.symbol._renderDirty = false), (!g || g && f.instance != a) && a.symbol._filterBitmap != null))) {
            l.identity();
            l.concat(a.symbol._cacheBitmapMatrix);
            l.concat(c);
            this.drawLimb(a.symbol._filterBitmap, l, h, g, k);
            return;
          }
          if (a.bitmap != null) {
            this.drawLimb(this.frames.framesByName.h[a.bitmap], l, h, g, k);
          } else {
            b = a.symbol.firstFrame + b;
            if (a.symbol.type._hx_index == 2) {
              b = this.setButtonFrames(b);
            }
            switch (a.symbol.loop._hx_index) {
              case 0:
                b %= d.get_length();
                break;
              case 1:
                var p = d.get_length() - 1;
                b = b < 0 ? 0 : b;
                b = p != null && b > p ? p : b;
            }
            d = d.timeline.getList();
            p = 0;
            for (var m = d.length; p < m;) {
              var n = p++;
              var q = d[d.length - 1 - n];
              if (q.visible || g || !e) {
                q._setCurFrame(b);
                n = q._currFrame;
                if (n != null) {
                  n.update(b);
                  var r = n.filters != null;
                  if (r) {
                    if (n._renderDirty || n._filterFrame == null) {
                      n._filterFrame = cc.fromRectangle(1, 1, 0, true).get_imageFrame().get_frame();
                      if (q._filterCamera == null) {
                        q._filterCamera = new Pb();
                      }
                    } else {
                      q = new Rc();
                      q.concat(n._bitmapMatrix);
                      q.concat(a.matrix);
                      q.concat(c);
                      this.drawLimb(n._filterFrame, q, null, g, k);
                      continue;
                    }
                  }
                  for (var w = 0, u = n.getList(); w < u.length;) {
                    var v = u[w];
                    ++w;
                    var A = 0;
                    if (v.symbol != null && v.symbol.type == $d.Graphic && v.symbol.loop != Od.SingleFrame) {
                      A = b - n.index;
                    }
                    var Y = new Ob();
                    Y.__copyFrom(h);
                    if (n.colorEffect != null) {
                      Y.concat(n.colorEffect.__create());
                    }
                    this.parseElement(v, A, r ? new Rc() : l, Y, false, r ? {
                      instance: null
                    } : f, r ? [q._filterCamera] : k);
                    if (r && v.symbol != null && v.symbol._layerDirty) {
                      v.symbol._layerDirty = false;
                    }
                  }
                  if (r) {
                    n._bitmapMatrix.identity();
                    this.renderFilter(q._filterCamera, n.filters, n._filterFrame, n._bitmapMatrix, this.renderer);
                    n._renderDirty = false;
                    q = new Rc();
                    q.concat(n._bitmapMatrix);
                    q.concat(a.matrix);
                    q.concat(c);
                    this.drawLimb(n._filterFrame, q, null, g, k);
                  }
                }
              }
            }
          }
        },
        renderFilter: function (a, b, c, d, e) {
          a.render();
          var f = e.graphicstoBitmapData(a.canvas.get_graphics());
          if (f != null) {
            var k = f.rect.clone();
            if (k != null) {
              var g = new ba();
              a.canvas.__getBounds(g, d);
              if (b != null && b.length > 0) {
                f = this.applyFilter(e, f, b, k);
              }
              d.translate(g.x + k.x - (f.width - k.width) * 0.5, g.y + k.y - (f.height - k.height) * 0.5);
              a.clearDrawStack();
              a.canvas.get_graphics().clear();
              c.parent.bitmap.dispose();
              c.parent.set_bitmap(f);
              a = c.frame;
              a.width = f.width;
              a.height = f.height;
            }
          }
        },
        applyFilter: function (a, b, c, d) {
          var e = ba.__pool.get();
          for (var f = 0; f < c.length;) {
            var k = c[f];
            ++f;
            e.__expand(-k.__leftExtension, -k.__topExtension, k.__leftExtension + k.__rightExtension, k.__topExtension + k.__bottomExtension);
          }
          d.width += e.width;
          d.height += e.height;
          d.x += e.x;
          d.y += e.y;
          ba.__pool.release(e);
          return a.applyFilter(b, c, d);
        },
        setButtonFrames: function (a) {
          var b = a = false;
          var c = g.mouse._leftButton;
          if ((c.current == 1 || c.current == 2) && !!g.mouse.overlaps(this)) {
            b = true;
          }
          c = g.mouse._leftButton;
          if ((c.current == 1 || c.current == 2) && !g.mouse.overlaps(this) && !b) {
            a = true;
          }
          c = g.mouse._leftButton;
          if (c.current != 1 && c.current != 2) {
            a = false;
          }
          if (g.mouse.overlaps(this) && !a) {
            c = this.anim.buttonMap;
            a = this.anim.get_curSymbol().name;
            b = c.h[a];
            if (g.mouse._leftButton.current == 2 && !this.pressed) {
              if (b != null) {
                c = new Ll(b.Callbacks != null ? b.Callbacks.OnClick : null);
                if (c.callback != null) {
                  c.callback();
                }
                if (c.sound != null) {
                  c.sound.play(true);
                }
              }
              this.pressed = true;
            }
            c = g.mouse._leftButton;
            a = c.current == 1 || c.current == 2 ? 2 : 1;
            if (g.mouse._leftButton.current == -1 && this.pressed) {
              if (b != null) {
                c = new Ll(b.Callbacks != null ? b.Callbacks.OnRelease : null);
                if (c.callback != null) {
                  c.callback();
                }
                if (c.sound != null) {
                  c.sound.play(true);
                }
              }
              this.pressed = false;
            }
          } else {
            a = 0;
          }
          return a;
        },
        drawLimb: function (a, b, c, d, e) {
          if (d == null) {
            d = false;
          }
          if (e != null && this.alpha != 0 && (c == null || c.alphaMultiplier != 0 && c.alphaOffset != -255) && a != null && a.type != 2) {
            for (var f = 0; f < e.length;) {
              var k = e[f];
              ++f;
              a.prepareMatrix(this._mat);
              var g = this._mat;
              g.concat(b);
              if (!k.visible || !k.exists) {
                break;
              }
              if (!d) {
                var l = this.getScreenPosition(this._point, k);
                var h = this.offset;
                var p = h.x;
                var m = h.y;
                if (m == null) {
                  m = 0;
                }
                if (p == null) {
                  p = 0;
                }
                l.set_x(l.x - p);
                l.set_y(l.y - m);
                l = h;
                if (l._weak) {
                  l.put();
                }
                if ([this._pivot, this._indicator].indexOf(a) == -1) {
                  g.translate(-this.origin.x, -this.origin.y);
                  g.scale(this.scale.x, this.scale.y);
                  if (this.bakedRotationAngle <= 0) {
                    if (this._angleChanged) {
                      l = Math.PI / 180 * this.angle;
                      this._sinAngle = Math.sin(l);
                      this._cosAngle = Math.cos(l);
                      this._angleChanged = false;
                    }
                    if (this.angle != 0) {
                      l = this._cosAngle;
                      h = this._sinAngle;
                      p = g.a * l - g.b * h;
                      g.b = g.a * h + g.b * l;
                      g.a = p;
                      p = g.c * l - g.d * h;
                      g.d = g.c * h + g.d * l;
                      g.c = p;
                      p = g.tx * l - g.ty * h;
                      g.ty = g.tx * h + g.ty * l;
                      g.tx = p;
                    }
                  }
                  l = this._point;
                  h = this.origin;
                  p = h.x;
                  m = h.y;
                  if (m == null) {
                    m = 0;
                  }
                  if (p == null) {
                    p = 0;
                  }
                  l.set_x(l.x + p);
                  l.set_y(l.y + m);
                  l = h;
                  if (l._weak) {
                    l.put();
                  }
                } else {
                  g.scale(0.7, 0.7);
                  g.a /= k.zoom;
                  g.d /= k.zoom;
                  g.tx /= k.zoom;
                  g.ty /= k.zoom;
                }
                if (this.isPixelPerfectRender(k)) {
                  l = this._point;
                  l.set_x(Math.floor(l.x));
                  l.set_y(Math.floor(l.y));
                }
                g.translate(this._point.x, this._point.y);
                if (!this.limbOnScreen(a, g, k)) {
                  break;
                }
              }
              k.drawPixels(a, null, g, c, this.blend, this.antialiasing);
            }
          }
        },
        limbOnScreen: function (a, b, c) {
          if (c == null) {
            c = g.camera;
          }
          var d = a.frame;
          var e = this.rect;
          if (e == null) {
            e = new ba();
          }
          e.x = d.x;
          e.y = d.y;
          e.width = d.width;
          e.height = d.height;
          this.rect.x = 0;
          this.rect.y = 0;
          this.rect.__transform(this.rect, b);
          d = this._point;
          b = this.rect.get_topLeft();
          d.set(b.x, b.y);
          if (a != this._pivot) {
            this._flashRect = this._flashRect.union(this.rect);
          }
          a = this._point;
          d = this.rect.width;
          b = this.rect.height;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c = a.x + d > c.viewMarginX && a.x < c.width - c.viewMarginX && a.y + b > c.viewMarginY && a.y < c.height - c.viewMarginY;
          d = a;
          if (d._weak) {
            d.put();
          }
          return c;
        },
        destroy: function () {
          if (this.anim != null) {
            this.anim.destroy();
          }
          this.anim = null;
          G.prototype.destroy.call(this);
        },
        updateAnimation: function (a) {
          this.anim.update(a);
        },
        setTheSettings: function (a) {
          this.set_antialiasing(a.Antialiasing);
          if (a.ButtonSettings != null) {
            this.anim.buttonMap = a.ButtonSettings;
            if (this.anim.get_symbolType() != $d.Button) {
              this.anim.set_symbolType($d.Button);
            }
          }
          if (a.Reversed != null) {
            this.anim.set_reversed(a.Reversed);
          }
          if (a.FrameRate != null) {
            this.anim.set_framerate(a.FrameRate > 0 ? this.anim.metadata.frameRate : a.FrameRate);
          }
          if (a.OnComplete != null) {
            this.anim.onComplete = a.OnComplete;
          }
          if (a.ShowPivot != null) {
            this.showPivot = a.ShowPivot;
          }
          if (a.Antialiasing != null) {
            this.set_antialiasing(a.Antialiasing);
          }
          if (a.ScrollFactor != null) {
            this.scrollFactor = a.ScrollFactor;
          }
          if (a.Offset != null) {
            this.offset = a.Offset;
          }
        },
        atlasSetting: function (a) {
          var b = null;
          if (Ic.extension(a) == "zip") {
            a = Ml.readZip(Oe.toBytes(U.getBytes(a)));
            for (var c = Ml.unzip(a).h; c != null;) {
              var d = c.item;
              c = c.next;
              if (d.fileName.indexOf("Animation.json") != -1) {
                b = JSON.parse(d.data.toString());
                a.remove(d);
              }
            }
            td.zip = a;
          } else {
            b = JSON.parse(U.getText("" + a + "/Animation.json"));
          }
          return b;
        },
        loadAtlasEx: function (a, b, c) {
          if (typeof c == "string") {
            var d = v.trim(b);
            d = L.substr(d, d.length - 5, null).toLowerCase();
            if (d == ".json") {
              c = U.getText(c);
            }
            c = JSON.parse(this._removeBOM(c));
          }
          var e = null;
          var f = b;
          d = v.trim(b);
          d = L.substr(d, d.length - 5, null).toLowerCase();
          if (d == ".json") {
            f = U.getText(b);
            e = false;
          } else if (L.substr(d, 1, null) == ".xml") {
            f = U.getText(b);
            e = true;
          }
          f = this._removeBOM(f);
          if (e == null) {
            try {
              f = JSON.parse(f);
              e = false;
            } catch (k) {
              f = T.parse(f);
              e = true;
            }
          } else {
            f = e ? T.parse(f) : JSON.parse(f);
          }
          this.anim._loadAtlas(c);
          if (e) {
            this.set_frames(td.fromSparrow(f, a));
          } else {
            this.set_frames(td.fromAnimateAtlas(f, a));
          }
          this.origin = this.anim.curInstance.symbol.transformationPoint;
        },
        _removeBOM: function (a) {
          if (L.cca(a, 0) == 65279) {
            a = L.substr(a, 1, null);
          }
          return a;
        },
        __class__: mi
      });
      function Ll(a, b) {
        this.callback = a;
        this.sound = b;
      }
      h["flxanimate.animate.ButtonEvent"] = Ll;
      Ll.__name__ = "flxanimate.animate.ButtonEvent";
      Ll.prototype = {
        __class__: Ll
      };
      function Kl(a, b) {
        this.lastPlayedAnim = null;
        this.animsMap = new xa();
        this.buttonMap = new xa();
        this.swfRender = false;
        this._tick = 0;
        this._parent = a;
        this.isPlaying = false;
        if (b != null) {
          this._loadAtlas(b);
        }
      }
      h["flxanimate.animate.FlxAnim"] = Kl;
      Kl.__name__ = "flxanimate.animate.FlxAnim";
      Kl.__interfaces__ = [ub];
      Kl.prototype = {
        _loadAtlas: function (a) {
          this.symbolDictionary = new xa();
          this.stageInstance = null;
          this.setSymbols(a);
          this.curInstance = this.stageInstance = up.get_STI(Tg.get_AN(a)) != null ? Ef.fromJSON(up.get_STI(Tg.get_AN(a))) : new Ef(null, new yh(Bj.get_SN(Tg.get_AN(a))));
          this.set_curFrame(this.stageInstance.symbol.firstFrame);
          var b = this._parent.origin;
          var c = this.stageInstance.symbol.transformationPoint;
          var d = c.x;
          var e = c.y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          b.set_x(d);
          b.set_y(e);
          if (c._weak) {
            c.put();
          }
          this.metadata = new go(up.get_N(Tg.get_AN(a)), Mp.get_FRT(Tg.get_MD(a)));
          this.set_framerate(this.metadata.frameRate);
        },
        play: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          if (a == null) {
            a = "";
          }
          this.pause();
          b = b || this.get_finished();
          if (a != "") {
            if (Object.prototype.hasOwnProperty.call(this.animsMap.h, a)) {
              var e = this.animsMap.h[a];
              this.set_framerate(e.frameRate == 0 ? this.metadata.frameRate : e.frameRate);
              b = b || this.curInstance != e.instance;
              this.curInstance = e.instance;
            } else if (a == this.metadata.name) {
              this.curInstance = this.stageInstance;
            } else if (Object.prototype.hasOwnProperty.call(this.symbolDictionary.h, a)) {
              this.curInstance.symbol.reset();
              this.curInstance.symbol.name = a;
            } else {
              g.log.advanced("There's no animation called " + a + "!", Aa.ERROR, true);
            }
            this.lastPlayedAnim = a;
          }
          if (b) {
            this.set_curFrame(c ? d - this.get_length() : d);
          }
          this.set_reversed(c);
          this.resume();
        },
        pause: function () {
          this.isPlaying = false;
        },
        resume: function () {
          this.isPlaying = true;
        },
        setSymbols: function (a) {
          var b = this.symbolDictionary;
          var c = Bj.get_SN(Tg.get_AN(a));
          var d = new Cj(Ic.withoutDirectory(Bj.get_SN(Tg.get_AN(a))), zh.fromJSON(Bj.get_TL(Tg.get_AN(a))));
          b.h[c] = d;
          if (Tg.get_SD(a) != null) {
            var e = 0;
            for (a = Np.get_S(Tg.get_SD(a)); e < a.length;) {
              d = a[e];
              ++e;
              b = this.symbolDictionary;
              c = Bj.get_SN(d);
              d = new Cj(Ic.withoutDirectory(Bj.get_SN(d)), zh.fromJSON(Bj.get_TL(d)));
              b.h[c] = d;
            }
          }
        },
        update: function (a) {
          if (this.frameDelay != 0 && this.isPlaying && !this.get_finished()) {
            for (this._tick += a; this._tick > this.frameDelay;) {
              if (this.get_reversed()) {
                this.set_curFrame(this.get_curFrame() - 1);
              } else {
                this.set_curFrame(this.get_curFrame() + 1);
              }
              this.get_curSymbol().fireCallbacks(this.get_curFrame());
              this._tick -= this.frameDelay;
            }
            if (this.get_finished() || this.get_curFrame() == (this.get_reversed() ? 0 : this.get_curSymbol().get_length() - 1)) {
              if (this.get_loopType() == Od.PlayOnce) {
                this.pause();
              }
              if (this.onComplete != null) {
                this.onComplete();
              }
            }
          }
        },
        get_finished: function () {
          if (this.get_loopType() == Od.PlayOnce) {
            if (this.get_reversed() && this.get_curFrame() == 0) {
              return true;
            } else if (this.get_reversed()) {
              return false;
            } else {
              return this.get_curFrame() >= this.get_length() - 1;
            }
          } else {
            return false;
          }
        },
        get_curFrame: function () {
          return this.get_curSymbol().get_curFrame();
        },
        set_curFrame: function (a) {
          var b = this.get_curSymbol();
          switch (this.get_loopType()._hx_index) {
            case 0:
              var c = a % this.get_curSymbol().get_length();
              break;
            case 1:
              c = this.get_curSymbol().get_length() - 1;
              a = a < 0 ? 0 : a;
              c = c != null && a > c ? c : a;
              break;
            default:
              c = a;
          }
          b.set_curFrame(c);
          if (this.get_symbolType() == $d.MovieClip && !this.swfRender) {
            this.get_curSymbol().set_curFrame(0);
          }
          return this.get_curSymbol().get_curFrame();
        },
        addBySymbol: function (a, b, c, d, e, f) {
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 0;
          }
          d = new Ef(null, new yh(null, null, null, d ? Od.Loop : Od.PlayOnce), new Rc(1, 0, 0, 1, e, f));
          e = Object.keys(this.symbolDictionary.h);
          f = e.length;
          for (var k = 0; k < f;) {
            var t = e[k++];
            if (this.startsWith(t, b)) {
              d.symbol.name = t;
              break;
            }
          }
          if (d.symbol.name != null) {
            this.animsMap.h[a] = {
              instance: d,
              frameRate: c
            };
          } else {
            g.log.advanced("No symbol was found with the name " + b + "!", Aa.ERROR, true);
          }
        },
        startsWith: function (a, b) {
          if (v.endsWith(b, "\\")) {
            return a == b.substring(0, b.length - 1);
          } else {
            return v.startsWith(a, b);
          }
        },
        addBySymbolIndices: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = 0;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = true;
          }
          if (d == null) {
            d = 0;
          }
          if (Object.prototype.hasOwnProperty.call(this.symbolDictionary.h, b)) {
            e = new Ef(null, new yh(null, null, null, e ? Od.Loop : Od.PlayOnce), new Rc(1, 0, 0, 1, f, k));
            f = new zh();
            f.add(null, "Layer 1");
            k = 0;
            for (var t = c.length; k < t;) {
              var l = k++;
              var h = c[l];
              l = new Ug(l);
              var p = new yh(b, null, null, e.symbol.loop);
              p.set_firstFrame(h);
              l.add(new Ef(null, p));
              f.get(0).add(l);
            }
            b = new Cj(a, f);
            e.symbol.name = b.name;
            this.symbolDictionary.h[b.name] = b;
            this.animsMap.h[a] = {
              instance: e,
              frameRate: d
            };
          } else {
            g.log.advanced("" + b + " does not exist as a symbol! maybe you misspelled it?", Aa.ERROR, true);
          }
        },
        set_framerate: function (a) {
          this.frameDelay = 1 / a;
          return this.framerate = a;
        },
        get_length: function () {
          return this.get_curSymbol().get_length();
        },
        get_loopType: function () {
          return this.curInstance.symbol.loop;
        },
        get_symbolType: function () {
          return this.curInstance.symbol.type;
        },
        set_symbolType: function (a) {
          return this.curInstance.symbol.set_type(a);
        },
        get_reversed: function () {
          return this.curInstance.symbol.reverse;
        },
        set_reversed: function (a) {
          return this.curInstance.symbol.reverse = a;
        },
        get_curSymbol: function () {
          return this.symbolDictionary.h[this.curInstance.symbol.name];
        },
        destroy: function () {
          this.isPlaying = false;
          this.set_curFrame(0);
          this.set_framerate(0);
          this._tick = 0;
          this.animsMap = this.buttonMap = null;
          this.curInstance.destroy();
          this.curInstance = null;
          this.stageInstance.destroy();
          this.stageInstance = null;
          this.metadata.destroy();
          this.metadata = null;
          this.swfRender = false;
          this.symbolDictionary = this._parent = null;
        },
        __class__: Kl,
        __properties__: {
          set_symbolType: "set_symbolType",
          get_symbolType: "get_symbolType",
          get_loopType: "get_loopType",
          set_curFrame: "set_curFrame",
          get_curFrame: "get_curFrame",
          set_framerate: "set_framerate",
          set_reversed: "set_reversed",
          get_reversed: "get_reversed",
          get_finished: "get_finished",
          get_curSymbol: "get_curSymbol",
          get_length: "get_length"
        }
      };
      function go(a, b) {
        this.name = a;
        this.frameRate = b;
      }
      h["flxanimate.animate.FlxMetaData"] = go;
      go.__name__ = "flxanimate.animate.FlxMetaData";
      go.prototype = {
        destroy: function () {
          this.name = null;
          this.frameRate = 0;
        },
        __class__: go
      };
      function Ef(a, b, c) {
        this.set_bitmap(a);
        this.symbol = b;
        if (b != null) {
          b._parent = this;
        }
        this.set_matrix(c == null ? new Rc() : c);
      }
      h["flxanimate.animate.FlxElement"] = Ef;
      Ef.__name__ = "flxanimate.animate.FlxElement";
      Ef.fromJSON = function (a) {
        var b = Ee.get_SI(a) != null;
        var c = null;
        if (b) {
          c = new yh();
          c.instance = Qe.get_IN(Ee.get_SI(a));
          switch (Qe.get_ST(Ee.get_SI(a))) {
            case "B":
            case "button":
              var d = $d.Button;
              break;
            case "MC":
            case "movieclip":
              d = $d.MovieClip;
              break;
            default:
              d = $d.Graphic;
          }
          c.set_type(d);
          switch (Qe.get_LP(Ee.get_SI(a)) == null ? "LP" : Qe.get_LP(Ee.get_SI(a)).split("R")[0]) {
            case "PO":
            case "playonce":
              d = Od.PlayOnce;
              break;
            case "SF":
            case "singleframe":
              d = Od.SingleFrame;
              break;
            default:
              d = Od.Loop;
          }
          c.set_loop(d);
          c.reverse = Qe.get_LP(Ee.get_SI(a)) == null ? false : Qe.get_LP(Ee.get_SI(a)).indexOf("R") != -1;
          c.set_firstFrame(Qe.get_FF(Ee.get_SI(a)));
          c.set_colorEffect(Ga.fromColorJson(Qe.get_C(Ee.get_SI(a))));
          c.name = Qe.get_SN(Ee.get_SI(a));
          d = Qe.get_TRP(Ee.get_SI(a)).x;
          var e = Qe.get_TRP(Ee.get_SI(a)).y;
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          d = da.pool.get().set(d, e);
          d._inPool = false;
          d._weak = true;
          c.transformationPoint = d;
          c.set_filters(Ga.fromFilterJson(Qe.get_F(Ee.get_SI(a))));
        }
        d = b ? Qe.get_M3D(Ee.get_SI(a)) : Op.get_M3D(vp.get_ASI(a));
        e = ha.fields(d);
        if (!(d instanceof Array)) {
          e.sort(function (a, b) {
            return y.parseInt(a.substring(1)) - y.parseInt(b.substring(1));
          });
        }
        if (d instanceof Array) {
          e = d;
        } else {
          var f = [];
          for (var k = 0; k < e.length;) {
            var g = e[k];
            ++k;
            f.push(ha.field(d, g));
          }
          e = f;
        }
        if (!b && d == null) {
          e[0] = e[5] = 1;
          e[1] = e[4] = e[12] = e[13] = 0;
        }
        d = b ? fp.get_POS(Qe.get_bitmap(Ee.get_SI(a))) : fp.get_POS(vp.get_ASI(a));
        if (d == null) {
          d = {
            x: 0,
            y: 0
          };
        }
        return new Ef(b ? fp.get_N(Qe.get_bitmap(Ee.get_SI(a))) : fp.get_N(vp.get_ASI(a)), c, new Rc(e[0], e[1], e[4], e[5], e[12], e[13]));
      };
      Ef.prototype = {
        destroy: function () {
          this._parent = null;
          if (this.symbol != null) {
            this.symbol.destroy();
          }
          this.set_bitmap(null);
          this.set_matrix(null);
        },
        set_bitmap: function (a) {
          if (a != this.bitmap && this.symbol != null && this.symbol.get_cacheAsBitmap()) {
            this.symbol._renderDirty = true;
          }
          return this.bitmap = a;
        },
        set_matrix: function (a) {
          if (a == null) {
            this.matrix.identity();
          } else {
            this.matrix = a;
          }
          return a;
        },
        __class__: Ef,
        __properties__: {
          set_matrix: "set_matrix",
          set_bitmap: "set_bitmap"
        }
      };
      function Ug(a, b, c, d, e) {
        if (b == null) {
          b = 1;
        }
        this._renderDirty = false;
        this.set_index(a);
        this.set_duration(b);
        this.set_name(e);
        this._elements = c == null ? [] : c;
        this.set_colorEffect(d);
        this.callbacks = [];
        this._bitmapMatrix = new Rc();
      }
      h["flxanimate.animate.FlxKeyFrame"] = Ug;
      Ug.__name__ = "flxanimate.animate.FlxKeyFrame";
      Ug.fromJSON = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Ug(Dj.get_I(a), Dj.get_DU(a), null, null, Dj.get_N(a));
        b.set_colorEffect(Ga.fromColorJson(Dj.get_C(a)));
        if (Dj.get_E(a) != null) {
          for (var c = 0, d = Dj.get_E(a); c < d.length;) {
            var e = d[c];
            ++c;
            b.add(Ef.fromJSON(e));
          }
        }
        b.set_filters(Ga.fromFilterJson(Dj.get_F(a)));
        return b;
      };
      Ug.prototype = {
        set_duration: function (a) {
          var b = null;
          var c = a < 1 ? 1 : a;
          var d = this.duration - (b != null && c > b ? b : c);
          b = null;
          c = a < 1 ? 1 : a;
          this.duration = b != null && c > b ? b : c;
          if (this._parent != null) {
            b = this._parent.get(this.index + a);
            if (b != null) {
              b.set_index(b.index - d);
            }
          }
          return a;
        },
        set_filters: function (a) {
          this._renderDirty = true;
          return this.filters = a;
        },
        update: function (a) {
          if (this.filters != null && this.filters.length != 0 && !this._renderDirty) {
            a = 0;
            for (var b = this.filters; a < b.length;) {
              var c = b[a];
              ++a;
              if (c.__renderDirty) {
                this._renderDirty = true;
                return;
              }
            }
            a = 0;
            for (b = this._elements; a < b.length;) {
              c = b[a];
              ++a;
              if (c.symbol != null && (c.symbol._renderDirty || c.symbol._layerDirty)) {
                this._renderDirty = true;
                break;
              }
            }
          }
        },
        add: function (a) {
          if (a instanceof Ef) {
            if (a == null) {
              g.log.advanced("this element is null!", Aa.ERROR, true);
              return null;
            }
            a._parent = this;
            this._elements.push(a);
          } else {
            if (a == null) {
              g.log.advanced("this callback is null!", Aa.ERROR, true);
              return null;
            }
            this.callbacks.push(a);
          }
          return a;
        },
        getList: function () {
          return this._elements;
        },
        fireCallbacks: function () {
          for (var a = 0; a < this.callbacks.length;) {
            this.callbacks[a]();
            ++a;
          }
        },
        destroy: function () {
          this.set_name(null);
          this.set_index(0);
          this.set_duration(0);
          this._parent = this.callbacks = null;
          this.set_colorEffect(null);
          for (var a = 0, b = this._elements; a < b.length;) {
            var c = b[a];
            ++a;
            c.destroy();
          }
        },
        set_colorEffect: function (a) {
          if (a == null) {
            a = Pd.None;
          }
          if (wa.__instanceof(a, Pd)) {
            this.colorEffect = Ga.parseColorEffect(a);
          } else {
            this.colorEffect = a;
          }
          return this.colorEffect;
        },
        set_index: function (a) {
          this.index = a;
          if (this._parent != null) {
            this._parent.remove(this);
            this._parent.add(this);
          }
          return this.index;
        },
        set_name: function (a) {
          if (this._parent != null) {
            var b = this.name;
            var c = this._parent._labels;
            if (Object.prototype.hasOwnProperty.call(c.h, b)) {
              delete c.h[b];
            }
            this._parent._labels.h[a] = this;
          }
          return this.name = a;
        },
        __class__: Ug,
        __properties__: {
          set_filters: "set_filters",
          set_colorEffect: "set_colorEffect",
          set_duration: "set_duration",
          set_index: "set_index",
          set_name: "set_name"
        }
      };
      function Ah(a, b) {
        this._renderable = true;
        hc.call(this);
        this.name = a;
        this.set_type(ni.Normal);
        this._keyframes = b ?? [];
        this.set_visible(true);
        this._labels = new xa();
        this._filterMatrix = new Rc();
      }
      h["flxanimate.animate.FlxLayer"] = Ah;
      Ah.__name__ = "flxanimate.animate.FlxLayer";
      Ah.fromJSON = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Ah(Ej.get_LN(a));
        if (Ej.get_LT(a) != null || Ej.get_Clpb(a) != null) {
          b.set_type(Ej.get_LT(a) != null ? ni.Clipper : ni.Clipped(Ej.get_Clpb(a)));
        }
        if (Ej.get_FR(a) != null) {
          var c = 0;
          for (a = Ej.get_FR(a); c < a.length;) {
            var d = a[c];
            ++c;
            b.add(Ug.fromJSON(d));
          }
        }
        return b;
      };
      Ah.__super__ = hc;
      Ah.prototype = q(hc.prototype, {
        destroy: function () {},
        get: function (a) {
          return this._get(a, false);
        },
        _get: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b) {
            var c = this.type;
            c = w[c.__enum__].__constructs__[c._hx_index]._hx_name == "Clipped";
          } else {
            c = false;
          }
          if (c) {
            b = this._parent.getList();
            b = b[b.indexOf(this) - 1];
            if (this._parent != null && b != null) {
              c = b.type;
              c = w[c.__enum__].__constructs__[c._hx_index]._hx_name == "Clipper";
            } else {
              c = false;
            }
            if (c) {
              b._renderable = false;
            }
          }
          if (typeof a == "string") {
            if (Object.prototype.hasOwnProperty.call(this._labels.h, a)) {
              return this._labels.h[a];
            } else {
              return null;
            }
          }
          if (a > this.get_length()) {
            return null;
          }
          b = 0;
          for (c = this._keyframes; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.index + d.duration > a) {
              return d;
            }
          }
          return null;
        },
        add: function (a) {
          if (a == null) {
            return null;
          }
          var b = a.index;
          if (a.name != null) {
            this._labels.h[a.name] = a;
          }
          var c = this.get_length() - 1;
          var d = b < 0 ? 0 : b;
          var e = this.get(c != null && d > c ? c : d);
          if (this.get_length() == 0) {
            e = new Ug(0, 1);
            this._keyframes.push(e);
          }
          c = Math.abs(b - e.index);
          if (b == e.index) {
            a.set_duration(a.duration + (e.duration - 1));
            this._keyframes.splice(this._keyframes.indexOf(e), 0, a);
            L.remove(this._keyframes, e);
            e.destroy();
          } else {
            b = e.duration;
            e.set_duration(e.duration + (c - b));
            b = b - c - 1;
            c = null;
            d = b < 0 ? 0 : b;
            a.set_duration(a.duration + (c != null && d > c ? c : d));
            this._keyframes.splice(this._keyframes.indexOf(e) + 1, 0, a);
          }
          a._parent = this;
          return a;
        },
        remove: function (a) {
          if (a instanceof Ug) {
            L.remove(this._keyframes, a);
            return a;
          } else if (this.get_length() > a) {
            a = this.get(a);
            if (a.duration > 1) {
              a.set_duration(a.duration - 1);
            } else {
              L.remove(this._keyframes, a);
            }
            return a;
          } else {
            return null;
          }
        },
        rename: function (a) {
          if (a == null) {
            a = "";
          }
          if (["", null].indexOf(a) != -1 && ["", null].indexOf(this.name) != -1) {
            a = "Layer " + (this._parent != null ? this._parent.getList().length : 1);
          }
          if (this._parent != null && this._parent.get(a) != null) {
            a += " copy";
          }
          if (["", null].indexOf(a) == -1) {
            this.name = a;
          }
        },
        set__parent: function (a) {
          this._parent = a;
          this.rename();
          return a;
        },
        get_length: function () {
          var a = this._keyframes[this._keyframes.length - 1];
          if (a != null) {
            return a.index + a.duration;
          } else {
            return 0;
          }
        },
        set_type: function (a) {
          if (this.type != null) {
            var b = this.type;
            b = w[b.__enum__].__constructs__[b._hx_index]._hx_name == "Clipped";
          } else {
            b = false;
          }
          if (b) {
            var c = this._parent.getList();
            c = c[c.indexOf(this) - 1];
            if (this._parent != null && c != null) {
              b = c.type;
              b = w[b.__enum__].__constructs__[b._hx_index]._hx_name == "Clipper";
            } else {
              b = false;
            }
            if (b) {
              c._renderable = true;
            }
          }
          return this.type = a;
        },
        _setCurFrame: function (a) {
          if (this.get_length() == 0 || a > this.get_length()) {
            this._currFrame = null;
          } else if (this._currFrame != null) {
            if (!(a >= this._currFrame.index) || !(a < this._currFrame.duration)) {
              var b = this._keyframes.indexOf(this._currFrame);
              if (a >= this._currFrame.index + this._currFrame.duration) {
                for (var c = this._keyframes[b]; a >= c.index + c.duration && (c = this._keyframes[b++], c != null););
                this._currFrame = c;
              } else if (a < this._currFrame.index) {
                for (c = this._keyframes[b]; a < c.index && (c = this._keyframes[b--], c != null););
                this._currFrame = c;
              }
            }
          } else {
            this._currFrame = this.get(a);
          }
        },
        __class__: Ah,
        __properties__: q(hc.prototype.__properties__, {
          get_length: "get_length",
          set_type: "set_type",
          set__parent: "set__parent"
        })
      });
      function Cj(a, b) {
        this.activeCount = 0;
        this.layers = [];
        this.set_curFrame(0);
        this.timeline = b;
        b._parent = this;
        this.name = a;
        this.activeCount = 0;
      }
      h["flxanimate.animate.FlxSymbol"] = Cj;
      Cj.__name__ = "flxanimate.animate.FlxSymbol";
      Cj.prototype = {
        fireCallbacks: function (a) {
          if (a == null) {
            a = this._curFrame;
          }
          for (var b = 0, c = this.timeline.getList(); b < c.length;) {
            var d = c[b];
            ++b;
            var e = d._labels.h;
            d = e;
            e = Object.keys(e);
            for (var f = e.length, k = 0; k < f;) {
              var g = d[e[k++]];
              if (g.index == a) {
                g.fireCallbacks();
              }
            }
          }
          if (this.onCallback != null) {
            this.onCallback();
          }
        },
        get_length: function () {
          return this.timeline.get_totalFrames();
        },
        get_curFrame: function () {
          return this._curFrame;
        },
        set_curFrame: function (a) {
          return this._curFrame = a;
        },
        __class__: Cj,
        __properties__: {
          set_curFrame: "set_curFrame",
          get_curFrame: "get_curFrame",
          get_length: "get_length"
        }
      };
      function zh(a) {
        this._layers = a ?? [];
      }
      h["flxanimate.animate.FlxTimeline"] = zh;
      zh.__name__ = "flxanimate.animate.FlxTimeline";
      zh.fromJSON = function (a) {
        if (a == null || Ap.get_L(a) == null) {
          return null;
        }
        var b = [];
        var c = 0;
        for (a = Ap.get_L(a); c < a.length;) {
          var d = a[c];
          ++c;
          b.push(Ah.fromJSON(d));
        }
        return new zh(b);
      };
      zh.prototype = {
        getList: function () {
          return this._layers;
        },
        get: function (a) {
          if (typeof a == "number" && (a | 0) === a) {
            return this._layers[a];
          }
          for (var b = 0, c = this._layers; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              return d;
            }
          }
          return null;
        },
        add: function (a, b) {
          if (a == null) {
            a = 0;
          }
          b = typeof b == "string" || b == null ? new Ah(b) : b;
          b.set__parent(this);
          this._layers.splice(a, 0, b);
          return b;
        },
        get_totalFrames: function () {
          var a = 0;
          for (var b = 0, c = this._layers; b < c.length;) {
            var d = c[b];
            ++b;
            d = d.get_length();
            if (a < d) {
              a = d;
            }
          }
          return a;
        },
        __class__: zh,
        __properties__: {
          get_totalFrames: "get_totalFrames"
        }
      };
      function yh(a, b, c, d) {
        if (d == null) {
          d = Od.Loop;
        }
        if (c == null) {
          c = $d.Graphic;
        }
        if (b == null) {
          b = "";
        }
        this._cacheAsBitmap = this._renderDirty = this._layerDirty = false;
        this.name = a;
        this.instance = b;
        this.set_type(c);
        this.set_loop(d);
        this.set_firstFrame(0);
        a = b = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = da.pool.get().set(b, a);
        a._inPool = false;
        this.transformationPoint = a;
        this.set_colorEffect(Pd.None);
        this._curFrame = -1;
        this.set_filters(null);
        this.cacheAsBitmapMatrix = new Rc();
        this._cacheBitmapMatrix = new Rc();
      }
      h["flxanimate.animate.SymbolParameters"] = yh;
      yh.__name__ = "flxanimate.animate.SymbolParameters";
      yh.prototype = {
        destroy: function () {
          this.instance = null;
          this.set_type(null);
          this.reverse = false;
          this.set_firstFrame(0);
          this.name = null;
          this.set_colorEffect(null);
          this.transformationPoint = null;
        },
        set_type: function (a) {
          this.type = a;
          this.set_loop(a == null ? null : Od.Loop);
          if (a == $d.Graphic) {
            this.set_filters(null);
            ca.destroy(this._filterBitmap);
            this.set_cacheAsBitmap(false);
          }
          return a;
        },
        set_loop: function (a) {
          if (this.type == null) {
            return this.loop = null;
          }
          switch (this.type._hx_index) {
            case 1:
              var b = Od.Loop;
              break;
            case 2:
              b = Od.SingleFrame;
              break;
            default:
              b = a;
          }
          this.loop = b;
          return a;
        },
        set_firstFrame: function (a) {
          if (this.type == $d.Graphic && this.firstFrame != a) {
            this.firstFrame = a;
            this._layerDirty = true;
          }
          return a;
        },
        reset: function () {
          this.name = null;
          this.set_type($d.Graphic);
          this.set_loop(Od.Loop);
          this.instance = "";
          this.set_firstFrame(0);
          var a = this.transformationPoint;
          a.set_x(0);
          a.set_y(0);
          this.set_colorEffect(Pd.None);
        },
        set_colorEffect: function (a) {
          if (this.get_cacheAsBitmap()) {
            this._renderDirty = true;
          }
          if (a == null) {
            a = Pd.None;
          }
          if (wa.__instanceof(a, Pd)) {
            this.colorEffect = Ga.parseColorEffect(a);
          } else {
            this.colorEffect = a;
          }
          return this.colorEffect;
        },
        set_filters: function (a) {
          if (this.type == $d.Graphic) {
            return null;
          }
          if (a != null && a.length > 0) {
            this._renderDirty = true;
          } else if (this._cacheAsBitmap) {
            this._renderDirty = true;
          } else {
            this._filterBitmap = ca.destroy(this._filterBitmap);
          }
          return this.filters = a;
        },
        get_cacheAsBitmap: function () {
          if (this.type == $d.Graphic) {
            return false;
          } else if (this.filters != null && this.filters.length > 0) {
            return true;
          } else {
            return this._cacheAsBitmap;
          }
        },
        set_cacheAsBitmap: function (a) {
          if (this.type == $d.Graphic) {
            return false;
          }
          if (a) {
            this._renderDirty = true;
          }
          return this._cacheAsBitmap = a;
        },
        __class__: yh,
        __properties__: {
          set_filters: "set_filters",
          set_cacheAsBitmap: "set_cacheAsBitmap",
          get_cacheAsBitmap: "get_cacheAsBitmap",
          set_colorEffect: "set_colorEffect",
          set_firstFrame: "set_firstFrame",
          set_loop: "set_loop",
          set_type: "set_type"
        }
      };
      function Ga() {}
      h["flxanimate.data.AnimationData"] = Ga;
      Ga.__name__ = "flxanimate.data.AnimationData";
      Ga.setFieldBool = function (a, b, c) {
        if (a == null) {
          return ha.field({}, "");
        }
        for (var d = 0; d < b.length;) {
          var e = b[d];
          ++d;
          if (c != null) {
            return a[e] = c;
          }
          if (Object.prototype.hasOwnProperty.call(a, e)) {
            return ha.field(a, e);
          }
        }
        return ha.field(a, "");
      };
      Ga.fromColorJson = function (a) {
        var b = Pd.None;
        if (a == null) {
          return b;
        }
        switch (qf.get_M(a)) {
          case "AD":
          case "Advanced":
            b = new Ob();
            b.redMultiplier = qf.get_RM(a);
            b.redOffset = qf.get_RO(a);
            b.greenMultiplier = qf.get_GM(a);
            b.greenOffset = qf.get_GO(a);
            b.blueMultiplier = qf.get_BM(a);
            b.blueOffset = qf.get_BO(a);
            b.alphaMultiplier = qf.get_AM(a);
            b.alphaOffset = qf.get_AO(a);
            b = Pd.Advanced(b);
            break;
          case "Alpha":
          case "CA":
            b = Pd.Alpha(qf.get_AM(a));
            break;
          case "Brightness":
          case "CBRT":
            b = Pd.Brightness(qf.get_BRT(a));
            break;
          case "T":
          case "Tint":
            b = "0x" + qf.get_TC(a).substring(1);
            b = Pd.Tint(y.parseInt(b), qf.get_TM(a));
            break;
          default:
            g.log.advanced("color Effect mode \"" + qf.get_M(a) + "\" is invalid or not supported!", Aa.ERROR, true);
        }
        return b;
      };
      Ga.colorFromString = function (a) {
        return y.parseInt("0x" + a.substring(1));
      };
      Ga.fromFilterJson = function (a) {
        if (a == null) {
          return null;
        }
        var b = [];
        for (var c = 0, d = ha.fields(a); c < d.length;) {
          var e = d[c];
          ++c;
          switch (e) {
            case "ACF":
            case "AdjustColorFilter":
              e = ha.field(a, e);
              var f = new Fj();
              f.set_hue(gp.get_H(e));
              f.set_brightness(gp.get_BRT(e));
              f.set_contrast(gp.get_CT(e));
              f.set_saturation(gp.get_SAT(e));
              b.push(new Vg(f.calculateFinalFlatArray()));
              break;
            case "BF":
            case "BevelFilter":
              e = ha.field(a, e);
              b.push(new Ff(Bh.get_DST(e), Bh.get_AL(e), Ga.colorFromString(Bh.get_HC(e)), Bh.get_HA(e), Ga.colorFromString(Bh.get_SC(e)), Bh.get_SA(e), Ch.get_BLX(e), Ch.get_BLY(e), Bh.get_STR(e), Ch.get_Q(e), Bh.get_TP(e), Bh.get_KK(e)));
              break;
            case "BLF":
            case "BlurFilter":
              e = ha.field(a, e);
              b.push(new Gf(Ch.get_BLX(e), Ch.get_BLY(e), Ch.get_Q(e)));
              break;
            case "GF":
            case "GlowFilter":
              e = ha.field(a, e);
              b.push(new Ed(Ga.colorFromString(ho.get_C(e)), ho.get_A(e), Ch.get_BLX(e), Ch.get_BLY(e), ho.get_STR(e), Ch.get_Q(e), ho.get_IN(e), ho.get_KK(e)));
          }
        }
        return b;
      };
      Ga.parseColorEffect = function (a) {
        if (a == null) {
          a = Pd.None;
        }
        var b = null;
        if ([Pd.None, null].indexOf(a) == -1) {
          b = yb.enumParameters(a);
          switch (w[a.__enum__].__constructs__[a._hx_index]._hx_name) {
            case "Advanced":
              b = new Nl(b[0]);
              break;
            case "Alpha":
              b = new Ol(b[0]);
              break;
            case "Brightness":
              b = new Pl(b[0]);
              break;
            case "Tint":
              b = new Ql(b[0], b[1]);
              break;
            default:
              b = new me();
          }
        }
        return b;
      };
      var Pd = w["flxanimate.data.ColorEffect"] = {
        __ename__: "flxanimate.data.ColorEffect",
        __constructs__: null,
        None: {
          _hx_name: "None",
          _hx_index: 0,
          __enum__: "flxanimate.data.ColorEffect",
          toString: p
        },
        Brightness: (r = function (a) {
          return {
            _hx_index: 1,
            Bright: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, r._hx_name = "Brightness", r.__params__ = ["Bright"], r),
        Tint: (r = function (a, b) {
          return {
            _hx_index: 2,
            Color: a,
            Opacity: b,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, r._hx_name = "Tint", r.__params__ = ["Color", "Opacity"], r),
        Alpha: (r = function (a) {
          return {
            _hx_index: 3,
            Alpha: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, r._hx_name = "Alpha", r.__params__ = ["Alpha"], r),
        Advanced: (r = function (a) {
          return {
            _hx_index: 4,
            transform: a,
            __enum__: "flxanimate.data.ColorEffect",
            toString: p
          };
        }, r._hx_name = "Advanced", r.__params__ = ["transform"], r)
      };
      Pd.__constructs__ = [Pd.None, Pd.Brightness, Pd.Tint, Pd.Alpha, Pd.Advanced];
      var Od = w["flxanimate.data.Loop"] = {
        __ename__: "flxanimate.data.Loop",
        __constructs__: null,
        Loop: {
          _hx_name: "Loop",
          _hx_index: 0,
          __enum__: "flxanimate.data.Loop",
          toString: p
        },
        PlayOnce: {
          _hx_name: "PlayOnce",
          _hx_index: 1,
          __enum__: "flxanimate.data.Loop",
          toString: p
        },
        SingleFrame: {
          _hx_name: "SingleFrame",
          _hx_index: 2,
          __enum__: "flxanimate.data.Loop",
          toString: p
        }
      };
      Od.__constructs__ = [Od.Loop, Od.PlayOnce, Od.SingleFrame];
      var $d = w["flxanimate.data.SymbolT"] = {
        __ename__: "flxanimate.data.SymbolT",
        __constructs__: null,
        Graphic: {
          _hx_name: "Graphic",
          _hx_index: 0,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        },
        MovieClip: {
          _hx_name: "MovieClip",
          _hx_index: 1,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        },
        Button: {
          _hx_name: "Button",
          _hx_index: 2,
          __enum__: "flxanimate.data.SymbolT",
          toString: p
        }
      };
      $d.__constructs__ = [$d.Graphic, $d.MovieClip, $d.Button];
      var ni = w["flxanimate.data.LayerType"] = {
        __ename__: "flxanimate.data.LayerType",
        __constructs__: null,
        Normal: {
          _hx_name: "Normal",
          _hx_index: 0,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        },
        Clipper: {
          _hx_name: "Clipper",
          _hx_index: 1,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        },
        Clipped: (r = function (a) {
          return {
            _hx_index: 2,
            layer: a,
            __enum__: "flxanimate.data.LayerType",
            toString: p
          };
        }, r._hx_name = "Clipped", r.__params__ = ["layer"], r),
        Folder: {
          _hx_name: "Folder",
          _hx_index: 3,
          __enum__: "flxanimate.data.LayerType",
          toString: p
        }
      };
      ni.__constructs__ = [ni.Normal, ni.Clipper, ni.Clipped, ni.Folder];
      var Tg = {
        __properties__: {
          get_MD: "get_MD",
          get_SD: "get_SD",
          get_AN: "get_AN"
        },
        get_AN: function (a) {
          return Ga.setFieldBool(a, ["AN", "ANIMATION"]);
        },
        get_MD: function (a) {
          return Ga.setFieldBool(a, ["MD", "metadata"]);
        },
        get_SD: function (a) {
          return Ga.setFieldBool(a, ["SD", "SYMBOL_DICTIONARY"]);
        }
      };
      var Np = {
        __properties__: {
          get_S: "get_S"
        },
        get_S: function (a) {
          return Ga.setFieldBool(a, ["S", "Symbols"]);
        }
      };
      var up = {
        __properties__: {
          get_STI: "get_STI",
          get_N: "get_N"
        },
        get_N: function (a) {
          return Ga.setFieldBool(a, ["N", "name"]);
        },
        get_STI: function (a) {
          return Ga.setFieldBool(a, ["STI", "StageInstance"]);
        }
      };
      var Ee = {
        __properties__: {
          get_SI: "get_SI"
        },
        get_SI: function (a) {
          return Ga.setFieldBool(a, ["SI", "SYMBOL_Instance"]);
        }
      };
      var Bj = {
        __properties__: {
          get_TL: "get_TL",
          get_SN: "get_SN"
        },
        get_SN: function (a) {
          return Ga.setFieldBool(a, ["SN", "SYMBOL_name"]);
        },
        get_TL: function (a) {
          return Ga.setFieldBool(a, ["TL", "TIMELINE"]);
        }
      };
      var Ap = {
        __properties__: {
          get_L: "get_L"
        },
        get_L: function (a) {
          return Ga.setFieldBool(a, ["L", "LAYERS"]);
        }
      };
      var Ej = {
        __properties__: {
          get_FR: "get_FR",
          get_Clpb: "get_Clpb",
          get_LT: "get_LT",
          get_LN: "get_LN"
        },
        get_LN: function (a) {
          return Ga.setFieldBool(a, ["LN", "Layer_name"]);
        },
        get_LT: function (a) {
          return Ga.setFieldBool(a, ["LT", "Layer_type"]);
        },
        get_Clpb: function (a) {
          return Ga.setFieldBool(a, ["Clpb", "Clipped_by"]);
        },
        get_FR: function (a) {
          return Ga.setFieldBool(a, ["FR", "Frames"]);
        }
      };
      var Mp = {
        __properties__: {
          get_FRT: "get_FRT"
        },
        get_FRT: function (a) {
          return Ga.setFieldBool(a, ["FRT", "framerate"]);
        }
      };
      var Dj = {
        __properties__: {
          get_F: "get_F",
          get_C: "get_C",
          get_E: "get_E",
          get_DU: "get_DU",
          get_I: "get_I",
          get_N: "get_N"
        },
        get_N: function (a) {
          return Ga.setFieldBool(a, ["N", "name"]);
        },
        get_I: function (a) {
          return Ga.setFieldBool(a, ["I", "index"]);
        },
        get_DU: function (a) {
          return Ga.setFieldBool(a, ["DU", "duration"]);
        },
        get_E: function (a) {
          return Ga.setFieldBool(a, ["E", "elements"]);
        },
        get_C: function (a) {
          return Ga.setFieldBool(a, ["C", "color"]);
        },
        get_F: function (a) {
          return Ga.setFieldBool(a, ["F", "filters"]);
        }
      };
      var vp = {
        __properties__: {
          get_ASI: "get_ASI"
        },
        get_ASI: function (a) {
          return Ga.setFieldBool(a, ["ASI", "ATLAS_SPRITE_instance"]);
        }
      };
      var Qe = {
        __properties__: {
          get_F: "get_F",
          get_C: "get_C",
          get_M3D: "get_M3D",
          get_TRP: "get_TRP",
          get_LP: "get_LP",
          get_FF: "get_FF",
          get_bitmap: "get_bitmap",
          get_ST: "get_ST",
          get_IN: "get_IN",
          get_SN: "get_SN"
        },
        get_SN: function (a) {
          return Ga.setFieldBool(a, ["SN", "SYMBOL_name"]);
        },
        get_IN: function (a) {
          return Ga.setFieldBool(a, ["IN", "Instance_Name"]);
        },
        get_ST: function (a) {
          return Ga.setFieldBool(a, ["ST", "symbolType"]);
        },
        get_bitmap: function (a) {
          return Ga.setFieldBool(a, ["BM", "bitmap"]);
        },
        get_FF: function (a) {
          return Ga.setFieldBool(a, ["FF", "firstFrame"]);
        },
        get_LP: function (a) {
          return Ga.setFieldBool(a, ["LP", "loop"]);
        },
        get_TRP: function (a) {
          return Ga.setFieldBool(a, ["TRP", "transformationPoint"]);
        },
        get_M3D: function (a) {
          return Ga.setFieldBool(a, ["M3D", "Matrix3D"]);
        },
        get_C: function (a) {
          return Ga.setFieldBool(a, ["C", "color"]);
        },
        get_F: function (a) {
          return Ga.setFieldBool(a, ["F", "filters"]);
        }
      };
      var qf = {
        __properties__: {
          get_BRT: "get_BRT",
          get_BO: "get_BO",
          get_BM: "get_BM",
          get_GO: "get_GO",
          get_GM: "get_GM",
          get_RO: "get_RO",
          get_RM: "get_RM",
          get_AO: "get_AO",
          get_AM: "get_AM",
          get_TM: "get_TM",
          get_TC: "get_TC",
          get_M: "get_M"
        },
        get_M: function (a) {
          return Ga.setFieldBool(a, ["M", "mode"]);
        },
        get_TC: function (a) {
          return Ga.setFieldBool(a, ["TC", "tintColor"]);
        },
        get_TM: function (a) {
          return Ga.setFieldBool(a, ["TM", "tintMultiplier"]);
        },
        get_AM: function (a) {
          return Ga.setFieldBool(a, ["AM", "alphaMultiplier"]);
        },
        get_AO: function (a) {
          return Ga.setFieldBool(a, ["AO", "AlphaOffset"]);
        },
        get_RM: function (a) {
          return Ga.setFieldBool(a, ["RM", "RedMultiplier"]);
        },
        get_RO: function (a) {
          return Ga.setFieldBool(a, ["RO", "redOffset"]);
        },
        get_GM: function (a) {
          return Ga.setFieldBool(a, ["GM", "greenMultiplier"]);
        },
        get_GO: function (a) {
          return Ga.setFieldBool(a, ["GO", "greenOffset"]);
        },
        get_BM: function (a) {
          return Ga.setFieldBool(a, ["BM", "blueMultiplier"]);
        },
        get_BO: function (a) {
          return Ga.setFieldBool(a, ["BO", "blueOffset"]);
        },
        get_BRT: function (a) {
          return Ga.setFieldBool(a, ["BRT", "Brightness"]);
        }
      };
      var gp = {
        __properties__: {
          get_H: "get_H",
          get_SAT: "get_SAT",
          get_CT: "get_CT",
          get_BRT: "get_BRT"
        },
        get_BRT: function (a) {
          return Ga.setFieldBool(a, ["BRT", "brightness"]);
        },
        get_CT: function (a) {
          return Ga.setFieldBool(a, ["CT", "contrast"]);
        },
        get_SAT: function (a) {
          return Ga.setFieldBool(a, ["SAT", "saturation"]);
        },
        get_H: function (a) {
          return Ga.setFieldBool(a, ["H", "hue"]);
        }
      };
      var Ch = {
        __properties__: {
          get_Q: "get_Q",
          get_BLY: "get_BLY",
          get_BLX: "get_BLX"
        },
        get_BLX: function (a) {
          return Ga.setFieldBool(a, ["BLX", "blurX"]);
        },
        get_BLY: function (a) {
          return Ga.setFieldBool(a, ["BLY", "blurY"]);
        },
        get_Q: function (a) {
          return Ga.setFieldBool(a, ["Q", "quality"]);
        }
      };
      var ho = {
        __properties__: {
          get_IN: "get_IN",
          get_KK: "get_KK",
          get_STR: "get_STR",
          get_A: "get_A",
          get_C: "get_C"
        },
        get_C: function (a) {
          return Ga.setFieldBool(a, ["C"]);
        },
        get_A: function (a) {
          return Ga.setFieldBool(a, ["A"]);
        },
        get_STR: function (a) {
          return Ga.setFieldBool(a, ["STR", "strength"]);
        },
        get_KK: function (a) {
          return Ga.setFieldBool(a, ["KK", "knockout"]);
        },
        get_IN: function (a) {
          return Ga.setFieldBool(a, ["IN"]);
        }
      };
      var Bh = {
        __properties__: {
          get_TP: "get_TP",
          get_DST: "get_DST",
          get_AL: "get_AL",
          get_KK: "get_KK",
          get_STR: "get_STR",
          get_HA: "get_HA",
          get_HC: "get_HC",
          get_SA: "get_SA",
          get_SC: "get_SC"
        },
        get_SC: function (a) {
          return Ga.setFieldBool(a, ["SC", "shadowColor"]);
        },
        get_SA: function (a) {
          return Ga.setFieldBool(a, ["SA", "shadowAlpha"]);
        },
        get_HC: function (a) {
          return Ga.setFieldBool(a, ["HC", "highlightColor"]);
        },
        get_HA: function (a) {
          return Ga.setFieldBool(a, ["HA", "highlightAlpha"]);
        },
        get_STR: function (a) {
          return Ga.setFieldBool(a, ["STR", "strength"]);
        },
        get_KK: function (a) {
          return Ga.setFieldBool(a, ["KK", "knockout"]);
        },
        get_AL: function (a) {
          return Ga.setFieldBool(a, ["AL", "angle"]);
        },
        get_DST: function (a) {
          return Ga.setFieldBool(a, ["DST", "distance"]);
        },
        get_TP: function (a) {
          return Ga.setFieldBool(a, ["TP", "type"]);
        }
      };
      var fp = {
        __properties__: {
          get_POS: "get_POS",
          get_N: "get_N"
        },
        get_N: function (a) {
          return Ga.setFieldBool(a, ["N", "name"]);
        },
        get_POS: function (a) {
          return Ga.setFieldBool(a, ["POS", "Position"]);
        }
      };
      var Op = {
        __properties__: {
          get_M3D: "get_M3D"
        },
        get_M3D: function (a) {
          return Ga.setFieldBool(a, ["M3D", "Matrix3D"]);
        }
      };
      function fo() {
        this.renderer = new tb(g.game.stage.context3D);
      }
      h["flxanimate.display.FlxAnimateFilterRenderer"] = fo;
      fo.__name__ = "flxanimate.display.FlxAnimateFilterRenderer";
      fo.prototype = {
        applyFilter: function (a, b, c) {
          if (b == null || b.length == 0) {
            return a;
          }
          this.renderer.__setBlendMode(10);
          this.renderer.__worldAlpha = 1;
          if (this.renderer.__worldTransform == null) {
            this.renderer.__worldTransform = new ya();
            this.renderer.__worldColorTransform = new Ob();
          }
          c = new N(Math.ceil(c.width), Math.ceil(c.height), true, 0);
          var d = c.clone();
          var e = d.clone();
          c.copyPixels(a, a.rect, new ob((c.width - a.width) * 0.5, (c.height - a.height) * 0.5));
          this.renderer.__setBlendMode(10);
          this.renderer.__worldAlpha = 1;
          this.renderer.__worldTransform.identity();
          this.renderer.__worldColorTransform.__identity();
          var f = null;
          for (a = 0; a < b.length;) {
            var k = b[a];
            ++a;
            if (k.__preserveObject) {
              this.renderer.__setRenderTarget(e);
              this.renderer.__renderFilterPass(c, this.renderer.__defaultDisplayShader, k.__smooth);
            }
            for (var g = 0, l = k.__numShaderPasses; g < l;) {
              f = g++;
              f = k.__initShader(this.renderer, f, k.__preserveObject ? e : null);
              this.renderer.__setBlendMode(k.__shaderBlendMode);
              this.renderer.__setRenderTarget(d);
              this.renderer.__renderFilterPass(c, f, k.__smooth);
              f = c;
              c = d;
              d = f;
            }
            k.__renderDirty = false;
          }
          d.dispose();
          e.dispose();
          if (f != null) {
            f.dispose();
          }
          return c;
        },
        graphicstoBitmapData: function (a) {
          A.render(a, this.renderer.__softwareRenderer);
          var b = a.__bitmap;
          a.__bitmap = null;
          a.__renderTransform.identity();
          return b;
        },
        __class__: fo
      };
      function me() {
        this.c_Transform = null;
        this.renderDirty = true;
      }
      h["flxanimate.effects.FlxColorEffect"] = me;
      me.__name__ = "flxanimate.effects.FlxColorEffect";
      me.prototype = {
        process: function () {},
        __create: function () {
          if (!this.renderDirty) {
            return this.c_Transform;
          }
          if (this.c_Transform == null) {
            this.c_Transform = new Ob();
          }
          this.process();
          this.renderDirty = false;
          return this.c_Transform;
        },
        __class__: me
      };
      function Nl(a) {
        me.call(this);
        this.set_colorTransform(a);
      }
      h["flxanimate.effects.FlxAdvanced"] = Nl;
      Nl.__name__ = "flxanimate.effects.FlxAdvanced";
      Nl.__super__ = me;
      Nl.prototype = q(me.prototype, {
        set_colorTransform: function (a) {
          return this.c_Transform = a;
        },
        __class__: Nl,
        __properties__: {
          set_colorTransform: "set_colorTransform"
        }
      });
      function Ol(a) {
        me.call(this);
        this.set_alpha(a);
      }
      h["flxanimate.effects.FlxAlpha"] = Ol;
      Ol.__name__ = "flxanimate.effects.FlxAlpha";
      Ol.__super__ = me;
      Ol.prototype = q(me.prototype, {
        process: function () {
          this.c_Transform.alphaMultiplier = this.alpha;
        },
        set_alpha: function (a) {
          if (this.alpha != a) {
            this.renderDirty = true;
          }
          return this.alpha = a;
        },
        __class__: Ol,
        __properties__: {
          set_alpha: "set_alpha"
        }
      });
      function Pl(a) {
        me.call(this);
        this.set_brightness(a);
      }
      h["flxanimate.effects.FlxBrightness"] = Pl;
      Pl.__name__ = "flxanimate.effects.FlxBrightness";
      Pl.__super__ = me;
      Pl.prototype = q(me.prototype, {
        process: function () {
          this.c_Transform.redMultiplier = this.c_Transform.greenMultiplier = this.c_Transform.blueMultiplier = 1 - Math.abs(this.brightness);
          if (this.brightness >= 0) {
            this.c_Transform.redOffset = this.c_Transform.greenOffset = this.c_Transform.blueOffset = this.brightness * 255;
          }
        },
        set_brightness: function (a) {
          if (this.brightness != a) {
            this.renderDirty = true;
          }
          return this.brightness = a;
        },
        __class__: Pl,
        __properties__: {
          set_brightness: "set_brightness"
        }
      });
      function Ql(a, b) {
        me.call(this);
        b = Math.round(b * 255);
        this.set_tint(a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24);
      }
      h["flxanimate.effects.FlxTint"] = Ql;
      Ql.__name__ = "flxanimate.effects.FlxTint";
      Ql.__super__ = me;
      Ql.prototype = q(me.prototype, {
        process: function () {
          var a = (this.tint >> 24 & 255) / 255;
          var b = 1 - a;
          this.c_Transform.redMultiplier = b;
          this.c_Transform.redOffset = Math.round((this.tint >> 16 & 255) * a);
          this.c_Transform.greenMultiplier = b;
          this.c_Transform.greenOffset = Math.round((this.tint >> 8 & 255) * a);
          this.c_Transform.blueMultiplier = b;
          this.c_Transform.blueOffset = Math.round((this.tint & 255) * a);
        },
        set_tint: function (a) {
          if (this.tint != a) {
            this.renderDirty = true;
          }
          return this.tint = a;
        },
        __class__: Ql,
        __properties__: {
          set_tint: "set_tint"
        }
      });
      function ne() {
        this.__leftExtension = this.__bottomExtension = 0;
        this.__needSecondBitmapData = true;
        this.__numShaderPasses = 0;
        this.__preserveObject = false;
        this.__rightExtension = 0;
        this.__shaderBlendMode = 10;
        this.__topExtension = 0;
        this.__smooth = true;
      }
      h["openfl.filters.BitmapFilter"] = ne;
      ne.__name__ = "openfl.filters.BitmapFilter";
      ne.prototype = {
        clone: function () {
          return new ne();
        },
        __applyFilter: function (a, b, c, d) {
          return b;
        },
        __initShader: function (a, b, c) {
          return null;
        },
        __class__: ne
      };
      function qc(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        fe.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters.BitmapFilterShader"] = qc;
      qc.__name__ = "openfl.filters.BitmapFilterShader";
      qc.__super__ = fe;
      qc.prototype = q(fe.prototype, {
        __class__: qc
      });
      function rf() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\t\t}";
        }
        qc.call(this);
        this.uColorH.value = [0, 0, 0, 0];
        this.uColorS.value = [0, 0, 0, 0];
        this.offset.value = [0, 0];
        this.knockout.value = [0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flxanimate.filters._BevelFilter.BevelShader"] = rf;
      rf.__name__ = "flxanimate.filters._BevelFilter.BevelShader";
      rf.__super__ = qc;
      rf.prototype = q(qc.prototype, {
        __class__: rf
      });
      function Rl() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\t\t\t\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = src + bevel * (1.0 - src.a);\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel * (1.0 - src.a);\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        rf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flxanimate.filters._BevelFilter.CombineShader"] = Rl;
      Rl.__name__ = "flxanimate.filters._BevelFilter.CombineShader";
      Rl.__super__ = rf;
      Rl.prototype = q(rf.prototype, {
        __class__: Rl
      });
      var zp = {
        _new: function (a) {
          return {};
        }
      };
      function Sl() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\t\t\t\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = src + bevel;\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel;\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        rf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flxanimate.filters._BevelFilter.FullCombineShader"] = Sl;
      Sl.__name__ = "flxanimate.filters._BevelFilter.FullCombineShader";
      Sl.__super__ = rf;
      Sl.prototype = q(rf.prototype, {
        __class__: Sl
      });
      function Tl() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\r\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec4 uColorH;\r\n\t\tuniform vec4 uColorS;\r\n\t\tuniform int knockout;\r\n\t\tuniform sampler2D sourceBitmap;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\r\n\r\n\t\tvoid main(void) {\r\n\t\t\t\r\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\r\n\t\tvec4 highlight = texture2D(openfl_Texture, textureCoords.zw);\r\n\t\thighlight.rgb = vec3(1., 1., 1.) * highlight.a;\r\n\t\tvec4 shadow = texture2D(openfl_Texture, textureCoords.xy);\r\n\r\n\t\tshadow.rgb = vec3(1., 1., 1.) * shadow.a;\r\n\r\n\t\tvec4 a = highlight;\r\n\r\n\t\thighlight = mix(highlight, vec4(0.), shadow.a);\r\n\t\t\r\n\t\tshadow = mix(shadow, vec4(0.), a.a);\r\n\r\n\t\tvec4 bevel = (uColorS * shadow) + (uColorH * highlight);\r\n\r\n\t\tvec4 src = texture2D(sourceBitmap, openfl_TextureCoordv);\r\n\t\n\r\n\r\n\t\t\tif (knockout == 0)\r\n\t\t\t\tgl_FragColor = vec4((src.rgb * (1.0 - bevel.a)) + (bevel.rgb * src.a), src.a);\r\n\t\t\telse\r\n\t\t\t\tgl_FragColor = bevel * src.a;\r\n\t\t}\r\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\r\n\t\tuniform vec2 offset;\r\n\t\tvarying vec4 textureCoords;\r\n\t\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\ntextureCoords = vec4(openfl_TextureCoord - offset / openfl_TextureSize, openfl_TextureCoord + offset / openfl_TextureSize);\n\n\n\t\t}";
        }
        rf.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["flxanimate.filters._BevelFilter.InnerCombineShader"] = Tl;
      Tl.__name__ = "flxanimate.filters._BevelFilter.InnerCombineShader";
      Tl.__super__ = rf;
      Tl.prototype = q(rf.prototype, {
        __class__: Tl
      });
      function Ff(a, b, c, d, e, f, k, g, l, h, p, m) {
        if (m == null) {
          m = false;
        }
        if (p == null) {
          p = "inner";
        }
        if (h == null) {
          h = 1;
        }
        if (l == null) {
          l = 1;
        }
        if (g == null) {
          g = 4;
        }
        if (k == null) {
          k = 4;
        }
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 16777215;
        }
        if (b == null) {
          b = 45;
        }
        if (a == null) {
          a = 4;
        }
        ne.call(this);
        this.__offsetY = this.__offsetX = 0;
        this.__distance = a;
        this.__angle = b;
        this.__highlightColor = c;
        this.__highlightAlpha = d;
        this.__shadowColor = e;
        this.__shadowAlpha = f;
        this.__blurX = k;
        this.__blurY = g;
        this.__strength = l;
        this.__quality = h;
        this.__type = p;
        this.__knockout = m;
        this.__updateSize();
        this.__renderDirty = this.__preserveObject = this.__needSecondBitmapData = true;
      }
      h["flxanimate.filters.BevelFilter"] = Ff;
      Ff.__name__ = "flxanimate.filters.BevelFilter";
      Ff.__super__ = ne;
      Ff.prototype = q(ne.prototype, {
        clone: function () {
          return new Ff(this.__distance, this.__angle, this.__highlightColor, this.__highlightAlpha, this.__shadowColor, this.__shadowAlpha, this.__blurX, this.__blurY, this.__strength, this.__quality, this.__type, this.__knockout);
        },
        __initShader: function (a, b, c) {
          if (b < this.__horizontalPasses + this.__verticalPasses) {
            a = Ed.__blurAlphaShader;
            if (b < this.__horizontalPasses) {
              c = Math.pow(0.5, b >> 1) * 0.5;
              a.uRadius.value[0] = this.get_blurX() * c;
              a.uRadius.value[1] = 0;
            } else {
              c = Math.pow(0.5, b - this.__horizontalPasses >> 1) * 0.5;
              a.uRadius.value[0] = 0;
              a.uRadius.value[1] = this.get_blurY() * c;
            }
            a.uColor.value[3] = 1;
            a.uStrength.value[0] = b == this.__horizontalPasses + this.__verticalPasses - 1 ? this.__strength : 1;
            return a;
          }
          switch (Pp.fromString(this.__type)) {
            case 0:
              a = Ff.__fullCombineShader;
              break;
            case 1:
              a = Ff.__innerCombineShader;
              break;
            case 2:
              a = Ff.__combineShader;
              break;
            default:
              a = null;
          }
          if (a != null) {
            a.sourceBitmap.input = c;
            a.uColorH.value[0] = (this.get_highlightColor() >> 16 & 255) / 255;
            a.uColorH.value[1] = (this.get_highlightColor() >> 8 & 255) / 255;
            a.uColorH.value[2] = (this.get_highlightColor() & 255) / 255;
            a.uColorH.value[3] = this.get_highlightAlpha();
            a.uColorS.value[0] = (this.get_shadowColor() >> 16 & 255) / 255;
            a.uColorS.value[1] = (this.get_shadowColor() >> 8 & 255) / 255;
            a.uColorS.value[2] = (this.get_shadowColor() & 255) / 255;
            a.uColorS.value[3] = this.get_shadowAlpha();
            a.knockout.value[0] = this.__knockout ? 1 : 0;
            a.offset.value[0] = this.__offsetX;
            a.offset.value[1] = this.__offsetY;
          }
          return a;
        },
        __updateSize: function () {
          var a = this.get_type() == "inner";
          this.__offsetX = this.__distance * Math.cos(this.__angle * Math.PI / 180) | 0;
          this.__offsetY = this.__distance * Math.sin(this.__angle * Math.PI / 180) | 0;
          this.__bottomExtension = this.__topExtension = a ? 0 : Math.ceil(Math.abs(this.__offsetY) + this.__blurY);
          this.__rightExtension = this.__leftExtension = a ? 0 : Math.ceil(Math.abs(this.__offsetX) + this.__blurX);
          this.__calculateNumShaderPasses();
        },
        __calculateNumShaderPasses: function () {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses + 1;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        get_highlightAlpha: function () {
          return this.__highlightAlpha;
        },
        get_highlightColor: function () {
          return this.__highlightColor;
        },
        get_shadowAlpha: function () {
          return this.__shadowAlpha;
        },
        get_shadowColor: function () {
          return this.__shadowColor;
        },
        get_type: function () {
          return this.__type;
        },
        __class__: Ff,
        __properties__: {
          get_type: "get_type",
          get_shadowColor: "get_shadowColor",
          get_shadowAlpha: "get_shadowAlpha",
          get_highlightColor: "get_highlightColor",
          get_highlightAlpha: "get_highlightAlpha",
          get_blurY: "get_blurY",
          get_blurX: "get_blurX"
        }
      });
      function td() {
        Sa.call(this, null);
        this.parents = [];
      }
      h["flxanimate.frames.FlxAnimateFrames"] = td;
      td.__name__ = "flxanimate.frames.FlxAnimateFrames";
      td.fromTextureAtlas = function (a) {
        var b = new td();
        if (td.zip != null || Ic.extension(a) == "zip") {
          g.log.advanced("Zip Stuff isn't supported on Html5 since it can't transform bytes into an image", Aa.ERROR, true);
          return null;
        }
        var c = [];
        for (var d = 0, e = U.list("TEXT"); d < e.length;) {
          var f = e[d];
          ++d;
          if (v.startsWith(f, "" + a + "/spritemap")) {
            c.push(f);
          }
        }
        d = c;
        if (d.length > 1) {
          d.sort(function (a, b) {
            a = y.parseInt(Ic.withoutDirectory(a).charAt(9));
            b = y.parseInt(Ic.withoutDirectory(b).charAt(9));
            if (isNaN(a) || isNaN(b)) {
              return 0;
            } else {
              return a - b;
            }
          });
        }
        f = [];
        for (c = 0; c < d.length;) {
          e = d[c];
          ++c;
          e = U.getText(e);
          if (L.cca(e, 0) == 65279) {
            e = e.substring(1);
          }
          e = JSON.parse(e);
          f.push({
            image: U.getBitmapData("" + a + "/" + e.meta.image),
            json: e
          });
        }
        for (c = 0; c < f.length;) {
          var k = f[c];
          ++c;
          if (k.image == null) {
            g.log.advanced("the image called \"" + k.json.meta.image + "\" does not exist in Path " + a + ", maybe you changed the image Path somewhere else?", Aa.ERROR, true);
          } else {
            var t = g.bitmap.add(k.image);
            var l = Sa.findFrame(t);
            if (l == null) {
              l = new td();
              d = 0;
              e = k.json.ATLAS.SPRITES;
              while (d < e.length) {
                var h = e[d];
                ++d;
                l.pushFrame(td.textureAtlasHelper(t, h.SPRITE, k.json.meta));
              }
            }
            t.addFrameCollection(l);
            b.animateConcat(l);
          }
        }
        if (b.frames == []) {
          g.log.advanced("the Frames parsing couldn't parse any of the frames, it's completely empty! \n Maybe you misspelled the Path?", Aa.ERROR, true);
          return null;
        } else {
          return b;
        }
      };
      td.fromSparrow = function (a, b) {
        if (typeof a == "string" && !U.exists(a)) {
          return null;
        }
        var c = typeof a == "string" ? T.parse(U.getText(a)).firstElement() : a.firstElement();
        if (c.nodeType != T.Document && c.nodeType != T.Element) {
          throw I.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : lb.toString(c.nodeType)));
        }
        var d = c;
        if (b == null) {
          if (typeof a == "string") {
            b = Ic.directory(a) + Mb.resolve(d, "imagePath");
          } else {
            return null;
          }
        }
        b = g.bitmap.add(b);
        if (b == null) {
          return null;
        }
        a = Sa.findFrame(b);
        if (a != null) {
          return a;
        }
        a = new Sa(b);
        b = 0;
        for (d = fc.resolve(d, "SubTexture"); b < d.length;) {
          var e = d[b];
          ++b;
          var f = ec.resolve(e, "width");
          var k = Mb.resolve(e, "name");
          var t = ec.resolve(e, "frameX");
          var l = f ? Mb.resolve(e, "width") : Mb.resolve(e, "w");
          var h = f ? Mb.resolve(e, "height") : Mb.resolve(e, "h");
          var p = ec.resolve(e, "rotated") && Mb.resolve(e, "rotated") == "true";
          f = ec.resolve(e, "flipX") && Mb.resolve(e, "flipX") == "true";
          var m = ec.resolve(e, "flipY") && Mb.resolve(e, "flipY") == "true";
          var n = parseFloat(Mb.resolve(e, "x"));
          var q = parseFloat(Mb.resolve(e, "y"));
          c = parseFloat(l);
          h = parseFloat(h);
          if (h == null) {
            h = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (n == null) {
            n = 0;
          }
          l = Ia._pool.get();
          if (h == null) {
            h = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (q == null) {
            q = 0;
          }
          if (n == null) {
            n = 0;
          }
          l.x = n;
          l.y = q;
          l.width = c;
          l.height = h;
          l._inPool = false;
          q = t ? new Ia(y.parseInt(Mb.resolve(e, "frameX")), y.parseInt(Mb.resolve(e, "frameY")), y.parseInt(Mb.resolve(e, "frameWidth")), y.parseInt(Mb.resolve(e, "frameHeight"))) : new Ia(0, 0, l.width == 0 ? 1 : l.width, l.height == 0 ? 1 : l.height);
          if (l.width == 0 || l.height == 0) {
            a.addEmptyFrame(q);
          } else {
            e = p ? -90 : 0;
            c = -q.x;
            h = -q.y;
            if (h == null) {
              h = 0;
            }
            if (c == null) {
              c = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (c == null) {
              c = 0;
            }
            c = da.pool.get().set(c, h);
            c._inPool = false;
            n = q.width;
            h = q.height;
            if (h == null) {
              h = 0;
            }
            if (n == null) {
              n = 0;
            }
            if (h == null) {
              h = 0;
            }
            if (n == null) {
              n = 0;
            }
            h = da.pool.get().set(n, h);
            h._inPool = false;
            if (p && !t) {
              t = q.height;
              p = q.width;
              if (p == null) {
                p = 0;
              }
              if (t == null) {
                t = 0;
              }
              h.set_x(t);
              h.set_y(p);
            }
            a.addAtlasFrame(l, h, c, k, e, f, m);
          }
        }
        return a;
      };
      td.fromAnimateAtlas = function (a, b) {
        var c = new td();
        b = g.bitmap.add(b);
        var d = Sa.findFrame(b);
        if (d == null) {
          d = new td();
          for (var e = 0, f = a.ATLAS.SPRITES; e < f.length;) {
            var k = f[e];
            ++e;
            d.pushFrame(td.textureAtlasHelper(b, k.SPRITE, a.meta));
          }
        }
        b.addFrameCollection(d);
        c.animateConcat(d);
        if (c.frames == []) {
          g.log.advanced("the Frames parsing couldn't parse any of the frames, it's completely empty! \n Maybe you misspelled the Path?", Aa.ERROR, true);
          return null;
        } else {
          return c;
        }
      };
      td.textureAtlasHelper = function (a, b, c) {
        var d = b.rotated ? b.h : b.w;
        c = b.rotated ? b.w : b.h;
        a = new sb(a);
        a.name = b.name;
        var e = a.sourceSize;
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        e.set_x(d);
        e.set_y(c);
        a.set_frame(new Ia(b.x, b.y, b.w, b.h));
        if (b.rotated) {
          a.angle = -90;
        }
        return a;
      };
      td.texturePackerHelper = function (a, b, c) {
        var d = b.rotated;
        var e = b.sourceSize.w;
        var f = b.sourceSize.h;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        f = da.pool.get().set(e, f);
        f._inPool = false;
        var k = f;
        e = b.spriteSourceSize.x;
        f = b.spriteSourceSize.y;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        f = da.pool.get().set(e, f);
        f._inPool = false;
        e = 0;
        if (d) {
          var g = b.frame.x;
          var l = b.frame.y;
          d = b.frame.h;
          var h = b.frame.w;
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          b = Ia._pool.get();
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          b.x = g;
          b.y = l;
          b.width = d;
          b.height = h;
          b._inPool = false;
          e = -90;
        } else {
          g = b.frame.x;
          l = b.frame.y;
          d = b.frame.w;
          h = b.frame.h;
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          b = Ia._pool.get();
          if (h == null) {
            h = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (l == null) {
            l = 0;
          }
          if (g == null) {
            g = 0;
          }
          b.x = g;
          b.y = l;
          b.width = d;
          b.height = h;
          b._inPool = false;
        }
        c.addAtlasFrame(b, k, f, a, e);
      };
      td.__super__ = Sa;
      td.prototype = q(Sa.prototype, {
        animateConcat: function (a) {
          if (this.parents.indexOf(a.parent) == -1) {
            this.parents.push(a.parent);
          }
          var b = 0;
          for (a = a.frames; b < a.length;) {
            var c = a[b];
            ++b;
            this.frames.push(c);
            this.framesByName.h[c.name] = c;
          }
          return this;
        },
        __class__: td
      });
      function Ul(a) {
        if (a != null && a.get_length() == 16) {
          this.rawData = a.concat(null);
        } else {
          this.rawData = kb.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        }
      }
      h["openfl.geom.Matrix3D"] = Ul;
      Ul.__name__ = "openfl.geom.Matrix3D";
      Ul.prototype = {
        append: function (a) {
          var b = this.rawData.get(0);
          var c = this.rawData.get(4);
          var d = this.rawData.get(8);
          var e = this.rawData.get(12);
          var f = this.rawData.get(1);
          var k = this.rawData.get(5);
          var g = this.rawData.get(9);
          var l = this.rawData.get(13);
          var h = this.rawData.get(2);
          var p = this.rawData.get(6);
          var m = this.rawData.get(10);
          var n = this.rawData.get(14);
          var q = this.rawData.get(3);
          var r = this.rawData.get(7);
          var w = this.rawData.get(11);
          var u = this.rawData.get(15);
          var v = a.rawData.get(0);
          var A = a.rawData.get(4);
          var Y = a.rawData.get(8);
          var z = a.rawData.get(12);
          var y = a.rawData.get(1);
          var La = a.rawData.get(5);
          var C = a.rawData.get(9);
          var D = a.rawData.get(13);
          var E = a.rawData.get(2);
          var B = a.rawData.get(6);
          var x = a.rawData.get(10);
          var G = a.rawData.get(14);
          var I = a.rawData.get(3);
          var ha = a.rawData.get(7);
          var Ea = a.rawData.get(11);
          a = a.rawData.get(15);
          this.rawData.set(0, b * v + f * A + h * Y + q * z);
          this.rawData.set(1, b * y + f * La + h * C + q * D);
          this.rawData.set(2, b * E + f * B + h * x + q * G);
          this.rawData.set(3, b * I + f * ha + h * Ea + q * a);
          this.rawData.set(4, c * v + k * A + p * Y + r * z);
          this.rawData.set(5, c * y + k * La + p * C + r * D);
          this.rawData.set(6, c * E + k * B + p * x + r * G);
          this.rawData.set(7, c * I + k * ha + p * Ea + r * a);
          this.rawData.set(8, d * v + g * A + m * Y + w * z);
          this.rawData.set(9, d * y + g * La + m * C + w * D);
          this.rawData.set(10, d * E + g * B + m * x + w * G);
          this.rawData.set(11, d * I + g * ha + m * Ea + w * a);
          this.rawData.set(12, e * v + l * A + n * Y + u * z);
          this.rawData.set(13, e * y + l * La + n * C + u * D);
          this.rawData.set(14, e * E + l * B + n * x + u * G);
          this.rawData.set(15, e * I + l * ha + n * Ea + u * a);
        },
        appendTranslation: function (a, b, c) {
          var d = this.rawData;
          d.set(12, d.get(12) + a);
          d = this.rawData;
          d.set(13, d.get(13) + b);
          d = this.rawData;
          d.set(14, d.get(14) + c);
        },
        copyRawDataFrom: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = 0;
          }
          if (c) {
            this.transpose();
          }
          for (var d = 0, e = a.get_length() - b; d < e;) {
            var f = d++;
            this.rawData.set(f, a.get(f + b));
          }
          if (c) {
            this.transpose();
          }
        },
        identity: function () {
          this.rawData = kb.toFloatVector(null, null, null, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        },
        transpose: function () {
          var a = this.rawData.copy();
          this.rawData.set(1, a.get(4));
          this.rawData.set(2, a.get(8));
          this.rawData.set(3, a.get(12));
          this.rawData.set(4, a.get(1));
          this.rawData.set(6, a.get(9));
          this.rawData.set(7, a.get(13));
          this.rawData.set(8, a.get(2));
          this.rawData.set(9, a.get(6));
          this.rawData.set(11, a.get(14));
          this.rawData.set(12, a.get(3));
          this.rawData.set(13, a.get(7));
          this.rawData.set(14, a.get(11));
        },
        __class__: Ul
      };
      function Fj() {}
      h["flxanimate.motion.AdjustColor"] = Fj;
      Fj.__name__ = "flxanimate.motion.AdjustColor";
      Fj.prototype = {
        set_brightness: function (a) {
          if (this.m_brightnessMatrix == null) {
            this.m_brightnessMatrix = new Fe();
          }
          if (a != 0) {
            this.m_brightnessMatrix.setBrightnessMatrix(a);
          }
          return a;
        },
        set_contrast: function (a) {
          var b = a > 0 ? Fj.s_arrayOfDeltaIndex[a | 0] * 127 + 127 : a / 100 * 127 + 127;
          if (this.m_contrastMatrix == null) {
            this.m_contrastMatrix = new Fe();
          }
          this.m_contrastMatrix.setContrastMatrix(b);
          return a;
        },
        set_saturation: function (a) {
          var b = a > 0 ? 1 + a * 3 / 100 : a / 100 + 1;
          if (this.m_saturationMatrix == null) {
            this.m_saturationMatrix = new Fe();
          }
          this.m_saturationMatrix.setSaturationMatrix(b);
          return a;
        },
        set_hue: function (a) {
          if (this.m_hueMatrix == null) {
            this.m_hueMatrix = new Fe();
          }
          if (a != 0) {
            this.m_hueMatrix.setHueMatrix(a * Math.PI / 180);
          }
          return a;
        },
        allValuesAreSet: function () {
          return [this.m_brightnessMatrix, this.m_contrastMatrix, this.m_saturationMatrix, this.m_hueMatrix].indexOf(null) == -1;
        },
        calculateFinalFlatArray: function () {
          if (this.calculateFinalMatrix()) {
            return this.m_finalMatrix.getFlatArray();
          } else {
            return null;
          }
        },
        calculateFinalMatrix: function () {
          if (!this.allValuesAreSet()) {
            return false;
          }
          this.m_finalMatrix = new Fe();
          this.m_finalMatrix.multiply(this.m_brightnessMatrix);
          this.m_finalMatrix.multiply(this.m_contrastMatrix);
          this.m_finalMatrix.multiply(this.m_saturationMatrix);
          this.m_finalMatrix.multiply(this.m_hueMatrix);
          return true;
        },
        __class__: Fj,
        __properties__: {
          set_hue: "set_hue",
          set_saturation: "set_saturation",
          set_contrast: "set_contrast",
          set_brightness: "set_brightness"
        }
      };
      function Hf(a, b) {
        this.create(a, b);
      }
      h["flxanimate.motion.DynamicMatrix"] = Hf;
      Hf.__name__ = "flxanimate.motion.DynamicMatrix";
      Hf.prototype = {
        create: function (a, b) {
          if (!(a <= 0) && !(b <= 0)) {
            this.m_width = a;
            this.m_height = b;
            this.m_matrix = kb.toNullVector(null, b, true);
            for (var c = 0; c < b;) {
              var d = c++;
              this.m_matrix.set(d, kb.toFloatVector(null, a, true));
              for (var e = 0, f = a; e < f;) {
                var k = e++;
                this.m_matrix.get(d).set(k, 0);
              }
            }
          }
        },
        destroy: function () {
          this.m_matrix = null;
        },
        getWidth: function () {
          return this.m_width;
        },
        getHeight: function () {
          return this.m_height;
        },
        getValue: function (a, b) {
          var c = 0;
          if (a >= 0 && a < this.m_height && b >= 0 && b <= this.m_width) {
            c = this.m_matrix.get(a).get(b);
          }
          return c;
        },
        setValue: function (a, b, c) {
          if (a >= 0 && a < this.m_height && b >= 0 && b <= this.m_width) {
            this.m_matrix.get(a).set(b, c);
          }
        },
        loadIdentity: function () {
          if (this.m_matrix != null) {
            for (var a = 0, b = this.m_height; a < b;) {
              var c = a++;
              for (var d = 0, e = this.m_width; d < e;) {
                var f = d++;
                this.m_matrix.get(c).set(f, c == f ? 1 : 0);
              }
            }
          }
        },
        multiply: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (this.m_matrix == null || a == null) {
            return false;
          }
          var c = a.getHeight();
          var d = a.getWidth();
          var e = b == Hf.MATRIX_ORDER_APPEND ? d : a.getWidth();
          b = b == Hf.MATRIX_ORDER_APPEND ? c : this.m_height;
          if (e != b) {
            return false;
          }
          var f = new Hf(e, b);
          for (var k = 0, g = b; k < g;) {
            var l = k++;
            for (var h = 0, p = e; h < p;) {
              var m = h++;
              var n = 0;
              for (var q = 0, r = 0; q < Math.max(this.m_height, c) && r < Math.max(this.m_width, d);) {
                n += a.getValue(q, m) * this.m_matrix.get(l).get(r);
                ++q;
                ++r;
              }
              f.setValue(l, m, n);
            }
          }
          this.destroy();
          this.create(e, b);
          k = 0;
          for (g = c; k < g;) {
            l = k++;
            h = 0;
            p = this.m_width;
            while (h < p) {
              m = h++;
              this.m_matrix.get(l).set(m, f.getValue(l, m));
            }
          }
          return true;
        },
        multiplyNumber: function (a) {
          if (this.m_matrix == null) {
            return false;
          }
          for (var b = 0, c = this.m_height; b < c;) {
            var d = b++;
            for (var e = 0, f = this.m_width; e < f;) {
              var k = e++;
              var g = this.m_matrix.get(d);
              g.set(k, g.get(k) * a);
            }
          }
          return true;
        },
        add: function (a) {
          if (this.m_matrix == null || a == null) {
            return false;
          }
          var b = a.getHeight();
          var c = a.getWidth();
          if (this.m_width != c || b != this.m_height) {
            return false;
          }
          b = 0;
          for (c = this.m_height; b < c;) {
            var d = b++;
            for (var e = 0, f = this.m_width; e < f;) {
              var k = e++;
              var g = k;
              var l = this.m_matrix.get(d);
              l.set(g, l.get(g) + a.getValue(d, k));
            }
          }
          return true;
        },
        __class__: Hf
      };
      function Fe() {
        this.create(5, 5);
        this.loadIdentity();
      }
      h["flxanimate.motion.ColorMatrix"] = Fe;
      Fe.__name__ = "flxanimate.motion.ColorMatrix";
      Fe.__super__ = Hf;
      Fe.prototype = q(Hf.prototype, {
        setBrightnessMatrix: function (a) {
          if (this.m_matrix != null) {
            this.m_matrix.get(0).set(4, a);
            this.m_matrix.get(1).set(4, a);
            this.m_matrix.get(2).set(4, a);
          }
        },
        setContrastMatrix: function (a) {
          if (this.m_matrix != null) {
            var b = (127 - a) * 0.5;
            a /= 127;
            this.m_matrix.get(0).set(0, a);
            this.m_matrix.get(1).set(1, a);
            this.m_matrix.get(2).set(2, a);
            this.setBrightnessMatrix(b);
          }
        },
        setSaturationMatrix: function (a) {
          if (this.m_matrix != null) {
            var b = 1 - a;
            var c = b * Fe.lumR;
            this.m_matrix.get(0).set(0, c + a);
            this.m_matrix.get(1).set(0, c);
            this.m_matrix.get(2).set(0, c);
            c = b * Fe.lumG;
            this.m_matrix.get(0).set(1, c);
            this.m_matrix.get(1).set(1, c + a);
            this.m_matrix.get(2).set(1, c);
            c = b * Fe.lumB;
            this.m_matrix.get(0).set(2, c);
            this.m_matrix.get(1).set(2, c);
            this.m_matrix.get(2).set(2, c + a);
          }
        },
        setHueMatrix: function (a) {
          if (this.m_matrix != null) {
            this.loadIdentity();
            var b = new Hf(3, 3);
            var c = new Hf(3, 3);
            var d = new Hf(3, 3);
            var e = Math.cos(a);
            a = Math.sin(a);
            b.setValue(0, 0, 0.213);
            b.setValue(1, 0, 0.213);
            b.setValue(2, 0, 0.213);
            b.setValue(0, 1, 0.715);
            b.setValue(1, 1, 0.715);
            b.setValue(2, 1, 0.715);
            b.setValue(0, 2, 0.072);
            b.setValue(1, 2, 0.072);
            b.setValue(2, 2, 0.072);
            c.setValue(0, 0, 0.787);
            c.setValue(1, 0, -0.213);
            c.setValue(2, 0, -0.213);
            c.setValue(0, 1, -0.715);
            c.setValue(1, 1, 0.28500000000000003);
            c.setValue(2, 1, -0.715);
            c.setValue(0, 2, -0.072);
            c.setValue(1, 2, -0.072);
            c.setValue(2, 2, 0.928);
            c.multiplyNumber(e);
            d.setValue(0, 0, -0.213);
            d.setValue(1, 0, 0.14300000000000002);
            d.setValue(2, 0, -0.787);
            d.setValue(0, 1, -0.715);
            d.setValue(1, 1, 0.14);
            d.setValue(2, 1, 0.715);
            d.setValue(0, 2, 0.928);
            d.setValue(1, 2, -0.283);
            d.setValue(2, 2, 0.072);
            d.multiplyNumber(a);
            b.add(c);
            b.add(d);
            this.m_matrix.get(0).set(0, b.getValue(0, 0));
            this.m_matrix.get(0).set(1, b.getValue(0, 1));
            this.m_matrix.get(0).set(2, b.getValue(0, 2));
            this.m_matrix.get(1).set(0, b.getValue(1, 0));
            this.m_matrix.get(1).set(1, b.getValue(1, 1));
            this.m_matrix.get(1).set(2, b.getValue(1, 2));
            this.m_matrix.get(2).set(0, b.getValue(2, 0));
            this.m_matrix.get(2).set(1, b.getValue(2, 1));
            this.m_matrix.get(2).set(2, b.getValue(2, 2));
          }
        },
        getFlatArray: function () {
          if (this.m_matrix == null) {
            return null;
          }
          var a = 0;
          var b = [];
          b[a] = this.m_matrix.get(0).get(0);
          ++a;
          b[a] = this.m_matrix.get(0).get(1);
          ++a;
          b[a] = this.m_matrix.get(0).get(2);
          ++a;
          b[a] = this.m_matrix.get(0).get(3);
          ++a;
          b[a] = this.m_matrix.get(0).get(4);
          ++a;
          b[a] = this.m_matrix.get(1).get(0);
          ++a;
          b[a] = this.m_matrix.get(1).get(1);
          ++a;
          b[a] = this.m_matrix.get(1).get(2);
          ++a;
          b[a] = this.m_matrix.get(1).get(3);
          ++a;
          b[a] = this.m_matrix.get(1).get(4);
          ++a;
          b[a] = this.m_matrix.get(2).get(0);
          ++a;
          b[a] = this.m_matrix.get(2).get(1);
          ++a;
          b[a] = this.m_matrix.get(2).get(2);
          ++a;
          b[a] = this.m_matrix.get(2).get(3);
          ++a;
          b[a] = this.m_matrix.get(2).get(4);
          ++a;
          b[a] = this.m_matrix.get(3).get(0);
          ++a;
          b[a] = this.m_matrix.get(3).get(1);
          ++a;
          b[a] = this.m_matrix.get(3).get(2);
          ++a;
          b[a] = this.m_matrix.get(3).get(3);
          ++a;
          b[a] = this.m_matrix.get(3).get(4);
          return b;
        },
        __class__: Fe
      });
      function Ml() {}
      h["flxanimate.zip.Zip"] = Ml;
      Ml.__name__ = "flxanimate.zip.Zip";
      Ml.readZip = function (a) {
        return new oi(new Gj(a)).read();
      };
      Ml.unzip = function (a) {
        for (var b = a.h; b != null;) {
          var c = b.item;
          b = b.next;
          if (c.compressed) {
            c.data = io.decompress(c.data);
            c.compressed = false;
            c.dataSize = c.fileSize;
          }
        }
        return a;
      };
      var If = w["haxe.StackItem"] = {
        __ename__: "haxe.StackItem",
        __constructs__: null,
        CFunction: {
          _hx_name: "CFunction",
          _hx_index: 0,
          __enum__: "haxe.StackItem",
          toString: p
        },
        Module: (r = function (a) {
          return {
            _hx_index: 1,
            m: a,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, r._hx_name = "Module", r.__params__ = ["m"], r),
        FilePos: (r = function (a, b, c, d) {
          return {
            _hx_index: 2,
            s: a,
            file: b,
            line: c,
            column: d,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, r._hx_name = "FilePos", r.__params__ = ["s", "file", "line", "column"], r),
        Method: (r = function (a, b) {
          return {
            _hx_index: 3,
            classname: a,
            method: b,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, r._hx_name = "Method", r.__params__ = ["classname", "method"], r),
        LocalFunction: (r = function (a) {
          return {
            _hx_index: 4,
            v: a,
            __enum__: "haxe.StackItem",
            toString: p
          };
        }, r._hx_name = "LocalFunction", r.__params__ = ["v"], r)
      };
      If.__constructs__ = [If.CFunction, If.Module, If.FilePos, If.Method, If.LocalFunction];
      var Wg = {
        callStack: function () {
          return Oa.toHaxe(Oa.callStack());
        },
        exceptionStack: function (a) {
          if (a == null) {
            a = false;
          }
          var b = Oa.toHaxe(Oa.exceptionStack());
          if (a) {
            return b;
          } else {
            return Wg.subtract(b, Wg.callStack());
          }
        },
        toString: function (a) {
          var b = new We();
          for (var c = 0; c < a.length;) {
            var d = a[c];
            ++c;
            b.b += "\nCalled from ";
            Wg.itemToString(b, d);
          }
          return b.b;
        },
        subtract: function (a, b) {
          var c = -1;
          for (var d = -1; ++d < a.length;) {
            for (var e = 0, f = b.length; e < f;) {
              var k = e++;
              if (Wg.equalItems(a[d], b[k])) {
                if (c < 0) {
                  c = d;
                }
                ++d;
                if (d >= a.length) {
                  break;
                }
              } else {
                c = -1;
              }
            }
            if (c >= 0) {
              break;
            }
          }
          if (c >= 0) {
            return a.slice(0, c);
          } else {
            return a;
          }
        },
        equalItems: function (a, b) {
          if (a == null) {
            if (b == null) {
              return true;
            } else {
              return false;
            }
          }
          switch (a._hx_index) {
            case 0:
              if (b == null) {
                return false;
              } else if (b._hx_index == 0) {
                return true;
              } else {
                return false;
              }
            case 1:
              if (b == null) {
                return false;
              } else if (b._hx_index == 1) {
                return a.m == b.m;
              } else {
                return false;
              }
            case 2:
              if (b == null) {
                return false;
              }
              if (b._hx_index == 2) {
                var c = b.s;
                var d = b.line;
                var e = b.column;
                var f = a.column;
                var k = a.line;
                var g = a.s;
                if (a.file == b.file && k == d && f == e) {
                  return Wg.equalItems(g, c);
                } else {
                  return false;
                }
              }
              return false;
            case 3:
              if (b == null) {
                return false;
              } else if (b._hx_index == 3) {
                c = b.method;
                d = a.method;
                if (a.classname == b.classname) {
                  return d == c;
                } else {
                  return false;
                }
              } else {
                return false;
              }
            case 4:
              if (b == null) {
                return false;
              } else if (b._hx_index == 4) {
                return a.v == b.v;
              } else {
                return false;
              }
          }
        },
        itemToString: function (a, b) {
          switch (b._hx_index) {
            case 0:
              a.b += "a C function";
              break;
            case 1:
              b = b.m;
              a.b += "module ";
              a.b += b == null ? "null" : "" + b;
              break;
            case 2:
              var c = b.s;
              var d = b.file;
              var e = b.line;
              b = b.column;
              if (c != null) {
                Wg.itemToString(a, c);
                a.b += " (";
              }
              a.b += d == null ? "null" : "" + d;
              a.b += " line ";
              a.b += e == null ? "null" : "" + e;
              if (b != null) {
                a.b += " column ";
                a.b += b == null ? "null" : "" + b;
              }
              if (c != null) {
                a.b += ")";
              }
              break;
            case 3:
              c = b.classname;
              b = b.method;
              a.b += y.string(c == null ? "<unknown>" : c);
              a.b += ".";
              a.b += b == null ? "null" : "" + b;
              break;
            case 4:
              b = b.v;
              a.b += "local function #";
              a.b += b == null ? "null" : "" + b;
          }
        }
      };
      function I(a, b, c) {
        Error.call(this, a);
        this.message = a;
        this.__previousException = b;
        this.__nativeException = c ?? this;
        this.__skipStack = 0;
        a = Error.prepareStackTrace;
        Error.prepareStackTrace = function (a) {
          return a.stack;
        };
        if (c instanceof Error) {
          this.stack = c.stack;
        } else {
          c = null;
          if (Error.captureStackTrace) {
            Error.captureStackTrace(this, I);
            c = this;
          } else {
            c = Error();
            if (typeof c.stack == "undefined") {
              try {
                throw c;
              } catch (d) {}
              this.__skipStack++;
            }
          }
          this.stack = c.stack;
        }
        Error.prepareStackTrace = a;
      }
      h["haxe.Exception"] = I;
      I.__name__ = "haxe.Exception";
      I.caught = function (a) {
        if (a instanceof I) {
          return a;
        } else if (a instanceof Error) {
          return new I(a.message, null, a);
        } else {
          return new Hj(a, null, a);
        }
      };
      I.thrown = function (a) {
        if (a instanceof I) {
          return a.get_native();
        }
        if (a instanceof Error) {
          return a;
        }
        a = new Hj(a);
        a.__skipStack++;
        return a;
      };
      I.__super__ = Error;
      I.prototype = q(Error.prototype, {
        unwrap: function () {
          return this.__nativeException;
        },
        toString: function () {
          return this.get_message();
        },
        __shiftStack: function () {
          this.__skipStack++;
        },
        get_message: function () {
          return this.message;
        },
        get_native: function () {
          return this.__nativeException;
        },
        get_stack: function () {
          var a = this.__exceptionStack;
          if (a == null) {
            a = Oa.toHaxe(Oa.normalize(this.stack), this.__skipStack);
            this.setProperty("__exceptionStack", a);
          }
          return a;
        },
        setProperty: function (a, b) {
          try {
            Object.defineProperty(this, a, {
              value: b
            });
          } catch (c) {
            this[a] = b;
          }
        },
        __class__: I,
        __properties__: {
          get_native: "get_native",
          get_stack: "get_stack",
          get_message: "get_message"
        }
      });
      function xb(a, b) {
        this.high = a;
        this.low = b;
      }
      h["haxe._Int64.___Int64"] = xb;
      xb.__name__ = "haxe._Int64.___Int64";
      xb.prototype = {
        __class__: xb
      };
      function Oa() {}
      h["haxe.NativeStackTrace"] = Oa;
      Oa.__name__ = "haxe.NativeStackTrace";
      Oa.saveStack = function (a) {
        Oa.lastError = a;
      };
      Oa.callStack = function () {
        var a = Error("");
        var b = Oa.tryHaxeStack(a);
        if (typeof b == "undefined") {
          try {
            throw a;
          } catch (c) {}
          b = a.stack;
        }
        return Oa.normalize(b, 2);
      };
      Oa.exceptionStack = function () {
        return Oa.normalize(Oa.tryHaxeStack(Oa.lastError));
      };
      Oa.toHaxe = function (a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          return [];
        }
        if (typeof a == "string") {
          a = a.split("\n");
          if (a[0] == "Error") {
            a.shift();
          }
          var c = [];
          for (var d = 0, e = a.length; d < e;) {
            var f = d++;
            if (!(b > f)) {
              var k = a[f];
              f = k.match(/^    at ([$A-Za-z0-9_. ]+) \(([^)]+):([0-9]+):([0-9]+)\)$/);
              if (f != null) {
                k = f[1].split(".");
                if (k[0] == "$hxClasses") {
                  k.shift();
                }
                var g = k.pop();
                var l = f[2];
                var h = y.parseInt(f[3]);
                f = y.parseInt(f[4]);
                c.push(If.FilePos(g == "Anonymous function" ? If.LocalFunction() : g == "Global code" ? null : If.Method(k.join("."), g), l, h, f));
              } else {
                c.push(If.Module(v.trim(k)));
              }
            }
          }
          return c;
        }
        if (b > 0 && Array.isArray(a)) {
          return a.slice(b);
        } else {
          return a;
        }
      };
      Oa.tryHaxeStack = function (a) {
        if (a == null) {
          return [];
        }
        var b = Error.prepareStackTrace;
        Error.prepareStackTrace = Oa.prepareHxStackTrace;
        a = a.stack;
        Error.prepareStackTrace = b;
        return a;
      };
      Oa.prepareHxStackTrace = function (a, b) {
        a = [];
        for (var c = 0; c < b.length;) {
          var d = b[c];
          ++c;
          if (Oa.wrapCallSite != null) {
            d = Oa.wrapCallSite(d);
          }
          var e = null;
          var f = d.getFunctionName();
          if (f != null) {
            var k = f.lastIndexOf(".");
            if (k >= 0) {
              e = f.substring(0, k);
              f = f.substring(k + 1);
              e = If.Method(e, f);
            } else {
              e = If.Method(null, f);
            }
          }
          f = d.getFileName();
          k = f == null ? -1 : f.indexOf("file:");
          if (Oa.wrapCallSite != null && k > 0) {
            f = f.substring(k + 6);
          }
          a.push(If.FilePos(e, f, d.getLineNumber(), d.getColumnNumber()));
        }
        return a;
      };
      Oa.normalize = function (a, b) {
        if (b == null) {
          b = 0;
        }
        if (Array.isArray(a) && b > 0) {
          return a.slice(b);
        }
        if (typeof a == "string") {
          switch (a.substring(0, 6)) {
            case "Error\n":
            case "Error:":
              ++b;
          }
          return Oa.skipLines(a, b);
        }
        return a;
      };
      Oa.skipLines = function (a, b, c) {
        if (c == null) {
          c = 0;
        }
        if (b > 0) {
          c = a.indexOf("\n", c);
          if (c < 0) {
            return "";
          } else {
            return Oa.skipLines(a, --b, c + 1);
          }
        } else {
          return a.substring(c);
        }
      };
      function $e() {}
      h["haxe.Resource"] = $e;
      $e.__name__ = "haxe.Resource";
      $e.getString = function (a) {
        for (var b = 0, c = $e.content; b < c.length;) {
          var d = c[b];
          ++b;
          if (d.name == a) {
            return d.str ?? pi.decode(d.data).toString();
          }
        }
        return null;
      };
      function le() {
        this.buf = new We();
        this.cache = [];
        this.useCache = le.USE_CACHE;
        this.useEnumIndex = le.USE_ENUM_INDEX;
        this.shash = new xa();
        this.scount = 0;
      }
      h["haxe.Serializer"] = le;
      le.__name__ = "haxe.Serializer";
      le.run = function (a) {
        var b = new le();
        b.serialize(a);
        return b.toString();
      };
      le.prototype = {
        toString: function () {
          return this.buf.b;
        },
        serializeString: function (a) {
          var b = this.shash.h[a];
          if (b != null) {
            this.buf.b += "R";
            this.buf.b += b == null ? "null" : "" + b;
          } else {
            this.shash.h[a] = this.scount++;
            this.buf.b += "y";
            a = encodeURIComponent(a);
            this.buf.b += y.string(a.length);
            this.buf.b += ":";
            this.buf.b += a == null ? "null" : "" + a;
          }
        },
        serializeRef: function (a) {
          var b = typeof a;
          for (var c = 0, d = this.cache.length; c < d;) {
            var e = c++;
            var f = this.cache[e];
            if (typeof f == b && f == a) {
              this.buf.b += "r";
              this.buf.b += e == null ? "null" : "" + e;
              return true;
            }
          }
          this.cache.push(a);
          return false;
        },
        serializeFields: function (a) {
          for (var b = 0, c = ha.fields(a); b < c.length;) {
            var d = c[b];
            ++b;
            this.serializeString(d);
            this.serialize(ha.field(a, d));
          }
          this.buf.b += "g";
        },
        serialize: function (a) {
          var b = yb.typeof(a);
          switch (b._hx_index) {
            case 0:
              this.buf.b += "n";
              break;
            case 1:
              if (a == 0) {
                this.buf.b += "z";
                break;
              }
              this.buf.b += "i";
              this.buf.b += a == null ? "null" : "" + a;
              break;
            case 2:
              if (isNaN(a)) {
                this.buf.b += "k";
              } else if (isFinite(a)) {
                this.buf.b += "d";
                this.buf.b += a == null ? "null" : "" + a;
              } else {
                this.buf.b += a < 0 ? "m" : "p";
              }
              break;
            case 3:
              this.buf.b += a ? "t" : "f";
              break;
            case 4:
              if (wa.__instanceof(a, aj)) {
                a = a.__name__;
                this.buf.b += "A";
                this.serializeString(a);
              } else if (wa.__instanceof(a, yp)) {
                this.buf.b += "B";
                this.serializeString(a.__ename__);
              } else if (!this.useCache || !this.serializeRef(a)) {
                this.buf.b += "o";
                this.serializeFields(a);
              }
              break;
            case 5:
              throw I.thrown("Cannot serialize function");
            case 6:
              b = b.c;
              if (b == String) {
                this.serializeString(a);
                break;
              }
              if (this.useCache && this.serializeRef(a)) {
                break;
              }
              switch (b) {
                case Array:
                  var c = 0;
                  this.buf.b += "a";
                  for (var d = 0, e = a.length; d < e;) {
                    b = d++;
                    if (a[b] == null) {
                      ++c;
                    } else {
                      if (c > 0) {
                        if (c == 1) {
                          this.buf.b += "n";
                        } else {
                          this.buf.b += "u";
                          this.buf.b += c == null ? "null" : "" + c;
                        }
                        c = 0;
                      }
                      this.serialize(a[b]);
                    }
                  }
                  if (c > 0) {
                    if (c == 1) {
                      this.buf.b += "n";
                    } else {
                      this.buf.b += "u";
                      this.buf.b += c == null ? "null" : "" + c;
                    }
                  }
                  this.buf.b += "h";
                  break;
                case Date:
                  this.buf.b += "v";
                  this.buf.b += y.string(a.getTime());
                  break;
                case Ac:
                  this.buf.b += "q";
                  for (b = a.keys(); b.hasNext();) {
                    c = b.next();
                    this.buf.b += ":";
                    this.buf.b += c == null ? "null" : "" + c;
                    this.serialize(a.h[c]);
                  }
                  this.buf.b += "h";
                  break;
                case mb:
                  this.buf.b += "l";
                  for (a = a.h; a != null;) {
                    b = a.item;
                    a = a.next;
                    this.serialize(b);
                  }
                  this.buf.b += "h";
                  break;
                case ma:
                  this.buf.b += "M";
                  for (b = a.keys(); b.hasNext();) {
                    c = b.next();
                    var f = ha.field(c, "__id__");
                    ha.deleteField(c, "__id__");
                    this.serialize(c);
                    c.__id__ = f;
                    this.serialize(a.h[c.__id__]);
                  }
                  this.buf.b += "h";
                  break;
                case xa:
                  this.buf.b += "b";
                  c = Object.keys(a.h);
                  f = c.length;
                  for (d = 0; d < f;) {
                    b = c[d++];
                    this.serializeString(b);
                    this.serialize(a.h[b]);
                  }
                  this.buf.b += "h";
                  break;
                case ac:
                  this.buf.b += "s";
                  this.buf.b += y.string(Math.ceil(a.length * 8 / 6));
                  this.buf.b += ":";
                  b = 0;
                  c = a.length - 2;
                  f = le.BASE64_CODES;
                  if (f == null) {
                    f = Array(le.BASE64.length);
                    d = 0;
                    for (e = le.BASE64.length; d < e;) {
                      var k = d++;
                      f[k] = L.cca(le.BASE64, k);
                    }
                    le.BASE64_CODES = f;
                  }
                  while (b < c) {
                    d = a.b[b++];
                    e = a.b[b++];
                    k = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[(d << 4 | e >> 4) & 63]);
                    this.buf.b += String.fromCodePoint(f[(e << 2 | k >> 6) & 63]);
                    this.buf.b += String.fromCodePoint(f[k & 63]);
                  }
                  if (b == c) {
                    d = a.b[b++];
                    e = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[(d << 4 | e >> 4) & 63]);
                    this.buf.b += String.fromCodePoint(f[e << 2 & 63]);
                  } else if (b == c + 1) {
                    d = a.b[b++];
                    this.buf.b += String.fromCodePoint(f[d >> 2]);
                    this.buf.b += String.fromCodePoint(f[d << 4 & 63]);
                  }
                  break;
                default:
                  if (this.useCache) {
                    this.cache.pop();
                  }
                  if (a.hxSerialize != null) {
                    this.buf.b += "C";
                    this.serializeString(b.__name__);
                    if (this.useCache) {
                      this.cache.push(a);
                    }
                    a.hxSerialize(this);
                    this.buf.b += "g";
                  } else {
                    this.buf.b += "c";
                    this.serializeString(b.__name__);
                    if (this.useCache) {
                      this.cache.push(a);
                    }
                    this.serializeFields(a);
                  }
              }
              break;
            case 7:
              b = b.e;
              if (this.useCache) {
                if (this.serializeRef(a)) {
                  break;
                }
                this.cache.pop();
              }
              this.buf.b += y.string(this.useEnumIndex ? "j" : "w");
              this.serializeString(b.__ename__);
              if (this.useEnumIndex) {
                this.buf.b += ":";
                this.buf.b += y.string(a._hx_index);
              } else {
                b = a;
                this.serializeString(w[b.__enum__].__constructs__[b._hx_index]._hx_name);
              }
              this.buf.b += ":";
              c = yb.enumParameters(a);
              this.buf.b += y.string(c.length);
              for (b = 0; b < c.length;) {
                f = c[b];
                ++b;
                this.serialize(f);
              }
              if (this.useCache) {
                this.cache.push(a);
              }
              break;
            default:
              throw I.thrown("Cannot serialize " + y.string(a));
          }
        },
        __class__: le
      };
      function jg(a) {
        var b = this;
        this.id = setInterval(function () {
          b.run();
        }, a);
      }
      h["haxe.Timer"] = jg;
      jg.__name__ = "haxe.Timer";
      jg.delay = function (a, b) {
        var c = new jg(b);
        c.run = function () {
          c.stop();
          a();
        };
        return c;
      };
      jg.prototype = {
        stop: function () {
          if (this.id != null) {
            clearInterval(this.id);
            this.id = null;
          }
        },
        run: function () {},
        __class__: jg
      };
      function Vl() {}
      h["haxe._Unserializer.DefaultResolver"] = Vl;
      Vl.__name__ = "haxe._Unserializer.DefaultResolver";
      Vl.prototype = {
        resolveClass: function (a) {
          return h[a];
        },
        resolveEnum: function (a) {
          return w[a];
        },
        __class__: Vl
      };
      function Zd(a) {
        this.buf = a;
        this.length = this.buf.length;
        this.pos = 0;
        this.scache = [];
        this.cache = [];
        a = Zd.DEFAULT_RESOLVER;
        if (a == null) {
          a = new Vl();
          Zd.DEFAULT_RESOLVER = a;
        }
        this.resolver = a;
      }
      h["haxe.Unserializer"] = Zd;
      Zd.__name__ = "haxe.Unserializer";
      Zd.initCodes = function () {
        var a = [];
        for (var b = 0, c = Zd.BASE64.length; b < c;) {
          var d = b++;
          a[Zd.BASE64.charCodeAt(d)] = d;
        }
        return a;
      };
      Zd.run = function (a) {
        return new Zd(a).unserialize();
      };
      Zd.prototype = {
        setResolver: function (a) {
          if (a == null) {
            if (qi.instance == null) {
              qi.instance = new qi();
            }
            this.resolver = qi.instance;
          } else {
            this.resolver = a;
          }
        },
        readDigits: function () {
          var a = 0;
          var b = false;
          var c = this.pos;
          while (true) {
            var d = this.buf.charCodeAt(this.pos);
            if (d != d) {
              break;
            }
            if (d == 45) {
              if (this.pos != c) {
                break;
              }
              b = true;
            } else {
              if (d < 48 || d > 57) {
                break;
              }
              a = a * 10 + (d - 48);
            }
            this.pos++;
          }
          if (b) {
            a *= -1;
          }
          return a;
        },
        readFloat: function () {
          var a = this.pos;
          while (true) {
            var b = this.buf.charCodeAt(this.pos);
            if (b != b) {
              break;
            }
            if (b >= 43 && b < 58 || b == 101 || b == 69) {
              this.pos++;
            } else {
              break;
            }
          }
          return parseFloat(L.substr(this.buf, a, this.pos - a));
        },
        unserializeObject: function (a) {
          while (true) {
            if (this.pos >= this.length) {
              throw I.thrown("Invalid object");
            }
            if (this.buf.charCodeAt(this.pos) == 103) {
              break;
            }
            var b = this.unserialize();
            if (typeof b != "string") {
              throw I.thrown("Invalid object key");
            }
            var c = this.unserialize();
            a[b] = c;
          }
          this.pos++;
        },
        unserializeEnum: function (a, b) {
          if (this.buf.charCodeAt(this.pos++) != 58) {
            throw I.thrown("Invalid enum format");
          }
          var c = this.readDigits();
          if (c == 0) {
            return yb.createEnum(a, b);
          }
          var d = [];
          while (c-- > 0) {
            d.push(this.unserialize());
          }
          return yb.createEnum(a, b, d);
        },
        unserialize: function () {
          switch (this.buf.charCodeAt(this.pos++)) {
            case 65:
              var a = this.unserialize();
              var b = this.resolver.resolveClass(a);
              if (b == null) {
                throw I.thrown("Class not found " + a);
              }
              return b;
            case 66:
              a = this.unserialize();
              b = this.resolver.resolveEnum(a);
              if (b == null) {
                throw I.thrown("Enum not found " + a);
              }
              return b;
            case 67:
              a = this.unserialize();
              b = this.resolver.resolveClass(a);
              if (b == null) {
                throw I.thrown("Class not found " + a);
              }
              b = Object.create(b.prototype);
              this.cache.push(b);
              b.hxUnserialize(this);
              if (this.buf.charCodeAt(this.pos++) != 103) {
                throw I.thrown("Invalid custom data");
              }
              return b;
            case 77:
              a = new ma();
              this.cache.push(a);
              var c;
              while (this.buf.charCodeAt(this.pos) != 104) {
                b = this.unserialize();
                a.set(b, this.unserialize());
              }
              this.pos++;
              return a;
            case 82:
              a = this.readDigits();
              if (a < 0 || a >= this.scache.length) {
                throw I.thrown("Invalid string reference");
              }
              return this.scache[a];
            case 97:
              b = [];
              for (this.cache.push(b);;) {
                c = this.buf.charCodeAt(this.pos);
                if (c == 104) {
                  this.pos++;
                  break;
                }
                if (c == 117) {
                  this.pos++;
                  a = this.readDigits();
                  b[b.length + a - 1] = null;
                } else {
                  b.push(this.unserialize());
                }
              }
              return b;
            case 98:
              a = new xa();
              for (this.cache.push(a); this.buf.charCodeAt(this.pos) != 104;) {
                b = this.unserialize();
                c = this.unserialize();
                a.h[b] = c;
              }
              this.pos++;
              return a;
            case 99:
              a = this.unserialize();
              b = this.resolver.resolveClass(a);
              if (b == null) {
                throw I.thrown("Class not found " + a);
              }
              b = Object.create(b.prototype);
              this.cache.push(b);
              this.unserializeObject(b);
              return b;
            case 100:
              return this.readFloat();
            case 102:
              return false;
            case 105:
              return this.readDigits();
            case 106:
              a = this.unserialize();
              c = this.resolver.resolveEnum(a);
              if (c == null) {
                throw I.thrown("Enum not found " + a);
              }
              this.pos++;
              var d = this.readDigits();
              var e = c.__constructs__;
              var f = Array(e.length);
              for (var k = 0, g = e.length; k < g;) {
                b = k++;
                f[b] = e[b]._hx_name;
              }
              b = f[d];
              if (b == null) {
                throw I.thrown("Unknown enum index " + a + "@" + d);
              }
              b = this.unserializeEnum(c, b);
              this.cache.push(b);
              return b;
            case 107:
              return NaN;
            case 108:
              b = new mb();
              for (this.cache.push(b); this.buf.charCodeAt(this.pos) != 104;) {
                b.add(this.unserialize());
              }
              this.pos++;
              return b;
            case 109:
              return -Infinity;
            case 110:
              return null;
            case 111:
              b = {};
              this.cache.push(b);
              this.unserializeObject(b);
              return b;
            case 112:
              return Infinity;
            case 113:
              a = new Ac();
              this.cache.push(a);
              for (c = this.buf.charCodeAt(this.pos++); c == 58;) {
                b = this.readDigits();
                c = this.unserialize();
                a.h[b] = c;
                c = this.buf.charCodeAt(this.pos++);
              }
              if (c != 104) {
                throw I.thrown("Invalid IntMap format");
              }
              return a;
            case 114:
              a = this.readDigits();
              if (a < 0 || a >= this.cache.length) {
                throw I.thrown("Invalid reference");
              }
              return this.cache[a];
            case 115:
              a = this.readDigits();
              c = this.buf;
              if (this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < a) {
                throw I.thrown("Invalid bytes length");
              }
              d = Zd.CODES;
              if (d == null) {
                d = Zd.initCodes();
                Zd.CODES = d;
              }
              b = this.pos;
              e = a & 3;
              f = b + (a - e);
              k = new ac(new ArrayBuffer((a >> 2) * 3 + (e >= 2 ? e - 1 : 0)));
              for (g = 0; b < f;) {
                var l = d[c.charCodeAt(b++)];
                var h = d[c.charCodeAt(b++)];
                k.b[g++] = (l << 2 | h >> 4) & 255;
                l = d[c.charCodeAt(b++)];
                k.b[g++] = (h << 4 | l >> 2) & 255;
                h = d[c.charCodeAt(b++)];
                k.b[g++] = (l << 6 | h) & 255;
              }
              if (e >= 2) {
                l = d[c.charCodeAt(b++)];
                h = d[c.charCodeAt(b++)];
                k.b[g++] = (l << 2 | h >> 4) & 255;
                if (e == 3) {
                  l = d[c.charCodeAt(b++)];
                  k.b[g++] = (h << 4 | l >> 2) & 255;
                }
              }
              this.pos += a;
              this.cache.push(k);
              return k;
            case 116:
              return true;
            case 118:
              if (this.buf.charCodeAt(this.pos) >= 48 && this.buf.charCodeAt(this.pos) <= 57 && this.buf.charCodeAt(this.pos + 1) >= 48 && this.buf.charCodeAt(this.pos + 1) <= 57 && this.buf.charCodeAt(this.pos + 2) >= 48 && this.buf.charCodeAt(this.pos + 2) <= 57 && this.buf.charCodeAt(this.pos + 3) >= 48 && this.buf.charCodeAt(this.pos + 3) <= 57 && this.buf.charCodeAt(this.pos + 4) == 45) {
                b = L.strDate(L.substr(this.buf, this.pos, 19));
                this.pos += 19;
              } else {
                b = new Date(this.readFloat());
              }
              this.cache.push(b);
              return b;
            case 119:
              a = this.unserialize();
              c = this.resolver.resolveEnum(a);
              if (c == null) {
                throw I.thrown("Enum not found " + a);
              }
              b = this.unserializeEnum(c, this.unserialize());
              this.cache.push(b);
              return b;
            case 120:
              throw I.thrown(this.unserialize());
            case 121:
              a = this.readDigits();
              if (this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < a) {
                throw I.thrown("Invalid string length");
              }
              b = L.substr(this.buf, this.pos, a);
              this.pos += a;
              b = decodeURIComponent(b.split("+").join(" "));
              this.scache.push(b);
              return b;
            case 122:
              return 0;
          }
          this.pos--;
          throw I.thrown("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
        },
        __class__: Zd
      };
      function qi() {}
      h["haxe._Unserializer.NullResolver"] = qi;
      qi.__name__ = "haxe._Unserializer.NullResolver";
      qi.prototype = {
        resolveClass: function (a) {
          return null;
        },
        resolveEnum: function (a) {
          return null;
        },
        __class__: qi
      };
      function jo(a) {
        this.__b = "";
      }
      h["haxe.Utf8"] = jo;
      jo.__name__ = "haxe.Utf8";
      jo.prototype = {
        __class__: jo
      };
      function Hj(a, b, c) {
        I.call(this, String(a), b, c);
        this.value = a;
        this.__skipStack++;
      }
      h["haxe.ValueException"] = Hj;
      Hj.__name__ = "haxe.ValueException";
      Hj.__super__ = I;
      Hj.prototype = q(I.prototype, {
        unwrap: function () {
          return this.value;
        },
        __class__: Hj
      });
      function ri() {
        this.a1 = 1;
        this.a2 = 0;
      }
      h["haxe.crypto.Adler32"] = ri;
      ri.__name__ = "haxe.crypto.Adler32";
      ri.read = function (a) {
        var b = new ri();
        var c = a.readByte();
        var d = a.readByte();
        var e = a.readByte();
        a = a.readByte();
        b.a1 = e << 8 | a;
        b.a2 = c << 8 | d;
        return b;
      };
      ri.prototype = {
        update: function (a, b, c) {
          var d = this.a1;
          var e = this.a2;
          var f = b;
          for (b += c; f < b;) {
            c = f++;
            d = (d + a.b[c]) % 65521;
            e = (e + d) % 65521;
          }
          this.a1 = d;
          this.a2 = e;
        },
        equals: function (a) {
          if (a.a1 == this.a1) {
            return a.a2 == this.a2;
          } else {
            return false;
          }
        },
        __class__: ri
      };
      function pi() {}
      h["haxe.crypto.Base64"] = pi;
      pi.__name__ = "haxe.crypto.Base64";
      pi.decode = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b) {
          while (L.cca(a, a.length - 1) == 61) {
            a = L.substr(a, 0, -1);
          }
        }
        return new ko(pi.BYTES).decodeBytes(ac.ofString(a));
      };
      function ko(a) {
        for (var b = a.length, c = 1; b > 1 << c;) {
          ++c;
        }
        if (c > 8 || b != 1 << c) {
          throw I.thrown("BaseCode : base length must be a power of two.");
        }
        this.base = a;
        this.nbits = c;
      }
      h["haxe.crypto.BaseCode"] = ko;
      ko.__name__ = "haxe.crypto.BaseCode";
      ko.prototype = {
        initTable: function () {
          var a = [];
          for (var b = 0; b < 256;) {
            var c = b++;
            a[c] = -1;
          }
          b = 0;
          for (var d = this.base.length; b < d;) {
            c = b++;
            a[this.base.b[c]] = c;
          }
          this.tbl = a;
        },
        decodeBytes: function (a) {
          var b = this.nbits;
          if (this.tbl == null) {
            this.initTable();
          }
          var c = this.tbl;
          for (var d = a.length * b >> 3, e = new ac(new ArrayBuffer(d)), f = 0, k = 0, g = 0, l = 0; l < d;) {
            while (k < 8) {
              k += b;
              f <<= b;
              var h = c[a.b[g++]];
              if (h == -1) {
                throw I.thrown("BaseCode : invalid encoded char");
              }
              f |= h;
            }
            k -= 8;
            e.b[l++] = f >> k & 255;
          }
          return e;
        },
        __class__: ko
      };
      function Zc() {}
      h["haxe.ds.ArraySort"] = Zc;
      Zc.__name__ = "haxe.ds.ArraySort";
      Zc.sort = function (a, b) {
        Zc.rec(a, b, 0, a.length);
      };
      Zc.rec = function (a, b, c, d) {
        var e = c + d >> 1;
        if (d - c < 12) {
          if (!(d <= c)) {
            for (e = c + 1; e < d;) {
              for (var f = e++; f > c;) {
                if (b(a[f], a[f - 1]) < 0) {
                  Zc.swap(a, f - 1, f);
                } else {
                  break;
                }
                --f;
              }
            }
          }
        } else {
          Zc.rec(a, b, c, e);
          Zc.rec(a, b, e, d);
          Zc.doMerge(a, b, c, e, d, e - c, d - e);
        }
      };
      Zc.doMerge = function (a, b, c, d, e, f, k) {
        if (f != 0 && k != 0) {
          if (f + k == 2) {
            if (b(a[d], a[c]) < 0) {
              Zc.swap(a, d, c);
            }
          } else {
            if (f > k) {
              var g = f >> 1;
              var l = c + g;
              var h = Zc.lower(a, b, d, e, l);
              var p = h - d;
            } else {
              p = k >> 1;
              h = d + p;
              l = Zc.upper(a, b, c, d, h);
              g = l - c;
            }
            Zc.rotate(a, b, l, d, h);
            d = l + p;
            Zc.doMerge(a, b, c, l, d, g, p);
            Zc.doMerge(a, b, d, h, e, f - g, k - p);
          }
        }
      };
      Zc.rotate = function (a, b, c, d, e) {
        if (c != d && d != e) {
          for (b = Zc.gcd(e - c, d - c); b-- != 0;) {
            var f = a[c + b];
            var k = d - c;
            var g = c + b;
            for (var l = c + b + k; l != c + b;) {
              a[g] = a[l];
              g = l;
              l = e - l > k ? l + k : c + (k - (e - l));
            }
            a[g] = f;
          }
        }
      };
      Zc.gcd = function (a, b) {
        while (b != 0) {
          var c = a % b;
          a = b;
          b = c;
        }
        return a;
      };
      Zc.upper = function (a, b, c, d, e) {
        d -= c;
        var f;
        var k;
        while (d > 0) {
          f = d >> 1;
          k = c + f;
          if (b(a[e], a[k]) < 0) {
            d = f;
          } else {
            c = k + 1;
            d = d - f - 1;
          }
        }
        return c;
      };
      Zc.lower = function (a, b, c, d, e) {
        d -= c;
        var f;
        var k;
        while (d > 0) {
          f = d >> 1;
          k = c + f;
          if (b(a[k], a[e]) < 0) {
            c = k + 1;
            d = d - f - 1;
          } else {
            d = f;
          }
        }
        return c;
      };
      Zc.swap = function (a, b, c) {
        var d = a[b];
        a[b] = a[c];
        a[c] = d;
      };
      function ug() {}
      h["haxe.ds.BalancedTree"] = ug;
      ug.__name__ = "haxe.ds.BalancedTree";
      ug.__interfaces__ = [kc];
      ug.iteratorLoop = function (a, b) {
        if (a != null) {
          ug.iteratorLoop(a.left, b);
          b.push(a.value);
          ug.iteratorLoop(a.right, b);
        }
      };
      ug.prototype = {
        set: function (a, b) {
          this.root = this.setLoop(a, b, this.root);
        },
        get: function (a) {
          for (var b = this.root; b != null;) {
            var c = this.compare(a, b.key);
            if (c == 0) {
              return b.value;
            }
            b = c < 0 ? b.left : b.right;
          }
          return null;
        },
        remove: function (a) {
          try {
            this.root = this.removeLoop(a, this.root);
            return true;
          } catch (b) {
            Oa.lastError = b;
            if (typeof I.caught(b).unwrap() == "string") {
              return false;
            }
            throw b;
          }
        },
        iterator: function () {
          var a = [];
          ug.iteratorLoop(this.root, a);
          return new tf(a);
        },
        keys: function () {
          var a = [];
          this.keysLoop(this.root, a);
          return new tf(a);
        },
        setLoop: function (a, b, c) {
          if (c == null) {
            return new oe(null, a, b, null);
          }
          var d = this.compare(a, c.key);
          if (d == 0) {
            return new oe(c.left, a, b, c.right, c == null ? 0 : c._height);
          }
          if (d < 0) {
            a = this.setLoop(a, b, c.left);
            return this.balance(a, c.key, c.value, c.right);
          }
          a = this.setLoop(a, b, c.right);
          return this.balance(c.left, c.key, c.value, a);
        },
        removeLoop: function (a, b) {
          if (b == null) {
            throw I.thrown("Not_found");
          }
          var c = this.compare(a, b.key);
          if (c == 0) {
            return this.merge(b.left, b.right);
          } else if (c < 0) {
            return this.balance(this.removeLoop(a, b.left), b.key, b.value, b.right);
          } else {
            return this.balance(b.left, b.key, b.value, this.removeLoop(a, b.right));
          }
        },
        keysLoop: function (a, b) {
          if (a != null) {
            this.keysLoop(a.left, b);
            b.push(a.key);
            this.keysLoop(a.right, b);
          }
        },
        merge: function (a, b) {
          if (a == null) {
            return b;
          }
          if (b == null) {
            return a;
          }
          var c = this.minBinding(b);
          return this.balance(a, c.key, c.value, this.removeMinBinding(b));
        },
        minBinding: function (a) {
          if (a == null) {
            throw I.thrown("Not_found");
          }
          if (a.left == null) {
            return a;
          } else {
            return this.minBinding(a.left);
          }
        },
        removeMinBinding: function (a) {
          if (a.left == null) {
            return a.right;
          } else {
            return this.balance(this.removeMinBinding(a.left), a.key, a.value, a.right);
          }
        },
        balance: function (a, b, c, d) {
          var e = a == null ? 0 : a._height;
          var f = d == null ? 0 : d._height;
          if (e > f + 2) {
            e = a.left;
            f = a.right;
            if ((e == null ? 0 : e._height) >= (f == null ? 0 : f._height)) {
              return new oe(a.left, a.key, a.value, new oe(a.right, b, c, d));
            } else {
              return new oe(new oe(a.left, a.key, a.value, a.right.left), a.right.key, a.right.value, new oe(a.right.right, b, c, d));
            }
          } else if (f > e + 2) {
            e = d.right;
            f = d.left;
            if ((e == null ? 0 : e._height) > (f == null ? 0 : f._height)) {
              return new oe(new oe(a, b, c, d.left), d.key, d.value, d.right);
            } else {
              return new oe(new oe(a, b, c, d.left.left), d.left.key, d.left.value, new oe(d.left.right, d.key, d.value, d.right));
            }
          } else {
            return new oe(a, b, c, d, (e > f ? e : f) + 1);
          }
        },
        compare: function (a, b) {
          return ha.compare(a, b);
        },
        __class__: ug
      };
      function oe(a, b, c, d, e) {
        if (e == null) {
          e = -1;
        }
        this.left = a;
        this.key = b;
        this.value = c;
        this.right = d;
        if (e == -1) {
          a = this.left;
          b = this.right;
          a = (a == null ? 0 : a._height) > (b == null ? 0 : b._height) ? this.left : this.right;
          this._height = (a == null ? 0 : a._height) + 1;
        } else {
          this._height = e;
        }
      }
      h["haxe.ds.TreeNode"] = oe;
      oe.__name__ = "haxe.ds.TreeNode";
      oe.prototype = {
        __class__: oe
      };
      function rj() {}
      h["haxe.ds.EnumValueMap"] = rj;
      rj.__name__ = "haxe.ds.EnumValueMap";
      rj.__interfaces__ = [kc];
      rj.__super__ = ug;
      rj.prototype = q(ug.prototype, {
        compare: function (a, b) {
          var c = a._hx_index - b._hx_index;
          if (c != 0) {
            return c;
          }
          a = yb.enumParameters(a);
          b = yb.enumParameters(b);
          if (a.length == 0 && b.length == 0) {
            return 0;
          } else {
            return this.compareArgs(a, b);
          }
        },
        compareArgs: function (a, b) {
          var c = a.length - b.length;
          if (c != 0) {
            return c;
          }
          c = 0;
          for (var d = a.length; c < d;) {
            var e = c++;
            e = this.compareArg(a[e], b[e]);
            if (e != 0) {
              return e;
            }
          }
          return 0;
        },
        compareArg: function (a, b) {
          if (ha.isEnumValue(a) && ha.isEnumValue(b)) {
            return this.compare(a, b);
          } else if (a instanceof Array && b instanceof Array) {
            return this.compareArgs(a, b);
          } else {
            return ha.compare(a, b);
          }
        },
        __class__: rj
      });
      function Ac() {
        this.h = {};
      }
      h["haxe.ds.IntMap"] = Ac;
      Ac.__name__ = "haxe.ds.IntMap";
      Ac.__interfaces__ = [kc];
      Ac.prototype = {
        set: function (a, b) {
          this.h[a] = b;
        },
        get: function (a) {
          return this.h[a];
        },
        remove: function (a) {
          if (!this.h.hasOwnProperty(a)) {
            return false;
          }
          delete this.h[a];
          return true;
        },
        keys: function () {
          var a = [];
          var b;
          for (b in this.h) {
            if (this.h.hasOwnProperty(b)) {
              a.push(+b);
            }
          }
          return new tf(a);
        },
        iterator: function () {
          return {
            ref: this.h,
            it: this.keys(),
            hasNext: function () {
              return this.it.hasNext();
            },
            next: function () {
              var a = this.it.next();
              return this.ref[a];
            }
          };
        },
        __class__: Ac
      };
      function mk(a, b) {
        this.item = a;
        this.next = b;
      }
      h["haxe.ds._List.ListNode"] = mk;
      mk.__name__ = "haxe.ds._List.ListNode";
      mk.prototype = {
        __class__: mk
      };
      function ln(a) {
        this.head = a;
      }
      h["haxe.ds._List.ListIterator"] = ln;
      ln.__name__ = "haxe.ds._List.ListIterator";
      ln.prototype = {
        hasNext: function () {
          return this.head != null;
        },
        next: function () {
          var a = this.head.item;
          this.head = this.head.next;
          return a;
        },
        __class__: ln
      };
      function xa() {
        this.h = Object.create(null);
      }
      h["haxe.ds.StringMap"] = xa;
      xa.__name__ = "haxe.ds.StringMap";
      xa.__interfaces__ = [kc];
      xa.createCopy = function (a) {
        var b = new xa();
        var c;
        for (c in a) {
          b.h[c] = a[c];
        }
        return b;
      };
      xa.prototype = {
        get: function (a) {
          return this.h[a];
        },
        set: function (a, b) {
          this.h[a] = b;
        },
        remove: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.h, a)) {
            delete this.h[a];
            return true;
          } else {
            return false;
          }
        },
        keys: function () {
          return new rk(this.h);
        },
        __class__: xa
      };
      function rk(a) {
        this.h = a;
        this.keys = Object.keys(a);
        this.length = this.keys.length;
        this.current = 0;
      }
      h["haxe.ds._StringMap.StringMapKeyIterator"] = rk;
      rk.__name__ = "haxe.ds._StringMap.StringMapKeyIterator";
      rk.prototype = {
        hasNext: function () {
          return this.current < this.length;
        },
        next: function () {
          return this.keys[this.current++];
        },
        __class__: rk
      };
      function si(a, b, c) {
        I.call(this, a, b);
        this.posInfos = c == null ? {
          fileName: "(unknown)",
          lineNumber: 0,
          className: "(unknown)",
          methodName: "(unknown)"
        } : c;
        this.__skipStack++;
      }
      h["haxe.exceptions.PosException"] = si;
      si.__name__ = "haxe.exceptions.PosException";
      si.__super__ = I;
      si.prototype = q(I.prototype, {
        toString: function () {
          return "" + I.prototype.toString.call(this) + " in " + this.posInfos.className + "." + this.posInfos.methodName + " at " + this.posInfos.fileName + ":" + this.posInfos.lineNumber;
        },
        __class__: si
      });
      function Wl(a, b, c) {
        if (a == null) {
          a = "Not implemented";
        }
        si.call(this, a, b, c);
        this.__skipStack++;
      }
      h["haxe.exceptions.NotImplementedException"] = Wl;
      Wl.__name__ = "haxe.exceptions.NotImplementedException";
      Wl.__super__ = si;
      Wl.prototype = q(si.prototype, {
        __class__: Wl
      });
      function Xl() {
        this.size = this.pos = 0;
      }
      h["haxe.io.BytesBuffer"] = Xl;
      Xl.__name__ = "haxe.io.BytesBuffer";
      Xl.prototype = {
        addByte: function (a) {
          if (this.pos == this.size) {
            this.grow(1);
          }
          this.view.setUint8(this.pos++, a);
        },
        add: function (a) {
          if (this.pos + a.length > this.size) {
            this.grow(a.length);
          }
          if (this.size != 0) {
            var b = new Uint8Array(a.b.buffer, a.b.byteOffset, a.length);
            this.u8.set(b, this.pos);
            this.pos += a.length;
          }
        },
        addBytes: function (a, b, c) {
          if (b < 0 || c < 0 || b + c > a.length) {
            throw I.thrown(Df.OutsideBounds);
          }
          if (this.pos + c > this.size) {
            this.grow(c);
          }
          if (this.size != 0) {
            a = new Uint8Array(a.b.buffer, a.b.byteOffset + b, c);
            this.u8.set(a, this.pos);
            this.pos += c;
          }
        },
        grow: function (a) {
          var b = this.pos + a;
          for (a = this.size == 0 ? 16 : this.size; a < b;) {
            a = a * 3 >> 1;
          }
          b = new ArrayBuffer(a);
          var c = new Uint8Array(b);
          if (this.size > 0) {
            c.set(this.u8);
          }
          this.size = a;
          this.buffer = b;
          this.u8 = c;
          this.view = new DataView(this.buffer);
        },
        getBytes: function () {
          if (this.size == 0) {
            return new ac(new ArrayBuffer(0));
          }
          var a = new ac(this.buffer);
          a.length = this.pos;
          return a;
        },
        __class__: Xl
      };
      function Yl() {}
      h["haxe.io.Input"] = Yl;
      Yl.__name__ = "haxe.io.Input";
      Yl.prototype = {
        readByte: function () {
          throw new Wl(null, null, {
            fileName: "haxe/io/Input.hx",
            lineNumber: 53,
            className: "haxe.io.Input",
            methodName: "readByte"
          });
        },
        readBytes: function (a, b, c) {
          var d = c;
          var e = a.b;
          if (b < 0 || c < 0 || b + c > a.length) {
            throw I.thrown(Df.OutsideBounds);
          }
          try {
            while (d > 0) {
              e[b] = this.readByte();
              ++b;
              --d;
            }
          } catch (f) {
            Oa.lastError = f;
            if (!(I.caught(f).unwrap() instanceof Ij)) {
              throw f;
            }
          }
          return c - d;
        },
        readFullBytes: function (a, b, c) {
          while (c > 0) {
            var d = this.readBytes(a, b, c);
            if (d == 0) {
              throw I.thrown(Df.Blocked);
            }
            b += d;
            c -= d;
          }
        },
        read: function (a) {
          var b = new ac(new ArrayBuffer(a));
          var c = 0;
          while (a > 0) {
            var d = this.readBytes(b, c, a);
            if (d == 0) {
              throw I.thrown(Df.Blocked);
            }
            c += d;
            a -= d;
          }
          return b;
        },
        readInt16: function () {
          var a = this.readByte();
          var b = this.readByte();
          a = this.bigEndian ? b | a << 8 : a | b << 8;
          if ((a & 32768) != 0) {
            return a - 65536;
          } else {
            return a;
          }
        },
        readUInt16: function () {
          var a = this.readByte();
          var b = this.readByte();
          if (this.bigEndian) {
            return b | a << 8;
          } else {
            return a | b << 8;
          }
        },
        readInt32: function () {
          var a = this.readByte();
          var b = this.readByte();
          var c = this.readByte();
          var d = this.readByte();
          if (this.bigEndian) {
            return d | c << 8 | b << 16 | a << 24;
          } else {
            return a | b << 8 | c << 16 | d << 24;
          }
        },
        readString: function (a, b) {
          var c = new ac(new ArrayBuffer(a));
          this.readFullBytes(c, 0, a);
          return c.getString(0, a, b);
        },
        __class__: Yl
      };
      function Gj(a, b, c) {
        if (b == null) {
          b = 0;
        }
        if (c == null) {
          c = a.length - b;
        }
        if (b < 0 || c < 0 || b + c > a.length) {
          throw I.thrown(Df.OutsideBounds);
        }
        this.b = a.b;
        this.pos = b;
        this.totlen = this.len = c;
      }
      h["haxe.io.BytesInput"] = Gj;
      Gj.__name__ = "haxe.io.BytesInput";
      Gj.__super__ = Yl;
      Gj.prototype = q(Yl.prototype, {
        readByte: function () {
          if (this.len == 0) {
            throw I.thrown(new Ij());
          }
          this.len--;
          return this.b[this.pos++];
        },
        readBytes: function (a, b, c) {
          if (b < 0 || c < 0 || b + c > a.length) {
            throw I.thrown(Df.OutsideBounds);
          }
          if (this.len == 0 && c > 0) {
            throw I.thrown(new Ij());
          }
          if (this.len < c) {
            c = this.len;
          }
          var d = this.b;
          a = a.b;
          for (var e = 0, f = c; e < f;) {
            var k = e++;
            a[b + k] = d[this.pos + k];
          }
          this.pos += c;
          this.len -= c;
          return c;
        },
        __class__: Gj
      });
      var wp = w["haxe.io.Encoding"] = {
        __ename__: "haxe.io.Encoding",
        __constructs__: null,
        UTF8: {
          _hx_name: "UTF8",
          _hx_index: 0,
          __enum__: "haxe.io.Encoding",
          toString: p
        },
        RawNative: {
          _hx_name: "RawNative",
          _hx_index: 1,
          __enum__: "haxe.io.Encoding",
          toString: p
        }
      };
      wp.__constructs__ = [wp.UTF8, wp.RawNative];
      function Ij() {}
      h["haxe.io.Eof"] = Ij;
      Ij.__name__ = "haxe.io.Eof";
      Ij.prototype = {
        toString: function () {
          return "Eof";
        },
        __class__: Ij
      };
      var Df = w["haxe.io.Error"] = {
        __ename__: "haxe.io.Error",
        __constructs__: null,
        Blocked: {
          _hx_name: "Blocked",
          _hx_index: 0,
          __enum__: "haxe.io.Error",
          toString: p
        },
        Overflow: {
          _hx_name: "Overflow",
          _hx_index: 1,
          __enum__: "haxe.io.Error",
          toString: p
        },
        OutsideBounds: {
          _hx_name: "OutsideBounds",
          _hx_index: 2,
          __enum__: "haxe.io.Error",
          toString: p
        },
        Custom: (r = function (a) {
          return {
            _hx_index: 3,
            e: a,
            __enum__: "haxe.io.Error",
            toString: p
          };
        }, r._hx_name = "Custom", r.__params__ = ["e"], r)
      };
      Df.__constructs__ = [Df.Blocked, Df.Overflow, Df.OutsideBounds, Df.Custom];
      var Qp = {
        fromBytes: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (c == null) {
            c = a.length - b >> 2;
          }
          return new Float32Array(a.b.bufferValue, b, c);
        }
      };
      function Ic(a) {
        switch (a) {
          case ".":
          case "..":
            this.dir = a;
            this.file = "";
            return;
        }
        var b = a.lastIndexOf("/");
        var c = a.lastIndexOf("\\");
        if (b < c) {
          this.dir = L.substr(a, 0, c);
          a = L.substr(a, c + 1, null);
          this.backslash = true;
        } else if (c < b) {
          this.dir = L.substr(a, 0, b);
          a = L.substr(a, b + 1, null);
        } else {
          this.dir = null;
        }
        b = a.lastIndexOf(".");
        if (b != -1) {
          this.ext = L.substr(a, b + 1, null);
          this.file = L.substr(a, 0, b);
        } else {
          this.ext = null;
          this.file = a;
        }
      }
      h["haxe.io.Path"] = Ic;
      Ic.__name__ = "haxe.io.Path";
      Ic.withoutDirectory = function (a) {
        a = new Ic(a);
        a.dir = null;
        return a.toString();
      };
      Ic.directory = function (a) {
        a = new Ic(a);
        if (a.dir == null) {
          return "";
        } else {
          return a.dir;
        }
      };
      Ic.extension = function (a) {
        a = new Ic(a);
        if (a.ext == null) {
          return "";
        } else {
          return a.ext;
        }
      };
      Ic.prototype = {
        toString: function () {
          return (this.dir == null ? "" : this.dir + (this.backslash ? "\\" : "/")) + this.file + (this.ext == null ? "" : "." + this.ext);
        },
        __class__: Ic
      };
      function tf(a) {
        this.current = 0;
        this.array = a;
      }
      h["haxe.iterators.ArrayIterator"] = tf;
      tf.__name__ = "haxe.iterators.ArrayIterator";
      tf.prototype = {
        hasNext: function () {
          return this.current < this.array.length;
        },
        next: function () {
          return this.array[this.current++];
        },
        __class__: tf
      };
      function mn(a) {
        this.current = 0;
        this.array = a;
      }
      h["haxe.iterators.ArrayKeyValueIterator"] = mn;
      mn.__name__ = "haxe.iterators.ArrayKeyValueIterator";
      mn.prototype = {
        hasNext: function () {
          return this.current < this.array.length;
        },
        next: function () {
          return {
            value: this.array[this.current],
            key: this.current++
          };
        },
        __class__: mn
      };
      function hp(a) {
        this.map = a;
        this.keys = a.keys();
      }
      h["haxe.iterators.MapKeyValueIterator"] = hp;
      hp.__name__ = "haxe.iterators.MapKeyValueIterator";
      hp.prototype = {
        hasNext: function () {
          return this.keys.hasNext();
        },
        next: function () {
          var a = this.keys.next();
          return {
            value: this.map.get(a),
            key: a
          };
        },
        __class__: hp
      };
      var Hb = {
        resolve: function (a, b) {
          var c = a.elementsNamed(b).next();
          if (c == null) {
            if (a.nodeType == T.Document) {
              a = "Document";
            } else {
              if (a.nodeType != T.Element) {
                throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
              }
              a = a.nodeName;
            }
            throw I.thrown(a + " is missing element " + b);
          }
          if (c.nodeType != T.Document && c.nodeType != T.Element) {
            throw I.thrown("Invalid nodeType " + (c.nodeType == null ? "null" : lb.toString(c.nodeType)));
          }
          return c;
        }
      };
      var Mb = {
        resolve: function (a, b) {
          if (a.nodeType == T.Document) {
            throw I.thrown("Cannot access document attribute " + b);
          }
          var c = a.get(b);
          if (c == null) {
            if (a.nodeType != T.Element) {
              throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
            }
            throw I.thrown(a.nodeName + " is missing attribute " + b);
          }
          return c;
        }
      };
      var ec = {
        resolve: function (a, b) {
          if (a.nodeType == T.Document) {
            throw I.thrown("Cannot access document attribute " + b);
          }
          return a.exists(b);
        }
      };
      var hb = {
        resolve: function (a, b) {
          return a.elementsNamed(b).hasNext();
        }
      };
      var fc = {
        resolve: function (a, b) {
          var c = [];
          for (a = a.elementsNamed(b); a.hasNext();) {
            b = a.next();
            if (b.nodeType != T.Document && b.nodeType != T.Element) {
              throw I.thrown("Invalid nodeType " + (b.nodeType == null ? "null" : lb.toString(b.nodeType)));
            }
            c.push(b);
          }
          return c;
        }
      };
      function id(a, b, c) {
        this.xml = b;
        this.message = a;
        this.position = c;
        this.lineNumber = 1;
        for (a = this.positionAtLine = 0; a < c;) {
          var d = a++;
          d = b.charCodeAt(d);
          if (d == 10) {
            this.lineNumber++;
            this.positionAtLine = 0;
          } else if (d != 13) {
            this.positionAtLine++;
          }
        }
      }
      h["haxe.xml.XmlParserException"] = id;
      id.__name__ = "haxe.xml.XmlParserException";
      id.prototype = {
        toString: function () {
          return wa.getClass(this).__name__ + ": " + this.message + " at line " + this.lineNumber + " char " + this.positionAtLine;
        },
        __class__: id
      };
      function Dg() {}
      h["haxe.xml.Parser"] = Dg;
      Dg.__name__ = "haxe.xml.Parser";
      Dg.parse = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = T.createDocument();
        Dg.doParse(a, b, 0, c);
        return c;
      };
      Dg.doParse = function (a, b, c, d) {
        if (c == null) {
          c = 0;
        }
        var e = null;
        var f = 1;
        var k = 1;
        var g = null;
        var l = 0;
        var h = 0;
        var p = 0;
        var m = new We();
        var n = 1;
        var q = -1;
        while (c < a.length) {
          var r = a.charCodeAt(c);
          switch (f) {
            case 0:
              switch (r) {
                case 9:
                case 10:
                case 13:
                case 32:
                  break;
                default:
                  f = k;
                  continue;
              }
              break;
            case 1:
              if (r == 60) {
                f = 0;
                k = 2;
              } else {
                l = c;
                f = 13;
                continue;
              }
              break;
            case 2:
              switch (r) {
                case 33:
                  if (a.charCodeAt(c + 1) == 91) {
                    c += 2;
                    if (L.substr(a, c, 6).toUpperCase() != "CDATA[") {
                      throw I.thrown(new id("Expected <![CDATA[", a, c));
                    }
                    c += 5;
                    f = 17;
                  } else if (a.charCodeAt(c + 1) == 68 || a.charCodeAt(c + 1) == 100) {
                    if (L.substr(a, c + 2, 6).toUpperCase() != "OCTYPE") {
                      throw I.thrown(new id("Expected <!DOCTYPE", a, c));
                    }
                    c += 8;
                    f = 16;
                  } else {
                    if (a.charCodeAt(c + 1) != 45 || a.charCodeAt(c + 2) != 45) {
                      throw I.thrown(new id("Expected <!--", a, c));
                    }
                    c += 2;
                    f = 15;
                  }
                  l = c + 1;
                  break;
                case 47:
                  if (d == null) {
                    throw I.thrown(new id("Expected node name", a, c));
                  }
                  l = c + 1;
                  f = 0;
                  k = 10;
                  break;
                case 63:
                  f = 14;
                  l = c;
                  break;
                default:
                  f = 3;
                  l = c;
                  continue;
              }
              break;
            case 3:
              if ((!(r >= 97) || !(r <= 122)) && (!(r >= 65) || !(r <= 90)) && (!(r >= 48) || !(r <= 57)) && r != 58 && r != 46 && r != 95 && r != 45) {
                if (c == l) {
                  throw I.thrown(new id("Expected node name", a, c));
                }
                e = T.createElement(L.substr(a, l, c - l));
                d.addChild(e);
                ++h;
                f = 0;
                k = 4;
                continue;
              }
              break;
            case 4:
              switch (r) {
                case 47:
                  f = 11;
                  break;
                case 62:
                  f = 9;
                  break;
                default:
                  f = 5;
                  l = c;
                  continue;
              }
              break;
            case 5:
              if ((!(r >= 97) || !(r <= 122)) && (!(r >= 65) || !(r <= 90)) && (!(r >= 48) || !(r <= 57)) && r != 58 && r != 46 && r != 95 && r != 45) {
                if (l == c) {
                  throw I.thrown(new id("Expected attribute name", a, c));
                }
                g = L.substr(a, l, c - l);
                if (e.exists(g)) {
                  throw I.thrown(new id("Duplicate attribute [" + g + "]", a, c));
                }
                f = 0;
                k = 6;
                continue;
              }
              break;
            case 6:
              if (r == 61) {
                f = 0;
                k = 7;
              } else {
                throw I.thrown(new id("Expected =", a, c));
              }
              break;
            case 7:
              switch (r) {
                case 34:
                case 39:
                  m = new We();
                  f = 8;
                  l = c + 1;
                  q = r;
                  break;
                default:
                  throw I.thrown(new id("Expected \"", a, c));
              }
              break;
            case 8:
              switch (r) {
                case 38:
                  n = c - l;
                  m.b += n == null ? L.substr(a, l, null) : L.substr(a, l, n);
                  f = 18;
                  n = 8;
                  l = c + 1;
                  break;
                case 60:
                case 62:
                  if (b) {
                    throw I.thrown(new id("Invalid unescaped " + String.fromCodePoint(r) + " in attribute value", a, c));
                  }
                  if (r == q) {
                    k = c - l;
                    m.b += k == null ? L.substr(a, l, null) : L.substr(a, l, k);
                    k = m.b;
                    m = new We();
                    e.set(g, k);
                    f = 0;
                    k = 4;
                  }
                  break;
                default:
                  if (r == q) {
                    k = c - l;
                    m.b += k == null ? L.substr(a, l, null) : L.substr(a, l, k);
                    k = m.b;
                    m = new We();
                    e.set(g, k);
                    f = 0;
                    k = 4;
                  }
              }
              break;
            case 9:
              l = c = Dg.doParse(a, b, c, e);
              f = 1;
              break;
            case 10:
              if ((!(r >= 97) || !(r <= 122)) && (!(r >= 65) || !(r <= 90)) && (!(r >= 48) || !(r <= 57)) && r != 58 && r != 46 && r != 95 && r != 45) {
                if (l == c) {
                  throw I.thrown(new id("Expected node name", a, c));
                }
                k = L.substr(a, l, c - l);
                if (d == null || d.nodeType != 0) {
                  throw I.thrown(new id("Unexpected </" + k + ">, tag is not open", a, c));
                }
                if (d.nodeType != T.Element) {
                  throw I.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : lb.toString(d.nodeType)));
                }
                if (k != d.nodeName) {
                  if (d.nodeType != T.Element) {
                    throw I.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : lb.toString(d.nodeType)));
                  }
                  throw I.thrown(new id("Expected </" + d.nodeName + ">", a, c));
                }
                f = 0;
                k = 12;
                continue;
              }
              break;
            case 11:
              if (r == 62) {
                f = 1;
              } else {
                throw I.thrown(new id("Expected >", a, c));
              }
              break;
            case 12:
              if (r == 62) {
                if (h == 0) {
                  d.addChild(T.createPCData(""));
                }
                return c;
              }
              throw I.thrown(new id("Expected >", a, c));
            case 13:
              if (r == 60) {
                k = c - l;
                m.b += k == null ? L.substr(a, l, null) : L.substr(a, l, k);
                k = T.createPCData(m.b);
                m = new We();
                d.addChild(k);
                ++h;
                f = 0;
                k = 2;
              } else if (r == 38) {
                n = c - l;
                m.b += n == null ? L.substr(a, l, null) : L.substr(a, l, n);
                f = 18;
                n = 13;
                l = c + 1;
              }
              break;
            case 14:
              if (r == 63 && a.charCodeAt(c + 1) == 62) {
                ++c;
                f = L.substr(a, l + 1, c - l - 2);
                d.addChild(T.createProcessingInstruction(f));
                ++h;
                f = 1;
              }
              break;
            case 15:
              if (r == 45 && a.charCodeAt(c + 1) == 45 && a.charCodeAt(c + 2) == 62) {
                d.addChild(T.createComment(L.substr(a, l, c - l)));
                ++h;
                c += 2;
                f = 1;
              }
              break;
            case 16:
              if (r == 91) {
                ++p;
              } else if (r == 93) {
                --p;
              } else if (r == 62 && p == 0) {
                d.addChild(T.createDocType(L.substr(a, l, c - l)));
                ++h;
                f = 1;
              }
              break;
            case 17:
              if (r == 93 && a.charCodeAt(c + 1) == 93 && a.charCodeAt(c + 2) == 62) {
                f = T.createCData(L.substr(a, l, c - l));
                d.addChild(f);
                ++h;
                c += 2;
                f = 1;
              }
              break;
            case 18:
              if (r == 59) {
                l = L.substr(a, l, c - l);
                if (l.charCodeAt(0) == 35) {
                  l = l.charCodeAt(1) == 120 ? y.parseInt("0" + L.substr(l, 1, l.length - 1)) : y.parseInt(L.substr(l, 1, l.length - 1));
                  m.b += String.fromCodePoint(l);
                } else if (Object.prototype.hasOwnProperty.call(Dg.escapes.h, l)) {
                  m.b += y.string(Dg.escapes.h[l]);
                } else {
                  if (b) {
                    throw I.thrown(new id("Undefined entity: " + l, a, c));
                  }
                  m.b += y.string("&" + l + ";");
                }
                l = c + 1;
                f = n;
              } else if ((!(r >= 97) || !(r <= 122)) && (!(r >= 65) || !(r <= 90)) && (!(r >= 48) || !(r <= 57)) && r != 58 && r != 46 && r != 95 && r != 45 && r != 35) {
                if (b) {
                  throw I.thrown(new id("Invalid character in entity: " + String.fromCodePoint(r), a, c));
                }
                m.b += String.fromCodePoint(38);
                f = c - l;
                m.b += f == null ? L.substr(a, l, null) : L.substr(a, l, f);
                --c;
                l = c + 1;
                f = n;
              }
          }
          ++c;
        }
        if (f == 1) {
          l = c;
          f = 13;
        }
        if (f == 13) {
          if (d.nodeType == 0) {
            if (d.nodeType != T.Element) {
              throw I.thrown("Bad node type, expected Element but found " + (d.nodeType == null ? "null" : lb.toString(d.nodeType)));
            }
            throw I.thrown(new id("Unclosed node <" + d.nodeName + ">", a, c));
          }
          if (c != l || h == 0) {
            n = c - l;
            m.b += n == null ? L.substr(a, l, null) : L.substr(a, l, n);
            d.addChild(T.createPCData(m.b));
          }
          return c;
        }
        if (!b && f == 18 && n == 13) {
          m.b += String.fromCodePoint(38);
          n = c - l;
          m.b += n == null ? L.substr(a, l, null) : L.substr(a, l, n);
          d.addChild(T.createPCData(m.b));
          return c;
        }
        throw I.thrown(new id("Unexpected end", a, c));
      };
      function Eg(a) {
        this.output = new We();
        this.pretty = a;
      }
      h["haxe.xml.Printer"] = Eg;
      Eg.__name__ = "haxe.xml.Printer";
      Eg.print = function (a, b) {
        if (b == null) {
          b = false;
        }
        b = new Eg(b);
        b.writeNode(a, "");
        return b.output.b;
      };
      Eg.prototype = {
        writeNode: function (a, b) {
          switch (a.nodeType) {
            case 0:
              this.output.b += y.string(b + "<");
              if (a.nodeType != T.Element) {
                throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
              }
              this.output.b += y.string(a.nodeName);
              for (var c = a.attributes(); c.hasNext();) {
                var d = c.next();
                this.output.b += y.string(" " + d + "=\"");
                d = v.htmlEscape(a.get(d), true);
                this.output.b += y.string(d);
                this.output.b += "\"";
              }
              if (this.hasChildren(a)) {
                this.output.b += ">";
                if (this.pretty) {
                  this.output.b += "\n";
                }
                if (a.nodeType != T.Document && a.nodeType != T.Element) {
                  throw I.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
                }
                c = 0;
                for (d = a.children; c < d.length;) {
                  var e = d[c++];
                  this.writeNode(e, this.pretty ? b + "\t" : b);
                }
                this.output.b += y.string(b + "</");
                if (a.nodeType != T.Element) {
                  throw I.thrown("Bad node type, expected Element but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
                }
                this.output.b += y.string(a.nodeName);
                this.output.b += ">";
              } else {
                this.output.b += "/>";
              }
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 1:
              if (a.nodeType == T.Document || a.nodeType == T.Element) {
                throw I.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
              }
              a = a.nodeValue;
              if (a.length != 0) {
                d = b + v.htmlEscape(a);
                this.output.b += y.string(d);
                if (this.pretty) {
                  this.output.b += "\n";
                }
              }
              break;
            case 2:
              this.output.b += y.string(b + "<![CDATA[");
              if (a.nodeType == T.Document || a.nodeType == T.Element) {
                throw I.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
              }
              this.output.b += y.string(a.nodeValue);
              this.output.b += "]]>";
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 3:
              if (a.nodeType == T.Document || a.nodeType == T.Element) {
                throw I.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
              }
              a = a.nodeValue;
              a = a.replace(/[\n\r\t]+/g, "");
              this.output.b += b == null ? "null" : "" + b;
              d = v.trim("<!--" + a + "-->");
              this.output.b += y.string(d);
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 4:
              if (a.nodeType == T.Document || a.nodeType == T.Element) {
                throw I.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
              }
              this.output.b += y.string("<!DOCTYPE " + a.nodeValue + ">");
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 5:
              if (a.nodeType == T.Document || a.nodeType == T.Element) {
                throw I.thrown("Bad node type, unexpected " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
              }
              this.output.b += y.string("<?" + a.nodeValue + "?>");
              if (this.pretty) {
                this.output.b += "\n";
              }
              break;
            case 6:
              if (a.nodeType != T.Document && a.nodeType != T.Element) {
                throw I.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
              }
              c = 0;
              for (d = a.children; c < d.length;) {
                e = d[c++];
                this.writeNode(e, b);
              }
          }
        },
        hasChildren: function (a) {
          if (a.nodeType != T.Document && a.nodeType != T.Element) {
            throw I.thrown("Bad node type, expected Element or Document but found " + (a.nodeType == null ? "null" : lb.toString(a.nodeType)));
          }
          var b = 0;
          for (a = a.children; b < a.length;) {
            var c = a[b++];
            switch (c.nodeType) {
              case 0:
              case 1:
                return true;
              case 2:
              case 3:
                if (c.nodeType == T.Document || c.nodeType == T.Element) {
                  throw I.thrown("Bad node type, unexpected " + (c.nodeType == null ? "null" : lb.toString(c.nodeType)));
                }
                if (v.ltrim(c.nodeValue).length != 0) {
                  return true;
                }
            }
          }
          return false;
        },
        __class__: Eg
      };
      var ti = w["haxe.zip.ExtraField"] = {
        __ename__: "haxe.zip.ExtraField",
        __constructs__: null,
        FUnknown: (r = function (a, b) {
          return {
            _hx_index: 0,
            tag: a,
            bytes: b,
            __enum__: "haxe.zip.ExtraField",
            toString: p
          };
        }, r._hx_name = "FUnknown", r.__params__ = ["tag", "bytes"], r),
        FInfoZipUnicodePath: (r = function (a, b) {
          return {
            _hx_index: 1,
            name: a,
            crc: b,
            __enum__: "haxe.zip.ExtraField",
            toString: p
          };
        }, r._hx_name = "FInfoZipUnicodePath", r.__params__ = ["name", "crc"], r),
        FUtf8: {
          _hx_name: "FUtf8",
          _hx_index: 2,
          __enum__: "haxe.zip.ExtraField",
          toString: p
        }
      };
      ti.__constructs__ = [ti.FUnknown, ti.FInfoZipUnicodePath, ti.FUtf8];
      var Jf = w["haxe.zip.Huffman"] = {
        __ename__: "haxe.zip.Huffman",
        __constructs__: null,
        Found: (r = function (a) {
          return {
            _hx_index: 0,
            i: a,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, r._hx_name = "Found", r.__params__ = ["i"], r),
        NeedBit: (r = function (a, b) {
          return {
            _hx_index: 1,
            left: a,
            right: b,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, r._hx_name = "NeedBit", r.__params__ = ["left", "right"], r),
        NeedBits: (r = function (a, b) {
          return {
            _hx_index: 2,
            n: a,
            table: b,
            __enum__: "haxe.zip.Huffman",
            toString: p
          };
        }, r._hx_name = "NeedBits", r.__params__ = ["n", "table"], r)
      };
      Jf.__constructs__ = [Jf.Found, Jf.NeedBit, Jf.NeedBits];
      function lo() {}
      h["haxe.zip.HuffTools"] = lo;
      lo.__name__ = "haxe.zip.HuffTools";
      lo.prototype = {
        treeDepth: function (a) {
          switch (a._hx_index) {
            case 0:
              return 0;
            case 1:
              var b = a.right;
              a = this.treeDepth(a.left);
              b = this.treeDepth(b);
              return 1 + (a < b ? a : b);
            case 2:
              throw I.thrown("assert");
          }
        },
        treeCompress: function (a) {
          var b = this.treeDepth(a);
          if (b == 0) {
            return a;
          }
          if (b == 1) {
            if (a._hx_index == 1) {
              b = a.right;
              return Jf.NeedBit(this.treeCompress(a.left), this.treeCompress(b));
            }
            throw I.thrown("assert");
          }
          var c = [];
          for (var d = 0, e = 1 << b; d < e;) {
            d++;
            c.push(Jf.Found(-1));
          }
          this.treeWalk(c, 0, 0, b, a);
          return Jf.NeedBits(b, c);
        },
        treeWalk: function (a, b, c, d, e) {
          if (e._hx_index == 1) {
            var f = e.left;
            var k = e.right;
            if (d > 0) {
              this.treeWalk(a, b, c + 1, d - 1, f);
              this.treeWalk(a, b | 1 << c, c + 1, d - 1, k);
            } else {
              a[b] = this.treeCompress(e);
            }
          } else {
            a[b] = this.treeCompress(e);
          }
        },
        treeMake: function (a, b, c, d) {
          if (d > b) {
            throw I.thrown("Invalid huffman");
          }
          var e = c << 5 | d;
          if (a.h.hasOwnProperty(e)) {
            return Jf.Found(a.h[e]);
          }
          c <<= 1;
          ++d;
          return Jf.NeedBit(this.treeMake(a, b, c, d), this.treeMake(a, b, c | 1, d));
        },
        make: function (a, b, c, d) {
          if (c == 1) {
            return Jf.NeedBit(Jf.Found(0), Jf.Found(0));
          }
          var e = [];
          var f = [];
          if (d > 32) {
            throw I.thrown("Invalid huffman");
          }
          for (var k = 0, g = d; k < g;) {
            k++;
            e.push(0);
            f.push(0);
          }
          k = 0;
          for (g = c; k < g;) {
            var l = k++;
            l = a[l + b];
            if (l >= d) {
              throw I.thrown("Invalid huffman");
            }
            e[l]++;
          }
          var h = 0;
          k = 1;
          for (g = d - 1; k < g;) {
            l = k++;
            h = h + e[l] << 1;
            f[l] = h;
          }
          e = new Ac();
          k = 0;
          for (g = c; k < g;) {
            l = k++;
            c = a[l + b];
            if (c != 0) {
              h = f[c - 1];
              f[c - 1] = h + 1;
              e.h[h << 5 | c] = l;
            }
          }
          return this.treeCompress(Jf.NeedBit(this.treeMake(e, d, 0, 1), this.treeMake(e, d, 1, 1)));
        },
        __class__: lo
      };
      function mo(a) {
        this.buffer = new ac(new ArrayBuffer(65536));
        this.pos = 0;
        if (a) {
          this.crc = new ri();
        }
      }
      h["haxe.zip._InflateImpl.Window"] = mo;
      mo.__name__ = "haxe.zip._InflateImpl.Window";
      mo.prototype = {
        slide: function () {
          if (this.crc != null) {
            this.crc.update(this.buffer, 0, 32768);
          }
          var a = new ac(new ArrayBuffer(65536));
          this.pos -= 32768;
          a.blit(0, this.buffer, 32768, this.pos);
          this.buffer = a;
        },
        addBytes: function (a, b, c) {
          if (this.pos + c > 65536) {
            this.slide();
          }
          this.buffer.blit(this.pos, a, b, c);
          this.pos += c;
        },
        addByte: function (a) {
          if (this.pos == 65536) {
            this.slide();
          }
          this.buffer.b[this.pos] = a & 255;
          this.pos++;
        },
        getLastChar: function () {
          return this.buffer.b[this.pos - 1];
        },
        available: function () {
          return this.pos;
        },
        checksum: function () {
          if (this.crc != null) {
            this.crc.update(this.buffer, 0, this.pos);
          }
          return this.crc;
        },
        __class__: mo
      };
      var Tc = w["haxe.zip._InflateImpl.State"] = {
        __ename__: "haxe.zip._InflateImpl.State",
        __constructs__: null,
        Head: {
          _hx_name: "Head",
          _hx_index: 0,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Block: {
          _hx_name: "Block",
          _hx_index: 1,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        CData: {
          _hx_name: "CData",
          _hx_index: 2,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Flat: {
          _hx_name: "Flat",
          _hx_index: 3,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Crc: {
          _hx_name: "Crc",
          _hx_index: 4,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Dist: {
          _hx_name: "Dist",
          _hx_index: 5,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        DistOne: {
          _hx_name: "DistOne",
          _hx_index: 6,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        },
        Done: {
          _hx_name: "Done",
          _hx_index: 7,
          __enum__: "haxe.zip._InflateImpl.State",
          toString: p
        }
      };
      Tc.__constructs__ = [Tc.Head, Tc.Block, Tc.CData, Tc.Flat, Tc.Crc, Tc.Dist, Tc.DistOne, Tc.Done];
      function Fd(a, b, c) {
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        this.isFinal = false;
        this.htools = new lo();
        this.huffman = this.buildFixedHuffman();
        this.huffdist = null;
        this.dist = this.len = 0;
        this.state = b ? Tc.Head : Tc.Block;
        this.input = a;
        this.needed = this.nbits = this.bits = 0;
        this.output = null;
        this.outpos = 0;
        this.lengths = [];
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.lengths.push(-1);
        this.window = new mo(c);
      }
      h["haxe.zip.InflateImpl"] = Fd;
      Fd.__name__ = "haxe.zip.InflateImpl";
      Fd.prototype = {
        buildFixedHuffman: function () {
          if (Fd.FIXED_HUFFMAN != null) {
            return Fd.FIXED_HUFFMAN;
          }
          var a = [];
          for (var b = 0; b < 288;) {
            var c = b++;
            a.push(c <= 143 ? 8 : c <= 255 ? 9 : c <= 279 ? 7 : 8);
          }
          Fd.FIXED_HUFFMAN = this.htools.make(a, 0, 288, 10);
          return Fd.FIXED_HUFFMAN;
        },
        readBytes: function (a, b, c) {
          this.needed = c;
          this.outpos = b;
          this.output = a;
          if (c > 0) {
            while (this.inflateLoop());
          }
          return c - this.needed;
        },
        getBits: function (a) {
          while (this.nbits < a) {
            this.bits |= this.input.readByte() << this.nbits;
            this.nbits += 8;
          }
          var b = this.bits & (1 << a) - 1;
          this.nbits -= a;
          this.bits >>= a;
          return b;
        },
        getBit: function () {
          if (this.nbits == 0) {
            this.nbits = 8;
            this.bits = this.input.readByte();
          }
          var a = (this.bits & 1) == 1;
          this.nbits--;
          this.bits >>= 1;
          return a;
        },
        getRevBits: function (a) {
          if (a == 0) {
            return 0;
          } else if (this.getBit()) {
            return 1 << a - 1 | this.getRevBits(a - 1);
          } else {
            return this.getRevBits(a - 1);
          }
        },
        resetBits: function () {
          this.nbits = this.bits = 0;
        },
        addBytes: function (a, b, c) {
          this.window.addBytes(a, b, c);
          this.output.blit(this.outpos, a, b, c);
          this.needed -= c;
          this.outpos += c;
        },
        addByte: function (a) {
          this.window.addByte(a);
          this.output.b[this.outpos] = a & 255;
          this.needed--;
          this.outpos++;
        },
        addDistOne: function (a) {
          var b = this.window.getLastChar();
          for (var c = 0; c < a;) {
            c++;
            this.addByte(b);
          }
        },
        addDist: function (a, b) {
          this.addBytes(this.window.buffer, this.window.pos - a, b);
        },
        applyHuffman: function (a) {
          switch (a._hx_index) {
            case 0:
              var b = a.i;
              return b;
            case 1:
              b = a.left;
              a = a.right;
              return this.applyHuffman(this.getBit() ? a : b);
            case 2:
              b = a.n;
              return this.applyHuffman(a.table[this.getBits(b)]);
          }
        },
        inflateLengths: function (a, b) {
          for (var c = 0, d = 0; c < b;) {
            var e = this.applyHuffman(this.huffman);
            switch (e) {
              case 0:
              case 1:
              case 2:
              case 3:
              case 4:
              case 5:
              case 6:
              case 7:
              case 8:
              case 9:
              case 10:
              case 11:
              case 12:
              case 13:
              case 14:
              case 15:
                d = e;
                a[c] = e;
                ++c;
                break;
              case 16:
                e = c + 3 + this.getBits(2);
                if (e > b) {
                  throw I.thrown("Invalid data");
                }
                while (c < e) {
                  a[c] = d;
                  ++c;
                }
                break;
              case 17:
                c += 3 + this.getBits(3);
                if (c > b) {
                  throw I.thrown("Invalid data");
                }
                break;
              case 18:
                c += 11 + this.getBits(7);
                if (c > b) {
                  throw I.thrown("Invalid data");
                }
                break;
              default:
                throw I.thrown("Invalid data");
            }
          }
        },
        inflateLoop: function () {
          switch (this.state._hx_index) {
            case 0:
              var a = this.input.readByte();
              if ((a & 15) != 8) {
                throw I.thrown("Invalid data");
              }
              var b = this.input.readByte();
              var c = (b & 32) != 0;
              if (((a << 8) + b) % 31 != 0) {
                throw I.thrown("Invalid data");
              }
              if (c) {
                throw I.thrown("Unsupported dictionary");
              }
              this.state = Tc.Block;
              return true;
            case 1:
              this.isFinal = this.getBit();
              switch (this.getBits(2)) {
                case 0:
                  this.len = this.input.readUInt16();
                  if (this.input.readUInt16() != 65535 - this.len) {
                    throw I.thrown("Invalid data");
                  }
                  this.state = Tc.Flat;
                  a = this.inflateLoop();
                  this.resetBits();
                  return a;
                case 1:
                  this.huffman = this.buildFixedHuffman();
                  this.huffdist = null;
                  this.state = Tc.CData;
                  return true;
                case 2:
                  a = this.getBits(5) + 257;
                  b = this.getBits(5) + 1;
                  var d = this.getBits(4) + 4;
                  c = 0;
                  for (var e = d; c < e;) {
                    var f = c++;
                    this.lengths[Fd.CODE_LENGTHS_POS[f]] = this.getBits(3);
                  }
                  c = d;
                  for (e = 19; c < e;) {
                    f = c++;
                    this.lengths[Fd.CODE_LENGTHS_POS[f]] = 0;
                  }
                  this.huffman = this.htools.make(this.lengths, 0, 19, 8);
                  d = [];
                  c = 0;
                  for (e = a + b; c < e;) {
                    c++;
                    d.push(0);
                  }
                  this.inflateLengths(d, a + b);
                  this.huffdist = this.htools.make(d, a, b, 16);
                  this.huffman = this.htools.make(d, 0, a, 16);
                  this.state = Tc.CData;
                  return true;
                default:
                  throw I.thrown("Invalid data");
              }
            case 2:
              b = this.applyHuffman(this.huffman);
              if (b < 256) {
                this.addByte(b);
                return this.needed > 0;
              }
              if (b == 256) {
                this.state = this.isFinal ? Tc.Crc : Tc.Block;
              } else {
                b -= 257;
                a = Fd.LEN_EXTRA_BITS_TBL[b];
                if (a == -1) {
                  throw I.thrown("Invalid data");
                }
                this.len = Fd.LEN_BASE_VAL_TBL[b] + this.getBits(a);
                b = this.huffdist == null ? this.getRevBits(5) : this.applyHuffman(this.huffdist);
                a = Fd.DIST_EXTRA_BITS_TBL[b];
                if (a == -1) {
                  throw I.thrown("Invalid data");
                }
                this.dist = Fd.DIST_BASE_VAL_TBL[b] + this.getBits(a);
                if (this.dist > this.window.available()) {
                  throw I.thrown("Invalid data");
                }
                this.state = this.dist == 1 ? Tc.DistOne : Tc.Dist;
              }
              return true;
            case 3:
              a = this.len < this.needed ? this.len : this.needed;
              b = this.input.read(a);
              this.len -= a;
              this.addBytes(b, 0, a);
              if (this.len == 0) {
                this.state = this.isFinal ? Tc.Crc : Tc.Block;
              }
              return this.needed > 0;
            case 4:
              a = this.window.checksum();
              if (a == null) {
                this.state = Tc.Done;
                return true;
              }
              b = ri.read(this.input);
              if (!a.equals(b)) {
                throw I.thrown("Invalid CRC");
              }
              this.state = Tc.Done;
              return true;
            case 5:
              while (this.len > 0 && this.needed > 0) {
                a = this.len < this.dist ? this.len : this.dist;
                a = this.needed < a ? this.needed : a;
                this.addDist(this.dist, a);
                this.len -= a;
              }
              if (this.len == 0) {
                this.state = Tc.CData;
              }
              return this.needed > 0;
            case 6:
              a = this.len < this.needed ? this.len : this.needed;
              this.addDistOne(a);
              this.len -= a;
              if (this.len == 0) {
                this.state = Tc.CData;
              }
              return this.needed > 0;
            case 7:
              return false;
          }
        },
        __class__: Fd
      };
      function oi(a) {
        this.i = a;
      }
      h["haxe.zip.Reader"] = oi;
      oi.__name__ = "haxe.zip.Reader";
      oi.readZip = function (a) {
        return new oi(a).read();
      };
      oi.prototype = {
        readZipDate: function () {
          var a = this.i.readUInt16();
          var b = a >> 11 & 31;
          var c = a >> 5 & 63;
          a &= 31;
          var d = this.i.readUInt16();
          return new Date((d >> 9) + 1980, (d >> 5 & 15) - 1, d & 31, b, c, a << 1);
        },
        readExtraFields: function (a) {
          var b = new mb();
          while (a > 0) {
            if (a < 4) {
              throw I.thrown("Invalid extra fields data");
            }
            var c = this.i.readUInt16();
            var d = this.i.readUInt16();
            if (a < d) {
              throw I.thrown("Invalid extra fields data");
            }
            if (c == 28789) {
              var e = this.i.readByte();
              if (e != 1) {
                var f = new Xl();
                f.addByte(e);
                f.add(this.i.read(d - 1));
                b.add(ti.FUnknown(c, f.getBytes()));
              } else {
                c = this.i.readInt32();
                e = this.i.read(d - 5).toString();
                b.add(ti.FInfoZipUnicodePath(e, c));
              }
            } else {
              b.add(ti.FUnknown(c, this.i.read(d)));
            }
            a -= 4 + d;
          }
          return b;
        },
        readEntryHeader: function () {
          var a = this.i;
          var b = a.readInt32();
          if (b == 33639248 || b == 101010256) {
            return null;
          }
          if (b != 67324752) {
            throw I.thrown("Invalid Zip Data");
          }
          a.readUInt16();
          b = a.readUInt16();
          var c = (b & 2048) != 0;
          if ((b & 63473) != 0) {
            throw I.thrown("Unsupported flags " + b);
          }
          var d = a.readUInt16();
          var e = d != 0;
          if (e && d != 8) {
            throw I.thrown("Unsupported compression " + d);
          }
          d = this.readZipDate();
          var f = a.readInt32();
          var k = a.readInt32();
          var g = a.readInt32();
          var l = a.readInt16();
          var h = a.readInt16();
          a = a.readString(l);
          h = this.readExtraFields(h);
          if (c) {
            h.push(ti.FUtf8);
          }
          if ((b & 8) != 0) {
            f = null;
          }
          return {
            fileName: a,
            fileSize: g,
            fileTime: d,
            compressed: e,
            dataSize: k,
            data: null,
            crc32: f,
            extraFields: h
          };
        },
        read: function () {
          var a = new mb();
          var b = null;
          while (true) {
            var c = this.readEntryHeader();
            if (c == null) {
              break;
            }
            if (c.crc32 == null) {
              if (c.compressed) {
                if (b == null) {
                  b = new ac(new ArrayBuffer(65536));
                }
                var d = new Xl();
                var e = new Fd(this.i, false, false);
                while (true) {
                  var f = e.readBytes(b, 0, 65536);
                  d.addBytes(b, 0, f);
                  if (f < 65536) {
                    break;
                  }
                }
                c.data = d.getBytes();
              } else {
                c.data = this.i.read(c.dataSize);
              }
              c.crc32 = this.i.readInt32();
              if (c.crc32 == 134695760) {
                c.crc32 = this.i.readInt32();
              }
              c.dataSize = this.i.readInt32();
              c.fileSize = this.i.readInt32();
              c.dataSize = c.fileSize;
              c.compressed = false;
            } else {
              c.data = this.i.read(c.dataSize);
            }
            a.add(c);
          }
          return a;
        },
        __class__: oi
      };
      function tg() {}
      h["js.Browser"] = tg;
      tg.__name__ = "js.Browser";
      tg.__properties__ = {
        get_supported: "get_supported"
      };
      tg.get_supported = function () {
        if (typeof window != "undefined" && typeof window.location != "undefined") {
          return typeof window.location.protocol == "string";
        } else {
          return false;
        }
      };
      tg.getLocalStorage = function () {
        try {
          var a = window.localStorage;
          a.getItem("");
          if (a.length == 0) {
            var b = "_hx_" + Math.random();
            a.setItem(b, b);
            a.removeItem(b);
          }
          return a;
        } catch (c) {
          Oa.lastError = c;
          return null;
        }
      };
      function ip() {}
      h["js.html._CanvasElement.CanvasUtil"] = ip;
      ip.__name__ = "js.html._CanvasElement.CanvasUtil";
      ip.getContextWebGL = function (a, b) {
        var c = a.getContext("webgl", b);
        if (c != null) {
          return c;
        }
        c = a.getContext("experimental-webgl", b);
        return c ?? null;
      };
      function jp() {}
      h["js.lib._ArrayBuffer.ArrayBufferCompat"] = jp;
      jp.__name__ = "js.lib._ArrayBuffer.ArrayBufferCompat";
      jp.sliceImpl = function (a, b) {
        a = new Uint8Array(this, a, b == null ? null : b - a);
        b = new Uint8Array(a.byteLength);
        b.set(a);
        return b.buffer;
      };
      function hn() {
        this.connected = true;
        this.buttons = [];
        this.axes = [];
      }
      h["lime._internal.backend.html5.GameDeviceData"] = hn;
      hn.__name__ = "lime._internal.backend.html5.GameDeviceData";
      hn.prototype = {
        __class__: hn
      };
      function oo(a) {
        this.parent = a;
        this.id = -1;
        this.gain = 1;
        this.position = new no();
      }
      h["lime._internal.backend.html5.HTML5AudioSource"] = oo;
      oo.__name__ = "lime._internal.backend.html5.HTML5AudioSource";
      oo.prototype = {
        dispose: function () {},
        init: function () {},
        play: function () {
          if (!this.playing && this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            this.playing = true;
            var a = this.getCurrentTime();
            this.completed = false;
            var b = this.parent.buffer.__srcHowl._volume;
            this.parent.buffer.__srcHowl._volume = this.parent.get_gain();
            this.id = this.parent.buffer.__srcHowl.play();
            this.parent.buffer.__srcHowl._volume = b;
            this.setPosition(this.parent.get_position());
            this.parent.buffer.__srcHowl.on("end", n(this, this.howl_onEnd), this.id);
            this.setCurrentTime(a);
          }
        },
        stop: function () {
          this.playing = false;
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            this.parent.buffer.__srcHowl.stop(this.id);
            this.parent.buffer.__srcHowl.off("end", n(this, this.howl_onEnd), this.id);
          }
        },
        howl_onEnd: function () {
          this.playing = false;
          if (this.loops > 0) {
            this.loops--;
            this.stop();
            this.play();
          } else {
            if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
              this.parent.buffer.__srcHowl.stop(this.id);
              this.parent.buffer.__srcHowl.off("end", n(this, this.howl_onEnd), this.id);
            }
            this.completed = true;
            this.parent.onComplete.dispatch();
          }
        },
        getCurrentTime: function () {
          if (this.id == -1) {
            return 0;
          }
          if (this.completed) {
            return this.getLength();
          }
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            var a = (this.parent.buffer.__srcHowl.seek(this.id) * 1000 | 0) - this.parent.offset;
            if (a < 0) {
              return 0;
            } else {
              return a;
            }
          }
          return 0;
        },
        setCurrentTime: function (a) {
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            var b = (a + this.parent.offset) / 1000;
            if (b < 0) {
              b = 0;
            }
            this.parent.buffer.__srcHowl.seek(b, this.id);
          }
          return a;
        },
        getGain: function () {
          return this.gain;
        },
        setGain: function (a) {
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null && this.id != -1) {
            this.parent.buffer.__srcHowl.volume(a, this.id);
          }
          return this.gain = a;
        },
        getLength: function () {
          if (this.length != 0) {
            return this.length;
          } else if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null) {
            return this.parent.buffer.__srcHowl.duration() * 1000 | 0;
          } else {
            return 0;
          }
        },
        setLength: function (a) {
          return this.length = a;
        },
        setLoops: function (a) {
          return this.loops = a;
        },
        getPitch: function () {
          return this.parent.buffer.__srcHowl.rate();
        },
        setPitch: function (a) {
          this.parent.buffer.__srcHowl.rate(a);
          return this.getPitch();
        },
        getPosition: function () {
          return this.position;
        },
        setPosition: function (a) {
          this.position.x = a.x;
          this.position.y = a.y;
          this.position.z = a.z;
          this.position.w = a.w;
          if (this.parent.buffer != null && this.parent.buffer.__srcHowl != null && this.parent.buffer.__srcHowl.pos != null) {
            this.parent.buffer.__srcHowl.pos(this.position.x, this.position.y, this.position.z, this.id);
          }
          return this.position;
        },
        __class__: oo
      };
      function Pa() {
        this.validStatus0 = new na("Tizen", "gi").match(window.navigator.userAgent);
      }
      h["lime._internal.backend.html5.HTML5HTTPRequest"] = Pa;
      Pa.__name__ = "lime._internal.backend.html5.HTML5HTTPRequest";
      Pa.loadImage = function (a) {
        var b = new Id();
        if (Pa.activeRequests < Pa.requestLimit) {
          Pa.activeRequests++;
          Pa.__loadImage(a, b, 0);
        } else {
          Pa.requestQueue.add({
            instance: null,
            uri: a,
            promise: b,
            type: "IMAGE",
            options: 0
          });
        }
        return b.future;
      };
      Pa.loadImageFromBytes = function (a, b) {
        var c = URL.createObjectURL(new Blob([a.b.bufferValue], {
          type: b
        }));
        if (c != null) {
          a = new Id();
          if (Pa.activeRequests < Pa.requestLimit) {
            Pa.activeRequests++;
            Pa.__loadImage(c, a, 1);
          } else {
            Pa.requestQueue.add({
              instance: null,
              uri: c,
              promise: a,
              type: "IMAGE",
              options: 1
            });
          }
          return a.future;
        } else {
          return Pa.loadImage("data:" + b + ";base64," + Zf.encode(a));
        }
      };
      Pa.processQueue = function () {
        if (Pa.activeRequests < Pa.requestLimit && Pa.requestQueue.length > 0) {
          Pa.activeRequests++;
          var a = Pa.requestQueue.pop();
          switch (a.type) {
            case "BINARY":
              a.instance.__loadData(a.uri, a.promise);
              break;
            case "IMAGE":
              Pa.__loadImage(a.uri, a.promise, a.options);
              break;
            case "TEXT":
              a.instance.__loadText(a.uri, a.promise);
              break;
            default:
              Pa.activeRequests--;
          }
        }
      };
      Pa.__fixHostname = function (a) {
        if (a == null) {
          return "";
        } else {
          return a;
        }
      };
      Pa.__fixPort = function (a, b) {
        if (a == null || a == "") {
          switch (b) {
            case "ftp:":
              return "21";
            case "gopher:":
              return "70";
            case "http:":
              return "80";
            case "https:":
              return "443";
            case "ws:":
              return "80";
            case "wss:":
              return "443";
            default:
              return "";
          }
        }
        return a;
      };
      Pa.__fixProtocol = function (a) {
        if (a == null || a == "") {
          return "http:";
        } else {
          return a;
        }
      };
      Pa.__isInMemoryURI = function (a) {
        if (v.startsWith(a, "data:")) {
          return true;
        } else {
          return v.startsWith(a, "blob:");
        }
      };
      Pa.__isSameOrigin = function (a) {
        if (a == null || a == "" || Pa.__isInMemoryURI(a)) {
          return true;
        }
        if (Pa.originElement == null) {
          Pa.originElement = window.document.createElement("a");
          Pa.originHostname = Pa.__fixHostname(F.location.hostname);
          Pa.originProtocol = Pa.__fixProtocol(F.location.protocol);
          Pa.originPort = Pa.__fixPort(F.location.port, Pa.originProtocol);
        }
        var b = Pa.originElement;
        b.href = a;
        if (b.hostname == "") {
          b.href = b.href;
        }
        var c = Pa.__fixHostname(b.hostname);
        a = Pa.__fixProtocol(b.protocol);
        b = Pa.__fixPort(b.port, a);
        c = c == "" || c == Pa.originHostname;
        b = b == "" || b == Pa.originPort;
        if (a != "file:" && c) {
          return b;
        } else {
          return false;
        }
      };
      Pa.__loadImage = function (a, b, c) {
        var d = new window.Image();
        if (!Pa.__isSameOrigin(a)) {
          d.crossOrigin = "Anonymous";
        }
        if (Pa.supportsImageProgress == null) {
          Pa.supportsImageProgress = "onprogress" in d;
        }
        if (Pa.supportsImageProgress || Pa.__isInMemoryURI(a)) {
          d.addEventListener("load", function (e) {
            Pa.__revokeBlobURI(a, c);
            e = new vg(null, d.width, d.height);
            e.__srcImage = d;
            Pa.activeRequests--;
            Pa.processQueue();
            b.complete(new Fb(e));
          }, false);
          d.addEventListener("progress", function (a) {
            b.progress(a.loaded, a.total);
          }, false);
          d.addEventListener("error", function (d) {
            Pa.__revokeBlobURI(a, c);
            Pa.activeRequests--;
            Pa.processQueue();
            b.error(new ui(d.detail, null));
          }, false);
          d.src = a;
        } else {
          var e = new XMLHttpRequest();
          e.onload = function (a) {
            Pa.activeRequests--;
            Pa.processQueue();
            new Fb().__fromBytes(ac.ofData(e.response), function (a) {
              b.complete(a);
            });
          };
          e.onerror = function (a) {
            b.error(new ui(a.message, null));
          };
          e.onprogress = function (a) {
            if (a.lengthComputable) {
              b.progress(a.loaded, a.total);
            }
          };
          e.open("GET", a, true);
          e.responseType = "arraybuffer";
          e.overrideMimeType("text/plain; charset=x-user-defined");
          e.send(null);
        }
      };
      Pa.__revokeBlobURI = function (a, b) {
        if ((b & 1) != 0) {
          URL.revokeObjectURL(a);
        }
      };
      Pa.prototype = {
        init: function (a) {
          this.parent = a;
        },
        load: function (a, b, c) {
          this.request = new XMLHttpRequest();
          if (this.parent.method == "POST") {
            this.request.upload.addEventListener("progress", b, false);
          } else {
            this.request.addEventListener("progress", b, false);
          }
          this.request.onreadystatechange = c;
          b = "";
          if (this.parent.data == null) {
            c = Object.keys(this.parent.formData.h);
            for (var d = c.length, e = 0; e < d;) {
              var f = c[e++];
              if (b.length > 0) {
                b += "&";
              }
              var k = this.parent.formData.h[f];
              if (f.indexOf("[]") > -1 && k instanceof Array) {
                var g = [];
                for (k = M(k); k.hasNext();) {
                  var l = k.next();
                  g.push(encodeURIComponent(l));
                }
                g = g.join("&amp;" + f + "=");
                b += encodeURIComponent(f) + "=" + g;
              } else {
                g = encodeURIComponent(f) + "=";
                f = y.string(k);
                b += g + encodeURIComponent(f);
              }
            }
            if (this.parent.method == "GET" && b != "") {
              a = a.indexOf("?") > -1 ? a + ("&" + b) : a + ("?" + b);
              b = "";
            }
          }
          this.request.open(y.string(this.parent.method), a, true);
          if (this.parent.timeout > 0) {
            this.request.timeout = this.parent.timeout;
          }
          if (this.binary) {
            this.request.responseType = "arraybuffer";
          }
          a = null;
          g = 0;
          for (c = this.parent.headers; g < c.length;) {
            d = c[g];
            ++g;
            if (d.name == "Content-Type") {
              a = d.value;
            } else {
              this.request.setRequestHeader(d.name, d.value);
            }
          }
          if (this.parent.contentType != null) {
            a = this.parent.contentType;
          }
          if (a == null) {
            if (this.parent.data != null) {
              a = "application/octet-stream";
            } else if (b != "") {
              a = "application/x-www-form-urlencoded";
            }
          }
          if (a != null) {
            this.request.setRequestHeader("Content-Type", a);
          }
          if (this.parent.withCredentials) {
            this.request.withCredentials = true;
          }
          if (this.parent.data != null) {
            this.request.send(this.parent.data.b.bufferValue);
          } else {
            this.request.send(b);
          }
        },
        loadData: function (a) {
          var b = new Id();
          if (Pa.activeRequests < Pa.requestLimit) {
            Pa.activeRequests++;
            this.__loadData(a, b);
          } else {
            Pa.requestQueue.add({
              instance: this,
              uri: a,
              promise: b,
              type: "BINARY",
              options: 0
            });
          }
          return b.future;
        },
        loadText: function (a) {
          var b = new Id();
          if (Pa.activeRequests < Pa.requestLimit) {
            Pa.activeRequests++;
            this.__loadText(a, b);
          } else {
            Pa.requestQueue.add({
              instance: this,
              uri: a,
              promise: b,
              type: "TEXT",
              options: 0
            });
          }
          return b.future;
        },
        processResponse: function () {
          if (this.parent.enableResponseHeaders) {
            this.parent.responseHeaders = [];
            var a;
            var b;
            for (var c = 0, d = this.request.getAllResponseHeaders().split("\n"); c < d.length;) {
              b = d[c];
              ++c;
              a = v.trim(L.substr(b, 0, b.indexOf(":")));
              b = v.trim(L.substr(b, b.indexOf(":") + 1, null));
              if (a != "") {
                this.parent.responseHeaders.push(new Zl(a, b));
              }
            }
          }
          this.parent.responseStatus = this.request.status;
        },
        __loadData: function (a, b) {
          var c = this;
          this.binary = true;
          this.load(a, function (a) {
            b.progress(a.loaded, a.total);
          }, function (a) {
            if (c.request.readyState == 4) {
              a = null;
              if (c.request.responseType == "") {
                if (c.request.responseText != null) {
                  a = ac.ofString(c.request.responseText);
                }
              } else if (c.request.response != null) {
                a = ac.ofData(c.request.response);
              }
              if (c.request.status != null && (c.request.status >= 200 && c.request.status < 400 || c.validStatus0 && c.request.status == 0)) {
                c.processResponse();
                b.complete(a);
              } else {
                c.processResponse();
                b.error(new ui(c.request.status, a));
              }
              c.request = null;
              Pa.activeRequests--;
              Pa.processQueue();
            }
          });
        },
        __loadText: function (a, b) {
          var c = this;
          this.binary = false;
          this.load(a, function (a) {
            b.progress(a.loaded, a.total);
          }, function (a) {
            if (c.request.readyState == 4) {
              if (c.request.status != null && (c.request.status >= 200 && c.request.status < 400 || c.validStatus0 && c.request.status == 0)) {
                c.processResponse();
                b.complete(c.request.responseText);
              } else {
                c.processResponse();
                b.error(new ui(c.request.status, c.request.responseText));
              }
              c.request = null;
              Pa.activeRequests--;
              Pa.processQueue();
            }
          });
        },
        __class__: Pa
      };
      function Xa(a) {
        this.imeCompositionActive = false;
        this.unusedTouchesPool = new mb();
        this.scale = 1;
        this.currentTouches = new Ac();
        this.parent = a;
        this.cursor = Tb.DEFAULT;
        this.cacheMouseY = this.cacheMouseX = 0;
        var b = a.__attributes;
        if (!Object.prototype.hasOwnProperty.call(b, "context")) {
          b.context = {};
        }
        this.renderType = b.context.type;
        if (Object.prototype.hasOwnProperty.call(b, "element")) {
          a.element = b.element;
        }
        var c = a.element;
        if (Object.prototype.hasOwnProperty.call(b, "allowHighDPI") && b.allowHighDPI && this.renderType != "dom") {
          this.scale = window.devicePixelRatio;
        }
        a.__scale = this.scale;
        this.setWidth = Object.prototype.hasOwnProperty.call(b, "width") ? b.width : 0;
        this.setHeight = Object.prototype.hasOwnProperty.call(b, "height") ? b.height : 0;
        a.__width = this.setWidth;
        a.__height = this.setHeight;
        a.id = Xa.windowID++;
        if (c instanceof HTMLCanvasElement) {
          this.canvas = c;
        } else if (this.renderType == "dom") {
          this.div = window.document.createElement("div");
        } else {
          this.canvas = window.document.createElement("canvas");
        }
        if (this.canvas != null) {
          var d = this.canvas.style;
          d.setProperty("-webkit-transform", "translateZ(0)", null);
          d.setProperty("transform", "translateZ(0)", null);
        } else if (this.div != null) {
          d = this.div.style;
          d.setProperty("-webkit-transform", "translate3D(0,0,0)", null);
          d.setProperty("transform", "translate3D(0,0,0)", null);
          d.position = "relative";
          d.overflow = "hidden";
          d.setProperty("-webkit-user-select", "none", null);
          d.setProperty("-moz-user-select", "none", null);
          d.setProperty("-ms-user-select", "none", null);
          d.setProperty("-o-user-select", "none", null);
        }
        if (a.__width == 0 && a.__height == 0) {
          if (c != null) {
            a.__width = c.clientWidth;
            a.__height = c.clientHeight;
          } else {
            a.__width = window.innerWidth;
            a.__height = window.innerHeight;
          }
          this.cacheElementWidth = a.__width;
          this.cacheElementHeight = a.__height;
          this.resizeElement = true;
        }
        if (this.canvas != null) {
          this.canvas.width = Math.round(a.__width * this.scale);
          this.canvas.height = Math.round(a.__height * this.scale);
          this.canvas.style.width = a.__width + "px";
          this.canvas.style.height = a.__height + "px";
        } else {
          this.div.style.width = a.__width + "px";
          this.div.style.height = a.__height + "px";
        }
        if (Object.prototype.hasOwnProperty.call(b, "resizable") && b.resizable || !Object.prototype.hasOwnProperty.call(b, "width") && this.setWidth == 0 && this.setHeight == 0) {
          a.__resizable = true;
        }
        this.updateSize();
        if (c != null) {
          if (this.canvas != null) {
            if (c != this.canvas) {
              c.appendChild(this.canvas);
            }
          } else {
            c.appendChild(this.div);
          }
          b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");
          for (d = 0; d < b.length;) {
            var e = b[d];
            ++d;
            c.addEventListener(e, n(this, this.handleMouseEvent), true);
          }
          c.addEventListener("contextmenu", n(this, this.handleContextMenuEvent), true);
          c.addEventListener("dragstart", n(this, this.handleDragEvent), true);
          c.addEventListener("dragover", n(this, this.handleDragEvent), true);
          c.addEventListener("drop", n(this, this.handleDragEvent), true);
          c.addEventListener("touchstart", n(this, this.handleTouchEvent), true);
          c.addEventListener("touchmove", n(this, this.handleTouchEvent), true);
          c.addEventListener("touchend", n(this, this.handleTouchEvent), true);
          c.addEventListener("touchcancel", n(this, this.handleTouchEvent), true);
          c.addEventListener("gamepadconnected", n(this, this.handleGamepadEvent), true);
          c.addEventListener("gamepaddisconnected", n(this, this.handleGamepadEvent), true);
        }
        this.createContext();
        if (a.context.type == "webgl") {
          this.canvas.addEventListener("webglcontextlost", n(this, this.handleContextEvent), false);
          this.canvas.addEventListener("webglcontextrestored", n(this, this.handleContextEvent), false);
        }
      }
      h["lime._internal.backend.html5.HTML5Window"] = Xa;
      Xa.__name__ = "lime._internal.backend.html5.HTML5Window";
      Xa.prototype = {
        close: function () {
          var a = this.parent.element;
          if (a != null) {
            if (this.canvas != null) {
              if (a != this.canvas) {
                a.removeChild(this.canvas);
              }
              this.canvas = null;
            } else if (this.div != null) {
              a.removeChild(this.div);
              this.div = null;
            }
            for (var b = "mousedown mouseenter mouseleave mousemove mouseup wheel".split(" "), c = 0; c < b.length;) {
              var d = b[c];
              ++c;
              a.removeEventListener(d, n(this, this.handleMouseEvent), true);
            }
            a.removeEventListener("contextmenu", n(this, this.handleContextMenuEvent), true);
            a.removeEventListener("dragstart", n(this, this.handleDragEvent), true);
            a.removeEventListener("dragover", n(this, this.handleDragEvent), true);
            a.removeEventListener("drop", n(this, this.handleDragEvent), true);
            a.removeEventListener("touchstart", n(this, this.handleTouchEvent), true);
            a.removeEventListener("touchmove", n(this, this.handleTouchEvent), true);
            a.removeEventListener("touchend", n(this, this.handleTouchEvent), true);
            a.removeEventListener("touchcancel", n(this, this.handleTouchEvent), true);
            a.removeEventListener("gamepadconnected", n(this, this.handleGamepadEvent), true);
            a.removeEventListener("gamepaddisconnected", n(this, this.handleGamepadEvent), true);
          }
          this.parent.application.__removeWindow(this.parent);
        },
        createContext: function () {
          var a = new po();
          var b = this.parent.__attributes.context;
          a.window = this.parent;
          a.attributes = b;
          if (this.div != null) {
            a.dom = this.div;
            a.type = "dom";
            a.version = "";
          } else if (this.canvas != null) {
            var c = null;
            var d = this.renderType == "canvas";
            var e = this.renderType == "opengl" || this.renderType == "opengles" || this.renderType == "webgl";
            var f = !Object.prototype.hasOwnProperty.call(b, "version") || b.version != "1";
            var k = false;
            if (e || !d && (!Object.prototype.hasOwnProperty.call(b, "hardware") || b.hardware)) {
              d = Object.prototype.hasOwnProperty.call(b, "background") && b.background == null;
              e = Object.prototype.hasOwnProperty.call(b, "colorDepth") ? b.colorDepth : 16;
              var g = Object.prototype.hasOwnProperty.call(b, "antialiasing") && b.antialiasing > 0;
              var l = Object.prototype.hasOwnProperty.call(b, "depth") ? b.depth : true;
              b = Object.prototype.hasOwnProperty.call(b, "stencil") && b.stencil;
              b = {
                alpha: d || e > 16,
                antialias: g,
                depth: l,
                premultipliedAlpha: true,
                stencil: b,
                preserveDrawingBuffer: false,
                failIfMajorPerformanceCaveat: false
              };
              d = ["webgl", "experimental-webgl"];
              if (f) {
                d.unshift("webgl2");
              }
              for (f = 0; f < d.length && (e = d[f], ++f, c = this.canvas.getContext(e, b), c != null && e == "webgl2" && (k = true), c == null););
            }
            if (c == null) {
              a.canvas2D = this.canvas.getContext("2d");
              a.type = "canvas";
              a.version = "";
            } else {
              a.webgl = Yc.fromWebGL2RenderContext(c);
              if (k) {
                a.webgl2 = c;
              }
              if (wg.context == null) {
                wg.context = c;
                wg.type = "webgl";
                wg.version = k ? 2 : 1;
              }
              a.type = "webgl";
              a.version = k ? "2" : "1";
            }
          }
          this.parent.context = a;
        },
        focusTextInput: function () {
          var a = this;
          if (!this.__focusPending) {
            this.__focusPending = true;
            jg.delay(function () {
              a.__focusPending = false;
              if (a.textInputEnabled) {
                Xa.textInput.focus();
              }
            }, 20);
          }
        },
        getFrameRate: function () {
          if (this.parent.application == null) {
            return 0;
          } else if (this.parent.application.__backend.framePeriod < 0) {
            return 60;
          } else if (this.parent.application.__backend.framePeriod == 1000) {
            return 0;
          } else {
            return 1000 / this.parent.application.__backend.framePeriod;
          }
        },
        handleContextEvent: function (a) {
          switch (a.type) {
            case "webglcontextlost":
              if (a.cancelable) {
                a.preventDefault();
              }
              this.parent.context = null;
              this.parent.onRenderContextLost.dispatch();
              break;
            case "webglcontextrestored":
              this.createContext();
              this.parent.onRenderContextRestored.dispatch(this.parent.context);
          }
        },
        handleContextMenuEvent: function (a) {
          if ((this.parent.onMouseUp.canceled || this.parent.onMouseDown.canceled) && a.cancelable) {
            a.preventDefault();
          }
        },
        handleCutOrCopyEvent: function (a) {
          var b = yc.get_text();
          if (b == null) {
            b = "";
          }
          a.clipboardData.setData("text/plain", b);
          if (a.cancelable) {
            a.preventDefault();
          }
        },
        handleDragEvent: function (a) {
          switch (a.type) {
            case "dragover":
              a.preventDefault();
              return false;
            case "dragstart":
              if (wa.__cast(a.target, HTMLElement).nodeName.toLowerCase() == "img" && a.cancelable) {
                a.preventDefault();
                return false;
              }
              break;
            case "drop":
              if (a.dataTransfer != null && a.dataTransfer.files.length > 0) {
                this.parent.onDropFile.dispatch(a.dataTransfer.files);
                a.preventDefault();
                return false;
              }
          }
          return true;
        },
        handleFocusEvent: function (a) {
          if (this.textInputEnabled && (a.relatedTarget == null || this.isDescendent(a.relatedTarget))) {
            this.focusTextInput();
          }
        },
        handleFullscreenEvent: function (a) {
          if ((document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement || document.msFullscreenElement) != null) {
            this.isFullscreen = true;
            this.parent.__fullscreen = true;
            if (this.requestedFullscreen) {
              this.requestedFullscreen = false;
              this.parent.onFullscreen.dispatch();
            }
          } else {
            this.isFullscreen = false;
            this.parent.__fullscreen = false;
            this.parent.onRestore.dispatch();
            a = ["fullscreenchange", "mozfullscreenchange", "webkitfullscreenchange", "MSFullscreenChange"];
            var b = ["fullscreenerror", "mozfullscreenerror", "webkitfullscreenerror", "MSFullscreenError"];
            for (var c = 0, d = a.length; c < d;) {
              var e = c++;
              window.document.removeEventListener(a[e], n(this, this.handleFullscreenEvent), false);
              window.document.removeEventListener(b[e], n(this, this.handleFullscreenEvent), false);
            }
          }
        },
        handleGamepadEvent: function (a) {
          switch (a.type) {
            case "gamepadconnected":
              Kc.__connect(a.gamepad.index);
              if (a.gamepad.mapping == "standard") {
                Oc.__connect(a.gamepad.index);
              }
              break;
            case "gamepaddisconnected":
              Kc.__disconnect(a.gamepad.index);
              Oc.__disconnect(a.gamepad.index);
          }
        },
        handleInputEvent: function (a) {
          if (!this.imeCompositionActive && Xa.textInput.value != Xa.dummyCharacter) {
            a = v.replace(Xa.textInput.value, Xa.dummyCharacter, "");
            if (a.length > 0) {
              this.parent.onTextInput.dispatch(a);
            }
            Xa.textInput.value = Xa.dummyCharacter;
          }
        },
        handleMouseEvent: function (a) {
          if (a.type != "wheel") {
            if (this.parent.element != null) {
              if (this.canvas != null) {
                var b = this.canvas.getBoundingClientRect();
                var c = this.parent.__width / b.width * (a.clientX - b.left);
                b = this.parent.__height / b.height * (a.clientY - b.top);
              } else if (this.div != null) {
                b = this.div.getBoundingClientRect();
                c = a.clientX - b.left;
                b = a.clientY - b.top;
              } else {
                b = this.parent.element.getBoundingClientRect();
                c = this.parent.__width / b.width * (a.clientX - b.left);
                b = this.parent.__height / b.height * (a.clientY - b.top);
              }
            } else {
              c = a.clientX;
              b = a.clientY;
            }
            switch (a.type) {
              case "mousedown":
                if (a.currentTarget == this.parent.element) {
                  window.addEventListener("mouseup", n(this, this.handleMouseEvent));
                }
                this.parent.clickCount = a.detail;
                this.parent.onMouseDown.dispatch(c, b, a.button);
                this.parent.clickCount = 0;
                if (this.parent.onMouseDown.canceled && a.cancelable) {
                  a.preventDefault();
                }
                break;
              case "mouseenter":
                if (a.target == this.parent.element) {
                  this.parent.onEnter.dispatch();
                  if (this.parent.onEnter.canceled && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mouseleave":
                if (a.target == this.parent.element) {
                  this.parent.onLeave.dispatch();
                  if (this.parent.onLeave.canceled && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mousemove":
                if (c != this.cacheMouseX || b != this.cacheMouseY) {
                  this.parent.onMouseMove.dispatch(c, b);
                  this.parent.onMouseMoveRelative.dispatch(c - this.cacheMouseX, b - this.cacheMouseY);
                  if ((this.parent.onMouseMove.canceled || this.parent.onMouseMoveRelative.canceled) && a.cancelable) {
                    a.preventDefault();
                  }
                }
                break;
              case "mouseup":
                window.removeEventListener("mouseup", n(this, this.handleMouseEvent));
                if (a.currentTarget == this.parent.element) {
                  a.stopPropagation();
                }
                this.parent.clickCount = a.detail;
                this.parent.onMouseUp.dispatch(c, b, a.button);
                this.parent.clickCount = 0;
                if (this.parent.onMouseUp.canceled && a.cancelable) {
                  a.preventDefault();
                }
            }
            this.cacheMouseX = c;
            this.cacheMouseY = b;
          } else {
            switch (a.deltaMode) {
              case 0:
                c = Xg.PIXELS;
                break;
              case 1:
                c = Xg.LINES;
                break;
              case 2:
                c = Xg.PAGES;
                break;
              default:
                c = Xg.UNKNOWN;
            }
            this.parent.onMouseWheel.dispatch(a.deltaX, -a.deltaY, c);
            if (this.parent.onMouseWheel.canceled && a.cancelable) {
              a.preventDefault();
            }
          }
        },
        handlePasteEvent: function (a) {
          if (a.clipboardData.types.indexOf("text/plain") > -1) {
            var b = a.clipboardData.getData("text/plain");
            yc.set_text(b);
            if (this.textInputEnabled) {
              this.parent.onTextInput.dispatch(b);
            }
            if (a.cancelable) {
              a.preventDefault();
            }
          }
        },
        handleResizeEvent: function (a) {
          this.primaryTouch = null;
          this.updateSize();
        },
        handleTouchEvent: function (a) {
          if (a.cancelable) {
            a.preventDefault();
          }
          var b = null;
          if (this.parent.element != null) {
            b = this.canvas != null ? this.canvas.getBoundingClientRect() : this.div != null ? this.div.getBoundingClientRect() : this.parent.element.getBoundingClientRect();
          }
          var c = this.setWidth;
          var d = this.setHeight;
          if (c == 0 || d == 0) {
            if (b != null) {
              c = b.width;
              d = b.height;
            } else {
              d = c = 1;
            }
          }
          var e;
          var f;
          var k;
          var g;
          var l;
          for (var h = 0, p = a.changedTouches; h < p.length;) {
            var m = p[h];
            ++h;
            if (b != null) {
              f = c / b.width * (m.clientX - b.left);
              k = d / b.height * (m.clientY - b.top);
            } else {
              f = m.clientX;
              k = m.clientY;
            }
            if (a.type == "touchstart") {
              e = this.unusedTouchesPool.pop();
              if (e == null) {
                e = new Dc(f / c, k / d, m.identifier, 0, 0, m.force, this.parent.id);
              } else {
                e.x = f / c;
                e.y = k / d;
                e.id = m.identifier;
                e.dx = 0;
                e.dy = 0;
                e.pressure = m.force;
                e.device = this.parent.id;
              }
              this.currentTouches.h[m.identifier] = e;
              Dc.onStart.dispatch(e);
              if (this.primaryTouch == null) {
                this.primaryTouch = e;
              }
              if (e == this.primaryTouch) {
                this.parent.onMouseDown.dispatch(f, k, 0);
              }
            } else {
              e = this.currentTouches.h[m.identifier];
              if (e != null) {
                g = e.x;
                l = e.y;
                e.x = f / c;
                e.y = k / d;
                e.dx = e.x - g;
                e.dy = e.y - l;
                e.pressure = m.force;
                switch (a.type) {
                  case "touchcancel":
                    Dc.onCancel.dispatch(e);
                    this.currentTouches.remove(m.identifier);
                    this.unusedTouchesPool.add(e);
                    if (e == this.primaryTouch) {
                      this.primaryTouch = null;
                    }
                    break;
                  case "touchend":
                    Dc.onEnd.dispatch(e);
                    this.currentTouches.remove(m.identifier);
                    this.unusedTouchesPool.add(e);
                    if (e == this.primaryTouch) {
                      this.parent.onMouseUp.dispatch(f, k, 0);
                      this.primaryTouch = null;
                    }
                    break;
                  case "touchmove":
                    Dc.onMove.dispatch(e);
                    if (e == this.primaryTouch) {
                      this.parent.onMouseMove.dispatch(f, k);
                    }
                }
              }
            }
          }
        },
        isDescendent: function (a) {
          if (a == this.parent.element) {
            return true;
          }
          while (a != null) {
            if (a.parentNode == this.parent.element) {
              return true;
            }
            a = a.parentNode;
          }
          return false;
        },
        setClipboard: function (a) {
          if (Xa.textArea == null) {
            Xa.textArea = window.document.createElement("textarea");
            Xa.textArea.style.height = "0px";
            Xa.textArea.style.left = "-100px";
            Xa.textArea.style.opacity = "0";
            Xa.textArea.style.position = "fixed";
            Xa.textArea.style.top = "-100px";
            Xa.textArea.style.width = "0px";
            window.document.body.appendChild(Xa.textArea);
          }
          Xa.textArea.value = a;
          Xa.textArea.focus();
          Xa.textArea.select();
          if (window.document.queryCommandEnabled("copy")) {
            window.document.execCommand("copy");
          }
          if (this.textInputEnabled) {
            this.focusTextInput();
          }
        },
        setCursor: function (a) {
          if (this.cursor != a) {
            if (a == null) {
              this.parent.element.style.cursor = "none";
            } else {
              switch (a._hx_index) {
                case 0:
                  var b = "default";
                  break;
                case 1:
                  b = "crosshair";
                  break;
                case 3:
                  b = "move";
                  break;
                case 4:
                  b = "pointer";
                  break;
                case 5:
                  b = "nesw-resize";
                  break;
                case 6:
                  b = "ns-resize";
                  break;
                case 7:
                  b = "nwse-resize";
                  break;
                case 8:
                  b = "ew-resize";
                  break;
                case 9:
                  b = "text";
                  break;
                case 10:
                  b = "wait";
                  break;
                case 11:
                  b = "wait";
                  break;
                default:
                  b = "auto";
              }
              this.parent.element.style.cursor = b;
            }
            this.cursor = a;
          }
          return this.cursor;
        },
        setFrameRate: function (a) {
          if (this.parent.application != null) {
            if (a >= 60) {
              if (this.parent == this.parent.application.__window) {
                this.parent.application.__backend.framePeriod = -1;
              }
            } else if (a > 0) {
              if (this.parent == this.parent.application.__window) {
                this.parent.application.__backend.framePeriod = 1000 / a;
              }
            } else if (this.parent == this.parent.application.__window) {
              this.parent.application.__backend.framePeriod = 1000;
            }
          }
          return a;
        },
        setFullscreen: function (a) {
          if (a) {
            if (!this.requestedFullscreen && !this.isFullscreen) {
              this.requestedFullscreen = true;
              r = this.parent.element;
              if (n(r, r.requestFullscreen)) {
                document.addEventListener("fullscreenchange", n(this, this.handleFullscreenEvent), false);
                document.addEventListener("fullscreenerror", n(this, this.handleFullscreenEvent), false);
                this.parent.element.requestFullscreen();
              } else if (this.parent.element.mozRequestFullScreen) {
                document.addEventListener("mozfullscreenchange", n(this, this.handleFullscreenEvent), false);
                document.addEventListener("mozfullscreenerror", n(this, this.handleFullscreenEvent), false);
                this.parent.element.mozRequestFullScreen();
              } else if (this.parent.element.webkitRequestFullscreen) {
                document.addEventListener("webkitfullscreenchange", n(this, this.handleFullscreenEvent), false);
                document.addEventListener("webkitfullscreenerror", n(this, this.handleFullscreenEvent), false);
                this.parent.element.webkitRequestFullscreen();
              } else if (this.parent.element.msRequestFullscreen) {
                document.addEventListener("MSFullscreenChange", n(this, this.handleFullscreenEvent), false);
                document.addEventListener("MSFullscreenError", n(this, this.handleFullscreenEvent), false);
                this.parent.element.msRequestFullscreen();
              }
            }
          } else if (this.isFullscreen) {
            this.requestedFullscreen = false;
            if (document.exitFullscreen) {
              document.exitFullscreen();
            } else if (document.mozCancelFullScreen) {
              document.mozCancelFullScreen();
            } else if (document.webkitExitFullscreen) {
              document.webkitExitFullscreen();
            } else if (document.msExitFullscreen) {
              document.msExitFullscreen();
            }
          }
          return a;
        },
        setTextInputEnabled: function (a) {
          if (a) {
            if (Xa.textInput == null) {
              Xa.textInput = window.document.createElement("input");
              var b = F.navigator.userAgent.indexOf("Android") >= 0 ? "password" : "text";
              Xa.textInput.type = b;
              Xa.textInput.style.position = "absolute";
              Xa.textInput.style.opacity = "0";
              Xa.textInput.style.color = "transparent";
              Xa.textInput.value = Xa.dummyCharacter;
              Xa.textInput.autocapitalize = "off";
              Xa.textInput.autocorrect = "off";
              Xa.textInput.autocomplete = "off";
              Xa.textInput.style.left = "0px";
              Xa.textInput.style.top = "50%";
              if (new na("(iPad|iPhone|iPod).*OS 8_", "gi").match(window.navigator.userAgent)) {
                Xa.textInput.style.fontSize = "0px";
                Xa.textInput.style.width = "0px";
                Xa.textInput.style.height = "0px";
              } else {
                Xa.textInput.style.width = "1px";
                Xa.textInput.style.height = "1px";
              }
              Xa.textInput.style.pointerEvents = "none";
              Xa.textInput.style.zIndex = "-10000000";
            }
            if (Xa.textInput.parentNode == null) {
              this.parent.element.appendChild(Xa.textInput);
            }
            if (!this.textInputEnabled) {
              Xa.textInput.addEventListener("input", n(this, this.handleInputEvent), true);
              Xa.textInput.addEventListener("blur", n(this, this.handleFocusEvent), true);
              Xa.textInput.addEventListener("cut", n(this, this.handleCutOrCopyEvent), true);
              Xa.textInput.addEventListener("copy", n(this, this.handleCutOrCopyEvent), true);
              Xa.textInput.addEventListener("paste", n(this, this.handlePasteEvent), true);
              Xa.textInput.addEventListener("compositionstart", n(this, this.handleCompositionstartEvent), true);
              Xa.textInput.addEventListener("compositionend", n(this, this.handleCompositionendEvent), true);
            }
            Xa.textInput.focus();
            Xa.textInput.select();
          } else if (Xa.textInput != null) {
            Xa.textInput.blur();
            Xa.textInput.removeEventListener("input", n(this, this.handleInputEvent), true);
            Xa.textInput.removeEventListener("blur", n(this, this.handleFocusEvent), true);
            Xa.textInput.removeEventListener("cut", n(this, this.handleCutOrCopyEvent), true);
            Xa.textInput.removeEventListener("copy", n(this, this.handleCutOrCopyEvent), true);
            Xa.textInput.removeEventListener("paste", n(this, this.handlePasteEvent), true);
            Xa.textInput.removeEventListener("compositionstart", n(this, this.handleCompositionstartEvent), true);
            Xa.textInput.removeEventListener("compositionend", n(this, this.handleCompositionendEvent), true);
          }
          return this.textInputEnabled = a;
        },
        setTextInputRect: function (a) {
          return this.textInputRect = a;
        },
        handleCompositionstartEvent: function (a) {
          this.imeCompositionActive = true;
        },
        handleCompositionendEvent: function (a) {
          this.imeCompositionActive = false;
          this.handleInputEvent(a);
        },
        updateSize: function () {
          if (this.parent.__resizable) {
            if (this.parent.element != null) {
              var a = this.parent.element.clientWidth;
              var b = this.parent.element.clientHeight;
            } else {
              a = window.innerWidth;
              b = window.innerHeight;
            }
            if (a != this.cacheElementWidth || b != this.cacheElementHeight) {
              this.cacheElementWidth = a;
              this.cacheElementHeight = b;
              var c = this.resizeElement || this.setWidth == 0 && this.setHeight == 0;
              if (this.parent.element != null && (this.div == null || this.div != null && c)) {
                if (c) {
                  if (this.parent.__width != a || this.parent.__height != b) {
                    this.parent.__width = a;
                    this.parent.__height = b;
                    if (this.canvas != null) {
                      if (this.parent.element != this.canvas) {
                        this.canvas.width = Math.round(a * this.scale);
                        this.canvas.height = Math.round(b * this.scale);
                        this.canvas.style.width = a + "px";
                        this.canvas.style.height = b + "px";
                      }
                    } else {
                      this.div.style.width = a + "px";
                      this.div.style.height = b + "px";
                    }
                    this.parent.onResize.dispatch(a, b);
                  }
                } else {
                  c = this.setWidth != 0 ? a / this.setWidth : 1;
                  var d = this.setHeight != 0 ? b / this.setHeight : 1;
                  var e = a;
                  var f = b;
                  var k = 0;
                  var g = 0;
                  if (c < d) {
                    f = Math.floor(this.setHeight * c);
                    g = Math.floor((b - f) / 2);
                  } else {
                    e = Math.floor(this.setWidth * d);
                    k = Math.floor((a - e) / 2);
                  }
                  if (this.canvas != null) {
                    if (this.parent.element != this.canvas) {
                      this.canvas.style.width = e + "px";
                      this.canvas.style.height = f + "px";
                      this.canvas.style.marginLeft = k + "px";
                      this.canvas.style.marginTop = g + "px";
                    }
                  } else {
                    this.div.style.width = e + "px";
                    this.div.style.height = f + "px";
                    this.div.style.marginLeft = k + "px";
                    this.div.style.marginTop = g + "px";
                  }
                }
              }
            }
          }
        },
        __class__: Xa
      };
      function Zf() {}
      h["lime._internal.format.Base64"] = Zf;
      Zf.__name__ = "lime._internal.format.Base64";
      Zf.encode = function (a) {
        var b = [];
        var c = Zf.DICTIONARY;
        var d = Zf.EXTENDED_DICTIONARY;
        var e = a.length;
        var f = Math.floor(e / 3);
        var k = f * 2;
        b.length = Math.ceil(e / 3) * 2;
        var g = 0;
        for (var l = 0, h; l < k;) {
          h = a.b[g] << 16 | a.b[g + 1] << 8 | a.b[g + 2];
          b[l] = d[h >> 12 & 4095];
          b[l + 1] = d[h & 4095];
          g += 3;
          l += 2;
        }
        switch (e - f * 3) {
          case 1:
            h = a.b[g] << 16;
            b[l] = d[h >> 12 & 4095];
            b[l + 1] = "==";
            break;
          case 2:
            h = a.b[g] << 16 | a.b[g + 1] << 8;
            b[l] = d[h >> 12 & 4095];
            b[l + 1] = c[h >> 6 & 63] + "=";
        }
        return b.join("");
      };
      function io() {}
      h["lime._internal.format.Deflate"] = io;
      io.__name__ = "lime._internal.format.Deflate";
      io.decompress = function (a) {
        a = pako.inflateRaw(a.b.bufferValue);
        return ac.ofData(a);
      };
      function kp() {}
      h["lime._internal.format.GZip"] = kp;
      kp.__name__ = "lime._internal.format.GZip";
      kp.decompress = function (a) {
        a = pako.ungzip(a.b.bufferValue);
        return ac.ofData(a);
      };
      function lp() {}
      h["lime._internal.format.LZMA"] = lp;
      lp.__name__ = "lime._internal.format.LZMA";
      lp.decompress = function (a) {
        return null;
      };
      function mp() {}
      h["lime._internal.format.Zlib"] = mp;
      mp.__name__ = "lime._internal.format.Zlib";
      mp.decompress = function (a) {
        a = pako.inflate(a.b.bufferValue);
        return ac.ofData(a);
      };
      function Wa() {}
      h["lime._internal.graphics.ImageCanvasUtil"] = Wa;
      Wa.__name__ = "lime._internal.graphics.ImageCanvasUtil";
      Wa.colorTransform = function (a, b, c) {
        Wa.convertToData(a);
        zc.colorTransform(a, b, c);
      };
      Wa.convertToCanvas = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = a.buffer;
        if (c.__srcImage != null) {
          if (c.__srcCanvas == null) {
            Wa.createCanvas(a, c.__srcImage.width, c.__srcImage.height);
            c.__srcContext.drawImage(c.__srcImage, 0, 0);
          }
          c.__srcImage = null;
        } else if (c.__srcCanvas == null && c.data != null) {
          a.set_transparent(true);
          Wa.createCanvas(a, c.width, c.height);
          Wa.createImageData(a);
          c.__srcContext.putImageData(c.__srcImageData, 0, 0);
        } else if (a.type == Gd.DATA && c.__srcImageData != null && a.dirty) {
          c.__srcContext.putImageData(c.__srcImageData, 0, 0);
          a.dirty = false;
        }
        if (b) {
          c.data = null;
          c.__srcImageData = null;
        } else if (c.data == null && c.__srcImageData != null) {
          c.data = c.__srcImageData.data;
        }
        a.type = Gd.CANVAS;
      };
      Wa.convertToData = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = a.buffer;
        if (c.__srcImage != null) {
          Wa.convertToCanvas(a);
        }
        if (c.__srcCanvas != null && c.data == null) {
          Wa.createImageData(a);
          if (a.type == Gd.CANVAS) {
            a.dirty = false;
          }
        } else if (a.type == Gd.CANVAS && c.__srcCanvas != null && a.dirty) {
          if (c.__srcImageData == null) {
            Wa.createImageData(a);
          } else {
            c.__srcImageData = c.__srcContext.getImageData(0, 0, c.width, c.height);
            var d = c.__srcImageData.data.buffer;
            d = d != null ? new Uint8Array(d) : null;
            c.data = d;
          }
          a.dirty = false;
        }
        if (b) {
          a.buffer.__srcCanvas = null;
          a.buffer.__srcContext = null;
        }
        a.type = Gd.DATA;
      };
      Wa.copyChannel = function (a, b, c, d, e, f) {
        Wa.convertToData(b);
        Wa.convertToData(a);
        zc.copyChannel(a, b, c, d, e, f);
      };
      Wa.copyPixels = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (d != null && !(d.x >= a.width) && !(d.y >= a.height) && c != null && !(c.width < 1) && !(c.height < 1)) {
          if (e != null && e.get_transparent()) {
            if (f == null) {
              f = new bi();
            }
            b = b.clone();
            b.copyChannel(e, new Je(c.x + f.x, c.y + f.y, c.width, c.height), new bi(c.x, c.y), vi.ALPHA, vi.ALPHA);
          }
          Wa.convertToCanvas(a, true);
          if (!k) {
            if (a.get_transparent() && b.get_transparent()) {
              a.buffer.__srcContext.clearRect(d.x + a.offsetX, d.y + a.offsetY, c.width + a.offsetX, c.height + a.offsetY);
            }
          }
          Wa.convertToCanvas(b);
          if (b.buffer.get_src() != null) {
            a.buffer.__srcContext.globalCompositeOperation = "source-over";
            a.buffer.__srcContext.drawImage(b.buffer.get_src(), c.x + b.offsetX | 0, c.y + b.offsetY | 0, c.width | 0, c.height | 0, d.x + a.offsetX | 0, d.y + a.offsetY | 0, c.width | 0, c.height | 0);
          }
          a.dirty = true;
          a.version++;
        }
      };
      Wa.createCanvas = function (a, b, c) {
        var d = a.buffer;
        if (d.__srcCanvas == null) {
          d.__srcCanvas = window.document.createElement("canvas");
          d.__srcCanvas.width = b;
          d.__srcCanvas.height = c;
          if (a.get_transparent()) {
            d.__srcContext = d.__srcCanvas.getContext("2d");
          } else {
            if (!a.get_transparent()) {
              d.__srcCanvas.setAttribute("moz-opaque", "true");
            }
            d.__srcContext = d.__srcCanvas.getContext("2d", {
              alpha: false
            });
          }
        }
      };
      Wa.createImageData = function (a) {
        a = a.buffer;
        if (a.__srcImageData == null) {
          if (a.data == null) {
            a.__srcImageData = a.__srcContext.getImageData(0, 0, a.width, a.height);
          } else {
            a.__srcImageData = a.__srcContext.createImageData(a.width, a.height);
            a.__srcImageData.data.set(a.data);
          }
          var b = a.__srcImageData.data.buffer;
          b = b != null ? new Uint8Array(b) : null;
          a.data = b;
        }
      };
      Wa.fillRect = function (a, b, c, d) {
        Wa.convertToCanvas(a);
        if (d == 1) {
          d = c >> 16 & 255;
          var e = c >> 8 & 255;
          var f = c & 255;
          c = a.get_transparent() ? c >> 24 & 255 : 255;
        } else {
          d = c >> 24 & 255;
          e = c >> 16 & 255;
          f = c >> 8 & 255;
          c = a.get_transparent() ? c & 255 : 255;
        }
        if (b.x == 0 && b.y == 0 && b.width == a.width && b.height == a.height && a.get_transparent() && c == 0) {
          a.buffer.__srcCanvas.width = a.buffer.width;
        } else {
          if (c < 255) {
            a.buffer.__srcContext.clearRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY);
          }
          if (c > 0) {
            a.buffer.__srcContext.fillStyle = "rgba(" + d + ", " + e + ", " + f + ", " + c / 255 + ")";
            a.buffer.__srcContext.fillRect(b.x + a.offsetX, b.y + a.offsetY, b.width + a.offsetX, b.height + a.offsetY);
          }
          a.dirty = true;
          a.version++;
        }
      };
      Wa.getPixel32 = function (a, b, c, d) {
        Wa.convertToData(a);
        return zc.getPixel32(a, b, c, d);
      };
      Wa.setPixel = function (a, b, c, d, e) {
        Wa.convertToData(a);
        zc.setPixel(a, b, c, d, e);
      };
      Wa.setPixel32 = function (a, b, c, d, e) {
        Wa.convertToData(a);
        zc.setPixel32(a, b, c, d, e);
      };
      Wa.sync = function (a, b) {
        if (a != null) {
          if (a.type != Gd.CANVAS || a.buffer.__srcCanvas == null && a.buffer.data == null) {
            if (a.type == Gd.DATA) {
              Wa.convertToData(a, b);
            }
          } else {
            Wa.convertToCanvas(a, b);
          }
        }
      };
      function zc() {}
      h["lime._internal.graphics.ImageDataUtil"] = zc;
      zc.__name__ = "lime._internal.graphics.ImageDataUtil";
      zc.colorTransform = function (a, b, c) {
        var d = a.buffer.data;
        if (d != null) {
          var e = a.buffer.format;
          var f = a.buffer.premultiplied;
          b = new xg(a, b);
          var k = nd.getAlphaTable(c);
          var g = nd.getRedTable(c);
          var l = nd.getGreenTable(c);
          c = nd.getBlueTable(c);
          var h;
          var p;
          var m = 0;
          for (var n = 0, q = b.height; n < q;) {
            h = n++;
            h = b.byteOffset + b.stride * h;
            for (var r = 0, w = b.width; r < w;) {
              p = r++;
              p = h + p * 4;
              var u = e;
              var v = f;
              if (v == null) {
                v = false;
              }
              if (u == null) {
                u = 0;
              }
              switch (u) {
                case 0:
                  m = (d[p] & 255) << 24 | (d[p + 1] & 255) << 16 | (d[p + 2] & 255) << 8 | d[p + 3] & 255;
                  break;
                case 1:
                  m = (d[p + 1] & 255) << 24 | (d[p + 2] & 255) << 16 | (d[p + 3] & 255) << 8 | d[p] & 255;
                  break;
                case 2:
                  m = (d[p + 2] & 255) << 24 | (d[p + 1] & 255) << 16 | (d[p] & 255) << 8 | d[p + 3] & 255;
              }
              if (v && (m & 255) != 0 && (m & 255) != 255) {
                O.unmult = 255 / (m & 255);
                m = (O.__clamp[Math.round((m >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((m >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((m >>> 8 & 255) * O.unmult)] & 255) << 8 | m & 255;
              }
              m = (g[m >>> 24 & 255] & 255) << 24 | (l[m >>> 16 & 255] & 255) << 16 | (c[m >>> 8 & 255] & 255) << 8 | k[m & 255] & 255;
              u = e;
              v = f;
              if (v == null) {
                v = false;
              }
              if (u == null) {
                u = 0;
              }
              if (v) {
                if ((m & 255) == 0) {
                  if (m != 0) {
                    m = 0;
                  }
                } else if ((m & 255) != 255) {
                  O.a16 = O.__alpha16[m & 255];
                  m = ((m >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((m >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((m >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | m & 255;
                }
              }
              switch (u) {
                case 0:
                  d[p] = m >>> 24 & 255;
                  d[p + 1] = m >>> 16 & 255;
                  d[p + 2] = m >>> 8 & 255;
                  d[p + 3] = m & 255;
                  break;
                case 1:
                  d[p] = m & 255;
                  d[p + 1] = m >>> 24 & 255;
                  d[p + 2] = m >>> 16 & 255;
                  d[p + 3] = m >>> 8 & 255;
                  break;
                case 2:
                  d[p] = m >>> 8 & 255;
                  d[p + 1] = m >>> 16 & 255;
                  d[p + 2] = m >>> 24 & 255;
                  d[p + 3] = m & 255;
              }
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      zc.copyChannel = function (a, b, c, d, e, f) {
        switch (f._hx_index) {
          case 0:
            var k = 0;
            break;
          case 1:
            k = 1;
            break;
          case 2:
            k = 2;
            break;
          case 3:
            k = 3;
        }
        switch (e._hx_index) {
          case 0:
            var g = 0;
            break;
          case 1:
            g = 1;
            break;
          case 2:
            g = 2;
            break;
          case 3:
            g = 3;
        }
        e = b.buffer.data;
        f = a.buffer.data;
        if (e != null && f != null) {
          c = new xg(b, c);
          d = new xg(a, new Je(d.x, d.y, c.width, c.height));
          var l = b.buffer.format;
          var h = a.buffer.format;
          b = b.buffer.premultiplied;
          var p = a.buffer.premultiplied;
          var m;
          var n;
          var q = 0;
          var r = 0;
          var w = 0;
          for (var u = 0, v = d.height; u < v;) {
            n = u++;
            m = c.byteOffset + c.stride * n;
            n = d.byteOffset + d.stride * n;
            for (var A = 0, Y = d.width; A < Y;) {
              A++;
              var z = l;
              var y = b;
              if (y == null) {
                y = false;
              }
              if (z == null) {
                z = 0;
              }
              switch (z) {
                case 0:
                  q = (e[m] & 255) << 24 | (e[m + 1] & 255) << 16 | (e[m + 2] & 255) << 8 | e[m + 3] & 255;
                  break;
                case 1:
                  q = (e[m + 1] & 255) << 24 | (e[m + 2] & 255) << 16 | (e[m + 3] & 255) << 8 | e[m] & 255;
                  break;
                case 2:
                  q = (e[m + 2] & 255) << 24 | (e[m + 1] & 255) << 16 | (e[m] & 255) << 8 | e[m + 3] & 255;
              }
              if (y && (q & 255) != 0 && (q & 255) != 255) {
                O.unmult = 255 / (q & 255);
                q = (O.__clamp[Math.round((q >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((q >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((q >>> 8 & 255) * O.unmult)] & 255) << 8 | q & 255;
              }
              z = h;
              y = p;
              if (y == null) {
                y = false;
              }
              if (z == null) {
                z = 0;
              }
              switch (z) {
                case 0:
                  r = (f[n] & 255) << 24 | (f[n + 1] & 255) << 16 | (f[n + 2] & 255) << 8 | f[n + 3] & 255;
                  break;
                case 1:
                  r = (f[n + 1] & 255) << 24 | (f[n + 2] & 255) << 16 | (f[n + 3] & 255) << 8 | f[n] & 255;
                  break;
                case 2:
                  r = (f[n + 2] & 255) << 24 | (f[n + 1] & 255) << 16 | (f[n] & 255) << 8 | f[n + 3] & 255;
              }
              if (y && (r & 255) != 0 && (r & 255) != 255) {
                O.unmult = 255 / (r & 255);
                r = (O.__clamp[Math.round((r >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((r >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((r >>> 8 & 255) * O.unmult)] & 255) << 8 | r & 255;
              }
              switch (g) {
                case 0:
                  w = q >>> 24 & 255;
                  break;
                case 1:
                  w = q >>> 16 & 255;
                  break;
                case 2:
                  w = q >>> 8 & 255;
                  break;
                case 3:
                  w = q & 255;
              }
              switch (k) {
                case 0:
                  r = (w & 255) << 24 | (r >>> 16 & 255) << 16 | (r >>> 8 & 255) << 8 | r & 255;
                  break;
                case 1:
                  r = (r >>> 24 & 255) << 24 | (w & 255) << 16 | (r >>> 8 & 255) << 8 | r & 255;
                  break;
                case 2:
                  r = (r >>> 24 & 255) << 24 | (r >>> 16 & 255) << 16 | (w & 255) << 8 | r & 255;
                  break;
                case 3:
                  r = (r >>> 24 & 255) << 24 | (r >>> 16 & 255) << 16 | (r >>> 8 & 255) << 8 | w & 255;
              }
              z = h;
              y = p;
              if (y == null) {
                y = false;
              }
              if (z == null) {
                z = 0;
              }
              if (y) {
                if ((r & 255) == 0) {
                  if (r != 0) {
                    r = 0;
                  }
                } else if ((r & 255) != 255) {
                  O.a16 = O.__alpha16[r & 255];
                  r = ((r >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((r >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((r >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | r & 255;
                }
              }
              switch (z) {
                case 0:
                  f[n] = r >>> 24 & 255;
                  f[n + 1] = r >>> 16 & 255;
                  f[n + 2] = r >>> 8 & 255;
                  f[n + 3] = r & 255;
                  break;
                case 1:
                  f[n] = r & 255;
                  f[n + 1] = r >>> 24 & 255;
                  f[n + 2] = r >>> 16 & 255;
                  f[n + 3] = r >>> 8 & 255;
                  break;
                case 2:
                  f[n] = r >>> 8 & 255;
                  f[n + 1] = r >>> 16 & 255;
                  f[n + 2] = r >>> 24 & 255;
                  f[n + 3] = r & 255;
              }
              m += 4;
              n += 4;
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      zc.copyPixels = function (a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (a.width == b.width && a.height == b.height && c.width == b.width && c.height == b.height && c.x == 0 && c.y == 0 && d.x == 0 && d.y == 0 && e == null && f == null && k == 0 && a.get_format() == b.get_format()) {
          a.buffer.data.set(b.buffer.data);
        } else {
          var g = b.buffer.data;
          var l = a.buffer.data;
          if (g == null || l == null) {
            return;
          }
          c = new xg(b, c);
          var h = new Je(d.x, d.y, c.width, c.height);
          h = new xg(a, h);
          var p = b.buffer.format;
          var m = a.buffer.format;
          var n = 0;
          var r = 0;
          var q = b.buffer.premultiplied;
          var w = a.buffer.premultiplied;
          var u = b.buffer.bitsPerPixel / 8 | 0;
          var v = a.buffer.bitsPerPixel / 8 | 0;
          var A = e != null && e.get_transparent();
          var Y = k || A && !a.get_transparent() || !k && !a.get_transparent() && b.get_transparent();
          if (A) {
            v = e.buffer.data;
            b = e.buffer.format;
            k = 0;
            e = new xg(e, new Je(c.x + (f == null ? 0 : f.x), c.y + (f == null ? 0 : f.y), c.width, c.height));
            h.clip(d.x | 0, d.y | 0, e.width, e.height);
            if (Y) {
              Y = 0;
              u = h.height;
              while (Y < u) {
                A = Y++;
                d = c.byteOffset + c.stride * A;
                f = h.byteOffset + h.stride * A;
                A = e.byteOffset + e.stride * A;
                D = 0;
                E = h.width;
                while (D < E) {
                  D++;
                  var z = p;
                  var y = q;
                  if (y == null) {
                    y = false;
                  }
                  if (z == null) {
                    z = 0;
                  }
                  switch (z) {
                    case 0:
                      n = (g[d] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d + 2] & 255) << 8 | g[d + 3] & 255;
                      break;
                    case 1:
                      n = (g[d + 1] & 255) << 24 | (g[d + 2] & 255) << 16 | (g[d + 3] & 255) << 8 | g[d] & 255;
                      break;
                    case 2:
                      n = (g[d + 2] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d] & 255) << 8 | g[d + 3] & 255;
                  }
                  if (y && (n & 255) != 0 && (n & 255) != 255) {
                    O.unmult = 255 / (n & 255);
                    n = (O.__clamp[Math.round((n >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((n >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((n >>> 8 & 255) * O.unmult)] & 255) << 8 | n & 255;
                  }
                  z = m;
                  y = w;
                  if (y == null) {
                    y = false;
                  }
                  if (z == null) {
                    z = 0;
                  }
                  switch (z) {
                    case 0:
                      r = (l[f] & 255) << 24 | (l[f + 1] & 255) << 16 | (l[f + 2] & 255) << 8 | l[f + 3] & 255;
                      break;
                    case 1:
                      r = (l[f + 1] & 255) << 24 | (l[f + 2] & 255) << 16 | (l[f + 3] & 255) << 8 | l[f] & 255;
                      break;
                    case 2:
                      r = (l[f + 2] & 255) << 24 | (l[f + 1] & 255) << 16 | (l[f] & 255) << 8 | l[f + 3] & 255;
                  }
                  if (y && (r & 255) != 0 && (r & 255) != 255) {
                    O.unmult = 255 / (r & 255);
                    r = (O.__clamp[Math.round((r >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((r >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((r >>> 8 & 255) * O.unmult)] & 255) << 8 | r & 255;
                  }
                  z = b;
                  y = false;
                  if (y == null) {
                    y = false;
                  }
                  if (z == null) {
                    z = 0;
                  }
                  switch (z) {
                    case 0:
                      k = (v[A] & 255) << 24 | (v[A + 1] & 255) << 16 | (v[A + 2] & 255) << 8 | v[A + 3] & 255;
                      break;
                    case 1:
                      k = (v[A + 1] & 255) << 24 | (v[A + 2] & 255) << 16 | (v[A + 3] & 255) << 8 | v[A] & 255;
                      break;
                    case 2:
                      k = (v[A + 2] & 255) << 24 | (v[A + 1] & 255) << 16 | (v[A] & 255) << 8 | v[A + 3] & 255;
                  }
                  if (y && (k & 255) != 0 && (k & 255) != 255) {
                    O.unmult = 255 / (k & 255);
                    k = (O.__clamp[Math.round((k >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((k >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((k >>> 8 & 255) * O.unmult)] & 255) << 8 | k & 255;
                  }
                  y = (k & 255) / 255 * ((n & 255) / 255);
                  if (y > 0) {
                    var La = (r & 255) / 255;
                    var C = 1 - y;
                    z = y + La * C;
                    B = O.__clamp[Math.round(((n >>> 24 & 255) * y + (r >>> 24 & 255) * La * C) / z)];
                    r = (B & 255) << 24 | (r >>> 16 & 255) << 16 | (r >>> 8 & 255) << 8 | r & 255;
                    B = O.__clamp[Math.round(((n >>> 16 & 255) * y + (r >>> 16 & 255) * La * C) / z)];
                    r = (r >>> 24 & 255) << 24 | (B & 255) << 16 | (r >>> 8 & 255) << 8 | r & 255;
                    y = O.__clamp[Math.round(((n >>> 8 & 255) * y + (r >>> 8 & 255) * La * C) / z)];
                    r = (r >>> 24 & 255) << 24 | (r >>> 16 & 255) << 16 | (y & 255) << 8 | r & 255;
                    z = O.__clamp[Math.round(z * 255)];
                    r = (r >>> 24 & 255) << 24 | (r >>> 16 & 255) << 16 | (r >>> 8 & 255) << 8 | z & 255;
                    z = m;
                    y = w;
                    if (y == null) {
                      y = false;
                    }
                    if (z == null) {
                      z = 0;
                    }
                    if (y) {
                      if ((r & 255) == 0) {
                        if (r != 0) {
                          r = 0;
                        }
                      } else if ((r & 255) != 255) {
                        O.a16 = O.__alpha16[r & 255];
                        r = ((r >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((r >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((r >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | r & 255;
                      }
                    }
                    switch (z) {
                      case 0:
                        l[f] = r >>> 24 & 255;
                        l[f + 1] = r >>> 16 & 255;
                        l[f + 2] = r >>> 8 & 255;
                        l[f + 3] = r & 255;
                        break;
                      case 1:
                        l[f] = r & 255;
                        l[f + 1] = r >>> 24 & 255;
                        l[f + 2] = r >>> 16 & 255;
                        l[f + 3] = r >>> 8 & 255;
                        break;
                      case 2:
                        l[f] = r >>> 8 & 255;
                        l[f + 1] = r >>> 16 & 255;
                        l[f + 2] = r >>> 24 & 255;
                        l[f + 3] = r & 255;
                    }
                  }
                  d += 4;
                  f += 4;
                  A += 4;
                }
              }
            } else {
              Y = 0;
              u = h.height;
              while (Y < u) {
                A = Y++;
                d = c.byteOffset + c.stride * A;
                f = h.byteOffset + h.stride * A;
                A = e.byteOffset + e.stride * A;
                D = 0;
                E = h.width;
                while (D < E) {
                  D++;
                  z = p;
                  y = q;
                  if (y == null) {
                    y = false;
                  }
                  if (z == null) {
                    z = 0;
                  }
                  switch (z) {
                    case 0:
                      n = (g[d] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d + 2] & 255) << 8 | g[d + 3] & 255;
                      break;
                    case 1:
                      n = (g[d + 1] & 255) << 24 | (g[d + 2] & 255) << 16 | (g[d + 3] & 255) << 8 | g[d] & 255;
                      break;
                    case 2:
                      n = (g[d + 2] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d] & 255) << 8 | g[d + 3] & 255;
                  }
                  if (y && (n & 255) != 0 && (n & 255) != 255) {
                    O.unmult = 255 / (n & 255);
                    n = (O.__clamp[Math.round((n >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((n >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((n >>> 8 & 255) * O.unmult)] & 255) << 8 | n & 255;
                  }
                  z = b;
                  y = false;
                  if (y == null) {
                    y = false;
                  }
                  if (z == null) {
                    z = 0;
                  }
                  switch (z) {
                    case 0:
                      k = (v[A] & 255) << 24 | (v[A + 1] & 255) << 16 | (v[A + 2] & 255) << 8 | v[A + 3] & 255;
                      break;
                    case 1:
                      k = (v[A + 1] & 255) << 24 | (v[A + 2] & 255) << 16 | (v[A + 3] & 255) << 8 | v[A] & 255;
                      break;
                    case 2:
                      k = (v[A + 2] & 255) << 24 | (v[A + 1] & 255) << 16 | (v[A] & 255) << 8 | v[A + 3] & 255;
                  }
                  if (y && (k & 255) != 0 && (k & 255) != 255) {
                    O.unmult = 255 / (k & 255);
                    k = (O.__clamp[Math.round((k >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((k >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((k >>> 8 & 255) * O.unmult)] & 255) << 8 | k & 255;
                  }
                  B = Math.round((k & 255) / 255 * (n & 255));
                  n = (n >>> 24 & 255) << 24 | (n >>> 16 & 255) << 16 | (n >>> 8 & 255) << 8 | B & 255;
                  z = m;
                  y = w;
                  if (y == null) {
                    y = false;
                  }
                  if (z == null) {
                    z = 0;
                  }
                  if (y) {
                    if ((n & 255) == 0) {
                      if (n != 0) {
                        n = 0;
                      }
                    } else if ((n & 255) != 255) {
                      O.a16 = O.__alpha16[n & 255];
                      n = ((n >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((n >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((n >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | n & 255;
                    }
                  }
                  switch (z) {
                    case 0:
                      l[f] = n >>> 24 & 255;
                      l[f + 1] = n >>> 16 & 255;
                      l[f + 2] = n >>> 8 & 255;
                      l[f + 3] = n & 255;
                      break;
                    case 1:
                      l[f] = n & 255;
                      l[f + 1] = n >>> 24 & 255;
                      l[f + 2] = n >>> 16 & 255;
                      l[f + 3] = n >>> 8 & 255;
                      break;
                    case 2:
                      l[f] = n >>> 8 & 255;
                      l[f + 1] = n >>> 16 & 255;
                      l[f + 2] = n >>> 24 & 255;
                      l[f + 3] = n & 255;
                  }
                  d += 4;
                  f += 4;
                  A += 4;
                }
              }
            }
          } else if (Y) {
            Y = 0;
            u = h.height;
            while (Y < u) {
              A = Y++;
              d = c.byteOffset + c.stride * A;
              f = h.byteOffset + h.stride * A;
              for (var D = 0, E = h.width; D < E;) {
                D++;
                z = p;
                y = q;
                if (y == null) {
                  y = false;
                }
                if (z == null) {
                  z = 0;
                }
                switch (z) {
                  case 0:
                    n = (g[d] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d + 2] & 255) << 8 | g[d + 3] & 255;
                    break;
                  case 1:
                    n = (g[d + 1] & 255) << 24 | (g[d + 2] & 255) << 16 | (g[d + 3] & 255) << 8 | g[d] & 255;
                    break;
                  case 2:
                    n = (g[d + 2] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d] & 255) << 8 | g[d + 3] & 255;
                }
                if (y && (n & 255) != 0 && (n & 255) != 255) {
                  O.unmult = 255 / (n & 255);
                  n = (O.__clamp[Math.round((n >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((n >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((n >>> 8 & 255) * O.unmult)] & 255) << 8 | n & 255;
                }
                z = m;
                y = w;
                if (y == null) {
                  y = false;
                }
                if (z == null) {
                  z = 0;
                }
                switch (z) {
                  case 0:
                    r = (l[f] & 255) << 24 | (l[f + 1] & 255) << 16 | (l[f + 2] & 255) << 8 | l[f + 3] & 255;
                    break;
                  case 1:
                    r = (l[f + 1] & 255) << 24 | (l[f + 2] & 255) << 16 | (l[f + 3] & 255) << 8 | l[f] & 255;
                    break;
                  case 2:
                    r = (l[f + 2] & 255) << 24 | (l[f + 1] & 255) << 16 | (l[f] & 255) << 8 | l[f + 3] & 255;
                }
                if (y && (r & 255) != 0 && (r & 255) != 255) {
                  O.unmult = 255 / (r & 255);
                  r = (O.__clamp[Math.round((r >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((r >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((r >>> 8 & 255) * O.unmult)] & 255) << 8 | r & 255;
                }
                y = (n & 255) / 255;
                La = (r & 255) / 255;
                C = 1 - y;
                z = y + La * C;
                if (z == 0) {
                  r = 0;
                } else {
                  var B = O.__clamp[Math.round(((n >>> 24 & 255) * y + (r >>> 24 & 255) * La * C) / z)];
                  r = (B & 255) << 24 | (r >>> 16 & 255) << 16 | (r >>> 8 & 255) << 8 | r & 255;
                  B = O.__clamp[Math.round(((n >>> 16 & 255) * y + (r >>> 16 & 255) * La * C) / z)];
                  r = (r >>> 24 & 255) << 24 | (B & 255) << 16 | (r >>> 8 & 255) << 8 | r & 255;
                  y = O.__clamp[Math.round(((n >>> 8 & 255) * y + (r >>> 8 & 255) * La * C) / z)];
                  r = (r >>> 24 & 255) << 24 | (r >>> 16 & 255) << 16 | (y & 255) << 8 | r & 255;
                  z = O.__clamp[Math.round(z * 255)];
                  r = (r >>> 24 & 255) << 24 | (r >>> 16 & 255) << 16 | (r >>> 8 & 255) << 8 | z & 255;
                }
                z = m;
                y = w;
                if (y == null) {
                  y = false;
                }
                if (z == null) {
                  z = 0;
                }
                if (y) {
                  if ((r & 255) == 0) {
                    if (r != 0) {
                      r = 0;
                    }
                  } else if ((r & 255) != 255) {
                    O.a16 = O.__alpha16[r & 255];
                    r = ((r >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((r >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((r >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | r & 255;
                  }
                }
                switch (z) {
                  case 0:
                    l[f] = r >>> 24 & 255;
                    l[f + 1] = r >>> 16 & 255;
                    l[f + 2] = r >>> 8 & 255;
                    l[f + 3] = r & 255;
                    break;
                  case 1:
                    l[f] = r & 255;
                    l[f + 1] = r >>> 24 & 255;
                    l[f + 2] = r >>> 16 & 255;
                    l[f + 3] = r >>> 8 & 255;
                    break;
                  case 2:
                    l[f] = r >>> 8 & 255;
                    l[f + 1] = r >>> 16 & 255;
                    l[f + 2] = r >>> 24 & 255;
                    l[f + 3] = r & 255;
                }
                d += 4;
                f += 4;
              }
            }
          } else if (p == m && q == w && u == v) {
            Y = 0;
            u = h.height;
            while (Y < u) {
              A = Y++;
              d = c.byteOffset + c.stride * A;
              f = h.byteOffset + h.stride * A;
              l.set(g.subarray(d, d + h.width * v), f);
            }
          } else {
            Y = 0;
            u = h.height;
            while (Y < u) {
              A = Y++;
              d = c.byteOffset + c.stride * A;
              f = h.byteOffset + h.stride * A;
              D = 0;
              E = h.width;
              while (D < E) {
                D++;
                z = p;
                y = q;
                if (y == null) {
                  y = false;
                }
                if (z == null) {
                  z = 0;
                }
                switch (z) {
                  case 0:
                    n = (g[d] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d + 2] & 255) << 8 | g[d + 3] & 255;
                    break;
                  case 1:
                    n = (g[d + 1] & 255) << 24 | (g[d + 2] & 255) << 16 | (g[d + 3] & 255) << 8 | g[d] & 255;
                    break;
                  case 2:
                    n = (g[d + 2] & 255) << 24 | (g[d + 1] & 255) << 16 | (g[d] & 255) << 8 | g[d + 3] & 255;
                }
                if (y && (n & 255) != 0 && (n & 255) != 255) {
                  O.unmult = 255 / (n & 255);
                  n = (O.__clamp[Math.round((n >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((n >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((n >>> 8 & 255) * O.unmult)] & 255) << 8 | n & 255;
                }
                z = m;
                y = w;
                if (y == null) {
                  y = false;
                }
                if (z == null) {
                  z = 0;
                }
                if (y) {
                  if ((n & 255) == 0) {
                    if (n != 0) {
                      n = 0;
                    }
                  } else if ((n & 255) != 255) {
                    O.a16 = O.__alpha16[n & 255];
                    n = ((n >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((n >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((n >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | n & 255;
                  }
                }
                switch (z) {
                  case 0:
                    l[f] = n >>> 24 & 255;
                    l[f + 1] = n >>> 16 & 255;
                    l[f + 2] = n >>> 8 & 255;
                    l[f + 3] = n & 255;
                    break;
                  case 1:
                    l[f] = n & 255;
                    l[f + 1] = n >>> 24 & 255;
                    l[f + 2] = n >>> 16 & 255;
                    l[f + 3] = n >>> 8 & 255;
                    break;
                  case 2:
                    l[f] = n >>> 8 & 255;
                    l[f + 1] = n >>> 16 & 255;
                    l[f + 2] = n >>> 24 & 255;
                    l[f + 3] = n & 255;
                }
                d += 4;
                f += 4;
              }
            }
          }
        }
        a.dirty = true;
        a.version++;
      };
      zc.fillRect = function (a, b, c, d) {
        switch (d) {
          case 1:
            c = (c >>> 16 & 255) << 24 | (c >>> 8 & 255) << 16 | (c & 255) << 8 | c >>> 24 & 255;
            break;
          case 2:
            c = (c >>> 8 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 24 & 255) << 8 | c & 255;
        }
        if (!a.get_transparent()) {
          c = (c >>> 24 & 255) << 24 | (c >>> 16 & 255) << 16 | (c >>> 8 & 255) << 8 | 255;
        }
        var e = a.buffer.data;
        if (e != null) {
          d = a.buffer.format;
          var f = a.buffer.premultiplied;
          if (f) {
            if ((c & 255) == 0) {
              if (c != 0) {
                c = 0;
              }
            } else if ((c & 255) != 255) {
              O.a16 = O.__alpha16[c & 255];
              c = ((c >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | c & 255;
            }
          }
          b = new xg(a, b);
          var k;
          for (var g = 0, l = b.height; g < l;) {
            f = g++;
            k = b.byteOffset + b.stride * f;
            for (var h = 0, p = b.width; h < p;) {
              f = h++;
              var m = k + f * 4;
              var n = d;
              f = false;
              if (f == null) {
                f = false;
              }
              if (n == null) {
                n = 0;
              }
              if (f) {
                if ((c & 255) == 0) {
                  if (c != 0) {
                    c = 0;
                  }
                } else if ((c & 255) != 255) {
                  O.a16 = O.__alpha16[c & 255];
                  c = ((c >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((c >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((c >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | c & 255;
                }
              }
              switch (n) {
                case 0:
                  e[m] = c >>> 24 & 255;
                  e[m + 1] = c >>> 16 & 255;
                  e[m + 2] = c >>> 8 & 255;
                  e[m + 3] = c & 255;
                  break;
                case 1:
                  e[m] = c & 255;
                  e[m + 1] = c >>> 24 & 255;
                  e[m + 2] = c >>> 16 & 255;
                  e[m + 3] = c >>> 8 & 255;
                  break;
                case 2:
                  e[m] = c >>> 8 & 255;
                  e[m + 1] = c >>> 16 & 255;
                  e[m + 2] = c >>> 24 & 255;
                  e[m + 3] = c & 255;
              }
            }
          }
          a.dirty = true;
          a.version++;
        }
      };
      zc.gaussianBlur = function (a, b, c, d, e, f, k, g, l) {
        if (k == null) {
          k = 1;
        }
        if (f == null) {
          f = 4;
        }
        if (e == null) {
          e = 4;
        }
        if (g = a.get_premultiplied()) {
          a.set_premultiplied(false);
        }
        pe.blur(a, b, c, d, e, f, k);
        a.dirty = true;
        a.version++;
        if (g) {
          a.set_premultiplied(true);
        }
        return a;
      };
      zc.getPixel32 = function (a, b, c, d) {
        var e = 0;
        var f = a.buffer.data;
        b = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        c = a.buffer.format;
        a = a.buffer.premultiplied;
        if (a == null) {
          a = false;
        }
        if (c == null) {
          c = 0;
        }
        switch (c) {
          case 0:
            e = (f[b] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b + 2] & 255) << 8 | f[b + 3] & 255;
            break;
          case 1:
            e = (f[b + 1] & 255) << 24 | (f[b + 2] & 255) << 16 | (f[b + 3] & 255) << 8 | f[b] & 255;
            break;
          case 2:
            e = (f[b + 2] & 255) << 24 | (f[b + 1] & 255) << 16 | (f[b] & 255) << 8 | f[b + 3] & 255;
        }
        if (a && (e & 255) != 0 && (e & 255) != 255) {
          O.unmult = 255 / (e & 255);
          e = (O.__clamp[Math.round((e >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((e >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((e >>> 8 & 255) * O.unmult)] & 255) << 8 | e & 255;
        }
        switch (d) {
          case 1:
            return (e & 255) << 24 | (e >>> 24 & 255) << 16 | (e >>> 16 & 255) << 8 | e >>> 8 & 255;
          case 2:
            return (e >>> 8 & 255) << 24 | (e >>> 16 & 255) << 16 | (e >>> 24 & 255) << 8 | e & 255;
          default:
            return e;
        }
      };
      zc.multiplyAlpha = function (a) {
        var b = a.buffer.data;
        if (b != null && a.buffer.transparent) {
          var c = a.buffer.format;
          var d = 0;
          for (var e = 0, f = b.length / 4 | 0; e < f;) {
            var k = e++;
            var g = k * 4;
            var l = c;
            var h = false;
            if (h == null) {
              h = false;
            }
            if (l == null) {
              l = 0;
            }
            switch (l) {
              case 0:
                d = (b[g] & 255) << 24 | (b[g + 1] & 255) << 16 | (b[g + 2] & 255) << 8 | b[g + 3] & 255;
                break;
              case 1:
                d = (b[g + 1] & 255) << 24 | (b[g + 2] & 255) << 16 | (b[g + 3] & 255) << 8 | b[g] & 255;
                break;
              case 2:
                d = (b[g + 2] & 255) << 24 | (b[g + 1] & 255) << 16 | (b[g] & 255) << 8 | b[g + 3] & 255;
            }
            if (h && (d & 255) != 0 && (d & 255) != 255) {
              O.unmult = 255 / (d & 255);
              d = (O.__clamp[Math.round((d >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((d >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((d >>> 8 & 255) * O.unmult)] & 255) << 8 | d & 255;
            }
            k *= 4;
            g = c;
            l = true;
            if (l == null) {
              l = false;
            }
            if (g == null) {
              g = 0;
            }
            if (l) {
              if ((d & 255) == 0) {
                if (d != 0) {
                  d = 0;
                }
              } else if ((d & 255) != 255) {
                O.a16 = O.__alpha16[d & 255];
                d = ((d >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | d & 255;
              }
            }
            switch (g) {
              case 0:
                b[k] = d >>> 24 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 8 & 255;
                b[k + 3] = d & 255;
                break;
              case 1:
                b[k] = d & 255;
                b[k + 1] = d >>> 24 & 255;
                b[k + 2] = d >>> 16 & 255;
                b[k + 3] = d >>> 8 & 255;
                break;
              case 2:
                b[k] = d >>> 8 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 24 & 255;
                b[k + 3] = d & 255;
            }
          }
          a.buffer.premultiplied = true;
          a.dirty = true;
          a.version++;
        }
      };
      zc.setFormat = function (a, b) {
        var c = a.buffer.data;
        if (c != null) {
          var d = c.length / 4 | 0;
          switch (a.get_format()) {
            case 0:
              var e = 0;
              var f = 1;
              var k = 2;
              var g = 3;
              break;
            case 1:
              e = 1;
              f = 2;
              k = 3;
              g = 0;
              break;
            case 2:
              e = 2;
              f = 1;
              k = 0;
              g = 3;
          }
          switch (b) {
            case 0:
              var l = 0;
              var h = 1;
              var p = 2;
              var m = 3;
              break;
            case 1:
              l = 1;
              h = 2;
              p = 3;
              m = 0;
              break;
            case 2:
              l = 2;
              h = 1;
              p = 0;
              m = 3;
          }
          for (var n = 0; n < d;) {
            var r = n++ * 4;
            var q = c[r + e];
            var w = c[r + f];
            var u = c[r + k];
            var v = c[r + g];
            c[r + l] = q;
            c[r + h] = w;
            c[r + p] = u;
            c[r + m] = v;
          }
          a.buffer.format = b;
          a.dirty = true;
          a.version++;
        }
      };
      zc.setPixel = function (a, b, c, d, e) {
        switch (e) {
          case 1:
            d = (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
            break;
          case 2:
            d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 24 & 255) << 8 | d & 255;
        }
        var f = 0;
        var k = a.buffer.data;
        var g = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        var l = a.buffer.premultiplied;
        if (l == null) {
          l = false;
        }
        if (e == null) {
          e = 0;
        }
        switch (e) {
          case 0:
            f = (k[g] & 255) << 24 | (k[g + 1] & 255) << 16 | (k[g + 2] & 255) << 8 | k[g + 3] & 255;
            break;
          case 1:
            f = (k[g + 1] & 255) << 24 | (k[g + 2] & 255) << 16 | (k[g + 3] & 255) << 8 | k[g] & 255;
            break;
          case 2:
            f = (k[g + 2] & 255) << 24 | (k[g + 1] & 255) << 16 | (k[g] & 255) << 8 | k[g + 3] & 255;
        }
        if (l && (f & 255) != 0 && (f & 255) != 255) {
          O.unmult = 255 / (f & 255);
          f = (O.__clamp[Math.round((f >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((f >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((f >>> 8 & 255) * O.unmult)] & 255) << 8 | f & 255;
        }
        d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | f & 255;
        k = a.buffer.data;
        g = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        l = a.buffer.premultiplied;
        if (l == null) {
          l = false;
        }
        if (e == null) {
          e = 0;
        }
        if (l) {
          if ((d & 255) == 0) {
            if (d != 0) {
              d = 0;
            }
          } else if ((d & 255) != 255) {
            O.a16 = O.__alpha16[d & 255];
            d = ((d >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | d & 255;
          }
        }
        switch (e) {
          case 0:
            k[g] = d >>> 24 & 255;
            k[g + 1] = d >>> 16 & 255;
            k[g + 2] = d >>> 8 & 255;
            k[g + 3] = d & 255;
            break;
          case 1:
            k[g] = d & 255;
            k[g + 1] = d >>> 24 & 255;
            k[g + 2] = d >>> 16 & 255;
            k[g + 3] = d >>> 8 & 255;
            break;
          case 2:
            k[g] = d >>> 8 & 255;
            k[g + 1] = d >>> 16 & 255;
            k[g + 2] = d >>> 24 & 255;
            k[g + 3] = d & 255;
        }
        a.dirty = true;
        a.version++;
      };
      zc.setPixel32 = function (a, b, c, d, e) {
        switch (e) {
          case 1:
            d = (d >>> 16 & 255) << 24 | (d >>> 8 & 255) << 16 | (d & 255) << 8 | d >>> 24 & 255;
            break;
          case 2:
            d = (d >>> 8 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 24 & 255) << 8 | d & 255;
        }
        if (!a.get_transparent()) {
          d = (d >>> 24 & 255) << 24 | (d >>> 16 & 255) << 16 | (d >>> 8 & 255) << 8 | 255;
        }
        var f = a.buffer.data;
        b = (c + a.offsetY) * 4 * a.buffer.width + (b + a.offsetX) * 4;
        e = a.buffer.format;
        c = a.buffer.premultiplied;
        if (c == null) {
          c = false;
        }
        if (e == null) {
          e = 0;
        }
        if (c) {
          if ((d & 255) == 0) {
            if (d != 0) {
              d = 0;
            }
          } else if ((d & 255) != 255) {
            O.a16 = O.__alpha16[d & 255];
            d = ((d >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | d & 255;
          }
        }
        switch (e) {
          case 0:
            f[b] = d >>> 24 & 255;
            f[b + 1] = d >>> 16 & 255;
            f[b + 2] = d >>> 8 & 255;
            f[b + 3] = d & 255;
            break;
          case 1:
            f[b] = d & 255;
            f[b + 1] = d >>> 24 & 255;
            f[b + 2] = d >>> 16 & 255;
            f[b + 3] = d >>> 8 & 255;
            break;
          case 2:
            f[b] = d >>> 8 & 255;
            f[b + 1] = d >>> 16 & 255;
            f[b + 2] = d >>> 24 & 255;
            f[b + 3] = d & 255;
        }
        a.dirty = true;
        a.version++;
      };
      zc.unmultiplyAlpha = function (a) {
        var b = a.buffer.data;
        if (b != null) {
          var c = a.buffer.format;
          var d = 0;
          for (var e = 0, f = b.length / 4 | 0; e < f;) {
            var k = e++;
            var g = k * 4;
            var l = c;
            var h = true;
            if (h == null) {
              h = false;
            }
            if (l == null) {
              l = 0;
            }
            switch (l) {
              case 0:
                d = (b[g] & 255) << 24 | (b[g + 1] & 255) << 16 | (b[g + 2] & 255) << 8 | b[g + 3] & 255;
                break;
              case 1:
                d = (b[g + 1] & 255) << 24 | (b[g + 2] & 255) << 16 | (b[g + 3] & 255) << 8 | b[g] & 255;
                break;
              case 2:
                d = (b[g + 2] & 255) << 24 | (b[g + 1] & 255) << 16 | (b[g] & 255) << 8 | b[g + 3] & 255;
            }
            if (h && (d & 255) != 0 && (d & 255) != 255) {
              O.unmult = 255 / (d & 255);
              d = (O.__clamp[Math.round((d >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((d >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((d >>> 8 & 255) * O.unmult)] & 255) << 8 | d & 255;
            }
            k *= 4;
            g = c;
            l = false;
            if (l == null) {
              l = false;
            }
            if (g == null) {
              g = 0;
            }
            if (l) {
              if ((d & 255) == 0) {
                if (d != 0) {
                  d = 0;
                }
              } else if ((d & 255) != 255) {
                O.a16 = O.__alpha16[d & 255];
                d = ((d >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((d >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((d >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | d & 255;
              }
            }
            switch (g) {
              case 0:
                b[k] = d >>> 24 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 8 & 255;
                b[k + 3] = d & 255;
                break;
              case 1:
                b[k] = d & 255;
                b[k + 1] = d >>> 24 & 255;
                b[k + 2] = d >>> 16 & 255;
                b[k + 3] = d >>> 8 & 255;
                break;
              case 2:
                b[k] = d >>> 8 & 255;
                b[k + 1] = d >>> 16 & 255;
                b[k + 2] = d >>> 24 & 255;
                b[k + 3] = d & 255;
            }
          }
          a.buffer.premultiplied = false;
          a.dirty = true;
          a.version++;
        }
      };
      function xg(a, b) {
        this.image = a;
        if (b == null) {
          this.rect = a.get_rect();
        } else {
          if (b.x < 0) {
            b.x = 0;
          }
          if (b.y < 0) {
            b.y = 0;
          }
          if (b.x + b.width > a.width) {
            b.width = a.width - b.x;
          }
          if (b.y + b.height > a.height) {
            b.height = a.height - b.y;
          }
          if (b.width < 0) {
            b.width = 0;
          }
          if (b.height < 0) {
            b.height = 0;
          }
          this.rect = b;
        }
        this.stride = a.buffer.get_stride();
        this.__update();
      }
      h["lime._internal.graphics._ImageDataUtil.ImageDataView"] = xg;
      xg.__name__ = "lime._internal.graphics._ImageDataUtil.ImageDataView";
      xg.prototype = {
        clip: function (a, b, c, d) {
          if (this.tempRect == null) {
            this.tempRect = new Je();
          }
          this.tempRect.setTo(a, b, c, d);
          this.rect.intersection(this.tempRect, this.rect);
          this.__update();
        },
        __update: function () {
          this.x = Math.ceil(this.rect.x);
          this.y = Math.ceil(this.rect.y);
          this.width = Math.floor(this.rect.width);
          this.height = Math.floor(this.rect.height);
          this.byteOffset = this.stride * (this.y + this.image.offsetY) + (this.x + this.image.offsetX) * 4;
        },
        __class__: xg
      };
      function pe() {}
      h["lime._internal.graphics.StackBlur"] = pe;
      pe.__name__ = "lime._internal.graphics.StackBlur";
      pe.blur = function (a, b, c, d, e, f, k) {
        a.copyPixels(b, c, d);
        pe.__stackBlurCanvasRGBA(a, c.width | 0, c.height | 0, e, f, k);
      };
      pe.__stackBlurCanvasRGBA = function (a, b, c, d, e, f) {
        d = Math.round(d) >> 1;
        e = Math.round(e) >> 1;
        if (pe.MUL_TABLE != null && (d >= pe.MUL_TABLE.length && (d = pe.MUL_TABLE.length - 1), e >= pe.MUL_TABLE.length && (e = pe.MUL_TABLE.length - 1), !(d < 0) && !(e < 0))) {
          if (f < 1) {
            f = 1;
          }
          if (f > 3) {
            f = 3;
          }
          a = a.get_data();
          var k;
          var g = d + d + 1;
          var l = e + e + 1;
          var h = b - 1;
          var p = c - 1;
          var m = d + 1;
          var n = e + 1;
          var r = new wi();
          var q = r;
          var w = 1;
          for (var u = g; w < u;) {
            w++;
            q = q.n = new wi();
          }
          q.n = r;
          var v = g = new wi();
          w = 1;
          for (u = l; w < u;) {
            w++;
            v = v.n = new wi();
          }
          v.n = g;
          var A = pe.MUL_TABLE[d];
          var y = pe.SHG_TABLE[d];
          var z = pe.MUL_TABLE[e];
          var Y = pe.SHG_TABLE[e];
          while (f > 0) {
            --f;
            var La = k = 0;
            var C = A;
            var D = y;
            var E = c;
            do {
              var B = a[k];
              l = m * B;
              var x = a[k + 1];
              var G = m * x;
              var I = a[k + 2];
              var ha = m * I;
              w = a[k + 3];
              var Ea = m * w;
              q = r;
              v = m;
              do {
                q.r = B;
                q.g = x;
                q.b = I;
                q.a = w;
                q = q.n;
              } while (--v > -1);
              w = 1;
              for (u = m; w < u;) {
                v = w++;
                v = k + ((h < v ? h : v) << 2);
                l += q.r = a[v];
                G += q.g = a[v + 1];
                ha += q.b = a[v + 2];
                Ea += q.a = a[v + 3];
                q = q.n;
              }
              u = r;
              q = 0;
              for (w = b; q < w;) {
                v = q++;
                a[k++] = l * C >>> D;
                a[k++] = G * C >>> D;
                a[k++] = ha * C >>> D;
                a[k++] = Ea * C >>> D;
                v = v + d + 1;
                v = La + (v < h ? v : h) << 2;
                l -= u.r - (u.r = a[v]);
                G -= u.g - (u.g = a[v + 1]);
                ha -= u.b - (u.b = a[v + 2]);
                Ea -= u.a - (u.a = a[v + 3]);
                u = u.n;
              }
              La += b;
            } while (--E > 0);
            C = z;
            D = Y;
            E = 0;
            for (La = b; E < La;) {
              q = E++;
              k = q << 2;
              B = a[k];
              l = n * B;
              x = a[k + 1];
              G = n * x;
              I = a[k + 2];
              ha = n * I;
              w = a[k + 3];
              Ea = n * w;
              v = g;
              k = 0;
              for (u = n; k < u;) {
                k++;
                v.r = B;
                v.g = x;
                v.b = I;
                v.a = w;
                v = v.n;
              }
              w = b;
              u = 1;
              for (B = e + 1; u < B;) {
                x = u++;
                k = w + q << 2;
                l += v.r = a[k];
                G += v.g = a[k + 1];
                ha += v.b = a[k + 2];
                Ea += v.a = a[k + 3];
                v = v.n;
                if (x < p) {
                  w += b;
                }
              }
              k = q;
              u = g;
              if (f > 0) {
                B = 0;
                x = c;
                while (B < x) {
                  I = B++;
                  v = k << 2;
                  w = Ea * C >>> D;
                  a[v + 3] = w;
                  if (w > 0) {
                    a[v] = l * C >>> D;
                    a[v + 1] = G * C >>> D;
                    a[v + 2] = ha * C >>> D;
                  } else {
                    a[v] = a[v + 1] = a[v + 2] = 0;
                  }
                  v = I + n;
                  v = q + (v < p ? v : p) * b << 2;
                  l -= u.r - (u.r = a[v]);
                  G -= u.g - (u.g = a[v + 1]);
                  ha -= u.b - (u.b = a[v + 2]);
                  Ea -= u.a - (u.a = a[v + 3]);
                  u = u.n;
                  k += b;
                }
              } else {
                for (var ma = 0, S = c; ma < S;) {
                  var K = ma++;
                  v = k << 2;
                  w = Ea * C >>> D;
                  a[v + 3] = w;
                  if (w > 0) {
                    w = 255 / w;
                    B = (l * C >>> D) * w | 0;
                    x = (G * C >>> D) * w | 0;
                    I = (ha * C >>> D) * w | 0;
                    a[v] = B > 255 ? 255 : B;
                    a[v + 1] = x > 255 ? 255 : x;
                    a[v + 2] = I > 255 ? 255 : I;
                  } else {
                    a[v] = a[v + 1] = a[v + 2] = 0;
                  }
                  v = K + n;
                  v = q + (v < p ? v : p) * b << 2;
                  l -= u.r - (u.r = a[v]);
                  G -= u.g - (u.g = a[v + 1]);
                  ha -= u.b - (u.b = a[v + 2]);
                  Ea -= u.a - (u.a = a[v + 3]);
                  u = u.n;
                  k += b;
                }
              }
            }
          }
        }
      };
      function wi() {
        this.a = this.b = this.g = this.r = 0;
        this.n = null;
      }
      h["lime._internal.graphics.BlurStack"] = wi;
      wi.__name__ = "lime._internal.graphics.BlurStack";
      wi.prototype = {
        __class__: wi
      };
      function Eb(a, b) {
        if (b == null) {
          b = false;
        }
        if (a != null) {
          if (b) {
            b = new Id();
            b.future = this;
            ae.queue({
              promise: b,
              work: a
            });
          } else {
            try {
              this.value = a();
              this.isComplete = true;
            } catch (c) {
              Oa.lastError = c;
              this.error = I.caught(c).unwrap();
              this.isError = true;
            }
          }
        }
      }
      h["lime.app.Future"] = Eb;
      Eb.__name__ = "lime.app.Future";
      Eb.withError = function (a) {
        var b = new Eb();
        b.isError = true;
        b.error = a;
        return b;
      };
      Eb.withValue = function (a) {
        var b = new Eb();
        b.isComplete = true;
        b.value = a;
        return b;
      };
      Eb.prototype = {
        onComplete: function (a) {
          if (a != null) {
            if (this.isComplete) {
              a(this.value);
            } else if (!this.isError) {
              if (this.__completeListeners == null) {
                this.__completeListeners = [];
              }
              this.__completeListeners.push(a);
            }
          }
          return this;
        },
        onError: function (a) {
          if (a != null) {
            if (this.isError) {
              a(this.error);
            } else if (!this.isComplete) {
              if (this.__errorListeners == null) {
                this.__errorListeners = [];
              }
              this.__errorListeners.push(a);
            }
          }
          return this;
        },
        onProgress: function (a) {
          if (a != null) {
            if (this.__progressListeners == null) {
              this.__progressListeners = [];
            }
            this.__progressListeners.push(a);
          }
          return this;
        },
        then: function (a) {
          if (this.isComplete) {
            return a(this.value);
          }
          if (this.isError) {
            var b = new Eb();
            b.isError = true;
            b.error = this.error;
            return b;
          }
          var c = new Id();
          this.onError(n(c, c.error));
          this.onProgress(n(c, c.progress));
          this.onComplete(function (b) {
            b = a(b);
            b.onError(n(c, c.error));
            b.onComplete(n(c, c.complete));
          });
          return c.future;
        },
        __class__: Eb
      };
      function ae() {}
      h["lime.app._Future.FutureWork"] = ae;
      ae.__name__ = "lime.app._Future.FutureWork";
      ae.queue = function (a) {
        if (ae.threadPool == null) {
          ae.threadPool = new qo();
          ae.threadPool.doWork.add(ae.threadPool_doWork);
          ae.threadPool.onComplete.add(ae.threadPool_onComplete);
          ae.threadPool.onError.add(ae.threadPool_onError);
        }
        ae.threadPool.queue(a);
      };
      ae.threadPool_doWork = function (a) {
        try {
          var b = a.work();
          ae.threadPool.sendComplete({
            promise: a.promise,
            result: b
          });
        } catch (c) {
          Oa.lastError = c;
          b = I.caught(c).unwrap();
          ae.threadPool.sendError({
            promise: a.promise,
            error: b
          });
        }
      };
      ae.threadPool_onComplete = function (a) {
        a.promise.complete(a.result);
      };
      ae.threadPool_onError = function (a) {
        a.promise.error(a.error);
      };
      function Id() {
        this.future = new Eb();
      }
      h["lime.app.Promise"] = Id;
      Id.__name__ = "lime.app.Promise";
      Id.prototype = {
        complete: function (a) {
          if (!this.future.isError && (this.future.isComplete = true, this.future.value = a, this.future.__completeListeners != null)) {
            for (var b = 0, c = this.future.__completeListeners; b < c.length;) {
              var d = c[b];
              ++b;
              d(a);
            }
            this.future.__completeListeners = null;
          }
          return this;
        },
        completeWith: function (a) {
          a.onComplete(n(this, this.complete));
          a.onError(n(this, this.error));
          a.onProgress(n(this, this.progress));
          return this;
        },
        error: function (a) {
          if (!this.future.isComplete && (this.future.isError = true, this.future.error = a, this.future.__errorListeners != null)) {
            for (var b = 0, c = this.future.__errorListeners; b < c.length;) {
              var d = c[b];
              ++b;
              d(a);
            }
            this.future.__errorListeners = null;
          }
          return this;
        },
        progress: function (a, b) {
          if (!this.future.isError && !this.future.isComplete && this.future.__progressListeners != null) {
            for (var c = 0, d = this.future.__progressListeners; c < d.length;) {
              var e = d[c];
              ++c;
              e(a, b);
            }
          }
          return this;
        },
        __class__: Id
      };
      function xi() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Dynamic_Void"] = xi;
      xi.__name__ = "lime.app._Event_Dynamic_Void";
      xi.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: xi
      };
      function ro() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_Float_Void"] = ro;
      ro.__name__ = "lime.app._Event_Float_Float_Float_Void";
      ro.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: ro
      };
      function so() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_Int_Void"] = so;
      so.__name__ = "lime.app._Event_Float_Float_Int_Void";
      so.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: so
      };
      function Jj() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_Void"] = Jj;
      Jj.__name__ = "lime.app._Event_Float_Float_Void";
      Jj.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: Jj
      };
      function to() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"] = to;
      to.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseButton_Void";
      to.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: to
      };
      function uo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"] = uo;
      uo.__name__ = "lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";
      uo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b, c) {
          this.canceled = false;
          for (var d = this.__listeners, e = this.__repeat, f = 0; f < d.length && (d[f](a, b, c), e[f] ? ++f : this.remove(d[f]), !this.canceled););
        },
        __class__: uo
      };
      function vo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_Float_Float_Void"] = vo;
      vo.__name__ = "lime.app._Event_Int_Float_Float_Void";
      vo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: vo
      };
      function wo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_Float_Void"] = wo;
      wo.__name__ = "lime.app._Event_Int_Float_Void";
      wo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: wo
      };
      function $l() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_Int_Void"] = $l;
      $l.__name__ = "lime.app._Event_Int_Int_Void";
      $l.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: $l
      };
      function ih() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_Void"] = ih;
      ih.__name__ = "lime.app._Event_Int_Void";
      ih.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: ih
      };
      function xo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"] = xo;
      xo.__name__ = "lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";
      xo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: xo
      };
      function yo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_String_Int_Int_Void"] = yo;
      yo.__name__ = "lime.app._Event_String_Int_Int_Void";
      yo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        __class__: yo
      };
      function Kj() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_String_Void"] = Kj;
      Kj.__name__ = "lime.app._Event_String_Void";
      Kj.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        has: function (a) {
          for (var b = 0, c = this.__listeners; b < c.length;) {
            var d = c[b];
            ++b;
            if (d == a) {
              return true;
            }
          }
          return false;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Kj
      };
      function Uc() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_Void_Void"] = Uc;
      Uc.__name__ = "lime.app._Event_Void_Void";
      Uc.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        has: function (a) {
          for (var b = 0, c = this.__listeners; b < c.length;) {
            var d = c[b];
            ++b;
            if (d == a) {
              return true;
            }
          }
          return false;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function () {
          this.canceled = false;
          for (var a = this.__listeners, b = this.__repeat, c = 0; c < a.length && (a[c](), b[c] ? ++c : this.remove(a[c]), !this.canceled););
        },
        __class__: Uc
      };
      function am() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_graphics_RenderContext_Void"] = am;
      am.__name__ = "lime.app._Event_lime_graphics_RenderContext_Void";
      am.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: am
      };
      function zo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_GamepadAxis_Float_Void"] = zo;
      zo.__name__ = "lime.app._Event_lime_ui_GamepadAxis_Float_Void";
      zo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: zo
      };
      function bm() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_GamepadButton_Void"] = bm;
      bm.__name__ = "lime.app._Event_lime_ui_GamepadButton_Void";
      bm.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: bm
      };
      function Ao() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_Gamepad_Void"] = Ao;
      Ao.__name__ = "lime.app._Event_lime_ui_Gamepad_Void";
      Ao.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Ao
      };
      function Bo() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_Joystick_Void"] = Bo;
      Bo.__name__ = "lime.app._Event_lime_ui_Joystick_Void";
      Bo.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: Bo
      };
      function cm() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"] = cm;
      cm.__name__ = "lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";
      cm.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        cancel: function () {
          this.canceled = true;
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a, b) {
          this.canceled = false;
          for (var c = this.__listeners, d = this.__repeat, e = 0; e < c.length && (c[e](a, b), d[e] ? ++e : this.remove(c[e]), !this.canceled););
        },
        __class__: cm
      };
      function yi() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_Touch_Void"] = yi;
      yi.__name__ = "lime.app._Event_lime_ui_Touch_Void";
      yi.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: yi
      };
      function jn() {
        this.canceled = false;
        this.__listeners = [];
        this.__priorities = [];
        this.__repeat = [];
      }
      h["lime.app._Event_lime_ui_Window_Void"] = jn;
      jn.__name__ = "lime.app._Event_lime_ui_Window_Void";
      jn.prototype = {
        add: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          for (var d = 0, e = this.__priorities.length; d < e;) {
            var f = d++;
            if (c > this.__priorities[f]) {
              this.__listeners.splice(f, 0, a);
              this.__priorities.splice(f, 0, c);
              this.__repeat.splice(f, 0, !b);
              return;
            }
          }
          this.__listeners.push(a);
          this.__priorities.push(c);
          this.__repeat.push(!b);
        },
        remove: function (a) {
          for (var b = this.__listeners.length; --b >= 0;) {
            if (this.__listeners[b] == a) {
              this.__listeners.splice(b, 1);
              this.__priorities.splice(b, 1);
              this.__repeat.splice(b, 1);
            }
          }
        },
        dispatch: function (a) {
          this.canceled = false;
          for (var b = this.__listeners, c = this.__repeat, d = 0; d < b.length && (b[d](a), c[d] ? ++d : this.remove(b[d]), !this.canceled););
        },
        __class__: jn
      };
      function Fb(a, b, c, d, e, f, k) {
        if (e == null) {
          e = -1;
        }
        if (d == null) {
          d = -1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.offsetX = b;
        this.offsetY = c;
        this.width = d;
        this.height = e;
        this.version = 0;
        if (k == null) {
          k = Gd.CANVAS;
        }
        this.type = k;
        if (a == null) {
          if (d > 0 && e > 0) {
            switch (this.type._hx_index) {
              case 0:
                this.buffer = new vg(null, d, e);
                Wa.createCanvas(this, d, e);
                if (f != null && f != 0) {
                  this.fillRect(new Je(0, 0, d, e), f);
                }
                break;
              case 1:
                a = d * e * 4;
                a = a != null ? new Uint8Array(a) : null;
                this.buffer = new vg(a, d, e);
                if (f != null && f != 0) {
                  this.fillRect(new Je(0, 0, d, e), f);
                }
            }
          }
        } else {
          this.__fromImageBuffer(a);
        }
      }
      h["lime.graphics.Image"] = Fb;
      Fb.__name__ = "lime.graphics.Image";
      Fb.fromCanvas = function (a) {
        if (a == null) {
          return null;
        }
        var b = new vg(null, a.width, a.height);
        b.set_src(a);
        a = new Fb(b);
        a.type = Gd.CANVAS;
        return a;
      };
      Fb.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new Fb();
        if (b.__fromFile(a)) {
          return b;
        } else {
          return null;
        }
      };
      Fb.loadFromBase64 = function (a, b) {
        if (a == null || b == null) {
          return Eb.withValue(null);
        } else {
          return Pa.loadImage("data:" + b + ";base64," + a);
        }
      };
      Fb.loadFromBytes = function (a) {
        if (a == null) {
          return Eb.withValue(null);
        }
        if (Fb.__isPNG(a)) {
          var b = "image/png";
        } else if (Fb.__isJPG(a)) {
          b = "image/jpeg";
        } else if (Fb.__isGIF(a)) {
          b = "image/gif";
        } else if (Fb.__isWebP(a)) {
          b = "image/webp";
        } else {
          return Eb.withValue(null);
        }
        return Pa.loadImageFromBytes(a, b);
      };
      Fb.loadFromFile = function (a) {
        if (a == null) {
          return Eb.withValue(null);
        } else {
          return Pa.loadImage(a);
        }
      };
      Fb.__isGIF = function (a) {
        if (a == null || a.length < 6) {
          return false;
        }
        a = a.getString(0, 6);
        if (a != "GIF87a") {
          return a == "GIF89a";
        } else {
          return true;
        }
      };
      Fb.__isJPG = function (a) {
        if (a == null || a.length < 4) {
          return false;
        } else if (a.b[0] == 255 && a.b[1] == 216 && a.b[a.length - 2] == 255) {
          return a.b[a.length - 1] == 217;
        } else {
          return false;
        }
      };
      Fb.__isPNG = function (a) {
        if (a == null || a.length < 8) {
          return false;
        } else if (a.b[0] == 137 && a.b[1] == 80 && a.b[2] == 78 && a.b[3] == 71 && a.b[4] == 13 && a.b[5] == 10 && a.b[6] == 26) {
          return a.b[7] == 10;
        } else {
          return false;
        }
      };
      Fb.__isWebP = function (a) {
        if (a == null || a.length < 16) {
          return false;
        } else if (a.getString(0, 4) == "RIFF") {
          return a.getString(8, 4) == "WEBP";
        } else {
          return false;
        }
      };
      Fb.prototype = {
        clone: function () {
          if (this.buffer != null) {
            if (this.type == Gd.CANVAS) {
              Wa.convertToCanvas(this);
            } else {
              Wa.convertToData(this);
            }
            var a = new Fb(this.buffer.clone(), this.offsetX, this.offsetY, this.width, this.height, null, this.type);
            a.version = this.version;
            return a;
          }
          return new Fb(null, this.offsetX, this.offsetY, this.width, this.height, null, this.type);
        },
        colorTransform: function (a, b) {
          a = this.__clipRect(a);
          if (this.buffer != null && a != null) {
            switch (this.type._hx_index) {
              case 0:
                Wa.colorTransform(this, a, b);
                break;
              case 1:
                Wa.convertToData(this);
                zc.colorTransform(this, a, b);
                break;
              case 2:
                a.offset(this.offsetX, this.offsetY);
                this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(), nd.__toFlashColorTransform(b));
            }
          }
        },
        copyChannel: function (a, b, c, d, e) {
          b = this.__clipRect(b);
          if (this.buffer != null && b != null && (e != vi.ALPHA || !!this.get_transparent()) && !(b.width <= 0) && !(b.height <= 0)) {
            if (b.x + b.width > a.width) {
              b.width = a.width - b.x;
            }
            if (b.y + b.height > a.height) {
              b.height = a.height - b.y;
            }
            switch (this.type._hx_index) {
              case 0:
                Wa.copyChannel(this, a, b, c, d, e);
                break;
              case 1:
                Wa.convertToData(this);
                Wa.convertToData(a);
                zc.copyChannel(this, a, b, c, d, e);
                break;
              case 2:
                switch (d._hx_index) {
                  case 0:
                    var f = 1;
                    break;
                  case 1:
                    f = 2;
                    break;
                  case 2:
                    f = 4;
                    break;
                  case 3:
                    f = 8;
                }
                switch (e._hx_index) {
                  case 0:
                    var k = 1;
                    break;
                  case 1:
                    k = 2;
                    break;
                  case 2:
                    k = 4;
                    break;
                  case 3:
                    k = 8;
                }
                b.offset(a.offsetX, a.offsetY);
                c.offset(this.offsetX, this.offsetY);
                this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(), b.__toFlashRectangle(), c.__toFlashPoint(), f, k);
            }
          }
        },
        copyPixels: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (this.buffer != null && a != null && !(b.width <= 0) && !(b.height <= 0) && !(this.width <= 0) && !(this.height <= 0)) {
            if (b.x + b.width > a.width) {
              b.width = a.width - b.x;
            }
            if (b.y + b.height > a.height) {
              b.height = a.height - b.y;
            }
            if (b.x < 0) {
              b.width += b.x;
              b.x = 0;
            }
            if (b.y < 0) {
              b.height += b.y;
              b.y = 0;
            }
            if (c.x + b.width > this.width) {
              b.width = this.width - c.x;
            }
            if (c.y + b.height > this.height) {
              b.height = this.height - c.y;
            }
            if (c.x < 0) {
              b.width += c.x;
              b.x -= c.x;
              c.x = 0;
            }
            if (c.y < 0) {
              b.height += c.y;
              b.y -= c.y;
              c.y = 0;
            }
            if (a == this && c.x < b.get_right() && c.y < b.get_bottom()) {
              a = this.clone();
            }
            if (d == a && (e == null || e.x == 0 && e.y == 0)) {
              e = d = null;
            }
            switch (this.type._hx_index) {
              case 0:
                if (d != null) {
                  Wa.convertToData(this);
                  Wa.convertToData(a);
                  if (d != null) {
                    Wa.convertToData(d);
                  }
                  zc.copyPixels(this, a, b, c, d, e, f);
                } else {
                  Wa.convertToCanvas(this);
                  Wa.convertToCanvas(a);
                  Wa.copyPixels(this, a, b, c, d, e, f);
                }
                break;
              case 1:
                Wa.convertToData(this);
                Wa.convertToData(a);
                if (d != null) {
                  Wa.convertToData(d);
                }
                zc.copyPixels(this, a, b, c, d, e, f);
                break;
              case 2:
                b.offset(a.offsetX, a.offsetY);
                c.offset(this.offsetX, this.offsetY);
                if (d != null && e != null) {
                  e.offset(d.offsetX, d.offsetY);
                }
                this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData, b.__toFlashRectangle(), c.__toFlashPoint(), d != null ? d.buffer.get_src() : null, e != null ? e.__toFlashPoint() : null, f);
            }
          }
        },
        fillRect: function (a, b, c) {
          a = this.__clipRect(a);
          if (this.buffer != null && a != null) {
            switch (this.type._hx_index) {
              case 0:
                Wa.fillRect(this, a, b, c);
                break;
              case 1:
                Wa.convertToData(this);
                if (this.buffer.data.length == 0) {
                  break;
                }
                zc.fillRect(this, a, b, c);
                break;
              case 2:
                a.offset(this.offsetX, this.offsetY);
                if (c == null) {
                  b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                } else {
                  switch (c) {
                    case 1:
                      break;
                    case 2:
                      b = (b & 255) << 24 | (b >>> 8 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 24 & 255;
                      break;
                    default:
                      b = (b & 255) << 24 | (b >>> 24 & 255) << 16 | (b >>> 16 & 255) << 8 | b >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(), b);
            }
          }
        },
        getPixel32: function (a, b, c) {
          if (this.buffer == null || a < 0 || b < 0 || a >= this.width || b >= this.height) {
            return 0;
          }
          switch (this.type._hx_index) {
            case 0:
              return Wa.getPixel32(this, a, b, c);
            case 1:
              Wa.convertToData(this);
              return zc.getPixel32(this, a, b, c);
            case 2:
              a = this.buffer.__srcBitmapData.getPixel32(a + this.offsetX, b + this.offsetY);
              if (c == null) {
                return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
              }
              switch (c) {
                case 1:
                  return a;
                case 2:
                  return (a & 255) << 24 | (a >>> 8 & 255) << 16 | (a >>> 16 & 255) << 8 | a >>> 24 & 255;
                default:
                  return (a >>> 16 & 255) << 24 | (a >>> 8 & 255) << 16 | (a & 255) << 8 | a >>> 24 & 255;
              }
            default:
              return 0;
          }
        },
        setPixel: function (a, b, c, d) {
          if (this.buffer != null && !(a < 0) && !(b < 0) && !(a >= this.width) && !(b >= this.height)) {
            switch (this.type._hx_index) {
              case 0:
                Wa.setPixel(this, a, b, c, d);
                break;
              case 1:
                Wa.convertToData(this);
                zc.setPixel(this, a, b, c, d);
                break;
              case 2:
                if (d == null) {
                  c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                } else {
                  switch (d) {
                    case 1:
                      break;
                    case 2:
                      c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                      break;
                    default:
                      c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.setPixel(a + this.offsetX, b + this.offsetX, c);
            }
          }
        },
        setPixel32: function (a, b, c, d) {
          if (this.buffer != null && !(a < 0) && !(b < 0) && !(a >= this.width) && !(b >= this.height)) {
            switch (this.type._hx_index) {
              case 0:
                Wa.setPixel32(this, a, b, c, d);
                break;
              case 1:
                Wa.convertToData(this);
                zc.setPixel32(this, a, b, c, d);
                break;
              case 2:
                if (d == null) {
                  c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                } else {
                  switch (d) {
                    case 1:
                      break;
                    case 2:
                      c = (c & 255) << 24 | (c >>> 8 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 24 & 255;
                      break;
                    default:
                      c = (c & 255) << 24 | (c >>> 24 & 255) << 16 | (c >>> 16 & 255) << 8 | c >>> 8 & 255;
                  }
                }
                this.buffer.__srcBitmapData.setPixel32(a + this.offsetX, b + this.offsetY, c);
            }
          }
        },
        __clipRect: function (a) {
          if (a == null || a.x < 0 && (a.width -= -a.x, a.x = 0, a.x + a.width <= 0) || a.y < 0 && (a.height -= -a.y, a.y = 0, a.y + a.height <= 0) || a.x + a.width >= this.width && (a.width -= a.x + a.width - this.width, a.width <= 0) || a.y + a.height >= this.height && (a.height -= a.y + a.height - this.height, a.height <= 0)) {
            return null;
          } else {
            return a;
          }
        },
        __fromBase64: function (a, b, c) {
          var d = this;
          var e = new window.Image();
          e.addEventListener("load", function (a) {
            d.buffer = new vg(null, e.width, e.height);
            d.buffer.__srcImage = e;
            d.offsetX = 0;
            d.offsetY = 0;
            d.width = d.buffer.width;
            d.height = d.buffer.height;
            if (c != null) {
              c(d);
            }
          }, false);
          e.src = "data:" + b + ";base64," + a;
        },
        __fromBytes: function (a, b) {
          if (Fb.__isPNG(a)) {
            var c = "image/png";
          } else if (Fb.__isJPG(a)) {
            c = "image/jpeg";
          } else if (Fb.__isGIF(a)) {
            c = "image/gif";
          } else {
            return false;
          }
          this.__fromBase64(Zf.encode(a), c, b);
          return true;
        },
        __fromFile: function (a, b, c) {
          var d = this;
          var e = new window.Image();
          if (!Pa.__isSameOrigin(a)) {
            e.crossOrigin = "Anonymous";
          }
          e.onload = function (a) {
            d.buffer = new vg(null, e.width, e.height);
            d.buffer.__srcImage = e;
            d.width = e.width;
            d.height = e.height;
            if (b != null) {
              b(d);
            }
          };
          e.onerror = function (a) {
            if (c != null) {
              c();
            }
          };
          e.src = a;
          return true;
        },
        __fromImageBuffer: function (a) {
          this.buffer = a;
          if (a != null) {
            if (this.width == -1) {
              this.width = a.width;
            }
            if (this.height == -1) {
              this.height = a.height;
            }
          }
        },
        get_data: function () {
          if (this.buffer.data == null && this.buffer.width > 0 && this.buffer.height > 0) {
            Wa.convertToData(this);
          }
          return this.buffer.data;
        },
        set_data: function (a) {
          return this.buffer.data = a;
        },
        get_format: function () {
          return this.buffer.format;
        },
        set_format: function (a) {
          if (this.buffer.format != a && this.type._hx_index == 1) {
            zc.setFormat(this, a);
          }
          return this.buffer.format = a;
        },
        get_premultiplied: function () {
          return this.buffer.premultiplied;
        },
        set_premultiplied: function (a) {
          if (a && !this.buffer.premultiplied) {
            switch (this.type._hx_index) {
              case 0:
              case 1:
                Wa.convertToData(this);
                zc.multiplyAlpha(this);
            }
          } else if (!a && this.buffer.premultiplied && this.type._hx_index == 1) {
            Wa.convertToData(this);
            zc.unmultiplyAlpha(this);
          }
          return a;
        },
        get_rect: function () {
          return new Je(0, 0, this.width, this.height);
        },
        get_src: function () {
          if (this.buffer.__srcCanvas == null && (this.buffer.data != null || this.type == Gd.DATA)) {
            Wa.convertToCanvas(this);
          }
          return this.buffer.get_src();
        },
        get_transparent: function () {
          if (this.buffer == null) {
            return false;
          } else {
            return this.buffer.transparent;
          }
        },
        set_transparent: function (a) {
          if (this.buffer == null) {
            return false;
          } else {
            return this.buffer.transparent = a;
          }
        },
        __class__: Fb,
        __properties__: {
          set_transparent: "set_transparent",
          get_transparent: "get_transparent",
          get_src: "get_src",
          get_rect: "get_rect",
          set_premultiplied: "set_premultiplied",
          get_premultiplied: "get_premultiplied",
          set_format: "set_format",
          get_format: "get_format",
          set_data: "set_data",
          get_data: "get_data"
        }
      };
      function vg(a, b, c, d, e) {
        if (d == null) {
          d = 32;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.data = a;
        this.width = b;
        this.height = c;
        this.bitsPerPixel = d;
        this.format = e == null ? 0 : e;
        this.premultiplied = false;
        this.transparent = true;
      }
      h["lime.graphics.ImageBuffer"] = vg;
      vg.__name__ = "lime.graphics.ImageBuffer";
      vg.prototype = {
        clone: function () {
          var a = new vg(this.data, this.width, this.height, this.bitsPerPixel);
          if (this.data != null) {
            var b = this.data.byteLength;
            var c = null;
            var d = null;
            var e = null;
            var f = null;
            var k = null;
            b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : f != null ? k == null ? new Uint8Array(f, 0) : new Uint8Array(f, 0, k) : null;
            a.data = b;
            d = c = b = null;
            e = this.data;
            k = f = null;
            b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : f != null ? k == null ? new Uint8Array(f, 0) : new Uint8Array(f, 0, k) : null;
            a.data.set(b);
          } else if (this.__srcImageData != null) {
            a.__srcCanvas = window.document.createElement("canvas");
            a.__srcContext = a.__srcCanvas.getContext("2d");
            a.__srcCanvas.width = this.__srcImageData.width;
            a.__srcCanvas.height = this.__srcImageData.height;
            a.__srcImageData = a.__srcContext.createImageData(this.__srcImageData.width, this.__srcImageData.height);
            b = new Uint8ClampedArray(this.__srcImageData.data);
            a.__srcImageData.data.set(b);
          } else if (this.__srcCanvas != null) {
            a.__srcCanvas = window.document.createElement("canvas");
            a.__srcContext = a.__srcCanvas.getContext("2d");
            a.__srcCanvas.width = this.__srcCanvas.width;
            a.__srcCanvas.height = this.__srcCanvas.height;
            a.__srcContext.drawImage(this.__srcCanvas, 0, 0);
          } else {
            a.__srcImage = this.__srcImage;
          }
          a.bitsPerPixel = this.bitsPerPixel;
          a.format = this.format;
          a.premultiplied = this.premultiplied;
          a.transparent = this.transparent;
          return a;
        },
        get_src: function () {
          return this.__srcImage ?? this.__srcCanvas;
        },
        set_src: function (a) {
          if (a instanceof Image) {
            this.__srcImage = a;
          } else if (a instanceof HTMLCanvasElement) {
            this.__srcCanvas = a;
            this.__srcContext = this.__srcCanvas.getContext("2d");
          }
          return a;
        },
        get_stride: function () {
          return this.width * (this.bitsPerPixel / 8 | 0);
        },
        __class__: vg,
        __properties__: {
          get_stride: "get_stride",
          set_src: "set_src",
          get_src: "get_src"
        }
      };
      var vi = w["lime.graphics.ImageChannel"] = {
        __ename__: "lime.graphics.ImageChannel",
        __constructs__: null,
        RED: {
          _hx_name: "RED",
          _hx_index: 0,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        GREEN: {
          _hx_name: "GREEN",
          _hx_index: 1,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        BLUE: {
          _hx_name: "BLUE",
          _hx_index: 2,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        },
        ALPHA: {
          _hx_name: "ALPHA",
          _hx_index: 3,
          __enum__: "lime.graphics.ImageChannel",
          toString: p
        }
      };
      vi.__constructs__ = [vi.RED, vi.GREEN, vi.BLUE, vi.ALPHA];
      var Gd = w["lime.graphics.ImageType"] = {
        __ename__: "lime.graphics.ImageType",
        __constructs__: null,
        CANVAS: {
          _hx_name: "CANVAS",
          _hx_index: 0,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        DATA: {
          _hx_name: "DATA",
          _hx_index: 1,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        FLASH: {
          _hx_name: "FLASH",
          _hx_index: 2,
          __enum__: "lime.graphics.ImageType",
          toString: p
        },
        CUSTOM: {
          _hx_name: "CUSTOM",
          _hx_index: 3,
          __enum__: "lime.graphics.ImageType",
          toString: p
        }
      };
      Gd.__constructs__ = [Gd.CANVAS, Gd.DATA, Gd.FLASH, Gd.CUSTOM];
      function po() {}
      h["lime.graphics.RenderContext"] = po;
      po.__name__ = "lime.graphics.RenderContext";
      po.prototype = {
        __class__: po
      };
      var Rp = {
        uniform2fv: function (a, b, c, d, e) {
          if (d != null) {
            a.uniform2fv(b, c, d, e);
          } else {
            a.uniform2fv(b, c);
          }
        }
      };
      var Yc = {
        bufferData: function (a, b, c, d) {
          a.bufferData(b, c, d);
        },
        texImage2D: function (a, b, c, d, e, f, k, g, l, h) {
          if (g != null) {
            a.texImage2D(b, c, d, e, f, k, g, l, h);
          } else {
            a.texImage2D(b, c, d, e, f, k);
          }
        },
        uniformMatrix2fv: function (a, b, c, d) {
          a.uniformMatrix2fv(b, c, d);
        },
        uniformMatrix3fv: function (a, b, c, d) {
          a.uniformMatrix3fv(b, c, d);
        },
        uniformMatrix4fv: function (a, b, c, d) {
          a.uniformMatrix4fv(b, c, d);
        },
        fromWebGL2RenderContext: function (a) {
          return a;
        }
      };
      function np(a) {}
      h["lime.graphics.cairo.Cairo"] = np;
      np.__name__ = "lime.graphics.cairo.Cairo";
      np.prototype = {
        clip: function () {},
        identityMatrix: function () {},
        newPath: function () {},
        paint: function () {},
        rectangle: function (a, b, c, d) {},
        restore: function () {},
        save: function () {},
        setOperator: function (a) {
          return a;
        },
        setSourceRGB: function (a, b, c) {},
        set_matrix: function (a) {
          return a;
        },
        __class__: np,
        __properties__: {
          set_matrix: "set_matrix"
        }
      };
      var Jp = {
        flush: function (a) {}
      };
      function wg() {}
      h["lime.graphics.opengl.GL"] = wg;
      wg.__name__ = "lime.graphics.opengl.GL";
      function op() {
        this.STACK_UNDERFLOW = 1284;
        this.STACK_OVERFLOW = 1283;
        this.CONTEXT_FLAG_DEBUG_BIT = 2;
        this.DEBUG_OUTPUT = 37600;
        this.DEBUG_SEVERITY_LOW = 37192;
        this.DEBUG_SEVERITY_MEDIUM = 37191;
        this.DEBUG_SEVERITY_HIGH = 37190;
        this.DEBUG_LOGGED_MESSAGES = 37189;
        this.MAX_DEBUG_LOGGED_MESSAGES = 37188;
        this.MAX_DEBUG_MESSAGE_LENGTH = 37187;
        this.MAX_LABEL_LENGTH = 33512;
        this.SAMPLER = 33510;
        this.QUERY = 33507;
        this.PROGRAM = 33506;
        this.SHADER = 33505;
        this.BUFFER = 33504;
        this.DEBUG_GROUP_STACK_DEPTH = 33389;
        this.MAX_DEBUG_GROUP_STACK_DEPTH = 33388;
        this.DEBUG_SEVERITY_NOTIFICATION = 33387;
        this.DEBUG_TYPE_POP_GROUP = 33386;
        this.DEBUG_TYPE_PUSH_GROUP = 33385;
        this.DEBUG_TYPE_MARKER = 33384;
        this.DEBUG_TYPE_OTHER = 33361;
        this.DEBUG_TYPE_PERFORMANCE = 33360;
        this.DEBUG_TYPE_PORTABILITY = 33359;
        this.DEBUG_TYPE_UNDEFINED_BEHAVIOR = 33358;
        this.DEBUG_TYPE_DEPRECATED_BEHAVIOR = 33357;
        this.DEBUG_TYPE_ERROR = 33356;
        this.DEBUG_SOURCE_OTHER = 33355;
        this.DEBUG_SOURCE_APPLICATION = 33354;
        this.DEBUG_SOURCE_THIRD_PARTY = 33353;
        this.DEBUG_SOURCE_SHADER_COMPILER = 33352;
        this.DEBUG_SOURCE_WINDOW_SYSTEM = 33351;
        this.DEBUG_SOURCE_API = 33350;
        this.DEBUG_CALLBACK_USER_PARAM = 33349;
        this.DEBUG_CALLBACK_FUNCTION = 33348;
        this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH = 33347;
        this.DEBUG_OUTPUT_SYNCHRONOUS = 33346;
      }
      h["lime.graphics.opengl.ext.KHR_debug"] = op;
      op.__name__ = "lime.graphics.opengl.ext.KHR_debug";
      op.prototype = {
        __class__: op
      };
      var nd = {
        getAlphaTable: function (a) {
          if (nd.__alphaTable == null) {
            nd.__alphaTable = new Uint8Array(256);
          }
          nd.__alphaTable[0] = 0;
          for (var b = 1; b < 256;) {
            var c = b++;
            var d = Math.floor(c * a[18] + a[19] * 255);
            if (d > 255) {
              d = 255;
            }
            if (d < 0) {
              d = 0;
            }
            nd.__alphaTable[c] = d;
          }
          return nd.__alphaTable;
        },
        getBlueTable: function (a) {
          if (nd.__blueTable == null) {
            nd.__blueTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[12] + a[14] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            nd.__blueTable[d] = b;
          }
          return nd.__blueTable;
        },
        getGreenTable: function (a) {
          if (nd.__greenTable == null) {
            nd.__greenTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[6] + a[9] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            nd.__greenTable[d] = b;
          }
          return nd.__greenTable;
        },
        getRedTable: function (a) {
          if (nd.__redTable == null) {
            nd.__redTable = new Uint8Array(256);
          }
          var b;
          for (var c = 0; c < 256;) {
            var d = c++;
            b = Math.floor(d * a[0] + a[4] * 255);
            if (b > 255) {
              b = 255;
            }
            if (b < 0) {
              b = 0;
            }
            nd.__redTable[d] = b;
          }
          return nd.__redTable;
        },
        __toFlashColorTransform: function (a) {
          return null;
        }
      };
      var nb = {
        _new: function (a) {
          if (a == null || a.length != 16) {
            a = nb.__identity;
            a = a != null ? new Float32Array(a) : null;
          }
          return a;
        },
        append: function (a, b) {
          var c = a[0];
          var d = a[4];
          var e = a[8];
          var f = a[12];
          var k = a[1];
          var g = a[5];
          var l = a[9];
          var h = a[13];
          var p = a[2];
          var m = a[6];
          var n = a[10];
          var r = a[14];
          var q = a[3];
          var w = a[7];
          var u = a[11];
          var v = a[15];
          var A = nb.get(b, 0);
          var y = nb.get(b, 4);
          var z = nb.get(b, 8);
          var Y = nb.get(b, 12);
          var C = nb.get(b, 1);
          var La = nb.get(b, 5);
          var D = nb.get(b, 9);
          var E = nb.get(b, 13);
          var B = nb.get(b, 2);
          var x = nb.get(b, 6);
          var G = nb.get(b, 10);
          var I = nb.get(b, 14);
          var ha = nb.get(b, 3);
          var Ea = nb.get(b, 7);
          var ma = nb.get(b, 11);
          b = nb.get(b, 15);
          a[0] = c * A + k * y + p * z + q * Y;
          a[1] = c * C + k * La + p * D + q * E;
          a[2] = c * B + k * x + p * G + q * I;
          a[3] = c * ha + k * Ea + p * ma + q * b;
          a[4] = d * A + g * y + m * z + w * Y;
          a[5] = d * C + g * La + m * D + w * E;
          a[6] = d * B + g * x + m * G + w * I;
          a[7] = d * ha + g * Ea + m * ma + w * b;
          a[8] = e * A + l * y + n * z + u * Y;
          a[9] = e * C + l * La + n * D + u * E;
          a[10] = e * B + l * x + n * G + u * I;
          a[11] = e * ha + l * Ea + n * ma + u * b;
          a[12] = f * A + h * y + r * z + v * Y;
          a[13] = f * C + h * La + r * D + v * E;
          a[14] = f * B + h * x + r * G + v * I;
          a[15] = f * ha + h * Ea + r * ma + v * b;
        },
        createOrtho: function (a, b, c, d, e, f, k) {
          var g = 1 / (c - b);
          var l = 1 / (e - d);
          var h = 1 / (k - f);
          a[0] = g * 2;
          a[1] = 0;
          a[2] = 0;
          a[3] = 0;
          a[4] = 0;
          a[5] = l * 2;
          a[6] = 0;
          a[7] = 0;
          a[8] = 0;
          a[9] = 0;
          a[10] = h * -2;
          a[11] = 0;
          a[12] = -(b + c) * g;
          a[13] = -(d + e) * l;
          a[14] = -(f + k) * h;
          a[15] = 1;
        },
        identity: function (a) {
          a[0] = 1;
          a[1] = 0;
          a[2] = 0;
          a[3] = 0;
          a[4] = 0;
          a[5] = 1;
          a[6] = 0;
          a[7] = 0;
          a[8] = 0;
          a[9] = 0;
          a[10] = 1;
          a[11] = 0;
          a[12] = 0;
          a[13] = 0;
          a[14] = 0;
          a[15] = 1;
        },
        get: function (a, b) {
          return a[b];
        },
        set: function (a, b, c) {
          return a[b] = c;
        }
      };
      var O = {};
      function Je(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.x = a;
        this.y = b;
        this.width = c;
        this.height = d;
      }
      h["lime.math.Rectangle"] = Je;
      Je.__name__ = "lime.math.Rectangle";
      Je.prototype = {
        intersection: function (a, b) {
          if (b == null) {
            b = new Je();
          }
          var c = this.x < a.x ? a.x : this.x;
          var d = this.get_right() > a.get_right() ? a.get_right() : this.get_right();
          if (d <= c) {
            b.setEmpty();
            return b;
          }
          var e = this.y < a.y ? a.y : this.y;
          a = this.get_bottom() > a.get_bottom() ? a.get_bottom() : this.get_bottom();
          if (a <= e) {
            b.setEmpty();
            return b;
          }
          b.x = c;
          b.y = e;
          b.width = d - c;
          b.height = a - e;
          return b;
        },
        offset: function (a, b) {
          this.x += a;
          this.y += b;
        },
        setEmpty: function () {
          this.x = this.y = this.width = this.height = 0;
        },
        setTo: function (a, b, c, d) {
          this.x = a;
          this.y = b;
          this.width = c;
          this.height = d;
        },
        __toFlashRectangle: function () {
          return null;
        },
        get_bottom: function () {
          return this.y + this.height;
        },
        get_right: function () {
          return this.x + this.width;
        },
        __class__: Je,
        __properties__: {
          get_right: "get_right",
          get_bottom: "get_bottom"
        }
      };
      function no(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.w = d;
        this.x = a;
        this.y = b;
        this.z = c;
      }
      h["lime.math.Vector4"] = no;
      no.__name__ = "lime.math.Vector4";
      no.prototype = {
        __class__: no
      };
      function $c() {}
      h["lime.media.AudioBuffer"] = $c;
      $c.__name__ = "lime.media.AudioBuffer";
      $c.fromBytes = function (a) {
        if (a == null) {
          return null;
        }
        var b = new $c();
        b.set_src(new Howl({
          src: ["data:" + $c.__getCodec(a) + ";base64," + Zf.encode(a)],
          html5: true,
          preload: false
        }));
        return b;
      };
      $c.fromFile = function (a) {
        if (a == null) {
          return null;
        }
        var b = new $c();
        b.__srcHowl = new Howl({
          src: [a],
          preload: false
        });
        return b;
      };
      $c.fromFiles = function (a) {
        var b = new $c();
        b.__srcHowl = new Howl({
          src: a,
          preload: false
        });
        return b;
      };
      $c.loadFromFile = function (a) {
        var b = new Id();
        var c = $c.fromFile(a);
        if (c != null) {
          if (c != null) {
            c.__srcHowl.on("load", function () {
              b.complete(c);
            });
            c.__srcHowl.on("loaderror", function (a, c) {
              b.error(c);
            });
            c.__srcHowl.load();
          }
        } else {
          b.error(null);
        }
        return b.future;
      };
      $c.loadFromFiles = function (a) {
        var b = new Id();
        var c = $c.fromFiles(a);
        if (c != null) {
          c.__srcHowl.on("load", function () {
            b.complete(c);
          });
          c.__srcHowl.on("loaderror", function () {
            b.error(null);
          });
          c.__srcHowl.load();
        } else {
          b.error(null);
        }
        return b.future;
      };
      $c.__getCodec = function (a) {
        switch (a.getString(0, 4)) {
          case "OggS":
            return "audio/ogg";
          case "RIFF":
            if (a.getString(8, 4) == "WAVE") {
              return "audio/wav";
            }
            var b = a.b[1];
            var c = a.b[2];
            switch (a.b[0]) {
              case 73:
                if (b == 68 && c == 51) {
                  return "audio/mp3";
                }
                break;
              case 255:
                switch (b) {
                  case 243:
                  case 250:
                  case 251:
                    return "audio/mp3";
                }
            }
            break;
          case "fLaC":
            return "audio/flac";
          default:
            b = a.b[1];
            c = a.b[2];
            switch (a.b[0]) {
              case 73:
                if (b == 68 && c == 51) {
                  return "audio/mp3";
                }
                break;
              case 255:
                switch (b) {
                  case 243:
                  case 250:
                  case 251:
                    return "audio/mp3";
                }
            }
        }
        Ua.error("Unsupported sound format", {
          fileName: "lime/media/AudioBuffer.hx",
          lineNumber: 362,
          className: "lime.media.AudioBuffer",
          methodName: "__getCodec"
        });
        return null;
      };
      $c.prototype = {
        get_src: function () {
          return this.__srcHowl;
        },
        set_src: function (a) {
          return this.__srcHowl = a;
        },
        __class__: $c,
        __properties__: {
          set_src: "set_src",
          get_src: "get_src"
        }
      };
      function Do(a) {
        if (a != "custom") {
          if (a == null || a == "web") {
            try {
              window.AudioContext = window.AudioContext || window.webkitAudioContext;
              this.web = new window.AudioContext();
              this.type = "web";
            } catch (b) {
              Oa.lastError = b;
            }
          }
          if (this.web == null && a != "web") {
            this.html5 = new Co();
            this.type = "html5";
          }
        } else {
          this.type = "custom";
        }
      }
      h["lime.media.AudioContext"] = Do;
      Do.__name__ = "lime.media.AudioContext";
      Do.prototype = {
        __class__: Do
      };
      function dg() {}
      h["lime.media.AudioManager"] = dg;
      dg.__name__ = "lime.media.AudioManager";
      dg.init = function (a) {
        if (dg.context == null) {
          if (a == null && (dg.context = new Do(), a = dg.context, a.type == "openal")) {
            var b = a.openal;
            var c = b.openDevice();
            c = b.createContext(c);
            b.makeContextCurrent(c);
            b.processContext(c);
          }
          dg.context = a;
        }
      };
      function Eo(a, b, c, d) {
        if (d == null) {
          d = 0;
        }
        if (b == null) {
          b = 0;
        }
        this.onComplete = new Uc();
        this.buffer = a;
        this.offset = b;
        this.__backend = new oo(this);
        if (c != null && c != 0) {
          this.set_length(c);
        }
        this.set_loops(d);
        if (a != null) {
          this.init();
        }
      }
      h["lime.media.AudioSource"] = Eo;
      Eo.__name__ = "lime.media.AudioSource";
      Eo.prototype = {
        dispose: function () {
          this.__backend.dispose();
        },
        init: function () {
          this.__backend.init();
        },
        play: function () {
          this.__backend.play();
        },
        stop: function () {
          this.__backend.stop();
        },
        get_currentTime: function () {
          return this.__backend.getCurrentTime();
        },
        set_currentTime: function (a) {
          return this.__backend.setCurrentTime(a);
        },
        get_gain: function () {
          return this.__backend.getGain();
        },
        set_gain: function (a) {
          return this.__backend.setGain(a);
        },
        set_length: function (a) {
          return this.__backend.setLength(a);
        },
        set_loops: function (a) {
          return this.__backend.setLoops(a);
        },
        set_pitch: function (a) {
          return this.__backend.setPitch(a);
        },
        get_position: function () {
          return this.__backend.getPosition();
        },
        set_position: function (a) {
          return this.__backend.setPosition(a);
        },
        __class__: Eo,
        __properties__: {
          set_pitch: "set_pitch",
          set_loops: "set_loops",
          set_length: "set_length",
          set_position: "set_position",
          get_position: "get_position",
          set_gain: "set_gain",
          get_gain: "get_gain",
          set_currentTime: "set_currentTime",
          get_currentTime: "get_currentTime"
        }
      };
      function Co() {}
      h["lime.media.HTML5AudioContext"] = Co;
      Co.__name__ = "lime.media.HTML5AudioContext";
      Co.prototype = {
        __class__: Co
      };
      function pp() {}
      h["lime.media.OpenALAudioContext"] = pp;
      pp.__name__ = "lime.media.OpenALAudioContext";
      pp.prototype = {
        createContext: function (a, b) {
          return Yg.createContext(a, b);
        },
        makeContextCurrent: function (a) {
          return Yg.makeContextCurrent(a);
        },
        openDevice: function (a) {
          return Yg.openDevice(a);
        },
        processContext: function (a) {
          Yg.processContext(a);
        },
        __class__: pp
      };
      function Yg() {}
      h["lime.media.openal.ALC"] = Yg;
      Yg.__name__ = "lime.media.openal.ALC";
      Yg.createContext = function (a, b) {
        return null;
      };
      Yg.makeContextCurrent = function (a) {
        return false;
      };
      Yg.openDevice = function (a) {
        return null;
      };
      Yg.processContext = function (a) {};
      function dm() {}
      h["lime.net._IHTTPRequest"] = dm;
      dm.__name__ = "lime.net._IHTTPRequest";
      dm.__isInterface__ = true;
      dm.prototype = {
        __class__: dm
      };
      function Kf(a) {
        this.uri = a;
        this.contentType = "application/x-www-form-urlencoded";
        this.followRedirects = true;
        this.enableResponseHeaders = false;
        this.formData = new xa();
        this.headers = [];
        this.method = "GET";
        this.timeout = 30000;
        this.withCredentials = false;
        this.manageCookies = true;
        this.__backend = new Pa();
        this.__backend.init(this);
      }
      h["lime.net._HTTPRequest.AbstractHTTPRequest"] = Kf;
      Kf.__name__ = "lime.net._HTTPRequest.AbstractHTTPRequest";
      Kf.__interfaces__ = [dm];
      Kf.prototype = {
        __class__: Kf
      };
      function Zg(a) {
        Kf.call(this, a);
      }
      h["lime.net._HTTPRequest_Bytes"] = Zg;
      Zg.__name__ = "lime.net._HTTPRequest_Bytes";
      Zg.__super__ = Kf;
      Zg.prototype = q(Kf.prototype, {
        fromBytes: function (a) {
          return a;
        },
        load: function (a) {
          var b = this;
          if (a != null) {
            this.uri = a;
          }
          var c = new Id();
          a = this.__backend.loadData(this.uri);
          a.onProgress(n(c, c.progress));
          a.onError(function (a) {
            b.responseData = a.responseData;
            c.error(a.error);
          });
          a.onComplete(function (a) {
            b.responseData = b.fromBytes(a);
            c.complete(b.responseData);
          });
          return c.future;
        },
        __class__: Zg
      });
      function zi(a) {
        Kf.call(this, a);
      }
      h["lime.net._HTTPRequest_String"] = zi;
      zi.__name__ = "lime.net._HTTPRequest_String";
      zi.__super__ = Kf;
      zi.prototype = q(Kf.prototype, {
        load: function (a) {
          var b = this;
          if (a != null) {
            this.uri = a;
          }
          var c = new Id();
          a = this.__backend.loadText(this.uri);
          a.onProgress(n(c, c.progress));
          a.onError(function (a) {
            b.responseData = a.responseData;
            c.error(a.error);
          });
          a.onComplete(function (a) {
            b.responseData = a;
            c.complete(b.responseData);
          });
          return c.future;
        },
        __class__: zi
      });
      function ui(a, b) {
        this.error = a;
        this.responseData = b;
      }
      h["lime.net._HTTPRequestErrorResponse"] = ui;
      ui.__name__ = "lime.net._HTTPRequestErrorResponse";
      ui.prototype = {
        __class__: ui
      };
      function Zl(a, b) {
        if (b == null) {
          b = "";
        }
        this.name = a;
        this.value = b;
      }
      h["lime.net.HTTPRequestHeader"] = Zl;
      Zl.__name__ = "lime.net.HTTPRequestHeader";
      Zl.prototype = {
        __class__: Zl
      };
      function em(a) {
        Kf.call(this, a);
      }
      h["lime.net._HTTPRequest_lime_utils_Bytes"] = em;
      em.__name__ = "lime.net._HTTPRequest_lime_utils_Bytes";
      em.__super__ = Zg;
      em.prototype = q(Zg.prototype, {
        fromBytes: function (a) {
          return Dh.fromBytes(a);
        },
        __class__: em
      });
      function fm(a) {
        Kf.call(this, a);
      }
      h["lime.net._HTTPRequest_openfl_utils_ByteArray"] = fm;
      fm.__name__ = "lime.net._HTTPRequest_openfl_utils_ByteArray";
      fm.__super__ = Zg;
      fm.prototype = q(Zg.prototype, {
        fromBytes: function (a) {
          return Oe.fromBytes(a);
        },
        __class__: fm
      });
      function yc() {}
      h["lime.system.Clipboard"] = yc;
      yc.__name__ = "lime.system.Clipboard";
      yc.__properties__ = {
        set_text: "set_text",
        get_text: "get_text"
      };
      yc.__update = function () {
        var a = yc._text;
        yc._text = a;
        yc.__updated = true;
        if (yc._text != a) {
          yc.onUpdate.dispatch();
        }
      };
      yc.get_text = function () {
        yc.__update();
        return yc._text;
      };
      yc.set_text = function (a) {
        var b = yc._text;
        yc._text = a;
        var c = ka.current.__window;
        if (c != null) {
          c.__backend.setClipboard(a);
        }
        if (yc._text != b) {
          yc.onUpdate.dispatch();
        }
        return a;
      };
      var ml = w["lime.system.Endian"] = {
        __ename__: "lime.system.Endian",
        __constructs__: null,
        LITTLE_ENDIAN: {
          _hx_name: "LITTLE_ENDIAN",
          _hx_index: 0,
          __enum__: "lime.system.Endian",
          toString: p
        },
        BIG_ENDIAN: {
          _hx_name: "BIG_ENDIAN",
          _hx_index: 1,
          __enum__: "lime.system.Endian",
          toString: p
        }
      };
      ml.__constructs__ = [ml.LITTLE_ENDIAN, ml.BIG_ENDIAN];
      function Ie(a, b) {
        this.onUpdate = new ro();
        this.type = a;
        this.id = b;
      }
      h["lime.system.Sensor"] = Ie;
      Ie.__name__ = "lime.system.Sensor";
      Ie.getSensors = function (a) {
        if (a == null) {
          return Ie.sensors.slice();
        }
        var b = [];
        for (var c = 0, d = Ie.sensors; c < d.length;) {
          var e = d[c];
          ++c;
          if (e.type == a) {
            b.push(e);
          }
        }
        return b;
      };
      Ie.registerSensor = function (a, b) {
        a = new Ie(a, b);
        Ie.sensors.push(a);
        return Ie.sensorByID.h[b] = a;
      };
      Ie.prototype = {
        __class__: Ie
      };
      var Zo = w["lime.system.SensorType"] = {
        __ename__: "lime.system.SensorType",
        __constructs__: null,
        ACCELEROMETER: {
          _hx_name: "ACCELEROMETER",
          _hx_index: 0,
          __enum__: "lime.system.SensorType",
          toString: p
        }
      };
      Zo.__constructs__ = [Zo.ACCELEROMETER];
      function bd() {}
      h["lime.system.System"] = bd;
      bd.__name__ = "lime.system.System";
      bd.__properties__ = {
        get_endianness: "get_endianness"
      };
      bd.embed = x.lime.embed = function (a, b, c, d, e) {
        if (bd.__applicationEntryPoint != null && Object.prototype.hasOwnProperty.call(bd.__applicationEntryPoint.h, a)) {
          var f = typeof b == "string" ? window.document.getElementById(b) : b == null ? window.document.createElement("div") : b;
          if (f == null) {
            window.console.log("[lime.embed] ERROR: Cannot find target element: " + y.string(b));
          } else {
            if (c == null) {
              c = 0;
            }
            if (d == null) {
              d = 0;
            }
            if (e == null) {
              e = {};
            }
            if (Object.prototype.hasOwnProperty.call(e, "background") && typeof e.background == "string") {
              b = v.replace(y.string(e.background), "#", "");
              if (b.indexOf("0x") > -1) {
                e.background = y.parseInt(b);
              } else {
                e.background = y.parseInt("0x" + b);
              }
            }
            e.element = f;
            e.width = c;
            e.height = d;
            bd.__applicationEntryPoint.h[a](e);
          }
        }
      };
      bd.exit = function (a) {
        var b = ka.current;
        if (b != null && (b.onExit.dispatch(a), b.onExit.canceled)) {
          return;
        }
        if (b != null && b.__window != null) {
          b.__window.close();
        }
      };
      bd.getTimer = function () {
        return window.performance.now() | 0;
      };
      bd.openURL = function (a, b) {
        if (b == null) {
          b = "_blank";
        }
        if (a != null) {
          window.open(a, b);
        }
      };
      bd.__registerEntryPoint = function (a, b) {
        if (bd.__applicationEntryPoint == null) {
          bd.__applicationEntryPoint = new xa();
        }
        bd.__applicationEntryPoint.h[a] = b;
      };
      bd.get_endianness = function () {
        if (bd.__endianness == null) {
          var a = new ArrayBuffer(2);
          var b = null;
          var c = null;
          var d = null;
          var e = null;
          var f = null;
          var k = b = b != null ? new Uint8Array(b) : c != null ? new Uint8Array(c) : d != null ? new Uint8Array(d.__array) : e != null ? new Uint8Array(e) : a != null ? f == null ? new Uint8Array(a, 0) : new Uint8Array(a, 0, f) : null;
          f = e = d = c = b = null;
          b = b != null ? new Uint16Array(b) : c != null ? new Uint16Array(c) : d != null ? new Uint16Array(d.__array) : e != null ? new Uint16Array(e) : a != null ? f == null ? new Uint16Array(a, 0) : new Uint16Array(a, 0, f) : null;
          k[0] = 170;
          k[1] = 187;
          bd.__endianness = b[0] == 43707 ? ml.BIG_ENDIAN : ml.LITTLE_ENDIAN;
        }
        return bd.__endianness;
      };
      function qo(a, b) {
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 0;
        }
        this.onRun = new xi();
        this.onError = new xi();
        this.onComplete = new xi();
        this.doWork = new xi();
        this.minThreads = a;
        this.maxThreads = b;
        this.currentThreads = 0;
      }
      h["lime.system.ThreadPool"] = qo;
      qo.__name__ = "lime.system.ThreadPool";
      qo.prototype = {
        queue: function (a) {
          this.runWork(a);
        },
        sendComplete: function (a) {
          this.onComplete.dispatch(a);
        },
        sendError: function (a) {
          this.onError.dispatch(a);
        },
        runWork: function (a) {
          this.onRun.dispatch(a);
          this.doWork.dispatch(a);
        },
        __class__: qo
      };
      function Fo() {
        this.onSave = new Kj();
        this.onCancel = new Uc();
      }
      h["lime.ui.FileDialog"] = Fo;
      Fo.__name__ = "lime.ui.FileDialog";
      Fo.prototype = {
        save: function (a, b, c, d, e) {
          if (e == null) {
            e = "application/octet-stream";
          }
          if (a == null) {
            this.onCancel.dispatch();
            return false;
          }
          b = "";
          if (Fb.__isPNG(a)) {
            e = "image/png";
            b = ".png";
          } else if (Fb.__isJPG(a)) {
            e = "image/jpeg";
            b = ".jpg";
          } else if (Fb.__isGIF(a)) {
            e = "image/gif";
            b = ".gif";
          } else if (Fb.__isWebP(a)) {
            e = "image/webp";
            b = ".webp";
          }
          c = c != null ? Ic.withoutDirectory(c) : "download" + b;
          b = a.b.bufferValue;
          b = b.slice(0, a.length);
          window.saveAs(new Blob([b], {
            type: e
          }), c, true);
          this.onSave.dispatch(c);
          return true;
        },
        __class__: Fo
      };
      function Oc(a) {
        this.onDisconnect = new Uc();
        this.onButtonUp = new bm();
        this.onButtonDown = new bm();
        this.onAxisMove = new zo();
        this.id = a;
        this.connected = true;
      }
      h["lime.ui.Gamepad"] = Oc;
      Oc.__name__ = "lime.ui.Gamepad";
      Oc.__connect = function (a) {
        if (!Oc.devices.h.hasOwnProperty(a)) {
          var b = new Oc(a);
          Oc.devices.h[a] = b;
          Oc.onConnect.dispatch(b);
        }
      };
      Oc.__disconnect = function (a) {
        var b = Oc.devices.h[a];
        if (b != null) {
          b.connected = false;
        }
        Oc.devices.remove(a);
        if (b != null) {
          b.onDisconnect.dispatch();
        }
      };
      Oc.prototype = {
        __class__: Oc
      };
      function Kc(a) {
        this.onTrackballMove = new vo();
        this.onHatMove = new xo();
        this.onDisconnect = new Uc();
        this.onButtonUp = new ih();
        this.onButtonDown = new ih();
        this.onAxisMove = new wo();
        this.id = a;
        this.connected = true;
      }
      h["lime.ui.Joystick"] = Kc;
      Kc.__name__ = "lime.ui.Joystick";
      Kc.__connect = function (a) {
        if (!Kc.devices.h.hasOwnProperty(a)) {
          var b = new Kc(a);
          Kc.devices.h[a] = b;
          Kc.onConnect.dispatch(b);
        }
      };
      Kc.__disconnect = function (a) {
        var b = Kc.devices.h[a];
        if (b != null) {
          b.connected = false;
        }
        Kc.devices.remove(a);
        if (b != null) {
          b.onDisconnect.dispatch();
        }
      };
      Kc.__getDeviceData = function () {
        var a = null;
        try {
          a = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : null;
        } catch (b) {
          Oa.lastError = b;
        }
        return a;
      };
      Kc.prototype = {
        __class__: Kc
      };
      var Cb = {
        __properties__: {
          get_shiftKey: "get_shiftKey",
          get_metaKey: "get_metaKey",
          get_ctrlKey: "get_ctrlKey",
          get_altKey: "get_altKey"
        },
        get_altKey: function (a) {
          if ((a & 256) <= 0) {
            return (a & 512) > 0;
          } else {
            return true;
          }
        },
        get_ctrlKey: function (a) {
          if ((a & 64) <= 0) {
            return (a & 128) > 0;
          } else {
            return true;
          }
        },
        get_metaKey: function (a) {
          if ((a & 1024) <= 0) {
            return (a & 2048) > 0;
          } else {
            return true;
          }
        },
        get_shiftKey: function (a) {
          if ((a & 1) <= 0) {
            return (a & 2) > 0;
          } else {
            return true;
          }
        }
      };
      var Tb = w["lime.ui.MouseCursor"] = {
        __ename__: "lime.ui.MouseCursor",
        __constructs__: null,
        ARROW: {
          _hx_name: "ARROW",
          _hx_index: 0,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        CROSSHAIR: {
          _hx_name: "CROSSHAIR",
          _hx_index: 1,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        DEFAULT: {
          _hx_name: "DEFAULT",
          _hx_index: 2,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        MOVE: {
          _hx_name: "MOVE",
          _hx_index: 3,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        POINTER: {
          _hx_name: "POINTER",
          _hx_index: 4,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NESW: {
          _hx_name: "RESIZE_NESW",
          _hx_index: 5,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NS: {
          _hx_name: "RESIZE_NS",
          _hx_index: 6,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_NWSE: {
          _hx_name: "RESIZE_NWSE",
          _hx_index: 7,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        RESIZE_WE: {
          _hx_name: "RESIZE_WE",
          _hx_index: 8,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        TEXT: {
          _hx_name: "TEXT",
          _hx_index: 9,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        WAIT: {
          _hx_name: "WAIT",
          _hx_index: 10,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        WAIT_ARROW: {
          _hx_name: "WAIT_ARROW",
          _hx_index: 11,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        },
        CUSTOM: {
          _hx_name: "CUSTOM",
          _hx_index: 12,
          __enum__: "lime.ui.MouseCursor",
          toString: p
        }
      };
      Tb.__constructs__ = [Tb.ARROW, Tb.CROSSHAIR, Tb.DEFAULT, Tb.MOVE, Tb.POINTER, Tb.RESIZE_NESW, Tb.RESIZE_NS, Tb.RESIZE_NWSE, Tb.RESIZE_WE, Tb.TEXT, Tb.WAIT, Tb.WAIT_ARROW, Tb.CUSTOM];
      var Xg = w["lime.ui.MouseWheelMode"] = {
        __ename__: "lime.ui.MouseWheelMode",
        __constructs__: null,
        PIXELS: {
          _hx_name: "PIXELS",
          _hx_index: 0,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        LINES: {
          _hx_name: "LINES",
          _hx_index: 1,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        PAGES: {
          _hx_name: "PAGES",
          _hx_index: 2,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 3,
          __enum__: "lime.ui.MouseWheelMode",
          toString: p
        }
      };
      Xg.__constructs__ = [Xg.PIXELS, Xg.LINES, Xg.PAGES, Xg.UNKNOWN];
      function Dc(a, b, c, d, e, f, k) {
        this.x = a;
        this.y = b;
        this.id = c;
        this.dx = d;
        this.dy = e;
        this.pressure = f;
        this.device = k;
      }
      h["lime.ui.Touch"] = Dc;
      Dc.__name__ = "lime.ui.Touch";
      Dc.prototype = {
        __class__: Dc
      };
      function Ai(a, b) {
        this.clickCount = 0;
        this.onTextInput = new Kj();
        this.onTextEdit = new yo();
        this.onRestore = new Uc();
        this.onResize = new $l();
        this.onRenderContextRestored = new am();
        this.onRenderContextLost = new Uc();
        this.onRender = new am();
        this.onMove = new Jj();
        this.onMouseWheel = new uo();
        this.onMouseUp = new so();
        this.onMouseMoveRelative = new Jj();
        this.onMouseMove = new Jj();
        this.onMouseDown = new to();
        this.onMinimize = new Uc();
        this.onLeave = new Uc();
        this.onKeyUp = new cm();
        this.onKeyDown = new cm();
        this.onFullscreen = new Uc();
        this.onFocusOut = new Uc();
        this.onFocusIn = new Uc();
        this.onExpose = new Uc();
        this.onEnter = new Uc();
        this.onDropFile = new Kj();
        this.onDeactivate = new Uc();
        this.onClose = new Uc();
        this.onActivate = new Uc();
        this.application = a;
        this.__attributes = b ?? {};
        if (Object.prototype.hasOwnProperty.call(this.__attributes, "parameters")) {
          this.parameters = this.__attributes.parameters;
        }
        this.__height = this.__width = 0;
        this.__fullscreen = false;
        this.__scale = 1;
        this.__y = this.__x = 0;
        this.__title = Object.prototype.hasOwnProperty.call(this.__attributes, "title") ? this.__attributes.title : "";
        this.id = -1;
        this.__backend = new Xa(this);
      }
      h["lime.ui.Window"] = Ai;
      Ai.__name__ = "lime.ui.Window";
      Ai.prototype = {
        close: function () {
          this.__backend.close();
        },
        set_cursor: function (a) {
          return this.__backend.setCursor(a);
        },
        set_fullscreen: function (a) {
          return this.__fullscreen = this.__backend.setFullscreen(a);
        },
        setTextInputRect: function (a) {
          return this.__backend.setTextInputRect(a);
        },
        __class__: Ai,
        __properties__: {
          set_fullscreen: "set_fullscreen",
          set_cursor: "set_cursor"
        }
      };
      function Lf() {
        this.data = new xa();
        this.paths = [];
      }
      h["lime.utils.AssetBundle"] = Lf;
      Lf.__name__ = "lime.utils.AssetBundle";
      Lf.fromBytes = function (a) {
        a = new Gj(a);
        return Lf.__extractBundle(a);
      };
      Lf.loadFromBytes = function (a) {
        return Eb.withValue(Lf.fromBytes(a));
      };
      Lf.loadFromFile = function (a) {
        return Dh.loadFromFile(a).then(Lf.loadFromBytes);
      };
      Lf.__extractBundle = function (a) {
        var b = oi.readZip(a);
        a = new Lf();
        for (b = b.h; b != null;) {
          var c = b.item;
          b = b.next;
          if (c.compressed) {
            var d = a.data;
            var e = c.fileName;
            var f = Dh.decompress(c.data, gm.DEFLATE);
            d.h[e] = f;
          } else {
            a.data.h[c.fileName] = c.data;
          }
          a.paths.push(c.fileName);
        }
        return a;
      };
      Lf.prototype = {
        __class__: Lf
      };
      function Go() {
        this.enabled = true;
        this.audio = new xa();
        this.font = new xa();
        this.image = new xa();
        this.version = 801159;
      }
      h["lime.utils.AssetCache"] = Go;
      Go.__name__ = "lime.utils.AssetCache";
      Go.prototype = {
        exists: function (a, b) {
          if ((b == "IMAGE" || b == null) && Object.prototype.hasOwnProperty.call(this.image.h, a) || (b == "FONT" || b == null) && Object.prototype.hasOwnProperty.call(this.font.h, a) || (b == "SOUND" || b == "MUSIC" || b == null) && Object.prototype.hasOwnProperty.call(this.audio.h, a)) {
            return true;
          } else {
            return false;
          }
        },
        set: function (a, b, c) {
          switch (b) {
            case "FONT":
              this.font.h[a] = c;
              break;
            case "IMAGE":
              if (!(c instanceof Fb)) {
                throw I.thrown("Cannot cache non-Image asset: " + y.string(c) + " as Image");
              }
              this.image.h[a] = c;
              break;
            case "MUSIC":
            case "SOUND":
              if (!(c instanceof $c)) {
                throw I.thrown("Cannot cache non-AudioBuffer asset: " + y.string(c) + " as AudioBuffer");
              }
              this.audio.h[a] = c;
              break;
            default:
              throw I.thrown(b + " assets are not cachable");
          }
        },
        clear: function (a) {
          if (a == null) {
            this.audio = new xa();
            this.font = new xa();
            this.image = new xa();
          } else {
            var b = this.audio.h;
            b = Object.keys(b);
            for (var c = b.length, d = 0; d < c;) {
              var e = b[d++];
              if (v.startsWith(e, a)) {
                var f = this.audio;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
            b = this.font.h;
            b = Object.keys(b);
            c = b.length;
            for (d = 0; d < c;) {
              e = b[d++];
              if (v.startsWith(e, a)) {
                f = this.font;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
            b = this.image.h;
            b = Object.keys(b);
            c = b.length;
            for (d = 0; d < c;) {
              e = b[d++];
              if (v.startsWith(e, a)) {
                f = this.image;
                if (Object.prototype.hasOwnProperty.call(f.h, e)) {
                  delete f.h[e];
                }
              }
            }
          }
        },
        __class__: Go
      };
      function lc() {
        this.types = new xa();
        this.sizes = new xa();
        this.preload = new xa();
        this.paths = new xa();
        this.pathGroups = new xa();
        this.classTypes = new xa();
        this.cachedText = new xa();
        this.cachedImages = new xa();
        this.cachedFonts = new xa();
        this.cachedBytes = new xa();
        this.cachedAudioBuffers = new xa();
        this.onChange = new Uc();
        this.bytesTotal = this.bytesLoaded = 0;
      }
      h["lime.utils.AssetLibrary"] = lc;
      lc.__name__ = "lime.utils.AssetLibrary";
      lc.fromBundle = function (a) {
        if (Object.prototype.hasOwnProperty.call(a.data.h, "library.json")) {
          var b = Qd.fromBytes(a.data.h["library.json"]);
          if (b != null) {
            if (b.libraryType == null) {
              var c = new lc();
            } else {
              c = h[b.libraryType];
              if (c != null) {
                c = yb.createInstance(c, b.libraryArgs);
              } else {
                Ua.warn("Could not find library type: " + b.libraryType, {
                  fileName: "lime/utils/AssetLibrary.hx",
                  lineNumber: 122,
                  className: "lime.utils.AssetLibrary",
                  methodName: "fromBundle"
                });
                return null;
              }
            }
            c.__fromBundle(a, b);
            return c;
          }
        } else {
          c = new lc();
          c.__fromBundle(a);
          return c;
        }
        return null;
      };
      lc.fromManifest = function (a) {
        if (a == null) {
          return null;
        }
        if (a.libraryType == null) {
          var b = new lc();
        } else {
          b = h[a.libraryType];
          if (b != null) {
            b = yb.createInstance(b, a.libraryArgs);
          } else {
            Ua.warn("Could not find library type: " + a.libraryType, {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 160,
              className: "lime.utils.AssetLibrary",
              methodName: "fromManifest"
            });
            return null;
          }
        }
        b.__fromManifest(a);
        return b;
      };
      lc.prototype = {
        exists: function (a, b) {
          b = b != null ? wa.__cast(b, String) : null;
          a = this.types.h[a];
          if (a == null || a != b && (b != "SOUND" && b != "MUSIC" || a != "MUSIC" && a != "SOUND") && b != "BINARY" && b != null && (a != "BINARY" || b != "TEXT")) {
            return false;
          } else {
            return true;
          }
        },
        getAsset: function (a, b) {
          switch (b) {
            case "BINARY":
              return this.getBytes(a);
            case "FONT":
              return this.getFont(a);
            case "IMAGE":
              return this.getImage(a);
            case "MUSIC":
            case "SOUND":
              return this.getAudioBuffer(a);
            case "TEMPLATE":
              throw I.thrown("Not sure how to get template: " + a);
            case "TEXT":
              return this.getText(a);
            default:
              throw I.thrown("Unknown asset type: " + b);
          }
        },
        getAudioBuffer: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
            return this.cachedAudioBuffers.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return $c.fromBytes(wa.__cast(yb.createInstance(this.classTypes.h[a], []), ac));
          } else {
            return $c.fromFile(this.getPath(a));
          }
        },
        getBytes: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return this.cachedBytes.h[a];
          }
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            var b = Dh.ofString(this.cachedText.h[a]);
            return this.cachedBytes.h[a] = b;
          }
          if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return wa.__cast(yb.createInstance(this.classTypes.h[a], []), ac);
          } else {
            return Dh.fromFile(this.getPath(a));
          }
        },
        getFont: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a)) {
            return this.cachedFonts.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return wa.__cast(yb.createInstance(this.classTypes.h[a], []), Fa);
          } else {
            return Fa.fromFile(this.getPath(a));
          }
        },
        getImage: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedImages.h, a)) {
            return this.cachedImages.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return wa.__cast(yb.createInstance(this.classTypes.h[a], []), Fb);
          } else {
            return Fb.fromFile(this.getPath(a));
          }
        },
        getPath: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.paths.h, a)) {
            return this.paths.h[a];
          } else if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            return this.pathGroups.h[a][0];
          } else {
            return null;
          }
        },
        getText: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            return this.cachedText.h[a];
          }
          a = this.getBytes(a);
          if (a == null) {
            return null;
          } else {
            return a.getString(0, a.length);
          }
        },
        isLocal: function (a, b) {
          if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return true;
          }
          b = wa.__cast(b, String);
          if (b == null) {
            if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.cachedText.h, a) || Object.prototype.hasOwnProperty.call(this.cachedImages.h, a) || Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
              return true;
            } else {
              return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
            }
          }
          switch (b) {
            case "FONT":
              return Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a);
            case "IMAGE":
              return Object.prototype.hasOwnProperty.call(this.cachedImages.h, a);
            case "MUSIC":
            case "SOUND":
              return Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a);
            default:
              if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
                return true;
              } else {
                return Object.prototype.hasOwnProperty.call(this.cachedText.h, a);
              }
          }
        },
        list: function (a) {
          var b = a != null ? wa.__cast(a, String) : null;
          var c = [];
          var d = Object.keys(this.types.h);
          for (var e = d.length, f = 0; f < e;) {
            var k = d[f++];
            if (b == null || this.exists(k, a)) {
              c.push(k);
            }
          }
          return c;
        },
        loadAsset: function (a, b) {
          switch (b) {
            case "BINARY":
              return this.loadBytes(a);
            case "FONT":
              return this.loadFont(a);
            case "IMAGE":
              return this.loadImage(a);
            case "MUSIC":
            case "SOUND":
              return this.loadAudioBuffer(a);
            case "TEMPLATE":
              throw I.thrown("Not sure how to load template: " + a);
            case "TEXT":
              return this.loadText(a);
            default:
              throw I.thrown("Unknown asset type: " + b);
          }
        },
        load: function () {
          if (this.loaded) {
            return Eb.withValue(this);
          }
          if (this.promise == null) {
            this.promise = new Id();
            this.bytesLoadedCache = new xa();
            this.assetsLoaded = 0;
            this.assetsTotal = 1;
            var a = Object.keys(this.preload.h);
            for (var b = a.length, c = 0; c < b;) {
              var d = a[c++];
              if (this.preload.h[d]) {
                Ua.verbose("Preloading asset: " + d + " [" + this.types.h[d] + "]", {
                  fileName: "lime/utils/AssetLibrary.hx",
                  lineNumber: 408,
                  className: "lime.utils.AssetLibrary",
                  methodName: "load"
                });
                var e = this.types.h[d];
                if (e != null) {
                  switch (e) {
                    case "BINARY":
                      this.assetsTotal++;
                      e = this.loadBytes(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadBytes_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "FONT":
                      this.assetsTotal++;
                      e = this.loadFont(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadFont_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "IMAGE":
                      this.assetsTotal++;
                      e = this.loadImage(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadImage_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "MUSIC":
                    case "SOUND":
                      this.assetsTotal++;
                      e = this.loadAudioBuffer(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].loadAudioBuffer_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadAudioBuffer_onComplete(a[0], c);
                        };
                      }([d], [this]));
                      break;
                    case "TEXT":
                      this.assetsTotal++;
                      e = this.loadText(d);
                      e.onProgress(function (a, b) {
                        return function (c, d) {
                          b[0].load_onProgress(a[0], c, d);
                        };
                      }([d], [this]));
                      e.onError(function (a, b) {
                        return function (c) {
                          b[0].load_onError(a[0], c);
                        };
                      }([d], [this]));
                      e.onComplete(function (a, b) {
                        return function (c) {
                          b[0].loadText_onComplete(a[0], c);
                        };
                      }([d], [this]));
                  }
                }
              }
            }
            this.__assetLoaded(null);
          }
          return this.promise.future;
        },
        loadAudioBuffer: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedAudioBuffers.h, a)) {
            return Eb.withValue(this.cachedAudioBuffers.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Eb.withValue($c.fromBytes(wa.__cast(yb.createInstance(this.classTypes.h[a], []), ac)));
          } else if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            return $c.loadFromFiles(this.pathGroups.h[a]);
          } else {
            return $c.loadFromFile(this.paths.h[a]);
          }
        },
        loadBytes: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return Eb.withValue(this.cachedBytes.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Eb.withValue(yb.createInstance(this.classTypes.h[a], []));
          } else {
            return Dh.loadFromFile(this.getPath(a));
          }
        },
        loadFont: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedFonts.h, a)) {
            return Eb.withValue(this.cachedFonts.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            a = yb.createInstance(this.classTypes.h[a], []);
            return a.__loadFromName(a.name);
          } else {
            return Fa.loadFromName(this.getPath(a));
          }
        },
        loadImage: function (a) {
          var b = this;
          if (Object.prototype.hasOwnProperty.call(this.cachedImages.h, a)) {
            return Eb.withValue(this.cachedImages.h[a]);
          } else if (Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            return Eb.withValue(yb.createInstance(this.classTypes.h[a], []));
          } else if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a)) {
            return Fb.loadFromBytes(this.cachedBytes.h[a]).then(function (c) {
              var d = b.cachedBytes;
              if (Object.prototype.hasOwnProperty.call(d.h, a)) {
                delete d.h[a];
              }
              b.cachedImages.h[a] = c;
              return Eb.withValue(c);
            });
          } else {
            return Fb.loadFromFile(this.getPath(a));
          }
        },
        loadText: function (a) {
          if (Object.prototype.hasOwnProperty.call(this.cachedText.h, a)) {
            return Eb.withValue(this.cachedText.h[a]);
          }
          if (Object.prototype.hasOwnProperty.call(this.cachedBytes.h, a) || Object.prototype.hasOwnProperty.call(this.classTypes.h, a)) {
            var b = this.getBytes(a);
            if (b == null) {
              return Eb.withValue(null);
            }
            b = b.getString(0, b.length);
            this.cachedText.h[a] = b;
            return Eb.withValue(b);
          }
          return new zi().load(this.getPath(a));
        },
        unload: function () {
          this.cachedBytes.h = Object.create(null);
          this.cachedFonts.h = Object.create(null);
          this.cachedImages.h = Object.create(null);
          this.cachedAudioBuffers.h = Object.create(null);
          this.cachedText.h = Object.create(null);
        },
        __assetLoaded: function (a) {
          this.assetsLoaded++;
          if (a != null) {
            Ua.verbose("Loaded asset: " + a + " [" + this.types.h[a] + "] (" + (this.assetsLoaded - 1) + "/" + (this.assetsTotal - 1) + ")", {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 637,
              className: "lime.utils.AssetLibrary",
              methodName: "__assetLoaded"
            });
          }
          if (a != null) {
            var b = Object.prototype.hasOwnProperty.call(this.sizes.h, a) ? this.sizes.h[a] : 0;
            if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
              var c = this.bytesLoadedCache.h[a];
              if (c < b) {
                this.bytesLoaded += b - c;
              }
            } else {
              this.bytesLoaded += b;
            }
            this.bytesLoadedCache.h[a] = b;
          }
          if (this.assetsLoaded < this.assetsTotal) {
            this.promise.progress(this.bytesLoaded, this.bytesTotal);
          } else {
            this.loaded = true;
            this.promise.progress(this.bytesTotal, this.bytesTotal);
            this.promise.complete(this);
          }
        },
        __cacheBreak: function (a) {
          return oa.__cacheBreak(a);
        },
        __fromBundle: function (a, b) {
          if (b != null) {
            var c = 0;
            for (b = b.assets; c < b.length;) {
              var d = b[c];
              ++c;
              var e = Object.prototype.hasOwnProperty.call(d, "id") ? d.id : d.path;
              var f = a.data.h[d.path];
              if (Object.prototype.hasOwnProperty.call(d, "type")) {
                var k = d.type;
                if (k == "TEXT") {
                  this.cachedText.h[e] = f != null ? y.string(f) : null;
                } else {
                  this.cachedBytes.h[e] = f;
                }
                this.types.h[e] = d.type;
              } else {
                this.cachedBytes.h[e] = f;
                this.types.h[e] = "BINARY";
              }
            }
          } else {
            c = 0;
            b = a.paths;
            while (c < b.length) {
              e = b[c];
              ++c;
              this.cachedBytes.h[e] = a.data.h[e];
              this.types.h[e] = "BINARY";
            }
          }
        },
        __fromManifest: function (a) {
          var b = a.version >= 2;
          var c = a.rootPath;
          if (c == null) {
            c = "";
          }
          if (c != "") {
            c += "/";
          }
          for (var d = 0, e = a.assets; d < e.length;) {
            var f = e[d];
            ++d;
            var k = b && Object.prototype.hasOwnProperty.call(f, "size") ? f.size : 100;
            var g = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path;
            if (Object.prototype.hasOwnProperty.call(f, "path")) {
              var l = this.paths;
              var p = this.__cacheBreak(this.__resolvePath(c + y.string(ha.field(f, "path"))));
              l.h[g] = p;
            }
            if (Object.prototype.hasOwnProperty.call(f, "pathGroup")) {
              l = ha.field(f, "pathGroup");
              p = 0;
              for (var n = l.length; p < n;) {
                var m = p++;
                l[m] = this.__cacheBreak(this.__resolvePath(c + l[m]));
              }
              this.pathGroups.h[g] = l;
            }
            this.sizes.h[g] = k;
            this.types.h[g] = f.type;
            if (Object.prototype.hasOwnProperty.call(f, "preload")) {
              this.preload.h[g] = ha.field(f, "preload");
            }
            if (Object.prototype.hasOwnProperty.call(f, "className")) {
              k = ha.field(f, "className");
              k = h[k];
              this.classTypes.h[g] = k;
            }
          }
          d = this.bytesTotal = 0;
          for (e = a.assets; d < e.length;) {
            f = e[d];
            ++d;
            g = Object.prototype.hasOwnProperty.call(f, "id") ? f.id : f.path;
            if (Object.prototype.hasOwnProperty.call(this.preload.h, g) && this.preload.h[g] && Object.prototype.hasOwnProperty.call(this.sizes.h, g)) {
              this.bytesTotal += this.sizes.h[g];
            }
          }
        },
        __resolvePath: function (a) {
          a = v.replace(a, "\\", "/");
          var b = a.indexOf(":");
          if (v.startsWith(a, "http") && b > 0) {
            b += 3;
            a = L.substr(a, 0, b) + v.replace(L.substr(a, b, null), "//", "/");
          } else {
            a = v.replace(a, "//", "/");
          }
          if (a.indexOf("./") > -1) {
            a = a.split("/");
            b = [];
            for (var c = 0, d = a.length; c < d;) {
              var e = c++;
              if (a[e] == "..") {
                if (e == 0 || b[e - 1] == "..") {
                  b.push("..");
                } else {
                  b.pop();
                }
              } else if (a[e] == ".") {
                if (e == 0) {
                  b.push(".");
                }
              } else {
                b.push(a[e]);
              }
            }
            a = b.join("/");
          }
          return a;
        },
        loadAudioBuffer_onComplete: function (a, b) {
          this.cachedAudioBuffers.h[a] = b;
          if (Object.prototype.hasOwnProperty.call(this.pathGroups.h, a)) {
            var c = this.pathGroups.h[a];
            var d = Object.keys(this.pathGroups.h);
            for (var e = d.length, f = 0; f < e;) {
              var k = d[f++];
              if (k != a) {
                for (var g = 0; g < c.length;) {
                  var l = c[g];
                  ++g;
                  if (this.pathGroups.h[k].indexOf(l) > -1) {
                    this.cachedAudioBuffers.h[k] = b;
                    break;
                  }
                }
              }
            }
          }
          this.__assetLoaded(a);
        },
        loadAudioBuffer_onError: function (a, b) {
          if (b != null && b != "") {
            Ua.warn("Could not load \"" + a + "\": " + y.string(b), {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 883,
              className: "lime.utils.AssetLibrary",
              methodName: "loadAudioBuffer_onError"
            });
          } else {
            Ua.warn("Could not load \"" + a + "\"", {
              fileName: "lime/utils/AssetLibrary.hx",
              lineNumber: 887,
              className: "lime.utils.AssetLibrary",
              methodName: "loadAudioBuffer_onError"
            });
          }
          this.loadAudioBuffer_onComplete(a, new $c());
        },
        loadBytes_onComplete: function (a, b) {
          this.cachedBytes.h[a] = b;
          this.__assetLoaded(a);
        },
        loadFont_onComplete: function (a, b) {
          this.cachedFonts.h[a] = b;
          this.__assetLoaded(a);
        },
        loadImage_onComplete: function (a, b) {
          this.cachedImages.h[a] = b;
          this.__assetLoaded(a);
        },
        loadText_onComplete: function (a, b) {
          this.cachedText.h[a] = b;
          this.__assetLoaded(a);
        },
        load_onError: function (a, b) {
          if (b != null && b != "") {
            this.promise.error("Error loading asset \"" + a + "\": " + y.string(b));
          } else {
            this.promise.error("Error loading asset \"" + a + "\"");
          }
        },
        load_onProgress: function (a, b, c) {
          if (b > 0) {
            var d = this.sizes.h[a];
            if (c > 0) {
              b /= c;
              if (b > 1) {
                b = 1;
              }
              b = Math.floor(b * d);
            } else if (b > d) {
              b = d;
            }
            if (Object.prototype.hasOwnProperty.call(this.bytesLoadedCache.h, a)) {
              d = this.bytesLoadedCache.h[a];
              if (b != d) {
                this.bytesLoaded += b - d;
              }
            } else {
              this.bytesLoaded += b;
            }
            this.bytesLoadedCache.h[a] = b;
            this.promise.progress(this.bytesLoaded, this.bytesTotal);
          }
        },
        __class__: lc
      };
      function Qd() {
        this.assets = [];
        this.libraryArgs = [];
        this.version = 2;
      }
      h["lime.utils.AssetManifest"] = Qd;
      Qd.__name__ = "lime.utils.AssetManifest";
      Qd.fromBytes = function (a, b) {
        if (a != null) {
          return Qd.parse(a.getString(0, a.length), b);
        } else {
          return null;
        }
      };
      Qd.loadFromFile = function (a, b) {
        a = Qd.__resolvePath(a);
        b = Qd.__resolveRootPath(b, a);
        if (a == null) {
          return null;
        } else {
          return Dh.loadFromFile(a).then(function (a) {
            return Eb.withValue(Qd.fromBytes(a, b));
          });
        }
      };
      Qd.parse = function (a, b) {
        if (a == null || a == "") {
          return null;
        }
        a = JSON.parse(a);
        var c = new Qd();
        if (Object.prototype.hasOwnProperty.call(a, "name")) {
          c.name = a.name;
        }
        if (Object.prototype.hasOwnProperty.call(a, "libraryType")) {
          c.libraryType = a.libraryType;
        }
        if (Object.prototype.hasOwnProperty.call(a, "libraryArgs")) {
          c.libraryArgs = a.libraryArgs;
        }
        if (Object.prototype.hasOwnProperty.call(a, "assets")) {
          var d = a.assets;
          if (Object.prototype.hasOwnProperty.call(a, "version") && a.version <= 2) {
            c.assets = Zd.run(d);
          } else {
            c.assets = d;
          }
        }
        if (Object.prototype.hasOwnProperty.call(a, "rootPath")) {
          c.rootPath = a.rootPath;
        }
        if (b != null && b != "") {
          c.rootPath = c.rootPath == null || c.rootPath == "" ? b : b + "/" + c.rootPath;
        }
        return c;
      };
      Qd.__resolvePath = function (a) {
        if (a == null) {
          return null;
        }
        var b = a.indexOf("?");
        var c = b > -1 ? L.substr(a, 0, b) : a;
        for (c = v.replace(c, "\\", "/"); v.endsWith(c, "/");) {
          c = L.substr(c, 0, c.length - 1);
        }
        if (v.endsWith(c, ".bundle")) {
          if (b > -1) {
            return c + "/library.json" + L.substr(a, b, null);
          } else {
            return c + "/library.json";
          }
        } else {
          return a;
        }
      };
      Qd.__resolveRootPath = function (a, b) {
        if (a != null) {
          return a;
        }
        a = b.indexOf("?");
        a = a > -1 ? L.substr(b, 0, a) : b;
        for (a = v.replace(a, "\\", "/"); v.endsWith(a, "/");) {
          if (a == "/") {
            return a;
          }
          a = L.substr(a, 0, a.length - 1);
        }
        if (v.endsWith(a, ".bundle")) {
          return a;
        } else {
          return Ic.directory(a);
        }
      };
      Qd.prototype = {
        __class__: Qd
      };
      function oa() {}
      h["lime.utils.Assets"] = oa;
      oa.__name__ = "lime.utils.Assets";
      oa.exists = function (a, b) {
        if (b == null) {
          b = "BINARY";
        }
        var c = a.indexOf(":");
        var d = a.substring(0, c);
        a = a.substring(c + 1);
        d = oa.getLibrary(d);
        if (d != null) {
          return d.exists(a, b);
        } else {
          return false;
        }
      };
      oa.getAsset = function (a, b, c) {
        if (c && oa.cache.enabled) {
          switch (b) {
            case "FONT":
              var d = oa.cache.font.h[a];
              if (d != null) {
                return d;
              }
              break;
            case "IMAGE":
              d = oa.cache.image.h[a];
              if (oa.isValidImage(d)) {
                return d;
              }
              break;
            case "MUSIC":
            case "SOUND":
              d = oa.cache.audio.h[a];
              if (oa.isValidAudio(d)) {
                return d;
              }
              break;
            case "TEMPLATE":
              throw I.thrown("Not sure how to get template: " + a);
            case "BINARY":
            case "TEXT":
              c = false;
              break;
            default:
              return null;
          }
        }
        var e = a.indexOf(":");
        d = a.substring(0, e);
        e = a.substring(e + 1);
        var f = oa.getLibrary(d);
        if (f != null) {
          if (f.exists(e, b)) {
            if (f.isLocal(e, b)) {
              d = f.getAsset(e, b);
              if (c && oa.cache.enabled) {
                oa.cache.set(a, b, d);
              }
              return d;
            }
            Ua.error(b + " asset \"" + a + "\" exists, but only asynchronously", {
              fileName: "lime/utils/Assets.hx",
              lineNumber: 133,
              className: "lime.utils.Assets",
              methodName: "getAsset"
            });
          } else {
            Ua.error("There is no " + b + " asset with an ID of \"" + a + "\"", {
              fileName: "lime/utils/Assets.hx",
              lineNumber: 138,
              className: "lime.utils.Assets",
              methodName: "getAsset"
            });
          }
        } else {
          Ua.error(oa.__libraryNotFound(d), {
            fileName: "lime/utils/Assets.hx",
            lineNumber: 143,
            className: "lime.utils.Assets",
            methodName: "getAsset"
          });
        }
        return null;
      };
      oa.getAudioBuffer = function (a, b) {
        if (b == null) {
          b = true;
        }
        return oa.getAsset(a, "SOUND", b);
      };
      oa.getBytes = function (a) {
        return oa.getAsset(a, "BINARY", false);
      };
      oa.getFont = function (a, b) {
        if (b == null) {
          b = true;
        }
        return oa.getAsset(a, "FONT", b);
      };
      oa.getImage = function (a, b) {
        if (b == null) {
          b = true;
        }
        return oa.getAsset(a, "IMAGE", b);
      };
      oa.getLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        return oa.libraries.h[a];
      };
      oa.getText = function (a) {
        return oa.getAsset(a, "TEXT", false);
      };
      oa.hasLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        return Object.prototype.hasOwnProperty.call(oa.libraries.h, a);
      };
      oa.isLocal = function (a, b, c) {
        if (c == null) {
          c = true;
        }
        if (c && oa.cache.enabled && oa.cache.exists(a, b)) {
          return true;
        }
        var d = a.indexOf(":");
        c = a.substring(0, d);
        a = a.substring(d + 1);
        c = oa.getLibrary(c);
        if (c != null) {
          return c.isLocal(a, b);
        } else {
          return false;
        }
      };
      oa.isValidAudio = function (a) {
        return a != null;
      };
      oa.isValidImage = function (a) {
        if (a != null) {
          return a.buffer != null;
        } else {
          return false;
        }
      };
      oa.list = function (a) {
        var b = [];
        var c = oa.libraries.h;
        var d = Object.keys(c);
        for (var e = d.length, f = 0; f < e;) {
          var k = c[d[f++]].list(a);
          if (k != null) {
            b = b.concat(k);
          }
        }
        return b;
      };
      oa.loadAsset = function (a, b, c) {
        if (c && oa.cache.enabled) {
          switch (b) {
            case "FONT":
              var d = oa.cache.font.h[a];
              if (d != null) {
                return Eb.withValue(d);
              }
              break;
            case "IMAGE":
              d = oa.cache.image.h[a];
              if (oa.isValidImage(d)) {
                return Eb.withValue(d);
              }
              break;
            case "MUSIC":
            case "SOUND":
              d = oa.cache.audio.h[a];
              if (oa.isValidAudio(d)) {
                return Eb.withValue(d);
              }
              break;
            case "TEMPLATE":
              throw I.thrown("Not sure how to get template: " + a);
            case "BINARY":
            case "TEXT":
              c = false;
              break;
            default:
              return null;
          }
        }
        var e = a.indexOf(":");
        d = a.substring(0, e);
        e = a.substring(e + 1);
        var f = oa.getLibrary(d);
        if (f != null) {
          if (f.exists(e, b)) {
            d = f.loadAsset(e, b);
            if (c && oa.cache.enabled) {
              d.onComplete(function (c) {
                oa.cache.set(a, b, c);
              });
            }
            return d;
          }
          return Eb.withError("There is no " + b + " asset with an ID of \"" + a + "\"");
        }
        return Eb.withError(oa.__libraryNotFound(d));
      };
      oa.loadAudioBuffer = function (a, b) {
        if (b == null) {
          b = true;
        }
        return oa.loadAsset(a, "SOUND", b);
      };
      oa.loadLibrary = function (a) {
        var b = new Id();
        var c = oa.getLibrary(a);
        if (c != null) {
          return c.load();
        }
        c = a;
        var d = null;
        if (Object.prototype.hasOwnProperty.call(oa.bundlePaths.h, a)) {
          Lf.loadFromFile(oa.bundlePaths.h[a]).onComplete(function (c) {
            if (c == null) {
              b.error("Cannot load bundle for library \"" + a + "\"");
            } else {
              c = lc.fromBundle(c);
              if (c == null) {
                b.error("Cannot open library \"" + a + "\"");
              } else {
                oa.libraries.h[a] = c;
                c.onChange.add((r = oa.onChange, n(r, r.dispatch)));
                b.completeWith(c.load());
              }
            }
          }).onError(function (c) {
            b.error("There is no asset library with an ID of \"" + a + "\"");
          });
        } else {
          if (Object.prototype.hasOwnProperty.call(oa.libraryPaths.h, a)) {
            c = oa.libraryPaths.h[a];
            d = Ic.directory(c);
          } else {
            if (v.endsWith(c, ".bundle")) {
              d = c;
              c += "/library.json";
            } else {
              d = Ic.directory(c);
            }
            c = oa.__cacheBreak(c);
          }
          Qd.loadFromFile(c, d).onComplete(function (c) {
            if (c == null) {
              b.error("Cannot parse asset manifest for library \"" + a + "\"");
            } else {
              c = lc.fromManifest(c);
              if (c == null) {
                b.error("Cannot open library \"" + a + "\"");
              } else {
                oa.libraries.h[a] = c;
                c.onChange.add((r = oa.onChange, n(r, r.dispatch)));
                b.completeWith(c.load());
              }
            }
          }).onError(function (c) {
            b.error("There is no asset library with an ID of \"" + a + "\"");
          });
        }
        return b.future;
      };
      oa.registerLibrary = function (a, b) {
        if (a == null || a == "") {
          a = "default";
        }
        if (Object.prototype.hasOwnProperty.call(oa.libraries.h, a)) {
          if (oa.libraries.h[a] == b) {
            return;
          }
          oa.unloadLibrary(a);
        }
        if (b != null) {
          b.onChange.add(oa.library_onChange);
        }
        oa.libraries.h[a] = b;
      };
      oa.unloadLibrary = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        var b = oa.libraries.h[a];
        if (b != null) {
          oa.cache.clear(a + ":");
          b.onChange.remove(oa.library_onChange);
          b.unload();
        }
        b = oa.libraries;
        if (Object.prototype.hasOwnProperty.call(b.h, a)) {
          delete b.h[a];
        }
      };
      oa.__cacheBreak = function (a) {
        if (oa.cache.version > 0) {
          a = a.indexOf("?") > -1 ? a + ("&" + oa.cache.version) : a + ("?" + oa.cache.version);
        }
        return a;
      };
      oa.__libraryNotFound = function (a) {
        if (a == null || a == "") {
          a = "default";
        }
        if (ka.current == null || ka.current.__preloader == null || ka.current.__preloader.complete) {
          return "There is no asset library named \"" + a + "\"";
        } else {
          return "There is no asset library named \"" + a + "\", or it is not yet preloaded";
        }
      };
      oa.library_onChange = function () {
        oa.cache.clear();
        oa.onChange.dispatch();
      };
      function Ho(a, b) {
        this.bytes = a;
        this.offset = b;
      }
      h["lime.utils.BytePointerData"] = Ho;
      Ho.__name__ = "lime.utils.BytePointerData";
      Ho.prototype = {
        __class__: Ho
      };
      var Dh = {
        _new: function (a, b) {
          return new ac(b);
        },
        decompress: function (a, b) {
          switch (b._hx_index) {
            case 0:
              return io.decompress(a);
            case 1:
              return kp.decompress(a);
            case 2:
              return lp.decompress(a);
            case 3:
              return mp.decompress(a);
          }
        },
        fromBytes: function (a) {
          if (a == null) {
            return null;
          } else {
            return Dh._new(a.length, a.b.bufferValue);
          }
        },
        fromFile: function (a) {
          return null;
        },
        loadFromFile: function (a) {
          return new em().load(a);
        },
        ofString: function (a) {
          a = ac.ofString(a);
          return Dh._new(a.length, a.b.bufferValue);
        }
      };
      var gm = w["lime.utils.CompressionAlgorithm"] = {
        __ename__: "lime.utils.CompressionAlgorithm",
        __constructs__: null,
        DEFLATE: {
          _hx_name: "DEFLATE",
          _hx_index: 0,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        GZIP: {
          _hx_name: "GZIP",
          _hx_index: 1,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        LZMA: {
          _hx_name: "LZMA",
          _hx_index: 2,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        },
        ZLIB: {
          _hx_name: "ZLIB",
          _hx_index: 3,
          __enum__: "lime.utils.CompressionAlgorithm",
          toString: p
        }
      };
      gm.__constructs__ = [gm.DEFLATE, gm.GZIP, gm.LZMA, gm.ZLIB];
      var fj = {
        toArrayBufferView: function (a) {
          return a;
        }
      };
      function Ua() {}
      h["lime.utils.Log"] = Ua;
      Ua.__name__ = "lime.utils.Log";
      Ua.debug = function (a, b) {
        if (Ua.level >= 4) {
          console.debug("[" + b.className + "] " + y.string(a));
        }
      };
      Ua.error = function (a, b) {
        if (Ua.level >= 1) {
          a = "[" + b.className + "] ERROR: " + y.string(a);
          if (Ua.throwErrors) {
            throw I.thrown(a);
          }
          console.error(a);
        }
      };
      Ua.info = function (a, b) {
        if (Ua.level >= 3) {
          console.info("[" + b.className + "] " + y.string(a));
        }
      };
      Ua.verbose = function (a, b) {
        if (Ua.level >= 5) {
          a = "[" + b.className + "] " + y.string(a);
          console.log(a);
        }
      };
      Ua.warn = function (a, b) {
        if (Ua.level >= 2) {
          console.warn("[" + b.className + "] WARNING: " + y.string(a));
        }
      };
      function kn() {
        this.bytesTotalCache = new xa();
        this.bytesLoadedCache2 = new xa();
        this.bytesLoadedCache = new ma();
        this.onProgress = new $l();
        this.onComplete = new Uc();
        this.bytesTotal = this.bytesLoaded = 0;
        this.libraries = [];
        this.libraryNames = [];
        this.onProgress.add(n(this, this.update));
      }
      h["lime.utils.Preloader"] = kn;
      kn.__name__ = "lime.utils.Preloader";
      kn.prototype = {
        addLibrary: function (a) {
          this.libraries.push(a);
        },
        addLibraryName: function (a) {
          if (this.libraryNames.indexOf(a) == -1) {
            this.libraryNames.push(a);
          }
        },
        load: function () {
          var a = this;
          for (var b = 0, c = this.libraries; b < c.length;) {
            var d = c[b];
            ++b;
            this.bytesTotal += d.bytesTotal;
          }
          this.loadedLibraries = -1;
          this.preloadStarted = false;
          b = 0;
          for (c = this.libraries; b < c.length;) {
            d = [c[b]];
            ++b;
            Ua.verbose("Preloading asset library", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 134,
              className: "lime.utils.Preloader",
              methodName: "load"
            });
            d[0].load().onProgress(function (b) {
              return function (c, d) {
                a.bytesLoaded = a.bytesLoadedCache.h.__keys__[b[0].__id__] == null ? a.bytesLoaded + c : a.bytesLoaded + (c - a.bytesLoadedCache.h[b[0].__id__]);
                a.bytesLoadedCache.set(b[0], c);
                if (!a.simulateProgress) {
                  a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal);
                }
              };
            }(d)).onComplete(function (b) {
              return function (c) {
                a.bytesLoaded = a.bytesLoadedCache.h.__keys__[b[0].__id__] == null ? a.bytesLoaded + b[0].bytesTotal : a.bytesLoaded + ((b[0].bytesTotal | 0) - a.bytesLoadedCache.h[b[0].__id__]);
                a.loadedAssetLibrary();
              };
            }(d)).onError(function () {
              return function (a) {
                Ua.error(a, {
                  fileName: "lime/utils/Preloader.hx",
                  lineNumber: 170,
                  className: "lime.utils.Preloader",
                  methodName: "load"
                });
              };
            }());
          }
          b = 0;
          for (c = this.libraryNames; b < c.length;) {
            ++b;
            this.bytesTotal += 200;
          }
          this.loadedLibraries++;
          this.preloadStarted = true;
          this.updateProgress();
        },
        loadedAssetLibrary: function (a) {
          this.loadedLibraries++;
          var b = this.loadedLibraries;
          if (!this.preloadStarted) {
            ++b;
          }
          var c = this.libraries.length + this.libraryNames.length;
          if (a != null) {
            Ua.verbose("Loaded asset library: " + a + " [" + b + "/" + c + "]", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 197,
              className: "lime.utils.Preloader",
              methodName: "loadedAssetLibrary"
            });
          } else {
            Ua.verbose("Loaded asset library [" + b + "/" + c + "]", {
              fileName: "lime/utils/Preloader.hx",
              lineNumber: 201,
              className: "lime.utils.Preloader",
              methodName: "loadedAssetLibrary"
            });
          }
          this.updateProgress();
        },
        start: function () {
          if (!this.complete && !this.simulateProgress && !!this.preloadComplete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        update: function (a, b) {},
        updateProgress: function () {
          var a = this;
          if (!this.simulateProgress) {
            this.onProgress.dispatch(this.bytesLoaded, this.bytesTotal);
          }
          if (this.loadedLibraries == this.libraries.length && !this.initLibraryNames) {
            this.initLibraryNames = true;
            for (var b = 0, c = this.libraryNames; b < c.length;) {
              var d = [c[b]];
              ++b;
              Ua.verbose("Preloading asset library: " + d[0], {
                fileName: "lime/utils/Preloader.hx",
                lineNumber: 239,
                className: "lime.utils.Preloader",
                methodName: "updateProgress"
              });
              oa.loadLibrary(d[0]).onProgress(function (b) {
                return function (c, d) {
                  if (d > 0) {
                    if (!Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0])) {
                      a.bytesTotalCache.h[b[0]] = d;
                      a.bytesTotal += d - 200;
                    }
                    if (c > d) {
                      c = d;
                    }
                    if (Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0])) {
                      a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]];
                    } else {
                      a.bytesLoaded += c;
                    }
                    a.bytesLoadedCache2.h[b[0]] = c;
                    if (!a.simulateProgress) {
                      a.onProgress.dispatch(a.bytesLoaded, a.bytesTotal);
                    }
                  }
                };
              }(d)).onComplete(function (b) {
                return function (c) {
                  c = 200;
                  if (Object.prototype.hasOwnProperty.call(a.bytesTotalCache.h, b[0])) {
                    c = a.bytesTotalCache.h[b[0]];
                  }
                  if (Object.prototype.hasOwnProperty.call(a.bytesLoadedCache2.h, b[0])) {
                    a.bytesLoaded += c - a.bytesLoadedCache2.h[b[0]];
                  } else {
                    a.bytesLoaded += c;
                  }
                  a.loadedAssetLibrary(b[0]);
                };
              }(d)).onError(function () {
                return function (a) {
                  Ua.error(a, {
                    fileName: "lime/utils/Preloader.hx",
                    lineNumber: 293,
                    className: "lime.utils.Preloader",
                    methodName: "updateProgress"
                  });
                };
              }());
            }
          }
          if (!this.simulateProgress && this.loadedLibraries == this.libraries.length + this.libraryNames.length) {
            if (!this.preloadComplete) {
              this.preloadComplete = true;
              Ua.verbose("Preload complete", {
                fileName: "lime/utils/Preloader.hx",
                lineNumber: 306,
                className: "lime.utils.Preloader",
                methodName: "updateProgress"
              });
            }
            this.start();
          }
        },
        __class__: kn
      };
      var $g = w["objects.Alignment"] = {
        __ename__: "objects.Alignment",
        __constructs__: null,
        LEFT: {
          _hx_name: "LEFT",
          _hx_index: 0,
          __enum__: "objects.Alignment",
          toString: p
        },
        CENTERED: {
          _hx_name: "CENTERED",
          _hx_index: 1,
          __enum__: "objects.Alignment",
          toString: p
        },
        RIGHT: {
          _hx_name: "RIGHT",
          _hx_index: 2,
          __enum__: "objects.Alignment",
          toString: p
        }
      };
      $g.__constructs__ = [$g.LEFT, $g.CENTERED, $g.RIGHT];
      function bc(a, b, c, d) {
        if (d == null) {
          d = true;
        }
        if (c == null) {
          c = "";
        }
        var e = 0;
        var f = 0;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = da.pool.get().set(e, f);
        e._inPool = false;
        this.startPosition = e;
        e = 20;
        f = 120;
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        e = da.pool.get().set(e, f);
        e._inPool = false;
        this.distancePerItem = e;
        this.rows = 0;
        this.scaleX = this.scaleY = 1;
        this.alignment = $g.LEFT;
        this.changeX = this.changeY = true;
        this.targetY = 0;
        this.isMenuItem = false;
        this.letters = [];
        this.bold = false;
        Na.call(this, a, b);
        this.startPosition.set_x(a);
        this.startPosition.set_y(b);
        this.bold = d;
        this.set_text(c);
      }
      h["objects.Alphabet"] = bc;
      bc.__name__ = "objects.Alphabet";
      bc.__super__ = Na;
      bc.prototype = q(Na.prototype, {
        set_alignment: function (a) {
          this.alignment = a;
          this.updateAlignment();
          return a;
        },
        updateAlignment: function () {
          for (var a = 0, b = this.letters; a < b.length;) {
            var c = b[a];
            ++a;
            switch (this.alignment._hx_index) {
              case 1:
                var d = c.rowWidth / 2;
                break;
              case 2:
                d = c.rowWidth;
                break;
              default:
                d = 0;
            }
            c.offset.set_x(c.offset.x - c.alignOffset);
            c.alignOffset = d * this.scale.x;
            c.offset.set_x(c.offset.x + c.alignOffset);
          }
        },
        set_text: function (a) {
          a = v.replace(a, "\\n", "\n");
          this.clearLetters();
          this.createLetters(a);
          this.updateAlignment();
          return this.text = a;
        },
        clearLetters: function () {
          for (var a = this.letters.length; a > 0;) {
            --a;
            var b = this.letters[a];
            if (b != null) {
              b.kill();
              L.remove(this.letters, b);
              this.remove(b);
            }
          }
          this.letters = [];
          this.rows = 0;
        },
        setScale: function (a, b) {
          var c = this.scale.x;
          var d = this.scale.y;
          if (b == null) {
            b = a;
          }
          this.scaleX = a;
          this.scaleY = b;
          this.scale.set_x(a);
          this.scale.set_y(b);
          this.softReloadLetters(a / c, b / d);
        },
        set_scaleX: function (a) {
          if (a == this.scaleX) {
            return a;
          }
          var b = a / this.scale.x;
          this.scale.set_x(a);
          this.scaleX = a;
          this.softReloadLetters(b, 1);
          return a;
        },
        softReloadLetters: function (a, b) {
          if (a == null) {
            a = 1;
          }
          if (b == null) {
            b = a;
          }
          for (var c = 0, d = this.letters; c < d.length;) {
            var e = d[c];
            ++c;
            if (e != null) {
              e.setupAlphaCharacter((e.x - this.x) * a + this.x, (e.y - this.y) * b + this.y);
            }
          }
        },
        update: function (a) {
          if (this.isMenuItem) {
            var b = Math.exp(-a * 9.6);
            if (this.changeX) {
              var c = this.targetY * this.distancePerItem.x + this.startPosition.x;
              this.set_x(c + b * (this.x - c));
            }
            if (this.changeY) {
              c = this.targetY * 1.3 * this.distancePerItem.y + this.startPosition.y;
              this.set_y(c + b * (this.y - c));
            }
          }
          Na.prototype.update.call(this, a);
        },
        snapToPosition: function () {
          if (this.isMenuItem) {
            if (this.changeX) {
              this.set_x(this.targetY * this.distancePerItem.x + this.startPosition.x);
            }
            if (this.changeY) {
              this.set_y(this.targetY * 1.3 * this.distancePerItem.y + this.startPosition.y);
            }
          }
        },
        createLetters: function (a) {
          var b = 0;
          var c = 0;
          var d = [];
          var e = this.rows = 0;
          for (a = a.split(""); e < a.length;) {
            var f = a[e];
            ++e;
            if (f != "\n") {
              var k = f == " " || this.bold && f == "_";
              if (k) {
                ++b;
              }
              sf.isTypeAlphabet(f.toLowerCase());
              if (!!Object.prototype.hasOwnProperty.call(sf.allLetters.h, f.toLowerCase()) && (!this.bold || !k)) {
                if (b > 0) {
                  c += b * 28 * this.scaleX;
                  d[this.rows] = c;
                  if (!this.bold && c >= g.width * 0.65) {
                    c = 0;
                    this.rows++;
                  }
                }
                b = 0;
                k = true;
                if (k == null) {
                  k = false;
                }
                k = this.group.recycle(sf, null, k, true);
                k.scale.set_x(this.scaleX);
                k.scale.set_y(this.scaleY);
                k.rowWidth = 0;
                k.setupAlphaCharacter(c, this.rows * bc.Y_PER_ROW * this.scale.y, f, this.bold);
                k.parent = this;
                k.row = this.rows;
                f = 0;
                if (!this.bold) {
                  f = 2;
                }
                c += k.get_width() + (k.letterOffset[0] + f) * this.scale.x;
                d[this.rows] = c;
                this.add(k);
                this.letters.push(k);
              }
            } else {
              c = 0;
              this.rows++;
            }
          }
          e = 0;
          for (a = this.letters; e < a.length;) {
            k = a[e];
            ++e;
            k.rowWidth = d[k.row];
          }
          if (this.letters.length > 0) {
            this.rows++;
          }
        },
        __class__: bc,
        __properties__: q(Na.prototype.__properties__, {
          set_scaleX: "set_scaleX",
          set_alignment: "set_alignment",
          set_text: "set_text"
        })
      });
      function sf() {
        this.curLetter = null;
        this.character = "?";
        this.row = this.rowWidth = 0;
        this.letterOffset = [0, 0];
        this.alignOffset = 0;
        G.call(this, this.x, this.y);
        this.set_image("alphabet");
        this.set_antialiasing(C.data.antialiasing);
      }
      h["objects.AlphaCharacter"] = sf;
      sf.__name__ = "objects.AlphaCharacter";
      sf.isTypeAlphabet = function (a) {
        a = a.charCodeAt(0);
        if (a >= 65 && a <= 90 || a >= 97 && a <= 122 || a >= 192 && a <= 214 || a >= 216 && a <= 246) {
          return true;
        } else if (a >= 248) {
          return a <= 255;
        } else {
          return false;
        }
      };
      sf.__super__ = G;
      sf.prototype = q(G.prototype, {
        setupAlphaCharacter: function (a, b, c, d) {
          this.set_x(a);
          this.set_y(b);
          if (this.parent != null) {
            if (d == null) {
              d = this.parent.bold;
            }
            this.scale.set_x(this.parent.scaleX);
            this.scale.set_y(this.parent.scaleY);
          }
          if (c != null) {
            this.character = c;
            this.curLetter = null;
            a = this.character.toLowerCase();
            if (Object.prototype.hasOwnProperty.call(sf.allLetters.h, a)) {
              this.curLetter = sf.allLetters.h[a];
            } else {
              this.curLetter = sf.allLetters.h["?"];
            }
            d = d ? " bold" : sf.isTypeAlphabet(a) ? a != this.character ? " uppercase" : " lowercase" : " normal";
            if (this.curLetter != null && this.curLetter.anim != null) {
              a = this.curLetter.anim;
            }
            a += d;
            this.animation.addByPrefix(a, a, 24);
            this.animation.play(a, true);
            if (this.animation._curAnim == null) {
              if (d != " bold") {
                d = " normal";
              }
              a = "question" + d;
              this.animation.addByPrefix(a, a, 24);
              this.animation.play(a, true);
            }
          }
          this.updateHitbox();
        },
        set_image: function (a) {
          if (this.frames == null) {
            this.image = a;
            var b = null;
            var c = E.image(a, b, true);
            this.set_frames(Sa.fromSparrow(c, E.getPath("images/" + a + ".xml", null, b)));
            return a;
          }
          var d = null;
          if (this.animation != null) {
            d = this.animation.get_name();
          }
          this.image = a;
          b = null;
          c = E.image(a, b, true);
          this.set_frames(Sa.fromSparrow(c, E.getPath("images/" + a + ".xml", null, b)));
          this.scale.set_x(this.parent.scaleX);
          this.scale.set_y(this.parent.scaleY);
          this.alignOffset = 0;
          if (d != null) {
            this.animation.addByPrefix(d, d, 24);
            this.animation.play(d, true);
            this.updateHitbox();
          }
          return a;
        },
        updateLetterOffset: function () {
          if (this.animation._curAnim == null) {
            Ab.trace(this.character, {
              fileName: "source/objects/Alphabet.hx",
              lineNumber: 508,
              className: "objects.AlphaCharacter",
              methodName: "updateLetterOffset"
            });
          } else {
            var a = 110;
            if (v.endsWith(this.animation._curAnim.name, "bold")) {
              if (this.curLetter != null && this.curLetter.offsetsBold != null) {
                this.letterOffset[0] = this.curLetter.offsetsBold[0];
                this.letterOffset[1] = this.curLetter.offsetsBold[1];
              }
              a = 70;
            } else if (this.curLetter != null && this.curLetter.offsets != null) {
              this.letterOffset[0] = this.curLetter.offsets[0];
              this.letterOffset[1] = this.curLetter.offsets[1];
            }
            a *= this.scale.y;
            this.offset.set_x(this.offset.x + this.letterOffset[0] * this.scale.x);
            this.offset.set_y(this.offset.y + (this.letterOffset[1] * this.scale.y - (a - this.get_height())));
          }
        },
        updateHitbox: function () {
          G.prototype.updateHitbox.call(this);
          this.updateLetterOffset();
        },
        __class__: sf,
        __properties__: q(G.prototype.__properties__, {
          set_image: "set_image"
        })
      });
      function Bi(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        this.copyVisible = false;
        this.copyAngle = this.copyAlpha = true;
        this.alphaMult = 1;
        this.xAdd = this.yAdd = this.angleAdd = 0;
        G.call(this);
        if (b != null) {
          var e = E.image(a, c, true);
          this.set_frames(Sa.fromSparrow(e, E.getPath("images/" + a + ".xml", null, c)));
          this.animation.addByPrefix("idle", b, 24, d);
          this.animation.play("idle");
        } else if (a != null) {
          this.loadGraphic(E.image(a));
        }
        this.set_antialiasing(C.data.antialiasing);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["objects.AttachedSprite"] = Bi;
      Bi.__name__ = "objects.AttachedSprite";
      Bi.__super__ = G;
      Bi.prototype = q(G.prototype, {
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.xAdd, this.sprTracker.y + this.yAdd);
            a = this.scrollFactor;
            var b = this.sprTracker.scrollFactor.x;
            var c = this.sprTracker.scrollFactor.y;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            if (this.copyAngle) {
              this.set_angle(this.sprTracker.angle + this.angleAdd);
            }
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha * this.alphaMult);
            }
            if (this.copyVisible) {
              this.set_visible(this.sprTracker.visible);
            }
          }
        },
        __class__: Bi
      });
      function Ci(a, b, c, d, e) {
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        this.copyAlpha = false;
        this.copyVisible = true;
        this.offsetX = this.offsetY = 0;
        bc.call(this, 0, 0, a, d);
        this.setScale(e);
        this.isMenuItem = false;
        this.offsetX = b;
        this.offsetY = c;
      }
      h["objects.AttachedText"] = Ci;
      Ci.__name__ = "objects.AttachedText";
      Ci.__super__ = bc;
      Ci.prototype = q(bc.prototype, {
        update: function (a) {
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.offsetX, this.sprTracker.y + this.offsetY);
            if (this.copyVisible) {
              this.set_visible(this.sprTracker.visible);
            }
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha);
            }
          }
          bc.prototype.update.call(this, a);
        },
        __class__: Ci
      });
      function Db(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        G.call(this, b, c);
        if (f != null) {
          b = E.image(a, null, true);
          this.set_frames(Sa.fromSparrow(b, E.getPath("images/" + a + ".xml", null, null)));
          a = 0;
          b = f.length;
          while (a < b) {
            c = a++;
            c = f[c];
            this.animation.addByPrefix(c, c, 24, k);
            if (this.idleAnim == null) {
              this.idleAnim = c;
              this.animation.play(c);
            }
          }
        } else {
          if (a != null) {
            this.loadGraphic(E.image(a));
          }
          this.set_active(false);
        }
        f = this.scrollFactor;
        b = d;
        c = e;
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        f.set_x(b);
        f.set_y(c);
        this.set_antialiasing(C.data.antialiasing);
      }
      h["objects.BGSprite"] = Db;
      Db.__name__ = "objects.BGSprite";
      Db.__super__ = G;
      Db.prototype = q(G.prototype, {
        __class__: Db
      });
      function Eh(a, b, c, d, e, f) {
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 0;
        }
        if (c == null) {
          c = "healthBar";
        }
        this.enabled = true;
        var k = 50;
        var g = 15;
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        k = da.pool.get().set(k, g);
        k._inPool = false;
        this.barOffset = k;
        this.barWidth = this.barHeight = 1;
        this.barCenter = 0;
        this.leftToRight = true;
        this.bounds = {
          min: 0,
          max: 1
        };
        this.percent = 0;
        this.valueFunction = null;
        Na.call(this, a, b);
        this.valueFunction = d;
        this.setBounds(e, f);
        this.bg = new G().loadGraphic(E.image(c));
        this.bg.set_antialiasing(C.data.antialiasing);
        this.bg.offset.set_y(50);
        this.set_barWidth(this.bg.get_width() - 200 | 0);
        this.set_barHeight(this.bg.get_height() - 100 | 0);
        this.leftBar = new G().makeGraphic(this.bg.get_width() | 0, this.bg.get_height() | 0, -1);
        this.leftBar.set_antialiasing(this.set_antialiasing(C.data.antialiasing));
        this.rightBar = new G().makeGraphic(this.bg.get_width() | 0, this.bg.get_height() | 0, -1);
        this.rightBar.set_color(-16777216);
        this.rightBar.set_antialiasing(C.data.antialiasing);
        this.add(this.leftBar);
        this.add(this.rightBar);
        this.add(this.bg);
        this.regenerateClips();
      }
      h["objects.Bar"] = Eh;
      Eh.__name__ = "objects.Bar";
      Eh.__super__ = Na;
      Eh.prototype = q(Na.prototype, {
        update: function (a) {
          if (this.enabled) {
            if (this.valueFunction != null) {
              var b = this.valueFunction();
              var c = this.bounds.min;
              var d = this.bounds.max;
              b = c != null && b < c ? c : b;
              d = jc.remapToRange(d != null && b > d ? d : b, this.bounds.min, this.bounds.max, 0, 100);
              this.set_percent(d ?? 0);
            } else {
              this.set_percent(0);
            }
          }
          Na.prototype.update.call(this, a);
        },
        setBounds: function (a, b) {
          this.bounds.min = a;
          this.bounds.max = b;
        },
        setColors: function (a, b) {
          if (a != null) {
            this.leftBar.set_color(a);
          }
          if (b != null) {
            this.rightBar.set_color(b);
          }
        },
        changeBar: function (a) {
          this.remove(this.bg);
          this.bg = new G().loadGraphic(E.image(a));
          this.bg.set_antialiasing(C.data.antialiasing);
          this.bg.offset.set_y(50);
          this.add(this.bg);
        },
        updateBar: function () {
          if (this.leftBar != null && this.rightBar != null) {
            this.leftBar.setPosition(this.bg.x, this.bg.y);
            this.rightBar.setPosition(this.bg.x, this.bg.y);
            var a = this.leftToRight ? this.percent / 100 * this.barWidth : (1 - this.percent / 100) * this.barWidth;
            this.leftBar.clipRect.width = a;
            this.leftBar.clipRect.height = this.barHeight;
            this.leftBar.clipRect.x = this.barOffset.x;
            this.leftBar.clipRect.y = this.barOffset.y;
            this.rightBar.clipRect.width = this.barWidth - a;
            this.rightBar.clipRect.height = this.barHeight;
            this.rightBar.clipRect.x = this.barOffset.x + a;
            this.rightBar.clipRect.y = this.barOffset.y;
            this.barCenter = this.leftBar.x + a + this.barOffset.x;
            this.leftBar.set_clipRect(this.leftBar.clipRect);
            this.rightBar.set_clipRect(this.rightBar.clipRect);
          }
        },
        regenerateClips: function () {
          if (this.leftBar != null) {
            this.leftBar.setGraphicSize(this.bg.get_width() | 0, this.bg.get_height() | 0);
            this.leftBar.updateHitbox();
            this.leftBar.set_clipRect(new Ia(0, 0, this.bg.get_width() | 0, this.bg.get_height() | 0));
          }
          if (this.rightBar != null) {
            this.rightBar.setGraphicSize(this.bg.get_width() | 0, this.bg.get_height() | 0);
            this.rightBar.updateHitbox();
            this.rightBar.set_clipRect(new Ia(0, 0, this.bg.get_width() | 0, this.bg.get_height() | 0));
          }
          this.updateBar();
        },
        set_percent: function (a) {
          var b = false;
          if (a != this.percent) {
            b = true;
          }
          this.percent = a;
          if (b) {
            this.updateBar();
          }
          return a;
        },
        set_leftToRight: function (a) {
          this.leftToRight = a;
          this.updateBar();
          return a;
        },
        set_barWidth: function (a) {
          this.barWidth = a;
          this.regenerateClips();
          return a;
        },
        set_barHeight: function (a) {
          this.barHeight = a;
          this.regenerateClips();
          return a;
        },
        __class__: Eh,
        __properties__: q(Na.prototype.__properties__, {
          set_barHeight: "set_barHeight",
          set_barWidth: "set_barWidth",
          set_leftToRight: "set_leftToRight",
          set_percent: "set_percent"
        })
      });
      function ad(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = "bf";
        }
        this.isAnimateAtlas = false;
        this.settingCharacterUp = true;
        this.danceEveryNumBeats = 2;
        this.danced = false;
        this.editorIsPlayer = null;
        this.noAntialiasing = this.originalFlipX = false;
        this.jsonScale = 1;
        this.vocalsFile = this.imageFile = "";
        this.hasMissAnimations = false;
        this.healthColorArray = [255, 0, 0];
        this.cameraPosition = [0, 0];
        this.positionArray = [0, 0];
        this.animationsArray = [];
        this.healthIcon = "face";
        this.danceIdle = this.skipDance = false;
        this.idleSuffix = "";
        this.singDuration = 4;
        this.stunned = false;
        this.animationNotes = [];
        this.specialAnim = false;
        this.holdTimer = this.heyTimer = 0;
        this.curCharacter = ad.DEFAULT_CHARACTER;
        this.debugMode = this.isPlayer = false;
        G.call(this, a, b);
        this.animation = new ph(this);
        this.animOffsets = new xa();
        this.curCharacter = c;
        this.isPlayer = d;
        a = E.getPath("characters/" + this.curCharacter + ".json", "TEXT", null, true);
        if (!U.exists(a)) {
          a = "characters/" + ad.DEFAULT_CHARACTER + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          this.set_color(-16777216);
          this.set_alpha(0.6);
        }
        try {
          this.loadCharacterFile(JSON.parse(U.getText(a)));
        } catch (e) {
          Oa.lastError = e;
          a = I.caught(e).unwrap();
          Ab.trace("Error loading character file of \"" + c + "\": " + y.string(a), {
            fileName: "source/objects/Character.hx",
            lineNumber: 121,
            className: "objects.Character",
            methodName: "new"
          });
        }
        if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singLEFTmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singDOWNmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singUPmiss") || Object.prototype.hasOwnProperty.call(this.animOffsets.h, "singRIGHTmiss")) {
          this.hasMissAnimations = true;
        }
        this.recalculateDanceIdle();
        this.dance();
        if (this.curCharacter == "pico-speaker") {
          this.skipDance = true;
          this.loadMappedAnims();
          this.playAnim("shoot1");
        }
      }
      h["objects.Character"] = ad;
      ad.__name__ = "objects.Character";
      ad.__super__ = G;
      ad.prototype = q(G.prototype, {
        loadCharacterFile: function (a) {
          this.isAnimateAtlas = false;
          var b = E.getPath("images/" + y.string(a.image) + "/Animation.json", "TEXT", null, true);
          if (U.exists(b)) {
            this.isAnimateAtlas = true;
          }
          b = this.scale;
          var c = 1;
          var d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          this.updateHitbox();
          if (this.isAnimateAtlas) {
            this.atlas = new mi();
            this.atlas.showPivot = false;
            this.atlas.loadAtlas(a.image);
            try {
              E.loadAnimateAtlas(this.atlas, a.image);
            } catch (l) {
              Oa.lastError = l;
              b = I.caught(l).unwrap();
              g.log.advanced("Could not load atlas " + y.string(a.image) + ": " + y.string(b), Aa.WARNING, true);
              Ab.trace(b.stack, {
                fileName: "source/objects/Character.hx",
                lineNumber: 167,
                className: "objects.Character",
                methodName: "loadCharacterFile"
              });
            }
          } else {
            this.set_frames(E.getMultiAtlas(a.image.split(",")));
          }
          this.imageFile = a.image;
          this.jsonScale = a.scale;
          if (a.scale != 1) {
            b = this.scale;
            d = c = this.jsonScale;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            this.updateHitbox();
          }
          this.positionArray = a.position;
          this.cameraPosition = a.camera_position;
          this.healthIcon = a.healthicon;
          this.singDuration = a.sing_duration;
          this.set_flipX(a.flip_x != this.isPlayer);
          this.healthColorArray = a.healthbar_colors != null && a.healthbar_colors.length > 2 ? a.healthbar_colors : [161, 161, 161];
          this.vocalsFile = a.vocals_file ?? "";
          this.originalFlipX = a.flip_x == 1;
          this.editorIsPlayer = a._editor_isPlayer;
          this.noAntialiasing = a.no_antialiasing == 1;
          this.set_antialiasing(C.data.antialiasing && !this.noAntialiasing);
          this.animationsArray = a.animations;
          if (this.animationsArray != null && this.animationsArray.length > 0) {
            a = 0;
            b = this.animationsArray;
            while (a < b.length) {
              c = b[a];
              ++a;
              d = "" + c.anim;
              var e = "" + c.name;
              var f = c.fps;
              var k = c.loop;
              var t = c.indices;
              if (this.isAnimateAtlas) {
                if (t != null && t.length > 0) {
                  this.atlas.anim.addBySymbolIndices(d, e, t, f, k);
                } else {
                  this.atlas.anim.addBySymbol(d, e, f, k);
                }
              } else if (t != null && t.length > 0) {
                this.animation.addByIndices(d, e, t, "", f, k);
              } else {
                this.animation.addByPrefix(d, e, f, k);
              }
              if (c.offsets != null && c.offsets.length > 1) {
                this.addOffset(c.anim, c.offsets[0], c.offsets[1]);
              } else {
                this.addOffset(c.anim, 0, 0);
              }
            }
          }
          if (this.isAnimateAtlas) {
            this.copyAtlasValues();
          }
        },
        update: function (a) {
          if (this.isAnimateAtlas) {
            this.atlas.update(a);
          }
          if (!this.debugMode && (!!this.isAnimateAtlas || this.animation._curAnim != null) && (!this.isAnimateAtlas || this.atlas.anim.get_curSymbol() != null)) {
            if (this.heyTimer > 0) {
              this.heyTimer -= a * (z.instance != null ? z.instance.playbackRate : 1);
              if (this.heyTimer <= 0) {
                var b = "";
                if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                  b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
                }
                b = b ?? "";
                if (!!this.specialAnim && (b == "hey" || b == "cheer")) {
                  this.specialAnim = false;
                  this.dance();
                }
                this.heyTimer = 0;
              }
            } else if (this.specialAnim && this.isAnimationFinished()) {
              this.specialAnim = false;
              this.dance();
            } else {
              b = "";
              if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
              }
              if (v.endsWith(b ?? "", "miss") && this.isAnimationFinished()) {
                this.dance();
                this.finishAnimation();
              }
            }
            if (this.curCharacter == "pico-speaker" && (this.animationNotes.length > 0 && K.songPosition > this.animationNotes[0][0] && (b = 1, this.animationNotes[0][1] > 2 && (b = 3), b += g.random.int(0, 1), this.playAnim("shoot" + b, true), this.animationNotes.shift()), this.isAnimationFinished())) {
              b = "";
              if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
                b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
              }
              this.playAnim(b ?? "", false, false, this.animation._curAnim.frames.length - 3);
            }
            b = "";
            if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
              b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
            }
            if (v.startsWith(b ?? "", "sing")) {
              this.holdTimer += a;
            } else if (this.isPlayer) {
              this.holdTimer = 0;
            }
            if (!this.isPlayer && this.holdTimer >= 0.0011 / (g.sound.music != null ? g.sound.music._pitch : 1) * K.stepCrochet * this.singDuration) {
              this.dance();
              this.holdTimer = 0;
            }
            b = "";
            if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
              b = this.isAnimateAtlas ? this.atlas.anim.lastPlayedAnim : this.animation._curAnim.name;
            }
            b = b ?? "";
            if (this.isAnimationFinished() && Object.prototype.hasOwnProperty.call(this.animOffsets.h, "" + b + "-loop")) {
              this.playAnim("" + b + "-loop");
            }
          }
          G.prototype.update.call(this, a);
        },
        isAnimationFinished: function () {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() == null : this.animation._curAnim == null) {
            return false;
          } else if (this.isAnimateAtlas) {
            return this.atlas.anim.get_finished();
          } else {
            return this.animation._curAnim.finished;
          }
        },
        finishAnimation: function () {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() != null : this.animation._curAnim != null) {
            if (this.isAnimateAtlas) {
              this.atlas.anim.set_curFrame(this.atlas.anim.get_length() - 1);
            } else {
              this.animation._curAnim.finish();
            }
          }
        },
        set_animPaused: function (a) {
          if (this.isAnimateAtlas ? this.atlas.anim.get_curSymbol() == null : this.animation._curAnim == null) {
            return a;
          }
          if (this.isAnimateAtlas) {
            if (a) {
              this.atlas.anim.pause();
            } else {
              this.atlas.anim.resume();
            }
          } else {
            this.animation._curAnim.paused = a;
          }
          return a;
        },
        dance: function () {
          if (!this.debugMode && !this.skipDance && !this.specialAnim) {
            if (this.danceIdle) {
              if (this.danced = !this.danced) {
                this.playAnim("danceRight" + this.idleSuffix);
              } else {
                this.playAnim("danceLeft" + this.idleSuffix);
              }
            } else if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, "idle" + this.idleSuffix)) {
              this.playAnim("idle" + this.idleSuffix);
            }
          }
        },
        playAnim: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = false;
          }
          this.specialAnim = false;
          if (this.isAnimateAtlas) {
            this.atlas.anim.play(a, b, c, d);
          } else {
            this.animation.play(a, b, c, d);
          }
          if (Object.prototype.hasOwnProperty.call(this.animOffsets.h, a)) {
            d = this.animOffsets.h[a];
            b = this.offset;
            c = d[0];
            d = d[1];
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          if (v.startsWith(this.curCharacter, "gf-") || this.curCharacter == "gf") {
            if (a == "singLEFT") {
              this.danced = true;
            } else if (a == "singRIGHT") {
              this.danced = false;
            }
            if (a == "singUP" || a == "singDOWN") {
              this.danced = !this.danced;
            }
          }
        },
        loadMappedAnims: function () {
          try {
            var a = z.SONG.song;
            var b = new na("[~&\\\\;:<>#]", "");
            var c = new na("[.,'\"%?!]", "");
            var d = b.split(v.replace(a, " ", "-")).join("-");
            var e = Ld.loadFromJson("picospeaker", c.split(d).join("").toLowerCase()).notes;
            for (a = 0; a < e.length;) {
              var f = e[a];
              ++a;
              b = 0;
              for (var k = f.sectionNotes; b < k.length;) {
                var g = k[b];
                ++b;
                this.animationNotes.push(g);
              }
            }
            Lj.animationNotes = this.animationNotes;
            this.animationNotes.sort(n(this, this.sortAnims));
          } catch (l) {
            Oa.lastError = l;
          }
        },
        sortAnims: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        recalculateDanceIdle: function () {
          var a = this.danceIdle;
          this.danceIdle = Object.prototype.hasOwnProperty.call(this.animOffsets.h, "danceLeft" + this.idleSuffix) && Object.prototype.hasOwnProperty.call(this.animOffsets.h, "danceRight" + this.idleSuffix);
          if (this.settingCharacterUp) {
            this.danceEveryNumBeats = this.danceIdle ? 1 : 2;
          } else if (a != this.danceIdle) {
            a = this.danceEveryNumBeats;
            a = this.danceIdle ? a / 2 : a * 2;
            this.danceEveryNumBeats = Math.round(Math.max(a, 1));
          }
          this.settingCharacterUp = false;
        },
        addOffset: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          this.animOffsets.h[a] = [b, c];
        },
        draw: function () {
          if (this.isAnimateAtlas) {
            this.copyAtlasValues();
            this.atlas.draw();
          } else {
            G.prototype.draw.call(this);
          }
        },
        copyAtlasValues: function () {
          this.atlas.set_cameras(this.get_cameras());
          this.atlas.scrollFactor = this.scrollFactor;
          this.atlas.scale = this.scale;
          this.atlas.offset = this.offset;
          this.atlas.origin = this.origin;
          this.atlas.set_x(this.x);
          this.atlas.set_y(this.y);
          this.atlas.set_angle(this.angle);
          this.atlas.set_alpha(this.alpha);
          this.atlas.set_visible(this.visible);
          this.atlas.set_flipX(this.flipX);
          this.atlas.set_flipY(this.flipY);
          this.atlas.shader = this.shader;
          this.atlas.set_antialiasing(this.antialiasing);
          this.atlas.colorTransform = this.colorTransform;
          this.atlas.set_color(this.color);
        },
        destroy: function () {
          G.prototype.destroy.call(this);
          this.destroyAtlas();
        },
        destroyAtlas: function () {
          if (this.atlas != null) {
            this.atlas = ca.destroy(this.atlas);
          }
        },
        __class__: ad,
        __properties__: q(G.prototype.__properties__, {
          set_animPaused: "set_animPaused"
        })
      });
      function Mj(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.offsetX = this.offsetY = 0;
        this.copyAlpha = true;
        G.call(this, a, b);
        a = E.image("checkboxanim", null, true);
        this.set_frames(Sa.fromSparrow(a, E.getPath("images/checkboxanim.xml", null, null)));
        this.animation.addByPrefix("unchecked", "checkbox0", 24, false);
        this.animation.addByPrefix("unchecking", "checkbox anim reverse", 24, false);
        this.animation.addByPrefix("checking", "checkbox anim0", 24, false);
        this.animation.addByPrefix("checked", "checkbox finish", 24, false);
        this.set_antialiasing(C.data.antialiasing);
        this.setGraphicSize(this.get_width() * 0.9 | 0);
        this.updateHitbox();
        this.animationFinished(c ? "checking" : "unchecking");
        this.animation.finishCallback = n(this, this.animationFinished);
        this.set_daValue(c);
      }
      h["objects.CheckboxThingie"] = Mj;
      Mj.__name__ = "objects.CheckboxThingie";
      Mj.__super__ = G;
      Mj.prototype = q(G.prototype, {
        update: function (a) {
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x - 130 + this.offsetX, this.sprTracker.y + 30 + this.offsetY);
            if (this.copyAlpha) {
              this.set_alpha(this.sprTracker.alpha);
            }
          }
          G.prototype.update.call(this, a);
        },
        set_daValue: function (a) {
          if (a) {
            if (this.animation._curAnim.name != "checked" && this.animation._curAnim.name != "checking") {
              this.animation.play("checking", true);
              var b = this.offset;
              var c = 34;
              var d = 25;
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
            }
          } else if (this.animation._curAnim.name != "unchecked" && this.animation._curAnim.name != "unchecking") {
            this.animation.play("unchecking", true);
            b = this.offset;
            c = 25;
            d = 28;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          return a;
        },
        animationFinished: function (a) {
          switch (a) {
            case "checking":
              this.animation.play("checked", true);
              a = this.offset;
              var b = 3;
              var c = 12;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(b);
              a.set_y(c);
              break;
            case "unchecking":
              this.animation.play("unchecked", true);
              a = this.offset;
              b = 0;
              c = 2;
              if (c == null) {
                c = 0;
              }
              if (b == null) {
                b = 0;
              }
              a.set_x(b);
              a.set_y(c);
          }
        },
        __class__: Mj,
        __properties__: q(G.prototype.__properties__, {
          set_daValue: "set_daValue"
        })
      });
      function Mf(a, b, c) {
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = "bf";
        }
        this.iconOffsets = [0, 0];
        this.char = "";
        this.isOldIcon = this.isPlayer = false;
        G.call(this);
        this.isOldIcon = a == "bf-old";
        this.isPlayer = b;
        this.changeIcon(a, c);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["objects.HealthIcon"] = Mf;
      Mf.__name__ = "objects.HealthIcon";
      Mf.__super__ = G;
      Mf.prototype = q(G.prototype, {
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.sprTracker.get_width() + 12, this.sprTracker.y - 30);
          }
        },
        changeIcon: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (this.char != a) {
            var c = "icons/" + a;
            if (!E.fileExists("images/" + c + ".png", "IMAGE")) {
              c = "icons/icon-" + a;
            }
            if (!E.fileExists("images/" + c + ".png", "IMAGE")) {
              c = "icons/icon-face";
            }
            b = E.image(c, null, b);
            this.loadGraphic(b, true, Math.floor(b.width / 2), Math.floor(b.height));
            this.iconOffsets[0] = (this.get_width() - 150) / 2;
            this.iconOffsets[1] = (this.get_height() - 150) / 2;
            this.updateHitbox();
            this.animation.add(a, [0, 1], 0, false, this.isPlayer);
            this.animation.play(a);
            this.char = a;
            if (v.endsWith(a, "-pixel")) {
              this.set_antialiasing(false);
            } else {
              this.set_antialiasing(C.data.antialiasing);
            }
          }
        },
        updateHitbox: function () {
          G.prototype.updateHitbox.call(this);
          this.offset.set_x(this.iconOffsets[0]);
          this.offset.set_y(this.iconOffsets[1]);
        },
        getCharacter: function () {
          return this.char;
        },
        __class__: Mf
      });
      function qe(a, b) {
        if (b == null) {
          b = "bf";
        }
        this.hasConfirmAnimation = false;
        G.call(this, a);
        this.set_antialiasing(C.data.antialiasing);
        this.changeCharacter(b);
      }
      h["objects.MenuCharacter"] = qe;
      qe.__name__ = "objects.MenuCharacter";
      qe.__super__ = G;
      qe.prototype = q(G.prototype, {
        changeCharacter: function (a) {
          if (a == null) {
            a = "bf";
          }
          if (a == null) {
            a = "";
          }
          if (a != this.character) {
            this.character = a;
            this.set_visible(true);
            var b = this.scale;
            var c = 1;
            var d = 1;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            this.updateHitbox();
            this.hasConfirmAnimation = false;
            if (a == null) {
              a = "images/menucharacters/" + a + ".json";
              if (a == null) {
                a = "";
              }
              a = "assets/shared/" + a;
              if (!U.exists(a)) {
                a = "images/menucharacters/" + qe.DEFAULT_CHARACTER + ".json";
                if (a == null) {
                  a = "";
                }
                a = "assets/shared/" + a;
              }
              a = U.getText(a);
              a = JSON.parse(a);
              b = "menucharacters/" + a.image;
              c = null;
              d = E.image(b, c, true);
              this.set_frames(Sa.fromSparrow(d, E.getPath("images/" + b + ".xml", null, c)));
              this.animation.addByPrefix("idle", a.idle_anim, 24);
              b = a.confirm_anim;
              if (b != null && b.length > 0 && b != a.idle_anim) {
                this.animation.addByPrefix("confirm", b, 24, false);
                if (this.animation._animations.h.confirm != null) {
                  this.hasConfirmAnimation = true;
                }
              }
              this.set_flipX(a.flipX == 1);
              if (a.scale != 1) {
                b = this.scale;
                d = c = a.scale;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                b.set_x(c);
                b.set_y(d);
                this.updateHitbox();
              }
              b = this.offset;
              c = a.position[0];
              d = a.position[1];
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
              this.animation.play("idle");
            } else if (a == "") {
              this.set_visible(false);
            } else {
              a = "images/menucharacters/" + a + ".json";
              if (a == null) {
                a = "";
              }
              a = "assets/shared/" + a;
              if (!U.exists(a)) {
                a = "images/menucharacters/" + qe.DEFAULT_CHARACTER + ".json";
                if (a == null) {
                  a = "";
                }
                a = "assets/shared/" + a;
              }
              a = U.getText(a);
              a = JSON.parse(a);
              b = "menucharacters/" + a.image;
              c = null;
              d = E.image(b, c, true);
              this.set_frames(Sa.fromSparrow(d, E.getPath("images/" + b + ".xml", null, c)));
              this.animation.addByPrefix("idle", a.idle_anim, 24);
              b = a.confirm_anim;
              if (b != null && b.length > 0 && b != a.idle_anim) {
                this.animation.addByPrefix("confirm", b, 24, false);
                if (this.animation._animations.h.confirm != null) {
                  this.hasConfirmAnimation = true;
                }
              }
              this.set_flipX(a.flipX == 1);
              if (a.scale != 1) {
                b = this.scale;
                d = c = a.scale;
                if (d == null) {
                  d = 0;
                }
                if (c == null) {
                  c = 0;
                }
                b.set_x(c);
                b.set_y(d);
                this.updateHitbox();
              }
              b = this.offset;
              c = a.position[0];
              d = a.position[1];
              if (d == null) {
                d = 0;
              }
              if (c == null) {
                c = 0;
              }
              b.set_x(c);
              b.set_y(d);
              this.animation.play("idle");
            }
          }
        },
        __class__: qe
      });
      function Nj(a, b, c) {
        if (c == null) {
          c = "";
        }
        this.flashes_ps = 6;
        this._flashColor = -13369345;
        this._flashingElapsed = 0;
        this.isFlashing = false;
        this.targetY = 0;
        G.call(this, a, b);
        this.loadGraphic(E.image("storymenu/" + c));
        this.set_antialiasing(C.data.antialiasing);
      }
      h["objects.MenuItem"] = Nj;
      Nj.__name__ = "objects.MenuItem";
      Nj.__super__ = G;
      Nj.prototype = q(G.prototype, {
        set_isFlashing: function (a) {
          if (a == null) {
            a = true;
          }
          this.isFlashing = a;
          this._flashingElapsed = 0;
          this.set_color(this.isFlashing ? this._flashColor : -1);
          return this.isFlashing;
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          var b = this.targetY * 120 + 480;
          this.set_y(b + Math.exp(-a * 10.2) * (this.y - b));
          if (this.isFlashing) {
            this._flashingElapsed += a;
            this.set_color(Math.floor(this._flashingElapsed * g.updateFramerate * this.flashes_ps) % 2 == 0 ? this._flashColor : -1);
          }
        },
        __class__: Nj,
        __properties__: q(G.prototype.__properties__, {
          set_isFlashing: "set_isFlashing"
        })
      });
      function hm(a) {
        this.playbackRate = 1;
        this.holdPitchTime = 0;
        this.playbackSymbols = [];
        this.playingMusic = false;
        ab.call(this);
        this.instance = a;
        a = g.width * 0.7;
        this.songBG = new G(a - 6, 0).makeGraphic(1, 100, -16777216);
        this.songBG.set_alpha(0.6);
        this.add(this.songBG);
        this.playbackBG = new G(a - 6, 0).makeGraphic(1, 100, -16777216);
        this.playbackBG.set_alpha(0.6);
        this.add(this.playbackBG);
        this.songTxt = new R(g.width * 0.7, 5, 0, "", 32);
        this.songTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
        this.add(this.songTxt);
        this.timeTxt = new R(a, this.songTxt.y + 60, 0, "", 32);
        this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
        this.add(this.timeTxt);
        a = new R();
        a.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
        a.set_text("^");
        a.set_visible(false);
        this.playbackSymbols.push(a);
        this.add(a);
        a = new R();
        a.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
        a.set_text("^");
        a.set_flipY(true);
        a.set_visible(false);
        this.playbackSymbols.push(a);
        this.add(a);
        this.progressBar = new Lg(this.timeTxt.x, this.timeTxt.y + this.timeTxt.get_height(), Ad.LEFT_TO_RIGHT, this.timeTxt.get_width() | 0, 8, null, "", 0, Infinity);
        this.progressBar.createFilledBar(-1, -16777216);
        this.add(this.progressBar);
        this.playbackTxt = new R(g.width * 0.6, 20, 0, "", 32);
        this.playbackTxt.setFormat("assets/fonts/vcr.ttf", 32, -1);
        this.add(this.playbackTxt);
        this.switchPlayMusic();
      }
      h["objects.MusicPlayer"] = hm;
      hm.__name__ = "objects.MusicPlayer";
      hm.__super__ = ab;
      hm.prototype = q(ab.prototype, {
        update: function (a) {
          ab.prototype.update.call(this, a);
          if (this.playingMusic) {
            if (this.get_paused() && !this.wasPlaying) {
              this.songTxt.set_text("PLAYING: " + this.instance.songs[Va.curSelected].songName + " (PAUSED)");
            } else {
              this.songTxt.set_text("PLAYING: " + this.instance.songs[Va.curSelected].songName);
            }
            this.positionSong();
            if (this.instance.get_controls().get_UI_LEFT_P()) {
              if (this.get_playing()) {
                this.wasPlaying = true;
              }
              this.pauseOrResume();
              this.curTime = g.sound.music._time - 1000;
              this.instance.holdTime = 0;
              if (this.curTime < 0) {
                this.curTime = 0;
              }
              g.sound.music.set_time(this.curTime);
              if (Va.vocals != null) {
                Va.vocals.set_time(this.curTime);
              }
            }
            if (this.instance.get_controls().get_UI_RIGHT_P()) {
              if (this.get_playing()) {
                this.wasPlaying = true;
              }
              this.pauseOrResume();
              this.curTime = g.sound.music._time + 1000;
              this.instance.holdTime = 0;
              if (this.curTime > g.sound.music._length) {
                this.curTime = g.sound.music._length;
              }
              g.sound.music.set_time(this.curTime);
              if (Va.vocals != null) {
                Va.vocals.set_time(this.curTime);
              }
            }
            this.updateTimeTxt();
            if (this.instance.get_controls().get_UI_LEFT() || this.instance.get_controls().get_UI_RIGHT()) {
              this.instance.holdTime += a;
              if (this.instance.holdTime > 0.5) {
                this.curTime += a * 40000 * (this.instance.get_controls().get_UI_LEFT() ? -1 : 1);
              }
              var b = Math.abs(this.curTime - g.sound.music._time);
              if (this.curTime + b > g.sound.music._length) {
                this.curTime = g.sound.music._length;
              } else if (this.curTime - b < 0) {
                this.curTime = 0;
              }
              g.sound.music.set_time(this.curTime);
              if (Va.vocals != null) {
                Va.vocals.set_time(this.curTime);
              }
              this.updateTimeTxt();
            }
            if (this.instance.get_controls().get_UI_LEFT_R() || this.instance.get_controls().get_UI_RIGHT_R()) {
              g.sound.music.set_time(this.curTime);
              if (Va.vocals != null) {
                Va.vocals.set_time(this.curTime);
              }
              if (this.wasPlaying) {
                this.pauseOrResume(true);
                this.wasPlaying = false;
              }
              this.updateTimeTxt();
            }
            if (this.instance.get_controls().get_UI_UP_P()) {
              this.holdPitchTime = 0;
              this.set_playbackRate(this.playbackRate + 0.05);
              this.setPlaybackRate();
            } else if (this.instance.get_controls().get_UI_DOWN_P()) {
              this.holdPitchTime = 0;
              this.set_playbackRate(this.playbackRate - 0.05);
              this.setPlaybackRate();
            }
            if (this.instance.get_controls().get_UI_DOWN() || this.instance.get_controls().get_UI_UP()) {
              this.holdPitchTime += a;
              if (this.holdPitchTime > 0.6) {
                this.set_playbackRate(this.playbackRate + (this.instance.get_controls().get_UI_UP() ? 1 : -1) * 0.05);
                this.setPlaybackRate();
              }
            }
            if (Va.vocals != null && g.sound.music._time > 5) {
              b = Math.abs(g.sound.music._time - Va.vocals._time);
              if (b >= 5 && !this.get_paused()) {
                this.pauseOrResume();
                Va.vocals.set_time(g.sound.music._time);
                this.pauseOrResume(true);
              }
            }
            this.updatePlaybackTxt();
            if (this.instance.get_controls().get_RESET()) {
              this.set_playbackRate(1);
              this.setPlaybackRate();
              g.sound.music.set_time(0);
              if (Va.vocals != null) {
                Va.vocals.set_time(0);
              }
              this.updateTimeTxt();
            }
          }
        },
        pauseOrResume: function (a) {
          if (a == null) {
            a = false;
          }
          if (a) {
            g.sound.music.resume();
            if (Va.vocals != null) {
              Va.vocals.resume();
            }
          } else {
            g.sound.music.pause();
            if (Va.vocals != null) {
              Va.vocals.pause();
            }
          }
          this.positionSong();
        },
        switchPlayMusic: function () {
          g.autoPause = !this.playingMusic && C.data.autoPause;
          this.set_active(this.set_visible(this.playingMusic));
          this.instance.scoreBG.set_visible(this.instance.diffText.set_visible(this.instance.scoreText.set_visible(!this.playingMusic)));
          this.songTxt.set_visible(this.timeTxt.set_visible(this.songBG.set_visible(this.playbackTxt.set_visible(this.playbackBG.set_visible(this.progressBar.set_visible(this.playingMusic))))));
          for (var a = 0, b = this.playbackSymbols; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(this.playingMusic);
          }
          this.holdPitchTime = 0;
          this.instance.holdTime = 0;
          this.set_playbackRate(1);
          this.updatePlaybackTxt();
          if (this.playingMusic) {
            this.instance.bottomText.set_text("Press SPACE to Pause / Press ESCAPE to Exit / Press R to Reset the Song");
            this.positionSong();
            this.progressBar.setRange(0, g.sound.music._length);
            this.progressBar.setParent(g.sound.music, "time");
            this.progressBar.set_numDivisions(1600);
            this.updateTimeTxt();
          } else {
            this.progressBar.setRange(0, Infinity);
            this.progressBar.setParent(null, "");
            this.progressBar.set_numDivisions(0);
            this.instance.bottomText.set_text(this.instance.bottomString);
            this.instance.positionHighscore();
          }
          this.progressBar.updateBar();
        },
        updatePlaybackTxt: function () {
          var a = this.playbackRate;
          if (typeof a == "number" && (a | 0) === a) {
            a = this.playbackRate + ".00";
          } else {
            a = y.string(this.playbackRate);
            if (a.split(".")[1].length < 2) {
              a += "0";
            }
          }
          this.playbackTxt.set_text(a + "x");
        },
        positionSong: function () {
          var a = this.instance.songs[Va.curSelected].songName.length;
          var b = a < 5;
          this.songTxt.set_x(g.width - this.songTxt.get_width() - 6);
          if (b) {
            var c = this.songTxt;
            c.set_x(c.x - (a * 10 - a));
          }
          this.songBG.scale.set_x(g.width - this.songTxt.x + 12);
          if (b) {
            c = this.songBG;
            c.scale.set_x(c.scale.x + a * 6);
          }
          this.songBG.set_x(g.width - this.songBG.scale.x / 2);
          this.timeTxt.set_x(this.songBG.x + this.songBG.get_width() / 2 | 0);
          c = this.timeTxt;
          c.set_x(c.x - this.timeTxt.get_width() / 2);
          if (b) {
            c = this.timeTxt;
            c.set_x(c.x - (a - 5));
          }
          this.playbackBG.scale.set_x(this.playbackTxt.get_width() + 30);
          this.playbackBG.set_x(this.songBG.x - this.songBG.scale.x / 2);
          c = this.playbackBG;
          c.set_x(c.x - this.playbackBG.scale.x);
          this.playbackTxt.set_x(this.playbackBG.x - this.playbackTxt.get_width() / 2);
          this.playbackTxt.set_y(this.playbackTxt.get_height());
          this.progressBar.setGraphicSize(this.songTxt.get_width() | 0, 5);
          this.progressBar.set_y(this.songTxt.y + this.songTxt.get_height() + 10);
          this.progressBar.set_x(this.songTxt.x + this.songTxt.get_width() / 2 - 15);
          if (b) {
            c = this.progressBar;
            c.scale.set_x(c.scale.x + a / 2);
            c = this.progressBar;
            c.set_x(c.x - (a - 10));
          }
          a = this.playbackSymbols[0];
          a.set_x(this.playbackTxt.x + this.playbackTxt.get_width() / 2 - 10);
          a.set_y(this.playbackTxt.y);
          a.set_y(a.y - this.playbackTxt.get_height());
          a = this.playbackSymbols[1];
          a.set_x(this.playbackTxt.x + this.playbackTxt.get_width() / 2 - 10);
          a.set_y(this.playbackTxt.y);
          a.set_y(a.y + this.playbackTxt.get_height());
        },
        updateTimeTxt: function () {
          var a = Xb.formatTime(g.sound.music._time / 1000, false) + " / " + Xb.formatTime(g.sound.music._length / 1000, false);
          this.timeTxt.set_text("< " + a + " >");
        },
        setPlaybackRate: function () {
          g.sound.music.set_pitch(this.playbackRate);
          if (Va.vocals != null) {
            Va.vocals.set_pitch(this.playbackRate);
          }
        },
        get_playing: function () {
          return g.sound.music._channel != null;
        },
        get_paused: function () {
          return g.sound.music._paused;
        },
        set_playbackRate: function (a) {
          a = jc.roundDecimal(a, 2);
          if (a > 3) {
            a = 3;
          } else if (a <= 0.25) {
            a = 0.25;
          }
          return this.playbackRate = a;
        },
        __class__: hm,
        __properties__: q(ab.prototype.__properties__, {
          set_playbackRate: "set_playbackRate",
          get_paused: "get_paused",
          get_playing: "get_playing"
        })
      });
      function Ta(a, b, c, d, e, f) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        this.correctionOffset = 0;
        this.originalHeight = 6;
        this._lastNoteOffX = 0;
        this.hitsound = "hitsound";
        this.hitsoundChartEditor = true;
        this.hitsoundDisabled = false;
        this.distance = 2000;
        this.noAnimation = this.noMissAnimation = this.hitCausesMiss = false;
        this.texture = null;
        this.ratingDisabled = false;
        this.ratingMod = 0;
        this.rating = "unknown";
        this.missHealth = 0.0475;
        this.hitHealth = 0.023;
        this.copyX = this.copyY = this.copyAngle = this.copyAlpha = true;
        this.multAlpha = this.multSpeed = 1;
        this.offsetX = this.offsetY = this.offsetAngle = 0;
        var k = z.SONG != null ? z.SONG.disableNoteRGB != 1 : true;
        this.noteSplashData = {
          disabled: false,
          texture: null,
          antialiasing: !z.get_isPixelStage(),
          useGlobalShader: false,
          useRGBShader: k,
          r: -1,
          g: -1,
          b: -1,
          a: C.data.splashAlpha
        };
        this.lowPriority = false;
        this.earlyHitMult = this.lateHitMult = 1;
        this.gfNote = false;
        this.animSuffix = "";
        this.inEditor = false;
        this.eventVal1 = this.eventVal2 = "";
        this.eventLength = 0;
        this.eventName = "";
        this.noteType = null;
        this.isSustainNote = false;
        this.sustainLength = 0;
        this.blockHit = false;
        this.tail = [];
        this.mustPress = this.canBeHit = this.tooLate = this.wasGoodHit = this.missed = this.ignoreNote = this.hitByOpponent = this.spawned = false;
        this.strumTime = this.noteData = 0;
        G.call(this);
        this.animation = new ph(this);
        this.set_antialiasing(C.data.antialiasing);
        if (f == null) {
          f = z.instance;
        }
        if (c == null) {
          c = this;
        }
        this.prevNote = c;
        this.isSustainNote = d;
        this.inEditor = e;
        this.set_moves(false);
        this.set_x(this.x + ((C.data.middleScroll ? z.STRUM_X_MIDDLESCROLL : z.STRUM_X) + 50));
        this.set_y(this.y - 2000);
        this.strumTime = a;
        if (!e) {
          this.strumTime += C.data.noteOffset;
        }
        this.noteData = b;
        if (b > -1) {
          this.set_texture("");
          this.rgbShader = new im(this, Ta.initializeGlobalRGBShader(b));
          if (z.SONG != null && z.SONG.disableNoteRGB) {
            this.rgbShader.set_enabled(false);
          }
          this.set_x(this.x + Ta.swagWidth * b);
          if (!this.isSustainNote && b < Ta.colArray.length) {
            this.animation.play(Ta.colArray[b % Ta.colArray.length] + "Scroll");
          }
        }
        if (c != null) {
          c.nextNote = this;
        }
        if (this.isSustainNote && c != null) {
          this.set_alpha(0.6);
          this.multAlpha = 0.6;
          this.hitsoundDisabled = true;
          if (C.data.downScroll) {
            this.set_flipY(true);
          }
          this.offsetX += this.get_width() / 2;
          this.copyAngle = false;
          this.animation.play(Ta.colArray[b % Ta.colArray.length] + "holdend");
          this.updateHitbox();
          this.offsetX -= this.get_width() / 2;
          if (z.get_isPixelStage()) {
            this.offsetX += 30;
          }
          if (c.isSustainNote) {
            c.animation.play(Ta.colArray[c.noteData % Ta.colArray.length] + "hold");
            c.scale.set_y(K.stepCrochet / 100 * c.scale.y * 1.05);
            if (f != null && f.songSpeed != null) {
              c.scale.set_y(c.scale.y * f.songSpeed);
            }
            if (z.get_isPixelStage()) {
              c.scale.set_y(c.scale.y * 1.19);
              c.scale.set_y(c.scale.y * (6 / this.get_height()));
            }
            c.updateHitbox();
          }
          if (z.get_isPixelStage()) {
            this.scale.set_y(this.scale.y * z.daPixelZoom);
            this.updateHitbox();
          }
          this.earlyHitMult = 0;
        } else if (!this.isSustainNote) {
          this.centerOffsets();
          a = this.origin;
          b = this.frameWidth * 0.5;
          c = this.frameHeight * 0.5;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
        }
        this.set_x(this.x + this.offsetX);
      }
      h["objects.Note"] = Ta;
      Ta.__name__ = "objects.Note";
      Ta.initializeGlobalRGBShader = function (a) {
        if (Ta.globalRgbShaders[a] == null) {
          var b = new jm();
          Ta.globalRgbShaders[a] = b;
          var c = z.get_isPixelStage() ? C.data.arrowRGBPixel[a] : C.data.arrowRGB[a];
          if (a > -1 && a <= c.length) {
            b.set_r(c[0]);
            b.set_g(c[1]);
            b.set_b(c[2]);
          }
        }
        return Ta.globalRgbShaders[a];
      };
      Ta.getNoteSkinPostfix = function () {
        var a = "";
        if (C.data.noteSkin != C.defaultData.noteSkin) {
          a = "-" + v.replace(v.trim(C.data.noteSkin).toLowerCase(), " ", "_");
        }
        return a;
      };
      Ta.__super__ = G;
      Ta.prototype = q(G.prototype, {
        resizeByRatio: function (a) {
          if (this.isSustainNote && this.animation._curAnim != null && !v.endsWith(this.animation._curAnim.name, "end")) {
            this.scale.set_y(this.scale.y * a);
            this.updateHitbox();
          }
        },
        set_texture: function (a) {
          if (this.texture != a) {
            this.reloadNote(a);
          }
          return this.texture = a;
        },
        defaultRGB: function () {
          var a = C.data.arrowRGB[this.noteData];
          if (z.get_isPixelStage()) {
            a = C.data.arrowRGBPixel[this.noteData];
          }
          if (this.noteData > -1 && this.noteData <= a.length) {
            this.rgbShader.set_r(a[0]);
            this.rgbShader.set_g(a[1]);
            this.rgbShader.set_b(a[2]);
          }
        },
        set_noteType: function (a) {
          this.noteSplashData.texture = z.SONG != null ? z.SONG.splashSkin : "noteSplashes";
          this.defaultRGB();
          if (this.noteData > -1 && this.noteType != a) {
            switch (a) {
              case "Alt Animation":
                this.animSuffix = "-alt";
                break;
              case "GF Sing":
                this.gfNote = true;
                this.multAlpha = 0;
                break;
              case "Hurt Note":
                this.ignoreNote = this.mustPress;
                this.rgbShader.set_r(-15724528);
                this.rgbShader.set_g(-65536);
                this.rgbShader.set_b(-6750174);
                this.noteSplashData.r = -65536;
                this.noteSplashData.g = -15724528;
                this.noteSplashData.texture = "noteSplashes/noteSplashes-electric";
                this.lowPriority = true;
                this.missHealth = this.isSustainNote ? 0.25 : 0.1;
                this.hitCausesMiss = true;
                this.hitsound = "cancelMenu";
                this.hitsoundChartEditor = false;
                break;
              case "No Animation":
                this.noMissAnimation = this.noAnimation = true;
            }
            if (this.hitsound != "hitsound" && C.data.hitsoundVolume > 0) {
              E.sound(this.hitsound);
            }
            this.noteType = a;
          }
          return a;
        },
        reloadNote: function (a, b) {
          if (b == null) {
            b = "";
          }
          if (a == null) {
            a = "";
          }
          if (a == null) {
            a = "";
          }
          if (b == null) {
            b = "";
          }
          var c = a + b;
          if (a.length < 1 && (c = z.SONG != null ? z.SONG.arrowSkin : null, c == null || c.length < 1)) {
            c = Ta.defaultNoteSkin + b;
          }
          a = null;
          if (this.animation._curAnim != null) {
            a = this.animation._curAnim.name;
          }
          var d = c;
          b = this.scale.y;
          var e = Ta.getNoteSkinPostfix();
          var f = c + e;
          var k = z.get_isPixelStage() ? "pixelUI/" : "";
          if (f == Ta._lastValidChecked || E.fileExists("images/" + k + f + ".png", "IMAGE")) {
            c = f;
            Ta._lastValidChecked = f;
          } else {
            e = "";
          }
          if (z.get_isPixelStage()) {
            if (this.isSustainNote) {
              c = E.image("pixelUI/" + d + "ENDS" + e);
              this.loadGraphic(c, true, Math.floor(c.width / 4), Math.floor(c.height / 2));
              this.originalHeight = c.height / 2;
            } else {
              c = E.image("pixelUI/" + d + e);
              this.loadGraphic(c, true, Math.floor(c.width / 4), Math.floor(c.height / 5));
            }
            this.setGraphicSize(this.get_width() * z.daPixelZoom | 0);
            this.loadPixelNoteAnims();
            this.set_antialiasing(false);
            if (this.isSustainNote) {
              this.offsetX += this._lastNoteOffX;
              this._lastNoteOffX = (this.get_width() - 7) * (z.daPixelZoom / 2);
              this.offsetX -= this._lastNoteOffX;
            }
          } else {
            d = E.image(c, null, true);
            this.set_frames(Sa.fromSparrow(d, E.getPath("images/" + c + ".xml", null, null)));
            this.loadNoteAnims();
            if (!this.isSustainNote) {
              this.centerOffsets();
              c = this.origin;
              d = this.frameWidth * 0.5;
              e = this.frameHeight * 0.5;
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.set_x(d);
              c.set_y(e);
            }
          }
          if (this.isSustainNote) {
            this.scale.set_y(b);
          }
          this.updateHitbox();
          if (a != null) {
            this.animation.play(a, true);
          }
        },
        loadNoteAnims: function () {
          if (this.isSustainNote) {
            this.attemptToAddAnimationByPrefix("purpleholdend", "pruple end hold", 24, true);
            this.animation.addByPrefix(Ta.colArray[this.noteData] + "holdend", Ta.colArray[this.noteData] + " hold end", 24, true);
            this.animation.addByPrefix(Ta.colArray[this.noteData] + "hold", Ta.colArray[this.noteData] + " hold piece", 24, true);
          } else {
            this.animation.addByPrefix(Ta.colArray[this.noteData] + "Scroll", Ta.colArray[this.noteData] + "0");
          }
          this.setGraphicSize(this.get_width() * 0.7 | 0);
          this.updateHitbox();
        },
        loadPixelNoteAnims: function () {
          if (this.isSustainNote) {
            this.animation.add(Ta.colArray[this.noteData] + "holdend", [this.noteData + 4], 24, true);
            this.animation.add(Ta.colArray[this.noteData] + "hold", [this.noteData], 24, true);
          } else {
            this.animation.add(Ta.colArray[this.noteData] + "Scroll", [this.noteData + 4], 24, true);
          }
        },
        attemptToAddAnimationByPrefix: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (c == null) {
            c = 24;
          }
          var e = [];
          this.animation.findByPrefix(e, b);
          if (!(e.length < 1)) {
            this.animation.addByPrefix(a, b, c, d);
          }
        },
        update: function (a) {
          G.prototype.update.call(this, a);
          if (this.mustPress) {
            this.canBeHit = this.strumTime > K.songPosition - K.safeZoneOffset * this.lateHitMult && this.strumTime < K.songPosition + K.safeZoneOffset * this.earlyHitMult;
            if (this.strumTime < K.songPosition - K.safeZoneOffset && !this.wasGoodHit) {
              this.tooLate = true;
            }
          } else {
            this.canBeHit = false;
            if (this.strumTime < K.songPosition + K.safeZoneOffset * this.earlyHitMult && (this.isSustainNote && this.prevNote.wasGoodHit || this.strumTime <= K.songPosition)) {
              this.wasGoodHit = true;
            }
          }
          if (this.tooLate && !this.inEditor && this.alpha > 0.3) {
            this.set_alpha(0.3);
          }
        },
        destroy: function () {
          G.prototype.destroy.call(this);
          Ta._lastValidChecked = "";
        },
        followStrumNote: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          b = a.x;
          var d = a.y;
          var e = a.angle;
          var f = a.alpha;
          var k = a.direction;
          this.distance = (K.songPosition - this.strumTime) * 0.45 * c * this.multSpeed;
          if (!a.downScroll) {
            this.distance *= -1;
          }
          c = k * Math.PI / 180;
          if (this.copyAngle) {
            this.set_angle(k - 90 + e + this.offsetAngle);
          }
          if (this.copyAlpha) {
            this.set_alpha(f * this.multAlpha);
          }
          if (this.copyX) {
            this.set_x(b + this.offsetX + Math.cos(c) * this.distance);
          }
          if (this.copyY) {
            this.set_y(d + this.offsetY + this.correctionOffset + Math.sin(c) * this.distance);
            if (a.downScroll && this.isSustainNote) {
              if (z.get_isPixelStage()) {
                this.set_y(this.y - z.daPixelZoom * 9.5);
              }
              this.set_y(this.y - (this.frameHeight * this.scale.y - Ta.swagWidth / 2));
            }
          }
        },
        clipToStrumNote: function (a) {
          var b = a.y + this.offsetY + Ta.swagWidth / 2;
          if (this.isSustainNote && (this.mustPress || !this.ignoreNote) && (!this.mustPress || this.wasGoodHit || this.prevNote.wasGoodHit && !this.canBeHit)) {
            var c = this.clipRect;
            if (c == null) {
              c = new Ia(0, 0, this.frameWidth, this.frameHeight);
            }
            if (a.downScroll) {
              if (this.y - this.offset.y * this.scale.y + this.get_height() >= b) {
                c.width = this.frameWidth;
                c.height = (b - this.y) / this.scale.y;
                c.y = this.frameHeight - c.height;
              }
            } else if (this.y + this.offset.y * this.scale.y <= b) {
              c.y = (b - this.y) / this.scale.y;
              c.width = this.get_width() / this.scale.x;
              c.height = this.get_height() / this.scale.y - c.y;
            }
            this.set_clipRect(c);
          }
        },
        set_clipRect: function (a) {
          this.clipRect = a;
          if (this.frames != null) {
            this.set_frame(this.frames.frames[this.animation.frameIndex]);
          }
          return a;
        },
        __class__: Ta,
        __properties__: q(G.prototype.__properties__, {
          set_texture: "set_texture",
          set_noteType: "set_noteType"
        })
      });
      function gc(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.maxAnims = 2;
        this._textureLoaded = this._configLoaded = null;
        G.call(this, a, b);
        this.animation = new ph(this);
        a = z.SONG.splashSkin != null && z.SONG.splashSkin.length > 0 ? z.SONG.splashSkin : gc.defaultNoteSplash + gc.getSplashSkinPostfix();
        this.rgbShader = new Io();
        this.shader = this.rgbShader.shader;
        gc.precacheConfig(a);
        this._configLoaded = a;
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["objects.NoteSplash"] = gc;
      gc.__name__ = "objects.NoteSplash";
      gc.getSplashSkinPostfix = function () {
        var a = "";
        if (C.data.splashSkin != C.defaultData.splashSkin) {
          a = "-" + v.replace(v.trim(C.data.splashSkin).toLowerCase(), " ", "_");
        }
        return a;
      };
      gc.precacheConfig = function (a) {
        if (Object.prototype.hasOwnProperty.call(gc.configs.h, a)) {
          return gc.configs.h[a];
        }
        var b = E.getPath("images/" + a + ".txt", "TEXT", null, true);
        var c = null;
        if (U.exists(b)) {
          c = U.getText(b);
        }
        if (c != null) {
          var d = v.trim(c).split("\n");
          b = 0;
          for (c = d.length; b < c;) {
            var e = b++;
            d[e] = v.trim(d[e]);
          }
        } else {
          d = [];
        }
        if (d.length < 1) {
          return null;
        }
        var f = d[1].split(" ");
        var k = [];
        b = 2;
        for (c = d.length; b < c;) {
          e = b++;
          e = d[e].split(" ");
          k.push([parseFloat(e[0]), parseFloat(e[1])]);
        }
        b = {
          anim: d[0],
          minFps: y.parseInt(f[0]),
          maxFps: y.parseInt(f[1]),
          offsets: k
        };
        return gc.configs.h[a] = b;
      };
      gc.__super__ = G;
      gc.prototype = q(G.prototype, {
        destroy: function () {
          gc.configs.h = Object.create(null);
          G.prototype.destroy.call(this);
        },
        setupNoteSplash: function (a, b, c, d) {
          if (c == null) {
            c = 0;
          }
          this.setPosition(a - Ta.swagWidth * 0.95, b - Ta.swagWidth);
          gc.aliveTime = 0;
          a = d != null && d.noteSplashData.texture != null ? d.noteSplashData.texture : z.SONG.splashSkin != null && z.SONG.splashSkin.length > 0 ? z.SONG.splashSkin : gc.defaultNoteSplash + gc.getSplashSkinPostfix();
          var e = this._textureLoaded != a ? this.loadAnims(a) : gc.precacheConfig(this._configLoaded);
          b = null;
          if ((d == null || !!d.noteSplashData.useRGBShader) && (z.SONG == null || !z.SONG.disableNoteRGB)) {
            if (d == null || d.noteSplashData.useGlobalShader) {
              b = Ta.globalRgbShaders[c];
            } else {
              if (d.noteSplashData.r != -1) {
                d.rgbShader.set_r(d.noteSplashData.r);
              }
              if (d.noteSplashData.g != -1) {
                d.rgbShader.set_g(d.noteSplashData.g);
              }
              if (d.noteSplashData.b != -1) {
                d.rgbShader.set_b(d.noteSplashData.b);
              }
              b = d.rgbShader.parent;
            }
          }
          this.set_alpha(C.data.splashAlpha);
          if (d != null) {
            this.set_alpha(d.noteSplashData.a);
          }
          this.rgbShader.copyValues(b);
          if (d != null) {
            this.set_antialiasing(d.noteSplashData.antialiasing);
          }
          if (!!z.get_isPixelStage() || !C.data.antialiasing) {
            this.set_antialiasing(false);
          }
          this._textureLoaded = a;
          d = this.offset;
          a = 50;
          b = 40;
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          d.set_x(a);
          d.set_y(b);
          d = g.random.int(1, this.maxAnims);
          this.animation.play("note" + c + "-" + d, true);
          a = 22;
          b = 26;
          if (e != null) {
            c = e.offsets[jc.wrap(c + (d - 1) * Ta.colArray.length, 0, e.offsets.length - 1)];
            this.offset.set_x(this.offset.x + c[0]);
            this.offset.set_y(this.offset.y + c[1]);
            a = e.minFps;
            b = e.maxFps;
          } else {
            this.offset.set_x(this.offset.x + -58);
            this.offset.set_y(this.offset.y + -55);
          }
          if (this.animation._curAnim != null) {
            this.animation._curAnim.set_frameRate(g.random.int(a, b));
          }
        },
        loadAnims: function (a, b) {
          this.maxAnims = 0;
          var c = null;
          var d = E.image(a, c, true);
          this.set_frames(Sa.fromSparrow(d, E.getPath("images/" + a + ".xml", null, c)));
          if (this.frames == null) {
            a = gc.defaultNoteSplash + gc.getSplashSkinPostfix();
            c = null;
            d = E.image(a, c, true);
            this.set_frames(Sa.fromSparrow(d, E.getPath("images/" + a + ".xml", null, c)));
            if (this.frames == null) {
              a = gc.defaultNoteSplash;
              c = null;
              d = E.image(a, c, true);
              this.set_frames(Sa.fromSparrow(d, E.getPath("images/" + a + ".xml", null, c)));
            }
          }
          c = gc.precacheConfig(a);
          this._configLoaded = a;
          for (b == null && (b = c != null ? c.anim : "note impact");;) {
            a = this.maxAnims + 1;
            d = 0;
            for (var e = Ta.colArray.length; d < e;) {
              var f = d++;
              if (!this.addAnimAndCheck("note" + f + "-" + a, "" + b + " " + a + " " + Ta.colArray[f], 24, false)) {
                return c;
              }
            }
            this.maxAnims++;
          }
        },
        addAnimAndCheck: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 24;
          }
          var e = [];
          this.animation.findByPrefix(e, b);
          if (e.length < 1) {
            return false;
          }
          this.animation.addByPrefix(a, b, c, d);
          return true;
        },
        update: function (a) {
          gc.aliveTime += a;
          if (this.animation._curAnim != null && this.animation._curAnim.finished || this.animation._curAnim == null && gc.aliveTime >= gc.buggedKillTime) {
            this.kill();
          }
          G.prototype.update.call(this, a);
        },
        __class__: gc
      });
      function Io() {
        this.shader = new km();
        this.shader.r.value = [0, 0, 0];
        this.shader.g.value = [0, 0, 0];
        this.shader.b.value = [0, 0, 0];
        this.shader.mult.value = [1];
        var a = 1;
        if (z.get_isPixelStage()) {
          a = z.daPixelZoom;
        }
        this.shader.uBlocksize.value = [a, a];
      }
      h["objects.PixelSplashShaderRef"] = Io;
      Io.__name__ = "objects.PixelSplashShaderRef";
      Io.prototype = {
        copyValues: function (a) {
          var b = false;
          if (a != null) {
            b = true;
          }
          if (b) {
            this.shader.r.value[0] = a.shader.r.value[0];
            this.shader.g.value[0] = a.shader.g.value[0];
            this.shader.b.value[0] = a.shader.b.value[0];
            this.shader.r.value[1] = a.shader.r.value[1];
            this.shader.g.value[1] = a.shader.g.value[1];
            this.shader.b.value[1] = a.shader.b.value[1];
            this.shader.r.value[2] = a.shader.r.value[2];
            this.shader.g.value[2] = a.shader.g.value[2];
            this.shader.b.value[2] = a.shader.b.value[2];
            this.shader.mult.value[0] = a.shader.mult.value[0];
          } else {
            this.shader.mult.value[0] = 0;
          }
        },
        __class__: Io
      };
      function km() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t#pragma header\n\t\t\n\t\tuniform vec3 r;\n\t\tuniform vec3 g;\n\t\tuniform vec3 b;\n\t\tuniform float mult;\n\t\tuniform vec2 uBlocksize;\n\n\t\tvec4 flixel_texture2DCustom(sampler2D bitmap, vec2 coord) {\n\t\t\tvec2 blocks = openfl_TextureSize / uBlocksize;\n\t\t\tvec4 color = flixel_texture2D(bitmap, floor(coord * blocks) / blocks);\n\t\t\tif (!hasTransform) {\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif(color.a == 0.0 || mult == 0.0) {\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tvec4 newColor = color;\n\t\t\tnewColor.rgb = min(color.r * r + color.g * g + color.b * b, vec3(1.0));\n\t\t\tnewColor.a = color.a;\n\t\t\t\n\t\t\tcolor = mix(color, newColor, mult);\n\t\t\t\n\t\t\tif(color.a > 0.0) {\n\t\t\t\treturn vec4(color.rgb, color.a);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = flixel_texture2DCustom(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        Vd.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["objects.PixelSplashShader"] = km;
      km.__name__ = "objects.PixelSplashShader";
      km.__super__ = Vd;
      km.prototype = q(Vd.prototype, {
        __class__: km
      });
      function ah(a, b, c, d) {
        this.useRGBShader = true;
        this.texture = null;
        this.sustainReduce = true;
        this.downScroll = false;
        this.direction = 90;
        this.resetAnim = this.noteData = 0;
        this.animation = new ph(this);
        this.rgbShader = new im(this, Ta.initializeGlobalRGBShader(c));
        this.rgbShader.set_enabled(false);
        if (z.SONG != null && z.SONG.disableNoteRGB) {
          this.useRGBShader = false;
        }
        var e = C.data.arrowRGB[c];
        if (z.get_isPixelStage()) {
          e = C.data.arrowRGBPixel[c];
        }
        if (c <= e.length) {
          this.rgbShader.set_r(e[0]);
          this.rgbShader.set_g(e[1]);
          this.rgbShader.set_b(e[2]);
        }
        this.player = d;
        this.noteData = c;
        G.call(this, a, b);
        a = z.SONG != null && z.SONG.arrowSkin != null && z.SONG.arrowSkin.length > 1 ? z.SONG.arrowSkin : Ta.defaultNoteSkin;
        b = a + Ta.getNoteSkinPostfix();
        if (E.fileExists("images/" + b + ".png", "IMAGE")) {
          a = b;
        }
        this.set_texture(a);
        a = this.scrollFactor;
        a.set_x(0);
        a.set_y(0);
      }
      h["objects.StrumNote"] = ah;
      ah.__name__ = "objects.StrumNote";
      ah.__super__ = G;
      ah.prototype = q(G.prototype, {
        set_texture: function (a) {
          if (this.texture != a) {
            this.texture = a;
            this.reloadNote();
          }
          return a;
        },
        reloadNote: function () {
          var a = null;
          if (this.animation._curAnim != null) {
            a = this.animation._curAnim.name;
          }
          if (z.get_isPixelStage()) {
            this.loadGraphic(E.image("pixelUI/" + this.texture));
            this.set_width(this.get_width() / 4);
            this.set_height(this.get_height() / 5);
            this.loadGraphic(E.image("pixelUI/" + this.texture), true, Math.floor(this.get_width()), Math.floor(this.get_height()));
            this.set_antialiasing(false);
            this.setGraphicSize(this.get_width() * z.daPixelZoom | 0);
            this.animation.add("green", [6]);
            this.animation.add("red", [7]);
            this.animation.add("blue", [5]);
            this.animation.add("purple", [4]);
            switch (Math.abs(this.noteData) % 4) {
              case 0:
                this.animation.add("static", [0]);
                this.animation.add("pressed", [4, 8], 12, false);
                this.animation.add("confirm", [12, 16], 24, false);
                break;
              case 1:
                this.animation.add("static", [1]);
                this.animation.add("pressed", [5, 9], 12, false);
                this.animation.add("confirm", [13, 17], 24, false);
                break;
              case 2:
                this.animation.add("static", [2]);
                this.animation.add("pressed", [6, 10], 12, false);
                this.animation.add("confirm", [14, 18], 12, false);
                break;
              case 3:
                this.animation.add("static", [3]);
                this.animation.add("pressed", [7, 11], 12, false);
                this.animation.add("confirm", [15, 19], 24, false);
            }
          } else {
            var b = this.texture;
            var c = E.image(b, null, true);
            this.set_frames(Sa.fromSparrow(c, E.getPath("images/" + b + ".xml", null, null)));
            this.animation.addByPrefix("green", "arrowUP");
            this.animation.addByPrefix("blue", "arrowDOWN");
            this.animation.addByPrefix("purple", "arrowLEFT");
            this.animation.addByPrefix("red", "arrowRIGHT");
            this.set_antialiasing(C.data.antialiasing);
            this.setGraphicSize(this.get_width() * 0.7 | 0);
            switch (Math.abs(this.noteData) % 4) {
              case 0:
                this.animation.addByPrefix("static", "arrowLEFT");
                this.animation.addByPrefix("pressed", "left press", 24, false);
                this.animation.addByPrefix("confirm", "left confirm", 24, false);
                break;
              case 1:
                this.animation.addByPrefix("static", "arrowDOWN");
                this.animation.addByPrefix("pressed", "down press", 24, false);
                this.animation.addByPrefix("confirm", "down confirm", 24, false);
                break;
              case 2:
                this.animation.addByPrefix("static", "arrowUP");
                this.animation.addByPrefix("pressed", "up press", 24, false);
                this.animation.addByPrefix("confirm", "up confirm", 24, false);
                break;
              case 3:
                this.animation.addByPrefix("static", "arrowRIGHT");
                this.animation.addByPrefix("pressed", "right press", 24, false);
                this.animation.addByPrefix("confirm", "right confirm", 24, false);
            }
          }
          this.updateHitbox();
          if (a != null) {
            this.playAnim(a, true);
          }
        },
        postAddedToGroup: function () {
          this.playAnim("static");
          this.set_x(this.x + Ta.swagWidth * this.noteData);
          this.set_x(this.x + 50);
          this.set_x(this.x + g.width / 2 * this.player);
          this.ID = this.noteData;
        },
        update: function (a) {
          if (this.resetAnim > 0) {
            this.resetAnim -= a;
            if (this.resetAnim <= 0) {
              this.playAnim("static");
              this.resetAnim = 0;
            }
          }
          G.prototype.update.call(this, a);
        },
        playAnim: function (a, b) {
          if (b == null) {
            b = false;
          }
          this.animation.play(a, b);
          if (this.animation._curAnim != null) {
            this.centerOffsets();
            a = this.origin;
            b = this.frameWidth * 0.5;
            var c = this.frameHeight * 0.5;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
          }
          if (this.useRGBShader) {
            this.rgbShader.set_enabled(this.animation._curAnim != null && this.animation._curAnim.name != "static");
          }
        },
        __class__: ah,
        __properties__: q(G.prototype.__properties__, {
          set_texture: "set_texture"
        })
      });
      function Wh(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0.05;
        }
        if (c == null) {
          c = "";
        }
        this._timeToUpdate = 0;
        this._curLetter = -1;
        this.volume = 1;
        this.sound = "dialogue";
        this.delay = 0.05;
        this.finishedText = false;
        this.onFinish = null;
        bc.call(this, a, b, c, e);
        this.delay = d;
      }
      h["objects.TypedAlphabet"] = Wh;
      Wh.__name__ = "objects.TypedAlphabet";
      Wh.__super__ = bc;
      Wh.prototype = q(bc.prototype, {
        set_text: function (a) {
          bc.prototype.set_text.call(this, a);
          this.resetDialogue();
          return a;
        },
        update: function (a) {
          if (!this.finishedText) {
            var b = false;
            for (this._timeToUpdate += a; this._timeToUpdate >= this.delay;) {
              this.showCharacterUpTo(this._curLetter + 1);
              if (!b && this.sound != "" && (this.delay > 0.025 || this._curLetter % 2 == 0)) {
                g.sound.play(E.sound(this.sound), this.volume);
              }
              b = true;
              this._curLetter++;
              if (this._curLetter >= this.letters.length - 1) {
                this.finishedText = true;
                if (this.onFinish != null) {
                  this.onFinish();
                }
                this._timeToUpdate = 0;
                break;
              }
              this._timeToUpdate = 0;
            }
          }
          bc.prototype.update.call(this, a);
        },
        showCharacterUpTo: function (a) {
          var b = this._curLetter;
          if (b < 0) {
            b = 0;
          }
          for (a += 1; b < a;) {
            var c = b++;
            if (this.letters[c] != null) {
              this.letters[c].set_visible(true);
            }
          }
        },
        resetDialogue: function () {
          this._curLetter = -1;
          this.finishedText = false;
          for (var a = this._timeToUpdate = 0, b = this.letters; a < b.length;) {
            var c = b[a];
            ++a;
            c.set_visible(false);
          }
        },
        finishText: function () {
          if (!this.finishedText) {
            this.showCharacterUpTo(this.letters.length - 1);
            if (this.sound != "") {
              g.sound.play(E.sound(this.sound), this.volume);
            }
            this.finishedText = true;
            if (this.onFinish != null) {
              this.onFinish();
            }
            this._timeToUpdate = 0;
          }
        },
        __class__: Wh
      });
      function ia() {}
      h["openfl.Lib"] = ia;
      ia.__name__ = "openfl.Lib";
      ia.__properties__ = {
        get_current: "get_current"
      };
      ia.getTimer = function () {
        return bd.getTimer();
      };
      ia.getURL = function (a, b) {
        ia.navigateToURL(a, b);
      };
      ia.navigateToURL = function (a, b) {
        if (b == null) {
          b = "_blank";
        }
        var c = a.url;
        if (yb.typeof(a.data) == Ec.TObject) {
          var d = "";
          for (var e = ha.fields(a.data), f = 0; f < e.length;) {
            var k = e[f];
            ++f;
            if (d.length > 0) {
              d += "&";
            }
            var g = encodeURIComponent(k) + "=";
            k = y.string(ha.field(a.data, k));
            d += g + encodeURIComponent(k);
          }
          c = c.indexOf("?") > -1 ? c + ("&" + d) : c + ("?" + d);
        }
        bd.openURL(c, b);
      };
      ia.setTimeout = function (a, b, c) {
        var d = ++ia.__lastTimerID;
        var e = ia.__timers;
        b = jg.delay(function () {
          ia.__timers.remove(d);
          if (ia.get_current() != null && ia.get_current().stage != null && ia.get_current().stage.__uncaughtErrorEvents.__enabled) {
            try {
              a.apply(a, c == null ? [] : c);
            } catch (k) {
              Oa.lastError = k;
              var b = I.caught(k).unwrap();
              ia.get_current().stage.__handleError(b);
            }
          } else {
            a.apply(a, c == null ? [] : c);
          }
        }, b);
        e.h[d] = b;
        return d;
      };
      ia.get_current = function () {
        if (xd.current == null) {
          xd.current = new Oj();
        }
        return xd.current;
      };
      function yg() {}
      h["openfl._Vector.IVector"] = yg;
      yg.__name__ = "openfl._Vector.IVector";
      yg.__isInterface__ = true;
      yg.prototype = {
        __class__: yg
      };
      function lm(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.BoolVector"] = lm;
      lm.__name__ = "openfl._Vector.BoolVector";
      lm.__interfaces__ = [yg];
      lm.prototype = {
        toJSON: function () {
          return this.__array;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = false;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: lm,
        __properties__: {
          set_length: "set_length"
        }
      };
      function Sf(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (d) {
          this.__array = [];
          if (c != null) {
            d = 0;
            for (var e = c.length; d < e;) {
              var f = d++;
              this.__array[f] = c[f];
            }
          }
        } else {
          if (c == null) {
            c = [];
          }
          this.__array = c;
        }
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.FloatVector"] = Sf;
      Sf.__name__ = "openfl._Vector.FloatVector";
      Sf.__interfaces__ = [yg];
      Sf.prototype = {
        concat: function (a) {
          if (a == null) {
            return new Sf(0, false, this.__array.slice());
          } else if (a.__array.length > 0) {
            return new Sf(0, false, this.__array.concat(a.__array));
          } else {
            return new Sf(0, false, this.__array.slice());
          }
        },
        copy: function () {
          return new Sf(0, this.fixed, this.__array.slice());
        },
        get: function (a) {
          return this.__array[a];
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new Sf(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (a != this.__array.length && !this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = 0;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: Sf,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function mm(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.FunctionVector"] = mm;
      mm.__name__ = "openfl._Vector.FunctionVector";
      mm.__interfaces__ = [yg];
      mm.prototype = {
        toJSON: function () {
          return this.__array;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = null;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: mm,
        __properties__: {
          set_length: "set_length"
        }
      };
      function Qh(a, b, c) {
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (c == null) {
          c = [];
        }
        this.__array = c;
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.IntVector"] = Qh;
      Qh.__name__ = "openfl._Vector.IntVector";
      Qh.__interfaces__ = [yg];
      Qh.prototype = {
        get: function (a) {
          return this.__array[a];
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        iterator: function () {
          return new tf(this.__array);
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new Qh(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                var c = b++;
                this.__array[c] = 0;
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: Qh,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function kh(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (b == null) {
          b = false;
        }
        if (a == null) {
          a = 0;
        }
        if (d) {
          this.__array = [];
          if (c != null) {
            d = 0;
            for (var e = c.length; d < e;) {
              var f = d++;
              this.__array[f] = c[f];
            }
          }
        } else {
          if (c == null) {
            c = [];
          }
          this.__array = c;
        }
        if (a > 0) {
          this.set_length(a);
        }
        this.fixed = b;
      }
      h["openfl._Vector.ObjectVector"] = kh;
      kh.__name__ = "openfl._Vector.ObjectVector";
      kh.__interfaces__ = [yg];
      kh.prototype = {
        get: function (a) {
          return this.__array[a];
        },
        indexOf: function (a, b) {
          if (b == null) {
            b = 0;
          }
          for (var c = this.__array.length; b < c;) {
            var d = b++;
            if (this.__array[d] == a) {
              return d;
            }
          }
          return -1;
        },
        insertAt: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            this.__array.splice(a, 0, b);
          }
        },
        iterator: function () {
          return new tf(this.__array);
        },
        push: function (a) {
          if (this.fixed) {
            return this.__array.length;
          } else {
            return this.__array.push(a);
          }
        },
        removeAt: function (a) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array.splice(a, 1)[0];
          } else {
            return null;
          }
        },
        set: function (a, b) {
          if (!this.fixed || a < this.__array.length) {
            return this.__array[a] = b;
          } else {
            return b;
          }
        },
        splice: function (a, b) {
          return new kh(0, false, this.__array.splice(a, b));
        },
        toJSON: function () {
          return this.__array;
        },
        unshift: function (a) {
          if (!this.fixed) {
            this.__array.unshift(a);
          }
        },
        get_length: function () {
          return this.__array.length;
        },
        set_length: function (a) {
          if (!this.fixed) {
            var b = this.__array.length;
            if (a < 0) {
              a = 0;
            }
            if (a > b) {
              while (b < a) {
                b++;
                this.__array.push(null);
              }
            } else {
              while (this.__array.length > a) {
                this.__array.pop();
              }
            }
          }
          return this.__array.length;
        },
        __class__: kh,
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        }
      };
      function Oi() {
        ka.call(this);
        if (xd.application == null) {
          xd.application = this;
        }
        if (xd.current == null) {
          xd.current = new Oj();
        }
        xd.current.__loaderInfo = Nf.create(null);
        xd.current.__loaderInfo.content = xd.current;
      }
      h["openfl.display.Application"] = Oi;
      Oi.__name__ = "openfl.display.Application";
      Oi.__super__ = ka;
      Oi.prototype = q(ka.prototype, {
        createWindow: function (a) {
          var b = new Pj(this, a);
          this.__windows.push(b);
          this.__windowByID.h[b.id] = b;
          var c = this;
          b.onClose.add(function () {
            c.__onWindowClose(b);
          }, false, -10000);
          if (this.__window == null) {
            this.__window = b;
            b.onActivate.add(n(this, this.onWindowActivate));
            b.onRenderContextLost.add(n(this, this.onRenderContextLost));
            b.onRenderContextRestored.add(n(this, this.onRenderContextRestored));
            b.onDeactivate.add(n(this, this.onWindowDeactivate));
            b.onDropFile.add(n(this, this.onWindowDropFile));
            b.onEnter.add(n(this, this.onWindowEnter));
            b.onExpose.add(n(this, this.onWindowExpose));
            b.onFocusIn.add(n(this, this.onWindowFocusIn));
            b.onFocusOut.add(n(this, this.onWindowFocusOut));
            b.onFullscreen.add(n(this, this.onWindowFullscreen));
            b.onKeyDown.add(n(this, this.onKeyDown));
            b.onKeyUp.add(n(this, this.onKeyUp));
            b.onLeave.add(n(this, this.onWindowLeave));
            b.onMinimize.add(n(this, this.onWindowMinimize));
            b.onMouseDown.add(n(this, this.onMouseDown));
            b.onMouseMove.add(n(this, this.onMouseMove));
            b.onMouseMoveRelative.add(n(this, this.onMouseMoveRelative));
            b.onMouseUp.add(n(this, this.onMouseUp));
            b.onMouseWheel.add(n(this, this.onMouseWheel));
            b.onMove.add(n(this, this.onWindowMove));
            b.onRender.add(n(this, this.render));
            b.onResize.add(n(this, this.onWindowResize));
            b.onRestore.add(n(this, this.onWindowRestore));
            b.onTextEdit.add(n(this, this.onTextEdit));
            b.onTextInput.add(n(this, this.onTextInput));
            this.onWindowCreate();
          }
          this.onCreateWindow.dispatch(b);
          return b;
        },
        exec: function () {
          return ka.prototype.exec.call(this);
        },
        __checkForAllWindowsClosed: function () {
          if (!(this.__windows.length > 0)) {
            ka.prototype.__checkForAllWindowsClosed.call(this);
          }
        },
        __onModuleExit: function (a) {
          if (!this.onExit.canceled) {
            if (xd.application == this) {
              xd.application = null;
            }
            ka.prototype.__onModuleExit.call(this, a);
          }
        },
        __class__: Oi
      });
      function Lc(a, b, c) {
        if (c == null) {
          c = false;
        }
        Ba.call(this);
        this.__drawableType = 2;
        this.__bitmapData = a;
        this.pixelSnapping = b;
        this.smoothing = c;
        if (b == null) {
          this.pixelSnapping = 1;
        }
      }
      h["openfl.display.Bitmap"] = Lc;
      Lc.__name__ = "openfl.display.Bitmap";
      Lc.__super__ = Ba;
      Lc.prototype = q(Ba.prototype, {
        __enterFrame: function (a) {
          if (this.__bitmapData != null && this.__bitmapData.image != null && this.__bitmapData.image.version != this.__imageVersion && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = ba.__pool.get();
          if (this.__bitmapData != null) {
            c.setTo(0, 0, this.__bitmapData.width, this.__bitmapData.height);
          } else {
            c.setTo(0, 0, 0, 0);
          }
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ba.__pool.release(c);
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.__bitmapData == null || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var k = this.__renderTransform;
          var g = k.a * k.d - k.b * k.c;
          c = g == 0 ? -k.tx : 1 / g * (k.c * (k.ty - b) + k.d * (a - k.tx));
          k = this.__renderTransform;
          g = k.a * k.d - k.b * k.c;
          a = g == 0 ? -k.ty : 1 / g * (k.a * (b - k.ty) + k.b * (k.tx - a));
          if (c > 0 && a > 0 && c <= this.__bitmapData.width && a <= this.__bitmapData.height) {
            if (this.__scrollRect != null && !this.__scrollRect.contains(c, a)) {
              return false;
            }
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          }
          return false;
        },
        __hitTestMask: function (a, b) {
          if (this.__bitmapData == null) {
            return false;
          }
          this.__getRenderTransform();
          var c = this.__renderTransform;
          var d = c.a * c.d - c.b * c.c;
          var e = d == 0 ? -c.tx : 1 / d * (c.c * (c.ty - b) + c.d * (a - c.tx));
          c = this.__renderTransform;
          d = c.a * c.d - c.b * c.c;
          a = d == 0 ? -c.ty : 1 / d * (c.a * (b - c.ty) + c.b * (c.tx - a));
          if (e > 0 && a > 0 && e <= this.__bitmapData.width && a <= this.__bitmapData.height) {
            return true;
          } else {
            return false;
          }
        },
        get_bitmapData: function () {
          return this.__bitmapData;
        },
        set_bitmapData: function (a) {
          this.__bitmapData = a;
          this.smoothing = false;
          if (!this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
          this.__imageVersion = -1;
          return this.__bitmapData;
        },
        set_height: function (a) {
          if (this.__bitmapData != null) {
            this.set_scaleY(a / this.__bitmapData.height);
          } else {
            this.set_scaleY(0);
          }
          return a;
        },
        set_width: function (a) {
          if (this.__bitmapData != null) {
            this.set_scaleX(a / this.__bitmapData.width);
          } else {
            this.set_scaleX(0);
          }
          return a;
        },
        __class__: Lc,
        __properties__: q(Ba.prototype.__properties__, {
          set_bitmapData: "set_bitmapData",
          get_bitmapData: "get_bitmapData"
        })
      });
      function be() {
        va.call(this);
        this.__allowSmoothing = true;
        this.__pixelRatio = 1;
        this.__tempColorTransform = new Ob();
        this.__worldAlpha = 1;
      }
      h["openfl.display.DisplayObjectRenderer"] = be;
      be.__name__ = "openfl.display.DisplayObjectRenderer";
      be.__super__ = va;
      be.prototype = q(va.prototype, {
        __clear: function () {},
        __getAlpha: function (a) {
          return a * this.__worldAlpha;
        },
        __popMaskObject: function (a, b) {},
        __pushMaskObject: function (a, b) {},
        __render: function (a) {},
        __renderEvent: function (a) {
          if (a.__customRenderEvent != null && a.__renderable) {
            a.__customRenderEvent.allowSmoothing = this.__allowSmoothing;
            a.__customRenderEvent.objectMatrix.copyFrom(a.__renderTransform);
            a.__customRenderEvent.objectColorTransform.__copyFrom(a.__worldColorTransform);
            a.__customRenderEvent.renderer = this;
            switch (this.__type) {
              case "cairo":
                a.__customRenderEvent.type = "renderCairo";
                break;
              case "canvas":
                a.__customRenderEvent.type = "renderCanvas";
                break;
              case "dom":
                a.__customRenderEvent.type = a.stage != null && a.__worldVisible ? "renderDOM" : "clearDOM";
                break;
              case "opengl":
                if (!this.__cleared) {
                  this.__clear();
                }
                this.setShader(a.__worldShader);
                this.__context3D.__flushGL();
                a.__customRenderEvent.type = "renderOpenGL";
                break;
              default:
                return;
            }
            this.__setBlendMode(a.__worldBlendMode);
            this.__pushMaskObject(a);
            a.dispatchEvent(a.__customRenderEvent);
            this.__popMaskObject(a);
            if (this.__type == "opengl") {
              this.setViewport();
            }
          }
        },
        __resize: function (a, b) {},
        __setBlendMode: function (a) {},
        __shouldCacheHardware: function (a, b) {
          if (a == null) {
            return null;
          }
          switch (a.__drawableType) {
            case 4:
            case 5:
              if (b == 1) {
                return true;
              }
              b = this.__shouldCacheHardware_DisplayObject(a, b);
              if (b == 1) {
                return true;
              }
              if (a.__children != null) {
                var c = 0;
                for (a = a.__children; c < a.length;) {
                  var d = a[c];
                  ++c;
                  b = this.__shouldCacheHardware_DisplayObject(d, b);
                  if (b == 1) {
                    return true;
                  }
                }
              }
              return b;
            case 7:
              if (b == 1) {
                return true;
              } else {
                return false;
              }
            case 9:
              return true;
            default:
              return this.__shouldCacheHardware_DisplayObject(a, b);
          }
        },
        __shouldCacheHardware_DisplayObject: function (a, b) {
          if (b == 1 || a.__filters != null) {
            return true;
          } else if (b == 0 || a.__graphics != null && !rc.isCompatible(a.__graphics)) {
            return false;
          } else {
            return null;
          }
        },
        __updateCacheBitmap: function (a, b) {
          if (a == null) {
            return false;
          }
          switch (a.__drawableType) {
            case 2:
              var c = a;
              if (c.__bitmapData == null || c.__filters == null && this.__type == "opengl" && c.__cacheBitmap == null) {
                return false;
              }
              b = c.__bitmapData.image != null && c.__bitmapData.image.version != c.__imageVersion;
              break;
            case 7:
              var d = a;
              if (d.__filters == null && this.__type == "opengl" && d.__cacheBitmap == null && !d.__domRender) {
                return false;
              }
              if (b) {
                d.__renderDirty = true;
              }
              b = b || d.__dirty;
              break;
            case 9:
              if (a.__filters == null && this.__type == "opengl" && a.__cacheBitmap == null) {
                return false;
              }
          }
          if (a.__isCacheBitmapRender) {
            return false;
          }
          d = Ob.__pool.get();
          d.__copyFrom(a.__worldColorTransform);
          if (this.__worldColorTransform != null) {
            d.__combine(this.__worldColorTransform);
          }
          var e = false;
          if (a.get_cacheAsBitmap() || this.__type != "opengl" && !d.__isDefault(true)) {
            e = null;
            var f = (b = a.__cacheBitmap == null || a.__renderDirty && (b || a.__children != null && a.__children.length > 0) || a.opaqueBackground != a.__cacheBitmapBackground) || a.__graphics != null && a.__graphics.__softwareDirty || !a.__cacheBitmapColorTransform.__equals(d, true);
            var k = b || a.__graphics != null && a.__graphics.__hardwareDirty;
            var g = this.__type;
            if (f || k) {
              if (g == "opengl" && this.__shouldCacheHardware(a, null) == 0) {
                g = "canvas";
              }
              if (!!f && (g == "canvas" || g == "cairo")) {
                b = true;
              }
              if (k && g == "opengl") {
                b = true;
              }
            }
            f = b || !a.__cacheBitmap.__worldTransform.equals(a.__worldTransform);
            c = a.__filters != null;
            if (this.__type == "dom" && !c) {
              return false;
            }
            if (c && !b) {
              for (var l = 0, h = a.__filters; l < h.length;) {
                var p = h[l];
                ++l;
                if (p.__renderDirty) {
                  b = true;
                  break;
                }
              }
            }
            if (a.__cacheBitmapMatrix == null) {
              a.__cacheBitmapMatrix = new ya();
            }
            l = a.__cacheAsBitmapMatrix ?? a.__renderTransform;
            if (!b && (l.a != a.__cacheBitmapMatrix.a || l.b != a.__cacheBitmapMatrix.b || l.c != a.__cacheBitmapMatrix.c || l.d != a.__cacheBitmapMatrix.d)) {
              b = true;
            }
            if (!b && this.__type != "opengl" && a.__cacheBitmapData != null && a.__cacheBitmapData.image != null && a.__cacheBitmapData.image.version < a.__cacheBitmapData.__textureVersion) {
              b = true;
            }
            if (!b) {
              for (k = a; k != null;) {
                if (k.get_scrollRect() != null) {
                  f = true;
                  break;
                }
                k = k.parent;
              }
            }
            a.__cacheBitmapMatrix.copyFrom(l);
            a.__cacheBitmapMatrix.tx = 0;
            var m = k = a.__cacheBitmapMatrix.ty = 0;
            var n = 0;
            var r = 0;
            var q = p = 0;
            h = this.__pixelRatio;
            if (f || b) {
              e = ba.__pool.get();
              a.__getFilterBounds(e, a.__cacheBitmapMatrix);
              n = e.width > 0 ? Math.ceil((e.width + 1) * h) : 0;
              r = e.height > 0 ? Math.ceil((e.height + 1) * h) : 0;
              p = e.x > 0 ? Math.ceil(e.x) : Math.floor(e.x);
              q = e.y > 0 ? Math.ceil(e.y) : Math.floor(e.y);
              if (a.__cacheBitmapData != null) {
                if (n > a.__cacheBitmapData.width || r > a.__cacheBitmapData.height) {
                  k = Math.ceil(Math.max(n * 1.25, a.__cacheBitmapData.width));
                  m = Math.ceil(Math.max(r * 1.25, a.__cacheBitmapData.height));
                  b = true;
                } else {
                  k = a.__cacheBitmapData.width;
                  m = a.__cacheBitmapData.height;
                }
              } else {
                k = n;
                m = r;
              }
            }
            if (b) {
              f = true;
              a.__cacheBitmapBackground = a.opaqueBackground;
              if (n >= 0.5 && r >= 0.5) {
                var w = a.opaqueBackground != null && (k != n || m != r);
                var u = a.opaqueBackground != null ? a.opaqueBackground | -16777216 : 0;
                var v = w ? 0 : u;
                var A = this.__type == "opengl";
                if (a.__cacheBitmapData == null || k > a.__cacheBitmapData.width || m > a.__cacheBitmapData.height) {
                  a.__cacheBitmapData = new N(k, m, true, v);
                  if (a.__cacheBitmap == null) {
                    a.__cacheBitmap = new Lc();
                  }
                  a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                  a.__cacheBitmapRenderer = null;
                } else {
                  a.__cacheBitmapData.__fillRect(a.__cacheBitmapData.rect, v, A);
                }
                if (w) {
                  e.setTo(0, 0, n, r);
                  a.__cacheBitmapData.__fillRect(e, u, A);
                }
              } else {
                Ob.__pool.release(d);
                a.__cacheBitmap = null;
                a.__cacheBitmapData = null;
                a.__cacheBitmapData2 = null;
                a.__cacheBitmapData3 = null;
                a.__cacheBitmapRenderer = null;
                if (a.__drawableType == 7) {
                  d = a;
                  if (d.__cacheBitmap != null) {
                    d.__cacheBitmap.__renderTransform.tx -= d.__offsetX * h;
                    d.__cacheBitmap.__renderTransform.ty -= d.__offsetY * h;
                  }
                }
                return true;
              }
            } else {
              a.__cacheBitmapData = a.__cacheBitmap.get_bitmapData();
              a.__cacheBitmapData2 = null;
              a.__cacheBitmapData3 = null;
            }
            if (f || b) {
              a.__cacheBitmap.__worldTransform.copyFrom(a.__worldTransform);
              if (l == a.__renderTransform) {
                a.__cacheBitmap.__renderTransform.identity();
                a.__cacheBitmap.__renderTransform.scale(1 / h, 1 / h);
                a.__cacheBitmap.__renderTransform.tx = a.__renderTransform.tx + p;
                a.__cacheBitmap.__renderTransform.ty = a.__renderTransform.ty + q;
              } else {
                a.__cacheBitmap.__renderTransform.copyFrom(a.__cacheBitmapMatrix);
                a.__cacheBitmap.__renderTransform.invert();
                a.__cacheBitmap.__renderTransform.concat(a.__renderTransform);
                a.__cacheBitmap.__renderTransform.a *= 1 / h;
                a.__cacheBitmap.__renderTransform.d *= 1 / h;
                a.__cacheBitmap.__renderTransform.tx += p;
                a.__cacheBitmap.__renderTransform.ty += q;
              }
            }
            a.__cacheBitmap.smoothing = this.__allowSmoothing;
            a.__cacheBitmap.__renderable = a.__renderable;
            a.__cacheBitmap.__worldAlpha = a.__worldAlpha;
            a.__cacheBitmap.__worldBlendMode = a.__worldBlendMode;
            a.__cacheBitmap.__worldShader = a.__worldShader;
            a.__cacheBitmap.set_mask(a.__mask);
            if (b) {
              if (a.__cacheBitmapRenderer == null || g != a.__cacheBitmapRenderer.__type) {
                if (g == "opengl") {
                  a.__cacheBitmapRenderer = new tb(wa.__cast(this, tb).__context3D, a.__cacheBitmapData);
                } else {
                  if (a.__cacheBitmapData.image == null) {
                    a.__cacheBitmapData = new N(k, m, true, a.opaqueBackground != null ? a.opaqueBackground | -16777216 : 0);
                    a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                  }
                  Wa.convertToCanvas(a.__cacheBitmapData.image);
                  a.__cacheBitmapRenderer = new og(a.__cacheBitmapData.image.buffer.__srcContext);
                }
                a.__cacheBitmapRenderer.__worldTransform = new ya();
                a.__cacheBitmapRenderer.__worldColorTransform = new Ob();
              }
              if (a.__cacheBitmapColorTransform == null) {
                a.__cacheBitmapColorTransform = new Ob();
              }
              a.__cacheBitmapRenderer.__stage = a.stage;
              a.__cacheBitmapRenderer.__allowSmoothing = this.__allowSmoothing;
              a.__cacheBitmapRenderer.__setBlendMode(10);
              a.__cacheBitmapRenderer.__worldAlpha = 1 / a.__worldAlpha;
              a.__cacheBitmapRenderer.__worldTransform.copyFrom(a.__renderTransform);
              a.__cacheBitmapRenderer.__worldTransform.invert();
              a.__cacheBitmapRenderer.__worldTransform.concat(a.__cacheBitmapMatrix);
              a.__cacheBitmapRenderer.__worldTransform.tx -= p;
              a.__cacheBitmapRenderer.__worldTransform.ty -= q;
              a.__cacheBitmapRenderer.__worldTransform.scale(h, h);
              a.__cacheBitmapRenderer.__pixelRatio = h;
              a.__cacheBitmapRenderer.__worldColorTransform.__copyFrom(d);
              a.__cacheBitmapRenderer.__worldColorTransform.__invert();
              a.__isCacheBitmapRender = true;
              if (a.__cacheBitmapRenderer.__type == "opengl") {
                w = a.__cacheBitmapRenderer;
                u = w.__context3D;
                v = u.__state.renderToTexture;
                A = u.__state.renderToTextureDepthStencil;
                var y = u.__state.renderToTextureAntiAlias;
                var z = u.__state.renderToTextureSurfaceSelector;
                var Y = this.__blendMode;
                this.__suspendClipAndMask();
                w.__copyShader(this);
                a.__cacheBitmapData.__setUVRect(u, 0, 0, n, r);
                w.__setRenderTarget(a.__cacheBitmapData);
                if (a.__cacheBitmapData.image != null) {
                  a.__cacheBitmapData.__textureVersion = a.__cacheBitmapData.image.version + 1;
                }
                a.__cacheBitmapData.__drawGL(a, w);
                if (c) {
                  var C = false;
                  l = 0;
                  for (h = a.__filters; l < h.length;) {
                    p = h[l];
                    ++l;
                    if (p.__preserveObject) {
                      C = true;
                    }
                  }
                  c = a.__cacheBitmapData;
                  q = null;
                  if (a.__cacheBitmapData2 == null || k > a.__cacheBitmapData2.width || m > a.__cacheBitmapData2.height) {
                    a.__cacheBitmapData2 = new N(k, m, true, 0);
                  } else {
                    a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0);
                    if (a.__cacheBitmapData2.image != null) {
                      a.__cacheBitmapData2.__textureVersion = a.__cacheBitmapData2.image.version + 1;
                    }
                  }
                  a.__cacheBitmapData2.__setUVRect(u, 0, 0, n, r);
                  g = a.__cacheBitmapData2;
                  if (C) {
                    if (a.__cacheBitmapData3 == null || k > a.__cacheBitmapData3.width || m > a.__cacheBitmapData3.height) {
                      a.__cacheBitmapData3 = new N(k, m, true, 0);
                    } else {
                      a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0);
                      if (a.__cacheBitmapData3.image != null) {
                        a.__cacheBitmapData3.__textureVersion = a.__cacheBitmapData3.image.version + 1;
                      }
                    }
                    a.__cacheBitmapData3.__setUVRect(u, 0, 0, n, r);
                    q = a.__cacheBitmapData3;
                  }
                  w.__setBlendMode(10);
                  w.__worldAlpha = 1;
                  w.__worldTransform.identity();
                  w.__worldColorTransform.__identity();
                  l = 0;
                  for (h = a.__filters; l < h.length;) {
                    p = h[l];
                    ++l;
                    if (p.__preserveObject) {
                      w.__setRenderTarget(q);
                      w.__renderFilterPass(c, w.__defaultDisplayShader, p.__smooth);
                    }
                    m = 0;
                    for (n = p.__numShaderPasses; m < n;) {
                      k = m++;
                      k = p.__initShader(w, k, p.__preserveObject ? q : null);
                      w.__setBlendMode(p.__shaderBlendMode);
                      w.__setRenderTarget(g);
                      w.__renderFilterPass(c, k, p.__smooth);
                      k = c;
                      c = g;
                      g = k;
                    }
                    p.__renderDirty = false;
                  }
                  a.__cacheBitmap.__bitmapData = c;
                }
                this.__blendMode = 10;
                this.__setBlendMode(Y);
                this.__copyShader(w);
                if (v != null) {
                  u.setRenderToTexture(v, A, y, z);
                } else {
                  u.setRenderToBackBuffer();
                }
                this.__resumeClipAndMask(w);
                this.setViewport();
                a.__cacheBitmapColorTransform.__copyFrom(d);
              } else {
                a.__cacheBitmapData.__drawCanvas(a, a.__cacheBitmapRenderer);
                if (c) {
                  C = n = false;
                  l = 0;
                  for (h = a.__filters; l < h.length;) {
                    p = h[l];
                    ++l;
                    if (p.__needSecondBitmapData) {
                      n = true;
                    }
                    if (p.__preserveObject) {
                      C = true;
                    }
                  }
                  c = a.__cacheBitmapData;
                  q = null;
                  if (n) {
                    if (a.__cacheBitmapData2 == null || a.__cacheBitmapData2.image == null || k > a.__cacheBitmapData2.width || m > a.__cacheBitmapData2.height) {
                      a.__cacheBitmapData2 = new N(k, m, true, 0);
                    } else {
                      a.__cacheBitmapData2.fillRect(a.__cacheBitmapData2.rect, 0);
                    }
                    g = a.__cacheBitmapData2;
                  } else {
                    g = c;
                  }
                  if (C) {
                    if (a.__cacheBitmapData3 == null || a.__cacheBitmapData3.image == null || k > a.__cacheBitmapData3.width || m > a.__cacheBitmapData3.height) {
                      a.__cacheBitmapData3 = new N(k, m, true, 0);
                    } else {
                      a.__cacheBitmapData3.fillRect(a.__cacheBitmapData3.rect, 0);
                    }
                    q = a.__cacheBitmapData3;
                  }
                  if (a.__tempPoint == null) {
                    a.__tempPoint = new ob();
                  }
                  m = a.__tempPoint;
                  l = 0;
                  for (h = a.__filters; l < h.length;) {
                    p = h[l];
                    ++l;
                    if (p.__preserveObject) {
                      q.copyPixels(c, c.rect, m);
                    }
                    k = p.__applyFilter(g, c, c.rect, m);
                    if (p.__preserveObject) {
                      k.draw(q, null, a.__objectTransform != null ? a.__objectTransform.__colorTransform : null);
                    }
                    p.__renderDirty = false;
                    if (n && k == g) {
                      k = c;
                      c = g;
                      g = k;
                    }
                  }
                  if (a.__cacheBitmapData != c) {
                    k = a.__cacheBitmapData;
                    a.__cacheBitmapData = c;
                    a.__cacheBitmapData2 = k;
                    a.__cacheBitmap.__bitmapData = a.__cacheBitmapData;
                    a.__cacheBitmapRenderer = null;
                  }
                  a.__cacheBitmap.__imageVersion = a.__cacheBitmapData.__textureVersion;
                }
                a.__cacheBitmapColorTransform.__copyFrom(d);
                if (!a.__cacheBitmapColorTransform.__isDefault(true)) {
                  a.__cacheBitmapColorTransform.alphaMultiplier = 1;
                  a.__cacheBitmapData.colorTransform(a.__cacheBitmapData.rect, a.__cacheBitmapColorTransform);
                }
              }
              a.__isCacheBitmapRender = false;
            }
            if (f || b) {
              ba.__pool.release(e);
            }
            e = f;
          } else if (a.__cacheBitmap != null) {
            if (this.__type == "dom") {
              this.__renderDrawableClear(a.__cacheBitmap);
            }
            a.__cacheBitmap = null;
            a.__cacheBitmapData = null;
            a.__cacheBitmapData2 = null;
            a.__cacheBitmapData3 = null;
            a.__cacheBitmapColorTransform = null;
            a.__cacheBitmapRenderer = null;
            e = true;
          }
          Ob.__pool.release(d);
          if (e && a.__drawableType == 7) {
            d = a;
            if (d.__cacheBitmap != null) {
              d.__cacheBitmap.__renderTransform.tx -= d.__offsetX;
              d.__cacheBitmap.__renderTransform.ty -= d.__offsetY;
            }
          }
          return e;
        },
        __class__: be
      });
      function nm(a) {
        be.call(this);
      }
      h["openfl.display.CairoRenderer"] = nm;
      nm.__name__ = "openfl.display.CairoRenderer";
      nm.__super__ = be;
      nm.prototype = q(be.prototype, {
        applyMatrix: function (a, b) {
          if (b == null) {
            b = this.cairo;
          }
          this.__matrix.copyFrom(a);
          if (this.cairo == b && this.__worldTransform != null) {
            this.__matrix.concat(this.__worldTransform);
          }
          this.__matrix3.a = this.__matrix.a;
          this.__matrix3.b = this.__matrix.b;
          this.__matrix3.c = this.__matrix.c;
          this.__matrix3.d = this.__matrix.d;
          if (this.__roundPixels) {
            this.__matrix3.tx = Math.round(this.__matrix.tx);
            this.__matrix3.ty = Math.round(this.__matrix.ty);
          } else {
            this.__matrix3.tx = this.__matrix.tx;
            this.__matrix3.ty = this.__matrix.ty;
          }
          b.set_matrix(this.__matrix3);
        },
        __clear: function () {
          if (this.cairo != null && (this.cairo.identityMatrix(), this.__stage != null && this.__stage.__clearBeforeRender)) {
            var a = this.__blendMode;
            this.__setBlendMode(10);
            this.cairo.setSourceRGB(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2]);
            this.cairo.paint();
            this.__setBlendMode(a);
          }
        },
        __popMask: function () {
          this.cairo.restore();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          this.cairo.restore();
        },
        __pushMask: function (a) {
          this.cairo.save();
          this.applyMatrix(a.__renderTransform, this.cairo);
          this.cairo.newPath();
          this.__renderDrawableMask(a);
          this.cairo.clip();
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          this.cairo.save();
          this.applyMatrix(b, this.cairo);
          this.cairo.newPath();
          this.cairo.rectangle(a.x, a.y, a.width, a.height);
          this.cairo.clip();
        },
        __render: function (a) {
          if (this.cairo != null) {
            this.__renderDrawable(a);
          }
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 6:
                if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
                  this.__pushMaskObject(a);
                  this.__renderDrawable(a.__currentState);
                  this.__popMaskObject(a);
                  this.__renderEvent(a);
                }
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                this.cairo.rectangle(0, 0, a.get_width(), a.get_height());
                break;
              case 6:
                this.__renderDrawableMask(a.__currentState);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            this.__setBlendModeCairo(this.cairo, a);
          }
        },
        __setBlendModeCairo: function (a, b) {
          switch (b) {
            case 0:
              a.setOperator(12);
              break;
            case 2:
              a.setOperator(17);
              break;
            case 3:
              a.setOperator(23);
              break;
            case 5:
              a.setOperator(21);
              break;
            case 7:
              a.setOperator(2);
              break;
            case 8:
              a.setOperator(18);
              break;
            case 9:
              a.setOperator(14);
              break;
            case 11:
              a.setOperator(16);
              break;
            case 12:
              a.setOperator(15);
              break;
            default:
              a.setOperator(2);
          }
        },
        __class__: nm
      });
      function og(a) {
        be.call(this);
        this.context = a;
        this.__tempMatrix = new ya();
        this.__type = "canvas";
      }
      h["openfl.display.CanvasRenderer"] = og;
      og.__name__ = "openfl.display.CanvasRenderer";
      og.__super__ = be;
      og.prototype = q(be.prototype, {
        applySmoothing: function (a, b) {
          a.imageSmoothingEnabled = b;
        },
        setTransform: function (a, b) {
          if (b == null) {
            b = this.context;
          } else if (this.context == b && this.__worldTransform != null) {
            this.__tempMatrix.copyFrom(a);
            this.__tempMatrix.concat(this.__worldTransform);
            a = this.__tempMatrix;
          }
          if (this.__roundPixels) {
            b.setTransform(a.a, a.b, a.c, a.d, a.tx | 0, a.ty | 0);
          } else {
            b.setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
          }
        },
        __clear: function () {
          if (this.__stage != null) {
            var a = this.__blendMode;
            this.__blendMode = null;
            this.__setBlendMode(10);
            this.context.setTransform(1, 0, 0, 1, 0, 0);
            this.context.globalAlpha = 1;
            if (!this.__stage.__transparent && this.__stage.__clearBeforeRender) {
              this.context.fillStyle = this.__stage.__colorString;
              this.context.fillRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
            } else if (this.__stage.__transparent && this.__stage.__clearBeforeRender) {
              this.context.clearRect(0, 0, this.__stage.stageWidth * this.__stage.window.__scale, this.__stage.stageHeight * this.__stage.window.__scale);
            }
            this.__setBlendMode(a);
          }
        },
        __popMask: function () {
          this.context.restore();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          this.context.restore();
        },
        __pushMask: function (a) {
          this.context.save();
          this.setTransform(a.__renderTransform, this.context);
          this.context.beginPath();
          this.__renderDrawableMask(a);
          this.context.closePath();
          this.context.clip();
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (!a.__isCacheBitmapRender && a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          this.context.save();
          this.setTransform(b, this.context);
          this.context.beginPath();
          this.context.rect(a.x, a.y, a.width, a.height);
          this.context.clip();
        },
        __render: function (a) {
          this.__renderDrawable(a);
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                om.renderDrawable(a, this);
                break;
              case 2:
                Qj.renderDrawable(a, this);
                break;
              case 3:
                Fh.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                pm.renderDrawable(a, this);
                break;
              case 6:
                qm.renderDrawable(a, this);
                break;
              case 7:
                aa.renderDrawable(a, this);
                break;
              case 8:
                Gh.renderDrawable(a, this);
                break;
              case 9:
                zg.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                om.renderDrawableMask(a, this);
                break;
              case 2:
                Qj.renderDrawableMask(a, this);
                break;
              case 3:
                Fh.renderDrawableMask(a, this);
                break;
              case 4:
              case 5:
                pm.renderDrawableMask(a, this);
                break;
              case 6:
                qm.renderDrawableMask(a, this);
                break;
              case 7:
                aa.renderDrawableMask(a, this);
                break;
              case 8:
                Gh.renderDrawableMask(a, this);
                break;
              case 9:
                zg.renderDrawableMask(a, this);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            this.__setBlendModeContext(this.context, a);
          }
        },
        __setBlendModeContext: function (a, b) {
          switch (b) {
            case 0:
              a.globalCompositeOperation = "lighter";
              break;
            case 2:
              a.globalCompositeOperation = "darken";
              break;
            case 3:
              a.globalCompositeOperation = "difference";
              break;
            case 5:
              a.globalCompositeOperation = "hard-light";
              break;
            case 8:
              a.globalCompositeOperation = "lighten";
              break;
            case 9:
              a.globalCompositeOperation = "multiply";
              break;
            case 11:
              a.globalCompositeOperation = "overlay";
              break;
            case 12:
              a.globalCompositeOperation = "screen";
              break;
            default:
              a.globalCompositeOperation = "source-over";
          }
        },
        __class__: og
      });
      var Sp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "none";
            case 1:
              return "round";
            case 2:
              return "square";
            default:
              return null;
          }
        }
      };
      function rm(a) {
        Ba.call(this);
        this.__drawableType = 10;
        this.__element = a;
      }
      h["openfl.display.DOMElement"] = rm;
      rm.__name__ = "openfl.display.DOMElement";
      rm.__super__ = Ba;
      rm.prototype = q(Ba.prototype, {
        __class__: rm
      });
      function Rj(a) {
        be.call(this);
        this.element = a;
        Ba.__supportDOM = true;
        a = window.getComputedStyle(document.documentElement, "");
        a = (Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/) || a.OLink === "" && ["", "o"])[1];
        "WebKit|Moz|MS|O".match(new RegExp("(" + a + ")", "i"));
        a[0].toUpperCase();
        a.substr(1);
        this.__vendorPrefix = a;
        this.__transformProperty = a == "webkit" ? "-webkit-transform" : "transform";
        this.__transformOriginProperty = a == "webkit" ? "-webkit-transform-origin" : "transform-origin";
        this.__clipRects = [];
        this.__z = this.__numClipRects = 0;
        this.__type = "dom";
        this.__canvasRenderer = new og(null);
        this.__canvasRenderer.__isDOM = true;
      }
      h["openfl.display.DOMRenderer"] = Rj;
      Rj.__name__ = "openfl.display.DOMRenderer";
      Rj.__super__ = be;
      Rj.prototype = q(be.prototype, {
        __applyStyle: function (a, b, c, d) {
          var e = a.__style;
          if (b && a.__renderTransformChanged) {
            b = a.__renderTransform;
            var f = this.__roundPixels;
            if (f == null) {
              f = false;
            }
            e.setProperty(this.__transformProperty, f ? "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + (b.tx | 0) + ", " + (b.ty | 0) + ", 0, 1)" : "matrix3d(" + b.a + ", " + b.b + ", 0, 0, " + b.c + ", " + b.d + ", 0, 0, 0, 0, 1, 0, " + b.tx + ", " + b.ty + ", 0, 1)", null);
          }
          if (a.__worldZ != ++this.__z) {
            a.__worldZ = this.__z;
            e.setProperty("z-index", a.__worldZ == null ? "null" : "" + a.__worldZ, null);
          }
          if (c && a.__worldAlphaChanged) {
            if (a.__worldAlpha < 1) {
              e.setProperty("opacity", a.__worldAlpha == null ? "null" : "" + a.__worldAlpha, null);
            } else {
              e.removeProperty("opacity");
            }
          }
          if (d && a.__worldClipChanged) {
            if (a.__worldClip == null) {
              e.removeProperty("clip");
            } else {
              a = a.__worldClip;
              e.setProperty("clip", "rect(" + a.y + "px, " + a.get_right() + "px, " + a.get_bottom() + "px, " + a.x + "px)", null);
            }
          }
        },
        __initializeElement: function (a, b) {
          var c = a.__style = b.style;
          c.setProperty("position", "absolute", null);
          c.setProperty("top", "0", null);
          c.setProperty("left", "0", null);
          c.setProperty(this.__transformOriginProperty, "0 0 0", null);
          this.element.appendChild(b);
          a.__worldAlphaChanged = true;
          a.__renderTransformChanged = true;
          a.__worldVisibleChanged = true;
          a.__worldClipChanged = true;
          a.__worldClip = null;
          a.__worldZ = -1;
        },
        __popMask: function () {
          this.__popMaskRect();
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            this.__popMaskRect();
          }
        },
        __popMaskRect: function () {
          if (this.__numClipRects > 0) {
            this.__numClipRects--;
            this.__currentClipRect = this.__numClipRects > 0 ? this.__clipRects[this.__numClipRects - 1] : null;
          }
        },
        __pushMask: function (a) {
          this.__pushMaskRect(a.getBounds(a), a.__renderTransform);
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
          }
          if (a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          if (this.__numClipRects == this.__clipRects.length) {
            this.__clipRects[this.__numClipRects] = new ba();
          }
          var c = this.__clipRects[this.__numClipRects];
          a.__transform(c, b);
          if (this.__numClipRects > 0) {
            a = this.__clipRects[this.__numClipRects - 1];
            c.__contract(a.x, a.y, a.width, a.height);
          }
          if (c.height < 0) {
            c.height = 0;
          }
          if (c.width < 0) {
            c.width = 0;
          }
          this.__currentClipRect = c;
          this.__numClipRects++;
        },
        __render: function (a) {
          this.element.style.background = this.__stage.__transparent ? "none" : this.__stage.__colorString;
          this.__z = 1;
          this.__renderDrawable(a);
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                wc.renderDrawable(a, this);
                break;
              case 3:
                ce.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                sm.renderDrawable(a, this);
                break;
              case 6:
                tm.renderDrawable(a, this);
                break;
              case 7:
                bh.renderDrawable(a, this);
                break;
              case 8:
                Ag.renderDrawable(a, this);
                break;
              case 9:
                ch.renderDrawable(a, this);
                break;
              case 10:
                if (a.stage != null && a.__worldVisible && a.__renderable) {
                  if (!a.__active) {
                    this.__initializeElement(a, a.__element);
                    a.__active = true;
                  }
                  this.__updateClip(a);
                  this.__applyStyle(a, true, true, true);
                } else if (a.__active) {
                  this.element.removeChild(a.__element);
                  a.__active = false;
                }
                ce.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableClear: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 2:
                wc.renderDrawableClear(a, this);
                break;
              case 3:
                ce.renderDrawableClear(a, this);
                break;
              case 4:
              case 5:
                sm.renderDrawableClear(a, this);
                break;
              case 6:
                tm.renderDrawableClear(a, this);
                break;
              case 7:
                bh.renderDrawableClear(a, this);
                break;
              case 8:
                Ag.renderDrawableClear(a, this);
                break;
              case 9:
                ch.renderDrawableClear(a, this);
            }
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
          }
        },
        __updateClip: function (a) {
          if (this.__currentClipRect == null) {
            a.__worldClipChanged = a.__worldClip != null;
            a.__worldClip = null;
          } else {
            if (a.__worldClip == null) {
              a.__worldClip = new ba();
            }
            var b = ba.__pool.get();
            var c = ya.__pool.get();
            c.copyFrom(a.__renderTransform);
            c.invert();
            this.__currentClipRect.__transform(b, c);
            if (b.equals(a.__worldClip)) {
              a.__worldClipChanged = false;
            } else {
              a.__worldClip.copyFrom(b);
              a.__worldClipChanged = true;
            }
            ba.__pool.release(b);
            ya.__pool.release(c);
          }
        },
        __class__: Rj
      });
      function um(a) {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        fe.call(this, a);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.display.DisplayObjectShader"] = um;
      um.__name__ = "openfl.display.DisplayObjectShader";
      um.__super__ = fe;
      um.prototype = q(fe.prototype, {
        __class__: um
      });
      function Jo(a, b) {
        va.call(this);
        this.name = a;
        this.frame = b;
      }
      h["openfl.display.FrameLabel"] = Jo;
      Jo.__name__ = "openfl.display.FrameLabel";
      Jo.__super__ = va;
      Jo.prototype = q(va.prototype, {
        __class__: Jo
      });
      function ee(a) {
        this.__dirty = true;
        this.__owner = a;
        this.__commands = new de();
        this.__positionY = this.__positionX = this.__strokePadding = 0;
        this.__renderTransform = new ya();
        this.__usedShaderBuffers = new mb();
        this.__worldTransform = new ya();
        this.__height = this.__width = 0;
        this.__bitmapScale = 1;
        this.__shaderBufferPool = new ib(function () {
          return new vm();
        });
        this.moveTo(0, 0);
      }
      h["openfl.display.Graphics"] = ee;
      ee.__name__ = "openfl.display.Graphics";
      ee.prototype = {
        beginFill: function (a, b) {
          if (b == null) {
            b = 1;
          }
          if (a == null) {
            a = 0;
          }
          this.__commands.beginFill(a & 16777215, b);
          if (b > 0) {
            this.__visible = true;
          }
        },
        beginGradientFill: function (a, b, c, d, e, f, k, g) {
          if (g == null) {
            g = 0;
          }
          if (k == null) {
            k = 1;
          }
          if (f == null) {
            f = 0;
          }
          if (b != null && b.length != 0) {
            if (c == null) {
              c = [];
              for (var l = 0, t = b.length; l < t;) {
                l++;
                c.push(1);
              }
            }
            if (d == null) {
              d = [];
              l = 0;
              t = b.length;
              while (l < t) {
                var h = l++;
                d.push(Math.ceil(h / (b.length - 1) * 255));
              }
            }
            if (!(c.length < b.length) && !(d.length < b.length)) {
              this.__commands.beginGradientFill(a, b, c, d, e, f, k, g);
              l = 0;
              while (l < c.length) {
                a = c[l];
                ++l;
                if (a > 0) {
                  this.__visible = true;
                  break;
                }
              }
            }
          }
        },
        beginShaderFill: function (a, b) {
          if (a != null) {
            b = this.__shaderBufferPool.get();
            this.__usedShaderBuffers.add(b);
            b.update(a);
            this.__commands.beginShaderFill(b);
          }
        },
        clear: function () {
          for (var a = this.__usedShaderBuffers.h; a != null;) {
            var b = a.item;
            a = a.next;
            this.__shaderBufferPool.release(b);
          }
          this.__usedShaderBuffers.clear();
          this.__commands.clear();
          this.__strokePadding = 0;
          if (this.__bounds != null) {
            this.set___dirty(true);
            this.__transformDirty = true;
            this.__bounds = null;
          }
          this.__visible = false;
          this.__positionY = this.__positionX = 0;
          this.moveTo(0, 0);
        },
        cubicCurveTo: function (a, b, c, d, e, f) {
          var k = this.__findExtrema(this.__positionX, a, c, e);
          var g = this.__findExtrema(this.__positionY, b, d, f);
          this.__inflateBounds(k.min - this.__strokePadding, g.min - this.__strokePadding);
          this.__inflateBounds(k.max + this.__strokePadding, g.max + this.__strokePadding);
          this.__positionX = e;
          this.__positionY = f;
          this.__commands.cubicCurveTo(a, b, c, d, e, f);
          this.set___dirty(true);
        },
        curveTo: function (a, b, c, d) {
          this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
          this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
          var e = a < c && a > this.__positionX || a > c && a < this.__positionX ? c : this.__calculateBezierQuadPoint((this.__positionX - a) / (this.__positionX - a * 2 + c), this.__positionX, a, c);
          var f = b < d && b > this.__positionY || b > d && b < this.__positionY ? d : this.__calculateBezierQuadPoint((this.__positionY - b) / (this.__positionY - b * 2 + d), this.__positionY, b, d);
          this.__inflateBounds(e - this.__strokePadding, f - this.__strokePadding);
          this.__inflateBounds(e + this.__strokePadding, f + this.__strokePadding);
          this.__positionX = c;
          this.__positionY = d;
          this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
          this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
          this.__commands.curveTo(a, b, c, d);
          this.set___dirty(true);
        },
        drawCircle: function (a, b, c) {
          if (!(c <= 0)) {
            this.__inflateBounds(a - c - this.__strokePadding, b - c - this.__strokePadding);
            this.__inflateBounds(a + c + this.__strokePadding, b + c + this.__strokePadding);
            this.__commands.drawCircle(a, b, c);
            this.set___dirty(true);
          }
        },
        drawPath: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          var d = 0;
          if (c == 1) {
            this.__commands.windingNonZero();
          }
          a = a.iterator();
          a: while (a.hasNext()) {
            switch (a.next()) {
              case 1:
                this.moveTo(b.get(d), b.get(d + 1));
                d += 2;
                break;
              case 2:
                this.lineTo(b.get(d), b.get(d + 1));
                d += 2;
                break;
              case 3:
                this.curveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3));
                d += 4;
                break;
              case 4:
                this.moveTo(b.get(d + 2), b.get(d + 3));
                break a;
              case 5:
                this.lineTo(b.get(d + 2), b.get(d + 3));
                break a;
              case 6:
                this.cubicCurveTo(b.get(d), b.get(d + 1), b.get(d + 2), b.get(d + 3), b.get(d + 4), b.get(d + 5));
                d += 6;
            }
          }
        },
        drawQuads: function (a, b, c) {
          if (a != null) {
            var d = b != null;
            var e = false;
            var f = false;
            var k = d ? b.get_length() : Math.floor(a.get_length() / 4);
            if (k != 0) {
              if (c != null) {
                if (c.get_length() >= k * 6) {
                  f = e = true;
                } else if (c.get_length() >= k * 4) {
                  e = true;
                } else if (c.get_length() >= k * 2) {
                  f = true;
                }
              }
              var g = ba.__pool.get();
              var l = ya.__pool.get();
              var h = Infinity;
              var p = Infinity;
              var m = -Infinity;
              var n = -Infinity;
              var r;
              for (var q = 0; q < k;) {
                var w = q++;
                r = d ? b.get(w) * 4 : w * 4;
                if (!(r < 0)) {
                  g.setTo(0, 0, a.get(r + 2), a.get(r + 3));
                  if (!(g.width <= 0) && !(g.height <= 0)) {
                    if (e && f) {
                      r = w * 6;
                      l.setTo(c.get(r), c.get(r + 1), c.get(r + 2), c.get(r + 3), c.get(r + 4), c.get(r + 5));
                    } else if (e) {
                      r = w * 4;
                      l.setTo(c.get(r), c.get(r + 1), c.get(r + 2), c.get(r + 3), g.x, g.y);
                    } else if (f) {
                      r = w * 2;
                      l.tx = c.get(r);
                      l.ty = c.get(r + 1);
                    } else {
                      l.tx = g.x;
                      l.ty = g.y;
                    }
                    g.__transform(g, l);
                    if (h > g.x) {
                      h = g.x;
                    }
                    if (p > g.y) {
                      p = g.y;
                    }
                    if (m < g.get_right()) {
                      m = g.get_right();
                    }
                    if (n < g.get_bottom()) {
                      n = g.get_bottom();
                    }
                  }
                }
              }
              this.__inflateBounds(h, p);
              this.__inflateBounds(m, n);
              this.__commands.drawQuads(a, b, c);
              this.set___dirty(true);
              this.__visible = true;
              ba.__pool.release(g);
              ya.__pool.release(l);
            }
          }
        },
        drawRect: function (a, b, c, d) {
          if (c != 0 || d != 0) {
            var e = c < 0 ? -1 : 1;
            var f = d < 0 ? -1 : 1;
            this.__inflateBounds(a - this.__strokePadding * e, b - this.__strokePadding * f);
            this.__inflateBounds(a + c + this.__strokePadding * e, b + d + this.__strokePadding * f);
            this.__commands.drawRect(a, b, c, d);
            this.set___dirty(true);
          }
        },
        drawTriangles: function (a, b, c, d) {
          if (d == null) {
            d = 1;
          }
          if (a != null && a.get_length() != 0) {
            var e = a.get_length() / 2 | 0;
            if (b == null) {
              if (e % 3 != 0) {
                throw new mh("Not enough vertices to close a triangle.");
              }
              b = kb.toIntVector(null);
              for (var f = 0, k = e; f < k;) {
                var g = f++;
                b.push(g);
              }
            }
            if (d == null) {
              d = 1;
            }
            var l = Infinity;
            var h = Infinity;
            var p = -Infinity;
            var m = -Infinity;
            f = 0;
            for (k = e; f < k;) {
              g = f++;
              e = a.get(g * 2);
              g = a.get(g * 2 + 1);
              if (l > e) {
                l = e;
              }
              if (h > g) {
                h = g;
              }
              if (p < e) {
                p = e;
              }
              if (m < g) {
                m = g;
              }
            }
            this.__inflateBounds(l, h);
            this.__inflateBounds(p, m);
            this.__commands.drawTriangles(a, b, c, d);
            this.set___dirty(true);
            this.__visible = true;
          }
        },
        endFill: function () {
          this.__commands.endFill();
        },
        lineStyle: function (a, b, c, d, e, f, k, g) {
          if (g == null) {
            g = 3;
          }
          if (e == null) {
            e = 2;
          }
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 1;
          }
          if (b == null) {
            b = 0;
          }
          if (f == null) {
            f = 1;
          }
          if (k == null) {
            k = 2;
          }
          if (a != null) {
            if (k == 1) {
              if (a > this.__strokePadding) {
                this.__strokePadding = Math.ceil(a);
              }
            } else if (a / 2 > this.__strokePadding) {
              this.__strokePadding = Math.ceil(a / 2);
            }
          }
          this.__commands.lineStyle(a, b, c, d, e, f, k, g);
          if (a != null) {
            this.__visible = true;
          }
        },
        lineTo: function (a, b) {
          if (isFinite(a) && isFinite(b)) {
            this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
            this.__inflateBounds(this.__positionX + this.__strokePadding, this.__positionY + this.__strokePadding);
            this.__positionX = a;
            this.__positionY = b;
            this.__inflateBounds(this.__positionX - this.__strokePadding, this.__positionY - this.__strokePadding);
            this.__inflateBounds(this.__positionX + this.__strokePadding * 2, this.__positionY + this.__strokePadding);
            this.__commands.lineTo(a, b);
            this.set___dirty(true);
          }
        },
        moveTo: function (a, b) {
          this.__positionX = a;
          this.__positionY = b;
          this.__commands.moveTo(a, b);
        },
        overrideBlendMode: function (a) {
          if (a == null) {
            a = 10;
          }
          this.__commands.overrideBlendMode(a);
        },
        __calculateBezierCubicPoint: function (a, b, c, d, e) {
          var f = 1 - a;
          return b * f * f * f + c * 3 * a * f * f + d * 3 * f * a * a + e * a * a * a;
        },
        __calculateBezierQuadPoint: function (a, b, c, d) {
          var e = 1 - a;
          return e * e * b + e * 2 * a * c + a * a * d;
        },
        __cleanup: function () {
          if (this.__bounds != null && this.__canvas != null) {
            this.set___dirty(true);
            this.__transformDirty = true;
          }
          this.__context = this.__canvas = this.__bitmap = null;
        },
        __getBounds: function (a, b) {
          if (this.__bounds != null) {
            var c = ba.__pool.get();
            this.__bounds.__transform(c, b);
            a.__expand(c.x, c.y, c.width, c.height);
            ba.__pool.release(c);
          }
        },
        __hitTest: function (a, b, c, d) {
          if (this.__bounds == null) {
            return false;
          }
          var e = d.a * d.d - d.b * d.c;
          var f = e == 0 ? -d.tx : 1 / e * (d.c * (d.ty - b) + d.d * (a - d.tx));
          e = d.a * d.d - d.b * d.c;
          a = e == 0 ? -d.ty : 1 / e * (d.a * (b - d.ty) + d.b * (d.tx - a));
          if (f > this.__bounds.x && a > this.__bounds.y && this.__bounds.contains(f, a)) {
            if (c) {
              return A.hitTest(this, f, a);
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        __findExtrema: function (a, b, c, d) {
          var e = [];
          if ((!(b < d) || !(b > a)) && (!(b > d) || !(b < a)) || (!(c < d) || !(c > a)) && (!(c > d) || !(c < a))) {
            var f = -a + b * 3 + d - c * 3;
            var k = a * 2 - b * 4 + c * 2;
            var g = b - a;
            var l = k * k - f * 4 * g;
            if (f == 0) {
              f = -g / k;
              if (f > 0 && f < 1) {
                e.push(this.__calculateBezierCubicPoint(f, a, b, c, d));
              }
            } else if (l >= 0) {
              g = (-k + Math.sqrt(l)) / (f * 2);
              f = (-k - Math.sqrt(l)) / (f * 2);
              if (g > 0 && g < 1) {
                e.push(this.__calculateBezierCubicPoint(g, a, b, c, d));
              }
              if (f > 0 && f < 1) {
                e.push(this.__calculateBezierCubicPoint(f, a, b, c, d));
              }
            }
          }
          b = a;
          e.push(d);
          for (d = 0; d < e.length;) {
            c = e[d];
            ++d;
            if (c < b) {
              b = c;
            }
            if (c > a) {
              a = c;
            }
          }
          return {
            min: b,
            max: a
          };
        },
        __inflateBounds: function (a, b) {
          if (this.__bounds == null) {
            this.__bounds = new ba(a, b, 0, 0);
            this.__transformDirty = true;
          } else {
            if (a < this.__bounds.x) {
              this.__bounds.width += this.__bounds.x - a;
              this.__bounds.x = a;
              this.__transformDirty = true;
            }
            if (b < this.__bounds.y) {
              this.__bounds.height += this.__bounds.y - b;
              this.__bounds.y = b;
              this.__transformDirty = true;
            }
            if (a > this.__bounds.x + this.__bounds.width) {
              this.__bounds.width = a - this.__bounds.x;
            }
            if (b > this.__bounds.y + this.__bounds.height) {
              this.__bounds.height = b - this.__bounds.y;
            }
          }
        },
        __update: function (a, b) {
          if (this.__bounds != null && !(this.__bounds.width <= 0) && !(this.__bounds.height <= 0)) {
            var c = this.__owner.__renderTransform;
            if (c != null) {
              var d = b;
              var e = b;
              if (this.__owner.__worldScale9Grid == null) {
                d = c.b == 0 ? Math.abs(c.a) : Math.sqrt(c.a * c.a + c.b * c.b);
                e = c.c == 0 ? Math.abs(c.d) : Math.sqrt(c.c * c.c + c.d * c.d);
                if (a != null) {
                  d = a.b == 0 ? d * a.a : d * Math.sqrt(a.a * a.a + a.b * a.b);
                  e = a.c == 0 ? e * a.d : e * Math.sqrt(a.c * a.c + a.d * a.d);
                }
              }
              a = this.__bounds.width * d;
              e *= this.__bounds.height;
              if (a < 1 || e < 1) {
                if (this.__width >= 1 || this.__height >= 1) {
                  this.set___dirty(true);
                }
                this.__height = this.__width = 0;
              } else {
                if (ee.maxTextureWidth != null && a > ee.maxTextureWidth) {
                  a = ee.maxTextureWidth;
                }
                if (ee.maxTextureWidth != null && e > ee.maxTextureHeight) {
                  e = ee.maxTextureHeight;
                }
                if (this.__owner.__worldScale9Grid != null) {
                  this.__renderTransform.a = b;
                  this.__renderTransform.d = b;
                  d = 1 / b;
                  var f = 1 / b;
                } else {
                  this.__renderTransform.a = a / this.__bounds.width;
                  this.__renderTransform.d = e / this.__bounds.height;
                  d = 1 / this.__renderTransform.a;
                  f = 1 / this.__renderTransform.d;
                }
                this.__worldTransform.a = d * c.a;
                this.__worldTransform.b = d * c.b;
                this.__worldTransform.c = f * c.c;
                this.__worldTransform.d = f * c.d;
                f = this.__bounds.x;
                var k = this.__bounds.y;
                d = f * c.a + k * c.c + c.tx;
                c = f * c.b + k * c.d + c.ty;
                if (b > 1) {
                  b = 1 / b;
                  this.__worldTransform.tx = Math.round(d / b) * b;
                  this.__worldTransform.ty = Math.round(c / b) * b;
                } else {
                  this.__worldTransform.tx = Math.round(d);
                  this.__worldTransform.ty = Math.round(c);
                }
                b = this.__worldTransform;
                f = b.a * b.d - b.b * b.c;
                this.__renderTransform.tx = f == 0 ? -b.tx : 1 / f * (b.c * (b.ty - c) + b.d * (d - b.tx));
                b = this.__worldTransform;
                f = b.a * b.d - b.b * b.c;
                this.__renderTransform.ty = f == 0 ? -b.ty : 1 / f * (b.a * (c - b.ty) + b.b * (b.tx - d));
                a = Math.ceil(a + 1);
                e = Math.ceil(e + 1);
                if (a != this.__width || e != this.__height) {
                  this.set___dirty(true);
                }
                this.__width = a;
                this.__height = e;
              }
            }
          }
        },
        set___dirty: function (a) {
          if (a && this.__owner != null) {
            var b = this.__owner;
            if (!b.__renderDirty) {
              b.__renderDirty = true;
              b.__setParentRenderDirty();
            }
          }
          if (a) {
            this.__hardwareDirty = this.__softwareDirty = true;
          }
          return this.__dirty = a;
        },
        __class__: ee,
        __properties__: {
          set___dirty: "set___dirty"
        }
      };
      function Ko() {}
      h["openfl.display.ITileContainer"] = Ko;
      Ko.__name__ = "openfl.display.ITileContainer";
      Ko.__isInterface__ = true;
      var Tp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "bevel";
            case 1:
              return "miter";
            case 2:
              return "round";
            default:
              return null;
          }
        }
      };
      function Lo() {
        gb.call(this);
        this.__drawableType = 4;
        this.contentLoaderInfo = Nf.create(this);
        this.uncaughtErrorEvents = this.contentLoaderInfo.uncaughtErrorEvents;
        this.__unloaded = true;
      }
      h["openfl.display.Loader"] = Lo;
      Lo.__name__ = "openfl.display.Loader";
      Lo.__super__ = gb;
      Lo.prototype = q(gb.prototype, {
        addChild: function (a) {
          throw new Sb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        addChildAt: function (a, b) {
          throw new Sb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        removeChild: function (a) {
          if (a == this.content) {
            return gb.prototype.removeChild.call(this, this.content);
          }
          throw new Sb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        removeChildAt: function (a) {
          throw new Sb("Error #2069: The Loader class does not implement this method.", 2069);
        },
        __class__: Lo
      });
      function Nf() {
        va.call(this);
        this.applicationDomain = Di.currentDomain;
        this.bytesTotal = this.bytesLoaded = 0;
        this.childAllowsParent = true;
        this.parameters = {};
      }
      h["openfl.display.LoaderInfo"] = Nf;
      Nf.__name__ = "openfl.display.LoaderInfo";
      Nf.create = function (a) {
        var b = new Nf();
        b.uncaughtErrorEvents = new wm();
        if (a != null) {
          b.loader = a;
        } else {
          b.url = Nf.__rootURL;
        }
        return b;
      };
      Nf.__super__ = va;
      Nf.prototype = q(va.prototype, {
        __complete: function () {
          if (!this.__completed) {
            if (this.bytesLoaded < this.bytesTotal) {
              this.bytesLoaded = this.bytesTotal;
            }
            this.__update(this.bytesLoaded, this.bytesTotal);
            this.__completed = true;
            this.dispatchEvent(new za("complete"));
          }
        },
        __update: function (a, b) {
          this.bytesLoaded = a;
          this.bytesTotal = b;
          this.dispatchEvent(new Hh("progress", false, false, a, b));
        },
        __class__: Nf
      });
      function Oj() {
        Ra.call(this);
        this.__enabled = true;
      }
      h["openfl.display.MovieClip"] = Oj;
      Oj.__name__ = "openfl.display.MovieClip";
      Oj.__super__ = Ra;
      Oj.prototype = q(Ra.prototype, {
        __enterFrame: function (a) {
          if (this.__timeline != null) {
            this.__timeline.__enterFrame(a);
          }
          for (var b = 0, c = this.__children; b < c.length;) {
            var d = c[b];
            ++b;
            d.__enterFrame(a);
          }
        },
        __tabTest: function (a) {
          if (this.__enabled) {
            Ra.prototype.__tabTest.call(this, a);
          }
        },
        __class__: Oj
      });
      function tb(a, b) {
        be.call(this);
        this.__context3D = a;
        this.__context = a.__context;
        this.__gl = this.gl = a.__context.webgl;
        this.__defaultRenderTarget = b;
        this.__flipped = this.__defaultRenderTarget == null;
        if (ee.maxTextureWidth == null) {
          ee.maxTextureWidth = ee.maxTextureHeight = this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE);
        }
        this.__matrix = nb._new();
        this.__values = [];
        this.__softwareRenderer = new og(null);
        this.__type = "opengl";
        this.__setBlendMode(10);
        this.__context3D.__setGLBlend(true);
        this.__clipRects = [];
        this.__maskObjects = [];
        this.__numClipRects = 0;
        this.__projection = nb._new();
        this.__projectionFlipped = nb._new();
        this.__stencilReference = 0;
        this.__tempRect = new ba();
        this.__defaultDisplayShader = new um();
        this.__defaultGraphicsShader = new sh();
        this.__defaultShader = this.__defaultDisplayShader;
        this.__initShader(this.__defaultShader);
        this.__scrollRectMasks = new ib(function () {
          return new rg();
        });
        this.__maskShader = new Ih();
      }
      h["openfl.display.OpenGLRenderer"] = tb;
      tb.__name__ = "openfl.display.OpenGLRenderer";
      tb.__super__ = be;
      tb.prototype = q(be.prototype, {
        applyAlpha: function (a) {
          tb.__alphaValue[0] = a * this.__worldAlpha;
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_Alpha", tb.__alphaValue);
          } else if (this.__currentShader != null && this.__currentShader.__alpha != null) {
            this.__currentShader.__alpha.value = tb.__alphaValue;
          }
        },
        applyBitmapData: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          if (this.__currentShaderBuffer != null) {
            if (a != null) {
              tb.__textureSizeValue[0] = a.__textureWidth;
              tb.__textureSizeValue[1] = a.__textureHeight;
              this.__currentShaderBuffer.addFloatOverride("openfl_TextureSize", tb.__textureSizeValue);
            }
          } else if (this.__currentShader != null) {
            if (this.__currentShader.__bitmap != null) {
              this.__currentShader.__bitmap.input = a;
              this.__currentShader.__bitmap.filter = b && this.__allowSmoothing ? 4 : 5;
              this.__currentShader.__bitmap.mipFilter = 2;
              this.__currentShader.__bitmap.wrap = c ? 2 : 0;
            }
            if (this.__currentShader.__texture != null) {
              this.__currentShader.__texture.input = a;
              this.__currentShader.__texture.filter = b && this.__allowSmoothing ? 4 : 5;
              this.__currentShader.__texture.mipFilter = 2;
              this.__currentShader.__texture.wrap = c ? 2 : 0;
            }
            if (this.__currentShader.__textureSize != null) {
              if (a != null) {
                tb.__textureSizeValue[0] = a.__textureWidth;
                tb.__textureSizeValue[1] = a.__textureHeight;
                this.__currentShader.__textureSize.value = tb.__textureSizeValue;
              } else {
                this.__currentShader.__textureSize.value = null;
              }
            }
          }
        },
        applyColorTransform: function (a) {
          var b = a != null && !a.__isDefault(true);
          this.applyHasColorTransform(b);
          if (b) {
            a.__setArrays(tb.__colorMultipliersValue, tb.__colorOffsetsValue);
            if (this.__currentShaderBuffer != null) {
              this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", tb.__colorMultipliersValue);
              this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", tb.__colorOffsetsValue);
            } else if (this.__currentShader != null) {
              if (this.__currentShader.__colorMultiplier != null) {
                this.__currentShader.__colorMultiplier.value = tb.__colorMultipliersValue;
              }
              if (this.__currentShader.__colorOffset != null) {
                this.__currentShader.__colorOffset.value = tb.__colorOffsetsValue;
              }
            }
          } else if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier", tb.__emptyColorValue);
            this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset", tb.__emptyColorValue);
          } else if (this.__currentShader != null) {
            if (this.__currentShader.__colorMultiplier != null) {
              this.__currentShader.__colorMultiplier.value = tb.__emptyColorValue;
            }
            if (this.__currentShader.__colorOffset != null) {
              this.__currentShader.__colorOffset.value = tb.__emptyColorValue;
            }
          }
        },
        applyHasColorTransform: function (a) {
          tb.__hasColorTransformValue[0] = a;
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addBoolOverride("openfl_HasColorTransform", tb.__hasColorTransformValue);
          } else if (this.__currentShader != null && this.__currentShader.__hasColorTransform != null) {
            this.__currentShader.__hasColorTransform.value = tb.__hasColorTransformValue;
          }
        },
        applyMatrix: function (a) {
          if (this.__currentShaderBuffer != null) {
            this.__currentShaderBuffer.addFloatOverride("openfl_Matrix", a);
          } else if (this.__currentShader != null && this.__currentShader.__matrix != null) {
            this.__currentShader.__matrix.value = a;
          }
        },
        setShader: function (a) {
          this.__currentShaderBuffer = null;
          if (this.__currentShader != a) {
            if (a == null) {
              this.__currentShader = null;
              this.__context3D.setProgram(null);
            } else {
              this.__currentShader = a;
              this.__initShader(a);
              this.__context3D.setProgram(a.program);
              this.__context3D.__flushGLProgram();
              this.__currentShader.__enable();
              this.__context3D.__state.shader = a;
            }
          }
        },
        setViewport: function () {
          this.__gl.viewport(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
        },
        updateShader: function () {
          if (this.__currentShader != null) {
            if (this.__currentShader.__position != null) {
              this.__currentShader.__position.__useArray = true;
            }
            if (this.__currentShader.__textureCoord != null) {
              this.__currentShader.__textureCoord.__useArray = true;
            }
            this.__context3D.setProgram(this.__currentShader.program);
            this.__context3D.__flushGLProgram();
            this.__context3D.__flushGLTextures();
            this.__currentShader.__update();
          }
        },
        useAlphaArray: function () {
          if (this.__currentShader != null && this.__currentShader.__alpha != null) {
            this.__currentShader.__alpha.__useArray = true;
          }
        },
        useColorTransformArray: function () {
          if (this.__currentShader != null) {
            if (this.__currentShader.__colorMultiplier != null) {
              this.__currentShader.__colorMultiplier.__useArray = true;
            }
            if (this.__currentShader.__colorOffset != null) {
              this.__currentShader.__colorOffset.__useArray = true;
            }
          }
        },
        __clear: function () {
          if (this.__stage == null || this.__stage.__transparent) {
            this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
          } else {
            this.__context3D.clear(this.__stage.__colorSplit[0], this.__stage.__colorSplit[1], this.__stage.__colorSplit[2], 1, 0, 0, 1);
          }
          this.__cleared = true;
        },
        __clearShader: function () {
          if (this.__currentShader != null) {
            if (this.__currentShaderBuffer == null) {
              if (this.__currentShader.__bitmap != null) {
                this.__currentShader.__bitmap.input = null;
              }
            } else {
              this.__currentShaderBuffer.clearOverride();
            }
            if (this.__currentShader.__texture != null) {
              this.__currentShader.__texture.input = null;
            }
            if (this.__currentShader.__textureSize != null) {
              this.__currentShader.__textureSize.value = null;
            }
            if (this.__currentShader.__hasColorTransform != null) {
              this.__currentShader.__hasColorTransform.value = null;
            }
            if (this.__currentShader.__position != null) {
              this.__currentShader.__position.value = null;
            }
            if (this.__currentShader.__matrix != null) {
              this.__currentShader.__matrix.value = null;
            }
            this.__currentShader.__clearUseArray();
          }
        },
        __copyShader: function (a) {
          this.__currentShader = a.__currentShader;
          this.__currentShaderBuffer = a.__currentShaderBuffer;
          this.__currentDisplayShader = a.__currentDisplayShader;
          this.__currentGraphicsShader = a.__currentGraphicsShader;
        },
        __getMatrix: function (a, b) {
          var c = ya.__pool.get();
          c.copyFrom(a);
          c.concat(this.__worldTransform);
          if (b == 0 || b == 1 && c.b == 0 && c.c == 0 && c.a < 1.001 && c.a > 0.999 && c.d < 1.001 && c.d > 0.999) {
            c.tx = Math.round(c.tx);
            c.ty = Math.round(c.ty);
          }
          nb.identity(this.__matrix);
          nb.set(this.__matrix, 0, c.a);
          nb.set(this.__matrix, 1, c.b);
          nb.set(this.__matrix, 4, c.c);
          nb.set(this.__matrix, 5, c.d);
          nb.set(this.__matrix, 12, c.tx);
          nb.set(this.__matrix, 13, c.ty);
          nb.append(this.__matrix, this.__flipped ? this.__projectionFlipped : this.__projection);
          this.__values[0] = nb.get(this.__matrix, 0);
          this.__values[1] = nb.get(this.__matrix, 1);
          this.__values[2] = nb.get(this.__matrix, 2);
          this.__values[3] = nb.get(this.__matrix, 3);
          this.__values[4] = nb.get(this.__matrix, 4);
          this.__values[5] = nb.get(this.__matrix, 5);
          this.__values[6] = nb.get(this.__matrix, 6);
          this.__values[7] = nb.get(this.__matrix, 7);
          this.__values[8] = nb.get(this.__matrix, 8);
          this.__values[9] = nb.get(this.__matrix, 9);
          this.__values[10] = nb.get(this.__matrix, 10);
          this.__values[11] = nb.get(this.__matrix, 11);
          this.__values[12] = nb.get(this.__matrix, 12);
          this.__values[13] = nb.get(this.__matrix, 13);
          this.__values[14] = nb.get(this.__matrix, 14);
          this.__values[15] = nb.get(this.__matrix, 15);
          ya.__pool.release(c);
          return this.__values;
        },
        __initShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultShader;
          }
        },
        __initDisplayShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultDisplayShader;
          }
        },
        __initGraphicsShader: function (a) {
          if (a != null) {
            if (a.__context == null) {
              a.__context = this.__context3D;
              a.__init();
            }
            return a;
          } else {
            return this.__defaultGraphicsShader;
          }
        },
        __initShaderBuffer: function (a) {
          if (a != null) {
            return this.__initGraphicsShader(a.shader);
          } else {
            return this.__defaultGraphicsShader;
          }
        },
        __popMask: function () {
          if (this.__stencilReference != 0) {
            var a = this.__maskObjects.pop();
            if (this.__stencilReference > 1) {
              this.__context3D.setStencilActions(2, 1, 0, 0, 5);
              this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
              this.__context3D.setColorMask(false, false, false, false);
              this.__renderDrawableMask(a);
              this.__stencilReference--;
              this.__context3D.setStencilActions(2, 1, 5, 5, 5);
              this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
              this.__context3D.setColorMask(true, true, true, true);
            } else {
              this.__stencilReference = 0;
              this.__context3D.setStencilActions();
              this.__context3D.setStencilReferenceValue(0, 0, 0);
            }
          }
        },
        __popMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a.__mask != null) {
            this.__popMask();
          }
          if (b && a.__scrollRect != null) {
            if (a.__renderTransform.b != 0 || a.__renderTransform.c != 0) {
              this.__scrollRectMasks.release(this.__maskObjects[this.__maskObjects.length - 1]);
              this.__popMask();
            } else {
              this.__popMaskRect();
            }
          }
        },
        __popMaskRect: function () {
          if (this.__numClipRects > 0) {
            this.__numClipRects--;
            if (this.__numClipRects > 0) {
              this.__scissorRect(this.__clipRects[this.__numClipRects - 1]);
            } else {
              this.__scissorRect();
            }
          }
        },
        __pushMask: function (a) {
          if (this.__stencilReference == 0) {
            this.__context3D.clear(0, 0, 0, 0, 0, 0, 4);
            this.__updatedStencil = true;
          }
          this.__context3D.setStencilActions(2, 1, 2, 5, 5);
          this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 255);
          this.__context3D.setColorMask(false, false, false, false);
          this.__renderDrawableMask(a);
          this.__maskObjects.push(a);
          this.__stencilReference++;
          this.__context3D.setStencilActions(2, 1, 5, 5, 5);
          this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
          this.__context3D.setColorMask(true, true, true, true);
        },
        __pushMaskObject: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (b && a.__scrollRect != null) {
            if (a.__renderTransform.b != 0 || a.__renderTransform.c != 0) {
              b = this.__scrollRectMasks.get();
              b.get_graphics().clear();
              b.get_graphics().beginFill(65280);
              b.get_graphics().drawRect(a.__scrollRect.x, a.__scrollRect.y, a.__scrollRect.width, a.__scrollRect.height);
              b.__renderTransform.copyFrom(a.__renderTransform);
              this.__pushMask(b);
            } else {
              this.__pushMaskRect(a.__scrollRect, a.__renderTransform);
            }
          }
          if (a.__mask != null) {
            this.__pushMask(a.__mask);
          }
        },
        __pushMaskRect: function (a, b) {
          if (this.__numClipRects == this.__clipRects.length) {
            this.__clipRects[this.__numClipRects] = new ba();
          }
          var c = ya.__pool.get();
          c.copyFrom(b);
          c.concat(this.__worldTransform);
          b = this.__clipRects[this.__numClipRects];
          a.__transform(b, c);
          if (this.__numClipRects > 0) {
            a = this.__clipRects[this.__numClipRects - 1];
            b.__contract(a.x, a.y, a.width, a.height);
          }
          if (b.height < 0) {
            b.height = 0;
          }
          if (b.width < 0) {
            b.width = 0;
          }
          ya.__pool.release(c);
          this.__scissorRect(b);
          this.__numClipRects++;
        },
        __render: function (a) {
          this.__context3D.setColorMask(true, true, true, true);
          this.__context3D.setCulling(3);
          this.__context3D.setDepthTest(false, 0);
          this.__context3D.setStencilActions();
          this.__context3D.setStencilReferenceValue(0, 0, 0);
          this.__context3D.setScissorRectangle(null);
          this.__blendMode = null;
          this.__setBlendMode(10);
          if (this.__defaultRenderTarget == null) {
            if (this.__context3D.__backBufferWantsBestResolution) {
              tb.__scissorRectangle.setTo(this.__offsetX / this.__pixelRatio, this.__offsetY / this.__pixelRatio, this.__displayWidth / this.__pixelRatio, this.__displayHeight / this.__pixelRatio);
            } else {
              tb.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
            }
            this.__context3D.setScissorRectangle(tb.__scissorRectangle);
            this.__upscaled = this.__worldTransform.a != 1 || this.__worldTransform.d != 1;
            this.__renderDrawable(a);
            if (this.__offsetX > 0 || this.__offsetY > 0) {
              if (this.__offsetX > 0) {
                tb.__scissorRectangle.setTo(0, 0, this.__offsetX, this.__height);
                this.__context3D.setScissorRectangle(tb.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
                tb.__scissorRectangle.setTo(this.__offsetX + this.__displayWidth, 0, this.__width, this.__height);
                this.__context3D.setScissorRectangle(tb.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
              }
              if (this.__offsetY > 0) {
                tb.__scissorRectangle.setTo(0, 0, this.__width, this.__offsetY);
                this.__context3D.setScissorRectangle(tb.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
                tb.__scissorRectangle.setTo(0, this.__offsetY + this.__displayHeight, this.__width, this.__height);
                this.__context3D.setScissorRectangle(tb.__scissorRectangle);
                this.__context3D.__flushGL();
                this.__gl.clearColor(0, 0, 0, 1);
                this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);
              }
              this.__context3D.setScissorRectangle(null);
            }
          } else {
            if (this.__context3D.__backBufferWantsBestResolution) {
              tb.__scissorRectangle.setTo(this.__offsetX / this.__pixelRatio, this.__offsetY / this.__pixelRatio, this.__displayWidth / this.__pixelRatio, this.__displayHeight / this.__pixelRatio);
            } else {
              tb.__scissorRectangle.setTo(this.__offsetX, this.__offsetY, this.__displayWidth, this.__displayHeight);
            }
            this.__context3D.setScissorRectangle(tb.__scissorRectangle);
            var b = a.__mask;
            var c = a.__scrollRect;
            a.__mask = null;
            a.__scrollRect = null;
            this.__renderDrawable(a);
            a.__mask = b;
            a.__scrollRect = c;
          }
          this.__context3D.present();
        },
        __renderDrawable: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                xm.renderDrawable(a, this);
                break;
              case 2:
                Re.renderDrawable(a, this);
                break;
              case 3:
                Jh.renderDrawable(a, this);
                break;
              case 4:
              case 5:
                ym.renderDrawable(a, this);
                break;
              case 6:
                zm.renderDrawable(a, this);
                break;
              case 7:
                Bg.renderDrawable(a, this);
                break;
              case 8:
                Se.renderDrawable(a, this);
                break;
              case 9:
                Q.renderDrawable(a, this);
            }
          }
        },
        __renderDrawableMask: function (a) {
          if (a != null) {
            switch (a.__drawableType) {
              case 0:
                xm.renderDrawableMask(a, this);
                break;
              case 2:
                Re.renderDrawableMask(a, this);
                break;
              case 3:
                Jh.renderDrawableMask(a, this);
                break;
              case 4:
              case 5:
                ym.renderDrawableMask(a, this);
                break;
              case 6:
                zm.renderDrawableMask(a, this);
                break;
              case 7:
                Bg.renderDrawableMask(a, this);
                break;
              case 8:
                Se.renderDrawableMask(a, this);
                break;
              case 9:
                Q.renderDrawableMask(a, this);
            }
          }
        },
        __renderFilterPass: function (a, b, c, d) {
          if (d == null) {
            d = true;
          }
          if (a != null && b != null && this.__defaultRenderTarget != null) {
            var e = this.__context3D.__state.renderToTexture;
            var f = this.__context3D.__state.renderToTextureDepthStencil;
            var k = this.__context3D.__state.renderToTextureAntiAlias;
            var g = this.__context3D.__state.renderToTextureSurfaceSelector;
            this.__context3D.setRenderToTexture(this.__defaultRenderTarget.getTexture(this.__context3D), false);
            if (d) {
              this.__context3D.clear(0, 0, 0, 0, 0, 0, 1);
            }
            b = this.__initShader(b);
            this.setShader(b);
            this.applyAlpha(1);
            this.applyBitmapData(a, c);
            this.applyColorTransform(null);
            this.applyMatrix(this.__getMatrix(a.__renderTransform, 1));
            this.updateShader();
            c = a.getVertexBuffer(this.__context3D);
            if (b.__position != null) {
              this.__context3D.setVertexBufferAt(b.__position.index, c, 0, 3);
            }
            if (b.__textureCoord != null) {
              this.__context3D.setVertexBufferAt(b.__textureCoord.index, c, 3, 2);
            }
            a = a.getIndexBuffer(this.__context3D);
            this.__context3D.drawTriangles(a);
            if (e != null) {
              this.__context3D.setRenderToTexture(e, f, k, g);
            } else {
              this.__context3D.setRenderToBackBuffer();
            }
            this.__clearShader();
          }
        },
        __resize: function (a, b) {
          this.__width = a;
          this.__height = b;
          a = this.__defaultRenderTarget == null ? this.__stage.stageWidth : this.__defaultRenderTarget.width;
          b = this.__defaultRenderTarget == null ? this.__stage.stageHeight : this.__defaultRenderTarget.height;
          if (this.__defaultRenderTarget == null) {
            var c = this.__worldTransform;
            c = Math.round(c.a * 0 + c.c * 0 + c.tx);
          } else {
            c = 0;
          }
          this.__offsetX = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(c.b * 0 + c.d * 0 + c.ty);
          } else {
            c = 0;
          }
          this.__offsetY = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(a * c.a + c.c * 0 + c.tx - this.__offsetX);
          } else {
            c = a;
          }
          this.__displayWidth = c;
          if (this.__defaultRenderTarget == null) {
            c = this.__worldTransform;
            c = Math.round(c.b * 0 + b * c.d + c.ty - this.__offsetY);
          } else {
            c = b;
          }
          this.__displayHeight = c;
          nb.createOrtho(this.__projection, 0, this.__displayWidth + this.__offsetX * 2, 0, this.__displayHeight + this.__offsetY * 2, -1000, 1000);
          nb.createOrtho(this.__projectionFlipped, 0, this.__displayWidth + this.__offsetX * 2, this.__displayHeight + this.__offsetY * 2, 0, -1000, 1000);
        },
        __resumeClipAndMask: function (a) {
          if (this.__stencilReference > 0) {
            this.__context3D.setStencilActions(2, 1, 5, 5, 5);
            this.__context3D.setStencilReferenceValue(this.__stencilReference, 255, 0);
          } else {
            this.__context3D.setStencilActions();
            this.__context3D.setStencilReferenceValue(0, 0, 0);
          }
          if (this.__numClipRects > 0) {
            this.__scissorRect(this.__clipRects[this.__numClipRects - 1]);
          } else {
            this.__scissorRect();
          }
        },
        __scissorRect: function (a) {
          if (a != null) {
            var b = Math.floor(a.x);
            var c = Math.floor(a.y);
            var d = a.width > 0 ? Math.ceil(a.get_right()) - b : 0;
            var e = a.height > 0 ? Math.ceil(a.get_bottom()) - c : 0;
            if (this.__context3D.__backBufferWantsBestResolution) {
              e = 1.5 / this.__pixelRatio;
              b = a.x / this.__pixelRatio;
              c = a.y / this.__pixelRatio;
              d = a.width > 0 ? a.get_right() / this.__pixelRatio - b + e : 0;
              e = a.height > 0 ? a.get_bottom() / this.__pixelRatio - c + e : 0;
            }
            if (d < 0) {
              d = 0;
            }
            if (e < 0) {
              e = 0;
            }
            tb.__scissorRectangle.setTo(b, c, d, e);
            this.__context3D.setScissorRectangle(tb.__scissorRectangle);
          } else {
            this.__context3D.setScissorRectangle(null);
          }
        },
        __setBlendMode: function (a) {
          if (this.__overrideBlendMode != null) {
            a = this.__overrideBlendMode;
          }
          if (this.__blendMode != a) {
            this.__blendMode = a;
            switch (a) {
              case 0:
                this.__context3D.setBlendFactors(2, 2);
                break;
              case 9:
                this.__context3D.setBlendFactors(1, 5);
                break;
              case 12:
                this.__context3D.setBlendFactors(2, 6);
                break;
              case 14:
                this.__context3D.setBlendFactors(2, 2);
                this.__context3D.__setGLBlendEquation(this.__gl.FUNC_REVERSE_SUBTRACT);
                break;
              default:
                this.__context3D.setBlendFactors(2, 5);
            }
          }
        },
        __setRenderTarget: function (a) {
          this.__defaultRenderTarget = a;
          this.__flipped = a == null;
          if (a != null) {
            this.__resize(a.width, a.height);
          }
        },
        __setShaderBuffer: function (a) {
          this.setShader(a.shader);
          this.__currentShaderBuffer = a;
        },
        __suspendClipAndMask: function () {
          if (this.__stencilReference > 0) {
            this.__context3D.setStencilActions();
            this.__context3D.setStencilReferenceValue(0, 0, 0);
          }
          if (this.__numClipRects > 0) {
            this.__scissorRect();
          }
        },
        __updateShaderBuffer: function (a) {
          if (this.__currentShader != null && this.__currentShaderBuffer != null) {
            this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer, a);
          }
        },
        __class__: tb
      });
      function kk(a) {
        this.onComplete = new Uc();
        this.display = a;
        if (a != null) {
          a.addEventListener("unload", n(this, this.display_onUnload));
          ia.get_current().addChild(a);
        }
      }
      h["openfl.display.Preloader"] = kk;
      kk.__name__ = "openfl.display.Preloader";
      kk.prototype = {
        start: function () {
          this.ready = true;
          ia.get_current().get_loaderInfo().__complete();
          if (this.display != null) {
            var a = new za("complete", true, true);
            this.display.dispatchEvent(a);
            if (!a.isDefaultPrevented()) {
              this.display.dispatchEvent(new za("unload"));
            }
          } else if (!this.complete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        update: function (a, b) {
          ia.get_current().get_loaderInfo().__update(a, b);
          if (this.display != null) {
            this.display.dispatchEvent(new Hh("progress", true, true, a, b));
          }
        },
        display_onUnload: function (a) {
          if (this.display != null) {
            this.display.removeEventListener("unload", n(this, this.display_onUnload));
            if (this.display.parent == ia.get_current()) {
              ia.get_current().removeChild(this.display);
            }
            ia.get_current().stage.set_focus(null);
            this.display = null;
          }
          if (this.ready && !this.complete) {
            this.complete = true;
            this.onComplete.dispatch();
          }
        },
        __class__: kk
      };
      function Am() {
        Ra.call(this);
        var a = this.getBackgroundColor();
        var b = 0;
        if ((a >> 16 & 255) * 0.299 + (a >> 8 & 255) * 0.587 + (a & 255) * 0.114 < 70) {
          b = 16777215;
        }
        a = this.getHeight() / 2 - 3.5;
        var c = this.getWidth() - 60;
        this.outline = new rg();
        this.outline.get_graphics().beginFill(b, 0.07);
        this.outline.get_graphics().drawRect(0, 0, c, 7);
        this.outline.set_x(30);
        this.outline.set_y(a);
        this.outline.set_alpha(0);
        this.addChild(this.outline);
        this.progress = new rg();
        this.progress.get_graphics().beginFill(b, 0.35);
        this.progress.get_graphics().drawRect(0, 0, c - 4, 3);
        this.progress.set_x(32);
        this.progress.set_y(a + 2);
        this.progress.set_scaleX(0);
        this.progress.set_alpha(0);
        this.addChild(this.progress);
        this.startAnimation = ia.getTimer() + 100;
        this.endAnimation = this.startAnimation + 1000;
        this.addEventListener("addedToStage", n(this, this.this_onAddedToStage));
      }
      h["openfl.display.DefaultPreloader"] = Am;
      Am.__name__ = "openfl.display.DefaultPreloader";
      Am.__super__ = Ra;
      Am.prototype = q(Ra.prototype, {
        getBackgroundColor: function () {
          var a = ia.get_current().stage.window.context.attributes;
          if (Object.prototype.hasOwnProperty.call(a, "background") && a.background != null) {
            return a.background;
          } else {
            return 0;
          }
        },
        getHeight: function () {
          var a = ia.get_current().stage.window.__height;
          if (a > 0) {
            return a;
          } else {
            return ia.get_current().stage.stageHeight;
          }
        },
        getWidth: function () {
          var a = ia.get_current().stage.window.__width;
          if (a > 0) {
            return a;
          } else {
            return ia.get_current().stage.stageWidth;
          }
        },
        onInit: function () {
          this.addEventListener("enterFrame", n(this, this.this_onEnterFrame));
        },
        onLoaded: function () {
          this.removeEventListener("enterFrame", n(this, this.this_onEnterFrame));
          this.dispatchEvent(new za("unload"));
        },
        onUpdate: function (a, b) {
          var c = 0;
          if (b > 0) {
            c = a / b;
            if (c > 1) {
              c = 1;
            }
          }
          this.progress.set_scaleX(c);
        },
        this_onAddedToStage: function (a) {
          this.removeEventListener("addedToStage", n(this, this.this_onAddedToStage));
          this.onInit();
          this.onUpdate(this.get_loaderInfo().bytesLoaded, this.get_loaderInfo().bytesTotal);
          this.addEventListener("progress", n(this, this.this_onProgress));
          this.addEventListener("complete", n(this, this.this_onComplete));
        },
        this_onComplete: function (a) {
          a.preventDefault();
          this.removeEventListener("progress", n(this, this.this_onProgress));
          this.removeEventListener("complete", n(this, this.this_onComplete));
          this.onLoaded();
        },
        this_onEnterFrame: function (a) {
          a = (ia.getTimer() - this.startAnimation) / (this.endAnimation - this.startAnimation);
          if (a < 0) {
            a = 0;
          }
          if (a > 1) {
            a = 1;
          }
          this.outline.set_alpha(this.progress.set_alpha(a));
        },
        this_onProgress: function (a) {
          this.onUpdate(a.bytesLoaded | 0, a.bytesTotal | 0);
        },
        __class__: Am
      });
      function ej() {
        this.channels = 0;
        this.filter = 5;
        this.index = this.height = 0;
        this.mipFilter = 2;
        this.wrap = this.width = 0;
      }
      h["openfl.display.ShaderInput"] = ej;
      ej.__name__ = "openfl.display.ShaderInput";
      ej.prototype = {
        __disableGL: function (a, b) {
          if (!(b < 0)) {
            a.setTextureAt(b, null);
          }
        },
        __updateGL: function (a, b, c, d, e, f) {
          c = c ?? this.input;
          d = d ?? this.filter;
          e = e ?? this.mipFilter;
          f = f ?? this.wrap;
          if (c != null) {
            a.setTextureAt(b, c.getTexture(a));
            a.setSamplerStateAt(b, f, d, e);
          } else {
            a.setTextureAt(b, null);
          }
        },
        __class__: ej
      };
      function ng() {
        this.index = 0;
      }
      h["openfl.display.ShaderParameter"] = ng;
      ng.__name__ = "openfl.display.ShaderParameter";
      ng.prototype = {
        __disableGL: function (a) {
          if (!(this.index < 0) && !(a = a.gl, this.__isUniform)) {
            for (var b = 0, c = this.__arrayLength; b < c;) {
              var d = b++;
              a.disableVertexAttribArray(this.index + d);
            }
          }
        },
        __updateGL: function (a, b) {
          if (!(this.index < 0)) {
            a = a.gl;
            b = b ?? this.value;
            var c = this.__isBool ? b : null;
            var d = this.__isFloat ? b : null;
            var e = this.__isInt ? b : null;
            if (this.__isUniform) {
              if (b != null && b.length >= this.__length) {
                switch (this.type) {
                  case 0:
                    a.uniform1i(this.index, c[0] ? 1 : 0);
                    break;
                  case 1:
                    a.uniform2i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                    break;
                  case 2:
                    a.uniform3i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                    break;
                  case 3:
                    a.uniform4i(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                    break;
                  case 4:
                    a.uniform1f(this.index, d[0]);
                    break;
                  case 5:
                    a.uniform2f(this.index, d[0], d[1]);
                    break;
                  case 6:
                    a.uniform3f(this.index, d[0], d[1], d[2]);
                    break;
                  case 7:
                    a.uniform4f(this.index, d[0], d[1], d[2], d[3]);
                    break;
                  case 8:
                    a.uniform1i(this.index, e[0]);
                    break;
                  case 9:
                    a.uniform2i(this.index, e[0], e[1]);
                    break;
                  case 10:
                    a.uniform3i(this.index, e[0], e[1], e[2]);
                    break;
                  case 11:
                    a.uniform4i(this.index, e[0], e[1], e[2], e[3]);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    Yc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    this.__uniformMatrix[4] = d[4];
                    this.__uniformMatrix[5] = d[5];
                    this.__uniformMatrix[6] = d[6];
                    this.__uniformMatrix[7] = d[7];
                    this.__uniformMatrix[8] = d[8];
                    Yc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = d[0];
                    this.__uniformMatrix[1] = d[1];
                    this.__uniformMatrix[2] = d[2];
                    this.__uniformMatrix[3] = d[3];
                    this.__uniformMatrix[4] = d[4];
                    this.__uniformMatrix[5] = d[5];
                    this.__uniformMatrix[6] = d[6];
                    this.__uniformMatrix[7] = d[7];
                    this.__uniformMatrix[8] = d[8];
                    this.__uniformMatrix[9] = d[9];
                    this.__uniformMatrix[10] = d[10];
                    this.__uniformMatrix[11] = d[11];
                    this.__uniformMatrix[12] = d[12];
                    this.__uniformMatrix[13] = d[13];
                    this.__uniformMatrix[14] = d[14];
                    this.__uniformMatrix[15] = d[15];
                    Yc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              } else {
                switch (this.type) {
                  case 4:
                    a.uniform1f(this.index, 0);
                    break;
                  case 5:
                    a.uniform2f(this.index, 0, 0);
                    break;
                  case 6:
                    a.uniform3f(this.index, 0, 0, 0);
                    break;
                  case 7:
                    a.uniform4f(this.index, 0, 0, 0, 0);
                    break;
                  case 0:
                  case 8:
                    a.uniform1i(this.index, 0);
                    break;
                  case 1:
                  case 9:
                    a.uniform2i(this.index, 0, 0);
                    break;
                  case 2:
                  case 10:
                    a.uniform3i(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 11:
                    a.uniform4i(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    Yc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    this.__uniformMatrix[4] = 0;
                    this.__uniformMatrix[5] = 0;
                    this.__uniformMatrix[6] = 0;
                    this.__uniformMatrix[7] = 0;
                    this.__uniformMatrix[8] = 0;
                    Yc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = 0;
                    this.__uniformMatrix[1] = 0;
                    this.__uniformMatrix[2] = 0;
                    this.__uniformMatrix[3] = 0;
                    this.__uniformMatrix[4] = 0;
                    this.__uniformMatrix[5] = 0;
                    this.__uniformMatrix[6] = 0;
                    this.__uniformMatrix[7] = 0;
                    this.__uniformMatrix[8] = 0;
                    this.__uniformMatrix[9] = 0;
                    this.__uniformMatrix[10] = 0;
                    this.__uniformMatrix[11] = 0;
                    this.__uniformMatrix[12] = 0;
                    this.__uniformMatrix[13] = 0;
                    this.__uniformMatrix[14] = 0;
                    this.__uniformMatrix[15] = 0;
                    Yc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              }
            } else if (this.__useArray || b != null && b.length != this.__length) {
              f = 0;
              k = this.__arrayLength;
              while (f < k) {
                g = f++;
                a.enableVertexAttribArray(this.index + g);
              }
            } else {
              for (var f = 0, k = this.__arrayLength; f < k;) {
                var g = f++;
                a.disableVertexAttribArray(this.index + g);
              }
              if (b != null) {
                switch (this.type) {
                  case 0:
                    a.vertexAttrib1f(this.index, c[0] ? 1 : 0);
                    break;
                  case 1:
                    a.vertexAttrib2f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0);
                    break;
                  case 2:
                    a.vertexAttrib3f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0);
                    break;
                  case 3:
                    a.vertexAttrib4f(this.index, c[0] ? 1 : 0, c[1] ? 1 : 0, c[2] ? 1 : 0, c[3] ? 1 : 0);
                    break;
                  case 4:
                    a.vertexAttrib1f(this.index, d[0]);
                    break;
                  case 5:
                    a.vertexAttrib2f(this.index, d[0], d[1]);
                    break;
                  case 6:
                    a.vertexAttrib3f(this.index, d[0], d[1], d[2]);
                    break;
                  case 7:
                    a.vertexAttrib4f(this.index, d[0], d[1], d[2], d[3]);
                    break;
                  case 8:
                    a.vertexAttrib1f(this.index, e[0]);
                    break;
                  case 9:
                    a.vertexAttrib2f(this.index, e[0], e[1]);
                    break;
                  case 10:
                    a.vertexAttrib3f(this.index, e[0], e[1], e[2]);
                    break;
                  case 11:
                    a.vertexAttrib4f(this.index, e[0], e[1], e[2], e[3]);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, d[0], d[1]);
                    a.vertexAttrib2f(this.index + 1, d[2], d[3]);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, d[0], d[1], d[2]);
                    a.vertexAttrib3f(this.index + 1, d[3], d[4], d[5]);
                    a.vertexAttrib3f(this.index + 2, d[6], d[7], d[8]);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, d[0], d[1], d[2], d[3]);
                    a.vertexAttrib4f(this.index + 1, d[4], d[5], d[6], d[7]);
                    a.vertexAttrib4f(this.index + 2, d[8], d[9], d[10], d[11]);
                    a.vertexAttrib4f(this.index + 3, d[12], d[13], d[14], d[15]);
                }
              } else {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, 0);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, 0, 0);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, 0, 0);
                    a.vertexAttrib2f(this.index + 1, 0, 0);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0);
                }
              }
            }
          }
        },
        __updateGLFromBuffer: function (a, b, c, d, e) {
          if (!(this.index < 0)) {
            a = a.gl;
            if (this.__isUniform) {
              if (d >= this.__length) {
                switch (this.type) {
                  case 4:
                    a.uniform1f(this.index, b[c]);
                    break;
                  case 5:
                    a.uniform2f(this.index, b[c], b[c + 1]);
                    break;
                  case 6:
                    a.uniform3f(this.index, b[c], b[c + 1], b[c + 2]);
                    break;
                  case 7:
                    a.uniform4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    break;
                  case 0:
                  case 8:
                    a.uniform1i(this.index, b[c] | 0);
                    break;
                  case 1:
                  case 9:
                    a.uniform2i(this.index, b[c] | 0, b[c + 1] | 0);
                    break;
                  case 2:
                  case 10:
                    a.uniform3i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0);
                    break;
                  case 3:
                  case 11:
                    a.uniform4i(this.index, b[c] | 0, b[c + 1] | 0, b[c + 2] | 0, b[c + 3] | 0);
                    break;
                  case 12:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    Yc.uniformMatrix2fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 16:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    this.__uniformMatrix[4] = b[c + 4];
                    this.__uniformMatrix[5] = b[c + 5];
                    this.__uniformMatrix[6] = b[c + 6];
                    this.__uniformMatrix[7] = b[c + 7];
                    this.__uniformMatrix[8] = b[c + 8];
                    Yc.uniformMatrix3fv(a, this.index, false, this.__uniformMatrix);
                    break;
                  case 20:
                    this.__uniformMatrix[0] = b[c];
                    this.__uniformMatrix[1] = b[c + 1];
                    this.__uniformMatrix[2] = b[c + 2];
                    this.__uniformMatrix[3] = b[c + 3];
                    this.__uniformMatrix[4] = b[c + 4];
                    this.__uniformMatrix[5] = b[c + 5];
                    this.__uniformMatrix[6] = b[c + 6];
                    this.__uniformMatrix[7] = b[c + 7];
                    this.__uniformMatrix[8] = b[c + 8];
                    this.__uniformMatrix[9] = b[c + 9];
                    this.__uniformMatrix[10] = b[c + 10];
                    this.__uniformMatrix[11] = b[c + 11];
                    this.__uniformMatrix[12] = b[c + 12];
                    this.__uniformMatrix[13] = b[c + 13];
                    this.__uniformMatrix[14] = b[c + 14];
                    this.__uniformMatrix[15] = b[c + 15];
                    Yc.uniformMatrix4fv(a, this.index, false, this.__uniformMatrix);
                }
              }
            } else if (this.__internal || d != 0 && d != this.__length) {
              b = a.FLOAT;
              if (this.__isBool) {
                b = a.INT;
              } else if (this.__isInt) {
                b = a.INT;
              }
              f = 0;
              for (k = this.__arrayLength; f < k;) {
                g = f++;
                a.enableVertexAttribArray(this.index + g);
              }
              if (d > 0) {
                f = 0;
                k = this.__arrayLength;
                while (f < k) {
                  g = f++;
                  a.vertexAttribPointer(this.index + g, this.__length, b, false, this.__length * 4, (c + e * this.__length + g * this.__arrayLength) * 4);
                }
              }
            } else {
              for (var f = 0, k = this.__arrayLength; f < k;) {
                var g = f++;
                a.disableVertexAttribArray(this.index + g);
              }
              if (d > 0) {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, b[c]);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, b[c], b[c + 1]);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, b[c], b[c + 1], b[c + 2]);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, b[c], b[c + 1]);
                    a.vertexAttrib2f(this.index + 1, b[c + 2], b[c + 2 + 1]);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, b[c], b[c + 1], b[c + 2]);
                    a.vertexAttrib3f(this.index + 1, b[c + 3], b[c + 3 + 1], b[c + 3 + 2]);
                    a.vertexAttrib3f(this.index + 2, b[c + 6], b[c + 6 + 1], b[c + 6 + 2]);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, b[c], b[c + 1], b[c + 2], b[c + 3]);
                    a.vertexAttrib4f(this.index + 1, b[c + 4], b[c + 4 + 1], b[c + 4 + 2], b[c + 4 + 3]);
                    a.vertexAttrib4f(this.index + 2, b[c + 8], b[c + 8 + 1], b[c + 8 + 2], b[c + 8 + 3]);
                    a.vertexAttrib4f(this.index + 3, b[c + 12], b[c + 12 + 1], b[c + 12 + 2], b[c + 12 + 3]);
                }
              } else {
                switch (this.type) {
                  case 0:
                  case 4:
                  case 8:
                    a.vertexAttrib1f(this.index, 0);
                    break;
                  case 1:
                  case 5:
                  case 9:
                    a.vertexAttrib2f(this.index, 0, 0);
                    break;
                  case 2:
                  case 6:
                  case 10:
                    a.vertexAttrib3f(this.index, 0, 0, 0);
                    break;
                  case 3:
                  case 7:
                  case 11:
                    a.vertexAttrib4f(this.index, 0, 0, 0, 0);
                    break;
                  case 12:
                    a.vertexAttrib2f(this.index + 0, 0, 0);
                    a.vertexAttrib2f(this.index + 1, 0, 0);
                    break;
                  case 16:
                    a.vertexAttrib3f(this.index + 0, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 1, 0, 0, 0);
                    a.vertexAttrib3f(this.index + 2, 0, 0, 0);
                    break;
                  case 20:
                    a.vertexAttrib4f(this.index + 0, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 1, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 2, 0, 0, 0, 0);
                    a.vertexAttrib4f(this.index + 3, 0, 0, 0, 0);
                }
              }
            }
          }
        },
        set_name: function (a) {
          this.__internal = v.startsWith(a, "openfl_");
          return this.name = a;
        },
        __class__: ng,
        __properties__: {
          set_name: "set_name"
        }
      };
      function rg() {
        Ba.call(this);
        this.__drawableType = 3;
      }
      h["openfl.display.Shape"] = rg;
      rg.__name__ = "openfl.display.Shape";
      rg.__super__ = Ba;
      rg.prototype = q(Ba.prototype, {
        get_graphics: function () {
          if (this.__graphics == null) {
            this.__graphics = new ee(this);
          }
          return this.__graphics;
        },
        __class__: rg,
        __properties__: q(Ba.prototype.__properties__, {
          get_graphics: "get_graphics"
        })
      });
      function Ei(a, b, c, d) {
        Da.call(this);
        this.__drawableType = 6;
        this.enabled = true;
        this.trackAsMenu = false;
        this.useHandCursor = true;
        this.__upState = a ?? new Ba();
        this.__overState = b;
        this.__downState = c;
        this.set_hitTestState(d ?? new Ba());
        this.addEventListener("mouseDown", n(this, this.__this_onMouseDown));
        this.addEventListener("mouseOut", n(this, this.__this_onMouseOut));
        this.addEventListener("mouseOver", n(this, this.__this_onMouseOver));
        this.addEventListener("mouseUp", n(this, this.__this_onMouseUp));
        this.__tabEnabled = true;
        this.set___currentState(this.__upState);
        if (Ei.__constructor != null) {
          a = Ei.__constructor;
          Ei.__constructor = null;
          a(this);
        }
      }
      h["openfl.display.SimpleButton"] = Ei;
      Ei.__name__ = "openfl.display.SimpleButton";
      Ei.__super__ = Da;
      Ei.prototype = q(Da.prototype, {
        __getBounds: function (a, b) {
          Da.prototype.__getBounds.call(this, a, b);
          var c = ya.__pool.get();
          var d = this.__currentState.__transform;
          c.a = d.a * b.a + d.b * b.c;
          c.b = d.a * b.b + d.b * b.d;
          c.c = d.c * b.a + d.d * b.c;
          c.d = d.c * b.b + d.d * b.d;
          c.tx = d.tx * b.a + d.ty * b.c + b.tx;
          c.ty = d.tx * b.b + d.ty * b.d + b.ty;
          this.__currentState.__getBounds(a, c);
          ya.__pool.release(c);
        },
        __getRenderBounds: function (a, b) {
          if (this.__scrollRect != null) {
            Da.prototype.__getRenderBounds.call(this, a, b);
          } else {
            Da.prototype.__getBounds.call(this, a, b);
            var c = ya.__pool.get();
            var d = this.__currentState.__transform;
            c.a = d.a * b.a + d.b * b.c;
            c.b = d.a * b.b + d.b * b.d;
            c.c = d.c * b.a + d.d * b.c;
            c.d = d.c * b.b + d.d * b.d;
            c.tx = d.tx * b.a + d.ty * b.c + b.tx;
            c.ty = d.tx * b.b + d.ty * b.d + b.ty;
            this.__currentState.__getRenderBounds(a, c);
            ya.__pool.release(c);
          }
        },
        __getCursor: function () {
          if (this.useHandCursor && !this.__ignoreEvent && this.enabled) {
            return "button";
          } else {
            return null;
          }
        },
        __hitTest: function (a, b, c, d, e, f) {
          var k = false;
          if (this.get_hitTestState() != null) {
            if (this.get_hitTestState().__hitTest(a, b, c, d, e, f)) {
              if (d != null) {
                if (d.length == 0) {
                  d[0] = f;
                } else {
                  d[d.length - 1] = f;
                }
              }
              k = !e || this.mouseEnabled;
            }
          } else if (this.__currentState != null) {
            if (!f.get_visible() || this.__isMask || e && !this.mouseEnabled || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
              k = false;
            } else if (this.__currentState.__hitTest(a, b, c, d, e, f)) {
              k = e;
            }
          }
          if (d != null) {
            while (d.length > 1 && d[d.length - 1] == d[d.length - 2]) {
              d.pop();
            }
          }
          return k;
        },
        __hitTestMask: function (a, b) {
          var c = false;
          if (this.__currentState.__hitTestMask(a, b)) {
            c = true;
          }
          return c;
        },
        __setStageReference: function (a) {
          Da.prototype.__setStageReference.call(this, a);
          if (this.__currentState != null) {
            this.__currentState.__setStageReference(a);
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__setStageReference(a);
          }
        },
        __setTransformDirty: function () {
          Da.prototype.__setTransformDirty.call(this);
          if (this.__currentState != null) {
            this.__currentState.__setTransformDirty();
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__setTransformDirty();
          }
        },
        __update: function (a, b) {
          Da.prototype.__update.call(this, a, b);
          if (b) {
            if (this.__currentState != null) {
              this.__currentState.__update(a, true);
            }
            if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
              this.get_hitTestState().__update(a, true);
            }
          }
        },
        __updateTransforms: function (a) {
          Da.prototype.__updateTransforms.call(this, a);
          if (this.__currentState != null) {
            this.__currentState.__updateTransforms();
          }
          if (this.get_hitTestState() != null && this.get_hitTestState() != this.__currentState) {
            this.get_hitTestState().__updateTransforms();
          }
        },
        get_downState: function () {
          return this.__downState;
        },
        get_hitTestState: function () {
          return this.__hitTestState;
        },
        set_hitTestState: function (a) {
          if (this.__hitTestState != null && this.__hitTestState != a && this.__hitTestState != this.get_downState() && this.__hitTestState != this.get_upState() && this.__hitTestState != this.get_overState()) {
            this.__hitTestState.__renderParent = null;
          }
          if (a != null) {
            a.__renderParent = this;
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
          }
          return this.__hitTestState = a;
        },
        get_overState: function () {
          return this.__overState;
        },
        get_upState: function () {
          return this.__upState;
        },
        set___currentState: function (a) {
          if (this.__currentState != null && this.__currentState != this.get_hitTestState()) {
            this.__currentState.__renderParent = null;
          }
          if (a != null && a.parent != null) {
            a.parent.removeChild(a);
          }
          if (Ba.__supportDOM && this.__previousStates == null) {
            this.__previousStates = kb.toObjectVector(null);
          }
          if (a != this.__currentState) {
            if (Ba.__supportDOM) {
              if (this.__currentState != null) {
                this.__currentState.__setStageReference(null);
                this.__previousStates.push(this.__currentState);
              }
              var b = this.__previousStates.indexOf(a, 0);
              if (b > -1) {
                var c = this.__previousStates;
                c.__tempIndex = b;
                b = 0;
                for (var d = []; b < d.length;) {
                  var e = d[b++];
                  c.insertAt(c.__tempIndex, e);
                  c.__tempIndex++;
                }
                c.splice(c.__tempIndex, 1);
              }
            }
            if (a != null) {
              a.__renderParent = this;
              if (!a.__renderDirty) {
                a.__renderDirty = true;
                a.__setParentRenderDirty();
              }
            }
            if (!this.__renderDirty) {
              this.__renderDirty = true;
              this.__setParentRenderDirty();
            }
          }
          return this.__currentState = a;
        },
        __this_onMouseDown: function (a) {
          if (this.enabled) {
            this.set___currentState(this.get_downState());
          }
        },
        __this_onMouseOut: function (a) {
          this.__ignoreEvent = false;
          if (this.get_upState() != this.__currentState) {
            this.set___currentState(this.get_upState());
          }
        },
        __this_onMouseOver: function (a) {
          if (a.buttonDown) {
            this.__ignoreEvent = true;
          }
          if (this.get_overState() != this.__currentState && this.get_overState() != null && !this.__ignoreEvent && this.enabled) {
            this.set___currentState(this.get_overState());
          }
        },
        __this_onMouseUp: function (a) {
          this.__ignoreEvent = false;
          if (this.enabled && this.get_overState() != null) {
            this.set___currentState(this.get_overState());
          } else {
            this.set___currentState(this.get_upState());
          }
        },
        __class__: Ei,
        __properties__: q(Da.prototype.__properties__, {
          set___currentState: "set___currentState",
          get_upState: "get_upState",
          get_overState: "get_overState",
          set_hitTestState: "set_hitTestState",
          get_hitTestState: "get_hitTestState",
          get_downState: "get_downState"
        })
      });
      function Fi(a, b) {
        gb.call(this);
        this.__drawableType = 5;
        this.set_name(null);
        this.__color = -1;
        this.__colorSplit = [255, 255, 255];
        this.__colorString = "#FFFFFF";
        this.__contentsScaleFactor = 1;
        this.__deltaTime = this.__currentTabOrderIndex = 0;
        this.__displayState = 2;
        this.__logicalHeight = this.__logicalWidth = this.__lastClickTime = this.__mouseY = this.__mouseX = 0;
        this.__displayMatrix = new ya();
        this.__displayRect = new ba();
        this.__renderDirty = true;
        this.stage3Ds = kb.toObjectVector(null);
        this.stage3Ds.push(new Kh(this));
        this.stage3Ds.push(new Kh(this));
        this.stage3Ds.push(new Kh(this));
        this.stage3Ds.push(new Kh(this));
        this.stage = this;
        this.align = 6;
        this.allowsFullScreenInteractive = this.allowsFullScreen = true;
        this.__quality = 1;
        this.__scaleMode = 2;
        this.showDefaultContextMenu = true;
        this.softKeyboardRect = new ba();
        this.stageFocusRect = true;
        this.__macKeyboard = /AppleWebKit/.test(navigator.userAgent) && /Mobile\/\w+/.test(navigator.userAgent) || /Mac/.test(navigator.platform);
        this.__clearBeforeRender = true;
        this.__forceRender = false;
        this.__stack = [];
        this.__rollOutStack = [];
        this.__mouseOutStack = [];
        this.__touchData = new Ac();
        if (ia.get_current().__loaderInfo == null) {
          ia.get_current().__loaderInfo = Nf.create(null);
          ia.get_current().__loaderInfo.content = ia.get_current();
        }
        this.__uncaughtErrorEvents = ia.get_current().__loaderInfo.uncaughtErrorEvents;
        this.application = a.application;
        this.window = a;
        this.set_color(b);
        this.__contentsScaleFactor = a.__scale;
        this.__wasFullscreen = a.__fullscreen;
        this.__resize();
        if (ia.get_current().stage == null) {
          this.stage.addChild(ia.get_current());
        }
      }
      h["openfl.display.Stage"] = Fi;
      Fi.__name__ = "openfl.display.Stage";
      Fi.__interfaces__ = [Ea];
      Fi.__super__ = gb;
      Fi.prototype = q(gb.prototype, {
        __broadcastEvent: function (a) {
          if (Object.prototype.hasOwnProperty.call(Ba.__broadcastEvents.h, a.type)) {
            for (var b = Ba.__broadcastEvents.h[a.type], c = 0; c < b.length;) {
              var d = b[c];
              ++c;
              if (d.stage == this || d.stage == null) {
                if (this.__uncaughtErrorEvents.__enabled) {
                  try {
                    d.__dispatch(a);
                  } catch (e) {
                    Oa.lastError = e;
                    d = I.caught(e).unwrap();
                    this.__handleError(d);
                  }
                } else {
                  d.__dispatch(a);
                }
              }
            }
          }
        },
        __createRenderer: function () {
          var a = this.window.__width * this.window.__scale | 0;
          var b = this.window.__height * this.window.__scale | 0;
          switch (this.window.context.type) {
            case "canvas":
              this.__renderer = new og(this.window.context.canvas2D);
              break;
            case "dom":
              this.__renderer = new Rj(this.window.context.dom);
              break;
            case "opengl":
            case "opengles":
            case "webgl":
              this.context3D = new Kb(this);
              this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, true, true, true);
              this.context3D.present();
              this.__renderer = new tb(this.context3D);
          }
          if (this.__renderer != null) {
            var c = this.get_quality();
            this.__renderer.__allowSmoothing = c != 2;
            this.__renderer.__pixelRatio = this.window.__scale;
            this.__renderer.__worldTransform = this.__displayMatrix;
            this.__renderer.__stage = this;
            this.__renderer.__resize(a, b);
          }
        },
        __dispatchEvent: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              var b = gb.prototype.__dispatchEvent.call(this, a);
            } catch (c) {
              Oa.lastError = c;
              a = I.caught(c).unwrap();
              this.__handleError(a);
              b = false;
            }
          } else {
            b = gb.prototype.__dispatchEvent.call(this, a);
          }
          return b;
        },
        __dispatchPendingMouseEvent: function () {
          if (this.__pendingMouseEvent) {
            this.__onMouse("mouseMove", this.__pendingMouseX, this.__pendingMouseY, 0);
            this.__pendingMouseEvent = false;
          }
        },
        __dispatchStack: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              var c = b.length;
              if (c == 0) {
                a.eventPhase = 2;
                var d = a.target;
                d.__dispatch(a);
              } else {
                a.eventPhase = 1;
                a.target = b[b.length - 1];
                for (var e = 0, f = c - 1; e < f;) {
                  var k = e++;
                  b[k].__dispatch(a);
                  if (a.__isCanceled) {
                    return;
                  }
                }
                a.eventPhase = 2;
                d = a.target;
                d.__dispatch(a);
                if (!a.__isCanceled && a.bubbles) {
                  a.eventPhase = 3;
                  k = c - 2;
                  while (k >= 0) {
                    b[k].__dispatch(a);
                    if (a.__isCanceled) {
                      break;
                    }
                    --k;
                  }
                }
              }
            } catch (t) {
              Oa.lastError = t;
              a = I.caught(t).unwrap();
              this.__handleError(a);
            }
          } else {
            c = b.length;
            if (c == 0) {
              a.eventPhase = 2;
              d = a.target;
              d.__dispatch(a);
            } else {
              a.eventPhase = 1;
              a.target = b[b.length - 1];
              e = 0;
              for (f = c - 1; e < f;) {
                k = e++;
                b[k].__dispatch(a);
                if (a.__isCanceled) {
                  return;
                }
              }
              a.eventPhase = 2;
              d = a.target;
              d.__dispatch(a);
              if (!a.__isCanceled && a.bubbles) {
                a.eventPhase = 3;
                k = c - 2;
                while (k >= 0) {
                  b[k].__dispatch(a);
                  if (a.__isCanceled) {
                    break;
                  }
                  --k;
                }
              }
            }
          }
        },
        __dispatchTarget: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              return a.__dispatchEvent(b);
            } catch (c) {
              Oa.lastError = c;
              a = I.caught(c).unwrap();
              this.__handleError(a);
              return false;
            }
          } else {
            return a.__dispatchEvent(b);
          }
        },
        __drag: function (a) {
          var b = this.__dragObject.parent;
          if (b != null) {
            b = b.__getWorldTransform();
            var c = b.a * b.d - b.b * b.c;
            if (c == 0) {
              a.x = -b.tx;
              a.y = -b.ty;
            } else {
              var d = 1 / c * (b.c * (b.ty - a.y) + b.d * (a.x - b.tx));
              a.y = 1 / c * (b.a * (a.y - b.ty) + b.b * (b.tx - a.x));
              a.x = d;
            }
          }
          b = a.x + this.__dragOffsetX;
          a = a.y + this.__dragOffsetY;
          if (this.__dragBounds != null) {
            if (b < this.__dragBounds.x) {
              b = this.__dragBounds.x;
            } else if (b > this.__dragBounds.get_right()) {
              b = this.__dragBounds.get_right();
            }
            if (a < this.__dragBounds.y) {
              a = this.__dragBounds.y;
            } else if (a > this.__dragBounds.get_bottom()) {
              a = this.__dragBounds.get_bottom();
            }
          }
          this.__dragObject.set_x(b);
          this.__dragObject.set_y(a);
        },
        __getInteractive: function (a) {
          if (a != null) {
            a.push(this);
          }
          return true;
        },
        __globalToLocal: function (a, b) {
          if (a != b) {
            b.copyFrom(a);
          }
          return b;
        },
        __handleError: function (a) {
          var b = new Ph("uncaughtError", true, true, a);
          ia.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(b);
          if (!b.__preventDefault) {
            b = Wg.toString(Wg.exceptionStack());
            console.log(b);
            b = y.string(a);
            console.log(b);
            try {
              if (a != null && Object.prototype.hasOwnProperty.call(a, "stack") && a.stack != null && a.stack != "") {
                console.log(a.stack);
                a.stack = a.stack;
              } else {
                var c = Wg.toString(Wg.callStack());
                console.log(c);
              }
            } catch (d) {
              Oa.lastError = d;
            }
            throw a;
          }
        },
        __onKey: function (a, b, c) {
          this.__dispatchPendingMouseEvent();
          Wb.__altKey = Cb.get_altKey(c);
          Wb.__commandKey = Cb.get_metaKey(c);
          Wb.__controlKey = Cb.get_ctrlKey(c) && !Cb.get_metaKey(c);
          Wb.__ctrlKey = Cb.get_ctrlKey(c);
          Wb.__shiftKey = Cb.get_shiftKey(c);
          var d = [];
          if (this.__focus == null) {
            this.__getInteractive(d);
          } else {
            this.__focus.__getInteractive(d);
          }
          if (d.length > 0) {
            switch (b) {
              case 1073741908:
              case 1073741909:
              case 1073741910:
              case 1073741911:
              case 1073741912:
              case 1073741913:
              case 1073741914:
              case 1073741915:
              case 1073741916:
              case 1073741917:
              case 1073741918:
              case 1073741919:
              case 1073741920:
              case 1073741921:
              case 1073741922:
              case 1073741923:
              case 1073742044:
                var e = 3;
                break;
              case 1073742048:
              case 1073742049:
              case 1073742050:
              case 1073742051:
                e = 1;
                break;
              case 1073742052:
              case 1073742053:
              case 1073742054:
              case 1073742055:
                e = 2;
                break;
              default:
                e = 0;
            }
            switch (b) {
              case 8:
                b = 8;
                break;
              case 9:
                b = 9;
                break;
              case 13:
                b = 13;
                break;
              case 27:
                b = 27;
                break;
              case 32:
                b = 32;
                break;
              case 33:
                b = 49;
                break;
              case 34:
                b = 222;
                break;
              case 35:
                b = 51;
                break;
              case 36:
                b = 52;
                break;
              case 37:
                b = 53;
                break;
              case 38:
                b = 55;
                break;
              case 39:
                b = 222;
                break;
              case 40:
                b = 57;
                break;
              case 41:
                b = 48;
                break;
              case 42:
                b = 56;
                break;
              case 44:
                b = 188;
                break;
              case 45:
                b = 189;
                break;
              case 46:
                b = 190;
                break;
              case 47:
                b = 191;
                break;
              case 48:
                b = 48;
                break;
              case 49:
                b = 49;
                break;
              case 50:
                b = 50;
                break;
              case 51:
                b = 51;
                break;
              case 52:
                b = 52;
                break;
              case 53:
                b = 53;
                break;
              case 54:
                b = 54;
                break;
              case 55:
                b = 55;
                break;
              case 56:
                b = 56;
                break;
              case 57:
                b = 57;
                break;
              case 58:
                b = 186;
                break;
              case 59:
                b = 186;
                break;
              case 60:
                b = 60;
                break;
              case 61:
                b = 187;
                break;
              case 62:
                b = 190;
                break;
              case 63:
                b = 191;
                break;
              case 64:
                b = 50;
                break;
              case 91:
                b = 219;
                break;
              case 92:
                b = 220;
                break;
              case 93:
                b = 221;
                break;
              case 94:
                b = 54;
                break;
              case 95:
                b = 189;
                break;
              case 96:
                b = 192;
                break;
              case 97:
                b = 65;
                break;
              case 98:
                b = 66;
                break;
              case 99:
                b = 67;
                break;
              case 100:
                b = 68;
                break;
              case 101:
                b = 69;
                break;
              case 102:
                b = 70;
                break;
              case 103:
                b = 71;
                break;
              case 104:
                b = 72;
                break;
              case 105:
                b = 73;
                break;
              case 106:
                b = 74;
                break;
              case 107:
                b = 75;
                break;
              case 108:
                b = 76;
                break;
              case 109:
                b = 77;
                break;
              case 110:
                b = 78;
                break;
              case 111:
                b = 79;
                break;
              case 112:
                b = 80;
                break;
              case 113:
                b = 81;
                break;
              case 114:
                b = 82;
                break;
              case 115:
                b = 83;
                break;
              case 116:
                b = 84;
                break;
              case 117:
                b = 85;
                break;
              case 118:
                b = 86;
                break;
              case 119:
                b = 87;
                break;
              case 120:
                b = 88;
                break;
              case 121:
                b = 89;
                break;
              case 122:
                b = 90;
                break;
              case 127:
                b = 46;
                break;
              case 1073741881:
                b = 20;
                break;
              case 1073741882:
                b = 112;
                break;
              case 1073741883:
                b = 113;
                break;
              case 1073741884:
                b = 114;
                break;
              case 1073741885:
                b = 115;
                break;
              case 1073741886:
                b = 116;
                break;
              case 1073741887:
                b = 117;
                break;
              case 1073741888:
                b = 118;
                break;
              case 1073741889:
                b = 119;
                break;
              case 1073741890:
                b = 120;
                break;
              case 1073741891:
                b = 121;
                break;
              case 1073741892:
                b = 122;
                break;
              case 1073741893:
                b = 123;
                break;
              case 1073741894:
                b = 301;
                break;
              case 1073741895:
                b = 145;
                break;
              case 1073741896:
                b = 19;
                break;
              case 1073741897:
                b = 45;
                break;
              case 1073741898:
                b = 36;
                break;
              case 1073741899:
                b = 33;
                break;
              case 1073741901:
                b = 35;
                break;
              case 1073741902:
                b = 34;
                break;
              case 1073741903:
                b = 39;
                break;
              case 1073741904:
                b = 37;
                break;
              case 1073741905:
                b = 40;
                break;
              case 1073741906:
                b = 38;
                break;
              case 1073741907:
                b = 144;
                break;
              case 1073741908:
                b = 111;
                break;
              case 1073741909:
                b = 106;
                break;
              case 1073741910:
                b = 109;
                break;
              case 1073741911:
                b = 107;
                break;
              case 1073741912:
                b = 13;
                break;
              case 1073741913:
                b = 97;
                break;
              case 1073741914:
                b = 98;
                break;
              case 1073741915:
                b = 99;
                break;
              case 1073741916:
                b = 100;
                break;
              case 1073741917:
                b = 101;
                break;
              case 1073741918:
                b = 102;
                break;
              case 1073741919:
                b = 103;
                break;
              case 1073741920:
                b = 104;
                break;
              case 1073741921:
                b = 105;
                break;
              case 1073741922:
                b = 96;
                break;
              case 1073741923:
                b = 110;
                break;
              case 1073741925:
                b = 302;
                break;
              case 1073741928:
                b = 124;
                break;
              case 1073741929:
                b = 125;
                break;
              case 1073741930:
                b = 126;
                break;
              case 1073741982:
                b = 13;
                break;
              case 1073742044:
                b = 110;
                break;
              case 1073742048:
                b = 17;
                break;
              case 1073742049:
                b = 16;
                break;
              case 1073742050:
                b = 18;
                break;
              case 1073742051:
                b = 15;
                break;
              case 1073742052:
                b = 17;
                break;
              case 1073742053:
                b = 16;
                break;
              case 1073742054:
                b = 18;
                break;
              case 1073742055:
                b = 15;
            }
            var f = qp.__getCharCode(b, Cb.get_shiftKey(c));
            if (a == "keyUp" && (b == 32 || b == 13) && this.__focus instanceof Ra) {
              var k = wa.__cast(this.__focus, Ra);
              if (k.get_buttonMode() && k.focusRect == 1) {
                var g = ob.__pool.get();
                var l = ob.__pool.get();
                l.x = this.__mouseX;
                l.y = this.__mouseY;
                k = Wb.__create("click", 0, 0, this.__mouseX, this.__mouseY, k.__globalToLocal(l, g), k);
                this.__dispatchStack(k, d);
                if (k.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
                ob.__pool.release(l);
                ob.__pool.release(g);
              }
            }
            e = new Bm(a, true, true, f, b, e, this.__macKeyboard ? Cb.get_ctrlKey(c) || Cb.get_metaKey(c) : Cb.get_ctrlKey(c), Cb.get_altKey(c), Cb.get_shiftKey(c), Cb.get_ctrlKey(c), Cb.get_metaKey(c));
            d.reverse();
            this.__dispatchStack(e, d);
            if (e.__preventDefault) {
              if (a == "keyDown") {
                this.window.onKeyDown.cancel();
              } else {
                this.window.onKeyUp.cancel();
              }
            } else if (a == "keyDown" && b == 9) {
              d = [];
              this.__tabTest(d);
              f = -1;
              a = null;
              b = Cb.get_shiftKey(c) ? -1 : 1;
              if (d.length > 1) {
                Zc.sort(d, function (a, b) {
                  return a.get_tabIndex() - b.get_tabIndex();
                });
                if (d[d.length - 1].get_tabIndex() != -1) {
                  for (l = 0; l < d.length;) {
                    if (d[l].get_tabIndex() > -1) {
                      if (l > 0) {
                        d.splice(0, l);
                      }
                      break;
                    }
                    ++l;
                  }
                }
                if (this.get_focus() != null) {
                  l = this.get_focus();
                  for (g = d.indexOf(l); g == -1 && l != null;) {
                    f = l.parent;
                    if (f != null && f.get_tabChildren()) {
                      l = f.getChildIndex(l);
                      if (l == -1) {
                        l = f;
                        continue;
                      }
                      for (l += b; Cb.get_shiftKey(c) ? l >= 0 : l < f.get_numChildren();) {
                        k = f.getChildAt(l);
                        if (k instanceof Da && (g = wa.__cast(k, Da), g = d.indexOf(g), g != -1)) {
                          b = 0;
                          break;
                        }
                        l += b;
                      }
                    } else if (Cb.get_shiftKey(c)) {
                      g = d.indexOf(f);
                      if (g != -1) {
                        b = 0;
                      }
                    }
                    l = f;
                  }
                  f = g < 0 ? 0 : g + b;
                } else {
                  f = this.__currentTabOrderIndex;
                }
              } else if (d.length == 1) {
                a = d[0];
                if (this.get_focus() == a) {
                  a = null;
                }
              }
              g = f >= 0 && f < d.length;
              if (d.length == 1 || d.length == 0 && this.get_focus() != null) {
                f = 0;
              } else if (d.length > 1) {
                if (f < 0) {
                  f += d.length;
                }
                f %= d.length;
                a = d[f];
                if (a == this.get_focus()) {
                  f += b;
                  if (f < 0) {
                    f += d.length;
                  }
                  f %= d.length;
                  a = d[f];
                }
              }
              b = null;
              if (this.get_focus() != null) {
                b = new Lh("keyFocusChange", true, true, a, Cb.get_shiftKey(c), 0);
                d = [];
                this.get_focus().__getInteractive(d);
                d.reverse();
                this.__dispatchStack(b, d);
                if (b.isDefaultPrevented()) {
                  this.window.onKeyDown.cancel();
                }
              }
              if (b == null || !b.isDefaultPrevented()) {
                this.__currentTabOrderIndex = f;
                if (a != null) {
                  this.set_focus(a);
                }
                if (g) {
                  this.window.onKeyDown.cancel();
                }
              }
            } else if (a == "keyDown" && this.get_focus() != null && !(this.get_focus() instanceof Sc) && (this.__macKeyboard ? Cb.get_ctrlKey(c) || Cb.get_metaKey(c) : Cb.get_ctrlKey(c)) && !Cb.get_altKey(c) && !Cb.get_shiftKey(c)) {
              switch (b) {
                case 65:
                  c = new za("selectAll", true, true);
                  this.get_focus().dispatchEvent(c);
                  break;
                case 67:
                  c = new za("copy", true, true);
                  this.get_focus().dispatchEvent(c);
                  break;
                case 86:
                  c = new za("paste", true, true);
                  this.get_focus().dispatchEvent(c);
                  break;
                case 88:
                  c = new za("cut", true, true);
                  this.get_focus().dispatchEvent(c);
              }
            }
            if (e.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
        },
        __onLimeCreateWindow: function (a) {
          if (this.window == a) {
            var b = this;
            a.onActivate.add(function () {
              b.__onLimeWindowActivate(a);
            });
            var c = this;
            a.onClose.add(function () {
              c.__onLimeWindowClose(a);
            }, false, -9000);
            var d = this;
            a.onDeactivate.add(function () {
              d.__onLimeWindowDeactivate(a);
            });
            var e = this;
            function f(b) {
              e.__onLimeWindowDropFile(a, b);
            }
            a.onDropFile.add(f);
            var k = this;
            a.onEnter.add(function () {
              k.__onLimeWindowEnter(a);
            });
            var g = this;
            a.onExpose.add(function () {
              g.__onLimeWindowExpose(a);
            });
            var l = this;
            a.onFocusIn.add(function () {
              l.__onLimeWindowFocusIn(a);
            });
            var h = this;
            a.onFocusOut.add(function () {
              h.__onLimeWindowFocusOut(a);
            });
            var p = this;
            a.onFullscreen.add(function () {
              p.__onLimeWindowFullscreen(a);
            });
            var m = this;
            f = function (b, c) {
              m.__onLimeKeyDown(a, b, c);
            };
            a.onKeyDown.add(f);
            var r = this;
            f = function (b, c) {
              r.__onLimeKeyUp(a, b, c);
            };
            a.onKeyUp.add(f);
            var q = this;
            a.onLeave.add(function () {
              q.__onLimeWindowLeave(a);
            });
            var w = this;
            a.onMinimize.add(function () {
              w.__onLimeWindowMinimize(a);
            });
            var u = this;
            f = function (b, c, d) {
              u.__onLimeMouseDown(a, b, c, d);
            };
            a.onMouseDown.add(f);
            var v = this;
            f = function (b, c) {
              v.__onLimeMouseMove(a, b, c);
            };
            a.onMouseMove.add(f);
            var A = this;
            f = function (b, c) {
              A.__onLimeMouseMoveRelative(a, b, c);
            };
            a.onMouseMoveRelative.add(f);
            var y = this;
            f = function (b, c, d) {
              y.__onLimeMouseUp(a, b, c, d);
            };
            a.onMouseUp.add(f);
            var z = this;
            f = function (b, c, d) {
              z.__onLimeMouseWheel(a, b, c, d);
            };
            a.onMouseWheel.add(f);
            var Y = this;
            f = function (b, c) {
              Y.__onLimeWindowMove(a, b, c);
            };
            a.onMove.add(f);
            a.onRender.add(n(this, this.__onLimeRender));
            a.onRenderContextLost.add(n(this, this.__onLimeRenderContextLost));
            a.onRenderContextRestored.add(n(this, this.__onLimeRenderContextRestored));
            var C = this;
            f = function (b, c) {
              C.__onLimeWindowResize(a, b, c);
            };
            a.onResize.add(f);
            var La = this;
            a.onRestore.add(function () {
              La.__onLimeWindowRestore(a);
            });
            var D = this;
            f = function (b, c, d) {
              D.__onLimeTextEdit(a, b, c, d);
            };
            a.onTextEdit.add(f);
            var E = this;
            f = function (b) {
              E.__onLimeTextInput(a, b);
            };
            a.onTextInput.add(f);
            this.__onLimeWindowCreate(a);
          }
        },
        __onLimeGamepadAxisMove: function (a, b, c) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              vb.__onGamepadAxisMove(a, b, c);
            } catch (d) {
              Oa.lastError = d;
              a = I.caught(d).unwrap();
              this.__handleError(a);
            }
          } else {
            vb.__onGamepadAxisMove(a, b, c);
          }
        },
        __onLimeGamepadButtonDown: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              vb.__onGamepadButtonDown(a, b);
            } catch (c) {
              Oa.lastError = c;
              a = I.caught(c).unwrap();
              this.__handleError(a);
            }
          } else {
            vb.__onGamepadButtonDown(a, b);
          }
        },
        __onLimeGamepadButtonUp: function (a, b) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              vb.__onGamepadButtonUp(a, b);
            } catch (c) {
              Oa.lastError = c;
              a = I.caught(c).unwrap();
              this.__handleError(a);
            }
          } else {
            vb.__onGamepadButtonUp(a, b);
          }
        },
        __onLimeGamepadConnect: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              vb.__onGamepadConnect(a);
            } catch (k) {
              Oa.lastError = k;
              var b = I.caught(k).unwrap();
              this.__handleError(b);
            }
          } else {
            vb.__onGamepadConnect(a);
          }
          var c = this;
          b = function (b, d) {
            c.__onLimeGamepadAxisMove(a, b, d);
          };
          a.onAxisMove.add(b);
          var d = this;
          b = function (b) {
            d.__onLimeGamepadButtonDown(a, b);
          };
          a.onButtonDown.add(b);
          var e = this;
          b = function (b) {
            e.__onLimeGamepadButtonUp(a, b);
          };
          a.onButtonUp.add(b);
          var f = this;
          a.onDisconnect.add(function () {
            f.__onLimeGamepadDisconnect(a);
          });
        },
        __onLimeGamepadDisconnect: function (a) {
          if (this.__uncaughtErrorEvents.__enabled) {
            try {
              vb.__onGamepadDisconnect(a);
            } catch (b) {
              Oa.lastError = b;
              a = I.caught(b).unwrap();
              this.__handleError(a);
            }
          } else {
            vb.__onGamepadDisconnect(a);
          }
        },
        __onLimeKeyDown: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__onKey("keyDown", b, c);
          }
        },
        __onLimeKeyUp: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__onKey("keyUp", b, c);
          }
        },
        __onLimeModuleExit: function (a) {
          if (this.window != null) {
            a = new za("deactivate");
            this.__broadcastEvent(a);
          }
        },
        __onLimeMouseDown: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            switch (d) {
              case 1:
                var e = "middleMouseDown";
                break;
              case 2:
                e = "rightMouseDown";
                break;
              default:
                e = "mouseDown";
            }
            this.__onMouse(e, b * a.__scale | 0, c * a.__scale | 0, d);
            if (!this.showDefaultContextMenu && d == 2) {
              a.onMouseDown.cancel();
            }
          }
        },
        __onLimeMouseMove: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__pendingMouseEvent = true;
            this.__pendingMouseX = b * a.__scale | 0;
            this.__pendingMouseY = c * a.__scale | 0;
          }
        },
        __onLimeMouseMoveRelative: function (a, b, c) {},
        __onLimeMouseUp: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            switch (d) {
              case 1:
                var e = "middleMouseUp";
                break;
              case 2:
                e = "rightMouseUp";
                break;
              default:
                e = "mouseUp";
            }
            this.__onMouse(e, b * a.__scale | 0, c * a.__scale | 0, d);
            if (!this.showDefaultContextMenu && d == 2) {
              a.onMouseUp.cancel();
            }
          }
        },
        __onLimeMouseWheel: function (a, b, c, d) {
          if (this.window != null && this.window == a) {
            this.__dispatchPendingMouseEvent();
            if (d == Xg.PIXELS) {
              this.__onMouseWheel(b * a.__scale | 0, c * a.__scale | 0, d);
            } else {
              this.__onMouseWheel(b | 0, c | 0, d);
            }
          }
        },
        __renderAfterEvent: function () {
          this.__render(this.window.context);
        },
        __render: function (a) {
          a = false;
          var b = this.__renderer != null && (this.__renderDirty || this.__forceRender);
          if (this.__invalidated && b) {
            this.__invalidated = false;
            var c = new za("render");
            this.__broadcastEvent(c);
          }
          this.__update(false, true);
          if (this.__renderer != null) {
            if (this.context3D != null) {
              for (c = this.stage3Ds.iterator(); c.hasNext();) {
                var d = c.next();
                this.context3D.__renderStage3D(d);
              }
              if (this.context3D.__present) {
                b = true;
              }
            }
            if (b) {
              if (this.context3D == null) {
                this.__renderer.__clear();
              }
              this.__renderer.__render(this);
            } else if (this.context3D == null) {
              a = true;
            }
            if (this.context3D != null) {
              if (this.context3D.__present) {
                if (!this.__renderer.__cleared) {
                  this.__renderer.__clear();
                }
                this.context3D.__present = false;
                this.context3D.__cleared = false;
              } else {
                a = true;
              }
            }
            this.__renderer.__cleared = false;
          }
          return a;
        },
        __onLimeRender: function (a) {
          if (!this.__rendering) {
            this.__rendering = true;
            this.__broadcastEvent(new za("enterFrame"));
            this.__broadcastEvent(new za("frameConstructed"));
            this.__broadcastEvent(new za("exitFrame"));
            this.__renderable = true;
            this.__enterFrame(this.__deltaTime);
            this.__deltaTime = 0;
            if (this.__render(a)) {
              this.window.onRender.cancel();
            }
            this.__rendering = false;
          }
        },
        __onLimeRenderContextLost: function () {
          this.context3D = this.__renderer = null;
          for (var a = this.stage3Ds.iterator(); a.hasNext();) {
            a.next().__lostContext();
          }
        },
        __onLimeRenderContextRestored: function (a) {
          this.__createRenderer();
          for (a = this.stage3Ds.iterator(); a.hasNext();) {
            a.next().__restoreContext();
          }
        },
        __onLimeTextEdit: function (a, b, c, d) {},
        __onLimeTextInput: function (a, b) {
          if (this.window != null && this.window == a) {
            var c = [];
            if (this.__focus == null) {
              this.__getInteractive(c);
            } else {
              this.__focus.__getInteractive(c);
            }
            b = new Uf("textInput", true, true, b);
            if (c.length > 0) {
              c.reverse();
              this.__dispatchStack(b, c);
            } else {
              this.__dispatchEvent(b);
            }
            if (b.isDefaultPrevented()) {
              a.onTextInput.cancel();
            }
          }
        },
        __onLimeTouchCancel: function (a) {
          var b = this.__primaryTouch == a;
          if (b) {
            this.__primaryTouch = null;
          }
          this.__onTouch("touchEnd", a, b);
        },
        __onLimeTouchMove: function (a) {
          this.__onTouch("touchMove", a, this.__primaryTouch == a);
        },
        __onLimeTouchEnd: function (a) {
          var b = this.__primaryTouch == a;
          if (b) {
            this.__primaryTouch = null;
          }
          this.__onTouch("touchEnd", a, b);
        },
        __onLimeTouchStart: function (a) {
          if (this.__primaryTouch == null) {
            this.__primaryTouch = a;
          }
          this.__onTouch("touchBegin", a, this.__primaryTouch == a);
        },
        __onLimeUpdate: function (a) {
          this.__deltaTime = a;
          this.__dispatchPendingMouseEvent();
        },
        __onLimeWindowActivate: function (a) {},
        __onLimeWindowClose: function (a) {
          if (this.window == a) {
            this.window = null;
          }
          this.__primaryTouch = null;
          a = new za("deactivate");
          this.__broadcastEvent(a);
        },
        __onLimeWindowCreate: function (a) {
          if (this.window != null && this.window == a && a.context != null) {
            this.__createRenderer();
          }
        },
        __onLimeWindowDeactivate: function (a) {},
        __onLimeWindowDropFile: function (a, b) {},
        __onLimeWindowEnter: function (a) {},
        __onLimeWindowExpose: function (a) {
          if (this.window != null && this.window == a) {
            this.__renderDirty = true;
          }
        },
        __onLimeWindowFocusIn: function (a) {
          if (this.window != null && this.window == a) {
            this.__renderDirty = true;
            a = new za("activate");
            this.__broadcastEvent(a);
            this.set_focus(this.__cacheFocus);
          }
        },
        __onLimeWindowFocusOut: function (a) {
          if (this.window != null && this.window == a) {
            this.__primaryTouch = null;
            a = new za("deactivate");
            this.__broadcastEvent(a);
            a = this.get_focus();
            this.set_focus(null);
            this.__cacheFocus = a;
            Wb.__altKey = false;
            Wb.__commandKey = false;
            Wb.__ctrlKey = false;
            Wb.__shiftKey = false;
          }
        },
        __onLimeWindowFullscreen: function (a) {
          if (this.window != null && this.window == a) {
            this.__resize();
            if (!this.__wasFullscreen) {
              this.__wasFullscreen = true;
              if (this.__displayState == 2) {
                this.__displayState = 1;
              }
              this.__dispatchEvent(new Cg("fullScreen", false, false, true, true));
            }
          }
        },
        __onLimeWindowLeave: function (a) {
          if (this.window != null && this.window == a && !Wb.__buttonDown) {
            this.__dispatchPendingMouseEvent();
            a = new za("mouseLeave");
            this.__dispatchEvent(a);
          }
        },
        __onLimeWindowMinimize: function (a) {},
        __onLimeWindowMove: function (a, b, c) {},
        __onLimeWindowResize: function (a, b, c) {
          if (this.window != null && this.window == a) {
            this.__resize();
            if (this.__wasFullscreen && !a.__fullscreen) {
              this.__wasFullscreen = false;
              this.__displayState = 2;
              this.__dispatchEvent(new Cg("fullScreen", false, false, false, true));
            }
          }
        },
        __onLimeWindowRestore: function (a) {
          if (this.window != null && this.window == a && this.__wasFullscreen && !a.__fullscreen) {
            this.__wasFullscreen = false;
            this.__displayState = 2;
            this.__dispatchEvent(new Cg("fullScreen", false, false, false, true));
          }
        },
        __onMouse: function (a, b, c, d) {
          if (!(d > 2)) {
            var e = ob.__pool.get();
            e.setTo(b, c);
            b = this.__displayMatrix;
            c = b.a * b.d - b.b * b.c;
            if (c == 0) {
              e.x = -b.tx;
              e.y = -b.ty;
            } else {
              var f = 1 / c * (b.c * (b.ty - e.y) + b.d * (e.x - b.tx));
              e.y = 1 / c * (b.a * (e.y - b.ty) + b.b * (b.tx - e.x));
              e.x = f;
            }
            this.__mouseX = e.x;
            this.__mouseY = e.y;
            b = [];
            if (this.__hitTest(this.__mouseX, this.__mouseY, true, b, true, this)) {
              f = b[b.length - 1];
            } else {
              f = this;
              b = [this];
            }
            if (f == null) {
              f = this;
            }
            var k = null;
            var g = false;
            switch (a) {
              case "middleMouseDown":
                this.__mouseDownMiddle = f;
                g = true;
                break;
              case "middleMouseUp":
                if (this.__mouseDownMiddle == f) {
                  k = "middleClick";
                }
                this.__mouseDownMiddle = null;
                g = true;
                break;
              case "mouseDown":
                if (this.get_focus() != null) {
                  if (this.get_focus() != f) {
                    c = new Lh("mouseFocusChange", true, true, f, false, 0);
                    this.get_focus().dispatchEvent(c);
                    if (!c.isDefaultPrevented()) {
                      if (f.__allowMouseFocus()) {
                        this.set_focus(f);
                      } else {
                        this.set_focus(null);
                      }
                    }
                  }
                } else if (f.__allowMouseFocus()) {
                  this.set_focus(f);
                } else {
                  this.set_focus(null);
                }
                this.__mouseDownLeft = f;
                if (this.__lastClickTarget != f) {
                  this.__lastClickTarget = null;
                  this.__lastClickTime = 0;
                }
                g = Wb.__buttonDown = true;
                break;
              case "mouseUp":
                if (this.__mouseDownLeft != null) {
                  Wb.__buttonDown = false;
                  if (this.__mouseDownLeft == f) {
                    k = "click";
                  } else {
                    g = Wb.__create("releaseOutside", 1, 0, this.__mouseX, this.__mouseY, new ob(this.__mouseX, this.__mouseY), this);
                    this.__mouseDownLeft.dispatchEvent(g);
                  }
                  this.__mouseDownLeft = null;
                }
                g = true;
                break;
              case "rightMouseDown":
                this.__mouseDownRight = f;
                g = true;
                break;
              case "rightMouseUp":
                if (this.__mouseDownRight == f) {
                  k = "rightClick";
                }
                this.__mouseDownRight = null;
                g = true;
            }
            c = ob.__pool.get();
            g = Wb.__create(a, d, g ? this.window.clickCount : 0, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
            this.__dispatchStack(g, b);
            if (g.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
            if (k != null) {
              g = Wb.__create(k, d, 0, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
              this.__dispatchStack(g, b);
              if (g.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
              if (a == "mouseUp") {
                if (f.doubleClickEnabled) {
                  a = ia.getTimer();
                  if (a - this.__lastClickTime < 500 && f == this.__lastClickTarget) {
                    g = Wb.__create("doubleClick", d, 0, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
                    this.__dispatchStack(g, b);
                    if (g.__updateAfterEventFlag) {
                      this.__renderAfterEvent();
                    }
                    this.__lastClickTime = 0;
                    this.__lastClickTarget = null;
                  } else {
                    this.__lastClickTarget = f;
                    this.__lastClickTime = a;
                  }
                } else {
                  this.__lastClickTarget = null;
                  this.__lastClickTime = 0;
                }
              }
            }
            if (hd.__cursor == "auto" && !hd.__hidden) {
              g = null;
              if (this.__mouseDownLeft != null) {
                g = this.__mouseDownLeft.__getCursor();
              } else {
                for (a = 0; a < b.length;) {
                  g = b[a];
                  ++a;
                  g = g.__getCursor();
                  if (g != null && this.window != null) {
                    this.window.set_cursor(Up.toLimeCursor(g));
                    break;
                  }
                }
              }
              if (g == null && this.window != null) {
                this.window.set_cursor(Tb.ARROW);
              }
            }
            if (f != this.__mouseOverTarget && this.__mouseOverTarget != null) {
              g = Wb.__create("mouseOut", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), this.__mouseOverTarget);
              this.__dispatchStack(g, this.__mouseOutStack);
              if (g.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            }
            for (a = 0; a < this.__rollOutStack.length;) {
              k = this.__rollOutStack[a];
              if (b.indexOf(k) == -1) {
                L.remove(this.__rollOutStack, k);
                g = Wb.__create("rollOut", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), k);
                g.bubbles = false;
                this.__dispatchTarget(k, g);
                if (g.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              } else {
                ++a;
              }
            }
            for (a = 0; a < b.length;) {
              k = b[a];
              ++a;
              if (this.__rollOutStack.indexOf(k) == -1 && this.__mouseOverTarget != null) {
                if (k.hasEventListener("rollOver")) {
                  g = Wb.__create("rollOver", d, 0, this.__mouseX, this.__mouseY, this.__mouseOverTarget.__globalToLocal(e, c), k);
                  g.bubbles = false;
                  this.__dispatchTarget(k, g);
                  if (g.__updateAfterEventFlag) {
                    this.__renderAfterEvent();
                  }
                }
                if (k.hasEventListener("rollOut") || k.hasEventListener("rollOver")) {
                  this.__rollOutStack.push(k);
                }
              }
            }
            if (f != this.__mouseOverTarget) {
              if (f != null) {
                g = Wb.__create("mouseOver", d, 0, this.__mouseX, this.__mouseY, f.__globalToLocal(e, c), f);
                this.__dispatchStack(g, b);
                if (g.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              }
              this.__mouseOverTarget = f;
              this.__mouseOutStack = b;
            }
            if (this.__dragObject != null) {
              this.__drag(e);
              d = null;
              if (this.__mouseOverTarget == this.__dragObject) {
                f = this.__dragObject.mouseEnabled;
                a = this.__dragObject.mouseChildren;
                this.__dragObject.mouseEnabled = false;
                this.__dragObject.mouseChildren = false;
                b = [];
                if (this.__hitTest(this.__mouseX, this.__mouseY, true, b, true, this)) {
                  d = b[b.length - 1];
                }
                this.__dragObject.mouseEnabled = f;
                this.__dragObject.mouseChildren = a;
              } else if (this.__mouseOverTarget != this) {
                d = this.__mouseOverTarget;
              }
              this.__dragObject.dropTarget = d;
            }
            ob.__pool.release(e);
            ob.__pool.release(c);
          }
        },
        __onMouseWheel: function (a, b, c) {
          var d = this.__mouseX;
          var e = this.__mouseY;
          a = [];
          if (this.__hitTest(this.__mouseX, this.__mouseY, true, a, true, this)) {
            var f = a[a.length - 1];
          } else {
            f = this;
            a = [this];
          }
          if (f == null) {
            f = this;
          }
          c = ob.__pool.get();
          c.setTo(d, e);
          d = this.__displayMatrix;
          e = d.a * d.d - d.b * d.c;
          if (e == 0) {
            c.x = -d.tx;
            c.y = -d.ty;
          } else {
            var k = 1 / e * (d.c * (d.ty - c.y) + d.d * (c.x - d.tx));
            c.y = 1 / e * (d.a * (c.y - d.ty) + d.b * (d.tx - c.x));
            c.x = k;
          }
          b |= 0;
          b = Wb.__create("mouseWheel", 0, 0, this.__mouseX, this.__mouseY, f.__globalToLocal(c, c), f, b);
          b.cancelable = true;
          this.__dispatchStack(b, a);
          if (b.isDefaultPrevented()) {
            this.window.onMouseWheel.cancel();
          }
          if (b.__updateAfterEventFlag) {
            this.__renderAfterEvent();
          }
          ob.__pool.release(c);
        },
        __onTouch: function (a, b, c) {
          var d = ob.__pool.get();
          d.setTo(Math.round(b.x * this.window.__width * this.window.__scale), Math.round(b.y * this.window.__height * this.window.__scale));
          var e = this.__displayMatrix;
          var f = e.a * e.d - e.b * e.c;
          if (f == 0) {
            d.x = -e.tx;
            d.y = -e.ty;
          } else {
            var k = 1 / f * (e.c * (e.ty - d.y) + e.d * (d.x - e.tx));
            d.y = 1 / f * (e.a * (d.y - e.ty) + e.b * (e.tx - d.x));
            d.x = k;
          }
          e = d.x;
          f = d.y;
          k = [];
          if (this.__hitTest(e, f, false, k, true, this)) {
            var g = k[k.length - 1];
          } else {
            g = this;
            k = [this];
          }
          if (g == null) {
            g = this;
          }
          var l = b.id;
          if (this.__touchData.h.hasOwnProperty(l)) {
            var h = this.__touchData.h[l];
          } else {
            h = Mh.__pool.get();
            h.reset();
            h.touch = b;
            this.__touchData.h[l] = h;
          }
          var p = null;
          var m = false;
          switch (a) {
            case "touchBegin":
              h.touchDownTarget = g;
              break;
            case "touchEnd":
              if (h.touchDownTarget == g) {
                p = "touchTap";
              }
              h.touchDownTarget = null;
              m = true;
          }
          var n = ob.__pool.get();
          a = Ve.__create(a, null, e, f, g.__globalToLocal(d, n), g);
          a.touchPointID = l;
          a.isPrimaryTouchPoint = c;
          a.pressure = b.pressure;
          this.__dispatchStack(a, k);
          if (a.__updateAfterEventFlag) {
            this.__renderAfterEvent();
          }
          if (p != null) {
            a = Ve.__create(p, null, e, f, g.__globalToLocal(d, n), g);
            a.touchPointID = l;
            a.isPrimaryTouchPoint = c;
            a.pressure = b.pressure;
            this.__dispatchStack(a, k);
            if (a.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
          p = h.touchOverTarget;
          if (g != p && p != null) {
            a = Ve.__create("touchOut", null, e, f, p.__globalToLocal(d, n), p);
            a.touchPointID = l;
            a.isPrimaryTouchPoint = c;
            a.pressure = b.pressure;
            this.__dispatchTarget(p, a);
            if (a.__updateAfterEventFlag) {
              this.__renderAfterEvent();
            }
          }
          for (var r = h.rollOutStack, q, w = 0; w < r.length;) {
            q = r[w];
            if (k.indexOf(q) == -1) {
              L.remove(r, q);
              a = Ve.__create("touchRollOut", null, e, f, p.__globalToLocal(d, n), p);
              a.touchPointID = l;
              a.isPrimaryTouchPoint = c;
              a.bubbles = false;
              a.pressure = b.pressure;
              this.__dispatchTarget(q, a);
              if (a.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            } else {
              ++w;
            }
          }
          for (w = 0; w < k.length;) {
            q = k[w];
            ++w;
            if (r.indexOf(q) == -1) {
              if (q.hasEventListener("touchRollOver")) {
                a = Ve.__create("touchRollOver", null, e, f, p.__globalToLocal(d, n), q);
                a.touchPointID = l;
                a.isPrimaryTouchPoint = c;
                a.bubbles = false;
                a.pressure = b.pressure;
                this.__dispatchTarget(q, a);
                if (a.__updateAfterEventFlag) {
                  this.__renderAfterEvent();
                }
              }
              if (q.hasEventListener("touchRollOut")) {
                r.push(q);
              }
            }
          }
          if (g != p) {
            if (g != null) {
              a = Ve.__create("touchOver", null, e, f, g.__globalToLocal(d, n), g);
              a.touchPointID = l;
              a.isPrimaryTouchPoint = c;
              a.bubbles = true;
              a.pressure = b.pressure;
              this.__dispatchTarget(g, a);
              if (a.__updateAfterEventFlag) {
                this.__renderAfterEvent();
              }
            }
            h.touchOverTarget = g;
          }
          ob.__pool.release(d);
          ob.__pool.release(n);
          if (m) {
            this.__touchData.remove(l);
            h.reset();
            Mh.__pool.release(h);
          }
        },
        __registerLimeModule: function (a) {
          a.onCreateWindow.add(n(this, this.__onLimeCreateWindow));
          a.onUpdate.add(n(this, this.__onLimeUpdate));
          a.onExit.add(n(this, this.__onLimeModuleExit), false, 0);
          for (a = Oc.devices.iterator(); a.hasNext();) {
            var b = a.next();
            this.__onLimeGamepadConnect(b);
          }
          Oc.onConnect.add(n(this, this.__onLimeGamepadConnect));
          Dc.onStart.add(n(this, this.__onLimeTouchStart));
          Dc.onMove.add(n(this, this.__onLimeTouchMove));
          Dc.onEnd.add(n(this, this.__onLimeTouchEnd));
          Dc.onCancel.add(n(this, this.__onLimeTouchCancel));
        },
        __resize: function () {
          var a = this.stageWidth;
          var b = this.stageHeight;
          var c = this.window.__width * this.window.__scale | 0;
          var d = this.window.__height * this.window.__scale | 0;
          this.__displayMatrix.identity();
          if (this.get_fullScreenSourceRect() != null && this.window.__fullscreen) {
            this.stageWidth = this.get_fullScreenSourceRect().width | 0;
            this.stageHeight = this.get_fullScreenSourceRect().height | 0;
            var e = c / this.stageWidth;
            var f = d / this.stageHeight;
            this.__displayMatrix.translate(-this.get_fullScreenSourceRect().x, -this.get_fullScreenSourceRect().y);
            this.__displayMatrix.scale(e, f);
            this.__displayRect.setTo(this.get_fullScreenSourceRect().get_left(), this.get_fullScreenSourceRect().get_right(), this.get_fullScreenSourceRect().get_top(), this.get_fullScreenSourceRect().get_bottom());
          } else if (this.__logicalWidth == 0 || this.__logicalHeight == 0 || this.get_scaleMode() == 2 || c == 0 || d == 0) {
            this.stageWidth = Math.round(c / this.window.__scale);
            this.stageHeight = Math.round(d / this.window.__scale);
            this.__displayMatrix.scale(this.window.__scale, this.window.__scale);
            this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
          } else {
            this.stageWidth = this.__logicalWidth;
            this.stageHeight = this.__logicalHeight;
            switch (this.get_scaleMode()) {
              case 0:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                this.__displayMatrix.scale(e, f);
                this.__displayRect.setTo(0, 0, this.stageWidth, this.stageHeight);
                break;
              case 1:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                e = Math.max(e, f);
                f = this.stageWidth * e;
                var k = this.stageHeight * e;
                f = this.stageWidth - Math.round((f - c) / e);
                k = this.stageHeight - Math.round((k - d) / e);
                var g = Math.round((this.stageWidth - f) / 2);
                var l = Math.round((this.stageHeight - k) / 2);
                this.__displayMatrix.translate(-g, -l);
                this.__displayMatrix.scale(e, e);
                this.__displayRect.setTo(g, l, f, k);
                break;
              default:
                e = c / this.stageWidth;
                f = d / this.stageHeight;
                e = Math.min(e, f);
                f = this.stageWidth * e;
                k = this.stageHeight * e;
                f = this.stageWidth - Math.round((f - c) / e);
                k = this.stageHeight - Math.round((k - d) / e);
                g = Math.round((this.stageWidth - f) / 2);
                l = Math.round((this.stageHeight - k) / 2);
                this.__displayMatrix.translate(-g, -l);
                this.__displayMatrix.scale(e, e);
                this.__displayRect.setTo(g, l, f, k);
            }
          }
          if (this.context3D != null) {
            this.context3D.configureBackBuffer(this.stageWidth, this.stageHeight, 0, true, true, true);
          }
          for (e = this.stage3Ds.iterator(); e.hasNext();) {
            e.next().__resize(c, d);
          }
          if (this.__renderer != null) {
            this.__renderer.__resize(c, d);
          }
          this.__renderDirty = true;
          if (this.stageWidth != a || this.stageHeight != b) {
            this.__setTransformDirty();
            a = new za("resize");
            this.__dispatchEvent(a);
          }
        },
        __setLogicalSize: function (a, b) {
          this.__logicalWidth = a;
          this.__logicalHeight = b;
          this.__resize();
        },
        __stopDrag: function (a) {
          this.__dragObject = this.__dragBounds = null;
        },
        __unregisterLimeModule: function (a) {
          a.onCreateWindow.remove(n(this, this.__onLimeCreateWindow));
          a.onUpdate.remove(n(this, this.__onLimeUpdate));
          a.onExit.remove(n(this, this.__onLimeModuleExit));
          Oc.onConnect.remove(n(this, this.__onLimeGamepadConnect));
          Dc.onStart.remove(n(this, this.__onLimeTouchStart));
          Dc.onMove.remove(n(this, this.__onLimeTouchMove));
          Dc.onEnd.remove(n(this, this.__onLimeTouchEnd));
          Dc.onCancel.remove(n(this, this.__onLimeTouchCancel));
        },
        __update: function (a, b) {
          if (a) {
            if (this.__transformDirty) {
              gb.prototype.__update.call(this, true, b);
              if (b) {
                this.__transformDirty = false;
              }
            }
          } else if (this.__transformDirty || this.__renderDirty) {
            gb.prototype.__update.call(this, false, b);
            if (b && Ba.__supportDOM) {
              this.__wasDirty = true;
            }
          } else if (!this.__renderDirty && this.__wasDirty) {
            gb.prototype.__update.call(this, false, b);
            if (b) {
              this.__wasDirty = false;
            }
          }
        },
        set_color: function (a) {
          if (a == null) {
            this.__transparent = true;
            a = 0;
          } else {
            this.__transparent = false;
          }
          if (this.__color != a) {
            this.__colorSplit[0] = ((a & 16711680) >>> 16) / 255;
            this.__colorSplit[1] = ((a & 65280) >>> 8) / 255;
            this.__colorSplit[2] = (a & 255) / 255;
            this.__colorString = "#" + v.hex(a & 16777215, 6);
            this.__renderDirty = true;
            this.__color = a & 16777215 | -16777216;
          }
          return a;
        },
        get_displayState: function () {
          return this.__displayState;
        },
        set_displayState: function (a) {
          if (this.window != null) {
            if (a == 2) {
              if (this.window.__fullscreen) {
                this.window.set_fullscreen(false);
              }
            } else if (!this.window.__fullscreen) {
              this.window.set_fullscreen(true);
            }
          }
          return this.__displayState = a;
        },
        get_focus: function () {
          return this.__focus;
        },
        set_focus: function (a) {
          if (a != this.__focus || a == null && this.__cacheFocus != null) {
            var b = this.__focus;
            this.__cacheFocus = this.__focus = a;
            if (b != null) {
              var c = new Lh("focusOut", true, false, a, false, 0);
              var d = [];
              b.__getInteractive(d);
              d.reverse();
              this.__dispatchStack(c, d);
            }
            if (a != null) {
              c = new Lh("focusIn", true, false, b, false, 0);
              d = [];
              a.__getInteractive(d);
              d.reverse();
              this.__dispatchStack(c, d);
            }
          }
          return a;
        },
        get_frameRate: function () {
          if (this.window != null) {
            return this.window.__backend.getFrameRate();
          } else {
            return 0;
          }
        },
        set_frameRate: function (a) {
          if (this.window != null) {
            return this.window.__backend.setFrameRate(a);
          } else {
            return a;
          }
        },
        get_fullScreenSourceRect: function () {
          if (this.__fullScreenSourceRect == null) {
            return null;
          } else {
            return this.__fullScreenSourceRect.clone();
          }
        },
        set_height: function (a) {
          return this.get_height();
        },
        get_mouseX: function () {
          return this.__mouseX;
        },
        get_mouseY: function () {
          return this.__mouseY;
        },
        get_quality: function () {
          return this.__quality;
        },
        set_rotation: function (a) {
          return 0;
        },
        get_scaleMode: function () {
          return this.__scaleMode;
        },
        set_scaleMode: function (a) {
          if (a != this.__scaleMode) {
            this.__scaleMode = a;
            this.__resize();
          }
          return a;
        },
        set_scaleX: function (a) {
          return 0;
        },
        set_scaleY: function (a) {
          return 0;
        },
        get_tabEnabled: function () {
          return false;
        },
        get_tabIndex: function () {
          return -1;
        },
        set_transform: function (a) {
          return this.get_transform();
        },
        set_width: function (a) {
          return this.get_width();
        },
        set_x: function (a) {
          return 0;
        },
        set_y: function (a) {
          return 0;
        },
        __class__: Fi,
        __properties__: q(gb.prototype.__properties__, {
          set_color: "set_color",
          set_scaleMode: "set_scaleMode",
          get_scaleMode: "get_scaleMode",
          get_quality: "get_quality",
          get_fullScreenSourceRect: "get_fullScreenSourceRect",
          set_frameRate: "set_frameRate",
          get_frameRate: "get_frameRate",
          set_focus: "set_focus",
          get_focus: "get_focus",
          set_displayState: "set_displayState",
          get_displayState: "get_displayState"
        })
      });
      function Kh(a) {
        va.call(this);
        this.__stage = a;
        this.__height = 0;
        this.__projectionTransform = new Ul();
        this.__renderTransform = new Ul();
        this.__y = this.__x = this.__width = 0;
        this.visible = true;
        if (a.stageWidth > 0 && a.stageHeight > 0) {
          this.__resize(a.stageWidth, a.stageHeight);
        }
      }
      h["openfl.display.Stage3D"] = Kh;
      Kh.__name__ = "openfl.display.Stage3D";
      Kh.__super__ = va;
      Kh.prototype = q(va.prototype, {
        __createContext: function () {
          var a = this.__stage;
          var b = a.__renderer;
          if (b.__type == "cairo" || b.__type == "canvas") {
            this.__dispatchError();
          } else if (b.__type == "opengl") {
            this.context3D = new Kb(a, a.context3D.__contextState, this);
            this.__dispatchCreate();
          } else if (b.__type == "dom") {
            if (a.context3D == null) {
              this.__canvas = window.document.createElement("canvas");
              this.__canvas.width = a.stageWidth;
              this.__canvas.height = a.stageHeight;
              var c = a.window.context.attributes;
              var d = Object.prototype.hasOwnProperty.call(c, "background") && c.background == null;
              var e = Object.prototype.hasOwnProperty.call(c, "colorDepth") ? c.colorDepth : 32;
              c = Object.prototype.hasOwnProperty.call(c, "antialiasing") && c.antialiasing > 0;
              this.__webgl = ip.getContextWebGL(this.__canvas, {
                alpha: d || e > 16,
                antialias: c,
                depth: true,
                premultipliedAlpha: true,
                stencil: true,
                preserveDrawingBuffer: false
              });
              if (this.__webgl != null) {
                if (wg.context == null) {
                  wg.context = this.__webgl;
                  wg.type = "webgl";
                  wg.version = 1;
                }
                a.context3D = new Kb(a);
                a.context3D.configureBackBuffer(a.window.__width, a.window.__height, 0, true, true, true);
                a.context3D.present();
                b.element.appendChild(this.__canvas);
                this.__style = this.__canvas.style;
                this.__style.setProperty("position", "absolute", null);
                this.__style.setProperty("top", "0", null);
                this.__style.setProperty("left", "0", null);
                this.__style.setProperty(b.__transformOriginProperty, "0 0 0", null);
                this.__style.setProperty("z-index", "-1", null);
              }
              if (a.context3D != null) {
                this.context3D = new Kb(a, a.context3D.__contextState, this);
              }
              this.__dispatchCreate();
            } else {
              this.__dispatchError();
            }
          }
        },
        __dispatchError: function () {
          this.__contextRequested = false;
          this.dispatchEvent(new Te("error", false, false, "Context3D not available"));
        },
        __dispatchCreate: function () {
          if (this.__contextRequested) {
            this.__contextRequested = false;
            this.dispatchEvent(new za("context3DCreate"));
          }
        },
        __lostContext: function () {
          this.__contextLost = true;
          if (this.context3D != null) {
            this.context3D.__dispose();
            this.__contextRequested = true;
          }
        },
        __resize: function (a, b) {
          if (a != this.__width || b != this.__height) {
            if (this.__canvas != null) {
              this.__canvas.width = a;
              this.__canvas.height = b;
            }
            this.__projectionTransform.copyRawDataFrom(kb.toFloatVector(null, null, null, [2 / (a > 0 ? a : 1), 0, 0, 0, 0, -2 / (b > 0 ? b : 1), 0, 0, 0, 0, -0.001, 0, -1, 1, 0, 1]));
            this.__renderTransform.identity();
            this.__renderTransform.appendTranslation(this.__x, this.__y, 0);
            this.__renderTransform.append(this.__projectionTransform);
            this.__width = a;
            this.__height = b;
          }
        },
        __restoreContext: function () {
          this.__contextLost = false;
          this.__createContext();
        },
        get_x: function () {
          return this.__x;
        },
        get_y: function () {
          return this.__y;
        },
        __class__: Kh,
        __properties__: {
          get_y: "get_y",
          get_x: "get_x"
        }
      });
      var Gp = {
        fromString: function (a) {
          switch (a) {
            case "bottom":
              return 0;
            case "bottomLeft":
              return 1;
            case "bottomRight":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            case "top":
              return 5;
            case "topLeft":
              return 6;
            case "topRight":
              return 7;
            default:
              return null;
          }
        }
      };
      function Sj(a, b, c, d, e, f, k, g) {
        if (g == null) {
          g = 0;
        }
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 1;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.__id = a;
        this.__matrix = new ya();
        if (b != 0) {
          this.set_x(b);
        }
        if (c != 0) {
          this.set_y(c);
        }
        if (d != 1) {
          this.set_scaleX(d);
        }
        if (e != 1) {
          this.set_scaleY(e);
        }
        if (f != 0) {
          this.set_rotation(f);
        }
        this.__dirty = true;
        this.__length = 0;
        this.__originX = k;
        this.__originY = g;
        this.__alpha = 1;
        this.__blendMode = null;
        this.__visible = true;
      }
      h["openfl.display.Tile"] = Sj;
      Sj.__name__ = "openfl.display.Tile";
      Sj.prototype = {
        getBounds: function (a) {
          var b = new ba();
          this.__findTileRect(b);
          var c = ya.__pool.get();
          if (a != null && a != this) {
            c.copyFrom(this.__getWorldTransform());
            var d = ya.__pool.get();
            d.copyFrom(a.__getWorldTransform());
            d.invert();
            c.concat(d);
            ya.__pool.release(d);
          } else {
            c.identity();
          }
          this.__getBounds(b, c);
          ya.__pool.release(c);
          return b;
        },
        __getBounds: function (a, b) {
          a.__transform(a, b);
        },
        __findTileRect: function (a) {
          if (this.get_tileset() == null) {
            if (this.parent != null) {
              var b = this.parent.__findTileset();
              if (b == null) {
                a.setTo(0, 0, 0, 0);
              } else {
                b = b.getRect(this.get_id());
                if (b == null) {
                  a.setTo(0, 0, 0, 0);
                } else {
                  a.copyFrom(b);
                }
              }
            } else {
              a.setTo(0, 0, 0, 0);
            }
          } else {
            a.copyFrom(this.get_tileset().getRect(this.get_id()));
          }
          a.x = 0;
          a.y = 0;
        },
        __findTileset: function () {
          return this.get_tileset() ?? (this.parent instanceof Tj ? this.parent.get_tileset() : this.parent == null ? null : this.parent.__findTileset());
        },
        __getWorldTransform: function () {
          var a = this.get_matrix().clone();
          if (this.parent != null) {
            a.concat(this.parent.__getWorldTransform());
          }
          return a;
        },
        __setRenderDirty: function () {
          if (!this.__dirty) {
            this.__dirty = true;
            if (this.parent != null) {
              this.parent.__setRenderDirty();
            }
          }
        },
        get_alpha: function () {
          return this.__alpha;
        },
        set_alpha: function (a) {
          if (a != this.__alpha) {
            this.__alpha = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_colorTransform: function () {
          return this.__colorTransform;
        },
        get_height: function () {
          var a = ba.__pool.get();
          this.__findTileRect(a);
          this.__getBounds(a, this.get_matrix());
          var b = a.height;
          ba.__pool.release(a);
          return b;
        },
        set_height: function (a) {
          var b = ba.__pool.get();
          this.__findTileRect(b);
          if (b.height != 0) {
            this.set_scaleY(a / b.height);
          }
          ba.__pool.release(b);
          return a;
        },
        get_id: function () {
          return this.__id;
        },
        get_matrix: function () {
          return this.__matrix;
        },
        get_originX: function () {
          return this.__originX;
        },
        set_originX: function (a) {
          if (a != this.__originX) {
            this.__originX = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_originY: function () {
          return this.__originY;
        },
        set_originY: function (a) {
          if (a != this.__originY) {
            this.__originY = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_rotation: function () {
          if (this.__rotation == null) {
            if (this.__matrix.b == 0 && this.__matrix.c == 0) {
              this.__rotationSine = this.__rotation = 0;
              this.__rotationCosine = 1;
            } else {
              var a = Math.atan2(this.__matrix.d, this.__matrix.c) - Math.PI / 2;
              this.__rotation = 180 / Math.PI * a;
              this.__rotationSine = Math.sin(a);
              this.__rotationCosine = Math.cos(a);
            }
          }
          return this.__rotation;
        },
        set_rotation: function (a) {
          if (a != this.__rotation) {
            this.__rotation = a;
            var b = Math.PI / 180 * a;
            this.__rotationSine = Math.sin(b);
            this.__rotationCosine = Math.cos(b);
            b = this.get_scaleX();
            var c = this.get_scaleY();
            this.__matrix.a = this.__rotationCosine * b;
            this.__matrix.b = this.__rotationSine * b;
            this.__matrix.c = -this.__rotationSine * c;
            this.__matrix.d = this.__rotationCosine * c;
            this.__setRenderDirty();
          }
          return a;
        },
        get_scaleX: function () {
          if (this.__scaleX == null) {
            if (this.get_matrix().b == 0) {
              this.__scaleX = this.__matrix.a;
            } else {
              this.__scaleX = Math.sqrt(this.__matrix.a * this.__matrix.a + this.__matrix.b * this.__matrix.b);
            }
          }
          return this.__scaleX;
        },
        set_scaleX: function (a) {
          if (a != this.__scaleX) {
            this.__scaleX = a;
            if (this.__matrix.b == 0) {
              this.__matrix.a = a;
            } else {
              this.get_rotation();
              var b = this.__rotationSine * a;
              this.__matrix.a = this.__rotationCosine * a;
              this.__matrix.b = b;
            }
            this.__setRenderDirty();
          }
          return a;
        },
        get_scaleY: function () {
          if (this.__scaleY == null) {
            this.__scaleY = this.__matrix.c == 0 ? this.get_matrix().d : Math.sqrt(this.__matrix.c * this.__matrix.c + this.__matrix.d * this.__matrix.d);
          }
          return this.__scaleY;
        },
        set_scaleY: function (a) {
          if (a != this.__scaleY) {
            this.__scaleY = a;
            if (this.__matrix.c == 0) {
              this.__matrix.d = a;
            } else {
              this.get_rotation();
              var b = this.__rotationCosine * a;
              this.__matrix.c = -this.__rotationSine * a;
              this.__matrix.d = b;
            }
            this.__setRenderDirty();
          }
          return a;
        },
        get_shader: function () {
          return this.__shader;
        },
        get_tileset: function () {
          return this.__tileset;
        },
        set_tileset: function (a) {
          if (a != this.__tileset) {
            this.__tileset = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_visible: function () {
          return this.__visible;
        },
        get_width: function () {
          var a = ba.__pool.get();
          this.__findTileRect(a);
          this.__getBounds(a, this.get_matrix());
          var b = a.width;
          ba.__pool.release(a);
          return b;
        },
        set_width: function (a) {
          var b = ba.__pool.get();
          this.__findTileRect(b);
          if (b.width != 0) {
            this.set_scaleX(a / b.width);
          }
          ba.__pool.release(b);
          return a;
        },
        get_x: function () {
          return this.__matrix.tx;
        },
        set_x: function (a) {
          if (a != this.__matrix.tx) {
            this.__matrix.tx = a;
            this.__setRenderDirty();
          }
          return a;
        },
        get_y: function () {
          return this.__matrix.ty;
        },
        set_y: function (a) {
          if (a != this.__matrix.ty) {
            this.__matrix.ty = a;
            this.__setRenderDirty();
          }
          return a;
        },
        __class__: Sj,
        __properties__: {
          set_y: "set_y",
          get_y: "get_y",
          set_x: "set_x",
          get_x: "get_x",
          set_width: "set_width",
          get_width: "get_width",
          get_visible: "get_visible",
          set_tileset: "set_tileset",
          get_tileset: "get_tileset",
          get_shader: "get_shader",
          set_scaleY: "set_scaleY",
          get_scaleY: "get_scaleY",
          set_scaleX: "set_scaleX",
          get_scaleX: "get_scaleX",
          set_rotation: "set_rotation",
          get_rotation: "get_rotation",
          set_originY: "set_originY",
          get_originY: "get_originY",
          set_originX: "set_originX",
          get_originX: "get_originX",
          get_matrix: "get_matrix",
          get_id: "get_id",
          set_height: "set_height",
          get_height: "get_height",
          get_colorTransform: "get_colorTransform",
          set_alpha: "set_alpha",
          get_alpha: "get_alpha"
        }
      };
      function Uj(a, b, c, d, e, f, k) {
        if (k == null) {
          k = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 1;
        }
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        Sj.call(this, -1, a, b, c, d, e, f, k);
        this.__tiles = [];
        this.__length = 0;
      }
      h["openfl.display.TileContainer"] = Uj;
      Uj.__name__ = "openfl.display.TileContainer";
      Uj.__interfaces__ = [Ko];
      Uj.__super__ = Sj;
      Uj.prototype = q(Sj.prototype, {
        getBounds: function (a) {
          var b = new ba();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(a);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          return b;
        },
        get_height: function () {
          var a = ba.__pool.get();
          var b;
          for (var c = 0, d = this.__tiles; c < d.length;) {
            b = d[c];
            ++c;
            b = b.getBounds(this);
            a.__expand(b.x, b.y, b.width, b.height);
          }
          this.__getBounds(a, this.get_matrix());
          c = a.height;
          ba.__pool.release(a);
          return c;
        },
        set_height: function (a) {
          var b = ba.__pool.get();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(this);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          if (b.height != 0) {
            this.set_scaleY(a / b.height);
          }
          ba.__pool.release(b);
          return a;
        },
        get_width: function () {
          var a = ba.__pool.get();
          var b;
          for (var c = 0, d = this.__tiles; c < d.length;) {
            b = d[c];
            ++c;
            b = b.getBounds(this);
            a.__expand(b.x, b.y, b.width, b.height);
          }
          this.__getBounds(a, this.get_matrix());
          c = a.width;
          ba.__pool.release(a);
          return c;
        },
        set_width: function (a) {
          var b = ba.__pool.get();
          var c;
          for (var d = 0, e = this.__tiles; d < e.length;) {
            c = e[d];
            ++d;
            c = c.getBounds(this);
            b.__expand(c.x, c.y, c.width, c.height);
          }
          if (b.width != 0) {
            this.set_scaleX(a / b.width);
          }
          ba.__pool.release(b);
          return a;
        },
        __class__: Uj
      });
      function Tj(a, b, c, d) {
        if (d == null) {
          d = true;
        }
        Ba.call(this);
        this.__drawableType = 9;
        this.__tileset = c;
        this.smoothing = d;
        this.tileColorTransformEnabled = this.tileBlendModeEnabled = this.tileAlphaEnabled = true;
        this.__group = new Uj();
        this.__group.set_tileset(c);
        this.__width = a;
        this.__height = b;
      }
      h["openfl.display.Tilemap"] = Tj;
      Tj.__name__ = "openfl.display.Tilemap";
      Tj.__interfaces__ = [Ko];
      Tj.__super__ = Ba;
      Tj.prototype = q(Ba.prototype, {
        __enterFrame: function (a) {
          if (this.__group.__dirty && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = ba.__pool.get();
          c.setTo(0, 0, this.__width, this.__height);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ba.__pool.release(c);
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var k = this.__renderTransform;
          var g = k.a * k.d - k.b * k.c;
          c = g == 0 ? -k.tx : 1 / g * (k.c * (k.ty - b) + k.d * (a - k.tx));
          k = this.__renderTransform;
          g = k.a * k.d - k.b * k.c;
          a = g == 0 ? -k.ty : 1 / g * (k.a * (b - k.ty) + k.b * (k.tx - a));
          if (c > 0 && a > 0 && c <= this.__width && a <= this.__height) {
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        get_height: function () {
          return this.__height * Math.abs(this.get_scaleY());
        },
        set_height: function (a) {
          this.__height = a | 0;
          return this.__height * Math.abs(this.get_scaleY());
        },
        get_width: function () {
          return this.__width * Math.abs(this.__scaleX);
        },
        set_width: function (a) {
          this.__width = a | 0;
          return this.__width * Math.abs(this.__scaleX);
        },
        __class__: Tj
      });
      function rp(a, b) {
        this.__bitmapData = a;
        this.rectData = kb.toFloatVector(null);
        this.__data = [];
        if (b != null) {
          for (a = 0; a < b.length;) {
            var c = b[a];
            ++a;
            this.addRect(c);
          }
        }
      }
      h["openfl.display.Tileset"] = rp;
      rp.__name__ = "openfl.display.Tileset";
      rp.prototype = {
        addRect: function (a) {
          if (a == null) {
            return -1;
          }
          this.rectData.push(a.x);
          this.rectData.push(a.y);
          this.rectData.push(a.width);
          this.rectData.push(a.height);
          a = new Cm(a);
          a.__update(this.__bitmapData);
          this.__data.push(a);
          return this.__data.length - 1;
        },
        getRect: function (a) {
          if (a < this.__data.length && a >= 0) {
            return new ba(this.__data[a].x, this.__data[a].y, this.__data[a].width, this.__data[a].height);
          } else {
            return null;
          }
        },
        __class__: rp
      };
      function Cm(a) {
        if (a != null) {
          this.x = a.x | 0;
          this.y = a.y | 0;
          this.width = a.width | 0;
          this.height = a.height | 0;
        }
      }
      h["openfl.display.TileData"] = Cm;
      Cm.__name__ = "openfl.display.TileData";
      Cm.prototype = {
        __update: function (a) {
          if (a != null) {
            var b = a.width;
            a = a.height;
            this.__uvX = this.x / b;
            this.__uvY = this.y / a;
            this.__uvWidth = (this.x + this.width) / b;
            this.__uvHeight = (this.y + this.height) / a;
          }
        },
        __class__: Cm
      };
      function sp() {
        this.__totalFrames = this.__framesLoaded = 1;
        this.__currentLabels = [];
        this.__currentFrame = 1;
        this.__lastFrameUpdate = this.__lastFrameScriptEval = -1;
      }
      h["openfl.display.Timeline"] = sp;
      sp.__name__ = "openfl.display.Timeline";
      sp.prototype = {
        enterFrame: function (a) {},
        __enterFrame: function (a) {
          if (this.__isPlaying) {
            a = this.__getNextFrame(a);
            if (this.__lastFrameScriptEval == a) {
              return;
            }
            if (this.__frameScripts != null) {
              if (a < this.__currentFrame) {
                if (!this.__evaluateFrameScripts(this.__totalFrames)) {
                  return;
                }
                this.__currentFrame = 1;
              }
              if (!this.__evaluateFrameScripts(a)) {
                return;
              }
            } else {
              this.__currentFrame = a;
            }
          }
          this.__updateSymbol(this.__currentFrame);
        },
        __evaluateFrameScripts: function (a) {
          if (this.__frameScripts == null) {
            return true;
          }
          var b = this.__currentFrame;
          for (a += 1; b < a;) {
            var c = b++;
            if (c != this.__lastFrameScriptEval && (this.__currentFrame = this.__lastFrameScriptEval = c, this.__frameScripts.h.hasOwnProperty(c) && (this.__updateSymbol(c), (0, this.__frameScripts.h[c])(this.__scope), this.__currentFrame != c) || !this.__isPlaying)) {
              return false;
            }
          }
          return true;
        },
        __getNextFrame: function (a) {
          if (this.frameRate != null) {
            this.__timeElapsed += a;
            a = this.__currentFrame + Math.floor(this.__timeElapsed / this.__frameTime);
            if (a < 1) {
              a = 1;
            }
            if (a > this.__totalFrames) {
              a = Math.floor((a - 1) % this.__totalFrames) + 1;
            }
            this.__timeElapsed %= this.__frameTime;
          } else {
            a = this.__currentFrame + 1;
            if (a > this.__totalFrames) {
              a = 1;
            }
          }
          return a;
        },
        __updateFrameLabel: function () {
          this.__currentFrameLabel = this.__currentLabel = null;
          for (var a = 0, b = this.__currentLabels; a < b.length;) {
            var c = b[a];
            ++a;
            if (c.frame < this.__currentFrame) {
              this.__currentLabel = c.name;
            } else if (c.frame == this.__currentFrame) {
              this.__currentFrameLabel = this.__currentLabel = c.name;
            } else {
              break;
            }
          }
        },
        __updateSymbol: function (a) {
          if (this.__currentFrame != this.__lastFrameUpdate) {
            this.__updateFrameLabel();
            this.enterFrame(a);
            this.__lastFrameUpdate = this.__currentFrame;
          }
        },
        __class__: sp
      };
      function Pj(a, b) {
        Ai.call(this, a, b);
        this.stage = new Fi(this, Object.prototype.hasOwnProperty.call(b.context, "background") ? b.context.background : 16777215);
        if (Object.prototype.hasOwnProperty.call(b, "parameters")) {
          try {
            this.stage.get_loaderInfo().parameters = b.parameters;
          } catch (c) {
            Oa.lastError = c;
          }
        }
        this.stage.__setLogicalSize(b.width, b.height);
        if (Object.prototype.hasOwnProperty.call(b, "resizable") && !b.resizable) {
          this.stage.set_scaleMode(3);
        }
        a.addModule(this.stage);
      }
      h["openfl.display.Window"] = Pj;
      Pj.__name__ = "openfl.display.Window";
      Pj.__super__ = Ai;
      Pj.prototype = q(Ai.prototype, {
        close: function () {
          Ai.prototype.close.call(this);
          if (!this.onClose.canceled && this.stage != null) {
            this.application.removeModule(this.stage);
            this.stage = null;
          }
        },
        __class__: Pj
      });
      function Qj() {}
      h["openfl.display._internal.CanvasBitmap"] = Qj;
      Qj.__name__ = "openfl.display._internal.CanvasBitmap";
      Qj.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__bitmapData != null && a.__bitmapData.image != null) {
          a.__imageVersion = a.__bitmapData.image.version;
        }
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(u = b.__getAlpha(a.__worldAlpha), u <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              v = b.context;
              b.setTransform(a.__renderTransform, v);
              var c = a.opaqueBackground;
              v.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
              v.fillRect(0, 0, a.get_width(), a.get_height());
              b.__popMaskObject(a);
            }
            if (a.__graphics != null && a.__renderable && (u = b.__getAlpha(a.__worldAlpha), !(u <= 0))) {
              var d = a.__graphics;
              if (d != null) {
                A.render(d, b);
                var e = d.__width;
                var f = d.__height;
                c = d.__canvas;
                if (c != null && d.__visible && e >= 1 && f >= 1) {
                  var k = d.__worldTransform;
                  v = b.context;
                  y = a.__scrollRect;
                  var g = a.__worldScale9Grid;
                  if (y == null || y.width > 0 && y.height > 0) {
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    v.globalAlpha = u;
                    if (g != null && k.b == 0 && k.c == 0) {
                      var l = b.__pixelRatio;
                      u = ya.__pool.get();
                      u.translate(k.tx, k.ty);
                      b.setTransform(u, v);
                      ya.__pool.release(u);
                      u = d.__bounds;
                      var h = d.__renderTransform.a / d.__bitmapScale;
                      var p = d.__renderTransform.d / d.__bitmapScale;
                      var m = h * k.a;
                      var n = p * k.d;
                      k = Math.max(1, Math.round(g.x * h));
                      d = Math.round(g.y * p);
                      y = Math.max(1, Math.round((u.get_right() - g.get_right()) * h));
                      var r = Math.round((u.get_bottom() - g.get_bottom()) * p);
                      h = Math.round(g.width * h);
                      g = Math.round(g.height * p);
                      p = Math.round(k / l);
                      var q = Math.round(d / l);
                      var w = Math.round(y / l);
                      l = Math.round(r / l);
                      m = u.width * m - p - w;
                      u = u.height * n - q - l;
                      b.applySmoothing(v, false);
                      if (h != 0 && g != 0) {
                        v.drawImage(c, 0, 0, k, d, 0, 0, p, q);
                        v.drawImage(c, k, 0, h, d, p, 0, m, q);
                        v.drawImage(c, k + h, 0, y, d, p + m, 0, w, q);
                        v.drawImage(c, 0, d, k, g, 0, q, p, u);
                        v.drawImage(c, k, d, h, g, p, q, m, u);
                        v.drawImage(c, k + h, d, y, g, p + m, q, w, u);
                        v.drawImage(c, 0, d + g, k, r, 0, q + u, p, l);
                        v.drawImage(c, k, d + g, h, r, p, q + u, m, l);
                        v.drawImage(c, k + h, d + g, y, r, p + m, q + u, w, l);
                      } else if (h == 0 && g != 0) {
                        f = p + m + w;
                        v.drawImage(c, 0, 0, e, d, 0, 0, f, q);
                        v.drawImage(c, 0, d, e, g, 0, q, f, u);
                        v.drawImage(c, 0, d + g, e, r, 0, q + u, f, l);
                      } else if (g == 0 && h != 0) {
                        e = q + u + l;
                        v.drawImage(c, 0, 0, k, f, 0, 0, p, e);
                        v.drawImage(c, k, 0, h, f, p, 0, m, e);
                        v.drawImage(c, k + h, 0, y, f, p + m, 0, w, e);
                      }
                    } else {
                      b.setTransform(k, v);
                      v.drawImage(c, 0, 0, e, f);
                    }
                    b.__popMaskObject(a);
                  }
                }
              }
            }
          }
          if (a.__renderable) {
            u = b.__getAlpha(a.__worldAlpha);
            if (u > 0 && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
              v = b.context;
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a, false);
              Wa.convertToCanvas(a.__bitmapData.image);
              v.globalAlpha = u;
              y = a.__scrollRect;
              b.setTransform(a.__renderTransform, v);
              if (!b.__allowSmoothing || !a.smoothing) {
                v.imageSmoothingEnabled = false;
              }
              if (y == null) {
                v.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height);
              } else {
                v.drawImage(a.__bitmapData.image.get_src(), y.x, y.y, y.width, y.height, y.x, y.y, y.width, y.height);
              }
              if (!b.__allowSmoothing || !a.smoothing) {
                v.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(a, false);
            }
          }
        } else {
          c = a.__cacheBitmap;
          if (c.__renderable) {
            var u = b.__getAlpha(c.__worldAlpha);
            if (u > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
              var v = b.context;
              b.__setBlendMode(c.__worldBlendMode);
              b.__pushMaskObject(c, false);
              Wa.convertToCanvas(c.__bitmapData.image);
              v.globalAlpha = u;
              var y = c.__scrollRect;
              b.setTransform(c.__renderTransform, v);
              if (!b.__allowSmoothing || !c.smoothing) {
                v.imageSmoothingEnabled = false;
              }
              if (y == null) {
                v.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
              } else {
                v.drawImage(c.__bitmapData.image.get_src(), y.x, y.y, y.width, y.height, y.x, y.y, y.width, y.height);
              }
              if (!b.__allowSmoothing || !c.smoothing) {
                v.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(c, false);
            }
          }
        }
        b.__renderEvent(a);
      };
      Qj.renderDrawableMask = function (a, b) {
        b.context.rect(0, 0, a.get_width(), a.get_height());
      };
      function om() {}
      h["openfl.display._internal.CanvasBitmapData"] = om;
      om.__name__ = "openfl.display._internal.CanvasBitmapData";
      om.renderDrawable = function (a, b) {
        if (a.readable) {
          var c = a.image;
          if (c.type == Gd.DATA) {
            Wa.convertToCanvas(c);
          }
          var d = b.context;
          d.globalAlpha = 1;
          b.setTransform(a.__renderTransform, d);
          d.drawImage(c.get_src(), 0, 0, c.width, c.height);
        }
      };
      om.renderDrawableMask = function (a, b) {};
      function Fh() {}
      h["openfl.display._internal.CanvasDisplayObject"] = Fh;
      Fh.__name__ = "openfl.display._internal.CanvasDisplayObject";
      Fh.renderDrawable = function (a, b) {
        if (a.get_mask() == null || a.get_mask().get_width() > 0 && a.get_mask().get_height() > 0) {
          b.__updateCacheBitmap(a, false);
          if (a.__cacheBitmap != null && !a.__isCacheBitmapRender) {
            var c = a.__cacheBitmap;
            if (c.__renderable) {
              var d = b.__getAlpha(c.__worldAlpha);
              if (d > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
                var e = b.context;
                b.__setBlendMode(c.__worldBlendMode);
                b.__pushMaskObject(c, false);
                Wa.convertToCanvas(c.__bitmapData.image);
                e.globalAlpha = d;
                var f = c.__scrollRect;
                b.setTransform(c.__renderTransform, e);
                if (!b.__allowSmoothing || !c.smoothing) {
                  e.imageSmoothingEnabled = false;
                }
                if (f == null) {
                  e.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
                } else {
                  e.drawImage(c.__bitmapData.image.get_src(), f.x, f.y, f.width, f.height, f.x, f.y, f.width, f.height);
                }
                if (!b.__allowSmoothing || !c.smoothing) {
                  e.imageSmoothingEnabled = true;
                }
                b.__popMaskObject(c, false);
              }
            }
          } else if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(d = b.__getAlpha(a.__worldAlpha), d <= 0 || (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0 && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), e = b.context, b.setTransform(a.__renderTransform, e), c = a.opaqueBackground, e.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")", e.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), a.__graphics == null || !a.__renderable || (d = b.__getAlpha(a.__worldAlpha), d <= 0)))) {
            var k = a.__graphics;
            if (k != null) {
              A.render(k, b);
              var g = k.__width;
              var l = k.__height;
              c = k.__canvas;
              if (c != null && k.__visible && g >= 1 && l >= 1) {
                var h = k.__worldTransform;
                e = b.context;
                f = a.__scrollRect;
                var p = a.__worldScale9Grid;
                if (f == null || f.width > 0 && f.height > 0) {
                  b.__setBlendMode(a.__worldBlendMode);
                  b.__pushMaskObject(a);
                  e.globalAlpha = d;
                  if (p != null && h.b == 0 && h.c == 0) {
                    var m = b.__pixelRatio;
                    d = ya.__pool.get();
                    d.translate(h.tx, h.ty);
                    b.setTransform(d, e);
                    ya.__pool.release(d);
                    d = k.__bounds;
                    var n = k.__renderTransform.a / k.__bitmapScale;
                    var r = k.__renderTransform.d / k.__bitmapScale;
                    var q = n * h.a;
                    var w = r * h.d;
                    h = Math.max(1, Math.round(p.x * n));
                    k = Math.round(p.y * r);
                    f = Math.max(1, Math.round((d.get_right() - p.get_right()) * n));
                    var u = Math.round((d.get_bottom() - p.get_bottom()) * r);
                    n = Math.round(p.width * n);
                    p = Math.round(p.height * r);
                    r = Math.round(h / m);
                    var v = Math.round(k / m);
                    var y = Math.round(f / m);
                    m = Math.round(u / m);
                    q = d.width * q - r - y;
                    d = d.height * w - v - m;
                    b.applySmoothing(e, false);
                    if (n != 0 && p != 0) {
                      e.drawImage(c, 0, 0, h, k, 0, 0, r, v);
                      e.drawImage(c, h, 0, n, k, r, 0, q, v);
                      e.drawImage(c, h + n, 0, f, k, r + q, 0, y, v);
                      e.drawImage(c, 0, k, h, p, 0, v, r, d);
                      e.drawImage(c, h, k, n, p, r, v, q, d);
                      e.drawImage(c, h + n, k, f, p, r + q, v, y, d);
                      e.drawImage(c, 0, k + p, h, u, 0, v + d, r, m);
                      e.drawImage(c, h, k + p, n, u, r, v + d, q, m);
                      e.drawImage(c, h + n, k + p, f, u, r + q, v + d, y, m);
                    } else if (n == 0 && p != 0) {
                      l = r + q + y;
                      e.drawImage(c, 0, 0, g, k, 0, 0, l, v);
                      e.drawImage(c, 0, k, g, p, 0, v, l, d);
                      e.drawImage(c, 0, k + p, g, u, 0, v + d, l, m);
                    } else if (p == 0 && n != 0) {
                      g = v + d + m;
                      e.drawImage(c, 0, 0, h, l, 0, 0, r, g);
                      e.drawImage(c, h, 0, n, l, r, 0, q, g);
                      e.drawImage(c, h + n, 0, f, l, r + q, 0, y, g);
                    }
                  } else {
                    b.setTransform(h, e);
                    e.drawImage(c, 0, 0, g, l);
                  }
                  b.__popMaskObject(a);
                }
              }
            }
          }
        }
        b.__renderEvent(a);
      };
      Fh.renderDrawableMask = function (a, b) {
        if (a.__graphics != null) {
          A.renderMask(a.__graphics, b);
        }
      };
      function pm() {}
      h["openfl.display._internal.CanvasDisplayObjectContainer"] = pm;
      pm.__name__ = "openfl.display._internal.CanvasDisplayObjectContainer";
      pm.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && (a.get_mask() == null || !(a.get_mask().get_width() <= 0) && !(a.get_mask().get_height() <= 0)) && (Fh.renderDrawable(a, b), a.__cacheBitmap == null || a.__isCacheBitmapRender)) {
          b.__pushMaskObject(a);
          if (b.__stage != null) {
            c = 0;
            for (d = a.__children; c < d.length;) {
              var e = d[c];
              ++c;
              b.__renderDrawable(e);
              e.__renderDirty = false;
            }
            a.__renderDirty = false;
          } else {
            c = 0;
            d = a.__children;
            while (c < d.length) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
            }
          }
          b.__popMaskObject(a);
        }
      };
      pm.renderDrawableMask = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__graphics != null) {
          A.renderMask(a.__graphics, b);
        }
        c = 0;
        for (a = a.__children; c < a.length;) {
          d = a[c];
          ++c;
          b.__renderDrawableMask(d);
        }
      };
      function de() {
        if (de.empty == null) {
          this.types = [];
          this.b = [];
          this.i = [];
          this.f = [];
          this.o = [];
          this.ff = [];
          this.ii = [];
          this.copyOnWrite = true;
        } else {
          this.clear();
        }
      }
      h["openfl.display._internal.DrawCommandBuffer"] = de;
      de.__name__ = "openfl.display._internal.DrawCommandBuffer";
      de.prototype = {
        beginBitmapFill: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.BEGIN_BITMAP_FILL);
          this.o.push(a);
          this.o.push(b);
          this.b.push(c);
          this.b.push(d);
        },
        beginFill: function (a, b) {
          this.prepareWrite();
          this.types.push(pa.BEGIN_FILL);
          this.i.push(a);
          this.f.push(b);
        },
        beginGradientFill: function (a, b, c, d, e, f, k, g) {
          this.prepareWrite();
          this.types.push(pa.BEGIN_GRADIENT_FILL);
          this.o.push(a);
          this.ii.push(b);
          this.ff.push(c);
          this.ii.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(g);
        },
        beginShaderFill: function (a) {
          this.prepareWrite();
          this.types.push(pa.BEGIN_SHADER_FILL);
          this.o.push(a);
        },
        clear: function () {
          this.types = de.empty.types;
          this.b = de.empty.b;
          this.i = de.empty.i;
          this.f = de.empty.f;
          this.o = de.empty.o;
          this.ff = de.empty.ff;
          this.ii = de.empty.ii;
          this.copyOnWrite = true;
        },
        cubicCurveTo: function (a, b, c, d, e, f) {
          this.prepareWrite();
          this.types.push(pa.CUBIC_CURVE_TO);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
          this.f.push(e);
          this.f.push(f);
        },
        curveTo: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.CURVE_TO);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawCircle: function (a, b, c) {
          this.prepareWrite();
          this.types.push(pa.DRAW_CIRCLE);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
        },
        drawEllipse: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.DRAW_ELLIPSE);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawQuads: function (a, b, c) {
          this.prepareWrite();
          this.types.push(pa.DRAW_QUADS);
          this.o.push(a);
          this.o.push(b);
          this.o.push(c);
        },
        drawRect: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.DRAW_RECT);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
        },
        drawRoundRect: function (a, b, c, d, e, f) {
          this.prepareWrite();
          this.types.push(pa.DRAW_ROUND_RECT);
          this.f.push(a);
          this.f.push(b);
          this.f.push(c);
          this.f.push(d);
          this.f.push(e);
          this.o.push(f);
        },
        drawTriangles: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.DRAW_TRIANGLES);
          this.o.push(a);
          this.o.push(b);
          this.o.push(c);
          this.o.push(d);
        },
        endFill: function () {
          this.prepareWrite();
          this.types.push(pa.END_FILL);
        },
        lineBitmapStyle: function (a, b, c, d) {
          this.prepareWrite();
          this.types.push(pa.LINE_BITMAP_STYLE);
          this.o.push(a);
          this.o.push(b);
          this.b.push(c);
          this.b.push(d);
        },
        lineGradientStyle: function (a, b, c, d, e, f, k, g) {
          this.prepareWrite();
          this.types.push(pa.LINE_GRADIENT_STYLE);
          this.o.push(a);
          this.ii.push(b);
          this.ff.push(c);
          this.ii.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(g);
        },
        lineStyle: function (a, b, c, d, e, f, k, g) {
          this.prepareWrite();
          this.types.push(pa.LINE_STYLE);
          this.o.push(a);
          this.i.push(b);
          this.f.push(c);
          this.b.push(d);
          this.o.push(e);
          this.o.push(f);
          this.o.push(k);
          this.f.push(g);
        },
        lineTo: function (a, b) {
          this.prepareWrite();
          this.types.push(pa.LINE_TO);
          this.f.push(a);
          this.f.push(b);
        },
        moveTo: function (a, b) {
          this.prepareWrite();
          this.types.push(pa.MOVE_TO);
          this.f.push(a);
          this.f.push(b);
        },
        prepareWrite: function () {
          if (this.copyOnWrite) {
            this.types = this.types.slice();
            this.b = this.b.slice();
            this.i = this.i.slice();
            this.f = this.f.slice();
            this.o = this.o.slice();
            this.ff = this.ff.slice();
            this.ii = this.ii.slice();
            this.copyOnWrite = false;
          }
        },
        overrideBlendMode: function (a) {
          this.prepareWrite();
          this.types.push(pa.OVERRIDE_BLEND_MODE);
          this.o.push(a);
        },
        windingEvenOdd: function () {
          this.prepareWrite();
          this.types.push(pa.WINDING_EVEN_ODD);
        },
        windingNonZero: function () {
          this.prepareWrite();
          this.types.push(pa.WINDING_NON_ZERO);
        },
        get_length: function () {
          return this.types.length;
        },
        __class__: de,
        __properties__: {
          get_length: "get_length"
        }
      };
      function A() {}
      h["openfl.display._internal.CanvasGraphics"] = A;
      A.__name__ = "openfl.display._internal.CanvasGraphics";
      A.closePath = function (a) {
        if (a == null) {
          a = false;
        }
        if (A.context.strokeStyle != null) {
          if (!a) {
            A.context.closePath();
          }
          A.context.stroke();
          if (a) {
            A.context.closePath();
          }
          A.context.beginPath();
        }
      };
      A.createBitmapFill = function (a, b, c) {
        Wa.convertToCanvas(a.image);
        A.setSmoothing(c);
        return A.context.createPattern(a.image.get_src(), b ? "repeat" : "no-repeat");
      };
      A.createGradientPattern = function (a, b, c, d, e, f, k, g) {
        k = false;
        if (e == null) {
          e = ya.__pool.get();
          e.identity();
          k = true;
        }
        switch (a) {
          case 0:
            if (f == 0) {
              a = A.context.createLinearGradient(-819.2, 0, 819.2, 0);
              A.pendingMatrix = e.clone();
              A.inversePendingMatrix = e.clone();
              A.inversePendingMatrix.invert();
              for (var l = 0, t = b.length; l < t;) {
                var h = l++;
                f = d[h] / 255;
                if (f < 0) {
                  f = 0;
                } else if (f > 1) {
                  f = 1;
                }
                a.addColorStop(f, A.getRGBA(b[h], c[h]));
              }
              if (k) {
                ya.__pool.release(e);
              }
              return a;
            }
            a = ((f == 0 ? 1 : 25) - 1) * 819.2;
            k = window.document.createElement("canvas");
            g = k.getContext("2d");
            var m = A.getDimensions(e);
            k.width = A.context.canvas.width;
            k.height = A.context.canvas.height;
            a = A.context.createLinearGradient(-819.2 - a, 0, 819.2 + a, 0);
            if (f == 1) {
              for (var p = 0, n = 0.04; p < 1;) {
                l = 0;
                for (t = b.length; l < t;) {
                  h = l++;
                  f = d[h] / 255;
                  f = p + f * n;
                  if (f < 0) {
                    f = 0;
                  } else if (f > 1) {
                    f = 1;
                  }
                  a.addColorStop(f, A.getRGBA(b[h], c[h]));
                }
                p += n;
                for (l = b.length - 1; l >= 0;) {
                  f = d[l] / 255;
                  f = p + (1 - f) * n;
                  if (f < 0) {
                    f = 0;
                  } else if (f > 1) {
                    f = 1;
                  }
                  a.addColorStop(f, A.getRGBA(b[l], c[l]));
                  --l;
                }
                p += n;
              }
            } else if (f == 2) {
              p = 0;
              n = 0.04;
              while (p < 1) {
                l = 0;
                for (t = b.length; l < t;) {
                  h = l++;
                  f = d[h] / 255;
                  f = p + f * n;
                  if (f < 0) {
                    f = 0;
                  } else if (f > 1) {
                    f = 0.999;
                  }
                  a.addColorStop(f, A.getRGBA(b[h], c[h]));
                }
                f = p + 0.001;
                if (f < 0) {
                  f = 0;
                } else if (f > 1) {
                  f = 1;
                }
                a.addColorStop(f - 0.001, A.getRGBA(b[b.length - 1], c[c.length - 1]));
                a.addColorStop(f, A.getRGBA(b[0], c[0]));
                p += n;
              }
            }
            A.pendingMatrix = new ya();
            A.pendingMatrix.tx = e.tx - m.width / 2;
            A.pendingMatrix.ty = e.ty - m.height / 2;
            A.inversePendingMatrix = A.pendingMatrix.clone();
            A.inversePendingMatrix.invert();
            b = new Path2D();
            b.rect(0, 0, k.width, k.height);
            b.closePath();
            e = new DOMMatrix([e.a, e.b, e.c, e.d, e.tx, e.ty]);
            c = e.inverse();
            d = new Path2D();
            d.addPath(b, c);
            g.fillStyle = a;
            g.setTransform(e);
            g.fill(d);
            return A.context.createPattern(k, "no-repeat");
          case 1:
            if (g > 1) {
              g = 1;
            } else if (g < -1) {
              g = -1;
            }
            a = A.context.createRadialGradient(g * 819.2, 0, 0, 0, 0, 819.2);
            A.pendingMatrix = e.clone();
            A.inversePendingMatrix = e.clone();
            A.inversePendingMatrix.invert();
            l = 0;
            for (t = b.length; l < t;) {
              h = l++;
              f = d[h] / 255;
              if (f < 0) {
                f = 0;
              } else if (f > 1) {
                f = 1;
              }
              a.addColorStop(f, A.getRGBA(b[h], c[h]));
            }
            if (k) {
              ya.__pool.release(e);
            }
            return a;
        }
      };
      A.getRGBA = function (a, b) {
        var c = (a & 16711680) >>> 16;
        var d = (a & 65280) >>> 8;
        a &= 255;
        return "rgba(" + (c == null ? "null" : y.string(mc.toFloat(c))) + ", " + (d == null ? "null" : y.string(mc.toFloat(d))) + ", " + (a == null ? "null" : y.string(mc.toFloat(a))) + ", " + b + ")";
      };
      A.getDimensions = function (a) {
        var b = Math.cos(Math.atan2(a.c, a.a));
        var c = a.a / b * 1638.4;
        a = a.d / b * 1638.4;
        if (c == 0 && a == 0) {
          c = a = 819.2;
        }
        return {
          width: c,
          height: a
        };
      };
      A.createTempPatternCanvas = function (a, b, c, d) {
        var e = window.document.createElement("canvas");
        var f = e.getContext("2d");
        e.width = c;
        e.height = d;
        a = a.image.get_src();
        f.fillStyle = f.createPattern(a, b ? "repeat" : "no-repeat");
        f.beginPath();
        f.moveTo(0, 0);
        f.lineTo(0, d);
        f.lineTo(c, d);
        f.lineTo(c, 0);
        f.lineTo(0, 0);
        f.closePath();
        if (!A.hitTesting) {
          f.fill(A.windingRule);
        }
        return e;
      };
      A.drawRoundRect = function (a, b, c, d, e, f) {
        if (f == null) {
          f = e;
        }
        e *= 0.5;
        f *= 0.5;
        if (e > c / 2) {
          e = c / 2;
        }
        if (f > d / 2) {
          f = d / 2;
        }
        c = a + c;
        d = b + d;
        var k = -e + e * 0.7071067811865476;
        var g = -e + e * 0.41421356237309503;
        var l = -f + f * 0.7071067811865476;
        var h = -f + f * 0.41421356237309503;
        A.context.moveTo(c, d - f);
        A.context.quadraticCurveTo(c, d + h, c + k, d + l);
        A.context.quadraticCurveTo(c + g, d, c - e, d);
        A.context.lineTo(a + e, d);
        A.context.quadraticCurveTo(a - g, d, a - k, d + l);
        A.context.quadraticCurveTo(a, d + h, a, d - f);
        A.context.lineTo(a, b + f);
        A.context.quadraticCurveTo(a, b - h, a - k, b - l);
        A.context.quadraticCurveTo(a - g, b, a + e, b);
        A.context.lineTo(c - e, b);
        A.context.quadraticCurveTo(c + g, b, c + k, b - l);
        A.context.quadraticCurveTo(c, b - h, c, b + f);
        A.context.lineTo(c, d - f);
      };
      A.endFill = function () {
        A.context.beginPath();
        A.playCommands(A.fillCommands, false);
        A.fillCommands.clear();
      };
      A.endStroke = function () {
        A.context.beginPath();
        A.playCommands(A.strokeCommands, true);
        A.context.closePath();
        A.strokeCommands.clear();
      };
      A.hitTest = function (a, b, c) {
        A.bounds = a.__bounds;
        A.graphics = a;
        if (a.__commands.get_length() == 0 || A.bounds == null || A.bounds.width <= 0 || A.bounds.height <= 0) {
          A.graphics = null;
          return false;
        }
        A.hitTesting = true;
        var d = a.__renderTransform;
        var e = b * d.b + c * d.d + d.ty;
        b = b * d.a + c * d.c + d.tx - (A.bounds.x * d.a + A.bounds.y * d.c + d.tx);
        c = e - (A.bounds.x * d.b + A.bounds.y * d.d + d.ty);
        e = a.__canvas;
        var f = a.__context;
        a.__canvas = A.hitTestCanvas;
        a.__context = A.hitTestContext;
        A.context = a.__context;
        A.context.setTransform(d.a, d.b, d.c, d.d, d.tx, d.ty);
        A.fillCommands.clear();
        A.strokeCommands.clear();
        A.hasFill = false;
        A.hasStroke = false;
        A.bitmapFill = null;
        A.bitmapRepeat = false;
        A.windingRule = "evenodd";
        d = new $f(a.__commands);
        for (var k = 0, g = a.__commands.types; k < g.length;) {
          var l = g[k];
          ++k;
          switch (l._hx_index) {
            case 0:
            case 1:
            case 2:
            case 3:
              A.endFill();
              if (A.hasFill && A.context.isPointInPath(b, c, A.windingRule)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                A.graphics = null;
                return true;
              }
              A.endStroke();
              if (A.hasStroke && A.context.isPointInStroke(b, c)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                A.graphics = null;
                return true;
              }
              if (l == pa.BEGIN_BITMAP_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = pa.BEGIN_BITMAP_FILL;
                l = d;
                A.fillCommands.beginBitmapFill(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
                A.strokeCommands.beginBitmapFill(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
              } else if (l == pa.BEGIN_GRADIENT_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = pa.BEGIN_GRADIENT_FILL;
                l = d;
                A.fillCommands.beginGradientFill(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
                A.strokeCommands.beginGradientFill(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
              } else if (l == pa.BEGIN_SHADER_FILL) {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = pa.BEGIN_SHADER_FILL;
                l = d;
                A.fillCommands.beginShaderFill(l.buffer.o[l.oPos]);
                A.strokeCommands.beginShaderFill(l.buffer.o[l.oPos]);
              } else {
                switch (d.prev._hx_index) {
                  case 0:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 1:
                    d.iPos += 1;
                    d.fPos += 1;
                    break;
                  case 2:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 3:
                    d.oPos += 1;
                    break;
                  case 4:
                    d.fPos += 6;
                    break;
                  case 5:
                    d.fPos += 4;
                    break;
                  case 6:
                    d.fPos += 3;
                    break;
                  case 7:
                    d.fPos += 4;
                    break;
                  case 8:
                    d.oPos += 3;
                    break;
                  case 9:
                    d.fPos += 4;
                    break;
                  case 10:
                    d.fPos += 5;
                    d.oPos += 1;
                    break;
                  case 12:
                    d.oPos += 4;
                    break;
                  case 14:
                    d.oPos += 2;
                    d.bPos += 2;
                    break;
                  case 15:
                    d.oPos += 4;
                    d.iiPos += 2;
                    d.ffPos += 1;
                    d.fPos += 1;
                    break;
                  case 16:
                    d.oPos += 4;
                    d.iPos += 1;
                    d.fPos += 2;
                    d.bPos += 1;
                    break;
                  case 17:
                    d.fPos += 2;
                    break;
                  case 18:
                    d.fPos += 2;
                    break;
                  case 19:
                    d.oPos += 1;
                    break;
                  case 20:
                    d.oPos += 1;
                }
                d.prev = pa.BEGIN_FILL;
                l = d;
                A.fillCommands.beginFill(l.buffer.i[l.iPos], 1);
                A.strokeCommands.beginFill(l.buffer.i[l.iPos], 1);
              }
              break;
            case 4:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.CUBIC_CURVE_TO;
              l = d;
              A.fillCommands.cubicCurveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.f[l.fPos + 5]);
              A.strokeCommands.cubicCurveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.f[l.fPos + 5]);
              break;
            case 5:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.CURVE_TO;
              l = d;
              A.fillCommands.curveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
              A.strokeCommands.curveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
              break;
            case 6:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.DRAW_CIRCLE;
              l = d;
              A.fillCommands.drawCircle(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2]);
              A.strokeCommands.drawCircle(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2]);
              break;
            case 7:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.DRAW_ELLIPSE;
              l = d;
              A.fillCommands.drawEllipse(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
              A.strokeCommands.drawEllipse(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
              break;
            case 9:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.DRAW_RECT;
              l = d;
              A.fillCommands.drawRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
              A.strokeCommands.drawRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
              break;
            case 10:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.DRAW_ROUND_RECT;
              l = d;
              A.fillCommands.drawRoundRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.o[l.oPos]);
              A.strokeCommands.drawRoundRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.o[l.oPos]);
              break;
            case 13:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.END_FILL;
              A.endFill();
              if (A.hasFill && A.context.isPointInPath(b, c, A.windingRule)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                A.graphics = null;
                return true;
              }
              A.endStroke();
              if (A.hasStroke && A.context.isPointInStroke(b, c)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                A.graphics = null;
                return true;
              }
              A.hasFill = false;
              A.bitmapFill = null;
              break;
            case 14:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.LINE_BITMAP_STYLE;
              l = d;
              A.strokeCommands.lineBitmapStyle(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
              break;
            case 15:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.LINE_GRADIENT_STYLE;
              l = d;
              A.strokeCommands.lineGradientStyle(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
              break;
            case 16:
              A.endStroke();
              if (A.hasStroke && A.context.isPointInStroke(b, c)) {
                d.destroy();
                a.__canvas = e;
                a.__context = f;
                A.graphics = null;
                return true;
              }
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.LINE_STYLE;
              l = d;
              A.strokeCommands.lineStyle(l.buffer.o[l.oPos], l.buffer.i[l.iPos], 1, l.buffer.b[l.bPos], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos + 1]);
              break;
            case 17:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.LINE_TO;
              l = d;
              A.fillCommands.lineTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
              A.strokeCommands.lineTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
              break;
            case 18:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = pa.MOVE_TO;
              l = d;
              A.fillCommands.moveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
              A.strokeCommands.moveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
              break;
            case 21:
              A.windingRule = "evenodd";
              break;
            case 22:
              A.windingRule = "nonzero";
              break;
            default:
              switch (d.prev._hx_index) {
                case 0:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 1:
                  d.iPos += 1;
                  d.fPos += 1;
                  break;
                case 2:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 3:
                  d.oPos += 1;
                  break;
                case 4:
                  d.fPos += 6;
                  break;
                case 5:
                  d.fPos += 4;
                  break;
                case 6:
                  d.fPos += 3;
                  break;
                case 7:
                  d.fPos += 4;
                  break;
                case 8:
                  d.oPos += 3;
                  break;
                case 9:
                  d.fPos += 4;
                  break;
                case 10:
                  d.fPos += 5;
                  d.oPos += 1;
                  break;
                case 12:
                  d.oPos += 4;
                  break;
                case 14:
                  d.oPos += 2;
                  d.bPos += 2;
                  break;
                case 15:
                  d.oPos += 4;
                  d.iiPos += 2;
                  d.ffPos += 1;
                  d.fPos += 1;
                  break;
                case 16:
                  d.oPos += 4;
                  d.iPos += 1;
                  d.fPos += 2;
                  d.bPos += 1;
                  break;
                case 17:
                  d.fPos += 2;
                  break;
                case 18:
                  d.fPos += 2;
                  break;
                case 19:
                  d.oPos += 1;
                  break;
                case 20:
                  d.oPos += 1;
              }
              d.prev = l;
          }
        }
        k = false;
        if (A.fillCommands.get_length() > 0) {
          A.endFill();
        }
        if (A.hasFill && A.context.isPointInPath(b, c, A.windingRule)) {
          k = true;
        }
        if (A.strokeCommands.get_length() > 0) {
          A.endStroke();
        }
        if (A.hasStroke && A.context.isPointInStroke(b, c)) {
          k = true;
        }
        d.destroy();
        a.__canvas = e;
        a.__context = f;
        A.graphics = null;
        return k;
      };
      A.normalizeUVT = function (a, b) {
        if (b == null) {
          b = false;
        }
        var c = -Infinity;
        var d;
        var e = a.get_length();
        for (var f = 1, k = e + 1; f < k;) {
          d = f++;
          if (!b || d % 3 != 0) {
            d = a.get(d - 1);
            if (c < d) {
              c = d;
            }
          }
        }
        if (!b) {
          return {
            max: c,
            uvt: a
          };
        }
        var g = kb.toFloatVector(null);
        f = 1;
        for (k = e + 1; f < k;) {
          d = f++;
          if (!b || d % 3 != 0) {
            g.push(a.get(d - 1));
          }
        }
        return {
          max: c,
          uvt: g
        };
      };
      A.playCommands = function (a, b) {
        if (b == null) {
          b = false;
        }
        A.bounds = A.graphics.__bounds;
        var c = A.bounds.x;
        var d = A.bounds.y;
        var e = 0;
        var f = 0;
        var k = false;
        var g = 0;
        var l = 0;
        var h = false;
        A.windingRule = "evenodd";
        A.setSmoothing(true);
        var p = false;
        var m = new $f(a);
        var n;
        var r;
        var q;
        var w = null;
        var u = null;
        var y = 0;
        var z = a.types;
        a: while (y < z.length) {
          var Y = z[y];
          ++y;
          switch (Y._hx_index) {
            case 0:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.BEGIN_BITMAP_FILL;
              var C = m;
              A.bitmapFill = C.buffer.o[C.oPos];
              if (C.buffer.o[C.oPos].readable) {
                A.context.fillStyle = A.createBitmapFill(C.buffer.o[C.oPos], C.buffer.b[C.bPos], C.buffer.b[C.bPos + 1]);
              } else {
                var La = v.hex(0, 6);
                A.context.fillStyle = "#" + La;
              }
              A.hasFill = true;
              if (C.buffer.o[C.oPos + 1] != null) {
                A.pendingMatrix = C.buffer.o[C.oPos + 1];
                A.inversePendingMatrix = C.buffer.o[C.oPos + 1].clone();
                A.inversePendingMatrix.invert();
              } else {
                A.pendingMatrix = null;
                A.inversePendingMatrix = null;
              }
              break;
            case 1:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.BEGIN_FILL;
              var D = m;
              if (D.buffer.f[D.fPos] < 0.005) {
                A.hasFill = false;
              } else {
                if (D.buffer.f[D.fPos] == 1) {
                  var E = v.hex(D.buffer.i[D.iPos] & 16777215, 6);
                  A.context.fillStyle = "#" + E;
                } else {
                  var B = (D.buffer.i[D.iPos] & 16711680) >>> 16;
                  var x = (D.buffer.i[D.iPos] & 65280) >>> 8;
                  var G = D.buffer.i[D.iPos] & 255;
                  A.context.fillStyle = "rgba(" + B + ", " + x + ", " + G + ", " + D.buffer.f[D.fPos] + ")";
                }
                A.bitmapFill = null;
                A.setSmoothing(true);
                A.hasFill = true;
              }
              break;
            case 2:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.BEGIN_GRADIENT_FILL;
              var I = m;
              A.context.fillStyle = A.createGradientPattern(I.buffer.o[I.oPos], I.buffer.ii[I.iiPos], I.buffer.ff[I.ffPos], I.buffer.ii[I.iiPos + 1], I.buffer.o[I.oPos + 1], I.buffer.o[I.oPos + 2], I.buffer.o[I.oPos + 3], I.buffer.f[I.fPos]);
              A.bitmapFill = null;
              A.setSmoothing(true);
              A.hasFill = true;
              break;
            case 3:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.BEGIN_SHADER_FILL;
              var ha = m;
              var Ea = ha.buffer.o[ha.oPos];
              if (Ea.inputCount > 0) {
                A.bitmapFill = Ea.inputs[0];
                if (A.bitmapFill.readable) {
                  A.context.fillStyle = A.createBitmapFill(A.bitmapFill, Ea.inputWrap[0] != 0, Ea.inputFilter[0] != 5);
                } else {
                  var ma = v.hex(0, 6);
                  A.context.fillStyle = "#" + ma;
                }
                A.hasFill = true;
                A.pendingMatrix = null;
                A.inversePendingMatrix = null;
              }
              break;
            case 4:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.CUBIC_CURVE_TO;
              var S = m;
              p = true;
              A.context.bezierCurveTo(S.buffer.f[S.fPos] - c, S.buffer.f[S.fPos + 1] - d, S.buffer.f[S.fPos + 2] - c, S.buffer.f[S.fPos + 3] - d, S.buffer.f[S.fPos + 4] - c, S.buffer.f[S.fPos + 5] - d);
              e = S.buffer.f[S.fPos + 4];
              f = S.buffer.f[S.fPos + 5];
              break;
            case 5:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.CURVE_TO;
              var K = m;
              p = true;
              A.context.quadraticCurveTo(K.buffer.f[K.fPos] - c, K.buffer.f[K.fPos + 1] - d, K.buffer.f[K.fPos + 2] - c, K.buffer.f[K.fPos + 3] - d);
              e = K.buffer.f[K.fPos + 2];
              f = K.buffer.f[K.fPos + 3];
              break;
            case 6:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_CIRCLE;
              var la = m;
              p = true;
              A.context.moveTo(la.buffer.f[la.fPos] - c + la.buffer.f[la.fPos + 2], la.buffer.f[la.fPos + 1] - d);
              A.context.arc(la.buffer.f[la.fPos] - c, la.buffer.f[la.fPos + 1] - d, la.buffer.f[la.fPos + 2], 0, Math.PI * 2, true);
              break;
            case 7:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_ELLIPSE;
              var ka = m;
              p = true;
              var L = ka.buffer.f[ka.fPos];
              var F = ka.buffer.f[ka.fPos + 1];
              var H = ka.buffer.f[ka.fPos + 2];
              var O = ka.buffer.f[ka.fPos + 3];
              L -= c;
              F -= d;
              var M = H / 2 * 0.5522848;
              var P = O / 2 * 0.5522848;
              var R = L + H;
              var N = F + O;
              var Ba = L + H / 2;
              var Q = F + O / 2;
              A.context.moveTo(L, Q);
              A.context.bezierCurveTo(L, Q - P, Ba - M, F, Ba, F);
              A.context.bezierCurveTo(Ba + M, F, R, Q - P, R, Q);
              A.context.bezierCurveTo(R, Q + P, Ba + M, N, Ba, N);
              A.context.bezierCurveTo(Ba - M, N, L, Q + P, L, Q);
              break;
            case 8:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_QUADS;
              var U = m;
              var W = U.buffer.o[U.oPos];
              var aa = U.buffer.o[U.oPos + 1];
              var T = U.buffer.o[U.oPos + 2];
              var ca = aa != null;
              var va = false;
              var ea = false;
              var da = ca ? aa.get_length() : Math.floor(W.get_length() / 4);
              if (da == 0) {
                return;
              }
              if (T != null) {
                if (T.get_length() >= da * 6) {
                  ea = va = true;
                } else if (T.get_length() >= da * 4) {
                  va = true;
                } else if (T.get_length() >= da * 2) {
                  ea = true;
                }
              }
              var X = ba.__pool.get();
              var Z = ya.__pool.get();
              var ia = A.graphics.__renderTransform;
              A.context.save();
              for (var Da = 0, We = da; Da < We;) {
                var ja = Da++;
                var fa = ca ? aa.get(ja) * 4 : ja * 4;
                if (!(fa < 0) && !(X.setTo(W.get(fa), W.get(fa + 1), W.get(fa + 2), W.get(fa + 3)), X.width <= 0 || X.height <= 0)) {
                  if (va && ea) {
                    var sa = ja * 6;
                    Z.setTo(T.get(sa), T.get(sa + 1), T.get(sa + 2), T.get(sa + 3), T.get(sa + 4), T.get(sa + 5));
                  } else if (va) {
                    sa = ja * 4;
                    Z.setTo(T.get(sa), T.get(sa + 1), T.get(sa + 2), T.get(sa + 3), X.x, X.y);
                  } else if (ea) {
                    sa = ja * 2;
                    Z.tx = T.get(sa);
                    Z.ty = T.get(sa + 1);
                  } else {
                    Z.tx = X.x;
                    Z.ty = X.y;
                  }
                  Z.tx += e - c;
                  Z.ty += f - d;
                  Z.concat(ia);
                  A.context.setTransform(Z.a, Z.b, Z.c, Z.d, Z.tx, Z.ty);
                  if (A.bitmapFill != null && A.bitmapFill.readable) {
                    A.context.drawImage(A.bitmapFill.image.get_src(), X.x, X.y, X.width, X.height, 0, 0, X.width, X.height);
                  } else {
                    A.context.fillRect(0, 0, X.width, X.height);
                  }
                }
              }
              ba.__pool.release(X);
              ya.__pool.release(Z);
              A.context.restore();
              break;
            case 9:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_RECT;
              var wb = m;
              var gb = false;
              if (A.bitmapFill != null && A.bitmapFill.readable && !A.hitTesting) {
                var na = q = r = n = 0;
                var ra = true;
                if (A.pendingMatrix != null) {
                  if (A.pendingMatrix.b != 0 || A.pendingMatrix.c != 0) {
                    ra = false;
                  } else {
                    if (w == null) {
                      w = ob.__pool.get();
                    }
                    if (u == null) {
                      u = ob.__pool.get();
                    }
                    w.setTo(wb.buffer.f[wb.fPos], wb.buffer.f[wb.fPos + 1]);
                    var oa = A.inversePendingMatrix;
                    var qa = w.x;
                    var Ui = w.y;
                    w.x = qa * oa.a + Ui * oa.c + oa.tx;
                    w.y = qa * oa.b + Ui * oa.d + oa.ty;
                    u.setTo(wb.buffer.f[wb.fPos] + wb.buffer.f[wb.fPos + 2], wb.buffer.f[wb.fPos + 1] + wb.buffer.f[wb.fPos + 3]);
                    var wd = A.inversePendingMatrix;
                    var mb = u.x;
                    var wa = u.y;
                    u.x = mb * wd.a + wa * wd.c + wd.tx;
                    u.y = mb * wd.b + wa * wd.d + wd.ty;
                    n = w.y;
                    na = w.x;
                    q = u.y;
                    r = u.x;
                  }
                } else {
                  n = wb.buffer.f[wb.fPos + 1];
                  na = wb.buffer.f[wb.fPos];
                  q = wb.buffer.f[wb.fPos + 1] + wb.buffer.f[wb.fPos + 3];
                  r = wb.buffer.f[wb.fPos] + wb.buffer.f[wb.fPos + 2];
                }
                if (ra && n >= 0 && na >= 0 && r <= A.bitmapFill.width && q <= A.bitmapFill.height) {
                  gb = true;
                  if (!A.hitTesting) {
                    A.context.drawImage(A.bitmapFill.image.get_src(), na, n, r - na, q - n, wb.buffer.f[wb.fPos] - c, wb.buffer.f[wb.fPos + 1] - d, wb.buffer.f[wb.fPos + 2], wb.buffer.f[wb.fPos + 3]);
                  }
                }
              }
              if (!gb) {
                p = true;
                A.context.rect(wb.buffer.f[wb.fPos] - c, wb.buffer.f[wb.fPos + 1] - d, wb.buffer.f[wb.fPos + 2], wb.buffer.f[wb.fPos + 3]);
              }
              break;
            case 10:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_ROUND_RECT;
              var ua = m;
              p = true;
              A.drawRoundRect(ua.buffer.f[ua.fPos] - c, ua.buffer.f[ua.fPos + 1] - d, ua.buffer.f[ua.fPos + 2], ua.buffer.f[ua.fPos + 3], ua.buffer.f[ua.fPos + 4], ua.buffer.o[ua.oPos]);
              break;
            case 12:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.DRAW_TRIANGLES;
              var Ra = m;
              var xa = Ra.buffer.o[Ra.oPos];
              var Aa = Ra.buffer.o[Ra.oPos + 1];
              var za = Ra.buffer.o[Ra.oPos + 2];
              var Ca = null;
              var Ec = A.bitmapFill == null;
              if (Ec && za != null) {
                break a;
              }
              if (!Ec) {
                if (za == null) {
                  za = kb.toFloatVector(null);
                  for (var Fa = 0, Ia = xa.get_length() / 2 | 0; Fa < Ia;) {
                    var Ha = Fa++;
                    za.push(xa.get(Ha * 2) - c / A.bitmapFill.width);
                    za.push(xa.get(Ha * 2 + 1) - d / A.bitmapFill.height);
                  }
                }
                var Ja = za.get_length() != xa.get_length();
                var Ma = A.normalizeUVT(za, Ja);
                var Oa = Ma.max;
                za = Ma.uvt;
                Ca = Oa > 1 ? A.createTempPatternCanvas(A.bitmapFill, A.bitmapRepeat, A.bounds.width | 0, A.bounds.height | 0) : A.createTempPatternCanvas(A.bitmapFill, A.bitmapRepeat, A.bitmapFill.width, A.bitmapFill.height);
              }
              for (var Ga = 0, Qa = Aa.get_length(), Pa, Va, Wa, ub, Za, $a, ab, cb, eb, yb, Ta, Sa, Ua, Xa, Ya, ib, hb, bb, lb, db, fb, Wc, mc, qb, rb, sb, tb, vb; Ga < Qa;) {
                Pa = Ga;
                Va = Ga + 1;
                Wa = Ga + 2;
                ub = Aa.get(Pa) * 2;
                Za = Aa.get(Pa) * 2 + 1;
                $a = Aa.get(Va) * 2;
                ab = Aa.get(Va) * 2 + 1;
                cb = Aa.get(Wa) * 2;
                eb = Aa.get(Wa) * 2 + 1;
                yb = xa.get(ub) - c;
                Ta = xa.get(Za) - d;
                Sa = xa.get($a) - c;
                Ua = xa.get(ab) - d;
                Xa = xa.get(cb) - c;
                Ya = xa.get(eb) - d;
                switch (Ra.buffer.o[Ra.oPos + 3]) {
                  case 0:
                    if ((Sa - yb) * (Ya - Ta) - (Ua - Ta) * (Xa - yb) < 0) {
                      Ga += 3;
                      continue;
                    }
                    break;
                  case 2:
                    if (!((Sa - yb) * (Ya - Ta) - (Ua - Ta) * (Xa - yb) < 0)) {
                      Ga += 3;
                      continue;
                    }
                }
                if (Ec) {
                  A.context.beginPath();
                  A.context.moveTo(yb, Ta);
                  A.context.lineTo(Sa, Ua);
                  A.context.lineTo(Xa, Ya);
                  A.context.closePath();
                  if (!A.hitTesting) {
                    A.context.fill(A.windingRule);
                  }
                  Ga += 3;
                } else {
                  ib = za.get(ub) * Ca.width;
                  bb = za.get($a) * Ca.width;
                  db = za.get(cb) * Ca.width;
                  hb = za.get(Za) * Ca.height;
                  lb = za.get(ab) * Ca.height;
                  fb = za.get(eb) * Ca.height;
                  Wc = ib * (fb - lb) - bb * fb + db * lb + (bb - db) * hb;
                  if (Wc == 0) {
                    Ga += 3;
                    A.context.restore();
                  } else {
                    A.context.save();
                    A.context.beginPath();
                    A.context.moveTo(yb, Ta);
                    A.context.lineTo(Sa, Ua);
                    A.context.lineTo(Xa, Ya);
                    A.context.closePath();
                    A.context.clip();
                    mc = -(hb * (Xa - Sa) - lb * Xa + fb * Sa + (lb - fb) * yb) / Wc;
                    qb = (lb * Ya + hb * (Ua - Ya) - fb * Ua + (fb - lb) * Ta) / Wc;
                    rb = (ib * (Xa - Sa) - bb * Xa + db * Sa + (bb - db) * yb) / Wc;
                    sb = -(bb * Ya + ib * (Ua - Ya) - db * Ua + (db - bb) * Ta) / Wc;
                    tb = (ib * (fb * Sa - lb * Xa) + hb * (bb * Xa - db * Sa) + (db * lb - bb * fb) * yb) / Wc;
                    vb = (ib * (fb * Ua - lb * Ya) + hb * (bb * Ya - db * Ua) + (db * lb - bb * fb) * Ta) / Wc;
                    A.context.transform(mc, qb, rb, sb, tb, vb);
                    A.context.drawImage(Ca, 0, 0, Ca.width, Ca.height);
                    A.context.restore();
                    Ga += 3;
                  }
                }
              }
              break;
            case 14:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.LINE_BITMAP_STYLE;
              var pb = m;
              if (b && A.hasStroke) {
                A.closePath(true);
              }
              A.context.moveTo(e - c, f - d);
              if (pb.buffer.o[pb.oPos].readable) {
                A.context.strokeStyle = A.createBitmapFill(pb.buffer.o[pb.oPos], pb.buffer.b[pb.bPos], pb.buffer.b[pb.bPos + 1]);
              } else {
                var zb = v.hex(0, 6);
                A.context.strokeStyle = "#" + zb;
              }
              A.hasStroke = true;
              break;
            case 15:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.LINE_GRADIENT_STYLE;
              var jb = m;
              if (b && A.hasStroke) {
                A.closePath(true);
              }
              A.context.moveTo(e - c, f - d);
              A.context.strokeStyle = A.createGradientPattern(jb.buffer.o[jb.oPos], jb.buffer.ii[jb.iiPos], jb.buffer.ff[jb.ffPos], jb.buffer.ii[jb.iiPos + 1], jb.buffer.o[jb.oPos + 1], jb.buffer.o[jb.oPos + 2], jb.buffer.o[jb.oPos + 3], jb.buffer.f[jb.fPos]);
              A.setSmoothing(true);
              A.hasStroke = true;
              break;
            case 16:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.LINE_STYLE;
              var Na = m;
              if (b && A.hasStroke) {
                A.closePath(true);
              }
              A.context.moveTo(e - c, f - d);
              if (Na.buffer.o[Na.oPos] == null) {
                A.hasStroke = false;
              } else {
                A.context.lineWidth = Na.buffer.o[Na.oPos] > 0 ? Na.buffer.o[Na.oPos] : 1;
                var Ab = Na.buffer.o[Na.oPos + 3] == null ? "round" : (Na.buffer.o[Na.oPos + 3] == null ? "null" : Tp.toString(Na.buffer.o[Na.oPos + 3])).toLowerCase();
                A.context.lineJoin = Ab;
                var Bb = Na.buffer.o[Na.oPos + 2] == null ? "round" : Na.buffer.o[Na.oPos + 2] == 0 ? "butt" : (Na.buffer.o[Na.oPos + 2] == null ? "null" : Sp.toString(Na.buffer.o[Na.oPos + 2])).toLowerCase();
                A.context.lineCap = Bb;
                A.context.miterLimit = Na.buffer.f[Na.fPos + 1];
                if (Na.buffer.f[Na.fPos] == 1) {
                  var Cb = v.hex(Na.buffer.i[Na.iPos] & 16777215, 6);
                  A.context.strokeStyle = "#" + Cb;
                } else {
                  B = (Na.buffer.i[Na.iPos] & 16711680) >>> 16;
                  x = (Na.buffer.i[Na.iPos] & 65280) >>> 8;
                  G = Na.buffer.i[Na.iPos] & 255;
                  A.context.strokeStyle = "rgba(" + B + ", " + x + ", " + G + ", " + Na.buffer.f[Na.fPos] + ")";
                }
                A.setSmoothing(true);
                A.hasStroke = true;
              }
              break;
            case 17:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.LINE_TO;
              var xb = m;
              p = true;
              A.context.lineTo(xb.buffer.f[xb.fPos] - c, xb.buffer.f[xb.fPos + 1] - d);
              e = xb.buffer.f[xb.fPos];
              f = xb.buffer.f[xb.fPos + 1];
              if (e == g && f == l) {
                k = true;
              }
              break;
            case 18:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = pa.MOVE_TO;
              var nb = m;
              A.context.moveTo(nb.buffer.f[nb.fPos] - c, nb.buffer.f[nb.fPos + 1] - d);
              e = nb.buffer.f[nb.fPos];
              f = nb.buffer.f[nb.fPos + 1];
              if (h && nb.buffer.f[nb.fPos] != g && nb.buffer.f[nb.fPos + 1] != l) {
                k = true;
              }
              g = nb.buffer.f[nb.fPos];
              l = nb.buffer.f[nb.fPos + 1];
              h = true;
              break;
            case 21:
              A.windingRule = "evenodd";
              break;
            case 22:
              A.windingRule = "nonzero";
              break;
            default:
              switch (m.prev._hx_index) {
                case 0:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 1:
                  m.iPos += 1;
                  m.fPos += 1;
                  break;
                case 2:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 3:
                  m.oPos += 1;
                  break;
                case 4:
                  m.fPos += 6;
                  break;
                case 5:
                  m.fPos += 4;
                  break;
                case 6:
                  m.fPos += 3;
                  break;
                case 7:
                  m.fPos += 4;
                  break;
                case 8:
                  m.oPos += 3;
                  break;
                case 9:
                  m.fPos += 4;
                  break;
                case 10:
                  m.fPos += 5;
                  m.oPos += 1;
                  break;
                case 12:
                  m.oPos += 4;
                  break;
                case 14:
                  m.oPos += 2;
                  m.bPos += 2;
                  break;
                case 15:
                  m.oPos += 4;
                  m.iiPos += 2;
                  m.ffPos += 1;
                  m.fPos += 1;
                  break;
                case 16:
                  m.oPos += 4;
                  m.iPos += 1;
                  m.fPos += 2;
                  m.bPos += 1;
                  break;
                case 17:
                  m.fPos += 2;
                  break;
                case 18:
                  m.fPos += 2;
                  break;
                case 19:
                  m.oPos += 1;
                  break;
                case 20:
                  m.oPos += 1;
              }
              m.prev = Y;
          }
        }
        if (w != null) {
          ob.__pool.release(w);
        }
        if (u != null) {
          ob.__pool.release(u);
        }
        m.destroy();
        if (p) {
          if (b && A.hasStroke) {
            if (A.hasFill) {
              if (e != g || f != l) {
                A.context.lineTo(g - c, l - d);
                k = true;
              }
              if (k) {
                A.closePath(true);
              }
            } else if (k && e == g && f == l) {
              A.closePath(true);
            }
            if (!A.hitTesting) {
              A.context.stroke();
            }
          }
          if (!b && (!!A.hasFill || A.bitmapFill != null)) {
            A.context.translate(-A.bounds.x, -A.bounds.y);
            if (A.pendingMatrix != null) {
              A.context.transform(A.pendingMatrix.a, A.pendingMatrix.b, A.pendingMatrix.c, A.pendingMatrix.d, A.pendingMatrix.tx, A.pendingMatrix.ty);
              if (!A.hitTesting) {
                A.context.fill(A.windingRule);
              }
              A.context.transform(A.inversePendingMatrix.a, A.inversePendingMatrix.b, A.inversePendingMatrix.c, A.inversePendingMatrix.d, A.inversePendingMatrix.tx, A.inversePendingMatrix.ty);
            } else if (!A.hitTesting) {
              A.context.fill(A.windingRule);
            }
            A.context.translate(A.bounds.x, A.bounds.y);
            A.context.closePath();
          }
        }
      };
      A.render = function (a, b) {
        a.__update(b.__worldTransform, b.__pixelRatio);
        if (a.__softwareDirty) {
          A.hitTesting = false;
          A.graphics = a;
          A.allowSmoothing = b.__allowSmoothing;
          A.worldAlpha = b.__getAlpha(a.__owner.__worldAlpha);
          A.bounds = a.__bounds;
          var c = a.__width;
          var d = a.__height;
          if (!a.__visible || a.__commands.get_length() == 0 || A.bounds == null || c < 1 || d < 1) {
            a.__canvas = null;
            a.__context = null;
            a.__bitmap = null;
          } else {
            if (a.__canvas == null) {
              a.__canvas = window.document.createElement("canvas");
              a.__context = a.__canvas.getContext("2d");
            }
            A.context = a.__context;
            var e = a.__renderTransform;
            var f = a.__canvas;
            var k = b.__pixelRatio;
            var g = c * k | 0;
            var l = d * k | 0;
            b.__setBlendModeContext(A.context, 10);
            if (b.__isDOM) {
              if (f.width == g && f.height == l) {
                A.context.clearRect(0, 0, g, l);
              } else {
                f.width = g;
                f.height = l;
                f.style.width = c + "px";
                f.style.height = d + "px";
              }
              c = a.__renderTransform;
              A.context.setTransform(c.a * k, c.b * k, c.c * k, c.d * k, c.tx * k, c.ty * k);
            } else {
              if (f.width == g && f.height == l) {
                A.context.closePath();
                A.context.setTransform(1, 0, 0, 1, 0, 0);
                A.context.clearRect(0, 0, g, l);
              } else {
                f.width = c;
                f.height = d;
              }
              A.context.setTransform(e.a, e.b, e.c, e.d, e.tx, e.ty);
            }
            A.fillCommands.clear();
            A.strokeCommands.clear();
            A.hasFill = false;
            A.hasStroke = false;
            A.bitmapFill = null;
            k = A.bitmapRepeat = false;
            d = c = 0;
            A.windingRule = "evenodd";
            e = new $f(a.__commands);
            f = 0;
            for (g = a.__commands.types; f < g.length;) {
              l = g[f];
              ++f;
              switch (l._hx_index) {
                case 0:
                case 1:
                case 2:
                case 3:
                  A.endFill();
                  A.endStroke();
                  if (l == pa.BEGIN_BITMAP_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = pa.BEGIN_BITMAP_FILL;
                    l = e;
                    A.fillCommands.beginBitmapFill(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
                    A.strokeCommands.beginBitmapFill(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
                  } else if (l == pa.BEGIN_GRADIENT_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = pa.BEGIN_GRADIENT_FILL;
                    l = e;
                    A.fillCommands.beginGradientFill(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
                    A.strokeCommands.beginGradientFill(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
                  } else if (l == pa.BEGIN_SHADER_FILL) {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = pa.BEGIN_SHADER_FILL;
                    l = e;
                    A.fillCommands.beginShaderFill(l.buffer.o[l.oPos]);
                    A.strokeCommands.beginShaderFill(l.buffer.o[l.oPos]);
                  } else {
                    switch (e.prev._hx_index) {
                      case 0:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 1:
                        e.iPos += 1;
                        e.fPos += 1;
                        break;
                      case 2:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 3:
                        e.oPos += 1;
                        break;
                      case 4:
                        e.fPos += 6;
                        break;
                      case 5:
                        e.fPos += 4;
                        break;
                      case 6:
                        e.fPos += 3;
                        break;
                      case 7:
                        e.fPos += 4;
                        break;
                      case 8:
                        e.oPos += 3;
                        break;
                      case 9:
                        e.fPos += 4;
                        break;
                      case 10:
                        e.fPos += 5;
                        e.oPos += 1;
                        break;
                      case 12:
                        e.oPos += 4;
                        break;
                      case 14:
                        e.oPos += 2;
                        e.bPos += 2;
                        break;
                      case 15:
                        e.oPos += 4;
                        e.iiPos += 2;
                        e.ffPos += 1;
                        e.fPos += 1;
                        break;
                      case 16:
                        e.oPos += 4;
                        e.iPos += 1;
                        e.fPos += 2;
                        e.bPos += 1;
                        break;
                      case 17:
                        e.fPos += 2;
                        break;
                      case 18:
                        e.fPos += 2;
                        break;
                      case 19:
                        e.oPos += 1;
                        break;
                      case 20:
                        e.oPos += 1;
                    }
                    e.prev = pa.BEGIN_FILL;
                    l = e;
                    A.fillCommands.beginFill(l.buffer.i[l.iPos], l.buffer.f[l.fPos]);
                    A.strokeCommands.beginFill(l.buffer.i[l.iPos], l.buffer.f[l.fPos]);
                  }
                  break;
                case 4:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.CUBIC_CURVE_TO;
                  l = e;
                  A.fillCommands.cubicCurveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.f[l.fPos + 5]);
                  if (k) {
                    A.strokeCommands.cubicCurveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.f[l.fPos + 5]);
                  } else {
                    c = l.buffer.f[l.fPos + 4];
                    d = l.buffer.f[l.fPos + 5];
                  }
                  break;
                case 5:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.CURVE_TO;
                  l = e;
                  A.fillCommands.curveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                  if (k) {
                    A.strokeCommands.curveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                  } else {
                    c = l.buffer.f[l.fPos + 2];
                    d = l.buffer.f[l.fPos + 3];
                  }
                  break;
                case 6:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_CIRCLE;
                  l = e;
                  A.fillCommands.drawCircle(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2]);
                  if (k) {
                    A.strokeCommands.drawCircle(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2]);
                  }
                  break;
                case 7:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_ELLIPSE;
                  l = e;
                  A.fillCommands.drawEllipse(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                  if (k) {
                    A.strokeCommands.drawEllipse(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                  }
                  break;
                case 8:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_QUADS;
                  l = e;
                  A.fillCommands.drawQuads(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2]);
                  break;
                case 9:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_RECT;
                  l = e;
                  A.fillCommands.drawRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                  if (k) {
                    A.strokeCommands.drawRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3]);
                  }
                  break;
                case 10:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_ROUND_RECT;
                  l = e;
                  A.fillCommands.drawRoundRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.o[l.oPos]);
                  if (k) {
                    A.strokeCommands.drawRoundRect(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1], l.buffer.f[l.fPos + 2], l.buffer.f[l.fPos + 3], l.buffer.f[l.fPos + 4], l.buffer.o[l.oPos]);
                  }
                  break;
                case 12:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.DRAW_TRIANGLES;
                  l = e;
                  A.fillCommands.drawTriangles(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3]);
                  break;
                case 13:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.END_FILL;
                  A.endFill();
                  A.endStroke();
                  k = A.hasFill = false;
                  A.bitmapFill = null;
                  d = c = 0;
                  break;
                case 14:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.LINE_BITMAP_STYLE;
                  l = e;
                  if (!k && (c != 0 || d != 0)) {
                    A.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = true;
                  A.strokeCommands.lineBitmapStyle(l.buffer.o[l.oPos], l.buffer.o[l.oPos + 1], l.buffer.b[l.bPos], l.buffer.b[l.bPos + 1]);
                  break;
                case 15:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.LINE_GRADIENT_STYLE;
                  l = e;
                  if (!k && (c != 0 || d != 0)) {
                    A.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = true;
                  A.strokeCommands.lineGradientStyle(l.buffer.o[l.oPos], l.buffer.ii[l.iiPos], l.buffer.ff[l.ffPos], l.buffer.ii[l.iiPos + 1], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos]);
                  break;
                case 16:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.LINE_STYLE;
                  l = e;
                  if (!k && l.buffer.o[l.oPos] != null && (c != 0 || d != 0)) {
                    A.strokeCommands.moveTo(c, d);
                    d = c = 0;
                  }
                  k = l.buffer.o[l.oPos] != null;
                  A.strokeCommands.lineStyle(l.buffer.o[l.oPos], l.buffer.i[l.iPos], l.buffer.f[l.fPos], l.buffer.b[l.bPos], l.buffer.o[l.oPos + 1], l.buffer.o[l.oPos + 2], l.buffer.o[l.oPos + 3], l.buffer.f[l.fPos + 1]);
                  break;
                case 17:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.LINE_TO;
                  l = e;
                  A.fillCommands.lineTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                  if (k) {
                    A.strokeCommands.lineTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                  } else {
                    c = l.buffer.f[l.fPos];
                    d = l.buffer.f[l.fPos + 1];
                  }
                  break;
                case 18:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.MOVE_TO;
                  l = e;
                  A.fillCommands.moveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                  if (k) {
                    A.strokeCommands.moveTo(l.buffer.f[l.fPos], l.buffer.f[l.fPos + 1]);
                  } else {
                    c = l.buffer.f[l.fPos];
                    d = l.buffer.f[l.fPos + 1];
                  }
                  break;
                case 19:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.OVERRIDE_BLEND_MODE;
                  l = e;
                  b.__setBlendModeContext(A.context, l.buffer.o[l.oPos]);
                  break;
                case 21:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.WINDING_EVEN_ODD;
                  A.fillCommands.windingEvenOdd();
                  A.windingRule = "evenodd";
                  break;
                case 22:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = pa.WINDING_NON_ZERO;
                  A.fillCommands.windingNonZero();
                  A.windingRule = "nonzero";
                  break;
                default:
                  switch (e.prev._hx_index) {
                    case 0:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 1:
                      e.iPos += 1;
                      e.fPos += 1;
                      break;
                    case 2:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 3:
                      e.oPos += 1;
                      break;
                    case 4:
                      e.fPos += 6;
                      break;
                    case 5:
                      e.fPos += 4;
                      break;
                    case 6:
                      e.fPos += 3;
                      break;
                    case 7:
                      e.fPos += 4;
                      break;
                    case 8:
                      e.oPos += 3;
                      break;
                    case 9:
                      e.fPos += 4;
                      break;
                    case 10:
                      e.fPos += 5;
                      e.oPos += 1;
                      break;
                    case 12:
                      e.oPos += 4;
                      break;
                    case 14:
                      e.oPos += 2;
                      e.bPos += 2;
                      break;
                    case 15:
                      e.oPos += 4;
                      e.iiPos += 2;
                      e.ffPos += 1;
                      e.fPos += 1;
                      break;
                    case 16:
                      e.oPos += 4;
                      e.iPos += 1;
                      e.fPos += 2;
                      e.bPos += 1;
                      break;
                    case 17:
                      e.fPos += 2;
                      break;
                    case 18:
                      e.fPos += 2;
                      break;
                    case 19:
                      e.oPos += 1;
                      break;
                    case 20:
                      e.oPos += 1;
                  }
                  e.prev = l;
              }
            }
            if (A.fillCommands.get_length() > 0) {
              A.endFill();
            }
            if (A.strokeCommands.get_length() > 0) {
              A.endStroke();
            }
            e.destroy();
            a.__bitmap = N.fromCanvas(a.__canvas);
          }
          a.__softwareDirty = false;
          a.set___dirty(false);
          A.graphics = null;
        }
      };
      A.renderMask = function (a, b) {
        if (a.__commands.get_length() != 0) {
          A.context = b.context;
          b = new $f(a.__commands);
          var c = 0;
          for (a = a.__commands.types; c < a.length;) {
            var d = a[c];
            ++c;
            switch (d._hx_index) {
              case 4:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.CUBIC_CURVE_TO;
                d = b;
                A.context.bezierCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0, d.buffer.f[d.fPos + 4] - 0, d.buffer.f[d.fPos + 5] - 0);
                break;
              case 5:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.CURVE_TO;
                d = b;
                A.context.quadraticCurveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2] - 0, d.buffer.f[d.fPos + 3] - 0);
                break;
              case 6:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.DRAW_CIRCLE;
                d = b;
                A.context.arc(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], 0, Math.PI * 2, true);
                break;
              case 7:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.DRAW_ELLIPSE;
                var e = b;
                d = e.buffer.f[e.fPos];
                var f = e.buffer.f[e.fPos + 1];
                var k = e.buffer.f[e.fPos + 2];
                var g = e.buffer.f[e.fPos + 3];
                d -= 0;
                f -= 0;
                e = k / 2 * 0.5522848;
                var l = g / 2 * 0.5522848;
                var h = d + k;
                var p = f + g;
                k = d + k / 2;
                g = f + g / 2;
                A.context.moveTo(d, g);
                A.context.bezierCurveTo(d, g - l, k - e, f, k, f);
                A.context.bezierCurveTo(k + e, f, h, g - l, h, g);
                A.context.bezierCurveTo(h, g + l, k + e, p, k, p);
                A.context.bezierCurveTo(k - e, p, d, g + l, d, g);
                break;
              case 9:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.DRAW_RECT;
                d = b;
                A.context.beginPath();
                A.context.rect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3]);
                A.context.closePath();
                break;
              case 10:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.DRAW_ROUND_RECT;
                d = b;
                A.drawRoundRect(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0, d.buffer.f[d.fPos + 2], d.buffer.f[d.fPos + 3], d.buffer.f[d.fPos + 4], d.buffer.o[d.oPos]);
                break;
              case 17:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.LINE_TO;
                d = b;
                A.context.lineTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                break;
              case 18:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = pa.MOVE_TO;
                d = b;
                A.context.moveTo(d.buffer.f[d.fPos] - 0, d.buffer.f[d.fPos + 1] - 0);
                break;
              default:
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = d;
            }
          }
          b.destroy();
        }
      };
      A.setSmoothing = function (a) {
        if (!A.allowSmoothing) {
          a = false;
        }
        if (A.context.imageSmoothingEnabled != a) {
          A.context.imageSmoothingEnabled = a;
        }
      };
      function qm() {}
      h["openfl.display._internal.CanvasSimpleButton"] = qm;
      qm.__name__ = "openfl.display._internal.CanvasSimpleButton";
      qm.renderDrawable = function (a, b) {
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
          b.__pushMaskObject(a);
          b.__renderDrawable(a.__currentState);
          b.__popMaskObject(a);
          b.__renderEvent(a);
        }
      };
      qm.renderDrawableMask = function (a, b) {
        b.__renderDrawableMask(a.__currentState);
      };
      function aa() {}
      h["openfl.display._internal.CanvasTextField"] = aa;
      aa.__name__ = "openfl.display._internal.CanvasTextField";
      aa.renderDrawable = function (a, b) {
        if (b.__isDOM && !a.__renderedOnCanvasWhileOnDOM) {
          a.__renderedOnCanvasWhileOnDOM = true;
          if (a.get_type() == 1) {
            a.replaceText(0, a.__text.length, a.__text);
          }
          if (a.__isHTML) {
            a.__updateText(Za.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
          }
          a.__dirty = true;
          a.__layoutDirty = true;
          if (!a.__renderDirty) {
            a.__renderDirty = true;
            a.__setParentRenderDirty();
          }
        }
        if (a.get_mask() == null || a.get_mask().get_width() > 0 && a.get_mask().get_height() > 0) {
          b.__updateCacheBitmap(a, a.__dirty);
          if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
            var c = a.__textEngine;
            var d = !c.background && !c.border;
            var e = d ? c.textBounds : c.bounds;
            var f = a.__graphics;
            var k = 0;
            if (a.__dirty) {
              a.__updateLayout();
              if (f.__bounds == null) {
                f.__bounds = new ba();
              }
              if (a.get_text().length == 0) {
                var g = c.bounds.width - 4;
                var l = a.get_defaultTextFormat().align;
                k = l == 3 ? 0 : l == 4 ? g : g / 2;
                switch (l) {
                  case 0:
                    k += a.get_defaultTextFormat().leftMargin / 2;
                    k -= a.get_defaultTextFormat().rightMargin / 2;
                    k += a.get_defaultTextFormat().indent / 2;
                    k += a.get_defaultTextFormat().blockIndent / 2;
                    break;
                  case 2:
                    k += a.get_defaultTextFormat().leftMargin;
                    k += a.get_defaultTextFormat().indent;
                    k += a.get_defaultTextFormat().blockIndent;
                    break;
                  case 3:
                    k += a.get_defaultTextFormat().leftMargin;
                    k += a.get_defaultTextFormat().indent;
                    k += a.get_defaultTextFormat().blockIndent;
                    break;
                  case 4:
                    k -= a.get_defaultTextFormat().rightMargin;
                }
                if (d) {
                  e.y = c.bounds.y;
                  e.x = k;
                }
              }
              f.__bounds.copyFrom(e);
            }
            l = b.__pixelRatio;
            f.__update(b.__worldTransform, l);
            if (a.__dirty || f.__softwareDirty) {
              g = Math.round(f.__width * l);
              var h = Math.round(f.__height * l);
              if ((c.text == null || c.text == "") && !c.background && !c.border && !c.__hasFocus && (c.type != 1 || !c.selectable) || (c.width <= 0 || c.height <= 0) && c.autoSize != 2) {
                a.__graphics.__canvas = null;
                a.__graphics.__context = null;
                a.__graphics.__bitmap = null;
                a.__graphics.__softwareDirty = false;
                a.__graphics.set___dirty(false);
                a.__dirty = false;
              } else {
                if (a.__graphics.__canvas == null) {
                  a.__graphics.__canvas = window.document.createElement("canvas");
                  a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
                }
                aa.context = f.__context;
                f.__canvas.width = g;
                f.__canvas.height = h;
                if (b.__isDOM) {
                  f.__canvas.style.width = Math.round(g / l) + "px";
                  f.__canvas.style.height = Math.round(h / l) + "px";
                }
                var p = ya.__pool.get();
                p.scale(l, l);
                p.concat(f.__renderTransform);
                aa.context.setTransform(p.a, p.b, p.c, p.d, p.tx, p.ty);
                ya.__pool.release(p);
                if (aa.clearRect == null) {
                  aa.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
                }
                if (aa.clearRect) {
                  aa.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
                }
                if (c.text != null && c.text != "" || c.__hasFocus) {
                  g = c.text;
                  f.__context.imageSmoothingEnabled = !b.__allowSmoothing || c.antiAliasType == 0 && c.sharpness == 400 ? false : true;
                  if (c.border || c.background) {
                    aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                    if (c.background) {
                      var m = v.hex(c.backgroundColor & 16777215, 6);
                      aa.context.fillStyle = "#" + m;
                      aa.context.fill();
                    }
                    if (c.border) {
                      aa.context.lineWidth = 1;
                      m = v.hex(c.borderColor & 16777215, 6);
                      aa.context.strokeStyle = "#" + m;
                      aa.context.stroke();
                    }
                  }
                  aa.context.textBaseline = "alphabetic";
                  aa.context.textAlign = "start";
                  h = -a.get_scrollH();
                  var n = d = 0;
                  for (m = a.get_scrollV() - 1; n < m;) {
                    var r = n++;
                    d -= c.lineHeights.get(r);
                  }
                  var q;
                  for (k = c.layoutGroups.iterator(); k.hasNext();) {
                    var w = k.next();
                    if (!(w.lineIndex < a.get_scrollV() - 1)) {
                      if (w.lineIndex > c.get_bottomScrollV() - 1) {
                        break;
                      }
                      p = "#" + v.hex(w.format.color & 16777215, 6);
                      aa.context.font = ic.getFont(w.format);
                      aa.context.fillStyle = p;
                      aa.context.fillText(g.substring(w.startIndex, w.endIndex), w.offsetX + h - e.x, w.offsetY + w.ascent + d - e.y);
                      if (a.__caretIndex > -1 && c.selectable) {
                        if (a.__selectionIndex == a.__caretIndex) {
                          if (a.__showCursor && w.startIndex <= a.__caretIndex && w.endIndex >= a.__caretIndex) {
                            n = q = 0;
                            for (m = a.__caretIndex - w.startIndex; n < m;) {
                              r = n++;
                              if (w.positions.length <= r) {
                                break;
                              }
                              q += w.positions[r];
                            }
                            n = 0;
                            m = a.get_scrollV();
                            for (r = w.lineIndex + 1; m < r;) {
                              var u = m++;
                              n += c.lineHeights.get(u - 1);
                            }
                            aa.context.beginPath();
                            m = v.hex(w.format.color & 16777215, 6);
                            aa.context.strokeStyle = "#" + m;
                            aa.context.moveTo(w.offsetX + q - a.get_scrollH() - e.x, n + 2 - e.y);
                            aa.context.lineWidth = 1;
                            aa.context.lineTo(w.offsetX + q - a.get_scrollH() - e.x, n + ic.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                            aa.context.stroke();
                            aa.context.closePath();
                          }
                        } else if (w.startIndex <= a.__caretIndex && w.endIndex >= a.__caretIndex || w.startIndex <= a.__selectionIndex && w.endIndex >= a.__selectionIndex || w.startIndex > a.__caretIndex && w.endIndex < a.__selectionIndex || w.startIndex > a.__selectionIndex && w.endIndex < a.__caretIndex) {
                          q = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                          n = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                          if (w.startIndex > q) {
                            q = w.startIndex;
                          }
                          if (w.endIndex < n) {
                            n = w.endIndex;
                          }
                          r = a.getCharBoundaries(q);
                          if (n >= w.endIndex) {
                            m = a.getCharBoundaries(w.endIndex - 1);
                            if (m != null) {
                              m.x += m.width + 2;
                            }
                          } else {
                            m = a.getCharBoundaries(n);
                          }
                          if (r != null && m != null) {
                            aa.context.fillStyle = "#000000";
                            aa.context.fillRect(r.x + h - e.x, r.y + d, m.x - r.x, w.height);
                            aa.context.fillStyle = "#FFFFFF";
                            aa.context.fillText(g.substring(q, n), h + r.x - e.x, w.offsetY + w.ascent + d);
                          }
                        }
                      }
                      if (w.format.underline) {
                        aa.context.beginPath();
                        aa.context.strokeStyle = p;
                        aa.context.lineWidth = 1;
                        p = w.offsetX + h - e.x;
                        q = Math.ceil(w.offsetY + d + w.ascent - e.y) + Math.floor(w.ascent * 0.185) + 0.5;
                        aa.context.moveTo(p, q);
                        aa.context.lineTo(p + w.width, q);
                        aa.context.stroke();
                        aa.context.closePath();
                      }
                    }
                  }
                } else {
                  if (c.border || c.background) {
                    if (c.border) {
                      aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                    } else {
                      aa.context.rect(0, 0, e.width, e.height);
                    }
                    if (c.background) {
                      m = v.hex(c.backgroundColor & 16777215, 6);
                      aa.context.fillStyle = "#" + m;
                      aa.context.fill();
                    }
                    if (c.border) {
                      aa.context.lineWidth = 1;
                      aa.context.lineCap = "square";
                      m = v.hex(c.borderColor & 16777215, 6);
                      aa.context.strokeStyle = "#" + m;
                      aa.context.stroke();
                    }
                  }
                  if (a.__caretIndex > -1 && c.selectable && a.__showCursor) {
                    h = -a.get_scrollH() + (d ? 0 : k);
                    n = d = 0;
                    for (m = a.get_scrollV() - 1; n < m;) {
                      r = n++;
                      d += c.lineHeights.get(r);
                    }
                    aa.context.beginPath();
                    m = v.hex(a.get_defaultTextFormat().color & 16777215, 6);
                    aa.context.strokeStyle = "#" + m;
                    aa.context.moveTo(h + 2.5, d + 2.5);
                    aa.context.lineWidth = 1;
                    aa.context.lineTo(h + 2.5, d + ic.getFormatHeight(a.get_defaultTextFormat()) - 1);
                    aa.context.stroke();
                    aa.context.closePath();
                  }
                }
                f.__bitmap = N.fromCanvas(a.__graphics.__canvas);
                f.__bitmapScale = l;
                f.__visible = true;
                a.__dirty = false;
                f.__softwareDirty = false;
                f.set___dirty(false);
              }
            }
            d = false;
            if (a.__textEngine.antiAliasType == 0 && a.__textEngine.gridFitType == 1 && (d = b.context.imageSmoothingEnabled)) {
              b.context.imageSmoothingEnabled = false;
            }
            if ((a.opaqueBackground != null || a.__graphics != null) && a.__renderable && (e = b.__getAlpha(a.__worldAlpha), !(e <= 0) && (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0 && (b.__setBlendMode(a.__worldBlendMode), b.__pushMaskObject(a), c = b.context, b.setTransform(a.__renderTransform, c), p = a.opaqueBackground, c.fillStyle = "rgb(" + (p >>> 16 & 255) + "," + (p >>> 8 & 255) + "," + (p & 255) + ")", c.fillRect(0, 0, a.get_width(), a.get_height()), b.__popMaskObject(a)), a.__graphics != null && a.__renderable && (e = b.__getAlpha(a.__worldAlpha), !(e <= 0) && (f = a.__graphics, f != null && (A.render(f, b), g = f.__width, h = f.__height, k = f.__canvas, k != null && f.__visible && g >= 1 && h >= 1 && (w = f.__worldTransform, c = b.context, l = a.__scrollRect, u = a.__worldScale9Grid, l == null || l.width > 0 && l.height > 0))))))) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              c.globalAlpha = e;
              if (u != null && w.b == 0 && w.c == 0) {
                l = b.__pixelRatio;
                p = ya.__pool.get();
                p.translate(w.tx, w.ty);
                b.setTransform(p, c);
                ya.__pool.release(p);
                e = f.__bounds;
                n = f.__renderTransform.a / f.__bitmapScale;
                var y = f.__renderTransform.d / f.__bitmapScale;
                m = n * w.a;
                r = y * w.d;
                f = Math.max(1, Math.round(u.x * n));
                w = Math.round(u.y * y);
                p = Math.max(1, Math.round((e.get_right() - u.get_right()) * n));
                q = Math.round((e.get_bottom() - u.get_bottom()) * y);
                n = Math.round(u.width * n);
                u = Math.round(u.height * y);
                y = Math.round(f / l);
                var z = Math.round(w / l);
                var Y = Math.round(p / l);
                l = Math.round(q / l);
                m = e.width * m - y - Y;
                e = e.height * r - z - l;
                b.applySmoothing(c, false);
                if (n != 0 && u != 0) {
                  c.drawImage(k, 0, 0, f, w, 0, 0, y, z);
                  c.drawImage(k, f, 0, n, w, y, 0, m, z);
                  c.drawImage(k, f + n, 0, p, w, y + m, 0, Y, z);
                  c.drawImage(k, 0, w, f, u, 0, z, y, e);
                  c.drawImage(k, f, w, n, u, y, z, m, e);
                  c.drawImage(k, f + n, w, p, u, y + m, z, Y, e);
                  c.drawImage(k, 0, w + u, f, q, 0, z + e, y, l);
                  c.drawImage(k, f, w + u, n, q, y, z + e, m, l);
                  c.drawImage(k, f + n, w + u, p, q, y + m, z + e, Y, l);
                } else if (n == 0 && u != 0) {
                  f = y + m + Y;
                  c.drawImage(k, 0, 0, g, w, 0, 0, f, z);
                  c.drawImage(k, 0, w, g, u, 0, z, f, e);
                  c.drawImage(k, 0, w + u, g, q, 0, z + e, f, l);
                } else if (u == 0 && n != 0) {
                  e = z + e + l;
                  c.drawImage(k, 0, 0, f, h, 0, 0, y, e);
                  c.drawImage(k, f, 0, n, h, y, 0, m, e);
                  c.drawImage(k, f + n, 0, p, h, y + m, 0, Y, e);
                }
              } else {
                b.setTransform(w, c);
                c.drawImage(k, 0, 0, g, h);
              }
              b.__popMaskObject(a);
            }
            if (d) {
              b.context.imageSmoothingEnabled = true;
            }
          } else {
            a = a.__cacheBitmap;
            if (a.__renderable) {
              e = b.__getAlpha(a.__worldAlpha);
              if (e > 0 && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
                c = b.context;
                b.__setBlendMode(a.__worldBlendMode);
                b.__pushMaskObject(a, false);
                Wa.convertToCanvas(a.__bitmapData.image);
                c.globalAlpha = e;
                l = a.__scrollRect;
                b.setTransform(a.__renderTransform, c);
                if (!b.__allowSmoothing || !a.smoothing) {
                  c.imageSmoothingEnabled = false;
                }
                if (l == null) {
                  c.drawImage(a.__bitmapData.image.get_src(), 0, 0, a.__bitmapData.image.width, a.__bitmapData.image.height);
                } else {
                  c.drawImage(a.__bitmapData.image.get_src(), l.x, l.y, l.width, l.height, l.x, l.y, l.width, l.height);
                }
                if (!b.__allowSmoothing || !a.smoothing) {
                  c.imageSmoothingEnabled = true;
                }
                b.__popMaskObject(a, false);
              }
            }
          }
        }
      };
      aa.renderDrawableMask = function (a, b) {
        Fh.renderDrawableMask(a, b);
      };
      function zg() {}
      h["openfl.display._internal.CanvasTilemap"] = zg;
      zg.__name__ = "openfl.display._internal.CanvasTilemap";
      zg.renderTileContainer = function (a, b, c, d, e, f, k, g, l, h, p, m) {
        var t = b.context;
        var n = b.__roundPixels;
        var r = ya.__pool.get();
        var q = a.__tiles;
        var J;
        var w = null;
        var u = 0;
        for (a = a.__length; u < a;) {
          var v = u++;
          var y = q[v];
          r.setTo(1, 0, 0, 1, -y.get_originX(), -y.get_originY());
          r.concat(y.get_matrix());
          r.concat(c);
          if (n) {
            r.tx = Math.round(r.tx);
            r.ty = Math.round(r.ty);
          }
          var z = y.get_tileset() ?? d;
          v = y.get_alpha() * k;
          if ((J = y.get_visible()) && !(v <= 0)) {
            if (!f) {
              v = 1;
            }
            if (g) {
              w = y.__blendMode ?? l;
            }
            if (y.__length > 0) {
              zg.renderTileContainer(y, b, r, z, e, f, v, g, w, h, p, m);
            } else if (z != null) {
              J = y.get_id();
              if (J == -1) {
                y = y.__rect;
                if (y == null || y.width <= 0 || y.height <= 0) {
                  continue;
                }
              } else {
                y = z.__data[J];
                if (y == null) {
                  continue;
                }
                m.setTo(y.x, y.y, y.width, y.height);
                y = m;
              }
              z = z.__bitmapData;
              if (z != null && z.image != null) {
                if (z != h) {
                  if (z.image.buffer.__srcImage == null) {
                    Wa.convertToCanvas(z.image);
                  }
                  p = z.image.get_src();
                  h = z;
                }
                t.globalAlpha = v;
                if (g) {
                  b.__setBlendMode(w);
                }
                b.setTransform(r, t);
                t.drawImage(p, y.x, y.y, y.width, y.height, 0, 0, y.width, y.height);
              }
            }
          }
        }
        ya.__pool.release(r);
      };
      zg.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(u = b.__getAlpha(a.__worldAlpha), u <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              v = b.context;
              b.setTransform(a.__renderTransform, v);
              var c = a.opaqueBackground;
              v.fillStyle = "rgb(" + (c >>> 16 & 255) + "," + (c >>> 8 & 255) + "," + (c & 255) + ")";
              v.fillRect(0, 0, a.get_width(), a.get_height());
              b.__popMaskObject(a);
            }
            if (a.__graphics != null && a.__renderable && (u = b.__getAlpha(a.__worldAlpha), !(u <= 0))) {
              var d = a.__graphics;
              if (d != null) {
                A.render(d, b);
                var e = d.__width;
                var f = d.__height;
                c = d.__canvas;
                if (c != null && d.__visible && e >= 1 && f >= 1) {
                  var k = d.__worldTransform;
                  v = b.context;
                  y = a.__scrollRect;
                  var g = a.__worldScale9Grid;
                  if (y == null || y.width > 0 && y.height > 0) {
                    b.__setBlendMode(a.__worldBlendMode);
                    b.__pushMaskObject(a);
                    v.globalAlpha = u;
                    if (g != null && k.b == 0 && k.c == 0) {
                      var l = b.__pixelRatio;
                      u = ya.__pool.get();
                      u.translate(k.tx, k.ty);
                      b.setTransform(u, v);
                      ya.__pool.release(u);
                      u = d.__bounds;
                      var h = d.__renderTransform.a / d.__bitmapScale;
                      var p = d.__renderTransform.d / d.__bitmapScale;
                      var m = h * k.a;
                      var n = p * k.d;
                      k = Math.max(1, Math.round(g.x * h));
                      d = Math.round(g.y * p);
                      y = Math.max(1, Math.round((u.get_right() - g.get_right()) * h));
                      var r = Math.round((u.get_bottom() - g.get_bottom()) * p);
                      h = Math.round(g.width * h);
                      g = Math.round(g.height * p);
                      p = Math.round(k / l);
                      var q = Math.round(d / l);
                      var w = Math.round(y / l);
                      l = Math.round(r / l);
                      m = u.width * m - p - w;
                      u = u.height * n - q - l;
                      b.applySmoothing(v, false);
                      if (h != 0 && g != 0) {
                        v.drawImage(c, 0, 0, k, d, 0, 0, p, q);
                        v.drawImage(c, k, 0, h, d, p, 0, m, q);
                        v.drawImage(c, k + h, 0, y, d, p + m, 0, w, q);
                        v.drawImage(c, 0, d, k, g, 0, q, p, u);
                        v.drawImage(c, k, d, h, g, p, q, m, u);
                        v.drawImage(c, k + h, d, y, g, p + m, q, w, u);
                        v.drawImage(c, 0, d + g, k, r, 0, q + u, p, l);
                        v.drawImage(c, k, d + g, h, r, p, q + u, m, l);
                        v.drawImage(c, k + h, d + g, y, r, p + m, q + u, w, l);
                      } else if (h == 0 && g != 0) {
                        f = p + m + w;
                        v.drawImage(c, 0, 0, e, d, 0, 0, f, q);
                        v.drawImage(c, 0, d, e, g, 0, q, f, u);
                        v.drawImage(c, 0, d + g, e, r, 0, q + u, f, l);
                      } else if (g == 0 && h != 0) {
                        e = q + u + l;
                        v.drawImage(c, 0, 0, k, f, 0, 0, p, e);
                        v.drawImage(c, k, 0, h, f, p, 0, m, e);
                        v.drawImage(c, k + h, 0, y, f, p + m, 0, w, e);
                      }
                    } else {
                      b.setTransform(k, v);
                      v.drawImage(c, 0, 0, e, f);
                    }
                    b.__popMaskObject(a);
                  }
                }
              }
            }
          }
          if (a.__renderable && a.__group.__tiles.length != 0) {
            u = b.__getAlpha(a.__worldAlpha);
            if (!(u <= 0)) {
              v = b.context;
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              c = ba.__pool.get();
              c.setTo(0, 0, a.__width, a.__height);
              b.__pushMaskRect(c, a.__renderTransform);
              if (!b.__allowSmoothing || !a.smoothing) {
                v.imageSmoothingEnabled = false;
              }
              zg.renderTileContainer(a.__group, b, a.__renderTransform, a.__tileset, b.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, u, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, c);
              if (!b.__allowSmoothing || !a.smoothing) {
                v.imageSmoothingEnabled = true;
              }
              b.__popMaskRect();
              b.__popMaskObject(a);
              ba.__pool.release(c);
            }
          }
        } else {
          c = a.__cacheBitmap;
          if (c.__renderable) {
            var u = b.__getAlpha(c.__worldAlpha);
            if (u > 0 && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
              var v = b.context;
              b.__setBlendMode(c.__worldBlendMode);
              b.__pushMaskObject(c, false);
              Wa.convertToCanvas(c.__bitmapData.image);
              v.globalAlpha = u;
              var y = c.__scrollRect;
              b.setTransform(c.__renderTransform, v);
              if (!b.__allowSmoothing || !c.smoothing) {
                v.imageSmoothingEnabled = false;
              }
              if (y == null) {
                v.drawImage(c.__bitmapData.image.get_src(), 0, 0, c.__bitmapData.image.width, c.__bitmapData.image.height);
              } else {
                v.drawImage(c.__bitmapData.image.get_src(), y.x, y.y, y.width, y.height, y.x, y.y, y.width, y.height);
              }
              if (!b.__allowSmoothing || !c.smoothing) {
                v.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(c, false);
            }
          }
        }
        b.__renderEvent(a);
      };
      zg.renderDrawableMask = function (a, b) {};
      function Gh() {}
      h["openfl.display._internal.CanvasVideo"] = Gh;
      Gh.__name__ = "openfl.display._internal.CanvasVideo";
      Gh.render = function (a, b) {
        if (a.__renderable && a.__stream != null) {
          var c = b.__getAlpha(a.__worldAlpha);
          if (!(c <= 0)) {
            var d = b.context;
            if (a.__stream.__video != null) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              d.globalAlpha = c;
              c = a.__scrollRect;
              var e = a.smoothing;
              b.setTransform(a.__worldTransform, d);
              if (!e) {
                d.imageSmoothingEnabled = false;
              }
              if (c == null) {
                d.drawImage(a.__stream.__video, 0, 0, a.get_width(), a.get_height());
              } else {
                d.drawImage(a.__stream.__video, c.x, c.y, c.width, c.height, c.x, c.y, c.width, c.height);
              }
              if (!e) {
                d.imageSmoothingEnabled = true;
              }
              b.__popMaskObject(a);
            }
          }
        }
      };
      Gh.renderDrawable = function (a, b) {
        Gh.render(a, b);
        b.__renderEvent(a);
      };
      Gh.renderDrawableMask = function (a, b) {};
      function Re() {}
      h["openfl.display._internal.Context3DBitmap"] = Re;
      Re.__name__ = "openfl.display._internal.Context3DBitmap";
      Re.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && a.__bitmapData != null && a.__bitmapData.__isValid) {
          var c = b.__context3D;
          b.__setBlendMode(a.__worldBlendMode);
          b.__pushMaskObject(a);
          var d = b.__initDisplayShader(a.__worldShader);
          b.setShader(d);
          b.applyBitmapData(a.__bitmapData, b.__allowSmoothing && (a.smoothing || b.__upscaled));
          b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
          b.applyAlpha(a.__worldAlpha);
          b.applyColorTransform(a.__worldColorTransform);
          b.updateShader();
          var e = a.__bitmapData.getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          d = a.__bitmapData.getIndexBuffer(c);
          c.drawTriangles(d);
          b.__clearShader();
          b.__popMaskObject(a);
        }
      };
      Re.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__bitmapData != null && a.__bitmapData.image != null) {
          a.__imageVersion = a.__bitmapData.image.version;
        }
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = ba.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              ba.__pool.release(d);
            }
            if (a.__graphics != null) {
              ag.render(a, b);
            }
          }
          Re.render(a, b);
        } else {
          Re.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      Re.renderDrawableMask = function (a, b) {
        Re.renderMask(a, b);
      };
      Re.renderMask = function (a, b) {
        if (a.__bitmapData != null && a.__bitmapData.__isValid) {
          var c = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(Ih.opaqueBitmapData, true);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, a.pixelSnapping));
          b.updateShader();
          var e = a.__bitmapData.getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          a = a.__bitmapData.getIndexBuffer(c);
          c.drawTriangles(a);
          b.__clearShader();
        }
      };
      function xm() {}
      h["openfl.display._internal.Context3DBitmapData"] = xm;
      xm.__name__ = "openfl.display._internal.Context3DBitmapData";
      xm.renderDrawable = function (a, b) {
        var c = b.__context3D;
        b.__setBlendMode(10);
        var d = b.__defaultDisplayShader;
        b.setShader(d);
        b.applyBitmapData(a, b.__upscaled);
        b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
        b.applyAlpha(a.__worldAlpha);
        b.applyColorTransform(a.__worldColorTransform);
        b.updateShader();
        var e = a.getVertexBuffer(c);
        if (d.__position != null) {
          c.setVertexBufferAt(d.__position.index, e, 0, 3);
        }
        if (d.__textureCoord != null) {
          c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
        }
        a = a.getIndexBuffer(c);
        c.drawTriangles(a);
        b.__clearShader();
      };
      xm.renderDrawableMask = function (a, b) {
        var c = b.__context3D;
        var d = b.__maskShader;
        b.setShader(d);
        b.applyBitmapData(a, b.__upscaled);
        b.applyMatrix(b.__getMatrix(a.__worldTransform, 1));
        b.updateShader();
        var e = a.getVertexBuffer(c);
        if (d.__position != null) {
          c.setVertexBufferAt(d.__position.index, e, 0, 3);
        }
        if (d.__textureCoord != null) {
          c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
        }
        a = a.getIndexBuffer(c);
        c.drawTriangles(a);
        b.__clearShader();
      };
      function Vj(a, b, c, d) {
        this.context3D = a;
        this.elementType = b;
        this.dataPerVertex = d;
        this.vertexCount = this.indexCount = 0;
        this.resize(c);
      }
      h["openfl.display._internal.Context3DBuffer"] = Vj;
      Vj.__name__ = "openfl.display._internal.Context3DBuffer";
      Vj.prototype = {
        flushVertexBufferData: function () {
          if (this.vertexBufferData.length > this.vertexCount) {
            this.vertexCount = this.vertexBufferData.length;
            this.vertexBuffer = this.context3D.createVertexBuffer(this.vertexCount, this.dataPerVertex, 0);
          }
          this.vertexBuffer.uploadFromTypedArray(fj.toArrayBufferView(this.vertexBufferData));
        },
        resize: function (a, b) {
          if (b == null) {
            b = -1;
          }
          this.elementCount = a;
          if (b == -1) {
            b = this.dataPerVertex;
          }
          if (b != this.dataPerVertex) {
            this.vertexBuffer = null;
            this.vertexCount = 0;
            this.dataPerVertex = b;
          }
          var c = 0;
          switch (this.elementType._hx_index) {
            case 0:
              c = a * 4;
              break;
            case 1:
              c = a * 3;
              break;
            case 2:
              c = a * 3;
          }
          b *= c;
          if (this.vertexBufferData == null) {
            var d = c = null;
            var e = null;
            var f = null;
            var k = null;
            this.vertexBufferData = b = b != null ? new Float32Array(b) : c != null ? new Float32Array(c) : d != null ? new Float32Array(d.__array) : e != null ? new Float32Array(e) : f != null ? k == null ? new Float32Array(f, 0) : new Float32Array(f, 0, k) : null;
          } else if (b > this.vertexBufferData.length) {
            a = this.vertexBufferData;
            k = f = e = d = c = null;
            this.vertexBufferData = b = b != null ? new Float32Array(b) : c != null ? new Float32Array(c) : d != null ? new Float32Array(d.__array) : e != null ? new Float32Array(e) : f != null ? k == null ? new Float32Array(f, 0) : new Float32Array(f, 0, k) : null;
            this.vertexBufferData.set(a);
          }
        },
        __class__: Vj
      };
      var Dm = w["openfl.display._internal.Context3DElementType"] = {
        __ename__: "openfl.display._internal.Context3DElementType",
        __constructs__: null,
        QUADS: {
          _hx_name: "QUADS",
          _hx_index: 0,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        },
        TRIANGLES: {
          _hx_name: "TRIANGLES",
          _hx_index: 1,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        },
        TRIANGLE_INDICES: {
          _hx_name: "TRIANGLE_INDICES",
          _hx_index: 2,
          __enum__: "openfl.display._internal.Context3DElementType",
          toString: p
        }
      };
      Dm.__constructs__ = [Dm.QUADS, Dm.TRIANGLES, Dm.TRIANGLE_INDICES];
      function Jh() {}
      h["openfl.display._internal.Context3DDisplayObject"] = Jh;
      Jh.__name__ = "openfl.display._internal.Context3DDisplayObject";
      Jh.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap != null && !a.__isCacheBitmapRender) {
          Re.render(a.__cacheBitmap, b);
        } else if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            var c = b.__context3D;
            var d = ba.__pool.get();
            d.setTo(0, 0, a.get_width(), a.get_height());
            b.__pushMaskRect(d, a.__renderTransform);
            var e = a.opaqueBackground;
            c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
            b.__popMaskRect();
            b.__popMaskObject(a);
            ba.__pool.release(d);
          }
          if (a.__graphics != null) {
            ag.render(a, b);
          }
        }
        b.__renderEvent(a);
      };
      Jh.renderDrawableMask = function (a, b) {
        if (a.__graphics != null) {
          ag.renderMask(a, b);
        }
      };
      function ym() {}
      h["openfl.display._internal.Context3DDisplayObjectContainer"] = ym;
      ym.__name__ = "openfl.display._internal.Context3DDisplayObjectContainer";
      ym.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__renderable && !(a.__worldAlpha <= 0) && (Jh.renderDrawable(a, b), a.__cacheBitmap == null || a.__isCacheBitmapRender)) {
          if (a.__children.length > 0) {
            b.__pushMaskObject(a);
            if (b.__stage != null) {
              c = 0;
              for (d = a.__children; c < d.length;) {
                var e = d[c];
                ++c;
                b.__renderDrawable(e);
                e.__renderDirty = false;
              }
              a.__renderDirty = false;
            } else {
              c = 0;
              d = a.__children;
              while (c < d.length) {
                e = d[c];
                ++c;
                b.__renderDrawable(e);
              }
            }
          }
          if (a.__children.length > 0) {
            b.__popMaskObject(a);
          }
        }
      };
      ym.renderDrawableMask = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        if (a.__graphics != null) {
          ag.renderMask(a, b);
        }
        c = 0;
        for (a = a.__children; c < a.length;) {
          d = a[c];
          ++c;
          b.__renderDrawableMask(d);
        }
      };
      function rc() {}
      h["openfl.display._internal.Context3DGraphics"] = rc;
      rc.__name__ = "openfl.display._internal.Context3DGraphics";
      rc.buildBuffer = function (a, b) {
        var c;
        var d = c = 0;
        var e = 0;
        var f = new $f(a.__commands);
        b = b.__context3D;
        var k = ba.__pool.get();
        var g = ya.__pool.get();
        var l = null;
        for (var h = 0, p = a.__commands.types; h < p.length;) {
          var m = p[h];
          ++h;
          switch (m._hx_index) {
            case 0:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = pa.BEGIN_BITMAP_FILL;
              l = f;
              l = l.buffer.o[l.oPos];
              break;
            case 1:
              l = null;
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = m;
              break;
            case 3:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = pa.BEGIN_SHADER_FILL;
              l = f;
              m = l.buffer.o[l.oPos];
              l = null;
              if (m != null) {
                for (var n = 0, r = m.inputCount; n < r;) {
                  var q = n++;
                  if (m.inputRefs[q].name == "bitmap") {
                    l = m.inputs[q];
                    break;
                  }
                }
              }
              break;
            case 8:
              if (l != null) {
                switch (f.prev._hx_index) {
                  case 0:
                    f.oPos += 2;
                    f.bPos += 2;
                    break;
                  case 1:
                    f.iPos += 1;
                    f.fPos += 1;
                    break;
                  case 2:
                    f.oPos += 4;
                    f.iiPos += 2;
                    f.ffPos += 1;
                    f.fPos += 1;
                    break;
                  case 3:
                    f.oPos += 1;
                    break;
                  case 4:
                    f.fPos += 6;
                    break;
                  case 5:
                    f.fPos += 4;
                    break;
                  case 6:
                    f.fPos += 3;
                    break;
                  case 7:
                    f.fPos += 4;
                    break;
                  case 8:
                    f.oPos += 3;
                    break;
                  case 9:
                    f.fPos += 4;
                    break;
                  case 10:
                    f.fPos += 5;
                    f.oPos += 1;
                    break;
                  case 12:
                    f.oPos += 4;
                    break;
                  case 14:
                    f.oPos += 2;
                    f.bPos += 2;
                    break;
                  case 15:
                    f.oPos += 4;
                    f.iiPos += 2;
                    f.ffPos += 1;
                    f.fPos += 1;
                    break;
                  case 16:
                    f.oPos += 4;
                    f.iPos += 1;
                    f.fPos += 2;
                    f.bPos += 1;
                    break;
                  case 17:
                    f.fPos += 2;
                    break;
                  case 18:
                    f.fPos += 2;
                    break;
                  case 19:
                    f.oPos += 1;
                    break;
                  case 20:
                    f.oPos += 1;
                }
                f.prev = pa.DRAW_QUADS;
                r = f;
                m = r.buffer.o[r.oPos];
                n = r.buffer.o[r.oPos + 1];
                r = r.buffer.o[r.oPos + 2];
                q = n != null;
                var w = false;
                var u = false;
                var v = q ? n.get_length() : Math.floor(m.get_length() / 4);
                if (v == 0) {
                  return;
                }
                if (r != null) {
                  if (r.get_length() >= v * 6) {
                    u = w = true;
                  } else if (r.get_length() >= v * 4) {
                    w = true;
                  } else if (r.get_length() >= v * 2) {
                    u = true;
                  }
                }
                if (a.__quadBuffer == null) {
                  a.__quadBuffer = new Vj(b, Dm.QUADS, v, 4);
                } else {
                  a.__quadBuffer.resize(c + v, 4);
                }
                var y;
                var z;
                var A;
                var Y;
                var C;
                var D;
                var La;
                var E;
                var B;
                var x;
                var G;
                var I;
                var ha;
                var Ea;
                var S = a.__quadBuffer.vertexBufferData;
                var ma = l.width;
                var K = l.height;
                for (var la = 0, ka = v; la < ka;) {
                  Y = la++;
                  y = (c + Y) * 16;
                  z = q ? n.get(Y) * 4 : Y * 4;
                  if (!(z < 0)) {
                    k.setTo(m.get(z), m.get(z + 1), m.get(z + 2), m.get(z + 3));
                    z = k.width;
                    A = k.height;
                    if (!(z <= 0) && !(A <= 0)) {
                      if (w && u) {
                        Y *= 6;
                        g.setTo(r.get(Y), r.get(Y + 1), r.get(Y + 2), r.get(Y + 3), r.get(Y + 4), r.get(Y + 5));
                      } else if (w) {
                        Y *= 4;
                        g.setTo(r.get(Y), r.get(Y + 1), r.get(Y + 2), r.get(Y + 3), k.x, k.y);
                      } else if (u) {
                        Y *= 2;
                        g.tx = r.get(Y);
                        g.ty = r.get(Y + 1);
                      } else {
                        g.tx = k.x;
                        g.ty = k.y;
                      }
                      Y = k.x / ma;
                      C = k.y / K;
                      D = k.get_right() / ma;
                      La = k.get_bottom() / K;
                      E = g.a * 0 + g.c * 0 + g.tx;
                      B = g.b * 0 + g.d * 0 + g.ty;
                      x = z * g.a + g.c * 0 + g.tx;
                      G = z * g.b + g.d * 0 + g.ty;
                      I = g.a * 0 + A * g.c + g.tx;
                      ha = g.b * 0 + A * g.d + g.ty;
                      Ea = z * g.a + A * g.c + g.tx;
                      z = z * g.b + A * g.d + g.ty;
                      S[y] = E;
                      S[y + 1] = B;
                      S[y + 2] = Y;
                      S[y + 3] = C;
                      S[y + 4] = x;
                      S[y + 4 + 1] = G;
                      S[y + 4 + 2] = D;
                      S[y + 4 + 3] = C;
                      S[y + 8] = I;
                      S[y + 8 + 1] = ha;
                      S[y + 8 + 2] = Y;
                      S[y + 8 + 3] = La;
                      S[y + 12] = Ea;
                      S[y + 12 + 1] = z;
                      S[y + 12 + 2] = D;
                      S[y + 12 + 3] = La;
                    }
                  }
                }
                c += v;
              }
              break;
            case 12:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = pa.DRAW_TRIANGLES;
              r = f;
              m = r.buffer.o[r.oPos];
              n = r.buffer.o[r.oPos + 1];
              r = r.buffer.o[r.oPos + 2];
              q = n != null;
              v = Math.floor(m.get_length() / 2);
              w = q ? n.get_length() : v;
              y = (v = (u = r != null) && r.get_length() >= v * 3) ? 4 : 2;
              S = v ? 3 : 2;
              ma = y + 2;
              K = v ? e : d;
              rc.resizeVertexBuffer(a, v, K + w * ma);
              la = v ? a.__vertexBufferDataUVT : a.__vertexBufferData;
              A = 0;
              for (Y = w; A < Y;) {
                C = A++;
                ka = K + C * ma;
                z = q ? n.get(C) * 2 : C * 2;
                C = q ? n.get(C) * S : C * S;
                if (v) {
                  D = r.get(C + 2);
                  la[ka] = m.get(z) / D;
                  la[ka + 1] = m.get(z + 1) / D;
                  la[ka + 2] = 0;
                  la[ka + 3] = 1 / D;
                } else {
                  la[ka] = m.get(z);
                  la[ka + 1] = m.get(z + 1);
                }
                la[ka + y] = u ? r.get(C) : 0;
                la[ka + y + 1] = u ? r.get(C + 1) : 0;
              }
              if (v) {
                e += w * ma;
              } else {
                d += w * ma;
              }
              break;
            case 13:
              l = null;
              break;
            default:
              switch (f.prev._hx_index) {
                case 0:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 1:
                  f.iPos += 1;
                  f.fPos += 1;
                  break;
                case 2:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 3:
                  f.oPos += 1;
                  break;
                case 4:
                  f.fPos += 6;
                  break;
                case 5:
                  f.fPos += 4;
                  break;
                case 6:
                  f.fPos += 3;
                  break;
                case 7:
                  f.fPos += 4;
                  break;
                case 8:
                  f.oPos += 3;
                  break;
                case 9:
                  f.fPos += 4;
                  break;
                case 10:
                  f.fPos += 5;
                  f.oPos += 1;
                  break;
                case 12:
                  f.oPos += 4;
                  break;
                case 14:
                  f.oPos += 2;
                  f.bPos += 2;
                  break;
                case 15:
                  f.oPos += 4;
                  f.iiPos += 2;
                  f.ffPos += 1;
                  f.fPos += 1;
                  break;
                case 16:
                  f.oPos += 4;
                  f.iPos += 1;
                  f.fPos += 2;
                  f.bPos += 1;
                  break;
                case 17:
                  f.fPos += 2;
                  break;
                case 18:
                  f.fPos += 2;
                  break;
                case 19:
                  f.oPos += 1;
                  break;
                case 20:
                  f.oPos += 1;
              }
              f.prev = m;
          }
        }
        if (c > 0) {
          a.__quadBuffer.flushVertexBufferData();
        }
        if (d > 0) {
          c = a.__vertexBuffer;
          if (c == null || d > a.__vertexBufferCount) {
            c = b.createVertexBuffer(d, 4, 0);
            a.__vertexBuffer = c;
            a.__vertexBufferCount = d;
          }
          c.uploadFromTypedArray(fj.toArrayBufferView(a.__vertexBufferData));
        }
        if (e > 0) {
          c = a.__vertexBufferUVT;
          if (c == null || e > a.__vertexBufferCountUVT) {
            c = b.createVertexBuffer(e, 6, 0);
            a.__vertexBufferUVT = c;
            a.__vertexBufferCountUVT = e;
          }
          c.uploadFromTypedArray(fj.toArrayBufferView(a.__vertexBufferDataUVT));
        }
        ba.__pool.release(k);
        ya.__pool.release(g);
      };
      rc.isCompatible = function (a) {
        if (a.__owner.__worldScale9Grid != null) {
          return false;
        }
        var b = new $f(a.__commands);
        var c = false;
        var d = false;
        var e = false;
        var f = 0;
        for (a = a.__commands.types; f < a.length;) {
          var k = a[f];
          ++f;
          switch (k._hx_index) {
            case 0:
              d = true;
              e = c = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 1:
              d = false;
              c = true;
              e = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 3:
              c = d = false;
              e = true;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 8:
              if (d || e) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 9:
              if (c) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 12:
              if (d || e) {
                switch (b.prev._hx_index) {
                  case 0:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 1:
                    b.iPos += 1;
                    b.fPos += 1;
                    break;
                  case 2:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 3:
                    b.oPos += 1;
                    break;
                  case 4:
                    b.fPos += 6;
                    break;
                  case 5:
                    b.fPos += 4;
                    break;
                  case 6:
                    b.fPos += 3;
                    break;
                  case 7:
                    b.fPos += 4;
                    break;
                  case 8:
                    b.oPos += 3;
                    break;
                  case 9:
                    b.fPos += 4;
                    break;
                  case 10:
                    b.fPos += 5;
                    b.oPos += 1;
                    break;
                  case 12:
                    b.oPos += 4;
                    break;
                  case 14:
                    b.oPos += 2;
                    b.bPos += 2;
                    break;
                  case 15:
                    b.oPos += 4;
                    b.iiPos += 2;
                    b.ffPos += 1;
                    b.fPos += 1;
                    break;
                  case 16:
                    b.oPos += 4;
                    b.iPos += 1;
                    b.fPos += 2;
                    b.bPos += 1;
                    break;
                  case 17:
                    b.fPos += 2;
                    break;
                  case 18:
                    b.fPos += 2;
                    break;
                  case 19:
                    b.oPos += 1;
                    break;
                  case 20:
                    b.oPos += 1;
                }
                b.prev = k;
              } else {
                b.destroy();
                return false;
              }
              break;
            case 13:
              e = c = d = false;
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 18:
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            case 19:
              switch (b.prev._hx_index) {
                case 0:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 1:
                  b.iPos += 1;
                  b.fPos += 1;
                  break;
                case 2:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 3:
                  b.oPos += 1;
                  break;
                case 4:
                  b.fPos += 6;
                  break;
                case 5:
                  b.fPos += 4;
                  break;
                case 6:
                  b.fPos += 3;
                  break;
                case 7:
                  b.fPos += 4;
                  break;
                case 8:
                  b.oPos += 3;
                  break;
                case 9:
                  b.fPos += 4;
                  break;
                case 10:
                  b.fPos += 5;
                  b.oPos += 1;
                  break;
                case 12:
                  b.oPos += 4;
                  break;
                case 14:
                  b.oPos += 2;
                  b.bPos += 2;
                  break;
                case 15:
                  b.oPos += 4;
                  b.iiPos += 2;
                  b.ffPos += 1;
                  b.fPos += 1;
                  break;
                case 16:
                  b.oPos += 4;
                  b.iPos += 1;
                  b.fPos += 2;
                  b.bPos += 1;
                  break;
                case 17:
                  b.fPos += 2;
                  break;
                case 18:
                  b.fPos += 2;
                  break;
                case 19:
                  b.oPos += 1;
                  break;
                case 20:
                  b.oPos += 1;
              }
              b.prev = k;
              break;
            default:
              b.destroy();
              return false;
          }
        }
        b.destroy();
        return true;
      };
      rc.render = function (a, b) {
        if (a.__visible && a.__commands.get_length() != 0) {
          if (a.__bitmap != null && !a.__dirty || !rc.isCompatible(a)) {
            b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
            var c = b.__softwareRenderer.__worldTransform;
            b.__softwareRenderer.__worldTransform = a.__owner.__drawableType == 7 ? ya.__identity : b.__worldTransform;
            A.render(a, b.__softwareRenderer);
            b.__softwareRenderer.__worldTransform = c;
          } else {
            a.__bitmap = null;
            a.__update(b.__worldTransform, b.__pixelRatio);
            var d = a.__width;
            var e = a.__height;
            if (a.__bounds != null && d >= 1 && e >= 1) {
              if (a.__hardwareDirty || a.__quadBuffer == null && a.__vertexBuffer == null && a.__vertexBufferUVT == null) {
                rc.buildBuffer(a, b);
              }
              c = new $f(a.__commands);
              var f = b.__context3D;
              var k = ya.__pool.get();
              var g = null;
              var l = null;
              var h = false;
              var p = false;
              var m = null;
              var n = 0;
              var r = 0;
              var q = 0;
              var w = 0;
              for (var u = 0, v = a.__commands.types; u < v.length;) {
                d = v[u];
                ++u;
                switch (d._hx_index) {
                  case 0:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.BEGIN_BITMAP_FILL;
                    p = c;
                    l = p.buffer.o[p.oPos];
                    h = p.buffer.b[p.bPos];
                    p = p.buffer.b[p.bPos + 1];
                    m = g = null;
                    break;
                  case 1:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.BEGIN_FILL;
                    l = c;
                    m = (l.buffer.i[l.iPos] | 0) & 16777215 | (l.buffer.f[l.fPos] * 255 | 0) << 24;
                    l = g = null;
                    break;
                  case 3:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.BEGIN_SHADER_FILL;
                    r = c;
                    g = r.buffer.o[r.oPos];
                    r = 0;
                    l = g == null || g.shader == null || g.shader.__bitmap == null ? null : g.shader.__bitmap.input;
                    m = null;
                    break;
                  case 8:
                    if (l != null) {
                      switch (c.prev._hx_index) {
                        case 0:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 1:
                          c.iPos += 1;
                          c.fPos += 1;
                          break;
                        case 2:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 3:
                          c.oPos += 1;
                          break;
                        case 4:
                          c.fPos += 6;
                          break;
                        case 5:
                          c.fPos += 4;
                          break;
                        case 6:
                          c.fPos += 3;
                          break;
                        case 7:
                          c.fPos += 4;
                          break;
                        case 8:
                          c.oPos += 3;
                          break;
                        case 9:
                          c.fPos += 4;
                          break;
                        case 10:
                          c.fPos += 5;
                          c.oPos += 1;
                          break;
                        case 12:
                          c.oPos += 4;
                          break;
                        case 14:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 15:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 16:
                          c.oPos += 4;
                          c.iPos += 1;
                          c.fPos += 2;
                          c.bPos += 1;
                          break;
                        case 17:
                          c.fPos += 2;
                          break;
                        case 18:
                          c.fPos += 2;
                          break;
                        case 19:
                          c.oPos += 1;
                          break;
                        case 20:
                          c.oPos += 1;
                      }
                      c.prev = pa.DRAW_QUADS;
                      var y = c;
                      d = y.buffer.o[y.oPos];
                      y = y.buffer.o[y.oPos + 1];
                      d = y != null ? y.get_length() : Math.floor(d.get_length() / 4);
                      var z = b.__getMatrix(a.__owner.__renderTransform, 1);
                      if (g == null || rc.maskRender) {
                        y = rc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                        b.setShader(y);
                        b.applyMatrix(z);
                        b.applyBitmapData(l, p, h);
                        b.applyAlpha(a.__owner.__worldAlpha);
                        b.applyColorTransform(a.__owner.__worldColorTransform);
                        b.updateShader();
                      } else {
                        y = b.__initShaderBuffer(g);
                        b.__setShaderBuffer(g);
                        b.applyMatrix(z);
                        b.applyBitmapData(l, false, h);
                        b.applyAlpha(a.__owner.__worldAlpha);
                        b.applyColorTransform(a.__owner.__worldColorTransform);
                      }
                      for (z = n + d; n < z;) {
                        d = Math.min(z - n, f.__quadIndexBufferElements) | 0;
                        if (d <= 0) {
                          break;
                        }
                        if (g != null && !rc.maskRender) {
                          b.__updateShaderBuffer(r);
                        }
                        if (y.__position != null) {
                          f.setVertexBufferAt(y.__position.index, a.__quadBuffer.vertexBuffer, n * 16, 2);
                        }
                        if (y.__textureCoord != null) {
                          f.setVertexBufferAt(y.__textureCoord.index, a.__quadBuffer.vertexBuffer, n * 16 + 2, 2);
                        }
                        f.drawTriangles(f.__quadIndexBuffer, 0, d * 2);
                        r += d * 4;
                        n += d;
                      }
                      b.__clearShader();
                    }
                    break;
                  case 9:
                    if (m != null) {
                      switch (c.prev._hx_index) {
                        case 0:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 1:
                          c.iPos += 1;
                          c.fPos += 1;
                          break;
                        case 2:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 3:
                          c.oPos += 1;
                          break;
                        case 4:
                          c.fPos += 6;
                          break;
                        case 5:
                          c.fPos += 4;
                          break;
                        case 6:
                          c.fPos += 3;
                          break;
                        case 7:
                          c.fPos += 4;
                          break;
                        case 8:
                          c.oPos += 3;
                          break;
                        case 9:
                          c.fPos += 4;
                          break;
                        case 10:
                          c.fPos += 5;
                          c.oPos += 1;
                          break;
                        case 12:
                          c.oPos += 4;
                          break;
                        case 14:
                          c.oPos += 2;
                          c.bPos += 2;
                          break;
                        case 15:
                          c.oPos += 4;
                          c.iiPos += 2;
                          c.ffPos += 1;
                          c.fPos += 1;
                          break;
                        case 16:
                          c.oPos += 4;
                          c.iPos += 1;
                          c.fPos += 2;
                          c.bPos += 1;
                          break;
                        case 17:
                          c.fPos += 2;
                          break;
                        case 18:
                          c.fPos += 2;
                          break;
                        case 19:
                          c.oPos += 1;
                          break;
                        case 20:
                          c.oPos += 1;
                      }
                      c.prev = pa.DRAW_RECT;
                      var Y = c;
                      y = Y.buffer.f[Y.fPos];
                      z = Y.buffer.f[Y.fPos + 1];
                      d = Y.buffer.f[Y.fPos + 2];
                      e = Y.buffer.f[Y.fPos + 3];
                      Y = m;
                      rc.tempColorTransform.redOffset = Y >>> 16 & 255;
                      rc.tempColorTransform.greenOffset = Y >>> 8 & 255;
                      rc.tempColorTransform.blueOffset = Y & 255;
                      rc.tempColorTransform.__combine(a.__owner.__worldColorTransform);
                      k.identity();
                      k.scale(d, e);
                      k.tx = y;
                      k.ty = z;
                      k.concat(a.__owner.__renderTransform);
                      d = rc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                      b.setShader(d);
                      b.applyMatrix(b.__getMatrix(k, 1));
                      b.applyBitmapData(rc.blankBitmapData, true, h);
                      b.applyAlpha((Y >>> 24 & 255) / 255 * a.__owner.__worldAlpha);
                      b.applyColorTransform(rc.tempColorTransform);
                      b.updateShader();
                      y = rc.blankBitmapData.getVertexBuffer(f);
                      if (d.__position != null) {
                        f.setVertexBufferAt(d.__position.index, y, 0, 3);
                      }
                      if (d.__textureCoord != null) {
                        f.setVertexBufferAt(d.__textureCoord.index, y, 3, 2);
                      }
                      d = rc.blankBitmapData.getIndexBuffer(f);
                      f.drawTriangles(d);
                      r += 4;
                      b.__clearShader();
                    }
                    break;
                  case 12:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.DRAW_TRIANGLES;
                    e = c;
                    y = e.buffer.o[e.oPos + 1];
                    z = e.buffer.o[e.oPos + 2];
                    d = e.buffer.o[e.oPos + 3];
                    Y = y != null;
                    e = Math.floor(e.buffer.o[e.oPos].get_length() / 2);
                    y = Y ? y.get_length() : e;
                    Y = (z = z != null && z.get_length() >= e * 3) ? 4 : 2;
                    e = Y + 2;
                    var C = z ? a.__vertexBufferUVT : a.__vertexBuffer;
                    var D = z ? w : q;
                    var La = b.__getMatrix(a.__owner.__renderTransform, 1);
                    if (g == null || rc.maskRender) {
                      var E = rc.maskRender ? b.__maskShader : b.__initGraphicsShader(null);
                      b.setShader(E);
                      b.applyMatrix(La);
                      b.applyBitmapData(l, p, h);
                      b.applyAlpha(a.__owner.__worldAlpha);
                      b.applyColorTransform(a.__owner.__worldColorTransform);
                      b.updateShader();
                    } else {
                      E = b.__initShaderBuffer(g);
                      b.__setShaderBuffer(g);
                      b.applyMatrix(La);
                      b.applyBitmapData(l, false, h);
                      b.applyAlpha(1);
                      b.applyColorTransform(null);
                      b.__updateShaderBuffer(r);
                    }
                    if (E.__position != null) {
                      f.setVertexBufferAt(E.__position.index, C, D, z ? 4 : 2);
                    }
                    if (E.__textureCoord != null) {
                      f.setVertexBufferAt(E.__textureCoord.index, C, D + Y, 2);
                    }
                    switch (d) {
                      case 0:
                        f.setCulling(0);
                        break;
                      case 1:
                        f.setCulling(3);
                        break;
                      case 2:
                        f.setCulling(1);
                    }
                    f.__drawTriangles(0, y);
                    r += y;
                    if (z) {
                      w += e * y;
                    } else {
                      q += e * y;
                    }
                    switch (d) {
                      case 1:
                      case 2:
                        f.setCulling(0);
                    }
                    b.__clearShader();
                    break;
                  case 13:
                    g = m = l = null;
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = d;
                    f.setCulling(3);
                    break;
                  case 18:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.MOVE_TO;
                    break;
                  case 19:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = pa.OVERRIDE_BLEND_MODE;
                    d = c;
                    b.__setBlendMode(d.buffer.o[d.oPos]);
                    break;
                  default:
                    switch (c.prev._hx_index) {
                      case 0:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 1:
                        c.iPos += 1;
                        c.fPos += 1;
                        break;
                      case 2:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 3:
                        c.oPos += 1;
                        break;
                      case 4:
                        c.fPos += 6;
                        break;
                      case 5:
                        c.fPos += 4;
                        break;
                      case 6:
                        c.fPos += 3;
                        break;
                      case 7:
                        c.fPos += 4;
                        break;
                      case 8:
                        c.oPos += 3;
                        break;
                      case 9:
                        c.fPos += 4;
                        break;
                      case 10:
                        c.fPos += 5;
                        c.oPos += 1;
                        break;
                      case 12:
                        c.oPos += 4;
                        break;
                      case 14:
                        c.oPos += 2;
                        c.bPos += 2;
                        break;
                      case 15:
                        c.oPos += 4;
                        c.iiPos += 2;
                        c.ffPos += 1;
                        c.fPos += 1;
                        break;
                      case 16:
                        c.oPos += 4;
                        c.iPos += 1;
                        c.fPos += 2;
                        c.bPos += 1;
                        break;
                      case 17:
                        c.fPos += 2;
                        break;
                      case 18:
                        c.fPos += 2;
                        break;
                      case 19:
                        c.oPos += 1;
                        break;
                      case 20:
                        c.oPos += 1;
                    }
                    c.prev = d;
                }
              }
              ya.__pool.release(k);
            }
            a.__hardwareDirty = false;
            a.set___dirty(false);
          }
        }
      };
      rc.renderMask = function (a, b) {
        rc.maskRender = true;
        rc.render(a, b);
        rc.maskRender = false;
      };
      rc.resizeVertexBuffer = function (a, b, c) {
        var d = b ? a.__vertexBufferDataUVT : a.__vertexBufferData;
        var e = null;
        if (d == null) {
          var f = e = null;
          var k = null;
          var g = null;
          var l = null;
          e = c = c != null ? new Float32Array(c) : e != null ? new Float32Array(e) : f != null ? new Float32Array(f.__array) : k != null ? new Float32Array(k) : g != null ? l == null ? new Float32Array(g, 0) : new Float32Array(g, 0, l) : null;
        } else if (c > d.length) {
          l = g = k = f = e = null;
          e = c = c != null ? new Float32Array(c) : e != null ? new Float32Array(e) : f != null ? new Float32Array(f.__array) : k != null ? new Float32Array(k) : g != null ? l == null ? new Float32Array(g, 0) : new Float32Array(g, 0, l) : null;
          e.set(d);
        }
        if (e != null) {
          if (b) {
            a.__vertexBufferDataUVT = e;
          } else {
            a.__vertexBufferData = e;
          }
        }
      };
      function Ih() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tdiscard;\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = color;\n\n\t\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}";
        }
        fe.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.display._internal.Context3DMaskShader"] = Ih;
      Ih.__name__ = "openfl.display._internal.Context3DMaskShader";
      Ih.__super__ = fe;
      Ih.prototype = q(fe.prototype, {
        __class__: Ih
      });
      function ag() {}
      h["openfl.display._internal.Context3DShape"] = ag;
      ag.__name__ = "openfl.display._internal.Context3DShape";
      ag.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0)) {
          var c = a.__graphics;
          if (c != null) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            rc.render(c, b);
            if (c.__bitmap != null && c.__visible) {
              var d = b.__context3D;
              var e = b.__initDisplayShader(a.__worldShader);
              b.setShader(e);
              b.applyBitmapData(c.__bitmap, true);
              var f = ya.__pool.get();
              f.scale(1 / c.__bitmapScale, 1 / c.__bitmapScale);
              f.concat(c.__worldTransform);
              b.applyMatrix(b.__getMatrix(f, 1));
              ya.__pool.release(f);
              b.applyAlpha(a.__worldAlpha);
              b.applyColorTransform(a.__worldColorTransform);
              b.updateShader();
              f = c.__bitmap.getVertexBuffer(d);
              if (e.__position != null) {
                d.setVertexBufferAt(e.__position.index, f, 0, 3);
              }
              if (e.__textureCoord != null) {
                d.setVertexBufferAt(e.__textureCoord.index, f, 3, 2);
              }
              c = c.__bitmap.getIndexBuffer(d);
              d.drawTriangles(c);
              b.__clearShader();
            }
            b.__popMaskObject(a);
          }
        }
      };
      ag.renderMask = function (a, b) {
        var c = a.__graphics;
        if (c != null && (rc.renderMask(c, b), c.__bitmap != null)) {
          a = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(c.__bitmap, true);
          b.applyMatrix(b.__getMatrix(c.__worldTransform, 1));
          b.updateShader();
          var e = c.__bitmap.getVertexBuffer(a);
          if (d.__position != null) {
            a.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            a.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          c = c.__bitmap.getIndexBuffer(a);
          a.drawTriangles(c);
          b.__clearShader();
        }
      };
      function zm() {}
      h["openfl.display._internal.Context3DSimpleButton"] = zm;
      zm.__name__ = "openfl.display._internal.Context3DSimpleButton";
      zm.renderDrawable = function (a, b) {
        if (!!a.__renderable && !(a.__worldAlpha <= 0) && a.__currentState != null) {
          b.__pushMaskObject(a);
          b.__renderDrawable(a.__currentState);
          b.__popMaskObject(a);
          b.__renderEvent(a);
        }
      };
      zm.renderDrawableMask = function (a, b) {
        if (a.__currentState != null) {
          b.__renderDrawableMask(a.__currentState);
        }
      };
      function Bg() {}
      h["openfl.display._internal.Context3DTextField"] = Bg;
      Bg.__name__ = "openfl.display._internal.Context3DTextField";
      Bg.render = function (a, b) {
        b.__softwareRenderer.__pixelRatio = b.__pixelRatio;
        var c = b.__softwareRenderer;
        b = a.__textEngine;
        var d = !b.background && !b.border;
        var e = d ? b.textBounds : b.bounds;
        var f = a.__graphics;
        var k = 0;
        if (a.__dirty) {
          a.__updateLayout();
          if (f.__bounds == null) {
            f.__bounds = new ba();
          }
          if (a.get_text().length == 0) {
            k = b.bounds.width - 4;
            var g = a.get_defaultTextFormat().align;
            k = g == 3 ? 0 : g == 4 ? k : k / 2;
            switch (g) {
              case 0:
                k += a.get_defaultTextFormat().leftMargin / 2;
                k -= a.get_defaultTextFormat().rightMargin / 2;
                k += a.get_defaultTextFormat().indent / 2;
                k += a.get_defaultTextFormat().blockIndent / 2;
                break;
              case 2:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 3:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 4:
                k -= a.get_defaultTextFormat().rightMargin;
            }
            if (d) {
              e.y = b.bounds.y;
              e.x = k;
            }
          }
          f.__bounds.copyFrom(e);
        }
        g = c.__pixelRatio;
        f.__update(c.__worldTransform, g);
        if (a.__dirty || f.__softwareDirty) {
          var l = Math.round(f.__width * g);
          var h = Math.round(f.__height * g);
          if ((b.text == null || b.text == "") && !b.background && !b.border && !b.__hasFocus && (b.type != 1 || !b.selectable) || (b.width <= 0 || b.height <= 0) && b.autoSize != 2) {
            a.__graphics.__canvas = null;
            a.__graphics.__context = null;
            a.__graphics.__bitmap = null;
            a.__graphics.__softwareDirty = false;
            a.__graphics.set___dirty(false);
            a.__dirty = false;
          } else {
            if (a.__graphics.__canvas == null) {
              a.__graphics.__canvas = window.document.createElement("canvas");
              a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
            }
            aa.context = f.__context;
            f.__canvas.width = l;
            f.__canvas.height = h;
            if (c.__isDOM) {
              f.__canvas.style.width = Math.round(l / g) + "px";
              f.__canvas.style.height = Math.round(h / g) + "px";
            }
            l = ya.__pool.get();
            l.scale(g, g);
            l.concat(f.__renderTransform);
            aa.context.setTransform(l.a, l.b, l.c, l.d, l.tx, l.ty);
            ya.__pool.release(l);
            if (aa.clearRect == null) {
              aa.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
            }
            if (aa.clearRect) {
              aa.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
            }
            if (b.text != null && b.text != "" || b.__hasFocus) {
              d = b.text;
              f.__context.imageSmoothingEnabled = !c.__allowSmoothing || b.antiAliasType == 0 && b.sharpness == 400 ? false : true;
              if (b.border || b.background) {
                aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                if (b.background) {
                  var p = v.hex(b.backgroundColor & 16777215, 6);
                  aa.context.fillStyle = "#" + p;
                  aa.context.fill();
                }
                if (b.border) {
                  aa.context.lineWidth = 1;
                  p = v.hex(b.borderColor & 16777215, 6);
                  aa.context.strokeStyle = "#" + p;
                  aa.context.stroke();
                }
              }
              aa.context.textBaseline = "alphabetic";
              aa.context.textAlign = "start";
              c = -a.get_scrollH();
              var m = k = 0;
              for (p = a.get_scrollV() - 1; m < p;) {
                var n = m++;
                k -= b.lineHeights.get(n);
              }
              var r;
              for (l = b.layoutGroups.iterator(); l.hasNext();) {
                h = l.next();
                if (!(h.lineIndex < a.get_scrollV() - 1)) {
                  if (h.lineIndex > b.get_bottomScrollV() - 1) {
                    break;
                  }
                  var q = "#" + v.hex(h.format.color & 16777215, 6);
                  aa.context.font = ic.getFont(h.format);
                  aa.context.fillStyle = q;
                  aa.context.fillText(d.substring(h.startIndex, h.endIndex), h.offsetX + c - e.x, h.offsetY + h.ascent + k - e.y);
                  if (a.__caretIndex > -1 && b.selectable) {
                    if (a.__selectionIndex == a.__caretIndex) {
                      if (a.__showCursor && h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex) {
                        m = r = 0;
                        for (p = a.__caretIndex - h.startIndex; m < p;) {
                          n = m++;
                          if (h.positions.length <= n) {
                            break;
                          }
                          r += h.positions[n];
                        }
                        m = 0;
                        p = a.get_scrollV();
                        for (n = h.lineIndex + 1; p < n;) {
                          var w = p++;
                          m += b.lineHeights.get(w - 1);
                        }
                        aa.context.beginPath();
                        p = v.hex(h.format.color & 16777215, 6);
                        aa.context.strokeStyle = "#" + p;
                        aa.context.moveTo(h.offsetX + r - a.get_scrollH() - e.x, m + 2 - e.y);
                        aa.context.lineWidth = 1;
                        aa.context.lineTo(h.offsetX + r - a.get_scrollH() - e.x, m + ic.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                        aa.context.stroke();
                        aa.context.closePath();
                      }
                    } else if (h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex || h.startIndex <= a.__selectionIndex && h.endIndex >= a.__selectionIndex || h.startIndex > a.__caretIndex && h.endIndex < a.__selectionIndex || h.startIndex > a.__selectionIndex && h.endIndex < a.__caretIndex) {
                      r = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                      m = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                      if (h.startIndex > r) {
                        r = h.startIndex;
                      }
                      if (h.endIndex < m) {
                        m = h.endIndex;
                      }
                      n = a.getCharBoundaries(r);
                      if (m >= h.endIndex) {
                        p = a.getCharBoundaries(h.endIndex - 1);
                        if (p != null) {
                          p.x += p.width + 2;
                        }
                      } else {
                        p = a.getCharBoundaries(m);
                      }
                      if (n != null && p != null) {
                        aa.context.fillStyle = "#000000";
                        aa.context.fillRect(n.x + c - e.x, n.y + k, p.x - n.x, h.height);
                        aa.context.fillStyle = "#FFFFFF";
                        aa.context.fillText(d.substring(r, m), c + n.x - e.x, h.offsetY + h.ascent + k);
                      }
                    }
                  }
                  if (h.format.underline) {
                    aa.context.beginPath();
                    aa.context.strokeStyle = q;
                    aa.context.lineWidth = 1;
                    q = h.offsetX + c - e.x;
                    r = Math.ceil(h.offsetY + k + h.ascent - e.y) + Math.floor(h.ascent * 0.185) + 0.5;
                    aa.context.moveTo(q, r);
                    aa.context.lineTo(q + h.width, r);
                    aa.context.stroke();
                    aa.context.closePath();
                  }
                }
              }
            } else {
              if (b.border || b.background) {
                if (b.border) {
                  aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                } else {
                  aa.context.rect(0, 0, e.width, e.height);
                }
                if (b.background) {
                  p = v.hex(b.backgroundColor & 16777215, 6);
                  aa.context.fillStyle = "#" + p;
                  aa.context.fill();
                }
                if (b.border) {
                  aa.context.lineWidth = 1;
                  aa.context.lineCap = "square";
                  p = v.hex(b.borderColor & 16777215, 6);
                  aa.context.strokeStyle = "#" + p;
                  aa.context.stroke();
                }
              }
              if (a.__caretIndex > -1 && b.selectable && a.__showCursor) {
                c = -a.get_scrollH() + (d ? 0 : k);
                m = k = 0;
                for (p = a.get_scrollV() - 1; m < p;) {
                  n = m++;
                  k += b.lineHeights.get(n);
                }
                aa.context.beginPath();
                p = v.hex(a.get_defaultTextFormat().color & 16777215, 6);
                aa.context.strokeStyle = "#" + p;
                aa.context.moveTo(c + 2.5, k + 2.5);
                aa.context.lineWidth = 1;
                aa.context.lineTo(c + 2.5, k + ic.getFormatHeight(a.get_defaultTextFormat()) - 1);
                aa.context.stroke();
                aa.context.closePath();
              }
            }
            f.__bitmap = N.fromCanvas(a.__graphics.__canvas);
            f.__bitmapScale = g;
            f.__visible = true;
            a.__dirty = false;
            f.__softwareDirty = false;
            f.set___dirty(false);
          }
        }
        a.__graphics.__hardwareDirty = false;
      };
      Bg.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          Bg.render(a, b);
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = ba.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              ba.__pool.release(d);
            }
            if (a.__graphics != null) {
              ag.render(a, b);
            }
          }
        } else {
          Re.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      Bg.renderDrawableMask = function (a, b) {
        Bg.renderMask(a, b);
        Jh.renderDrawableMask(a, b);
      };
      Bg.renderMask = function (a, b) {
        var c = b.__softwareRenderer;
        b = a.__textEngine;
        var d = !b.background && !b.border;
        var e = d ? b.textBounds : b.bounds;
        var f = a.__graphics;
        var k = 0;
        if (a.__dirty) {
          a.__updateLayout();
          if (f.__bounds == null) {
            f.__bounds = new ba();
          }
          if (a.get_text().length == 0) {
            k = b.bounds.width - 4;
            var g = a.get_defaultTextFormat().align;
            k = g == 3 ? 0 : g == 4 ? k : k / 2;
            switch (g) {
              case 0:
                k += a.get_defaultTextFormat().leftMargin / 2;
                k -= a.get_defaultTextFormat().rightMargin / 2;
                k += a.get_defaultTextFormat().indent / 2;
                k += a.get_defaultTextFormat().blockIndent / 2;
                break;
              case 2:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 3:
                k += a.get_defaultTextFormat().leftMargin;
                k += a.get_defaultTextFormat().indent;
                k += a.get_defaultTextFormat().blockIndent;
                break;
              case 4:
                k -= a.get_defaultTextFormat().rightMargin;
            }
            if (d) {
              e.y = b.bounds.y;
              e.x = k;
            }
          }
          f.__bounds.copyFrom(e);
        }
        g = c.__pixelRatio;
        f.__update(c.__worldTransform, g);
        if (a.__dirty || f.__softwareDirty) {
          var l = Math.round(f.__width * g);
          var h = Math.round(f.__height * g);
          if ((b.text == null || b.text == "") && !b.background && !b.border && !b.__hasFocus && (b.type != 1 || !b.selectable) || (b.width <= 0 || b.height <= 0) && b.autoSize != 2) {
            a.__graphics.__canvas = null;
            a.__graphics.__context = null;
            a.__graphics.__bitmap = null;
            a.__graphics.__softwareDirty = false;
            a.__graphics.set___dirty(false);
            a.__dirty = false;
          } else {
            if (a.__graphics.__canvas == null) {
              a.__graphics.__canvas = window.document.createElement("canvas");
              a.__graphics.__context = a.__graphics.__canvas.getContext("2d");
            }
            aa.context = f.__context;
            f.__canvas.width = l;
            f.__canvas.height = h;
            if (c.__isDOM) {
              f.__canvas.style.width = Math.round(l / g) + "px";
              f.__canvas.style.height = Math.round(h / g) + "px";
            }
            l = ya.__pool.get();
            l.scale(g, g);
            l.concat(f.__renderTransform);
            aa.context.setTransform(l.a, l.b, l.c, l.d, l.tx, l.ty);
            ya.__pool.release(l);
            if (aa.clearRect == null) {
              aa.clearRect = typeof navigator !== "undefined" && typeof navigator.isCocoonJS !== "undefined";
            }
            if (aa.clearRect) {
              aa.context.clearRect(0, 0, f.__canvas.width, f.__canvas.height);
            }
            if (b.text != null && b.text != "" || b.__hasFocus) {
              d = b.text;
              f.__context.imageSmoothingEnabled = !c.__allowSmoothing || b.antiAliasType == 0 && b.sharpness == 400 ? false : true;
              if (b.border || b.background) {
                aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                if (b.background) {
                  var p = v.hex(b.backgroundColor & 16777215, 6);
                  aa.context.fillStyle = "#" + p;
                  aa.context.fill();
                }
                if (b.border) {
                  aa.context.lineWidth = 1;
                  p = v.hex(b.borderColor & 16777215, 6);
                  aa.context.strokeStyle = "#" + p;
                  aa.context.stroke();
                }
              }
              aa.context.textBaseline = "alphabetic";
              aa.context.textAlign = "start";
              c = -a.get_scrollH();
              var m = k = 0;
              for (p = a.get_scrollV() - 1; m < p;) {
                var n = m++;
                k -= b.lineHeights.get(n);
              }
              var r;
              for (l = b.layoutGroups.iterator(); l.hasNext();) {
                h = l.next();
                if (!(h.lineIndex < a.get_scrollV() - 1)) {
                  if (h.lineIndex > b.get_bottomScrollV() - 1) {
                    break;
                  }
                  var q = "#" + v.hex(h.format.color & 16777215, 6);
                  aa.context.font = ic.getFont(h.format);
                  aa.context.fillStyle = q;
                  aa.context.fillText(d.substring(h.startIndex, h.endIndex), h.offsetX + c - e.x, h.offsetY + h.ascent + k - e.y);
                  if (a.__caretIndex > -1 && b.selectable) {
                    if (a.__selectionIndex == a.__caretIndex) {
                      if (a.__showCursor && h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex) {
                        m = r = 0;
                        for (p = a.__caretIndex - h.startIndex; m < p;) {
                          n = m++;
                          if (h.positions.length <= n) {
                            break;
                          }
                          r += h.positions[n];
                        }
                        m = 0;
                        p = a.get_scrollV();
                        for (n = h.lineIndex + 1; p < n;) {
                          var w = p++;
                          m += b.lineHeights.get(w - 1);
                        }
                        aa.context.beginPath();
                        p = v.hex(h.format.color & 16777215, 6);
                        aa.context.strokeStyle = "#" + p;
                        aa.context.moveTo(h.offsetX + r - a.get_scrollH() - e.x, m + 2 - e.y);
                        aa.context.lineWidth = 1;
                        aa.context.lineTo(h.offsetX + r - a.get_scrollH() - e.x, m + ic.getFormatHeight(a.get_defaultTextFormat()) - 1 - e.y);
                        aa.context.stroke();
                        aa.context.closePath();
                      }
                    } else if (h.startIndex <= a.__caretIndex && h.endIndex >= a.__caretIndex || h.startIndex <= a.__selectionIndex && h.endIndex >= a.__selectionIndex || h.startIndex > a.__caretIndex && h.endIndex < a.__selectionIndex || h.startIndex > a.__selectionIndex && h.endIndex < a.__caretIndex) {
                      r = Math.min(a.__selectionIndex, a.__caretIndex) | 0;
                      m = Math.max(a.__selectionIndex, a.__caretIndex) | 0;
                      if (h.startIndex > r) {
                        r = h.startIndex;
                      }
                      if (h.endIndex < m) {
                        m = h.endIndex;
                      }
                      n = a.getCharBoundaries(r);
                      if (m >= h.endIndex) {
                        p = a.getCharBoundaries(h.endIndex - 1);
                        if (p != null) {
                          p.x += p.width + 2;
                        }
                      } else {
                        p = a.getCharBoundaries(m);
                      }
                      if (n != null && p != null) {
                        aa.context.fillStyle = "#000000";
                        aa.context.fillRect(n.x + c - e.x, n.y + k, p.x - n.x, h.height);
                        aa.context.fillStyle = "#FFFFFF";
                        aa.context.fillText(d.substring(r, m), c + n.x - e.x, h.offsetY + h.ascent + k);
                      }
                    }
                  }
                  if (h.format.underline) {
                    aa.context.beginPath();
                    aa.context.strokeStyle = q;
                    aa.context.lineWidth = 1;
                    q = h.offsetX + c - e.x;
                    r = Math.ceil(h.offsetY + k + h.ascent - e.y) + Math.floor(h.ascent * 0.185) + 0.5;
                    aa.context.moveTo(q, r);
                    aa.context.lineTo(q + h.width, r);
                    aa.context.stroke();
                    aa.context.closePath();
                  }
                }
              }
            } else {
              if (b.border || b.background) {
                if (b.border) {
                  aa.context.rect(0.5, 0.5, e.width - 1, e.height - 1);
                } else {
                  aa.context.rect(0, 0, e.width, e.height);
                }
                if (b.background) {
                  p = v.hex(b.backgroundColor & 16777215, 6);
                  aa.context.fillStyle = "#" + p;
                  aa.context.fill();
                }
                if (b.border) {
                  aa.context.lineWidth = 1;
                  aa.context.lineCap = "square";
                  p = v.hex(b.borderColor & 16777215, 6);
                  aa.context.strokeStyle = "#" + p;
                  aa.context.stroke();
                }
              }
              if (a.__caretIndex > -1 && b.selectable && a.__showCursor) {
                c = -a.get_scrollH() + (d ? 0 : k);
                m = k = 0;
                for (p = a.get_scrollV() - 1; m < p;) {
                  n = m++;
                  k += b.lineHeights.get(n);
                }
                aa.context.beginPath();
                p = v.hex(a.get_defaultTextFormat().color & 16777215, 6);
                aa.context.strokeStyle = "#" + p;
                aa.context.moveTo(c + 2.5, k + 2.5);
                aa.context.lineWidth = 1;
                aa.context.lineTo(c + 2.5, k + ic.getFormatHeight(a.get_defaultTextFormat()) - 1);
                aa.context.stroke();
                aa.context.closePath();
              }
            }
            f.__bitmap = N.fromCanvas(a.__graphics.__canvas);
            f.__bitmapScale = g;
            f.__visible = true;
            a.__dirty = false;
            f.__softwareDirty = false;
            f.set___dirty(false);
          }
        }
        a.__graphics.__hardwareDirty = false;
      };
      function Q() {}
      h["openfl.display._internal.Context3DTilemap"] = Q;
      Q.__name__ = "openfl.display._internal.Context3DTilemap";
      Q.buildBuffer = function (a, b) {
        if (!a.__renderable || a.__group.__tiles.length == 0 || a.__worldAlpha <= 0) {
          a.__group.__dirty = false;
        } else {
          Q.numTiles = 0;
          Q.vertexBufferData = a.__buffer != null ? a.__buffer.vertexBufferData : null;
          Q.vertexDataPosition = 0;
          var c = ba.__pool.get();
          var d = ya.__pool.get();
          var e = ya.__pool.get();
          Q.dataPerVertex = 4;
          if (a.tileAlphaEnabled) {
            Q.dataPerVertex++;
          }
          if (a.tileColorTransformEnabled) {
            Q.dataPerVertex += 8;
          }
          Q.buildBufferTileContainer(a, a.__group, b, e, a.__tileset, a.tileAlphaEnabled, a.__worldAlpha, a.tileColorTransformEnabled, a.__worldColorTransform, null, c, d);
          a.__buffer.flushVertexBufferData();
          ba.__pool.release(c);
          ya.__pool.release(d);
          ya.__pool.release(e);
        }
      };
      Q.buildBufferTileContainer = function (a, b, c, d, e, f, k, g, l, h, p, m, n) {
        if (n == null) {
          n = true;
        }
        var t = ya.__pool.get();
        var r = c.__roundPixels;
        var q = b.__tiles;
        if (n) {
          Q.resizeBuffer(a, Q.numTiles + Q.getRecursiveLength(b));
        }
        n = null;
        var w;
        var u;
        var J;
        var v;
        var y;
        var z;
        var Y;
        var A;
        var C;
        var D;
        var La;
        var E = f ? 5 : 4;
        for (var B = 0; B < q.length;) {
          v = q[B];
          ++B;
          t.setTo(1, 0, 0, 1, -v.get_originX(), -v.get_originY());
          t.concat(v.get_matrix());
          t.concat(d);
          if (r) {
            t.tx = Math.round(t.tx);
            t.ty = Math.round(t.ty);
          }
          var V = v.get_tileset() ?? e;
          var x = v.get_alpha() * k;
          var Ka = v.get_visible();
          v.__dirty = false;
          if (Ka && !(x <= 0)) {
            if (g) {
              if (v.get_colorTransform() != null) {
                if (l == null) {
                  n = v.get_colorTransform();
                } else {
                  if (Q.cacheColorTransform == null) {
                    Q.cacheColorTransform = new Ob();
                  }
                  n = Q.cacheColorTransform;
                  n.redMultiplier = l.redMultiplier * v.get_colorTransform().redMultiplier;
                  n.greenMultiplier = l.greenMultiplier * v.get_colorTransform().greenMultiplier;
                  n.blueMultiplier = l.blueMultiplier * v.get_colorTransform().blueMultiplier;
                  n.alphaMultiplier = l.alphaMultiplier * v.get_colorTransform().alphaMultiplier;
                  n.redOffset = l.redOffset + v.get_colorTransform().redOffset;
                  n.greenOffset = l.greenOffset + v.get_colorTransform().greenOffset;
                  n.blueOffset = l.blueOffset + v.get_colorTransform().blueOffset;
                  n.alphaOffset = l.alphaOffset + v.get_colorTransform().alphaOffset;
                }
              } else {
                n = l;
              }
            }
            if (!f) {
              x = 1;
            }
            if (v.__length > 0) {
              Q.buildBufferTileContainer(a, v, c, t, V, f, x, g, n, h, p, m, false);
            } else if (V != null && (Ka = v.get_id(), w = V.__bitmapData, w != null)) {
              if (Ka == -1) {
                u = v.__rect;
                if (u == null || u.width <= 0 || u.height <= 0) {
                  continue;
                }
                V = u.x / w.width;
                v = u.y / w.height;
                Ka = u.get_right() / w.width;
                y = u.get_bottom() / w.height;
              } else {
                w = V.__data[Ka];
                if (w == null) {
                  continue;
                }
                p.setTo(w.x, w.y, w.width, w.height);
                u = p;
                V = w.__uvX;
                v = w.__uvY;
                Ka = w.__uvWidth;
                y = w.__uvHeight;
              }
              w = u.width;
              J = u.height;
              u = t.a * 0 + t.c * 0 + t.tx;
              z = t.b * 0 + t.d * 0 + t.ty;
              Y = w * t.a + t.c * 0 + t.tx;
              A = w * t.b + t.d * 0 + t.ty;
              C = t.a * 0 + J * t.c + t.tx;
              D = t.b * 0 + J * t.d + t.ty;
              La = w * t.a + J * t.c + t.tx;
              J = w * t.b + J * t.d + t.ty;
              w = Q.vertexDataPosition;
              Q.vertexBufferData[w] = u;
              Q.vertexBufferData[w + 1] = z;
              Q.vertexBufferData[w + 2] = V;
              Q.vertexBufferData[w + 3] = v;
              Q.vertexBufferData[w + Q.dataPerVertex] = Y;
              Q.vertexBufferData[w + Q.dataPerVertex + 1] = A;
              Q.vertexBufferData[w + Q.dataPerVertex + 2] = Ka;
              Q.vertexBufferData[w + Q.dataPerVertex + 3] = v;
              Q.vertexBufferData[w + Q.dataPerVertex * 2] = C;
              Q.vertexBufferData[w + Q.dataPerVertex * 2 + 1] = D;
              Q.vertexBufferData[w + Q.dataPerVertex * 2 + 2] = V;
              Q.vertexBufferData[w + Q.dataPerVertex * 2 + 3] = y;
              Q.vertexBufferData[w + Q.dataPerVertex * 3] = La;
              Q.vertexBufferData[w + Q.dataPerVertex * 3 + 1] = J;
              Q.vertexBufferData[w + Q.dataPerVertex * 3 + 2] = Ka;
              Q.vertexBufferData[w + Q.dataPerVertex * 3 + 3] = y;
              if (f) {
                Q.vertexBufferData[w + Q.dataPerVertex * 0 + 4] = x;
                Q.vertexBufferData[w + Q.dataPerVertex + 4] = x;
                Q.vertexBufferData[w + Q.dataPerVertex * 2 + 4] = x;
                Q.vertexBufferData[w + Q.dataPerVertex * 3 + 4] = x;
              }
              if (g) {
                if (n != null) {
                  for (x = 0; x < 4;) {
                    V = x++;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E] = n.redMultiplier;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 1] = n.greenMultiplier;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 2] = n.blueMultiplier;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 3] = n.alphaMultiplier;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 4] = n.redOffset;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 5] = n.greenOffset;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 6] = n.blueOffset;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 7] = n.alphaOffset;
                  }
                } else {
                  for (x = 0; x < 4;) {
                    V = x++;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E] = 1;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 1] = 1;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 2] = 1;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 3] = 1;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 4] = 0;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 5] = 0;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 6] = 0;
                    Q.vertexBufferData[w + Q.dataPerVertex * V + E + 7] = 0;
                  }
                }
              }
              Q.vertexDataPosition += Q.dataPerVertex * 4;
            }
          }
        }
        b.__dirty = false;
        ya.__pool.release(t);
      };
      Q.flush = function (a, b, c) {
        if (Q.currentShader == null) {
          Q.currentShader = b.__defaultDisplayShader;
        }
        if (Q.bufferPosition > Q.lastFlushedPosition && Q.currentBitmapData != null && Q.currentShader != null) {
          var d = b.__initDisplayShader(Q.currentShader);
          b.setShader(d);
          b.applyBitmapData(Q.currentBitmapData, a.smoothing);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
          if (a.tileAlphaEnabled) {
            b.useAlphaArray();
          } else {
            b.applyAlpha(a.__worldAlpha);
          }
          if (a.tileBlendModeEnabled) {
            b.__setBlendMode(c);
          }
          if (a.tileColorTransformEnabled) {
            b.applyHasColorTransform(true);
            b.useColorTransformArray();
          } else {
            b.applyColorTransform(a.__worldColorTransform);
          }
          b.updateShader();
          c = a.__buffer.vertexBuffer;
          var e = Q.lastFlushedPosition * Q.dataPerVertex * 4;
          var f;
          while (Q.lastFlushedPosition < Q.bufferPosition) {
            f = Math.min(Q.bufferPosition - Q.lastFlushedPosition, Q.context.__quadIndexBufferElements) | 0;
            if (f <= 0) {
              break;
            }
            if (d.__position != null) {
              Q.context.setVertexBufferAt(d.__position.index, c, e, 2);
            }
            if (d.__textureCoord != null) {
              Q.context.setVertexBufferAt(d.__textureCoord.index, c, e + 2, 2);
            }
            if (a.tileAlphaEnabled && d.__alpha != null) {
              Q.context.setVertexBufferAt(d.__alpha.index, c, e + 4, 1);
            }
            if (a.tileColorTransformEnabled) {
              var k = a.tileAlphaEnabled ? 5 : 4;
              if (d.__colorMultiplier != null) {
                Q.context.setVertexBufferAt(d.__colorMultiplier.index, c, e + k, 4);
              }
              if (d.__colorOffset != null) {
                Q.context.setVertexBufferAt(d.__colorOffset.index, c, e + k + 4, 4);
              }
            }
            Q.context.drawTriangles(Q.context.__quadIndexBuffer, 0, f * 2);
            Q.lastFlushedPosition += f;
          }
          b.__clearShader();
        }
        Q.lastUsedBitmapData = Q.currentBitmapData;
        Q.lastUsedShader = Q.currentShader;
      };
      Q.getRecursiveLength = function (a) {
        a = a.__tiles;
        var b = 0;
        for (var c = 0; c < a.length;) {
          var d = a[c];
          ++c;
          if (d.__length > 0) {
            b += Q.getRecursiveLength(d);
          } else {
            ++b;
          }
        }
        return b;
      };
      Q.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && (Q.context = b.__context3D, Q.buildBuffer(a, b), Q.numTiles != 0)) {
          Q.bufferPosition = 0;
          Q.lastFlushedPosition = 0;
          Q.lastUsedBitmapData = null;
          Q.lastUsedShader = null;
          Q.currentBitmapData = null;
          Q.currentShader = null;
          Q.currentBlendMode = a.__worldBlendMode;
          if (!a.tileBlendModeEnabled) {
            b.__setBlendMode(Q.currentBlendMode);
          }
          b.__pushMaskObject(a);
          var c = ba.__pool.get();
          c.setTo(0, 0, a.__width, a.__height);
          b.__pushMaskRect(c, a.__renderTransform);
          Q.renderTileContainer(a, b, a.__group, a.__worldShader, a.__tileset, a.__worldAlpha, a.tileBlendModeEnabled, Q.currentBlendMode, null);
          Q.flush(a, b, Q.currentBlendMode);
          b.__popMaskRect();
          b.__popMaskObject(a);
          ba.__pool.release(c);
        }
      };
      Q.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if ((a.opaqueBackground != null || a.__graphics != null) && !!a.__renderable && !(a.__worldAlpha <= 0)) {
            if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
              b.__setBlendMode(a.__worldBlendMode);
              b.__pushMaskObject(a);
              var c = b.__context3D;
              var d = ba.__pool.get();
              d.setTo(0, 0, a.get_width(), a.get_height());
              b.__pushMaskRect(d, a.__renderTransform);
              var e = a.opaqueBackground;
              c.clear((e >>> 16 & 255) / 255, (e >>> 8 & 255) / 255, (e & 255) / 255, 1, 0, 0, 1);
              b.__popMaskRect();
              b.__popMaskObject(a);
              ba.__pool.release(d);
            }
            if (a.__graphics != null) {
              ag.render(a, b);
            }
          }
          Q.render(a, b);
        } else {
          Re.render(a.__cacheBitmap, b);
        }
        b.__renderEvent(a);
      };
      Q.renderDrawableMask = function (a, b) {
        if (a.opaqueBackground != null || a.__graphics != null) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          if (a.__graphics != null) {
            ag.renderMask(a, b);
          }
        }
        Q.renderMask(a, b);
      };
      Q.renderTileContainer = function (a, b, c, d, e, f, k, g, l) {
        c = c.__tiles;
        var h;
        var t;
        var m;
        var p = null;
        var n;
        for (var r = 0; r < c.length;) {
          var q = c[r];
          ++r;
          h = q.get_tileset() ?? e;
          t = q.get_alpha() * f;
          if ((m = q.get_visible()) && !(t <= 0)) {
            m = q.get_shader() ?? d;
            if (k) {
              p = q.__blendMode ?? g;
            }
            if (q.__length > 0) {
              Q.renderTileContainer(a, b, q, m, h, t, k, p, l);
            } else if (h != null && (n = q.get_id(), t = h.__bitmapData, t != null)) {
              if (n == -1) {
                h = q.__rect;
                if (h == null || h.width <= 0 || h.height <= 0) {
                  continue;
                }
              } else {
                h = h.__data[n];
                if (h == null) {
                  continue;
                }
              }
              if (m != Q.currentShader || t != Q.currentBitmapData && Q.currentBitmapData != null || Q.currentBlendMode != p) {
                Q.flush(a, b, Q.currentBlendMode);
              }
              Q.currentBitmapData = t;
              Q.currentShader = m;
              Q.currentBlendMode = p;
              Q.bufferPosition++;
            }
          }
        }
      };
      Q.renderMask = function (a, b) {};
      Q.resizeBuffer = function (a, b) {
        Q.numTiles = b;
        if (a.__buffer == null) {
          a.__buffer = new Vj(Q.context, Dm.QUADS, Q.numTiles, Q.dataPerVertex);
        } else {
          a.__buffer.resize(Q.numTiles, Q.dataPerVertex);
        }
        Q.vertexBufferData = a.__buffer.vertexBufferData;
      };
      function Se() {}
      h["openfl.display._internal.Context3DVideo"] = Se;
      Se.__name__ = "openfl.display._internal.Context3DVideo";
      Se.render = function (a, b) {
        if (a.__renderable && !(a.__worldAlpha <= 0) && a.__stream != null && a.__stream.__video != null) {
          var c = b.__context3D;
          var d = c.gl;
          if (a.__getTexture(c) != null) {
            b.__setBlendMode(a.__worldBlendMode);
            b.__pushMaskObject(a);
            var e = b.__initDisplayShader(a.__worldShader);
            b.setShader(e);
            b.applyBitmapData(null, true, false);
            b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
            b.applyAlpha(a.__worldAlpha);
            b.applyColorTransform(a.__worldColorTransform);
            if (e.__textureSize != null) {
              Se.__textureSizeValue[0] = a.__stream != null ? a.__stream.__video.videoWidth : 0;
              Se.__textureSizeValue[1] = a.__stream != null ? a.__stream.__video.videoHeight : 0;
              e.__textureSize.value = Se.__textureSizeValue;
            }
            b.updateShader();
            c.setTextureAt(0, a.__getTexture(c));
            c.__flushGLTextures();
            d.uniform1i(e.__texture.index, 0);
            if (a.smoothing) {
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.LINEAR);
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.LINEAR);
            } else {
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MAG_FILTER, d.NEAREST);
              d.texParameteri(d.TEXTURE_2D, d.TEXTURE_MIN_FILTER, d.NEAREST);
            }
            d = a.__getVertexBuffer(c);
            if (e.__position != null) {
              c.setVertexBufferAt(e.__position.index, d, 0, 3);
            }
            if (e.__textureCoord != null) {
              c.setVertexBufferAt(e.__textureCoord.index, d, 3, 2);
            }
            e = a.__getIndexBuffer(c);
            c.drawTriangles(e);
            b.__clearShader();
            b.__popMaskObject(a);
          }
        }
      };
      Se.renderDrawable = function (a, b) {
        Se.render(a, b);
        b.__renderEvent(a);
      };
      Se.renderDrawableMask = function (a, b) {
        Se.renderMask(a, b);
      };
      Se.renderMask = function (a, b) {
        if (a.__stream != null && a.__stream.__video != null) {
          var c = b.__context3D;
          var d = b.__maskShader;
          b.setShader(d);
          b.applyBitmapData(Ih.opaqueBitmapData, true);
          b.applyMatrix(b.__getMatrix(a.__renderTransform, 1));
          b.updateShader();
          var e = a.__getVertexBuffer(c);
          if (d.__position != null) {
            c.setVertexBufferAt(d.__position.index, e, 0, 3);
          }
          if (d.__textureCoord != null) {
            c.setVertexBufferAt(d.__textureCoord.index, e, 3, 2);
          }
          a = a.__getIndexBuffer(c);
          c.drawTriangles(a);
          b.__clearShader();
        }
      };
      function wc() {}
      h["openfl.display._internal.DOMBitmap"] = wc;
      wc.__name__ = "openfl.display._internal.DOMBitmap";
      wc.clear = function (a, b) {
        ce.clear(a, b);
        if (a.__image != null) {
          b.element.removeChild(a.__image);
          a.__image = null;
          a.__style = null;
        }
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      wc.renderCanvas = function (a, b) {
        if (a.__image != null) {
          b.element.removeChild(a.__image);
          a.__image = null;
        }
        if (a.__canvas == null) {
          a.__canvas = window.document.createElement("canvas");
          a.__context = a.__canvas.getContext("2d");
          a.__imageVersion = -1;
          if (!b.__allowSmoothing || !a.smoothing) {
            a.__context.imageSmoothingEnabled = false;
          }
          b.__initializeElement(a, a.__canvas);
        }
        if (a.__imageVersion != a.__bitmapData.image.version) {
          Wa.convertToCanvas(a.__bitmapData.image);
          a.__canvas.width = a.__bitmapData.width + 1;
          a.__canvas.width = a.__bitmapData.width;
          a.__canvas.height = a.__bitmapData.height;
          a.__context.drawImage(a.__bitmapData.image.buffer.__srcCanvas, 0, 0);
          a.__imageVersion = a.__bitmapData.image.version;
        }
        b.__updateClip(a);
        b.__applyStyle(a, true, true, true);
      };
      wc.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          var c = a.__graphics;
          if (a.stage != null && a.__worldVisible && a.__renderable && c != null) {
            A.render(c, b.__canvasRenderer);
            if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas) {
              if (c.__canvas != null) {
                if (a.__canvas != c.__canvas) {
                  if (a.__canvas != null) {
                    b.element.removeChild(a.__canvas);
                  }
                  a.__canvas = c.__canvas;
                  a.__context = c.__context;
                  b.__initializeElement(a, a.__canvas);
                }
              } else {
                dh.clear(a, b);
              }
            }
            if (a.__canvas != null) {
              b.__pushMaskObject(a);
              var d = a.__renderTransform;
              a.__renderTransform = c.__worldTransform;
              if (c.__transformDirty) {
                c.__transformDirty = false;
                a.__renderTransformChanged = true;
              }
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              a.__renderTransform = d;
              b.__popMaskObject(a);
            }
          } else {
            dh.clear(a, b);
          }
          if (a.stage != null && a.__worldVisible && a.__renderable && a.__bitmapData != null && a.__bitmapData.__isValid && a.__bitmapData.readable) {
            b.__pushMaskObject(a);
            if (a.__bitmapData.image.buffer.__srcImage != null) {
              d = a.__bitmapData.image.buffer.__srcImage.src;
              if (v.startsWith(d, "data:") || v.startsWith(d, "blob:")) {
                wc.renderCanvas(a, b);
              } else {
                wc.renderImage(a, b);
              }
            } else {
              wc.renderCanvas(a, b);
            }
            b.__popMaskObject(a);
          } else {
            wc.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (v.startsWith(d, "data:") || v.startsWith(d, "blob:")) {
                wc.renderCanvas(c, b);
              } else {
                wc.renderImage(c, b);
              }
            } else {
              wc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            wc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      wc.renderDrawableClear = function (a, b) {
        wc.clear(a, b);
      };
      wc.renderImage = function (a, b) {
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
        }
        if (a.__image == null) {
          a.__image = window.document.createElement("img");
          a.__image.crossOrigin = "Anonymous";
          a.__image.src = a.__bitmapData.image.buffer.__srcImage.src;
          b.__initializeElement(a, a.__image);
        }
        b.__updateClip(a);
        b.__applyStyle(a, true, true, true);
      };
      function ce() {}
      h["openfl.display._internal.DOMDisplayObject"] = ce;
      ce.__name__ = "openfl.display._internal.DOMDisplayObject";
      ce.clear = function (a, b) {
        if (a.__cacheBitmap != null) {
          wc.clear(a.__cacheBitmap, b);
        }
        dh.clear(a, b);
      };
      ce.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0) {
            a.get_height();
          }
          var c = a.__graphics;
          if (a.stage != null && a.__worldVisible && a.__renderable && c != null) {
            A.render(c, b.__canvasRenderer);
            if (c.__softwareDirty || a.__worldAlphaChanged || a.__canvas != c.__canvas) {
              if (c.__canvas != null) {
                if (a.__canvas != c.__canvas) {
                  if (a.__canvas != null) {
                    b.element.removeChild(a.__canvas);
                  }
                  a.__canvas = c.__canvas;
                  a.__context = c.__context;
                  b.__initializeElement(a, a.__canvas);
                }
              } else {
                dh.clear(a, b);
              }
            }
            if (a.__canvas != null) {
              b.__pushMaskObject(a);
              var d = a.__renderTransform;
              a.__renderTransform = c.__worldTransform;
              if (c.__transformDirty) {
                c.__transformDirty = false;
                a.__renderTransformChanged = true;
              }
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              a.__renderTransform = d;
              b.__popMaskObject(a);
            }
          } else {
            dh.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (v.startsWith(d, "data:") || v.startsWith(d, "blob:")) {
                wc.renderCanvas(c, b);
              } else {
                wc.renderImage(c, b);
              }
            } else {
              wc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            wc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      ce.renderDrawableClear = function (a, b) {
        ce.clear(a, b);
      };
      function sm() {}
      h["openfl.display._internal.DOMDisplayObjectContainer"] = sm;
      sm.__name__ = "openfl.display._internal.DOMDisplayObjectContainer";
      sm.renderDrawable = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            b.__renderDrawable(d);
          }
        }
        for (c = a.__removedChildren.iterator(); c.hasNext();) {
          d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        ce.renderDrawable(a, b);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          b.__pushMaskObject(a);
          if (b.__stage != null) {
            c = 0;
            for (d = a.__children; c < d.length;) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
              e.__renderDirty = false;
            }
            a.__renderDirty = false;
          } else {
            c = 0;
            d = a.__children;
            while (c < d.length) {
              e = d[c];
              ++c;
              b.__renderDrawable(e);
            }
          }
          b.__popMaskObject(a);
        } else {
          c = 0;
          for (d = a.__children; c < d.length;) {
            var e = d[c];
            ++c;
            b.__renderDrawableClear(e);
          }
          dh.clear(a, b);
          a.__cacheBitmap.stage = a.stage;
        }
      };
      sm.renderDrawableClear = function (a, b) {
        for (var c = a.__removedChildren.iterator(); c.hasNext();) {
          var d = c.next();
          if (d.stage == null) {
            b.__renderDrawableClear(d);
          }
        }
        for (c = a.__removedChildren.iterator(); c.hasNext();) {
          d = c.next();
          if (d.stage == null) {
            d.__cleanup();
          }
        }
        a.__removedChildren.set_length(0);
        c = 0;
        for (d = a.__children; c < d.length;) {
          var e = d[c];
          ++c;
          b.__renderDrawableClear(e);
        }
        ce.clear(a, b);
      };
      function dh() {}
      h["openfl.display._internal.DOMShape"] = dh;
      dh.__name__ = "openfl.display._internal.DOMShape";
      dh.clear = function (a, b) {
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      function tm() {}
      h["openfl.display._internal.DOMSimpleButton"] = tm;
      tm.__name__ = "openfl.display._internal.DOMSimpleButton";
      tm.renderDrawable = function (a, b) {
        b.__pushMaskObject(a);
        for (var c = a.__previousStates.iterator(); c.hasNext();) {
          var d = c.next();
          b.__renderDrawable(d);
        }
        a.__previousStates.set_length(0);
        if (a.__currentState != null) {
          if (a.__currentState.stage != a.stage) {
            a.__currentState.__setStageReference(a.stage);
          }
          b.__renderDrawable(a.__currentState);
        }
        b.__popMaskObject(a);
        b.__renderEvent(a);
      };
      tm.renderDrawableClear = function (a, b) {
        ce.renderDrawableClear(a, b);
      };
      function bh() {}
      h["openfl.display._internal.DOMTextField"] = bh;
      bh.__name__ = "openfl.display._internal.DOMTextField";
      bh.clear = function (a, b) {
        ce.clear(a, b);
        if (a.__div != null) {
          b.element.removeChild(a.__div);
          a.__div = null;
          a.__style = null;
        }
      };
      bh.renderDrawable = function (a, b) {
        a.__domRender = true;
        b.__updateCacheBitmap(a, a.__forceCachedBitmapUpdate);
        a.__forceCachedBitmapUpdate = false;
        a.__domRender = false;
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.__renderedOnCanvasWhileOnDOM) {
            a.__renderedOnCanvasWhileOnDOM = false;
            if (a.__isHTML && a.__htmlText != null) {
              a.__updateText(a.__htmlText);
              a.__dirty = true;
              a.__layoutDirty = true;
              if (!a.__renderDirty) {
                a.__renderDirty = true;
                a.__setParentRenderDirty();
              }
            }
          }
          var c = a.__textEngine;
          if (a.stage != null && a.__worldVisible && a.__renderable) {
            if (a.__dirty || a.__renderTransformChanged || a.__div == null) {
              if (c.text != "" || c.background || c.border || c.type == 1) {
                a.__updateLayout();
                if (a.__div == null) {
                  a.__div = window.document.createElement("div");
                  b.__initializeElement(a, a.__div);
                  a.__style.setProperty("outline", "none", null);
                  a.__div.addEventListener("input", function (b) {
                    b.preventDefault();
                    if (a.get_htmlText() != a.__div.innerHTML) {
                      a.set_htmlText(a.__div.innerHTML);
                      a.__dirty = false;
                      a.dispatchEvent(new Uf("textInput", false, false, a.get_htmlText()));
                    }
                  }, true);
                }
                if (c.wordWrap) {
                  a.__style.setProperty("word-wrap", "break-word", null);
                } else {
                  a.__style.setProperty("white-space", "nowrap", null);
                }
                a.__style.setProperty("overflow", "hidden", null);
                if (c.selectable) {
                  a.__style.setProperty("cursor", "text", null);
                  a.__style.setProperty("-webkit-user-select", "text", null);
                  a.__style.setProperty("-moz-user-select", "text", null);
                  a.__style.setProperty("-ms-user-select", "text", null);
                  a.__style.setProperty("-o-user-select", "text", null);
                } else {
                  a.__style.setProperty("cursor", "inherit", null);
                }
                a.__div.contentEditable = c.type == 1;
                var d = a.__style;
                if (c.background) {
                  d.setProperty("background-color", "#" + v.hex(c.backgroundColor & 16777215, 6), null);
                } else {
                  d.removeProperty("background-color");
                }
                var e = c.width;
                var f = c.height;
                var k = "";
                if (a.__isHTML) {
                  a.__updateText(Za.parse(a.__text, a.get_multiline(), a.__styleSheet, a.__textFormat, a.__textEngine.textFormatRanges));
                }
                var g = -a.get_scrollH();
                for (var l = c.layoutGroups.iterator(); l.hasNext();) {
                  var h = l.next();
                  if (!(h.lineIndex < a.get_scrollV() - 1)) {
                    if (h.lineIndex > c.get_bottomScrollV() - 1) {
                      break;
                    }
                    k += "<div style=\"";
                    if (h.format.font != null) {
                      k += "font: " + ic.getFont(h.format) + "; ";
                    }
                    if (h.format.color != null) {
                      k += "color: #" + v.hex(h.format.color & 16777215, 6) + "; ";
                    }
                    if (h.format.underline == 1) {
                      k += "text-decoration: underline; ";
                    }
                    if (h.format.align != null) {
                      switch (h.format.align) {
                        case 0:
                          k += "text-align: center; ";
                          break;
                        case 2:
                          k += "text-align: justify; ";
                          break;
                        case 4:
                          k += "text-align: right; ";
                          break;
                        default:
                          k += "text-align: left; ";
                      }
                    }
                    if (h.format.leftMargin != null) {
                      k += "padding-left: " + h.format.leftMargin * 1 + "px; ";
                    }
                    if (h.format.rightMargin != null) {
                      k += "padding-right: " + h.format.rightMargin * 1 + "px; ";
                    }
                    if (h.format.indent != null) {
                      k += "text-indent: " + h.format.indent * 1 + "px; ";
                    }
                    k += "left: " + (h.offsetX + g) + "px; top: " + (h.offsetY + 0 + 3) + "px; vertical-align: top; position: absolute;\">";
                    if (h.format.url != null && h.format.url != "") {
                      var p = "text-decoration: underline; ";
                      if (h.format.color != null) {
                        p += "color: #" + v.hex(h.format.color & 16777215, 6) + "; ";
                      }
                      k += "<a style='" + p + "' href='" + h.format.url + "' target='" + h.format.target + "'>";
                    }
                    k = a.__isHTML ? k + v.replace(c.text.substring(h.startIndex, h.endIndex), " ", "&nbsp;") : k + v.replace(v.htmlEscape(c.text.substring(h.startIndex, h.endIndex)), " ", "&nbsp;");
                    if (h.format.url != null && h.format.url != "") {
                      k += "</a>";
                    }
                    k += "</div>";
                  }
                }
                if (c.border) {
                  d.setProperty("border", "solid 1px #" + v.hex(c.borderColor & 16777215, 6), null);
                  a.__renderTransform.translate(-1, -1);
                  a.__renderTransformChanged = true;
                  a.__transformDirty = true;
                } else if (d.border != "") {
                  d.removeProperty("border");
                  a.__renderTransformChanged = true;
                }
                d.setProperty("width", e + "px", null);
                d.setProperty("height", f + "px", null);
                a.__div.innerHTML = k;
                a.__dirty = false;
              } else if (a.__div != null) {
                b.element.removeChild(a.__div);
                a.__div = null;
              }
            }
            if (a.__div != null) {
              c = b.__roundPixels;
              b.__roundPixels = true;
              b.__updateClip(a);
              b.__applyStyle(a, true, true, true);
              b.__roundPixels = c;
            }
          } else {
            bh.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (v.startsWith(d, "data:") || v.startsWith(d, "blob:")) {
                wc.renderCanvas(c, b);
              } else {
                wc.renderImage(c, b);
              }
            } else {
              wc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            wc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      bh.renderDrawableClear = function (a, b) {
        bh.clear(a, b);
      };
      function ch() {}
      h["openfl.display._internal.DOMTilemap"] = ch;
      ch.__name__ = "openfl.display._internal.DOMTilemap";
      ch.clear = function (a, b) {
        ce.clear(a, b);
        if (a.__canvas != null) {
          b.element.removeChild(a.__canvas);
          a.__canvas = null;
          a.__style = null;
        }
      };
      ch.renderDrawable = function (a, b) {
        b.__updateCacheBitmap(a, false);
        if (a.__cacheBitmap == null || a.__isCacheBitmapRender) {
          if (a.stage != null && a.__worldVisible && a.__renderable && a.__group.__tiles.length > 0) {
            if (a.__canvas == null) {
              a.__canvas = window.document.createElement("canvas");
              a.__context = a.__canvas.getContext("2d");
              b.__initializeElement(a, a.__canvas);
            }
            a.__canvas.width = a.__width;
            a.__canvas.height = a.__height;
            b.__canvasRenderer.context = a.__context;
            var c = a.__renderTransform;
            a.__renderTransform = ya.__identity;
            var d = b.__canvasRenderer;
            if ((a.opaqueBackground != null || a.__graphics != null) && a.__renderable) {
              var e = d.__getAlpha(a.__worldAlpha);
              if (!(e <= 0)) {
                if (a.opaqueBackground != null && !a.__isCacheBitmapRender && a.get_width() > 0 && a.get_height() > 0) {
                  d.__setBlendMode(a.__worldBlendMode);
                  d.__pushMaskObject(a);
                  var f = d.context;
                  d.setTransform(a.__renderTransform, f);
                  var k = a.opaqueBackground;
                  f.fillStyle = "rgb(" + (k >>> 16 & 255) + "," + (k >>> 8 & 255) + "," + (k & 255) + ")";
                  f.fillRect(0, 0, a.get_width(), a.get_height());
                  d.__popMaskObject(a);
                }
                if (a.__graphics != null && a.__renderable && (e = d.__getAlpha(a.__worldAlpha), !(e <= 0))) {
                  var g = a.__graphics;
                  if (g != null) {
                    A.render(g, d);
                    var l = g.__width;
                    var h = g.__height;
                    k = g.__canvas;
                    if (k != null && g.__visible && l >= 1 && h >= 1) {
                      var p = g.__worldTransform;
                      f = d.context;
                      var m = a.__scrollRect;
                      var n = a.__worldScale9Grid;
                      if (m == null || m.width > 0 && m.height > 0) {
                        d.__setBlendMode(a.__worldBlendMode);
                        d.__pushMaskObject(a);
                        f.globalAlpha = e;
                        if (n != null && p.b == 0 && p.c == 0) {
                          var r = d.__pixelRatio;
                          e = ya.__pool.get();
                          e.translate(p.tx, p.ty);
                          d.setTransform(e, f);
                          ya.__pool.release(e);
                          e = g.__bounds;
                          var q = g.__renderTransform.a / g.__bitmapScale;
                          var w = g.__renderTransform.d / g.__bitmapScale;
                          var u = q * p.a;
                          var y = w * p.d;
                          p = Math.max(1, Math.round(n.x * q));
                          g = Math.round(n.y * w);
                          m = Math.max(1, Math.round((e.get_right() - n.get_right()) * q));
                          var z = Math.round((e.get_bottom() - n.get_bottom()) * w);
                          q = Math.round(n.width * q);
                          n = Math.round(n.height * w);
                          w = Math.round(p / r);
                          var Y = Math.round(g / r);
                          var C = Math.round(m / r);
                          r = Math.round(z / r);
                          u = e.width * u - w - C;
                          e = e.height * y - Y - r;
                          d.applySmoothing(f, false);
                          if (q != 0 && n != 0) {
                            f.drawImage(k, 0, 0, p, g, 0, 0, w, Y);
                            f.drawImage(k, p, 0, q, g, w, 0, u, Y);
                            f.drawImage(k, p + q, 0, m, g, w + u, 0, C, Y);
                            f.drawImage(k, 0, g, p, n, 0, Y, w, e);
                            f.drawImage(k, p, g, q, n, w, Y, u, e);
                            f.drawImage(k, p + q, g, m, n, w + u, Y, C, e);
                            f.drawImage(k, 0, g + n, p, z, 0, Y + e, w, r);
                            f.drawImage(k, p, g + n, q, z, w, Y + e, u, r);
                            f.drawImage(k, p + q, g + n, m, z, w + u, Y + e, C, r);
                          } else if (q == 0 && n != 0) {
                            h = w + u + C;
                            f.drawImage(k, 0, 0, l, g, 0, 0, h, Y);
                            f.drawImage(k, 0, g, l, n, 0, Y, h, e);
                            f.drawImage(k, 0, g + n, l, z, 0, Y + e, h, r);
                          } else if (n == 0 && q != 0) {
                            l = Y + e + r;
                            f.drawImage(k, 0, 0, p, h, 0, 0, w, l);
                            f.drawImage(k, p, 0, q, h, w, 0, u, l);
                            f.drawImage(k, p + q, 0, m, h, w + u, 0, C, l);
                          }
                        } else {
                          d.setTransform(p, f);
                          f.drawImage(k, 0, 0, l, h);
                        }
                        d.__popMaskObject(a);
                      }
                    }
                  }
                }
              }
            }
            d = b.__canvasRenderer;
            if (a.__renderable && a.__group.__tiles.length != 0) {
              e = d.__getAlpha(a.__worldAlpha);
              if (!(e <= 0)) {
                f = d.context;
                d.__setBlendMode(a.__worldBlendMode);
                d.__pushMaskObject(a);
                k = ba.__pool.get();
                k.setTo(0, 0, a.__width, a.__height);
                d.__pushMaskRect(k, a.__renderTransform);
                if (!d.__allowSmoothing || !a.smoothing) {
                  f.imageSmoothingEnabled = false;
                }
                zg.renderTileContainer(a.__group, d, a.__renderTransform, a.__tileset, d.__allowSmoothing && a.smoothing, a.tileAlphaEnabled, e, a.tileBlendModeEnabled, a.__worldBlendMode, null, null, k);
                if (!d.__allowSmoothing || !a.smoothing) {
                  f.imageSmoothingEnabled = true;
                }
                d.__popMaskRect();
                d.__popMaskObject(a);
                ba.__pool.release(k);
              }
            }
            a.__renderTransform = c;
            b.__canvasRenderer.context = null;
            b.__updateClip(a);
            b.__applyStyle(a, true, false, true);
          } else {
            ch.clear(a, b);
          }
        } else {
          b.__renderDrawableClear(a);
          a.__cacheBitmap.stage = a.stage;
          c = a.__cacheBitmap;
          if (c.stage != null && c.__worldVisible && c.__renderable && c.__bitmapData != null && c.__bitmapData.__isValid && c.__bitmapData.readable) {
            b.__pushMaskObject(c);
            if (c.__bitmapData.image.buffer.__srcImage != null) {
              d = c.__bitmapData.image.buffer.__srcImage.src;
              if (v.startsWith(d, "data:") || v.startsWith(d, "blob:")) {
                wc.renderCanvas(c, b);
              } else {
                wc.renderImage(c, b);
              }
            } else {
              wc.renderCanvas(c, b);
            }
            b.__popMaskObject(c);
          } else {
            wc.clear(c, b);
          }
        }
        b.__renderEvent(a);
      };
      ch.renderDrawableClear = function (a, b) {
        ch.clear(a, b);
      };
      function Ag() {}
      h["openfl.display._internal.DOMVideo"] = Ag;
      Ag.__name__ = "openfl.display._internal.DOMVideo";
      Ag.clear = function (a, b) {
        ce.clear(a, b);
        if (a.__active) {
          b.element.removeChild(a.__stream.__video);
          a.__active = false;
        }
      };
      Ag.render = function (a, b) {
        if (a.stage != null && a.__stream != null && a.__worldVisible && a.__renderable) {
          if (!a.__active) {
            b.__initializeElement(a, a.__stream.__video);
            a.__active = true;
            a.__dirty = true;
          }
          if (a.__dirty) {
            a.__stream.__video.width = a.__width | 0;
            a.__stream.__video.height = a.__height | 0;
            a.__dirty = false;
          }
          b.__updateClip(a);
          b.__applyStyle(a, true, true, true);
        } else {
          Ag.clear(a, b);
        }
      };
      Ag.renderDrawable = function (a, b) {
        Ag.render(a, b);
        b.__renderEvent(a);
      };
      Ag.renderDrawableClear = function (a, b) {
        ce.renderDrawableClear(a, b);
      };
      function $f(a) {
        this.buffer = a;
        this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
        this.prev = pa.UNKNOWN;
      }
      h["openfl.display._internal.DrawCommandReader"] = $f;
      $f.__name__ = "openfl.display._internal.DrawCommandReader";
      $f.prototype = {
        destroy: function () {
          this.buffer = null;
          this.reset();
        },
        reset: function () {
          this.bPos = this.iPos = this.fPos = this.oPos = this.ffPos = this.iiPos = this.tsPos = 0;
        },
        __class__: $f
      };
      var pa = w["openfl.display._internal.DrawCommandType"] = {
        __ename__: "openfl.display._internal.DrawCommandType",
        __constructs__: null,
        BEGIN_BITMAP_FILL: {
          _hx_name: "BEGIN_BITMAP_FILL",
          _hx_index: 0,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_FILL: {
          _hx_name: "BEGIN_FILL",
          _hx_index: 1,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_GRADIENT_FILL: {
          _hx_name: "BEGIN_GRADIENT_FILL",
          _hx_index: 2,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        BEGIN_SHADER_FILL: {
          _hx_name: "BEGIN_SHADER_FILL",
          _hx_index: 3,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        CUBIC_CURVE_TO: {
          _hx_name: "CUBIC_CURVE_TO",
          _hx_index: 4,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        CURVE_TO: {
          _hx_name: "CURVE_TO",
          _hx_index: 5,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_CIRCLE: {
          _hx_name: "DRAW_CIRCLE",
          _hx_index: 6,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_ELLIPSE: {
          _hx_name: "DRAW_ELLIPSE",
          _hx_index: 7,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_QUADS: {
          _hx_name: "DRAW_QUADS",
          _hx_index: 8,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_RECT: {
          _hx_name: "DRAW_RECT",
          _hx_index: 9,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_ROUND_RECT: {
          _hx_name: "DRAW_ROUND_RECT",
          _hx_index: 10,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_TILES: {
          _hx_name: "DRAW_TILES",
          _hx_index: 11,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        DRAW_TRIANGLES: {
          _hx_name: "DRAW_TRIANGLES",
          _hx_index: 12,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        END_FILL: {
          _hx_name: "END_FILL",
          _hx_index: 13,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_BITMAP_STYLE: {
          _hx_name: "LINE_BITMAP_STYLE",
          _hx_index: 14,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_GRADIENT_STYLE: {
          _hx_name: "LINE_GRADIENT_STYLE",
          _hx_index: 15,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_STYLE: {
          _hx_name: "LINE_STYLE",
          _hx_index: 16,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        LINE_TO: {
          _hx_name: "LINE_TO",
          _hx_index: 17,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        MOVE_TO: {
          _hx_name: "MOVE_TO",
          _hx_index: 18,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        OVERRIDE_BLEND_MODE: {
          _hx_name: "OVERRIDE_BLEND_MODE",
          _hx_index: 19,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        OVERRIDE_MATRIX: {
          _hx_name: "OVERRIDE_MATRIX",
          _hx_index: 20,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        WINDING_EVEN_ODD: {
          _hx_name: "WINDING_EVEN_ODD",
          _hx_index: 21,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        WINDING_NON_ZERO: {
          _hx_name: "WINDING_NON_ZERO",
          _hx_index: 22,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        },
        UNKNOWN: {
          _hx_name: "UNKNOWN",
          _hx_index: 23,
          __enum__: "openfl.display._internal.DrawCommandType",
          toString: p
        }
      };
      pa.__constructs__ = [pa.BEGIN_BITMAP_FILL, pa.BEGIN_FILL, pa.BEGIN_GRADIENT_FILL, pa.BEGIN_SHADER_FILL, pa.CUBIC_CURVE_TO, pa.CURVE_TO, pa.DRAW_CIRCLE, pa.DRAW_ELLIPSE, pa.DRAW_QUADS, pa.DRAW_RECT, pa.DRAW_ROUND_RECT, pa.DRAW_TILES, pa.DRAW_TRIANGLES, pa.END_FILL, pa.LINE_BITMAP_STYLE, pa.LINE_GRADIENT_STYLE, pa.LINE_STYLE, pa.LINE_TO, pa.MOVE_TO, pa.OVERRIDE_BLEND_MODE, pa.OVERRIDE_MATRIX, pa.WINDING_EVEN_ODD, pa.WINDING_NON_ZERO, pa.UNKNOWN];
      function Nh(a, b, c, d, e, f, k) {
        if (k == null) {
          k = false;
        }
        if (f == null) {
          f = false;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 2;
        }
        if (b == null) {
          b = 5;
        }
        if (a == null) {
          a = 0;
        }
        this.wrap = a;
        this.filter = b;
        this.mipfilter = c;
        this.lodBias = d;
        this.ignoreSampler = e;
        this.centroid = f;
        this.textureAlpha = k;
      }
      h["openfl.display._internal.SamplerState"] = Nh;
      Nh.__name__ = "openfl.display._internal.SamplerState";
      Nh.prototype = {
        clone: function () {
          var a = new Nh(this.wrap, this.filter, this.mipfilter, this.lodBias, this.ignoreSampler, this.centroid, this.textureAlpha);
          a.mipmapGenerated = this.mipmapGenerated;
          return a;
        },
        copyFrom: function (a) {
          if (a != null && !a.ignoreSampler) {
            this.wrap = a.wrap;
            this.filter = a.filter;
            this.mipfilter = a.mipfilter;
            this.lodBias = a.lodBias;
            this.centroid = a.centroid;
            this.textureAlpha = a.textureAlpha;
          }
        },
        equals: function (a) {
          if (a == null) {
            return false;
          } else if (this.wrap == a.wrap && this.filter == a.filter && this.mipfilter == a.mipfilter && this.lodBias == a.lodBias) {
            return this.textureAlpha == a.textureAlpha;
          } else {
            return false;
          }
        },
        __class__: Nh
      };
      function vm() {
        this.inputRefs = [];
        this.inputFilter = [];
        this.inputMipFilter = [];
        this.inputs = [];
        this.inputWrap = [];
        this.overrideIntNames = [];
        this.overrideIntValues = [];
        this.overrideFloatNames = [];
        this.overrideFloatValues = [];
        this.overrideBoolNames = [];
        this.overrideBoolValues = [];
        this.paramLengths = [];
        this.paramPositions = [];
        this.paramRefs_Bool = [];
        this.paramRefs_Float = [];
        this.paramRefs_Int = [];
        this.paramTypes = [];
      }
      h["openfl.display._internal.ShaderBuffer"] = vm;
      vm.__name__ = "openfl.display._internal.ShaderBuffer";
      vm.prototype = {
        addBoolOverride: function (a, b) {
          this.overrideBoolNames[this.overrideBoolCount] = a;
          this.overrideBoolValues[this.overrideBoolCount] = b;
          this.overrideBoolCount++;
        },
        addFloatOverride: function (a, b) {
          this.overrideFloatNames[this.overrideFloatCount] = a;
          this.overrideFloatValues[this.overrideFloatCount] = b;
          this.overrideFloatCount++;
        },
        clearOverride: function () {
          this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = 0;
        },
        update: function (a) {
          this.paramIntCount = this.paramFloatCount = this.paramDataLength = this.paramCount = this.paramBoolCount = this.overrideBoolCount = this.overrideFloatCount = this.overrideIntCount = this.inputCount = 0;
          this.shader = null;
          if (a != null) {
            a.__init();
            this.inputCount = a.__inputBitmapData.length;
            var b;
            for (var c = 0, d = this.inputCount; c < d;) {
              var e = c++;
              b = a.__inputBitmapData[e];
              this.inputs[e] = b.input;
              this.inputFilter[e] = b.filter;
              this.inputMipFilter[e] = b.mipFilter;
              this.inputRefs[e] = b;
              this.inputWrap[e] = b.wrap;
            }
            b = a.__paramBool.length;
            var f = a.__paramFloat.length;
            var k = a.__paramInt.length;
            this.paramCount = b + f + k;
            this.paramBoolCount = b;
            this.paramFloatCount = f;
            this.paramIntCount = k;
            var g = 0;
            c = 0;
            for (d = b; c < d;) {
              e = c++;
              var l = a.__paramBool[e];
              this.paramPositions[g] = this.paramDataLength;
              var h = l.value != null ? l.value.length : 0;
              this.paramLengths[g] = h;
              this.paramDataLength += h;
              this.paramTypes[g] = 0;
              this.paramRefs_Bool[e] = l;
              ++g;
            }
            c = 0;
            for (d = f; c < d;) {
              e = c++;
              l = a.__paramFloat[e];
              this.paramPositions[g] = this.paramDataLength;
              h = l.value != null ? l.value.length : 0;
              this.paramLengths[g] = h;
              this.paramDataLength += h;
              this.paramTypes[g] = 1;
              this.paramRefs_Float[e] = l;
              ++g;
            }
            c = 0;
            for (d = k; c < d;) {
              e = c++;
              l = a.__paramInt[e];
              this.paramPositions[g] = this.paramDataLength;
              h = l.value != null ? l.value.length : 0;
              this.paramLengths[g] = h;
              this.paramDataLength += h;
              this.paramTypes[g] = 2;
              this.paramRefs_Int[e] = l;
              ++g;
            }
            if (this.paramDataLength > 0) {
              if (this.paramData == null) {
                c = this.paramDataLength;
                var p = l = g = k = d = null;
                this.paramData = c = c != null ? new Float32Array(c) : d != null ? new Float32Array(d) : k != null ? new Float32Array(k.__array) : g != null ? new Float32Array(g) : l != null ? p == null ? new Float32Array(l, 0) : new Float32Array(l, 0, p) : null;
              } else if (this.paramDataLength > this.paramData.length) {
                c = this.paramDataLength;
                p = l = g = k = d = null;
                c = c != null ? new Float32Array(c) : d != null ? new Float32Array(d) : k != null ? new Float32Array(k.__array) : g != null ? new Float32Array(g) : l != null ? p == null ? new Float32Array(l, 0) : new Float32Array(l, 0, p) : null;
                c.set(this.paramData);
                this.paramData = c;
              }
            }
            c = p = l = g = k = 0;
            for (d = this.paramCount; c < d;) {
              e = c++;
              h = this.paramLengths[e];
              if (e < b) {
                e = this.paramRefs_Bool[k];
                ++k;
                for (var m = 0; m < h;) {
                  var n = m++;
                  this.paramData[p] = e.value[n] ? 1 : 0;
                  ++p;
                }
              } else if (e < b + f) {
                e = this.paramRefs_Float[g];
                ++g;
                m = 0;
                while (m < h) {
                  n = m++;
                  this.paramData[p] = e.value[n];
                  ++p;
                }
              } else {
                e = this.paramRefs_Int[l];
                ++l;
                m = 0;
                while (m < h) {
                  n = m++;
                  this.paramData[p] = e.value[n];
                  ++p;
                }
              }
            }
            this.shader = a;
          }
        },
        __class__: vm
      };
      function Kb(a, b, c) {
        this.driverInfo = "OpenGL (Direct blitting)";
        this.backBufferHeight = this.backBufferWidth = 0;
        va.call(this);
        this.__stage = a;
        this.__contextState = b;
        this.__stage3D = c;
        this.__context = a.window.context;
        this.gl = this.__context.webgl;
        if (this.__contextState == null) {
          this.__contextState = new Wj();
        }
        this.__state = new Wj();
        var d;
        this.__vertexConstants = new Float32Array(512);
        this.__fragmentConstants = new Float32Array(512);
        var e = null;
        a = [1, 1, 1, 1];
        var f = d = c = b = null;
        this.__positionScale = a = e != null ? new Float32Array(e) : a != null ? new Float32Array(a) : b != null ? new Float32Array(b.__array) : c != null ? new Float32Array(c) : d != null ? f == null ? new Float32Array(d, 0) : new Float32Array(d, 0, f) : null;
        this.__programs = new xa();
        if (Kb.__glMaxViewportDims == -1) {
          Kb.__glMaxViewportDims = this.gl.getParameter(this.gl.MAX_VIEWPORT_DIMS);
        }
        this.maxBackBufferHeight = this.maxBackBufferWidth = Kb.__glMaxViewportDims;
        if (Kb.__glMaxTextureMaxAnisotropy == -1) {
          a = this.gl.getExtension("EXT_texture_filter_anisotropic");
          if (a == null || !Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT")) {
            a = this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic");
          }
          if (a == null || !Object.prototype.hasOwnProperty.call(a, "MAX_TEXTURE_MAX_ANISOTROPY_EXT")) {
            a = this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
          }
          if (a != null) {
            Kb.__glTextureMaxAnisotropy = a.TEXTURE_MAX_ANISOTROPY_EXT;
            Kb.__glMaxTextureMaxAnisotropy = this.gl.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT);
          } else {
            Kb.__glTextureMaxAnisotropy = 0;
            Kb.__glMaxTextureMaxAnisotropy = 0;
          }
        }
        if (Kb.__glDepthStencil == -1) {
          Kb.__glDepthStencil = this.gl.DEPTH_STENCIL;
        }
        if (Kb.__glMemoryTotalAvailable == -1) {
          a = this.gl.getExtension("NVX_gpu_memory_info");
          if (a != null) {
            Kb.__glMemoryTotalAvailable = a.GPU_MEMORY_INFO_DEDICATED_VIDMEM_NVX;
            Kb.__glMemoryCurrentAvailable = a.GPU_MEMORY_INFO_CURRENT_AVAILABLE_VIDMEM_NVX;
          }
        }
        if (Kb.__driverInfo == null) {
          a = this.gl.getParameter(this.gl.VENDOR);
          b = this.gl.getParameter(this.gl.VERSION);
          c = this.gl.getParameter(this.gl.RENDERER);
          d = this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION);
          Kb.__driverInfo = "OpenGL Vendor=" + a + " Version=" + b + " Renderer=" + c + " GLSL=" + d;
        }
        this.driverInfo = Kb.__driverInfo;
        this.__quadIndexBufferElements = 16383;
        e = this.__quadIndexBufferCount = this.__quadIndexBufferElements * 6;
        f = d = c = b = a = null;
        a = e != null ? new Uint16Array(e) : a != null ? new Uint16Array(a) : b != null ? new Uint16Array(b.__array) : c != null ? new Uint16Array(c) : d != null ? f == null ? new Uint16Array(d, 0) : new Uint16Array(d, 0, f) : null;
        d = c = b = 0;
        for (f = this.__quadIndexBufferElements; d < f;) {
          d++;
          a[b] = c;
          a[b + 1] = c + 1;
          a[b + 2] = c + 2;
          a[b + 3] = c + 2;
          a[b + 4] = c + 1;
          a[b + 5] = c + 3;
          b += 6;
          c += 4;
        }
        this.__quadIndexBuffer = this.createIndexBuffer(this.__quadIndexBufferCount);
        this.__quadIndexBuffer.uploadFromTypedArray(a);
      }
      h["openfl.display3D.Context3D"] = Kb;
      Kb.__name__ = "openfl.display3D.Context3D";
      Kb.__super__ = va;
      Kb.prototype = q(va.prototype, {
        clear: function (a, b, c, d, e, f, k) {
          if (k == null) {
            k = 7;
          }
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 1;
          }
          if (d == null) {
            d = 1;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          this.__flushGLFramebuffer();
          this.__flushGLViewport();
          var g = 0;
          if ((k & 1) != 0) {
            if (this.__state.renderToTexture == null) {
              if (this.__stage.context3D == this && !this.__stage.__renderer.__cleared) {
                this.__stage.__renderer.__cleared = true;
              }
              this.__cleared = true;
            }
            g |= this.gl.COLOR_BUFFER_BIT;
            if (this.__contextState.colorMaskRed != 1 || this.__contextState.colorMaskGreen != 1 || this.__contextState.colorMaskBlue != 1 || this.__contextState.colorMaskAlpha != 1) {
              this.gl.colorMask(true, true, true, true);
              this.__contextState.colorMaskRed = true;
              this.__contextState.colorMaskGreen = true;
              this.__contextState.colorMaskBlue = true;
              this.__contextState.colorMaskAlpha = true;
            }
            this.gl.clearColor(a, b, c, d);
          }
          if ((k & 2) != 0) {
            g |= this.gl.DEPTH_BUFFER_BIT;
            if (this.__contextState.depthMask != 1) {
              this.gl.depthMask(true);
              this.__contextState.depthMask = true;
            }
            this.gl.clearDepth(e);
          }
          if ((k & 4) != 0) {
            g |= this.gl.STENCIL_BUFFER_BIT;
            if (this.__contextState.stencilWriteMask != 255) {
              this.gl.stencilMask(255);
              this.__contextState.stencilWriteMask = 255;
            }
            this.gl.clearStencil(f);
            this.__contextState.stencilWriteMask = 255;
          }
          if (g != 0) {
            this.__setGLScissorTest(false);
            this.gl.clear(g);
          }
        },
        configureBackBuffer: function (a, b, c, d, e, f) {
          if (f == null) {
            f = false;
          }
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = true;
          }
          if (e) {
            a = a * this.__stage.window.__scale | 0;
            b = b * this.__stage.window.__scale | 0;
          }
          if (this.__stage3D == null) {
            this.backBufferWidth = a;
            this.backBufferHeight = b;
            this.__backBufferAntiAlias = c;
            this.__state.backBufferEnableDepthAndStencil = d;
            this.__backBufferWantsBestResolution = e;
            this.__backBufferWantsBestResolutionOnBrowserZoom = f;
          } else {
            if (this.__backBufferTexture == null || this.backBufferWidth != a || this.backBufferHeight != b) {
              if (this.__backBufferTexture != null) {
                this.__backBufferTexture.dispose();
              }
              if (this.__frontBufferTexture != null) {
                this.__frontBufferTexture.dispose();
              }
              this.__backBufferTexture = this.createRectangleTexture(a, b, 1, true);
              this.__frontBufferTexture = this.createRectangleTexture(a, b, 1, true);
              if (this.__stage3D.__vertexBuffer == null) {
                this.__stage3D.__vertexBuffer = this.createVertexBuffer(4, 5);
              }
              var k = e ? a : a * this.__stage.window.__scale | 0;
              var g = e ? b : b * this.__stage.window.__scale | 0;
              k = kb.toFloatVector(null, null, null, [k, g, 0, 1, 1, 0, g, 0, 0, 1, k, 0, 0, 1, 0, 0, 0, 0, 0, 0]);
              this.__stage3D.__vertexBuffer.uploadFromVector(k, 0, 20);
              if (this.__stage3D.__indexBuffer == null) {
                this.__stage3D.__indexBuffer = this.createIndexBuffer(6);
                k = kb.toIntVector(null, null, null, [0, 1, 2, 2, 1, 3]);
                this.__stage3D.__indexBuffer.uploadFromVector(k, 0, 6);
              }
            }
            this.backBufferWidth = a;
            this.backBufferHeight = b;
            this.__backBufferAntiAlias = c;
            this.__state.backBufferEnableDepthAndStencil = d;
            this.__backBufferWantsBestResolution = e;
            this.__backBufferWantsBestResolutionOnBrowserZoom = f;
            this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(d, c, 0);
            this.__frontBufferTexture.__getGLFramebuffer(d, c, 0);
          }
        },
        createIndexBuffer: function (a, b) {
          if (b == null) {
            b = 1;
          }
          return new Mo(this, a, b);
        },
        createProgram: function (a) {
          if (a == null) {
            a = 0;
          }
          return new No(this, a);
        },
        createRectangleTexture: function (a, b, c, d) {
          return new Xj(this, a, b, Vp.toString(c), d);
        },
        createVertexBuffer: function (a, b, c) {
          if (c == null) {
            c = 1;
          }
          return new Oo(this, a, b, Bp.toString(c));
        },
        drawTriangles: function (a, b, c) {
          if (c == null) {
            c = -1;
          }
          if (b == null) {
            b = 0;
          }
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D != this || this.__stage.__renderer.__cleared) {
              if (!this.__cleared) {
                this.clear(0, 0, 0, 0, 1, 0, 1);
              }
            } else {
              this.__stage.__renderer.__clear();
            }
          }
          this.__flushGL();
          if (this.__state.program != null) {
            this.__state.program.__flush();
          }
          c = c == -1 ? a.__numIndices : c * 3;
          this.__bindGLElementArrayBuffer(a.__id);
          this.gl.drawElements(this.gl.TRIANGLES, c, this.gl.UNSIGNED_SHORT, b * 2);
        },
        present: function () {
          this.setRenderToBackBuffer();
          if (this.__stage3D != null && this.__backBufferTexture != null) {
            if (!this.__cleared) {
              this.clear(0, 0, 0, 0, 1, 0, 1);
            }
            var a = this.__backBufferTexture;
            this.__backBufferTexture = this.__frontBufferTexture;
            this.__frontBufferTexture = a;
            this.__state.__primaryGLFramebuffer = this.__backBufferTexture.__getGLFramebuffer(this.__state.backBufferEnableDepthAndStencil, this.__backBufferAntiAlias, 0);
            this.__cleared = false;
          }
          this.__present = true;
        },
        setBlendFactors: function (a, b) {
          this.setBlendFactorsSeparate(a, b, a, b);
        },
        setBlendFactorsSeparate: function (a, b, c, d) {
          this.__state.blendSourceRGBFactor = a;
          this.__state.blendDestinationRGBFactor = b;
          this.__state.blendSourceAlphaFactor = c;
          this.__state.blendDestinationAlphaFactor = d;
          this.__setGLBlendEquation(this.gl.FUNC_ADD);
        },
        setColorMask: function (a, b, c, d) {
          this.__state.colorMaskRed = a;
          this.__state.colorMaskGreen = b;
          this.__state.colorMaskBlue = c;
          this.__state.colorMaskAlpha = d;
        },
        setCulling: function (a) {
          this.__state.culling = a;
        },
        setDepthTest: function (a, b) {
          this.__state.depthMask = a;
          this.__state.depthCompareMode = b;
        },
        setProgram: function (a) {
          this.__state.program = a;
          this.__state.shader = null;
          if (a != null) {
            for (var b = 0, c = a.__samplerStates.length; b < c;) {
              var d = b++;
              if (this.__state.samplerStates[d] == null) {
                this.__state.samplerStates[d] = a.__samplerStates[d].clone();
              } else {
                this.__state.samplerStates[d].copyFrom(a.__samplerStates[d]);
              }
            }
          }
        },
        setProgramConstantsFromMatrix: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (this.__state.program != null && this.__state.program.__format == 1) {
            this.__flushGLProgram();
            a = new Float32Array(16);
            a[0] = c.rawData.get(0);
            a[1] = c.rawData.get(1);
            a[2] = c.rawData.get(2);
            a[3] = c.rawData.get(3);
            a[4] = c.rawData.get(4);
            a[5] = c.rawData.get(5);
            a[6] = c.rawData.get(6);
            a[7] = c.rawData.get(7);
            a[8] = c.rawData.get(8);
            a[9] = c.rawData.get(9);
            a[10] = c.rawData.get(10);
            a[11] = c.rawData.get(11);
            a[12] = c.rawData.get(12);
            a[13] = c.rawData.get(13);
            a[14] = c.rawData.get(14);
            a[15] = c.rawData.get(15);
            Yc.uniformMatrix4fv(this.gl, b, d, a);
          } else {
            var e = (a = a == 1) ? this.__vertexConstants : this.__fragmentConstants;
            c = c.rawData;
            var f = b * 4;
            if (d) {
              e[f++] = c.get(0);
              e[f++] = c.get(4);
              e[f++] = c.get(8);
              e[f++] = c.get(12);
              e[f++] = c.get(1);
              e[f++] = c.get(5);
              e[f++] = c.get(9);
              e[f++] = c.get(13);
              e[f++] = c.get(2);
              e[f++] = c.get(6);
              e[f++] = c.get(10);
              e[f++] = c.get(14);
              e[f++] = c.get(3);
              e[f++] = c.get(7);
              e[f++] = c.get(11);
            } else {
              e[f++] = c.get(0);
              e[f++] = c.get(1);
              e[f++] = c.get(2);
              e[f++] = c.get(3);
              e[f++] = c.get(4);
              e[f++] = c.get(5);
              e[f++] = c.get(6);
              e[f++] = c.get(7);
              e[f++] = c.get(8);
              e[f++] = c.get(9);
              e[f++] = c.get(10);
              e[f++] = c.get(11);
              e[f++] = c.get(12);
              e[f++] = c.get(13);
              e[f++] = c.get(14);
            }
            e[f++] = c.get(15);
            if (this.__state.program != null) {
              this.__state.program.__markDirty(a, b, 4);
            }
          }
        },
        setRenderToBackBuffer: function () {
          this.__state.renderToTexture = null;
        },
        setRenderToTexture: function (a, b, c, d) {
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = false;
          }
          this.__state.renderToTexture = a;
          this.__state.renderToTextureDepthStencil = b;
          this.__state.renderToTextureAntiAlias = c;
          this.__state.renderToTextureSurfaceSelector = d;
        },
        setSamplerStateAt: function (a, b, c, d) {
          if (this.__state.samplerStates[a] == null) {
            this.__state.samplerStates[a] = new Nh();
          }
          a = this.__state.samplerStates[a];
          a.wrap = b;
          a.filter = c;
          a.mipfilter = d;
        },
        setScissorRectangle: function (a) {
          if (a != null) {
            this.__state.scissorEnabled = true;
            this.__state.scissorRectangle.copyFrom(a);
          } else {
            this.__state.scissorEnabled = false;
          }
        },
        setStencilActions: function (a, b, c, d, e) {
          if (e == null) {
            e = 5;
          }
          if (d == null) {
            d = 5;
          }
          if (c == null) {
            c = 5;
          }
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 2;
          }
          this.__state.stencilTriangleFace = a;
          this.__state.stencilCompareMode = b;
          this.__state.stencilPass = c;
          this.__state.stencilDepthFail = d;
          this.__state.stencilFail = e;
        },
        setStencilReferenceValue: function (a, b, c) {
          if (c == null) {
            c = 255;
          }
          if (b == null) {
            b = 255;
          }
          this.__state.stencilReferenceValue = a;
          this.__state.stencilReadMask = b;
          this.__state.stencilWriteMask = c;
        },
        setTextureAt: function (a, b) {
          this.__state.textures[a] = b;
        },
        setVertexBufferAt: function (a, b, c, d) {
          if (d == null) {
            d = 4;
          }
          if (c == null) {
            c = 0;
          }
          if (!(a < 0)) {
            if (b == null) {
              this.gl.disableVertexAttribArray(a);
              this.__bindGLArrayBuffer(null);
            } else {
              this.__bindGLArrayBuffer(b.__id);
              this.gl.enableVertexAttribArray(a);
              c *= 4;
              switch (d) {
                case 0:
                  this.gl.vertexAttribPointer(a, 4, this.gl.UNSIGNED_BYTE, true, b.__stride, c);
                  break;
                case 1:
                  this.gl.vertexAttribPointer(a, 1, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 2:
                  this.gl.vertexAttribPointer(a, 2, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 3:
                  this.gl.vertexAttribPointer(a, 3, this.gl.FLOAT, false, b.__stride, c);
                  break;
                case 4:
                  this.gl.vertexAttribPointer(a, 4, this.gl.FLOAT, false, b.__stride, c);
                  break;
                default:
                  throw new ud();
              }
            }
          }
        },
        __bindGLArrayBuffer: function (a) {
          if (this.__contextState.__currentGLArrayBuffer != a) {
            this.gl.bindBuffer(this.gl.ARRAY_BUFFER, a);
            this.__contextState.__currentGLArrayBuffer = a;
          }
        },
        __bindGLElementArrayBuffer: function (a) {
          if (this.__contextState.__currentGLElementArrayBuffer != a) {
            this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER, a);
            this.__contextState.__currentGLElementArrayBuffer = a;
          }
        },
        __bindGLFramebuffer: function (a) {
          if (this.__contextState.__currentGLFramebuffer != a) {
            this.gl.bindFramebuffer(this.gl.FRAMEBUFFER, a);
            this.__contextState.__currentGLFramebuffer = a;
          }
        },
        __bindGLTexture2D: function (a) {
          this.gl.bindTexture(this.gl.TEXTURE_2D, a);
          this.__contextState.__currentGLTexture2D = a;
        },
        __bindGLTextureCubeMap: function (a) {
          this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP, a);
          this.__contextState.__currentGLTextureCubeMap = a;
        },
        __dispose: function () {
          this.driverInfo += " (Disposed)";
          if (this.__stage3D != null) {
            this.__stage3D.__indexBuffer = null;
            this.__stage3D.__vertexBuffer = null;
            this.__stage3D = this.__stage3D.context3D = null;
          }
          this.__positionScale = this.__frontBufferTexture = this.__fragmentConstants = this.__renderStage3DProgram = this.__context = this.__backBufferTexture = null;
          this.__present = false;
          this.__vertexConstants = this.__stage = this.__quadIndexBuffer = null;
        },
        __drawTriangles: function (a, b) {
          if (a == null) {
            a = 0;
          }
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D != this || this.__stage.__renderer.__cleared) {
              if (!this.__cleared) {
                this.clear(0, 0, 0, 0, 1, 0, 1);
              }
            } else {
              this.__stage.__renderer.__clear();
            }
          }
          this.__flushGL();
          if (this.__state.program != null) {
            this.__state.program.__flush();
          }
          this.gl.drawArrays(this.gl.TRIANGLES, a, b);
        },
        __flushGL: function () {
          this.__flushGLProgram();
          this.__flushGLFramebuffer();
          this.__flushGLViewport();
          this.__flushGLBlend();
          if (this.__contextState.colorMaskRed != this.__state.colorMaskRed || this.__contextState.colorMaskGreen != this.__state.colorMaskGreen || this.__contextState.colorMaskBlue != this.__state.colorMaskBlue || this.__contextState.colorMaskAlpha != this.__state.colorMaskAlpha) {
            this.gl.colorMask(this.__state.colorMaskRed, this.__state.colorMaskGreen, this.__state.colorMaskBlue, this.__state.colorMaskAlpha);
            this.__contextState.colorMaskRed = this.__state.colorMaskRed;
            this.__contextState.colorMaskGreen = this.__state.colorMaskGreen;
            this.__contextState.colorMaskBlue = this.__state.colorMaskBlue;
            this.__contextState.colorMaskAlpha = this.__state.colorMaskAlpha;
          }
          this.__flushGLCulling();
          this.__flushGLDepth();
          this.__flushGLScissor();
          this.__flushGLStencil();
          this.__flushGLTextures();
        },
        __flushGLBlend: function () {
          if (this.__contextState.blendDestinationRGBFactor != this.__state.blendDestinationRGBFactor || this.__contextState.blendSourceRGBFactor != this.__state.blendSourceRGBFactor || this.__contextState.blendDestinationAlphaFactor != this.__state.blendDestinationAlphaFactor || this.__contextState.blendSourceAlphaFactor != this.__state.blendSourceAlphaFactor) {
            this.__setGLBlend(true);
            if (this.__state.blendDestinationRGBFactor == this.__state.blendDestinationAlphaFactor && this.__state.blendSourceRGBFactor == this.__state.blendSourceAlphaFactor) {
              this.gl.blendFunc(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor));
            } else {
              this.gl.blendFuncSeparate(this.__getGLBlend(this.__state.blendSourceRGBFactor), this.__getGLBlend(this.__state.blendDestinationRGBFactor), this.__getGLBlend(this.__state.blendSourceAlphaFactor), this.__getGLBlend(this.__state.blendDestinationAlphaFactor));
            }
            this.__contextState.blendDestinationRGBFactor = this.__state.blendDestinationRGBFactor;
            this.__contextState.blendSourceRGBFactor = this.__state.blendSourceRGBFactor;
            this.__contextState.blendDestinationAlphaFactor = this.__state.blendDestinationAlphaFactor;
            this.__contextState.blendSourceAlphaFactor = this.__state.blendSourceAlphaFactor;
          }
        },
        __flushGLCulling: function () {
          if (this.__contextState.culling != this.__state.culling) {
            if (this.__state.culling == 3) {
              this.__setGLCullFace(false);
            } else {
              this.__setGLCullFace(true);
              switch (this.__state.culling) {
                case 0:
                  this.gl.cullFace(this.gl.BACK);
                  break;
                case 1:
                  this.gl.cullFace(this.gl.FRONT);
                  break;
                case 2:
                  this.gl.cullFace(this.gl.FRONT_AND_BACK);
                  break;
                case 3:
                  break;
                default:
                  throw new ud();
              }
            }
            this.__contextState.culling = this.__state.culling;
          }
        },
        __flushGLDepth: function () {
          var a = this.__state.depthMask && (this.__state.renderToTexture != null ? this.__state.renderToTextureDepthStencil : this.__state.backBufferEnableDepthAndStencil);
          if (this.__contextState.depthMask != a) {
            this.gl.depthMask(a);
            this.__contextState.depthMask = a;
          }
          if (this.__contextState.depthCompareMode != this.__state.depthCompareMode) {
            switch (this.__state.depthCompareMode) {
              case 0:
                this.gl.depthFunc(this.gl.ALWAYS);
                break;
              case 1:
                this.gl.depthFunc(this.gl.EQUAL);
                break;
              case 2:
                this.gl.depthFunc(this.gl.GREATER);
                break;
              case 3:
                this.gl.depthFunc(this.gl.GEQUAL);
                break;
              case 4:
                this.gl.depthFunc(this.gl.LESS);
                break;
              case 5:
                this.gl.depthFunc(this.gl.LEQUAL);
                break;
              case 6:
                this.gl.depthFunc(this.gl.NEVER);
                break;
              case 7:
                this.gl.depthFunc(this.gl.NOTEQUAL);
                break;
              default:
                throw new ud();
            }
            this.__contextState.depthCompareMode = this.__state.depthCompareMode;
          }
        },
        __flushGLFramebuffer: function () {
          if (this.__state.renderToTexture != null) {
            if (this.__contextState.renderToTexture != this.__state.renderToTexture || this.__contextState.renderToTextureSurfaceSelector != this.__state.renderToTextureSurfaceSelector) {
              var a = this.__state.renderToTexture.__getGLFramebuffer(this.__state.renderToTextureDepthStencil, this.__state.renderToTextureAntiAlias, this.__state.renderToTextureSurfaceSelector);
              this.__bindGLFramebuffer(a);
              this.__contextState.renderToTexture = this.__state.renderToTexture;
              this.__contextState.renderToTextureAntiAlias = this.__state.renderToTextureAntiAlias;
              this.__contextState.renderToTextureDepthStencil = this.__state.renderToTextureDepthStencil;
              this.__contextState.renderToTextureSurfaceSelector = this.__state.renderToTextureSurfaceSelector;
            }
            this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);
            this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);
            this.__setGLFrontFace(true);
          } else {
            if (this.__stage == null && this.backBufferWidth == 0 && this.backBufferHeight == 0) {
              throw new Sb("Context3D backbuffer has not been configured");
            }
            if (this.__contextState.renderToTexture != null || this.__contextState.__currentGLFramebuffer != this.__state.__primaryGLFramebuffer || this.__contextState.backBufferEnableDepthAndStencil != this.__state.backBufferEnableDepthAndStencil) {
              this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer);
              this.__contextState.renderToTexture = null;
              this.__contextState.backBufferEnableDepthAndStencil = this.__state.backBufferEnableDepthAndStencil;
            }
            this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);
            this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);
            this.__setGLFrontFace(this.__stage.context3D != this);
          }
        },
        __flushGLProgram: function () {
          var a = this.__state.shader;
          var b = this.__state.program;
          if (this.__contextState.shader != a) {
            if (this.__contextState.shader != null) {
              this.__contextState.shader.__disable();
            }
            if (a != null) {
              a.__enable();
            }
            this.__contextState.shader = a;
          }
          if (this.__contextState.program != b) {
            if (this.__contextState.program != null) {
              this.__contextState.program.__disable();
            }
            if (b != null) {
              b.__enable();
            }
            this.__contextState.program = b;
          }
          if (b != null && b.__format == 0) {
            this.__positionScale[1] = this.__stage.context3D == this && this.__state.renderToTexture == null ? 1 : -1;
            b.__setPositionScale(this.__positionScale);
          }
        },
        __flushGLScissor: function () {
          if (this.__state.scissorEnabled) {
            this.__setGLScissorTest(true);
            this.__contextState.scissorEnabled = true;
            var a = this.__state.scissorRectangle.x | 0;
            var b = this.__state.scissorRectangle.y | 0;
            var c = this.__state.scissorRectangle.width | 0;
            var d = this.__state.scissorRectangle.height | 0;
            if (this.__backBufferWantsBestResolution) {
              a = this.__state.scissorRectangle.x * this.__stage.window.__scale | 0;
              b = this.__state.scissorRectangle.y * this.__stage.window.__scale | 0;
              c = this.__state.scissorRectangle.width * this.__stage.window.__scale | 0;
              d = this.__state.scissorRectangle.height * this.__stage.window.__scale | 0;
            }
            if (this.__state.renderToTexture == null && this.__stage3D == null) {
              b = (this.__stage.window.__height * this.__stage.window.__scale | 0) - d - b;
            }
            if (this.__contextState.scissorRectangle.x != a || this.__contextState.scissorRectangle.y != b || this.__contextState.scissorRectangle.width != c || this.__contextState.scissorRectangle.height != d) {
              this.gl.scissor(a, b, c, d);
              this.__contextState.scissorRectangle.setTo(a, b, c, d);
            }
          } else if (this.__contextState.scissorEnabled != this.__state.scissorEnabled) {
            this.__setGLScissorTest(false);
            this.__contextState.scissorEnabled = false;
          }
        },
        __flushGLStencil: function () {
          if (this.__contextState.stencilTriangleFace != this.__state.stencilTriangleFace || this.__contextState.stencilPass != this.__state.stencilPass || this.__contextState.stencilDepthFail != this.__state.stencilDepthFail || this.__contextState.stencilFail != this.__state.stencilFail) {
            this.gl.stencilOpSeparate(this.__getGLTriangleFace(this.__state.stencilTriangleFace), this.__getGLStencilAction(this.__state.stencilFail), this.__getGLStencilAction(this.__state.stencilDepthFail), this.__getGLStencilAction(this.__state.stencilPass));
            this.__contextState.stencilTriangleFace = this.__state.stencilTriangleFace;
            this.__contextState.stencilPass = this.__state.stencilPass;
            this.__contextState.stencilDepthFail = this.__state.stencilDepthFail;
            this.__contextState.stencilFail = this.__state.stencilFail;
          }
          if (this.__contextState.stencilWriteMask != this.__state.stencilWriteMask) {
            this.gl.stencilMask(this.__state.stencilWriteMask);
            this.__contextState.stencilWriteMask = this.__state.stencilWriteMask;
          }
          if (this.__contextState.stencilCompareMode != this.__state.stencilCompareMode || this.__contextState.stencilReferenceValue != this.__state.stencilReferenceValue || this.__contextState.stencilReadMask != this.__state.stencilReadMask) {
            this.gl.stencilFunc(this.__getGLCompareMode(this.__state.stencilCompareMode), this.__state.stencilReferenceValue, this.__state.stencilReadMask);
            this.__contextState.stencilCompareMode = this.__state.stencilCompareMode;
            this.__contextState.stencilReferenceValue = this.__state.stencilReferenceValue;
            this.__contextState.stencilReadMask = this.__state.stencilReadMask;
          }
        },
        __flushGLTextures: function () {
          var a = 0;
          var b;
          var c;
          for (var d = 0, e = this.__state.textures.length; d < e;) {
            var f = d++;
            b = this.__state.textures[f];
            c = this.__state.samplerStates[f];
            if (c == null) {
              this.__state.samplerStates[f] = new Nh();
              c = this.__state.samplerStates[f];
            }
            this.gl.activeTexture(this.gl.TEXTURE0 + a);
            if (b != null) {
              if (b.__textureTarget == this.gl.TEXTURE_2D) {
                this.__bindGLTexture2D(b.__getTexture());
              } else {
                this.__bindGLTextureCubeMap(b.__getTexture());
              }
              this.__contextState.textures[f] = b;
              b.__setSamplerState(c);
            } else {
              this.__bindGLTexture2D(null);
            }
            if (this.__state.program != null && this.__state.program.__format == 0 && c.textureAlpha) {
              this.gl.activeTexture(this.gl.TEXTURE0 + a + 4);
              if (b != null && b.__alphaTexture != null) {
                if (b.__alphaTexture.__textureTarget == this.gl.TEXTURE_2D) {
                  this.__bindGLTexture2D(b.__alphaTexture.__getTexture());
                } else {
                  this.__bindGLTextureCubeMap(b.__alphaTexture.__getTexture());
                }
                b.__alphaTexture.__setSamplerState(c);
                this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 1);
              } else {
                this.__bindGLTexture2D(null);
                if (this.__state.program.__agalAlphaSamplerEnabled[a] != null) {
                  this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[a].location, 0);
                }
              }
            }
            ++a;
          }
        },
        __flushGLViewport: function () {
          if (this.__state.renderToTexture == null) {
            if (this.__stage.context3D == this) {
              var a = this.backBufferWidth;
              var b = this.backBufferHeight;
              if (this.__stage3D == null && !this.__backBufferWantsBestResolution) {
                a = this.backBufferWidth * this.__stage.window.__scale | 0;
                b = this.backBufferHeight * this.__stage.window.__scale | 0;
              }
              var c = this.__stage3D == null ? 0 : this.__stage3D.get_x() | 0;
              var d = this.__stage.window.__height * this.__stage.window.__scale - b - (this.__stage3D == null ? 0 : this.__stage3D.get_y()) | 0;
              this.gl.viewport(c, d, a, b);
            } else {
              this.gl.viewport(0, 0, this.backBufferWidth, this.backBufferHeight);
            }
          } else {
            b = a = 0;
            if (this.__state.renderToTexture instanceof Em) {
              b = this.__state.renderToTexture;
              a = b.__width;
              b = b.__height;
            } else if (this.__state.renderToTexture instanceof Xj) {
              b = this.__state.renderToTexture;
              a = b.__width;
              b = b.__height;
            } else if (this.__state.renderToTexture instanceof Fm) {
              b = this.__state.renderToTexture;
              b = a = b.__size;
            }
            this.gl.viewport(0, 0, a, b);
          }
        },
        __getGLBlend: function (a) {
          switch (a) {
            case 0:
              return this.gl.DST_ALPHA;
            case 1:
              return this.gl.DST_COLOR;
            case 2:
              return this.gl.ONE;
            case 3:
              return this.gl.ONE_MINUS_DST_ALPHA;
            case 4:
              return this.gl.ONE_MINUS_DST_COLOR;
            case 5:
              return this.gl.ONE_MINUS_SRC_ALPHA;
            case 6:
              return this.gl.ONE_MINUS_SRC_COLOR;
            case 7:
              return this.gl.SRC_ALPHA;
            case 8:
              return this.gl.SRC_COLOR;
            case 9:
              return this.gl.ZERO;
            default:
              throw new ud();
          }
        },
        __getGLCompareMode: function (a) {
          switch (a) {
            case 0:
              return this.gl.ALWAYS;
            case 1:
              return this.gl.EQUAL;
            case 2:
              return this.gl.GREATER;
            case 3:
              return this.gl.GEQUAL;
            case 4:
              return this.gl.LESS;
            case 5:
              return this.gl.LEQUAL;
            case 6:
              return this.gl.NEVER;
            case 7:
              return this.gl.NOTEQUAL;
            default:
              return this.gl.EQUAL;
          }
        },
        __getGLStencilAction: function (a) {
          switch (a) {
            case 0:
              return this.gl.DECR;
            case 1:
              return this.gl.DECR_WRAP;
            case 2:
              return this.gl.INCR;
            case 3:
              return this.gl.INCR_WRAP;
            case 4:
              return this.gl.INVERT;
            case 5:
              return this.gl.KEEP;
            case 6:
              return this.gl.REPLACE;
            case 7:
              return this.gl.ZERO;
            default:
              return this.gl.KEEP;
          }
        },
        __getGLTriangleFace: function (a) {
          switch (a) {
            case 0:
              return this.gl.BACK;
            case 1:
              return this.gl.FRONT;
            case 2:
              return this.gl.FRONT_AND_BACK;
            case 3:
              return this.gl.NONE;
            default:
              return this.gl.FRONT_AND_BACK;
          }
        },
        __renderStage3D: function (a) {
          var b = a.context3D;
          if (b != null && b != this && b.__frontBufferTexture != null && a.visible && this.backBufferHeight > 0 && this.backBufferWidth > 0) {
            if (this.__renderStage3DProgram == null) {
              var c = new ua();
              c.assemble(Cp.toString(1), "m44 op, va0, vc0\nmov v0, va1");
              var d = new ua();
              d.assemble(Cp.toString(0), "tex ft1, v0, fs0 <2d,nearest,nomip>\nmov oc, ft1");
              this.__renderStage3DProgram = this.createProgram();
              this.__renderStage3DProgram.upload(c.agalcode, d.agalcode);
            }
            this.setProgram(this.__renderStage3DProgram);
            this.setBlendFactors(2, 9);
            this.setColorMask(true, true, true, true);
            this.setCulling(3);
            this.setDepthTest(false, 0);
            this.setStencilActions();
            this.setStencilReferenceValue(0, 0, 0);
            this.setScissorRectangle(null);
            this.setTextureAt(0, b.__frontBufferTexture);
            this.setVertexBufferAt(0, a.__vertexBuffer, 0, 3);
            this.setVertexBufferAt(1, a.__vertexBuffer, 3, 2);
            this.setProgramConstantsFromMatrix(1, 0, a.__renderTransform, true);
            this.drawTriangles(a.__indexBuffer);
            this.__present = true;
          }
        },
        __setGLBlend: function (a) {
          if (this.__contextState.__enableGLBlend != a) {
            if (a) {
              this.gl.enable(this.gl.BLEND);
            } else {
              this.gl.disable(this.gl.BLEND);
            }
            this.__contextState.__enableGLBlend = a;
          }
        },
        __setGLBlendEquation: function (a) {
          if (this.__contextState.__glBlendEquation != a) {
            this.gl.blendEquation(a);
            this.__contextState.__glBlendEquation = a;
          }
        },
        __setGLCullFace: function (a) {
          if (this.__contextState.__enableGLCullFace != a) {
            if (a) {
              this.gl.enable(this.gl.CULL_FACE);
            } else {
              this.gl.disable(this.gl.CULL_FACE);
            }
            this.__contextState.__enableGLCullFace = a;
          }
        },
        __setGLDepthTest: function (a) {
          if (this.__contextState.__enableGLDepthTest != a) {
            if (a) {
              this.gl.enable(this.gl.DEPTH_TEST);
            } else {
              this.gl.disable(this.gl.DEPTH_TEST);
            }
            this.__contextState.__enableGLDepthTest = a;
          }
        },
        __setGLFrontFace: function (a) {
          if (this.__contextState.__frontFaceGLCCW != a) {
            this.gl.frontFace(a ? this.gl.CCW : this.gl.CW);
            this.__contextState.__frontFaceGLCCW = a;
          }
        },
        __setGLScissorTest: function (a) {
          if (this.__contextState.__enableGLScissorTest != a) {
            if (a) {
              this.gl.enable(this.gl.SCISSOR_TEST);
            } else {
              this.gl.disable(this.gl.SCISSOR_TEST);
            }
            this.__contextState.__enableGLScissorTest = a;
          }
        },
        __setGLStencilTest: function (a) {
          if (this.__contextState.__enableGLStencilTest != a) {
            if (a) {
              this.gl.enable(this.gl.STENCIL_TEST);
            } else {
              this.gl.disable(this.gl.STENCIL_TEST);
            }
            this.__contextState.__enableGLStencilTest = a;
          }
        },
        __class__: Kb
      });
      var Bp = {
        fromString: function (a) {
          switch (a) {
            case "dynamicDraw":
              return 0;
            case "staticDraw":
              return 1;
            default:
              return null;
          }
        },
        toString: function (a) {
          switch (a) {
            case 0:
              return "dynamicDraw";
            case 1:
              return "staticDraw";
            default:
              return null;
          }
        }
      };
      var Cp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "fragment";
            case 1:
              return "vertex";
            default:
              return null;
          }
        }
      };
      var Vp = {
        toString: function (a) {
          switch (a) {
            case 0:
              return "bgrPacked565";
            case 1:
              return "bgra";
            case 2:
              return "bgraPacked4444";
            case 3:
              return "compressed";
            case 4:
              return "compressedAlpha";
            case 5:
              return "rgbaHalfFloat";
            default:
              return null;
          }
        }
      };
      function Mo(a, b, c) {
        this.__context = a;
        this.__numIndices = b;
        a = this.__context.gl;
        this.__id = a.createBuffer();
        this.__usage = c == 0 ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
      }
      h["openfl.display3D.IndexBuffer3D"] = Mo;
      Mo.__name__ = "openfl.display3D.IndexBuffer3D";
      Mo.prototype = {
        uploadFromTypedArray: function (a, b) {
          if (a != null) {
            b = this.__context.gl;
            this.__context.__bindGLElementArrayBuffer(this.__id);
            Yc.bufferData(b, b.ELEMENT_ARRAY_BUFFER, a, this.__usage);
          }
        },
        uploadFromVector: function (a, b, c) {
          if (a != null) {
            var d = b + c;
            var e = this.__tempUInt16Array;
            if (this.__tempUInt16Array == null || this.__tempUInt16Array.length < c) {
              this.__tempUInt16Array = c != null ? new Uint16Array(c) : null;
              if (e != null) {
                this.__tempUInt16Array.set(e);
              }
            }
            for (c = b; c < d;) {
              e = c++;
              this.__tempUInt16Array[e - b] = a.get(e);
            }
            this.uploadFromTypedArray(this.__tempUInt16Array);
          }
        },
        __class__: Mo
      };
      function No(a, b) {
        this.__context = a;
        this.__format = b;
        if (this.__format == 0) {
          this.__agalSamplerUsageMask = 0;
          this.__agalUniforms = new mb();
          this.__agalSamplerUniforms = new mb();
          this.__agalAlphaSamplerUniforms = new mb();
          this.__agalAlphaSamplerEnabled = [];
        } else {
          this.__glslAttribNames = [];
          this.__glslAttribTypes = [];
          this.__glslSamplerNames = [];
          this.__glslUniformLocations = [];
          this.__glslUniformNames = [];
          this.__glslUniformTypes = [];
        }
        this.__samplerStates = [];
      }
      h["openfl.display3D.Program3D"] = No;
      No.__name__ = "openfl.display3D.Program3D";
      No.prototype = {
        upload: function (a, b) {
          if (this.__format == 0) {
            var c = [];
            a = Hd.convertToGLSL(a, null);
            b = Hd.convertToGLSL(b, c);
            if (Ua.level == 5) {
              Ua.info(a, {
                fileName: "openfl/display3D/Program3D.hx",
                lineNumber: 399,
                className: "openfl.display3D.Program3D",
                methodName: "upload"
              });
              Ua.info(b, {
                fileName: "openfl/display3D/Program3D.hx",
                lineNumber: 400,
                className: "openfl.display3D.Program3D",
                methodName: "upload"
              });
            }
            this.__deleteShaders();
            this.__uploadFromGLSL(a, b);
            this.__buildAGALUniformList();
            b = 0;
            for (a = c.length; b < a;) {
              var d = b++;
              this.__samplerStates[d] = c[d];
            }
          }
        },
        __buildAGALUniformList: function () {
          if (this.__format != 1) {
            var a = this.__context.gl;
            this.__agalUniforms.clear();
            this.__agalSamplerUniforms.clear();
            this.__agalAlphaSamplerUniforms.clear();
            this.__agalAlphaSamplerEnabled = [];
            this.__agalSamplerUsageMask = 0;
            var b = a.getProgramParameter(this.__glProgram, a.ACTIVE_UNIFORMS);
            var c = new mb();
            var d = new mb();
            for (var e = 0; e < b;) {
              var f = e++;
              var k = a.getActiveUniform(this.__glProgram, f);
              var g = k.name;
              var l = k.size;
              var h = k.type;
              k = new Gm(this.__context);
              k.name = g;
              k.size = l;
              k.type = h;
              k.location = a.getUniformLocation(this.__glProgram, k.name);
              g = k.name.indexOf("[");
              if (g >= 0) {
                k.name = k.name.substring(0, g);
              }
              switch (k.type) {
                case 35674:
                  k.regCount = 2;
                  break;
                case 35675:
                  k.regCount = 3;
                  break;
                case 35676:
                  k.regCount = 4;
                  break;
                default:
                  k.regCount = 1;
              }
              k.regCount *= k.size;
              this.__agalUniforms.add(k);
              if (k.name == "vcPositionScale") {
                this.__agalPositionScale = k;
              } else if (v.startsWith(k.name, "vc")) {
                k.regIndex = y.parseInt(k.name.substring(2));
                k.regData = this.__context.__vertexConstants;
                c.add(k);
              } else if (v.startsWith(k.name, "fc")) {
                k.regIndex = y.parseInt(k.name.substring(2));
                k.regData = this.__context.__fragmentConstants;
                d.add(k);
              } else if (v.startsWith(k.name, "sampler") && k.name.indexOf("alpha") == -1) {
                k.regIndex = y.parseInt(k.name.substring(7));
                this.__agalSamplerUniforms.add(k);
                g = 0;
                l = k.regCount;
                while (g < l) {
                  h = g++;
                  this.__agalSamplerUsageMask |= 1 << k.regIndex + h;
                }
              } else if (v.startsWith(k.name, "sampler") && v.endsWith(k.name, "_alpha")) {
                g = k.name.indexOf("_") - 7;
                k.regIndex = y.parseInt(k.name.substring(7, 7 + g)) + 4;
                this.__agalAlphaSamplerUniforms.add(k);
              } else if (v.startsWith(k.name, "sampler") && v.endsWith(k.name, "_alphaEnabled")) {
                k.regIndex = y.parseInt(k.name.substring(7));
                this.__agalAlphaSamplerEnabled[k.regIndex] = k;
              }
              if (Ua.level == 5) {
                Ua.verbose("" + f + " name:" + k.name + " type:" + k.type + " size:" + k.size + " location:" + y.string(k.location), {
                  fileName: "openfl/display3D/Program3D.hx",
                  lineNumber: 577,
                  className: "openfl.display3D.Program3D",
                  methodName: "__buildAGALUniformList"
                });
              }
            }
            this.__agalVertexUniformMap = new Yj(bb.array(c));
            this.__agalFragmentUniformMap = new Yj(bb.array(d));
          }
        },
        __deleteShaders: function () {
          var a = this.__context.gl;
          if (this.__glProgram != null) {
            this.__glProgram = null;
          }
          if (this.__glVertexShader != null) {
            a.deleteShader(this.__glVertexShader);
            this.__glVertexShader = null;
          }
          if (this.__glFragmentShader != null) {
            a.deleteShader(this.__glFragmentShader);
            this.__glFragmentShader = null;
          }
        },
        __disable: function () {},
        __enable: function () {
          var a = this.__context.gl;
          a.useProgram(this.__glProgram);
          if (this.__format == 0) {
            this.__agalVertexUniformMap.markAllDirty();
            this.__agalFragmentUniformMap.markAllDirty();
            for (var b = this.__agalSamplerUniforms.h; b != null;) {
              var c = b.item;
              b = b.next;
              if (c.regCount == 1) {
                a.uniform1i(c.location, c.regIndex);
              } else {
                throw new ud("!!! TODO: uniform location on webgl");
              }
            }
            for (b = this.__agalAlphaSamplerUniforms.h; b != null;) {
              c = b.item;
              b = b.next;
              if (c.regCount == 1) {
                a.uniform1i(c.location, c.regIndex);
              } else {
                throw new ud("!!! TODO: uniform location on webgl");
              }
            }
          }
        },
        __flush: function () {
          if (this.__format == 0) {
            this.__agalVertexUniformMap.flush();
            this.__agalFragmentUniformMap.flush();
          }
        },
        __markDirty: function (a, b, c) {
          if (this.__format != 1) {
            if (a) {
              this.__agalVertexUniformMap.markDirty(b, c);
            } else {
              this.__agalFragmentUniformMap.markDirty(b, c);
            }
          }
        },
        __setPositionScale: function (a) {
          if (this.__format != 1 && this.__agalPositionScale != null) {
            this.__context.gl.uniform4fv(this.__agalPositionScale.location, a);
          }
        },
        __uploadFromGLSL: function (a, b) {
          var c = this.__context.gl;
          this.__glVertexSource = a;
          this.__glFragmentSource = b;
          this.__glVertexShader = c.createShader(c.VERTEX_SHADER);
          c.shaderSource(this.__glVertexShader, a);
          c.compileShader(this.__glVertexShader);
          if (c.getShaderParameter(this.__glVertexShader, c.COMPILE_STATUS) == 0) {
            var d = "Error compiling vertex shader\n" + c.getShaderInfoLog(this.__glVertexShader);
            Ua.error(d + ("\n" + a), {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 869,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
          this.__glFragmentShader = c.createShader(c.FRAGMENT_SHADER);
          c.shaderSource(this.__glFragmentShader, b);
          c.compileShader(this.__glFragmentShader);
          if (c.getShaderParameter(this.__glFragmentShader, c.COMPILE_STATUS) == 0) {
            d = "Error compiling fragment shader\n" + c.getShaderInfoLog(this.__glFragmentShader);
            Ua.error(d + ("\n" + b), {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 881,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
          this.__glProgram = c.createProgram();
          if (this.__format == 0) {
            for (b = 0; b < 16;) {
              var e = b++;
              d = "va" + e;
              if (a.indexOf(" " + d) != -1) {
                c.bindAttribLocation(this.__glProgram, e, d);
              }
            }
          } else {
            b = 0;
            a = this.__glslAttribNames;
            while (b < a.length) {
              d = a[b];
              ++b;
              if (d.indexOf("Position") > -1 && v.startsWith(d, "openfl_")) {
                c.bindAttribLocation(this.__glProgram, 0, d);
                break;
              }
            }
          }
          c.attachShader(this.__glProgram, this.__glVertexShader);
          c.attachShader(this.__glProgram, this.__glFragmentShader);
          c.linkProgram(this.__glProgram);
          if (c.getProgramParameter(this.__glProgram, c.LINK_STATUS) == 0) {
            d = "Unable to initialize the shader program\n" + c.getProgramInfoLog(this.__glProgram);
            Ua.error(d, {
              fileName: "openfl/display3D/Program3D.hx",
              lineNumber: 922,
              className: "openfl.display3D.Program3D",
              methodName: "__uploadFromGLSL"
            });
          }
        },
        __class__: No
      };
      function Gm(a) {
        this.context = a;
        this.isDirty = true;
        this.regDataPointer = new Ho(null, 0);
      }
      h["openfl.display3D.Uniform"] = Gm;
      Gm.__name__ = "openfl.display3D.Uniform";
      Gm.prototype = {
        flush: function () {
          var a = this.context.gl;
          var b = this.regIndex * 4;
          switch (this.type) {
            case 35664:
              Rp.uniform2fv(a, this.location, this.regData.subarray(b, b + this.regCount * 2));
              break;
            case 35665:
              var c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 3);
              var d = null;
              if (d != null) {
                a.uniform3fv(c, b, d, null);
              } else {
                a.uniform3fv(c, b);
              }
              break;
            case 35666:
              c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 4);
              d = null;
              if (d != null) {
                a.uniform4fv(c, b, d, null);
              } else {
                a.uniform4fv(c, b);
              }
              break;
            case 35674:
              Yc.uniformMatrix2fv(a, this.location, false, this.regData.subarray(b, b + this.size * 4));
              break;
            case 35675:
              Yc.uniformMatrix3fv(a, this.location, false, this.regData.subarray(b, b + this.size * 9));
              break;
            case 35676:
              Yc.uniformMatrix4fv(a, this.location, false, this.regData.subarray(b, b + this.size * 16));
              break;
            default:
              c = this.location;
              b = this.regData.subarray(b, b + this.regCount * 4);
              d = null;
              if (d != null) {
                a.uniform4fv(c, b, d, null);
              } else {
                a.uniform4fv(c, b);
              }
          }
        },
        __class__: Gm
      };
      function Yj(a) {
        this.__uniforms = a;
        this.__uniforms.sort(function (a, b) {
          return ha.compare(a.regIndex, b.regIndex);
        });
        var b = 0;
        a = 0;
        for (var c = this.__uniforms; a < c.length;) {
          var d = c[a];
          ++a;
          if (d.regIndex + d.regCount > b) {
            b = d.regIndex + d.regCount;
          }
        }
        this.__registerLookup = kb.toObjectVector(null, b);
        a = 0;
        for (c = this.__uniforms; a < c.length;) {
          d = c[a];
          ++a;
          b = 0;
          for (var e = d.regCount; b < e;) {
            var f = b++;
            this.__registerLookup.set(d.regIndex + f, d);
          }
        }
        this.__anyDirty = this.__allDirty = true;
      }
      h["openfl.display3D.UniformMap"] = Yj;
      Yj.__name__ = "openfl.display3D.UniformMap";
      Yj.prototype = {
        flush: function () {
          if (this.__anyDirty) {
            for (var a = 0, b = this.__uniforms; a < b.length;) {
              var c = b[a];
              ++a;
              if (this.__allDirty || c.isDirty) {
                c.flush();
                c.isDirty = false;
              }
            }
            this.__anyDirty = this.__allDirty = false;
          }
        },
        markAllDirty: function () {
          this.__anyDirty = this.__allDirty = true;
        },
        markDirty: function (a, b) {
          if (!this.__allDirty) {
            b = a + b;
            if (b > this.__registerLookup.get_length()) {
              b = this.__registerLookup.get_length();
            }
            while (a < b) {
              var c = this.__registerLookup.get(a);
              if (c != null) {
                this.__anyDirty = c.isDirty = true;
                a = c.regIndex + c.regCount;
              } else {
                ++a;
              }
            }
          }
        },
        __class__: Yj
      };
      function Oo(a, b, c, d) {
        this.__context = a;
        this.__numVertices = b;
        this.__vertexSize = c;
        a = this.__context.gl;
        this.__id = a.createBuffer();
        this.__stride = this.__vertexSize * 4;
        this.__usage = Bp.fromString(d) == 0 ? a.DYNAMIC_DRAW : a.STATIC_DRAW;
      }
      h["openfl.display3D.VertexBuffer3D"] = Oo;
      Oo.__name__ = "openfl.display3D.VertexBuffer3D";
      Oo.prototype = {
        uploadFromTypedArray: function (a, b) {
          if (a != null) {
            b = this.__context.gl;
            this.__context.__bindGLArrayBuffer(this.__id);
            Yc.bufferData(b, b.ARRAY_BUFFER, a, this.__usage);
          }
        },
        uploadFromVector: function (a, b, c) {
          if (a != null) {
            b *= this.__vertexSize;
            var d = c * this.__vertexSize;
            c = b + d;
            var e = this.__tempFloat32Array;
            if (this.__tempFloat32Array == null || this.__tempFloat32Array.length < d) {
              this.__tempFloat32Array = d != null ? new Float32Array(d) : null;
              if (e != null) {
                this.__tempFloat32Array.set(e);
              }
            }
            for (d = b; d < c;) {
              e = d++;
              this.__tempFloat32Array[e - b] = a.get(e);
            }
            this.uploadFromTypedArray(fj.toArrayBufferView(this.__tempFloat32Array));
          }
        },
        __class__: Oo
      };
      function Hd() {}
      h["openfl.display3D._internal.AGALConverter"] = Hd;
      Hd.__name__ = "openfl.display3D._internal.AGALConverter";
      Hd.prefixFromType = function (a, b) {
        switch (a) {
          case 0:
            return "va";
          case 1:
            if (b == bg.VERTEX) {
              return "vc";
            } else {
              return "fc";
            }
          case 2:
            if (b == bg.VERTEX) {
              return "vt";
            } else {
              return "ft";
            }
          case 3:
            return "output_";
          case 4:
            return "v";
          case 5:
            return "sampler";
          default:
            throw new ud("Invalid data!");
        }
      };
      Hd.readUInt64 = function (a) {
        var b = a.readInt();
        a = a.readInt();
        return new xb(a, b);
      };
      Hd.convertToGLSL = function (a, b) {
        a.position = 0;
        a.__endian = 1;
        var c = a.readByte() & 255;
        if (c == 176) {
          return a.readUTF();
        }
        if (c != 160) {
          throw new ud("Magic value must be 0xA0, may not be AGAL");
        }
        var d = a.readInt();
        if (d != 1) {
          throw new ud("Version must be 1");
        }
        if ((a.readByte() & 255) != 161) {
          throw new ud("Shader type ID must be 0xA1");
        }
        c = (a.readByte() & 255) == 0 ? bg.VERTEX : bg.FRAGMENT;
        var e = new Hm();
        var f = "";
        while (true) {
          d = a.position;
          if (!mc.gt(Oe.get_length(a), d)) {
            break;
          }
          var k = a.readInt();
          d = a.readUnsignedInt();
          var g = Hd.readUInt64(a);
          var l = Hd.readUInt64(a);
          d = Gi.parse(d, c);
          g = Oh.parse(g, c, d.mask);
          var h = Oh.parse(l, c, d.mask);
          f += "\t";
          switch (k) {
            case 0:
              f += y.string(d.toGLSL() + " = " + g.toGLSL() + "; // mov");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 1:
              f += y.string(d.toGLSL() + " = " + g.toGLSL() + " + " + h.toGLSL() + "; // add");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 2:
              f += y.string(d.toGLSL() + " = " + g.toGLSL() + " - " + h.toGLSL() + "; // sub");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 3:
              f += y.string(d.toGLSL() + " = " + g.toGLSL() + " * " + h.toGLSL() + "; // mul");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 4:
              f += y.string(d.toGLSL() + " = " + g.toGLSL() + " / " + h.toGLSL() + "; // div");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 5:
              f = g.toGLSL().indexOf(".") > -1 ? f + y.string(d.toGLSL() + " = 1.0 / " + g.toGLSL() + "; // rcp") : f + y.string(d.toGLSL() + " = vec4(1) / " + g.toGLSL() + "; // rcp");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 6:
              f += y.string(d.toGLSL() + " = min(" + g.toGLSL() + ", " + h.toGLSL() + "); // min");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 7:
              f += y.string(d.toGLSL() + " = max(" + g.toGLSL() + ", " + h.toGLSL() + "); // max");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 8:
              f += y.string(d.toGLSL() + " = fract(" + g.toGLSL() + "); // frc");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 9:
              f += y.string(d.toGLSL() + " = sqrt(" + g.toGLSL() + "); // sqrt");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 10:
              f += y.string(d.toGLSL() + " = inversesqrt(" + g.toGLSL() + "); // rsq");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 11:
              f += y.string(d.toGLSL() + " = pow(" + g.toGLSL() + ", " + h.toGLSL() + "); // pow");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 12:
              f += y.string(d.toGLSL() + " = log2(" + g.toGLSL() + "); // log");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 13:
              f += y.string(d.toGLSL() + " = exp2(" + g.toGLSL() + "); // exp");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 14:
              f += y.string(d.toGLSL() + " = normalize(" + g.toGLSL() + "); // normalize");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 15:
              f += y.string(d.toGLSL() + " = sin(" + g.toGLSL() + "); // sin");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 16:
              f += y.string(d.toGLSL() + " = cos(" + g.toGLSL() + "); // cos");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 17:
              g.sourceMask = h.sourceMask = 7;
              f += y.string(d.toGLSL() + " = cross(vec3(" + g.toGLSL() + "), vec3(" + h.toGLSL() + ")); // crs");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 18:
              g.sourceMask = h.sourceMask = 7;
              f += y.string(d.toGLSL() + " = vec4(dot(vec3(" + g.toGLSL() + "), vec3(" + h.toGLSL() + ")))" + d.getWriteMask() + "; // dp3");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 19:
              g.sourceMask = h.sourceMask = 15;
              f += y.string(d.toGLSL() + " = vec4(dot(vec4(" + g.toGLSL() + "), vec4(" + h.toGLSL() + ")))" + d.getWriteMask() + "; // dp4");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 20:
              f += y.string(d.toGLSL() + " = abs(" + g.toGLSL() + "); // abs");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 21:
              f += y.string(d.toGLSL() + " = -" + g.toGLSL() + "; // neg");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 22:
              f += y.string(d.toGLSL() + " = clamp(" + g.toGLSL() + ", 0.0, 1.0); // saturate");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              break;
            case 23:
              k = e.getRegisterUsage(h);
              if (k != ra.VECTOR_4 && k != ra.VECTOR_4_ARRAY) {
                f += y.string(d.toGLSL() + " = " + g.toGLSL() + " * mat3(" + h.toGLSL(false) + "); // m33");
                e.addDR(d, ra.VECTOR_4);
                e.addSR(g, ra.VECTOR_4);
                e.addSR(h, ra.MATRIX_4_4);
              } else {
                g.sourceMask = h.sourceMask = 7;
                f += y.string(d.toGLSL() + " = vec3(dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 0) + "), dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 1) + "),dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 2) + ")); // m33");
                e.addDR(d, ra.VECTOR_4);
                e.addSR(g, ra.VECTOR_4);
                e.addSR(h, ra.VECTOR_4, 0);
                e.addSR(h, ra.VECTOR_4, 1);
                e.addSR(h, ra.VECTOR_4, 2);
              }
              break;
            case 24:
              k = e.getRegisterUsage(h);
              if (k != ra.VECTOR_4 && k != ra.VECTOR_4_ARRAY) {
                f += y.string(d.toGLSL() + " = " + g.toGLSL() + " * " + h.toGLSL(false) + "; // m44");
                e.addDR(d, ra.VECTOR_4);
                e.addSR(g, ra.VECTOR_4);
                e.addSR(h, ra.MATRIX_4_4);
              } else {
                g.sourceMask = h.sourceMask = 15;
                f += y.string(d.toGLSL() + " = vec4(dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 0) + "), dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 1) + "), dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 2) + "), dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 3) + ")); // m44");
                e.addDR(d, ra.VECTOR_4);
                e.addSR(g, ra.VECTOR_4);
                e.addSR(h, ra.VECTOR_4, 0);
                e.addSR(h, ra.VECTOR_4, 1);
                e.addSR(h, ra.VECTOR_4, 2);
                e.addSR(h, ra.VECTOR_4, 3);
              }
              break;
            case 25:
              d.mask &= 7;
              k = e.getRegisterUsage(h);
              if (k != ra.VECTOR_4 && k != ra.VECTOR_4_ARRAY) {
                f += y.string(d.toGLSL() + " = " + g.toGLSL() + " * " + h.toGLSL(false) + "; // m34");
                e.addDR(d, ra.VECTOR_4);
                e.addSR(g, ra.VECTOR_4);
                e.addSR(h, ra.MATRIX_4_4);
              } else {
                g.sourceMask = h.sourceMask = 15;
                f += y.string(d.toGLSL() + " = vec3(dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 0) + "), dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 1) + "),dot(" + g.toGLSL(true) + "," + h.toGLSL(true, 2) + ")); // m34");
                e.addDR(d, ra.VECTOR_4);
                e.addSR(g, ra.VECTOR_4);
                e.addSR(h, ra.VECTOR_4, 0);
                e.addSR(h, ra.VECTOR_4, 1);
                e.addSR(h, ra.VECTOR_4, 2);
              }
              break;
            case 39:
              g.sourceMask = 15;
              f += y.string("if (any(lessThan(" + g.toGLSL() + ", vec4(0)))) discard;");
              e.addSR(g, ra.VECTOR_4);
              break;
            case 40:
              h = Hi.parse(l, c);
              switch (h.d) {
                case 0:
                  if (h.t == 2) {
                    g.sourceMask = 3;
                    e.addSaR(h, ra.SAMPLER_2D_ALPHA);
                    f += y.string("if (" + h.toGLSL() + "_alphaEnabled) {\n");
                    f += y.string("\t\t" + d.toGLSL() + " = vec4(texture2D(" + h.toGLSL() + ", " + g.toGLSL() + ").xyz, texture2D(" + h.toGLSL() + "_alpha, " + g.toGLSL() + ").x); // tex + alpha\n");
                    f += "\t} else {\n";
                    f += y.string("\t\t" + d.toGLSL() + " = texture2D(" + h.toGLSL() + ", " + g.toGLSL() + "); // tex\n");
                    f += "\t}";
                  } else {
                    g.sourceMask = 3;
                    e.addSaR(h, ra.SAMPLER_2D);
                    f += y.string(d.toGLSL() + " = texture2D(" + h.toGLSL() + ", " + g.toGLSL() + "); // tex");
                  }
                  break;
                case 1:
                  if (h.t == 2) {
                    g.sourceMask = 7;
                    e.addSaR(h, ra.SAMPLER_CUBE_ALPHA);
                    f += y.string("if (" + h.toGLSL() + "_alphaEnabled) {\n");
                    f += y.string("\t\t" + d.toGLSL() + " = vec4(textureCube(" + h.toGLSL() + ", " + g.toGLSL() + ").xyz, textureCube(" + h.toGLSL() + "_alpha, " + g.toGLSL() + ").x); // tex + alpha\n");
                    f += "\t} else {\n";
                    f += y.string("\t\t" + d.toGLSL() + " = textureCube(" + h.toGLSL() + ", " + g.toGLSL() + "); // tex");
                    f += "\t}";
                  } else {
                    g.sourceMask = 7;
                    f += y.string(d.toGLSL() + " = textureCube(" + h.toGLSL() + ", " + g.toGLSL() + "); // tex");
                    e.addSaR(h, ra.SAMPLER_CUBE);
                  }
              }
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              if (b != null) {
                b[h.n] = h.toSamplerState();
              }
              break;
            case 41:
              g.sourceMask = h.sourceMask = 15;
              f += y.string(d.toGLSL() + " = vec4(greaterThanEqual(" + g.toGLSL() + ", " + h.toGLSL() + "))" + d.getWriteMask() + "; // ste");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 42:
              g.sourceMask = h.sourceMask = 15;
              f += y.string(d.toGLSL() + " = vec4(lessThan(" + g.toGLSL() + ", " + h.toGLSL() + "))" + d.getWriteMask() + "; // slt");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 44:
              g.sourceMask = h.sourceMask = 15;
              f += y.string(d.toGLSL() + " = vec4(equal(" + g.toGLSL() + ", " + h.toGLSL() + "))" + d.getWriteMask() + "; // seq");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            case 45:
              g.sourceMask = h.sourceMask = 15;
              f += y.string(d.toGLSL() + " = vec4(notEqual(" + g.toGLSL() + ", " + h.toGLSL() + "))" + d.getWriteMask() + "; // sne");
              e.addDR(d, ra.VECTOR_4);
              e.addSR(g, ra.VECTOR_4);
              e.addSR(h, ra.VECTOR_4);
              break;
            default:
              throw new ud("Opcode " + k);
          }
          f += "\n";
        }
        if (Hd.limitedProfile == null) {
          d = wg.context.getParameter(7938);
          Hd.limitedProfile = d.indexOf("OpenGL ES") > -1 || d.indexOf("WebGL") > -1;
        }
        a = "" + y.string("// AGAL " + (c == bg.VERTEX ? "vertex" : "fragment") + " shader\n");
        a = Hd.limitedProfile ? a + "#version 100\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n" : a + "#version 120\n";
        a += y.string(e.toGLSL(false));
        if (c == bg.VERTEX) {
          a += "uniform vec4 vcPositionScale;\n";
        }
        a = a + "void main() {\n" + y.string(e.toGLSL(true));
        a += y.string(f);
        if (c == bg.VERTEX) {
          a += "\tgl_Position *= vcPositionScale;\n";
        }
        return a + "}\n";
      };
      function Gi() {}
      h["openfl.display3D._internal._AGALConverter.DestRegister"] = Gi;
      Gi.__name__ = "openfl.display3D._internal._AGALConverter.DestRegister";
      Gi.parse = function (a, b) {
        var c = new Gi();
        c.programType = b;
        c.type = a >>> 24 & 15;
        c.mask = a >>> 16 & 15;
        c.n = a & 65535;
        return c;
      };
      Gi.prototype = {
        getWriteMask: function () {
          var a = ".";
          if ((this.mask & 1) != 0) {
            a += "x";
          }
          if ((this.mask & 2) != 0) {
            a += "y";
          }
          if ((this.mask & 4) != 0) {
            a += "z";
          }
          if ((this.mask & 8) != 0) {
            a += "w";
          }
          return a;
        },
        toGLSL: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.type == 3 ? this.programType == bg.VERTEX ? "gl_Position" : "gl_FragColor" : Hd.prefixFromType(this.type, this.programType) + this.n;
          if (a && this.mask != 15) {
            b += this.getWriteMask();
          }
          return b;
        },
        __class__: Gi
      };
      var bg = w["openfl.display3D._internal._AGALConverter.ProgramType"] = {
        __ename__: "openfl.display3D._internal._AGALConverter.ProgramType",
        __constructs__: null,
        VERTEX: {
          _hx_name: "VERTEX",
          _hx_index: 0,
          __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
          toString: p
        },
        FRAGMENT: {
          _hx_name: "FRAGMENT",
          _hx_index: 1,
          __enum__: "openfl.display3D._internal._AGALConverter.ProgramType",
          toString: p
        }
      };
      bg.__constructs__ = [bg.VERTEX, bg.FRAGMENT];
      function Hm() {
        this.mEntries = [];
      }
      h["openfl.display3D._internal.RegisterMap"] = Hm;
      Hm.__name__ = "openfl.display3D._internal.RegisterMap";
      Hm.prototype = {
        add: function (a, b, c, d) {
          for (var e = 0, f = this.mEntries; e < f.length;) {
            var g = f[e];
            ++e;
            if (g.type == a && g.name == b && g.number == c) {
              if (g.usage != d) {
                throw new ud("Cannot use register in multiple ways yet (mat4/vec4)");
              }
              return;
            }
          }
          g = new Po();
          g.type = a;
          g.name = b;
          g.number = c;
          g.usage = d;
          this.mEntries.push(g);
        },
        addDR: function (a, b) {
          this.add(a.type, a.toGLSL(false), a.n, b);
        },
        addSaR: function (a, b) {
          this.add(a.type, a.toGLSL(), a.n, b);
        },
        addSR: function (a, b, c) {
          if (c == null) {
            c = 0;
          }
          if (a.d != 0) {
            this.add(a.itype, Hd.prefixFromType(a.itype, a.programType) + a.n, a.n, ra.VECTOR_4);
            this.add(a.type, Hd.prefixFromType(a.type, a.programType) + a.o, a.o, ra.VECTOR_4_ARRAY);
          } else {
            this.add(a.type, a.toGLSL(false, c), a.n + c, b);
          }
        },
        getRegisterUsage: function (a) {
          if (a.d != 0) {
            return ra.VECTOR_4_ARRAY;
          } else {
            return this.getUsage(a.type, a.toGLSL(false), a.n);
          }
        },
        getUsage: function (a, b, c) {
          for (var d = 0, e = this.mEntries; d < e.length;) {
            var f = e[d];
            ++d;
            if (f.type == a && f.name == b && f.number == c) {
              return f.usage;
            }
          }
          return ra.UNUSED;
        },
        toGLSL: function (a) {
          this.mEntries.sort(function (a, b) {
            return a.number - b.number;
          });
          this.mEntries.sort(function (a, b) {
            return wa.__cast(a.type, Ck) - wa.__cast(b.type, Ck);
          });
          var b = "";
          for (var c = 0, d = this.mEntries.length; c < d;) {
            var e = c++;
            e = this.mEntries[e];
            if ((!a || e.type == 2) && (!!a || e.type != 2) && e.type != 3) {
              switch (e.type) {
                case 0:
                  b += "attribute ";
                  break;
                case 1:
                  b += "uniform ";
                  break;
                case 2:
                  b += "\t";
                  break;
                case 3:
                  break;
                case 4:
                  b += "varying ";
                  break;
                case 5:
                  b += "uniform ";
                  break;
                default:
                  throw new ud();
              }
              switch (e.usage._hx_index) {
                case 0:
                  Ua.info("Missing switch patten: RegisterUsage.UNUSED", {
                    fileName: "openfl/display3D/_internal/AGALConverter.hx",
                    lineNumber: 751,
                    className: "openfl.display3D._internal.RegisterMap",
                    methodName: "toGLSL"
                  });
                  break;
                case 1:
                  b += "vec4 ";
                  break;
                case 2:
                  b += "mat4 ";
                  break;
                case 3:
                  b += "sampler2D ";
                  break;
                case 5:
                  b += "samplerCube ";
                  break;
                case 7:
                  b += "vec4 ";
              }
              if (e.usage == ra.SAMPLER_2D_ALPHA) {
                b += "sampler2D ";
                b += y.string(e.name);
                b += ";\n";
                b += "uniform ";
                b += "sampler2D ";
                b += y.string(e.name + "_alpha");
                b += ";\n";
                b += "uniform ";
                b += "bool ";
                b += y.string(e.name + "_alphaEnabled");
              } else if (e.usage == ra.SAMPLER_CUBE_ALPHA) {
                b += "samplerCube ";
                b += y.string(e.name);
                b += ";\n";
                b += "uniform ";
                b += "samplerCube ";
                b += y.string(e.name + "_alpha");
                b += ";\n";
                b += "uniform ";
                b += "bool ";
                b += y.string(e.name + "_alphaEnabled");
              } else {
                b = e.usage == ra.VECTOR_4_ARRAY ? b + y.string(e.name + "[128]") : b + y.string(e.name);
              }
              b += ";\n";
            }
          }
          return b;
        },
        __class__: Hm
      };
      function Po() {}
      h["openfl.display3D._internal._AGALConverter.RegisterMapEntry"] = Po;
      Po.__name__ = "openfl.display3D._internal._AGALConverter.RegisterMapEntry";
      Po.prototype = {
        __class__: Po
      };
      var ra = w["openfl.display3D._internal._AGALConverter.RegisterUsage"] = {
        __ename__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
        __constructs__: null,
        UNUSED: {
          _hx_name: "UNUSED",
          _hx_index: 0,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        VECTOR_4: {
          _hx_name: "VECTOR_4",
          _hx_index: 1,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        MATRIX_4_4: {
          _hx_name: "MATRIX_4_4",
          _hx_index: 2,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_2D: {
          _hx_name: "SAMPLER_2D",
          _hx_index: 3,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_2D_ALPHA: {
          _hx_name: "SAMPLER_2D_ALPHA",
          _hx_index: 4,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_CUBE: {
          _hx_name: "SAMPLER_CUBE",
          _hx_index: 5,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        SAMPLER_CUBE_ALPHA: {
          _hx_name: "SAMPLER_CUBE_ALPHA",
          _hx_index: 6,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        },
        VECTOR_4_ARRAY: {
          _hx_name: "VECTOR_4_ARRAY",
          _hx_index: 7,
          __enum__: "openfl.display3D._internal._AGALConverter.RegisterUsage",
          toString: p
        }
      };
      ra.__constructs__ = [ra.UNUSED, ra.VECTOR_4, ra.MATRIX_4_4, ra.SAMPLER_2D, ra.SAMPLER_2D_ALPHA, ra.SAMPLER_CUBE, ra.SAMPLER_CUBE_ALPHA, ra.VECTOR_4_ARRAY];
      function Hi() {}
      h["openfl.display3D._internal._AGALConverter.SamplerRegister"] = Hi;
      Hi.__name__ = "openfl.display3D._internal._AGALConverter.SamplerRegister";
      Hi.parse = function (a, b) {
        var c = new Hi();
        c.programType = b;
        b = 60;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.f = b;
        b = 56;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.m = b;
        b = 52;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.w = b;
        b = 48;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.s = b;
        b = 44;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.d = b;
        b = 40;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.t = b;
        b = 32;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        c.type = b;
        b = 16;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        c.b = b;
        b = a.low & 65535;
        c.n = b;
        return c;
      };
      Hi.prototype = {
        toGLSL: function () {
          return Hd.prefixFromType(this.type, this.programType) + this.n;
        },
        toSamplerState: function () {
          switch (this.f) {
            case 0:
              var a = 5;
              break;
            case 1:
              a = 4;
              break;
            default:
              throw new ud();
          }
          switch (this.m) {
            case 0:
              var b = 2;
              break;
            case 1:
              b = 1;
              break;
            case 2:
              b = 0;
              break;
            default:
              throw new ud();
          }
          switch (this.w) {
            case 0:
              var c = 0;
              break;
            case 1:
              c = 2;
              break;
            default:
              throw new ud();
          }
          return new Nh(c, a, b, (this.b << 24 >> 24) / 8, (this.s & 4) == 4, (this.s & 1) == 1, this.t == 2);
        },
        __class__: Hi
      };
      function Oh() {}
      h["openfl.display3D._internal._AGALConverter.SourceRegister"] = Oh;
      Oh.__name__ = "openfl.display3D._internal._AGALConverter.SourceRegister";
      Oh.parse = function (a, b, c) {
        var d = new Oh();
        d.programType = b;
        b = 63;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 1;
        d.d = b;
        b = 48;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 3;
        d.q = b;
        b = 40;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        d.itype = b;
        b = 32;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 15;
        d.type = b;
        b = 24;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        d.s = b;
        b = 16;
        b = b == 0 ? new xb(a.high, a.low) : b < 32 ? new xb(a.high >> b, a.high << 32 - b | a.low >>> b) : new xb(a.high >> 31, a.high >> b - 32);
        b = b.low & 255;
        d.o = b;
        b = a.low & 65535;
        d.n = b;
        d.sourceMask = c;
        return d;
      };
      Oh.prototype = {
        toGLSL: function (a, b) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = true;
          }
          if (this.type == 3) {
            if (this.programType == bg.VERTEX) {
              return "gl_Position";
            } else {
              return "gl_FragColor";
            }
          }
          var c = this.s == 228 && this.sourceMask == 15;
          var d = "";
          if (this.type != 5 && !c) {
            if ((this.sourceMask & 1) != 0) {
              switch (this.s & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 2) != 0) {
              switch (this.s >> 2 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 4) != 0) {
              switch (this.s >> 4 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
            if ((this.sourceMask & 8) != 0) {
              switch (this.s >> 6 & 3) {
                case 0:
                  d += "x";
                  break;
                case 1:
                  d += "y";
                  break;
                case 2:
                  d += "z";
                  break;
                case 3:
                  d += "w";
              }
            }
          }
          c = Hd.prefixFromType(this.type, this.programType);
          if (this.d == 0) {
            c += this.n + b;
          } else {
            c += this.o;
            var e = "";
            switch (this.q) {
              case 0:
                e = "x";
                break;
              case 1:
                e = "y";
                break;
              case 2:
                e = "z";
                break;
              case 3:
                e = "w";
            }
            e = Hd.prefixFromType(this.itype, this.programType) + this.n + "." + e;
            c += "[ int(" + e + ") +" + b + "]";
          }
          if (a && d != "") {
            c += "." + d;
          }
          return c;
        },
        __class__: Oh
      };
      function Wj() {
        this.backBufferEnableDepthAndStencil = false;
        this.blendDestinationAlphaFactor = 9;
        this.blendSourceAlphaFactor = 2;
        this.blendDestinationRGBFactor = 9;
        this.blendSourceRGBFactor = 2;
        this.colorMaskAlpha = this.colorMaskBlue = this.colorMaskGreen = this.colorMaskRed = true;
        this.culling = 3;
        this.depthCompareMode = 4;
        this.depthMask = true;
        this.samplerStates = [];
        this.scissorRectangle = new ba();
        this.stencilCompareMode = 0;
        this.stencilPass = this.stencilFail = this.stencilDepthFail = 5;
        this.stencilReadMask = 255;
        this.stencilReferenceValue = 0;
        this.stencilTriangleFace = 2;
        this.stencilWriteMask = 255;
        this.textures = [];
        this.__frontFaceGLCCW = true;
        this.__glBlendEquation = 32774;
      }
      h["openfl.display3D._internal.Context3DState"] = Wj;
      Wj.__name__ = "openfl.display3D._internal.Context3DState";
      Wj.prototype = {
        __class__: Wj
      };
      function Yb(a) {
        va.call(this);
        this.__context = a;
        var b = this.__context.gl;
        this.__textureID = b.createTexture();
        this.__textureContext = this.__context.__context;
        if (Yb.__supportsBGRA == null) {
          Yb.__textureInternalFormat = b.RGBA;
          Yb.__supportsBGRA = false;
          Yb.__textureFormat = b.RGBA;
          Yb.__compressedFormats = new Ac();
          Yb.__compressedFormatsAlpha = new Ac();
          a = b.getExtension("WEBGL_compressed_texture_s3tc");
          var c = b.getExtension("WEBGL_compressed_texture_etc1");
          b = b.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
          if (a != null) {
            var d = a.COMPRESSED_RGBA_S3TC_DXT1_EXT;
            Yb.__compressedFormats.h[0] = d;
            d = a.COMPRESSED_RGBA_S3TC_DXT5_EXT;
            Yb.__compressedFormatsAlpha.h[0] = d;
          }
          if (c != null) {
            d = c.COMPRESSED_RGB_ETC1_WEBGL;
            Yb.__compressedFormats.h[2] = d;
            d = c.COMPRESSED_RGB_ETC1_WEBGL;
            Yb.__compressedFormatsAlpha.h[2] = d;
          }
          if (b != null) {
            d = b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
            Yb.__compressedFormats.h[1] = d;
            d = b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
            Yb.__compressedFormatsAlpha.h[1] = d;
          }
        }
        this.__internalFormat = Yb.__textureInternalFormat;
        this.__format = Yb.__textureFormat;
      }
      h["openfl.display3D.textures.TextureBase"] = Yb;
      Yb.__name__ = "openfl.display3D.textures.TextureBase";
      Yb.__super__ = va;
      Yb.prototype = q(va.prototype, {
        dispose: function () {
          var a = this.__context.gl;
          if (this.__alphaTexture != null) {
            this.__alphaTexture.dispose();
            this.__alphaTexture = null;
          }
          if (this.__textureID != null) {
            a.deleteTexture(this.__textureID);
            this.__textureID = null;
          }
          if (this.__glFramebuffer != null) {
            a.deleteFramebuffer(this.__glFramebuffer);
            this.__glFramebuffer = null;
          }
          if (this.__glDepthRenderbuffer != null) {
            a.deleteRenderbuffer(this.__glDepthRenderbuffer);
            this.__glDepthRenderbuffer = null;
          }
          if (this.__glStencilRenderbuffer != null) {
            a.deleteRenderbuffer(this.__glStencilRenderbuffer);
            this.__glStencilRenderbuffer = null;
          }
        },
        __getGLFramebuffer: function (a, b, c) {
          b = this.__context.gl;
          if (this.__glFramebuffer == null) {
            this.__glFramebuffer = b.createFramebuffer();
            this.__context.__bindGLFramebuffer(this.__glFramebuffer);
            b.framebufferTexture2D(b.FRAMEBUFFER, b.COLOR_ATTACHMENT0, b.TEXTURE_2D, this.__textureID, 0);
            if (this.__context.__enableErrorChecking) {
              c = b.checkFramebufferStatus(b.FRAMEBUFFER);
              if (c != b.FRAMEBUFFER_COMPLETE) {
                Ua.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {
                  fileName: "openfl/display3D/textures/TextureBase.hx",
                  lineNumber: 201,
                  className: "openfl.display3D.textures.TextureBase",
                  methodName: "__getGLFramebuffer"
                });
              }
            }
          }
          if (a && this.__glDepthRenderbuffer == null) {
            this.__context.__bindGLFramebuffer(this.__glFramebuffer);
            if (Kb.__glDepthStencil != 0) {
              this.__glStencilRenderbuffer = this.__glDepthRenderbuffer = b.createRenderbuffer();
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, Kb.__glDepthStencil, this.__width, this.__height);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer);
            } else {
              this.__glDepthRenderbuffer = b.createRenderbuffer();
              this.__glStencilRenderbuffer = b.createRenderbuffer();
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, b.DEPTH_COMPONENT16, this.__width, this.__height);
              b.bindRenderbuffer(b.RENDERBUFFER, this.__glStencilRenderbuffer);
              b.renderbufferStorage(b.RENDERBUFFER, b.STENCIL_INDEX8, this.__width, this.__height);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.DEPTH_ATTACHMENT, b.RENDERBUFFER, this.__glDepthRenderbuffer);
              b.framebufferRenderbuffer(b.FRAMEBUFFER, b.STENCIL_ATTACHMENT, b.RENDERBUFFER, this.__glStencilRenderbuffer);
            }
            if (this.__context.__enableErrorChecking) {
              c = b.checkFramebufferStatus(b.FRAMEBUFFER);
              if (c != b.FRAMEBUFFER_COMPLETE) {
                Ua.warn("Error: Context3D.setRenderToTexture status:" + c + " width:" + this.__width + " height:" + this.__height, {
                  fileName: "openfl/display3D/textures/TextureBase.hx",
                  lineNumber: 239,
                  className: "openfl.display3D.textures.TextureBase",
                  methodName: "__getGLFramebuffer"
                });
              }
            }
            b.bindRenderbuffer(b.RENDERBUFFER, null);
          }
          return this.__glFramebuffer;
        },
        __getImage: function (a) {
          var b = a.image;
          if (!a.__isValid || b == null) {
            return null;
          }
          Wa.sync(b, false);
          a = this.__context.gl;
          if (b.type == Gd.DATA || b.get_premultiplied()) {
            if (!b.get_premultiplied() && b.get_transparent()) {
              a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 0);
              b = b.clone();
              b.set_premultiplied(true);
            }
          } else {
            a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
          }
          if (b.get_format() != 0) {
            b = b.clone();
            b.set_format(0);
            b.buffer.premultiplied = true;
          }
          return b;
        },
        __getTexture: function () {
          return this.__textureID;
        },
        __setSamplerState: function (a) {
          if (!a.equals(this.__samplerState)) {
            var b = this.__context.gl;
            if (this.__textureTarget == this.__context.gl.TEXTURE_CUBE_MAP) {
              this.__context.__bindGLTextureCubeMap(this.__textureID);
            } else {
              this.__context.__bindGLTexture2D(this.__textureID);
            }
            var c;
            switch (a.wrap) {
              case 0:
                var d = c = b.CLAMP_TO_EDGE;
                break;
              case 1:
                c = b.CLAMP_TO_EDGE;
                d = b.REPEAT;
                break;
              case 2:
                d = c = b.REPEAT;
                break;
              case 3:
                c = b.REPEAT;
                d = b.CLAMP_TO_EDGE;
                break;
              default:
                throw new Sb("wrap bad enum");
            }
            var e = a.filter == 5 ? b.NEAREST : b.LINEAR;
            switch (a.mipfilter) {
              case 0:
                var f = a.filter == 5 ? b.NEAREST_MIPMAP_LINEAR : b.LINEAR_MIPMAP_LINEAR;
                break;
              case 1:
                f = a.filter == 5 ? b.NEAREST_MIPMAP_NEAREST : b.LINEAR_MIPMAP_NEAREST;
                break;
              case 2:
                f = a.filter == 5 ? b.NEAREST : b.LINEAR;
                break;
              default:
                throw new Sb("mipfiter bad enum");
            }
            b.texParameteri(this.__textureTarget, b.TEXTURE_MIN_FILTER, f);
            b.texParameteri(this.__textureTarget, b.TEXTURE_MAG_FILTER, e);
            b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_S, c);
            b.texParameteri(this.__textureTarget, b.TEXTURE_WRAP_T, d);
            if (this.__samplerState == null) {
              this.__samplerState = a.clone();
            }
            this.__samplerState.copyFrom(a);
            return true;
          }
          return false;
        },
        __uploadFromImage: function (a) {
          var b = this.__context.gl;
          var c;
          if (this.__textureTarget == b.TEXTURE_2D) {
            if (a.buffer.bitsPerPixel == 1) {
              var d = c = b.ALPHA;
            } else {
              c = Yb.__textureInternalFormat;
              d = Yb.__textureFormat;
            }
            this.__context.__bindGLTexture2D(this.__textureID);
            if (a.type == Gd.DATA || a.get_premultiplied()) {
              if (!a.get_premultiplied() && a.get_transparent()) {
                b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
              }
            } else {
              b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL, 1);
            }
            if (a.type == Gd.DATA) {
              Yc.texImage2D(b, b.TEXTURE_2D, 0, c, a.buffer.width, a.buffer.height, 0, d, b.UNSIGNED_BYTE, a.get_data());
            } else {
              Yc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, a.get_src());
            }
            this.__context.__bindGLTexture2D(null);
          }
        },
        __class__: Yb
      });
      function Fm(a, b, c, d, e) {
        Yb.call(this, a);
        this.__width = this.__height = this.__size = b;
        this.__optimizeForRenderToTexture = d;
        this.__streamingLevels = e;
        this.__textureTarget = this.__context.gl.TEXTURE_CUBE_MAP;
        this.__uploadedSides = 0;
      }
      h["openfl.display3D.textures.CubeTexture"] = Fm;
      Fm.__name__ = "openfl.display3D.textures.CubeTexture";
      Fm.__super__ = Yb;
      Fm.prototype = q(Yb.prototype, {
        __getGLFramebuffer: function (a, b, c) {
          var d = this.__context.gl;
          if (this.__glFramebuffer == null) {
            this.__glFramebuffer = d.createFramebuffer();
            this.__framebufferSurface = -1;
          }
          if (this.__framebufferSurface != c && (this.__framebufferSurface = c, this.__context.__bindGLFramebuffer(this.__glFramebuffer), d.framebufferTexture2D(d.FRAMEBUFFER, d.COLOR_ATTACHMENT0, d.TEXTURE_CUBE_MAP_POSITIVE_X + c, this.__textureID, 0), this.__context.__enableErrorChecking)) {
            var e = d.checkFramebufferStatus(d.FRAMEBUFFER);
            if (e != d.FRAMEBUFFER_COMPLETE) {
              Ua.error("Error: Context3D.setRenderToTexture status:" + e + " width:" + this.__width + " height:" + this.__height, {
                fileName: "openfl/display3D/textures/CubeTexture.hx",
                lineNumber: 279,
                className: "openfl.display3D.textures.CubeTexture",
                methodName: "__getGLFramebuffer"
              });
            }
          }
          return Yb.prototype.__getGLFramebuffer.call(this, a, b, c);
        },
        __setSamplerState: function (a) {
          if (Yb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (a.mipfilter != 2 && !this.__samplerState.mipmapGenerated) {
              b.generateMipmap(b.TEXTURE_CUBE_MAP);
              this.__samplerState.mipmapGenerated = true;
            }
            if (Kb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Kb.__glMaxTextureMaxAnisotropy) {
                a = Kb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_CUBE_MAP, Kb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Fm
      });
      function Xj(a, b, c, d, e) {
        Yb.call(this, a);
        this.__width = b;
        this.__height = c;
        this.__optimizeForRenderToTexture = e;
        this.__textureTarget = this.__context.gl.TEXTURE_2D;
        this.uploadFromTypedArray(null);
        if (e) {
          this.__getGLFramebuffer(true, 0, 0);
        }
      }
      h["openfl.display3D.textures.RectangleTexture"] = Xj;
      Xj.__name__ = "openfl.display3D.textures.RectangleTexture";
      Xj.__super__ = Yb;
      Xj.prototype = q(Yb.prototype, {
        uploadFromBitmapData: function (a) {
          if (a != null && (a = this.__getImage(a), a != null)) {
            if (a.buffer != null && a.buffer.data == null && a.buffer.get_src() != null) {
              var b = this.__context.gl;
              this.__context.__bindGLTexture2D(this.__textureID);
              Yc.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__format, b.UNSIGNED_BYTE, a.buffer.get_src());
              this.__context.__bindGLTexture2D(null);
            } else {
              this.uploadFromTypedArray(a.get_data());
            }
          }
        },
        uploadFromTypedArray: function (a) {
          var b = this.__context.gl;
          this.__context.__bindGLTexture2D(this.__textureID);
          Yc.texImage2D(b, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, b.UNSIGNED_BYTE, a);
          this.__context.__bindGLTexture2D(null);
        },
        __setSamplerState: function (a) {
          if (Yb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (Kb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Kb.__glMaxTextureMaxAnisotropy) {
                a = Kb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_2D, Kb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Xj
      });
      function Em(a, b, c, d, e, f) {
        Yb.call(this, a);
        this.__width = b;
        this.__height = c;
        this.__optimizeForRenderToTexture = e;
        this.__streamingLevels = f;
        a = this.__context.gl;
        this.__textureTarget = a.TEXTURE_2D;
        this.__context.__bindGLTexture2D(this.__textureID);
        Yc.texImage2D(a, this.__textureTarget, 0, this.__internalFormat, this.__width, this.__height, 0, this.__format, a.UNSIGNED_BYTE, null);
        this.__context.__bindGLTexture2D(null);
        if (e) {
          this.__getGLFramebuffer(true, 0, 0);
        }
      }
      h["openfl.display3D.textures.Texture"] = Em;
      Em.__name__ = "openfl.display3D.textures.Texture";
      Em.__super__ = Yb;
      Em.prototype = q(Yb.prototype, {
        __setSamplerState: function (a) {
          if (Yb.prototype.__setSamplerState.call(this, a)) {
            var b = this.__context.gl;
            if (a.mipfilter != 2 && !this.__samplerState.mipmapGenerated) {
              b.generateMipmap(b.TEXTURE_2D);
              this.__samplerState.mipmapGenerated = true;
            }
            if (Kb.__glMaxTextureMaxAnisotropy != 0) {
              switch (a.filter) {
                case 0:
                  a = 16;
                  break;
                case 1:
                  a = 2;
                  break;
                case 2:
                  a = 4;
                  break;
                case 3:
                  a = 8;
                  break;
                default:
                  a = 1;
              }
              if (a > Kb.__glMaxTextureMaxAnisotropy) {
                a = Kb.__glMaxTextureMaxAnisotropy;
              }
              b.texParameterf(b.TEXTURE_2D, Kb.__glTextureMaxAnisotropy, a);
            }
            return true;
          }
          return false;
        },
        __class__: Em
      });
      function Qo(a) {
        Yb.call(this, a);
        this.__textureTarget = this.__context.gl.TEXTURE_2D;
      }
      h["openfl.display3D.textures.VideoTexture"] = Qo;
      Qo.__name__ = "openfl.display3D.textures.VideoTexture";
      Qo.__super__ = Yb;
      Qo.prototype = q(Yb.prototype, {
        dispose: function () {
          if (this.__netStream != null && this.__netStream.__video != null) {
            this.__netStream.__video.removeEventListener("timeupdate", n(this, this.__onTimeUpdate));
          }
          Yb.prototype.dispose.call(this);
        },
        __onTimeUpdate: function (a) {
          if (this.__netStream != null && this.__netStream.__video.currentTime != this.__cacheTime && this.__netStream.__video.readyState >= 2) {
            this.__textureReady();
          }
        },
        __getTexture: function () {
          if (this.__netStream.__video.currentTime != this.__cacheTime && this.__netStream.__video.readyState >= 2) {
            var a = this.__context.gl;
            this.__context.__bindGLTexture2D(this.__textureID);
            Yc.texImage2D(a, a.TEXTURE_2D, 0, a.RGBA, a.RGBA, a.UNSIGNED_BYTE, this.__netStream.__video);
            this.__cacheTime = this.__netStream.__video.currentTime;
          }
          return this.__textureID;
        },
        __textureReady: function () {
          this.videoWidth = this.__netStream.__video.videoWidth;
          this.videoHeight = this.__netStream.__video.videoHeight;
          var a = new za("textureReady");
          this.dispatchEvent(a);
        },
        __class__: Qo
      });
      function Sb(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        I.call(this, a);
        this.errorID = b;
        this.name = "Error";
        this.__skipStack++;
      }
      h["openfl.errors.Error"] = Sb;
      Sb.__name__ = "openfl.errors.Error";
      Sb.__super__ = I;
      Sb.prototype = q(I.prototype, {
        toString: function () {
          return this.get_message() ?? "Error";
        },
        __class__: Sb
      });
      function mh(a) {
        if (a == null) {
          a = "";
        }
        Sb.call(this, a);
        this.name = "ArgumentError";
        this.__skipStack++;
      }
      h["openfl.errors.ArgumentError"] = mh;
      mh.__name__ = "openfl.errors.ArgumentError";
      mh.__super__ = Sb;
      mh.prototype = q(Sb.prototype, {
        __class__: mh
      });
      function Ii(a) {
        if (a == null) {
          a = "";
        }
        Sb.call(this, a);
        this.name = "IOError";
        this.__skipStack++;
      }
      h["openfl.errors.IOError"] = Ii;
      Ii.__name__ = "openfl.errors.IOError";
      Ii.__super__ = Sb;
      Ii.prototype = q(Sb.prototype, {
        __class__: Ii
      });
      function xj(a, b) {
        Ii.call(this, "End of file was encountered");
        this.name = "EOFError";
        this.errorID = 2030;
        this.__skipStack++;
      }
      h["openfl.errors.EOFError"] = xj;
      xj.__name__ = "openfl.errors.EOFError";
      xj.__super__ = Ii;
      xj.prototype = q(Ii.prototype, {
        __class__: xj
      });
      function ud(a) {
        if (a == null) {
          a = "";
        }
        Sb.call(this, a, 0);
        this.name = "IllegalOperationError";
        this.__skipStack++;
      }
      h["openfl.errors.IllegalOperationError"] = ud;
      ud.__name__ = "openfl.errors.IllegalOperationError";
      ud.__super__ = Sb;
      ud.prototype = q(Sb.prototype, {
        __class__: ud
      });
      function Qi(a) {
        if (a == null) {
          a = "";
        }
        Sb.call(this, a, 0);
        this.name = "RangeError";
        this.__skipStack++;
      }
      h["openfl.errors.RangeError"] = Qi;
      Qi.__name__ = "openfl.errors.RangeError";
      Qi.__super__ = Sb;
      Qi.prototype = q(Sb.prototype, {
        __class__: Qi
      });
      function lh(a) {
        if (a == null) {
          a = "";
        }
        Sb.call(this, a, 0);
        this.name = "TypeError";
        this.__skipStack++;
      }
      h["openfl.errors.TypeError"] = lh;
      lh.__name__ = "openfl.errors.TypeError";
      lh.__super__ = Sb;
      lh.prototype = q(Sb.prototype, {
        __class__: lh
      });
      function za(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.type = a;
        this.bubbles = b;
        this.cancelable = c;
        this.eventPhase = 2;
      }
      h["openfl.events.Event"] = za;
      za.__name__ = "openfl.events.Event";
      za.prototype = {
        isDefaultPrevented: function () {
          return this.__preventDefault;
        },
        preventDefault: function () {
          if (this.cancelable) {
            this.__preventDefault = true;
          }
        },
        stopImmediatePropagation: function () {
          this.__isCanceledNow = this.__isCanceled = true;
        },
        stopPropagation: function () {
          this.__isCanceled = true;
        },
        __class__: za
      };
      function Im(a, b, c, d, e, f, g) {
        if (g == null) {
          g = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        za.call(this, a, b, c);
        this.timestamp = d;
        this.accelerationX = e;
        this.accelerationY = f;
        this.accelerationZ = g;
      }
      h["openfl.events.AccelerometerEvent"] = Im;
      Im.__name__ = "openfl.events.AccelerometerEvent";
      Im.__super__ = za;
      Im.prototype = q(za.prototype, {
        __class__: Im
      });
      function Ji(a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        za.call(this, a, b, c);
        this.activating = d;
      }
      h["openfl.events.ActivityEvent"] = Ji;
      Ji.__name__ = "openfl.events.ActivityEvent";
      Ji.__super__ = za;
      Ji.prototype = q(za.prototype, {
        __class__: Ji
      });
      function Uf(a, b, c, d) {
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        za.call(this, a, b, c);
        this.text = d;
      }
      h["openfl.events.TextEvent"] = Uf;
      Uf.__name__ = "openfl.events.TextEvent";
      Uf.__super__ = za;
      Uf.prototype = q(za.prototype, {
        __class__: Uf
      });
      function Te(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Uf.call(this, a, b, c, d);
        this.errorID = e;
      }
      h["openfl.events.ErrorEvent"] = Te;
      Te.__name__ = "openfl.events.ErrorEvent";
      Te.__super__ = Uf;
      Te.prototype = q(Uf.prototype, {
        __class__: Te
      });
      function Pi(a) {
        this.active = false;
        this.reset(a);
      }
      h["openfl.events._EventDispatcher.DispatchIterator"] = Pi;
      Pi.__name__ = "openfl.events._EventDispatcher.DispatchIterator";
      Pi.prototype = {
        copy: function () {
          if (!this.isCopy) {
            this.list = this.list.slice();
            this.isCopy = true;
          }
        },
        hasNext: function () {
          return this.index < this.list.length;
        },
        next: function () {
          return this.list[this.index++];
        },
        remove: function (a, b) {
          if (this.active) {
            if (this.isCopy) {
              b = this.index;
              for (var c = this.list.length; b < c;) {
                var d = b++;
                if (this.list[d] == a) {
                  this.list.splice(d, 1);
                  break;
                }
              }
            } else if (b < this.index) {
              this.index--;
            }
          }
        },
        reset: function (a) {
          this.list = a;
          this.isCopy = false;
          this.index = 0;
        },
        start: function () {
          this.active = true;
        },
        stop: function () {
          this.active = false;
        },
        __class__: Pi
      };
      function jh(a, b, c, d) {
        if (d && jh.supportsWeakReference) {
          this.weakRefCallback = new WeakRef(a);
        } else {
          this.callback = a;
        }
        this.useCapture = b;
        this.priority = c;
        this.useWeakReference = d;
      }
      h["openfl.events._EventDispatcher.Listener"] = jh;
      jh.__name__ = "openfl.events._EventDispatcher.Listener";
      jh.prototype = {
        match: function (a, b) {
          var c = this.callback;
          if (this.weakRefCallback != null && (c = this.weakRefCallback.deref(), c == null)) {
            return false;
          } else if (c == a) {
            return this.useCapture == b;
          } else {
            return false;
          }
        },
        __class__: jh
      };
      function Lh(a, b, c, d, e, f) {
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        za.call(this, a, b, c);
        this.keyCode = f;
        this.shiftKey = e;
        this.relatedObject = d;
      }
      h["openfl.events.FocusEvent"] = Lh;
      Lh.__name__ = "openfl.events.FocusEvent";
      Lh.__super__ = za;
      Lh.prototype = q(za.prototype, {
        __class__: Lh
      });
      function Cg(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Ji.call(this, a, b, c);
        this.fullScreen = d;
        this.interactive = e;
      }
      h["openfl.events.FullScreenEvent"] = Cg;
      Cg.__name__ = "openfl.events.FullScreenEvent";
      Cg.__super__ = Ji;
      Cg.prototype = q(Ji.prototype, {
        __class__: Cg
      });
      function fi(a, b, c, d) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        za.call(this, a, b, c);
        this.device = d;
      }
      h["openfl.events.GameInputEvent"] = fi;
      fi.__name__ = "openfl.events.GameInputEvent";
      fi.__super__ = za;
      fi.prototype = q(za.prototype, {
        __class__: fi
      });
      function Zj(a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.responseHeaders = [];
        this.status = d;
        this.redirected = e;
        za.call(this, a, b, c);
      }
      h["openfl.events.HTTPStatusEvent"] = Zj;
      Zj.__name__ = "openfl.events.HTTPStatusEvent";
      Zj.__super__ = za;
      Zj.prototype = q(za.prototype, {
        __class__: Zj
      });
      function ak(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        Te.call(this, a, b, c, d, e);
      }
      h["openfl.events.IOErrorEvent"] = ak;
      ak.__name__ = "openfl.events.IOErrorEvent";
      ak.__super__ = Te;
      ak.prototype = q(Te.prototype, {
        __class__: ak
      });
      function Bm(a, b, c, d, e, f, g, h, l, p, n) {
        if (n == null) {
          n = false;
        }
        if (p == null) {
          p = false;
        }
        if (l == null) {
          l = false;
        }
        if (h == null) {
          h = false;
        }
        if (g == null) {
          g = false;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        za.call(this, a, b, c);
        this.charCode = d;
        this.keyCode = e;
        this.keyLocation = f ?? 0;
        this.ctrlKey = g;
        this.altKey = h;
        this.shiftKey = l;
        this.controlKey = p;
        this.commandKey = n;
        this.__updateAfterEventFlag = false;
      }
      h["openfl.events.KeyboardEvent"] = Bm;
      Bm.__name__ = "openfl.events.KeyboardEvent";
      Bm.__super__ = za;
      Bm.prototype = q(za.prototype, {
        __class__: Bm
      });
      function Wb(a, b, c, d, e, f, g, h, l, p, n, m, r, q) {
        if (q == null) {
          q = 0;
        }
        if (r == null) {
          r = false;
        }
        if (m == null) {
          m = false;
        }
        if (n == null) {
          n = 0;
        }
        if (p == null) {
          p = false;
        }
        if (l == null) {
          l = false;
        }
        if (h == null) {
          h = false;
        }
        if (g == null) {
          g = false;
        }
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        za.call(this, a, b, c);
        this.shiftKey = l;
        this.altKey = h;
        this.ctrlKey = g;
        this.bubbles = b;
        this.relatedObject = f;
        this.delta = n;
        this.localX = d;
        this.localY = e;
        this.buttonDown = p;
        this.commandKey = m;
        this.controlKey = r;
        this.clickCount = q;
        this.isRelatedObjectInaccessible = false;
        this.stageY = this.stageX = NaN;
        this.__updateAfterEventFlag = false;
      }
      h["openfl.events.MouseEvent"] = Wb;
      Wb.__name__ = "openfl.events.MouseEvent";
      Wb.__create = function (a, b, c, d, e, f, g, h) {
        if (h == null) {
          h = 0;
        }
        a = new Wb(a, true, false, f.x, f.y, null, Wb.__ctrlKey, Wb.__altKey, Wb.__shiftKey, Wb.__buttonDown, h, Wb.__commandKey, Wb.__controlKey, c);
        a.stageX = d;
        a.stageY = e;
        a.target = g;
        return a;
      };
      Wb.__super__ = za;
      Wb.prototype = q(za.prototype, {
        __class__: Wb
      });
      function bk(a, b, c, d) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        this.info = d;
        za.call(this, a, b, c);
      }
      h["openfl.events.NetStatusEvent"] = bk;
      bk.__name__ = "openfl.events.NetStatusEvent";
      bk.__super__ = za;
      bk.prototype = q(za.prototype, {
        __class__: bk
      });
      function Hh(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        za.call(this, a, b, c);
        this.bytesLoaded = d;
        this.bytesTotal = e;
      }
      h["openfl.events.ProgressEvent"] = Hh;
      Hh.__name__ = "openfl.events.ProgressEvent";
      Hh.__super__ = za;
      Hh.prototype = q(za.prototype, {
        __class__: Hh
      });
      function nk(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        za.call(this, a, b, c);
        this.objectMatrix = d;
        this.objectColorTransform = e;
        this.allowSmoothing = f;
      }
      h["openfl.events.RenderEvent"] = nk;
      nk.__name__ = "openfl.events.RenderEvent";
      nk.__super__ = za;
      nk.prototype = q(za.prototype, {
        __class__: nk
      });
      function Jm(a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        za.call(this, a, b, c);
        this.data = new sd(0);
        this.data.__endian = 1;
        this.position = 0;
      }
      h["openfl.events.SampleDataEvent"] = Jm;
      Jm.__name__ = "openfl.events.SampleDataEvent";
      Jm.__super__ = za;
      Jm.prototype = q(za.prototype, {
        getBufferSize: function () {
          var a = mc.toFloat(Oe.get_length(this.data)) / mc.toFloat(4) / 2 | 0;
          if (a > 0) {
            if (a != 0 && (a & a - 1) == 0 && a >= 2048 && a <= 8192) {
              this.tempBuffer = new Float32Array(a * 2);
              return a;
            }
            throw new Sb("To be consistent with flash the listener function registered to SampleDataEvent has to provide 2048, 4096 or 8192 samples if targeting HTML5.");
          }
          return 0;
        },
        getSamples: function (a) {
          this.data.position = 0;
          this.tempBuffer = Qp.fromBytes(Oe.toBytes(this.data));
          this.leftChannel = a.outputBuffer.getChannelData(0);
          this.rightChannel = a.outputBuffer.getChannelData(1);
          for (var b = a = 0, c = mc.toFloat(Oe.get_length(this.data)) / mc.toFloat(2) | 0; b < c;) {
            var d = b++;
            this.leftChannel[d] = this.tempBuffer[a++];
            this.rightChannel[d] = this.tempBuffer[a++];
          }
        },
        __class__: Jm
      });
      function Km(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = "";
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = false;
        }
        Te.call(this, a, b, c, d, e);
      }
      h["openfl.events.SecurityErrorEvent"] = Km;
      Km.__name__ = "openfl.events.SecurityErrorEvent";
      Km.__super__ = Te;
      Km.prototype = q(Te.prototype, {
        __class__: Km
      });
      function Ve(a, b, c, d, e, f, g, h, l, p, n, m, r, q, w, u, v, y, z, Y) {
        if (u == null) {
          u = false;
        }
        if (w == null) {
          w = false;
        }
        if (q == null) {
          q = false;
        }
        if (r == null) {
          r = false;
        }
        if (m == null) {
          m = false;
        }
        if (p == null) {
          p = 0;
        }
        if (l == null) {
          l = 0;
        }
        if (h == null) {
          h = 0;
        }
        if (g == null) {
          g = 0;
        }
        if (f == null) {
          f = 0;
        }
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        za.call(this, a, b, c);
        this.touchPointID = d;
        this.isPrimaryTouchPoint = e;
        this.localX = f;
        this.localY = g;
        this.sizeX = h;
        this.sizeY = l;
        this.pressure = p;
        this.relatedObject = n;
        this.ctrlKey = m;
        this.altKey = r;
        this.shiftKey = q;
        this.commandKey = w;
        this.controlKey = u;
        this.stageY = this.stageX = NaN;
        this.__updateAfterEventFlag = false;
      }
      h["openfl.events.TouchEvent"] = Ve;
      Ve.__name__ = "openfl.events.TouchEvent";
      Ve.__create = function (a, b, c, d, e, f) {
        a = new Ve(a, true, false, 0, true, e.x, e.y, 1, 1, 1);
        a.stageX = c;
        a.stageY = d;
        a.target = f;
        return a;
      };
      Ve.__super__ = za;
      Ve.prototype = q(za.prototype, {
        __class__: Ve
      });
      function Ph(a, b, c, d) {
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        Te.call(this, a, b, c);
        this.error = d;
      }
      h["openfl.events.UncaughtErrorEvent"] = Ph;
      Ph.__name__ = "openfl.events.UncaughtErrorEvent";
      Ph.__super__ = Te;
      Ph.prototype = q(Te.prototype, {
        __class__: Ph
      });
      function wm() {
        this.__enabled = true;
        va.call(this);
      }
      h["openfl.events.UncaughtErrorEvents"] = wm;
      wm.__name__ = "openfl.events.UncaughtErrorEvents";
      wm.__super__ = va;
      wm.prototype = q(va.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          va.prototype.addEventListener.call(this, a, b, c, d, e);
          if (Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError")) {
            this.__enabled = true;
          }
        },
        removeEventListener: function (a, b, c) {
          if (c == null) {
            c = false;
          }
          va.prototype.removeEventListener.call(this, a, b, c);
          if (!Object.prototype.hasOwnProperty.call(this.__eventMap.h, "uncaughtError")) {
            this.__enabled = false;
          }
        },
        __class__: wm
      });
      var Pp = {
        fromString: function (a) {
          switch (a) {
            case "full":
              return 0;
            case "inner":
              return 1;
            case "outer":
              return 2;
            default:
              return null;
          }
        }
      };
      function Lm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "uniform sampler2D openfl_Texture;\n\n\t\tvarying vec2 vBlurCoords[7];\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 sum = vec4(0.0);\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[0]) * 0.00443;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[1]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[2]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[3]) * 0.39894;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[4]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[5]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[6]) * 0.00443;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vBlurCoords[7];\n\t\tuniform vec2 uTextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\tvec2 r = uRadius / uTextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * 0.75;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * 0.5;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * 0.5;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * 0.75;\n\t\t\tvBlurCoords[6] = openfl_TextureCoord + r;\n\n\t\t}";
        }
        qc.call(this);
        this.uRadius.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._BlurFilter.BlurShader"] = Lm;
      Lm.__name__ = "openfl.filters._BlurFilter.BlurShader";
      Lm.__super__ = qc;
      Lm.prototype = q(qc.prototype, {
        __update: function () {
          this.uTextureSize.value = [this.__texture.input.width, this.__texture.input.height];
          qc.prototype.__update.call(this);
        },
        __class__: Lm
      });
      function Gf(a, b, c) {
        if (c == null) {
          c = 1;
        }
        if (b == null) {
          b = 4;
        }
        if (a == null) {
          a = 4;
        }
        ne.call(this);
        this.set_blurX(a);
        this.set_blurY(b);
        this.set_quality(c);
        this.__needSecondBitmapData = true;
        this.__preserveObject = false;
        this.__renderDirty = true;
      }
      h["openfl.filters.BlurFilter"] = Gf;
      Gf.__name__ = "openfl.filters.BlurFilter";
      Gf.__super__ = ne;
      Gf.prototype = q(ne.prototype, {
        clone: function () {
          return new Gf(this.__blurX, this.__blurY, this.__quality);
        },
        __applyFilter: function (a, b, c, d) {
          new Date().getTime();
          c = zc.gaussianBlur(a.image, b.image, c.__toLimeRectangle(), d.__toLimeVector2(), this.__blurX, this.__blurY, this.__quality);
          new Date().getTime();
          if (c == a.image) {
            return a;
          } else {
            return b;
          }
        },
        __initShader: function (a, b, c) {
          if (b < this.__horizontalPasses) {
            a = Math.pow(0.5, b >> 1);
            Gf.__blurShader.uRadius.value[0] = this.get_blurX() * a;
            Gf.__blurShader.uRadius.value[1] = 0;
          } else {
            a = Math.pow(0.5, b - this.__horizontalPasses >> 1);
            Gf.__blurShader.uRadius.value[0] = 0;
            Gf.__blurShader.uRadius.value[1] = this.get_blurY() * a;
          }
          return Gf.__blurShader;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        set_blurX: function (a) {
          if (a != this.__blurX) {
            this.__blurX = a;
            this.__renderDirty = true;
            this.__rightExtension = this.__leftExtension = a > 0 ? Math.ceil(a) : 0;
          }
          return a;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        set_blurY: function (a) {
          if (a != this.__blurY) {
            this.__blurY = a;
            this.__renderDirty = true;
            this.__bottomExtension = this.__topExtension = a > 0 ? Math.ceil(a) : 0;
          }
          return a;
        },
        set_quality: function (a) {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(a / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(a / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses;
          if (a != this.__quality) {
            this.__renderDirty = true;
          }
          return this.__quality = a;
        },
        __class__: Gf,
        __properties__: {
          set_quality: "set_quality",
          set_blurY: "set_blurY",
          get_blurY: "get_blurY",
          set_blurX: "set_blurX",
          get_blurX: "get_blurX"
        }
      });
      function ck() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "varying vec2 openfl_TextureCoordv;\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tuniform mat4 uMultipliers;\n\t\tuniform vec4 uOffsets;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t} else {\n\n\t\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\tcolor = uOffsets + color * uMultipliers;\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a, color.a);\n\n\t\t\t}\n\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\n\t\t}";
        }
        qc.call(this);
        this.uMultipliers.value = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
        this.uOffsets.value = [0, 0, 0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._ColorMatrixFilter.ColorMatrixShader"] = ck;
      ck.__name__ = "openfl.filters._ColorMatrixFilter.ColorMatrixShader";
      ck.__super__ = qc;
      ck.prototype = q(qc.prototype, {
        init: function (a) {
          var b = this.uMultipliers.value;
          var c = this.uOffsets.value;
          b[0] = a[0];
          b[1] = a[1];
          b[2] = a[2];
          b[3] = a[3];
          b[4] = a[5];
          b[5] = a[6];
          b[6] = a[7];
          b[7] = a[8];
          b[8] = a[10];
          b[9] = a[11];
          b[10] = a[12];
          b[11] = a[13];
          b[12] = a[15];
          b[13] = a[16];
          b[14] = a[17];
          b[15] = a[18];
          c[0] = a[4] / 255;
          c[1] = a[9] / 255;
          c[2] = a[14] / 255;
          c[3] = a[19] / 255;
        },
        __class__: ck
      });
      function Vg(a) {
        ne.call(this);
        this.set_matrix(a);
        this.__numShaderPasses = 1;
        this.__needSecondBitmapData = false;
      }
      h["openfl.filters.ColorMatrixFilter"] = Vg;
      Vg.__name__ = "openfl.filters.ColorMatrixFilter";
      Vg.__super__ = ne;
      Vg.prototype = q(ne.prototype, {
        clone: function () {
          return new Vg(this.__matrix);
        },
        __applyFilter: function (a, b, c, d) {
          var e = b.image;
          var f = a.image;
          Wa.convertToData(e);
          Wa.convertToData(f);
          var g = e.get_data();
          var h = f.get_data();
          var l = d.x - c.x | 0;
          d = d.y - c.y | 0;
          b = b.width * 4;
          var p = a.width * 4;
          var n = e.buffer.format;
          var m = f.buffer.format;
          e = e.buffer.premultiplied;
          f = f.buffer.premultiplied;
          var r = 0;
          var q = 0;
          var w;
          var u;
          for (var v = c.y | 0, y = c.height | 0; v < y;) {
            var z = v++;
            for (var Y = c.x | 0, A = c.width | 0; Y < A;) {
              u = Y++;
              w = z * b + u * 4;
              u = (z + l) * p + (u + d) * 4;
              var C = n;
              var D = e;
              if (D == null) {
                D = false;
              }
              if (C == null) {
                C = 0;
              }
              switch (C) {
                case 0:
                  r = (g[w] & 255) << 24 | (g[w + 1] & 255) << 16 | (g[w + 2] & 255) << 8 | g[w + 3] & 255;
                  break;
                case 1:
                  r = (g[w + 1] & 255) << 24 | (g[w + 2] & 255) << 16 | (g[w + 3] & 255) << 8 | g[w] & 255;
                  break;
                case 2:
                  r = (g[w + 2] & 255) << 24 | (g[w + 1] & 255) << 16 | (g[w] & 255) << 8 | g[w + 3] & 255;
              }
              if (D && (r & 255) != 0 && (r & 255) != 255) {
                O.unmult = 255 / (r & 255);
                r = (O.__clamp[Math.round((r >>> 24 & 255) * O.unmult)] & 255) << 24 | (O.__clamp[Math.round((r >>> 16 & 255) * O.unmult)] & 255) << 16 | (O.__clamp[Math.round((r >>> 8 & 255) * O.unmult)] & 255) << 8 | r & 255;
              }
              if ((r & 255) == 0) {
                q = 0;
              } else {
                q = ((Math.max(0, Math.min(this.__matrix[0] * (r >>> 24 & 255) + this.__matrix[1] * (r >>> 16 & 255) + this.__matrix[2] * (r >>> 8 & 255) + this.__matrix[3] * (r & 255) + this.__matrix[4], 255)) | 0) & 255) << 24 | (q >>> 16 & 255) << 16 | (q >>> 8 & 255) << 8 | q & 255;
                q = (q >>> 24 & 255) << 24 | ((Math.max(0, Math.min(this.__matrix[5] * (r >>> 24 & 255) + this.__matrix[6] * (r >>> 16 & 255) + this.__matrix[7] * (r >>> 8 & 255) + this.__matrix[8] * (r & 255) + this.__matrix[9], 255)) | 0) & 255) << 16 | (q >>> 8 & 255) << 8 | q & 255;
                q = (q >>> 24 & 255) << 24 | (q >>> 16 & 255) << 16 | ((Math.max(0, Math.min(this.__matrix[10] * (r >>> 24 & 255) + this.__matrix[11] * (r >>> 16 & 255) + this.__matrix[12] * (r >>> 8 & 255) + this.__matrix[13] * (r & 255) + this.__matrix[14], 255)) | 0) & 255) << 8 | q & 255;
                q = (q >>> 24 & 255) << 24 | (q >>> 16 & 255) << 16 | (q >>> 8 & 255) << 8 | (Math.max(0, Math.min(this.__matrix[15] * (r >>> 24 & 255) + this.__matrix[16] * (r >>> 16 & 255) + this.__matrix[17] * (r >>> 8 & 255) + this.__matrix[18] * (r & 255) + this.__matrix[19], 255)) | 0) & 255;
              }
              w = m;
              C = f;
              if (C == null) {
                C = false;
              }
              if (w == null) {
                w = 0;
              }
              if (C) {
                if ((q & 255) == 0) {
                  if (q != 0) {
                    q = 0;
                  }
                } else if ((q & 255) != 255) {
                  O.a16 = O.__alpha16[q & 255];
                  q = ((q >>> 24 & 255) * O.a16 >> 16 & 255) << 24 | ((q >>> 16 & 255) * O.a16 >> 16 & 255) << 16 | ((q >>> 8 & 255) * O.a16 >> 16 & 255) << 8 | q & 255;
                }
              }
              switch (w) {
                case 0:
                  h[u] = q >>> 24 & 255;
                  h[u + 1] = q >>> 16 & 255;
                  h[u + 2] = q >>> 8 & 255;
                  h[u + 3] = q & 255;
                  break;
                case 1:
                  h[u] = q & 255;
                  h[u + 1] = q >>> 24 & 255;
                  h[u + 2] = q >>> 16 & 255;
                  h[u + 3] = q >>> 8 & 255;
                  break;
                case 2:
                  h[u] = q >>> 8 & 255;
                  h[u + 1] = q >>> 16 & 255;
                  h[u + 2] = q >>> 24 & 255;
                  h[u + 3] = q & 255;
              }
            }
          }
          a.image.dirty = true;
          return a;
        },
        __initShader: function (a, b, c) {
          Vg.__colorMatrixShader.init(this.get_matrix());
          return Vg.__colorMatrixShader;
        },
        get_matrix: function () {
          return this.__matrix;
        },
        set_matrix: function (a) {
          if (a == null) {
            a = [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0];
          }
          return this.__matrix = a;
        },
        __class__: Vg,
        __properties__: {
          set_matrix: "set_matrix",
          get_matrix: "get_matrix"
        }
      });
      function Mm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec4 uColor;\n\t\tuniform float uStrength;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void)\n\t\t{\n            vec4 texel = texture2D(openfl_Texture, vTexCoord);\n\n            vec3 contributions = vec3(0.00443, 0.05399, 0.24197);\n            vec3 top = vec3(\n                texture2D(openfl_Texture, vBlurCoords[0]).a,\n                texture2D(openfl_Texture, vBlurCoords[1]).a,\n                texture2D(openfl_Texture, vBlurCoords[2]).a\n            );\n            vec3 bottom = vec3(\n                texture2D(openfl_Texture, vBlurCoords[3]).a,\n                texture2D(openfl_Texture, vBlurCoords[4]).a,\n                texture2D(openfl_Texture, vBlurCoords[5]).a\n            );\n\n            float a = texel.a * 0.39894;\n\t\t\ta += dot(top, contributions.xyz);\n            a += dot(bottom, contributions.zyx);\n\n\t\t\tgl_FragColor = uColor * clamp(a * uStrength, 0.0, 1.0);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\n\t\t\tvec3 offset = vec3(0.5, 0.75, 1.0);\n\t\t\tvec2 r = uRadius / openfl_TextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * offset.z;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * offset.y;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * offset.x;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord + r * offset.x;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * offset.y;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * offset.z;\n\t\t}\n\t";
        }
        qc.call(this);
        this.uRadius.value = [0, 0];
        this.uColor.value = [0, 0, 0, 0];
        this.uStrength.value = [1];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.BlurAlphaShader"] = Mm;
      Mm.__name__ = "openfl.filters._GlowFilter.BlurAlphaShader";
      Mm.__super__ = qc;
      Mm.prototype = q(qc.prototype, {
        __class__: Mm
      });
      function Nm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * (1.0 - src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        qc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.CombineKnockoutShader"] = Nm;
      Nm.__name__ = "openfl.filters._GlowFilter.CombineKnockoutShader";
      Nm.__super__ = qc;
      Nm.prototype = q(qc.prototype, {
        __class__: Nm
      });
      function Om() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = src + glow * (1.0 - src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        qc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.CombineShader"] = Om;
      Om.__name__ = "openfl.filters._GlowFilter.CombineShader";
      Om.__super__ = qc;
      Om.prototype = q(qc.prototype, {
        __class__: Om
      });
      function Pm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = glow * src.a;\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        qc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.InnerCombineKnockoutShader"] = Pm;
      Pm.__name__ = "openfl.filters._GlowFilter.InnerCombineKnockoutShader";
      Pm.__super__ = qc;
      Pm.prototype = q(qc.prototype, {
        __class__: Pm
      });
      function Qm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw);\n\n\t\t\tgl_FragColor = vec4((src.rgb * (1.0 - glow.a)) + (glow.rgb * src.a), src.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t";
        }
        qc.call(this);
        this.offset.value = [0, 0];
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.InnerCombineShader"] = Qm;
      Qm.__name__ = "openfl.filters._GlowFilter.InnerCombineShader";
      Qm.__super__ = qc;
      Qm.prototype = q(qc.prototype, {
        __class__: Qm
      });
      function Rm() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tuniform sampler2D openfl_Texture;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tvec4 texel = texture2D(openfl_Texture, vTexCoord);\n\t\t\tgl_FragColor = vec4(texel.rgb, 1.0 - texel.a);\n\t\t}\n\t";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\t\t}\n\t";
        }
        qc.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["openfl.filters._GlowFilter.InvertAlphaShader"] = Rm;
      Rm.__name__ = "openfl.filters._GlowFilter.InvertAlphaShader";
      Rm.__super__ = qc;
      Rm.prototype = q(qc.prototype, {
        __class__: Rm
      });
      function Ed(a, b, c, d, e, f, g, h) {
        if (h == null) {
          h = false;
        }
        if (g == null) {
          g = false;
        }
        if (f == null) {
          f = 1;
        }
        if (e == null) {
          e = 2;
        }
        if (d == null) {
          d = 6;
        }
        if (c == null) {
          c = 6;
        }
        if (b == null) {
          b = 1;
        }
        if (a == null) {
          a = 16711680;
        }
        ne.call(this);
        this.__color = a;
        this.__alpha = b;
        this.__blurX = c;
        this.__blurY = d;
        this.__strength = e;
        this.__inner = g;
        this.__knockout = h;
        this.__quality = f;
        this.__updateSize();
        this.__renderDirty = this.__preserveObject = this.__needSecondBitmapData = true;
      }
      h["openfl.filters.GlowFilter"] = Ed;
      Ed.__name__ = "openfl.filters.GlowFilter";
      Ed.__super__ = ne;
      Ed.prototype = q(ne.prototype, {
        clone: function () {
          return new Ed(this.__color, this.__alpha, this.__blurX, this.__blurY, this.__strength, this.__quality, this.__inner, this.__knockout);
        },
        __applyFilter: function (a, b, c, d) {
          var e = this.__color >> 16 & 255;
          var f = this.__color >> 8 & 255;
          var g = this.__color & 255;
          c = zc.gaussianBlur(a.image, b.image, c.__toLimeRectangle(), d.__toLimeVector2(), this.__blurX, this.__blurY, this.__quality, this.__strength);
          c.colorTransform(c.get_rect(), new Ob(0, 0, 0, this.__alpha, e, f, g, 0).__toLimeColorMatrix());
          if (c == a.image) {
            return a;
          } else {
            return b;
          }
        },
        __initShader: function (a, b, c) {
          if (this.__inner && b == 0) {
            return Ed.__invertAlphaShader;
          }
          a = b - (this.__inner ? 1 : 0);
          b = this.__horizontalPasses + this.__verticalPasses;
          if (a < b) {
            var d = Ed.__blurAlphaShader;
            if (a < this.__horizontalPasses) {
              c = Math.pow(0.5, a >> 1) * 0.5;
              d.uRadius.value[0] = this.get_blurX() * c;
              d.uRadius.value[1] = 0;
            } else {
              c = Math.pow(0.5, a - this.__horizontalPasses >> 1) * 0.5;
              d.uRadius.value[0] = 0;
              d.uRadius.value[1] = this.get_blurY() * c;
            }
            d.uColor.value[0] = (this.get_color() >> 16 & 255) / 255;
            d.uColor.value[1] = (this.get_color() >> 8 & 255) / 255;
            d.uColor.value[2] = (this.get_color() & 255) / 255;
            d.uColor.value[3] = this.get_alpha();
            d.uStrength.value[0] = a == b - 1 ? this.__strength : 1;
            return d;
          }
          if (this.__inner) {
            if (this.__knockout) {
              d = Ed.__innerCombineKnockoutShader;
              d.sourceBitmap.input = c;
              d.offset.value[0] = 0;
              d.offset.value[1] = 0;
              return d;
            }
            d = Ed.__innerCombineShader;
          } else {
            if (this.__knockout) {
              d = Ed.__combineKnockoutShader;
              d.sourceBitmap.input = c;
              d.offset.value[0] = 0;
              d.offset.value[1] = 0;
              return d;
            }
            d = Ed.__combineShader;
          }
          d.sourceBitmap.input = c;
          d.offset.value[0] = 0;
          d.offset.value[1] = 0;
          return d;
        },
        __updateSize: function () {
          this.__rightExtension = this.__leftExtension = this.__blurX > 0 ? Math.ceil(this.__blurX * 1.5) : 0;
          this.__bottomExtension = this.__topExtension = this.__blurY > 0 ? Math.ceil(this.__blurY * 1.5) : 0;
          this.__calculateNumShaderPasses();
        },
        __calculateNumShaderPasses: function () {
          this.__horizontalPasses = this.__blurX <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurX) + 1;
          this.__verticalPasses = this.__blurY <= 0 ? 0 : Math.round(this.__quality / 4 * this.__blurY) + 1;
          this.__numShaderPasses = this.__horizontalPasses + this.__verticalPasses + (this.__inner ? 2 : 1);
        },
        get_alpha: function () {
          return this.__alpha;
        },
        get_blurX: function () {
          return this.__blurX;
        },
        get_blurY: function () {
          return this.__blurY;
        },
        get_color: function () {
          return this.__color;
        },
        __class__: Ed,
        __properties__: {
          get_color: "get_color",
          get_blurY: "get_blurY",
          get_blurX: "get_blurX",
          get_alpha: "get_alpha"
        }
      });
      function ok(a) {
        this.__colorTransform = new Ob();
        this.concatenatedColorTransform = new Ob();
        this.pixelBounds = new ba();
        this.__displayObject = a;
        this.__hasMatrix = true;
      }
      h["openfl.geom.Transform"] = ok;
      ok.__name__ = "openfl.geom.Transform";
      ok.prototype = {
        get_colorTransform: function () {
          return this.__colorTransform.__clone();
        },
        set_colorTransform: function (a) {
          if (!this.__colorTransform.__equals(a, false)) {
            this.__colorTransform.__copyFrom(a);
            if (a != null) {
              this.__displayObject.set_alpha(a.alphaMultiplier);
            }
            a = this.__displayObject;
            if (!a.__renderDirty) {
              a.__renderDirty = true;
              a.__setParentRenderDirty();
            }
          }
          return this.__colorTransform;
        },
        get_matrix: function () {
          if (this.__hasMatrix) {
            return this.__displayObject.__transform.clone();
          } else {
            return null;
          }
        },
        set_matrix: function (a) {
          if (a == null) {
            this.__hasMatrix = false;
            return null;
          }
          this.__hasMatrix = true;
          this.__hasMatrix3D = false;
          if (this.__displayObject != null) {
            this.__setTransform(a.a, a.b, a.c, a.d, a.tx, a.ty);
          }
          return a;
        },
        __setTransform: function (a, b, c, d, e, f) {
          if (this.__displayObject != null) {
            var g = this.__displayObject.__transform;
            if (g.a != a || g.b != b || g.c != c || g.d != d || g.tx != e || g.ty != f) {
              var h = b == 0 ? a : Math.sqrt(a * a + b * b);
              var l = c == 0 ? d : Math.sqrt(c * c + d * d);
              this.__displayObject.__scaleX = h;
              this.__displayObject.__scaleY = l;
              h = 180 / Math.PI * Math.atan2(d, c) - 90;
              if (h != this.__displayObject.__rotation) {
                this.__displayObject.__rotation = h;
                h *= Math.PI / 180;
                this.__displayObject.__rotationSine = Math.sin(h);
                this.__displayObject.__rotationCosine = Math.cos(h);
              }
              g.a = a;
              g.b = b;
              g.c = c;
              g.d = d;
              g.tx = e;
              g.ty = f;
              this.__displayObject.__setTransformDirty();
            }
          }
        },
        __class__: ok,
        __properties__: {
          set_matrix: "set_matrix",
          get_matrix: "get_matrix",
          set_colorTransform: "set_colorTransform",
          get_colorTransform: "get_colorTransform"
        }
      };
      function Ro() {}
      h["openfl.media.ID3Info"] = Ro;
      Ro.__name__ = "openfl.media.ID3Info";
      Ro.prototype = {
        __class__: Ro
      };
      function qg(a, b) {
        this.__webAudioContext = null;
        this.__urlLoading = false;
        va.call(this, this);
        this.bytesTotal = this.bytesLoaded = 0;
        this.isBuffering = false;
        this.url = null;
        if (a != null) {
          this.load(a, b);
        }
        if (a == null && dg.context != null && dg.context.type == "web") {
          this.__webAudioContext = dg.context.web;
        }
      }
      h["openfl.media.Sound"] = qg;
      qg.__name__ = "openfl.media.Sound";
      qg.fromAudioBuffer = function (a) {
        var b = new qg();
        b.__buffer = a;
        return b;
      };
      qg.__super__ = va;
      qg.prototype = q(va.prototype, {
        load: function (a, b) {
          var c = this;
          this.url = a.url;
          this.__urlLoading = true;
          this.dispatchEvent(new za("open"));
          a = oa.getLibrary("default");
          if (a != null && Object.prototype.hasOwnProperty.call(a.cachedAudioBuffers.h, this.url)) {
            a = a.cachedAudioBuffers.h[this.url];
            b = a != null && a.data != null ? a.data.byteLength : 0;
            this.AudioBuffer_onURLProgress(b, b);
            this.AudioBuffer_onURLLoad(a);
          } else {
            $c.loadFromFile(this.url).onProgress(n(this, this.AudioBuffer_onURLProgress)).onComplete(n(this, this.AudioBuffer_onURLLoad)).onError(function (a) {
              c.AudioBuffer_onURLLoad(null);
            });
          }
        },
        play: function (a, b, c) {
          if (b == null) {
            b = 0;
          }
          if (a == null) {
            a = 0;
          }
          if (re.__soundChannels.length >= 32) {
            return null;
          }
          c = c == null ? new pg() : c.clone();
          var d = re.__soundTransform.pan + c.pan;
          if (d > 1) {
            d = 1;
          }
          if (d < -1) {
            d = -1;
          }
          var e = re.__soundTransform.volume * c.volume;
          var f = new Eo(this.__buffer);
          f.offset = a | 0;
          if (b > 1) {
            f.set_loops(b - 1);
          }
          f.set_gain(e);
          a = f.get_position();
          a.x = d;
          a.z = Math.sqrt(1 - Math.pow(d, 2)) * -1;
          f.set_position(a);
          c = new Sm(this, this.__urlLoading ? null : f, c);
          if (this.__urlLoading) {
            this.__pendingAudioSource = f;
            this.__pendingSoundChannel = c;
          } else if (this.__buffer == null && this.__webAudioContext != null) {
            c.__startSampleData();
          }
          return c;
        },
        get_id3: function () {
          return new Ro();
        },
        get_length: function () {
          if (this.__buffer != null) {
            return this.__buffer.get_src().duration() * 1000 | 0;
          } else {
            return 0;
          }
        },
        AudioBuffer_onURLLoad: function (a) {
          this.__urlLoading = false;
          if (a == null) {
            this.dispatchEvent(new ak("ioError"));
          } else {
            this.__buffer = a;
            this.dispatchEvent(new za("complete"));
            if (this.__pendingSoundChannel != null) {
              this.__pendingAudioSource.buffer = this.__buffer;
              this.__pendingAudioSource.init();
              this.__pendingSoundChannel.__initAudioSource(this.__pendingAudioSource);
            }
          }
          this.__pendingAudioSource = this.__pendingSoundChannel = null;
        },
        AudioBuffer_onURLProgress: function (a, b) {
          var c = new Hh("progress");
          c.bytesLoaded = a;
          c.bytesTotal = b;
          this.dispatchEvent(c);
        },
        __class__: qg,
        __properties__: {
          get_length: "get_length",
          get_id3: "get_id3"
        }
      });
      function Sm(a, b, c) {
        this.__firstRun = true;
        va.call(this, this);
        this.__sound = a;
        this.rightPeak = this.leftPeak = 1;
        this.__soundTransform = c ?? new pg();
        this.__initAudioSource(b);
        re.__registerSoundChannel(this);
      }
      h["openfl.media.SoundChannel"] = Sm;
      Sm.__name__ = "openfl.media.SoundChannel";
      Sm.__super__ = va;
      Sm.prototype = q(va.prototype, {
        stop: function () {
          re.__unregisterSoundChannel(this);
          if (this.__isValid) {
            if (this.__processor != null) {
              this.__processor.disconnect();
              this.__processor = this.__processor.onaudioprocess = null;
            }
            this.__audioSource.stop();
            this.__dispose();
          }
        },
        __dispose: function () {
          if (this.__isValid) {
            this.__audioSource.onComplete.remove(n(this, this.audioSource_onComplete));
            this.__audioSource.dispose();
            this.__audioSource = null;
            this.__isValid = false;
          }
        },
        __startSampleData: function () {
          var a = this;
          var b = this.__sound.__webAudioContext;
          if (b != null) {
            this.__sampleDataEvent = new Jm("sampleData");
            this.__sound.dispatchEvent(this.__sampleDataEvent);
            var c = this.__sampleDataEvent.getBufferSize();
            if (c == 0) {
              ia.setTimeout(function () {
                a.stop();
                a.dispatchEvent(new za("soundComplete"));
              }, 1);
            } else {
              this.__processor = b.createScriptProcessor(c, 0, 2);
              this.__processor.connect(b.destination);
              this.__processor.onaudioprocess = n(this, this.onSample);
              b.resume();
            }
          }
        },
        __updateTransform: function () {
          this.set_soundTransform(this.get_soundTransform());
        },
        __initAudioSource: function (a) {
          this.__audioSource = a;
          if (this.__audioSource != null) {
            this.__audioSource.onComplete.add(n(this, this.audioSource_onComplete));
            this.__isValid = true;
            this.__audioSource.play();
          }
        },
        get_position: function () {
          if (this.__isValid) {
            return this.__audioSource.get_currentTime() + this.__audioSource.offset;
          } else {
            return 0;
          }
        },
        set_position: function (a) {
          if (!this.__isValid) {
            return 0;
          }
          this.__audioSource.set_currentTime((a | 0) - this.__audioSource.offset);
          return a;
        },
        get_soundTransform: function () {
          return this.__soundTransform.clone();
        },
        set_soundTransform: function (a) {
          if (a != null) {
            this.__soundTransform.pan = a.pan;
            this.__soundTransform.volume = a.volume;
            var b = re.__soundTransform.pan + this.__soundTransform.pan;
            if (b < -1) {
              b = -1;
            }
            if (b > 1) {
              b = 1;
            }
            var c = re.__soundTransform.volume * this.__soundTransform.volume;
            if (this.__isValid) {
              this.__audioSource.set_gain(c);
              c = this.__audioSource.get_position();
              c.x = b;
              c.z = Math.sqrt(1 - Math.pow(b, 2)) * -1;
              this.__audioSource.set_position(c);
            }
          }
          return a;
        },
        audioSource_onComplete: function () {
          re.__unregisterSoundChannel(this);
          this.__dispose();
          this.dispatchEvent(new za("soundComplete"));
        },
        onSample: function (a) {
          if (this.__firstRun) {
            var b = true;
            this.__firstRun = false;
          } else {
            Oe.set_length(this.__sampleDataEvent.data, 0);
            this.__sound.dispatchEvent(this.__sampleDataEvent);
            b = mc.gt(Oe.get_length(this.__sampleDataEvent.data), 0);
          }
          if (b) {
            this.__sampleDataEvent.getSamples(a);
          } else {
            this.stop();
            this.dispatchEvent(new za("soundComplete"));
          }
        },
        __class__: Sm,
        __properties__: {
          set_soundTransform: "set_soundTransform",
          get_soundTransform: "get_soundTransform",
          set_position: "set_position",
          get_position: "get_position"
        }
      });
      function Dp() {}
      h["openfl.media.SoundLoaderContext"] = Dp;
      Dp.__name__ = "openfl.media.SoundLoaderContext";
      function pg(a, b) {
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 1;
        }
        this.volume = a;
        this.pan = b;
        this.rightToRight = this.rightToLeft = this.leftToRight = this.leftToLeft = 0;
      }
      h["openfl.media.SoundTransform"] = pg;
      pg.__name__ = "openfl.media.SoundTransform";
      pg.prototype = {
        clone: function () {
          return new pg(this.volume, this.pan);
        },
        __class__: pg
      };
      function re() {}
      h["openfl.media.SoundMixer"] = re;
      re.__name__ = "openfl.media.SoundMixer";
      re.__registerSoundChannel = function (a) {
        re.__soundChannels.push(a);
      };
      re.__unregisterSoundChannel = function (a) {
        L.remove(re.__soundChannels, a);
      };
      function Ri(a, b) {
        if (b == null) {
          b = 240;
        }
        if (a == null) {
          a = 320;
        }
        Ba.call(this);
        this.__drawableType = 8;
        this.__width = a;
        this.__height = b;
        this.__textureTime = -1;
        this.smoothing = false;
        this.deblocking = 0;
      }
      h["openfl.media.Video"] = Ri;
      Ri.__name__ = "openfl.media.Video";
      Ri.__super__ = Ba;
      Ri.prototype = q(Ba.prototype, {
        attachNetStream: function (a) {
          this.__stream = a;
          if (this.__stream != null && this.__stream.__video != null && !this.__stream.__closed) {
            this.__stream.__video.play();
          }
        },
        __enterFrame: function (a) {
          if (this.__renderable && this.__stream != null && !this.__renderDirty) {
            this.__renderDirty = true;
            this.__setParentRenderDirty();
          }
        },
        __getBounds: function (a, b) {
          var c = ba.__pool.get();
          c.setTo(0, 0, this.__width, this.__height);
          c.__transform(c, b);
          a.__expand(c.x, c.y, c.width, c.height);
          ba.__pool.release(c);
        },
        __getIndexBuffer: function (a) {
          if (this.__indexBuffer == null || this.__indexBufferContext != a.__context) {
            this.__indexBufferData = new Uint16Array(6);
            this.__indexBufferData[0] = 0;
            this.__indexBufferData[1] = 1;
            this.__indexBufferData[2] = 2;
            this.__indexBufferData[3] = 2;
            this.__indexBufferData[4] = 1;
            this.__indexBufferData[5] = 3;
            this.__indexBufferContext = a.__context;
            this.__indexBuffer = a.createIndexBuffer(6);
            this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData);
          }
          return this.__indexBuffer;
        },
        __getTexture: function (a) {
          if (this.__stream == null || this.__stream.__video == null) {
            return null;
          }
          var b = a.__context.webgl;
          var c = b.RGBA;
          var d = b.RGBA;
          if (!this.__stream.__closed && this.__stream.__video.currentTime != this.__textureTime) {
            if (this.__texture == null) {
              this.__texture = a.createRectangleTexture(this.__stream.__video.videoWidth, this.__stream.__video.videoHeight, 1, false);
            }
            a.__bindGLTexture2D(this.__texture.__textureID);
            Yc.texImage2D(b, b.TEXTURE_2D, 0, c, d, b.UNSIGNED_BYTE, this.__stream.__video);
            this.__textureTime = this.__stream.__video.currentTime;
          }
          return this.__texture;
        },
        __getVertexBuffer: function (a) {
          if (this.__vertexBuffer == null || this.__vertexBufferContext != a.__context || this.__currentWidth != this.get_width() || this.__currentHeight != this.get_height()) {
            this.__currentWidth = this.get_width();
            this.__currentHeight = this.get_height();
            this.__vertexBufferData = new Float32Array(20);
            this.__vertexBufferData[0] = this.get_width();
            this.__vertexBufferData[1] = this.get_height();
            this.__vertexBufferData[3] = 1;
            this.__vertexBufferData[4] = 1;
            this.__vertexBufferData[6] = this.get_height();
            this.__vertexBufferData[9] = 1;
            this.__vertexBufferData[10] = this.get_width();
            this.__vertexBufferData[13] = 1;
            this.__vertexBufferContext = a.__context;
            this.__vertexBuffer = a.createVertexBuffer(3, 5);
            this.__vertexBuffer.uploadFromTypedArray(fj.toArrayBufferView(this.__vertexBufferData));
          }
          return this.__vertexBuffer;
        },
        __hitTest: function (a, b, c, d, e, f) {
          if (!f.get_visible() || this.__isMask || this.get_mask() != null && !this.get_mask().__hitTestMask(a, b)) {
            return false;
          }
          this.__getRenderTransform();
          var g = this.__renderTransform;
          var h = g.a * g.d - g.b * g.c;
          c = h == 0 ? -g.tx : 1 / h * (g.c * (g.ty - b) + g.d * (a - g.tx));
          g = this.__renderTransform;
          h = g.a * g.d - g.b * g.c;
          a = h == 0 ? -g.ty : 1 / h * (g.a * (b - g.ty) + g.b * (g.tx - a));
          if (c > 0 && a > 0 && c <= this.__width && a <= this.__height) {
            if (d != null && !e) {
              d.push(f);
            }
            return true;
          } else {
            return false;
          }
        },
        __hitTestMask: function (a, b) {
          var c = ob.__pool.get();
          c.setTo(a, b);
          this.__globalToLocal(c, c);
          a = c.x > 0 && c.y > 0 && c.x <= this.__width && c.y <= this.__height;
          ob.__pool.release(c);
          return a;
        },
        get_height: function () {
          return this.__height * this.get_scaleY();
        },
        set_height: function (a) {
          if (this.get_scaleY() != 1 || a != this.__height) {
            this.__setTransformDirty();
            this.__dirty = true;
          }
          this.set_scaleY(1);
          return this.__height = a;
        },
        get_width: function () {
          return this.__width * this.__scaleX;
        },
        set_width: function (a) {
          if (this.__scaleX != 1 || this.__width != a) {
            this.__setTransformDirty();
            this.__dirty = true;
          }
          this.set_scaleX(1);
          return this.__width = a;
        },
        __class__: Ri
      });
      function Ki(a, b, c) {
        this.description = a;
        this.extension = b;
        this.macType = c;
      }
      h["openfl.net.FileFilter"] = Ki;
      Ki.__name__ = "openfl.net.FileFilter";
      Ki.prototype = {
        __class__: Ki
      };
      function Ge() {
        va.call(this);
        this.__inputControl = window.document.createElement("input");
        this.__inputControl.setAttribute("type", "file");
        this.__inputControl.onclick = function (a) {
          a.cancelBubble = true;
          a.stopPropagation();
        };
      }
      h["openfl.net.FileReference"] = Ge;
      Ge.__name__ = "openfl.net.FileReference";
      Ge.__super__ = va;
      Ge.prototype = q(va.prototype, {
        browse: function (a) {
          var b = this;
          var c = this.__path = this.__data = null;
          if (a != null) {
            c = [];
            for (var d = 0; d < a.length;) {
              var e = a[d];
              ++d;
              c.push(v.replace(v.replace(e.extension, "*.", "."), ";", ","));
            }
            c = c.join(",");
          }
          if (c != null) {
            this.__inputControl.setAttribute("accept", c);
          } else {
            this.__inputControl.removeAttribute("accept");
          }
          this.__inputControl.onchange = function () {
            if (b.__inputControl.files.length == 0) {
              b.dispatchEvent(new za("cancel"));
            } else {
              var a = b.__inputControl.files[0];
              var c = new Date(a.lastModified);
              b.modificationDate = c;
              b.creationDate = b.get_modificationDate();
              b.size = a.size;
              c = Ic.extension(a.name);
              b.type = "." + c;
              b.name = Ic.withoutDirectory(a.name);
              b.__path = a.name;
              b.dispatchEvent(new za("select"));
            }
          };
          this.__inputControl.click();
          return true;
        },
        save: function (a, b) {
          this.__path = this.__data = null;
          if (a != null) {
            if (a instanceof sd) {
              this.__data = a;
            } else {
              this.__data = new sd(0);
              this.__data.writeUTFBytes(y.string(a));
            }
            a = new Fo();
            a.onCancel.add(n(this, this.saveFileDialog_onCancel));
            a.onSave.add(n(this, this.saveFileDialog_onSave));
            a.save(this.__data, b != null ? Ic.extension(b) : null, b);
          }
        },
        saveFileDialog_onCancel: function () {
          this.dispatchEvent(new za("cancel"));
        },
        saveFileDialog_onSave: function (a) {
          var b = this;
          jg.delay(function () {
            b.dispatchEvent(new za("complete"));
          }, 1);
        },
        get_modificationDate: function () {
          return this.modificationDate;
        },
        __class__: Ge,
        __properties__: {
          get_modificationDate: "get_modificationDate"
        }
      });
      function Si() {
        va.call(this);
      }
      h["openfl.net.NetConnection"] = Si;
      Si.__name__ = "openfl.net.NetConnection";
      Si.__super__ = va;
      Si.prototype = q(va.prototype, {
        connect: function (a, b, c, d, e, f) {
          if (a != null) {
            throw I.thrown("Error: Can only connect in \"HTTP streaming\" mode");
          }
          this.dispatchEvent(new bk("netStatus", false, true, {
            code: "NetConnection.Connect.Success"
          }));
        },
        __class__: Si
      });
      function Ti(a, b) {
        va.call(this);
        this.__connection = a;
        this.__soundTransform = new pg();
        this.__video = window.document.createElement("video");
        this.__video.setAttribute("playsinline", "");
        this.__video.setAttribute("webkit-playsinline", "");
        this.__video.setAttribute("crossorigin", "anonymous");
        this.__video.addEventListener("error", n(this, this.video_onError), false);
        this.__video.addEventListener("waiting", n(this, this.video_onWaiting), false);
        this.__video.addEventListener("ended", n(this, this.video_onEnd), false);
        this.__video.addEventListener("pause", n(this, this.video_onPause), false);
        this.__video.addEventListener("seeking", n(this, this.video_onSeeking), false);
        this.__video.addEventListener("playing", n(this, this.video_onPlaying), false);
        this.__video.addEventListener("timeupdate", n(this, this.video_onTimeUpdate), false);
        this.__video.addEventListener("loadstart", n(this, this.video_onLoadStart), false);
        this.__video.addEventListener("stalled", n(this, this.video_onStalled), false);
        this.__video.addEventListener("durationchanged", n(this, this.video_onDurationChanged), false);
        this.__video.addEventListener("canplay", n(this, this.video_onCanPlay), false);
        this.__video.addEventListener("canplaythrough", n(this, this.video_onCanPlayThrough), false);
        this.__video.addEventListener("loadedmetadata", n(this, this.video_onLoadMetaData), false);
      }
      h["openfl.net.NetStream"] = Ti;
      Ti.__name__ = "openfl.net.NetStream";
      Ti.__super__ = va;
      Ti.prototype = q(va.prototype, {
        close: function () {
          if (this.__video != null) {
            this.__closed = true;
            this.__video.pause();
            this.__video.src = "";
            this.time = 0;
          }
        },
        dispose: function () {
          this.close();
          this.__video = null;
        },
        pause: function () {
          if (this.__video != null) {
            this.__video.pause();
          }
        },
        play: function (a, b, c, d, e, f) {
          if (this.__video != null) {
            this.__video.volume = re.__soundTransform.volume * this.__soundTransform.volume;
            if (typeof a == "string") {
              this.__video.src = a;
            } else {
              this.__video.srcObject = a;
            }
            this.__video.play();
          }
        },
        resume: function () {
          if (this.__video != null) {
            this.__video.play();
          }
        },
        __dispatchStatus: function (a) {
          a = new bk("netStatus", false, false, {
            code: a
          });
          this.__connection.dispatchEvent(a);
          this.dispatchEvent(a);
        },
        __playStatus: function (a) {
          if (this.__video != null && this.client != null) {
            try {
              var b = this.client.onPlayStatus;
              b({
                code: a,
                duration: this.__video.duration,
                position: this.__video.currentTime,
                speed: this.__video.playbackRate,
                start: this.__video.startTime
              });
            } catch (c) {
              Oa.lastError = c;
            }
          }
        },
        video_onCanPlay: function (a) {
          this.__playStatus("NetStream.Play.canplay");
        },
        video_onCanPlayThrough: function (a) {
          this.__playStatus("NetStream.Play.canplaythrough");
        },
        video_onDurationChanged: function (a) {
          this.__playStatus("NetStream.Play.durationchanged");
        },
        video_onEnd: function (a) {
          this.__dispatchStatus("NetStream.Play.Stop");
          this.__dispatchStatus("NetStream.Play.Complete");
          this.__playStatus("NetStream.Play.Complete");
        },
        video_onError: function (a) {
          this.__dispatchStatus("NetStream.Play.Stop");
          this.__playStatus("NetStream.Play.error");
        },
        video_onLoadMetaData: function (a) {
          if (this.__video != null && this.client != null) {
            try {
              var b = this.client.onMetaData;
              b({
                width: this.__video.videoWidth,
                height: this.__video.videoHeight,
                duration: this.__video.duration
              });
            } catch (c) {
              Oa.lastError = c;
            }
          }
        },
        video_onLoadStart: function (a) {
          this.__playStatus("NetStream.Play.loadstart");
        },
        video_onPause: function (a) {
          this.__playStatus("NetStream.Play.pause");
        },
        video_onPlaying: function (a) {
          this.__dispatchStatus("NetStream.Play.Start");
          this.__playStatus("NetStream.Play.playing");
        },
        video_onSeeking: function (a) {
          this.__playStatus("NetStream.Play.seeking");
          this.__dispatchStatus("NetStream.Seek.Complete");
        },
        video_onStalled: function (a) {
          this.__playStatus("NetStream.Play.stalled");
        },
        video_onTimeUpdate: function (a) {
          if (this.__video != null) {
            this.time = this.__video.currentTime;
            this.__playStatus("NetStream.Play.timeupdate");
          }
        },
        video_onWaiting: function (a) {
          this.__playStatus("NetStream.Play.waiting");
        },
        __class__: Ti
      });
      function So(a) {
        va.call(this);
        this.bytesTotal = this.bytesLoaded = 0;
        this.dataFormat = 1;
        if (a != null) {
          this.load(a);
        }
      }
      h["openfl.net.URLLoader"] = So;
      So.__name__ = "openfl.net.URLLoader";
      So.__super__ = va;
      So.prototype = q(va.prototype, {
        load: function (a) {
          var b = this;
          var c = new za("open");
          this.dispatchEvent(c);
          if (this.dataFormat == 0) {
            c = new fm();
            this.__prepareRequest(c, a);
            c.load().onProgress(n(this, this.httpRequest_onProgress)).onError(n(this, this.httpRequest_onError)).onComplete(function (a) {
              b.__dispatchResponseStatus();
              b.__dispatchStatus();
              b.data = a;
              a = new za("complete");
              b.dispatchEvent(a);
            });
          } else {
            c = new zi();
            this.__prepareRequest(c, a);
            c.load().onProgress(n(this, this.httpRequest_onProgress)).onError(n(this, this.httpRequest_onError)).onComplete(function (a) {
              b.__dispatchResponseStatus();
              b.__dispatchStatus();
              b.data = b.dataFormat == 2 ? Ep._new(a) : a;
              a = new za("complete");
              b.dispatchEvent(a);
            });
          }
        },
        __dispatchResponseStatus: function () {
          var a = new Zj("httpResponseStatus", false, false, this.__httpRequest.responseStatus);
          a.responseURL = this.__httpRequest.uri;
          var b = [];
          if (this.__httpRequest.enableResponseHeaders && this.__httpRequest.responseHeaders != null) {
            for (var c = 0, d = this.__httpRequest.responseHeaders; c < d.length;) {
              var e = d[c];
              ++c;
              b.push(new To(e.name, e.value));
            }
          }
          a.responseHeaders = b;
          this.dispatchEvent(a);
        },
        __dispatchStatus: function () {
          var a = new Zj("httpStatus", false, false, this.__httpRequest.responseStatus);
          this.dispatchEvent(a);
        },
        __prepareRequest: function (a, b) {
          this.__httpRequest = a;
          this.__httpRequest.uri = b.url;
          this.__httpRequest.method = b.method;
          if (b.data != null) {
            if (yb.typeof(b.data) == Ec.TObject) {
              var c = ha.fields(b.data);
              for (a = 0; a < c.length;) {
                var d = c[a];
                ++a;
                this.__httpRequest.formData.h[d] = ha.field(b.data, d);
              }
            } else {
              this.__httpRequest.data = b.data instanceof ac ? b.data : ac.ofString(y.string(b.data));
            }
          }
          this.__httpRequest.contentType = b.contentType;
          if (b.requestHeaders != null) {
            a = 0;
            c = b.requestHeaders;
            while (a < c.length) {
              d = c[a];
              ++a;
              this.__httpRequest.headers.push(new Zl(d.name, d.value));
            }
          }
          this.__httpRequest.followRedirects = b.followRedirects;
          this.__httpRequest.timeout = b.idleTimeout | 0;
          this.__httpRequest.manageCookies = b.manageCookies;
          this.__httpRequest.withCredentials = b.withCredentials;
          this.__httpRequest.userAgent = b.userAgent;
          this.__httpRequest.enableResponseHeaders = true;
        },
        httpRequest_onError: function (a) {
          this.__dispatchResponseStatus();
          this.__dispatchStatus();
          if (this.__httpRequest instanceof Zg) {
            this.data = this.__httpRequest.responseData;
          } else if (this.__httpRequest instanceof zi) {
            this.data = this.__httpRequest.responseData;
          }
          var b = a == 403 ? new Km("securityError") : new ak("ioError");
          b.text = y.string(a);
          this.dispatchEvent(b);
        },
        httpRequest_onProgress: function (a, b) {
          var c = new Hh("progress");
          c.bytesLoaded = a;
          c.bytesTotal = b;
          this.dispatchEvent(c);
        },
        __class__: So
      });
      function Bk(a) {
        this.withCredentials = false;
        if (a != null) {
          this.url = a;
        }
        this.contentType = null;
        this.followRedirects = eh.followRedirects;
        this.idleTimeout = eh.idleTimeout > 0 ? eh.idleTimeout : 30000;
        this.manageCookies = eh.manageCookies;
        this.method = "GET";
        this.requestHeaders = [];
        this.userAgent = eh.userAgent;
      }
      h["openfl.net.URLRequest"] = Bk;
      Bk.__name__ = "openfl.net.URLRequest";
      Bk.prototype = {
        __class__: Bk
      };
      function eh() {}
      h["openfl.net.URLRequestDefaults"] = eh;
      eh.__name__ = "openfl.net.URLRequestDefaults";
      function To(a, b) {
        if (b == null) {
          b = "";
        }
        if (a == null) {
          a = "";
        }
        this.name = a;
        this.value = b;
      }
      h["openfl.net.URLRequestHeader"] = To;
      To.__name__ = "openfl.net.URLRequestHeader";
      To.prototype = {
        __class__: To
      };
      var Ep = {
        _new: function (a) {
          var b = {};
          if (a != null) {
            Ep.decode(b, a);
          }
          return b;
        },
        decode: function (a, b) {
          for (var c = ha.fields(a), d = 0; d < c.length;) {
            var e = c[d];
            ++d;
            ha.deleteField(a, e);
          }
          c = b.split(";").join("&").split("&");
          for (d = 0; d < c.length;) {
            e = c[d];
            ++d;
            b = e.indexOf("=");
            if (b > 0) {
              var f = L.substr(e, 0, b);
              f = decodeURIComponent(f.split("+").join(" "));
              e = L.substr(e, b + 1, null);
              a[f] = decodeURIComponent(e.split("+").join(" "));
            } else if (b != 0) {
              a[decodeURIComponent(e.split("+").join(" "))] = "";
            }
          }
        }
      };
      function pc() {
        va.call(this);
        pc.initialize();
        this.__interval = 0;
        this.__muted = false;
        this.setRequestedUpdateInterval(pc.defaultInterval);
      }
      h["openfl.sensors.Accelerometer"] = pc;
      pc.__name__ = "openfl.sensors.Accelerometer";
      pc.__properties__ = {
        get_isSupported: "get_isSupported"
      };
      pc.initialize = function () {
        if (!pc.initialized) {
          var a = Ie.getSensors(Zo.ACCELEROMETER);
          if (a.length > 0) {
            a[0].onUpdate.add(pc.accelerometer_onUpdate);
            pc.supported = true;
          }
          pc.initialized = true;
        }
      };
      pc.accelerometer_onUpdate = function (a, b, c) {
        pc.currentX = a;
        pc.currentY = b;
        pc.currentZ = c;
      };
      pc.get_isSupported = function () {
        pc.initialize();
        return pc.supported;
      };
      pc.__super__ = va;
      pc.prototype = q(va.prototype, {
        addEventListener: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = false;
          }
          va.prototype.addEventListener.call(this, a, b, c, d, e);
          this.update();
        },
        setRequestedUpdateInterval: function (a) {
          this.__interval = a;
          if (this.__interval < 0) {
            throw new mh();
          }
          if (this.__interval == 0) {
            this.__interval = pc.defaultInterval;
          }
          if (this.__timer != null) {
            this.__timer.stop();
            this.__timer = null;
          }
          if (pc.supported && !this.get_muted()) {
            this.__timer = new jg(this.__interval);
            this.__timer.run = n(this, this.update);
          }
        },
        update: function () {
          var a = new Im("update");
          a.timestamp = new Date().getTime() / 1000;
          a.accelerationX = pc.currentX;
          a.accelerationY = pc.currentY;
          a.accelerationZ = pc.currentZ;
          this.dispatchEvent(a);
        },
        get_muted: function () {
          return this.__muted;
        },
        __class__: pc,
        __properties__: {
          get_muted: "get_muted"
        }
      });
      function Di(a) {
        this.parentDomain = a ?? Di.currentDomain;
      }
      h["openfl.system.ApplicationDomain"] = Di;
      Di.__name__ = "openfl.system.ApplicationDomain";
      Di.prototype = {
        __class__: Di
      };
      function Zi() {}
      h["openfl.system.System"] = Zi;
      Zi.__name__ = "openfl.system.System";
      Zi.__properties__ = {
        get_totalMemory: "get_totalMemory"
      };
      Zi.gc = function () {};
      Zi.get_totalMemory = function () {
        if (window.performance && window.performance.memory) {
          return window.performance.memory.usedJSHeapSize;
        } else {
          return 0;
        }
      };
      function Uo() {
        va.call(this);
        this.clear();
      }
      h["openfl.text.StyleSheet"] = Uo;
      Uo.__name__ = "openfl.text.StyleSheet";
      Uo.__super__ = va;
      Uo.prototype = q(va.prototype, {
        clear: function () {
          this.__styleNamesDirty = false;
          this.__styleNames = null;
          this.__styles = new xa();
        },
        __applyStyle: function (a, b) {
          a = a.toLowerCase();
          if (Object.prototype.hasOwnProperty.call(this.__styles.h, a)) {
            this.__applyStyleObject(this.__styles.h[a], b);
          }
        },
        __applyStyleObject: function (a, b) {
          if (a != null) {
            var c = new na("[0-9A-Fa-f]+", "");
            var d = new na("[0-9]+", "");
            var e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "color")) {
              e = mf.__get(a, "color");
              e = c.match(e == null ? null : y.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.color = y.parseInt("0x" + c.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontFamily")) {
              e = mf.__get(a, "fontFamily");
              b.font = this.__parseFont(e == null ? null : y.string(e));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontSize")) {
              e = mf.__get(a, "fontSize");
              e = d.match(e == null ? null : y.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.size = y.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontStyle")) {
              switch (mf.__get(a, "fontStyle")) {
                case "italic":
                  b.italic = true;
                  break;
                case "normal":
                  b.italic = false;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "fontWeight")) {
              switch (mf.__get(a, "fontWeight")) {
                case "bold":
                  b.bold = true;
                  break;
                case "normal":
                  b.bold = false;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "leading")) {
              e = mf.__get(a, "leading");
              e = d.match(e == null ? null : y.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.leading = y.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "letterSpacing")) {
              e = mf.__get(a, "letterSpacing");
              e = d.match(e == null ? null : y.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.letterSpacing = parseFloat(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "marginLeft")) {
              e = mf.__get(a, "marginLeft");
              e = d.match(e == null ? null : y.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.leftMargin = y.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "marginRight")) {
              e = mf.__get(a, "marginRight");
              e = d.match(e == null ? null : y.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.rightMargin = y.parseInt(d.matched(0));
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textAlign")) {
              switch (mf.__get(a, "textAlign")) {
                case "center":
                  b.align = 0;
                  break;
                case "justify":
                  b.align = 2;
                  break;
                case "left":
                  b.align = 3;
                  break;
                case "right":
                  b.align = 4;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textDecoration")) {
              switch (mf.__get(a, "textDecoration")) {
                case "none":
                  b.underline = false;
                  break;
                case "underline":
                  b.underline = true;
              }
            }
            e = a;
            if (e != null && Object.prototype.hasOwnProperty.call(e, "textIndent")) {
              e = mf.__get(a, "textIndent");
              e = d.match(e == null ? null : y.string(e));
            } else {
              e = false;
            }
            if (e) {
              b.blockIndent = y.parseInt(d.matched(0));
            }
          }
        },
        __parseFont: function (a) {
          if (a == null) {
            return null;
          }
          if (a.indexOf(",") > -1) {
            a = L.substr(a, 0, a.indexOf(","));
          }
          switch (a) {
            case "mono":
              return "_typewriter";
            case "sans-serif":
              return "_sans";
            case "serif":
              return "_serif";
            default:
              return a;
          }
        },
        __class__: Uo
      });
      function ld(a, b, c, d, e, f, g, h, l, p, n, m, r) {
        this.font = a;
        this.size = b;
        this.color = c;
        this.bold = d;
        this.italic = e;
        this.underline = f;
        this.url = g;
        this.target = h;
        this.align = l;
        this.leftMargin = p;
        this.rightMargin = n;
        this.indent = m;
        this.leading = r;
      }
      h["openfl.text.TextFormat"] = ld;
      ld.__name__ = "openfl.text.TextFormat";
      ld.prototype = {
        clone: function () {
          var a = new ld(this.font, this.size, this.color, this.bold, this.italic, this.underline, this.url, this.target);
          a.align = this.align;
          a.leftMargin = this.leftMargin;
          a.rightMargin = this.rightMargin;
          a.indent = this.indent;
          a.leading = this.leading;
          a.blockIndent = this.blockIndent;
          a.bullet = this.bullet;
          a.kerning = this.kerning;
          a.letterSpacing = this.letterSpacing;
          a.tabStops = this.tabStops;
          a.__ascent = this.__ascent;
          a.__descent = this.__descent;
          a.__cacheKey = this.__toCacheKey();
          return a;
        },
        __merge: function (a) {
          if (a.font != null) {
            this.font = a.font;
          }
          if (a.size != null) {
            this.size = a.size;
          }
          if (a.color != null) {
            this.color = a.color;
          }
          if (a.bold != null) {
            this.bold = a.bold;
          }
          if (a.italic != null) {
            this.italic = a.italic;
          }
          if (a.underline != null) {
            this.underline = a.underline;
          }
          if (a.url != null) {
            this.url = a.url;
          }
          if (a.target != null) {
            this.target = a.target;
          }
          if (a.align != null) {
            this.align = a.align;
          }
          if (a.leftMargin != null) {
            this.leftMargin = a.leftMargin;
          }
          if (a.rightMargin != null) {
            this.rightMargin = a.rightMargin;
          }
          if (a.indent != null) {
            this.indent = a.indent;
          }
          if (a.leading != null) {
            this.leading = a.leading;
          }
          if (a.blockIndent != null) {
            this.blockIndent = a.blockIndent;
          }
          if (a.bullet != null) {
            this.bullet = a.bullet;
          }
          if (a.kerning != null) {
            this.kerning = a.kerning;
          }
          if (a.letterSpacing != null) {
            this.letterSpacing = a.letterSpacing;
          }
          if (a.tabStops != null) {
            this.tabStops = a.tabStops;
          }
          if (a.__ascent != null) {
            this.__ascent = a.__ascent;
          }
          if (a.__descent != null) {
            this.__descent = a.__descent;
          }
          this.__toCacheKey();
        },
        __toCacheKey: function () {
          return this.__cacheKey = "" + this.font + this.size + y.string(this.bold) + y.string(this.italic);
        },
        __class__: ld
      };
      var Wp = {
        fromString: function (a) {
          switch (a) {
            case "center":
              return 0;
            case "end":
              return 1;
            case "justify":
              return 2;
            case "left":
              return 3;
            case "right":
              return 4;
            case "start":
              return 5;
            default:
              return null;
          }
        }
      };
      function dk(a, b) {
        this.__collisions = [];
        this.__wordMap = new Ac();
        this.set(a, b);
      }
      h["openfl.text._internal.CacheMeasurement"] = dk;
      dk.__name__ = "openfl.text._internal.CacheMeasurement";
      dk.prototype = {
        set: function (a, b) {
          this.__addCollision(a, b);
        },
        get: function (a) {
          if (this.__collisions.length > 1) {
            return this.__wordMap.h[this.__collisions.indexOf(a)];
          } else {
            return this.__wordMap.h[0];
          }
        },
        __addCollision: function (a, b) {
          if (!this.exists(a)) {
            var c = this.__wordMap;
            a = this.__collisions.push(a) - 1;
            c.h[a] = b;
          }
        },
        exists: function (a) {
          if (this.__collisions.length == 0) {
            return false;
          } else {
            return this.__collisions.indexOf(a) > -1;
          }
        },
        __class__: dk
      };
      function Za() {}
      h["openfl.text._internal.HTMLParser"] = Za;
      Za.__name__ = "openfl.text._internal.HTMLParser";
      Za.parse = function (a, b, c, d, e) {
        a = b ? a.replace(Za.__regexBreakTag.r, "\n") : a.replace(Za.__regexBreakTag.r, "");
        a = a.replace(Za.__regexEntityNbsp.r, " ");
        a = Za.__regexCharEntity.map(a, function (a) {
          var b = a.matched(1);
          var c = a.matched(2);
          if (b != null && (b = y.parseInt(b), b != null)) {
            return String.fromCodePoint(b);
          } else if (c != null && (c = y.parseInt("0" + c), c != null)) {
            return String.fromCodePoint(c);
          } else {
            return a.matched(0);
          }
        });
        var f = a.split("<");
        if (f.length == 1) {
          a = Za.__htmlUnescape(a.replace(Za.__regexHTMLTag.r, ""));
          if (e.get_length() > 1) {
            var g = e.get_length() - 1;
            e.__tempIndex = 1;
            for (var h = 0, l = []; h < l.length;) {
              var p = l[h++];
              e.insertAt(e.__tempIndex, p);
              e.__tempIndex++;
            }
            e.splice(e.__tempIndex, g);
          }
          b = e.get(0);
          b.format = d;
          b.start = 0;
          b.end = a.length;
        } else {
          g = e.get_length();
          h = e.__tempIndex = 0;
          for (l = []; h < l.length;) {
            p = l[h++];
            e.insertAt(e.__tempIndex, p);
            e.__tempIndex++;
          }
          e.splice(e.__tempIndex, g);
          a = "";
          g = [d.clone()];
          h = [];
          p = false;
          for (l = 0; l < f.length;) {
            var n = f[l];
            ++l;
            if (n != "") {
              var m = L.substr(n, 0, 1) == "/";
              var r = n.indexOf(">");
              var q = r + 1;
              var w = n.indexOf(" ");
              w = n.substring(m ? 1 : 0, w > -1 && w < r ? w : r).toLowerCase();
              if (m) {
                if (h.length != 0 && w == h[h.length - 1]) {
                  h.pop();
                  g.pop();
                  m = g[g.length - 1].clone();
                  if ((w == "p" || w == "li") && e.get_length() > 0) {
                    if (b) {
                      a += "\n";
                    }
                    p = true;
                  }
                  if (q < n.length) {
                    p = Za.__htmlUnescape(L.substr(n, q, null));
                    e.push(new Td(m, a.length, a.length + p.length));
                    a += p;
                    p = false;
                  }
                }
              } else {
                m = g[g.length - 1].clone();
                if (r > -1) {
                  if (c != null) {
                    c.__applyStyle(w, m);
                    if (Za.__regexClass.match(n)) {
                      c.__applyStyle("." + Za.__getAttributeMatch(Za.__regexClass), m);
                      c.__applyStyle(w + "." + Za.__getAttributeMatch(Za.__regexClass), m);
                    }
                  }
                  switch (w) {
                    case "a":
                      if (c != null) {
                        c.__applyStyle("a:link", m);
                      }
                      if (Za.__regexHref.match(n)) {
                        m.url = Za.__getAttributeMatch(Za.__regexHref);
                      }
                      break;
                    case "b":
                      m.bold = true;
                      break;
                    case "em":
                    case "i":
                      m.italic = true;
                      break;
                    case "font":
                      if (Za.__regexFace.match(n)) {
                        m.font = Za.__getAttributeMatch(Za.__regexFace);
                      }
                      if (Za.__regexColor.match(n)) {
                        m.color = y.parseInt("0x" + Za.__getAttributeMatch(Za.__regexColor));
                      }
                      if (Za.__regexSize.match(n)) {
                        r = Za.__getAttributeMatch(Za.__regexSize);
                        var u = L.cca(r, 0);
                        m.size = u == 43 || u == 45 ? (g.length >= 2 ? g[g.length - 2] : d).size + y.parseInt(r) : y.parseInt(r);
                      }
                      break;
                    case "li":
                      if (e.get_length() > 0 && !p) {
                        a += "\n";
                      }
                      r = m.clone();
                      r.underline = false;
                      e.push(new Td(r, a.length, a.length + 2));
                      a += " ";
                      break;
                    case "p":
                      if (e.get_length() > 0 && !p) {
                        a += "\n";
                      }
                      if (Za.__regexAlign.match(n)) {
                        r = Za.__getAttributeMatch(Za.__regexAlign).toLowerCase();
                        m.align = Wp.fromString(r);
                      }
                      break;
                    case "textformat":
                      if (Za.__regexBlockIndent.match(n)) {
                        m.blockIndent = y.parseInt(Za.__getAttributeMatch(Za.__regexBlockIndent));
                      }
                      if (Za.__regexIndent.match(n)) {
                        m.indent = y.parseInt(Za.__getAttributeMatch(Za.__regexIndent));
                      }
                      if (Za.__regexLeading.match(n)) {
                        m.leading = y.parseInt(Za.__getAttributeMatch(Za.__regexLeading));
                      }
                      if (Za.__regexLeftMargin.match(n)) {
                        m.leftMargin = y.parseInt(Za.__getAttributeMatch(Za.__regexLeftMargin));
                      }
                      if (Za.__regexRightMargin.match(n)) {
                        m.rightMargin = y.parseInt(Za.__getAttributeMatch(Za.__regexRightMargin));
                      }
                      if (Za.__regexTabStops.match(n)) {
                        r = Za.__getAttributeMatch(Za.__regexTabStops).split(" ");
                        u = [];
                        for (var v = 0; v < r.length;) {
                          var z = r[v];
                          ++v;
                          u.push(y.parseInt(z));
                        }
                        m.tabStops = u;
                      }
                      break;
                    case "u":
                      m.underline = true;
                  }
                  g.push(m);
                  h.push(w);
                  if (q < n.length) {
                    p = Za.__htmlUnescape(n.substring(q));
                    e.push(new Td(m, a.length, a.length + p.length));
                    a += p;
                    p = false;
                  }
                } else {
                  p = Za.__htmlUnescape(n);
                  e.push(new Td(m, a.length, a.length + p.length));
                  a += p;
                  p = false;
                }
              }
            }
          }
          if (e.get_length() == 0) {
            e.push(new Td(g[0], 0, 0));
          }
        }
        return a;
      };
      Za.__getAttributeMatch = function (a) {
        return a.matched(2) ?? a.matched(3);
      };
      Za.__htmlUnescape = function (a) {
        a = a.replace(Za.__regexEntityApos.r, "'");
        return v.htmlUnescape(a);
      };
      function Li() {
        this.__shortWordMap = new xa();
        this.__longWordMap = new xa();
      }
      h["openfl.text._internal.ShapeCache"] = Li;
      Li.__name__ = "openfl.text._internal.ShapeCache";
      Li.hashFunction = function (a) {
        var b = 0;
        var c;
        for (var d = 0, e = a.length; d < e;) {
          c = d++;
          c = L.cca(a, c);
          b = (b << 5) - b + c;
          b |= 0;
        }
        return b;
      };
      Li.prototype = {
        cache: function (a, b, c) {
          a = a.format.__cacheKey;
          if (c.length > 15) {
            return this.__cacheLongWord(c, a, b);
          } else {
            return this.__cacheShortWord(c, a, b);
          }
        },
        __cacheShortWord: function (a, b, c) {
          if (Object.prototype.hasOwnProperty.call(this.__shortWordMap.h, b)) {
            var d = this.__shortWordMap.h[b];
            if (Object.prototype.hasOwnProperty.call(d.h, a)) {
              return d.h[a];
            }
            var e = c();
            d.h[a] = e;
          } else {
            d = new xa();
            e = c();
            d.h[a] = e;
            this.__shortWordMap.h[b] = d;
          }
          return c();
        },
        __cacheLongWord: function (a, b, c) {
          var d = Li.hashFunction(a);
          if (Object.prototype.hasOwnProperty.call(this.__longWordMap.h, b)) {
            var e = this.__longWordMap.h[b];
            if (e.h.hasOwnProperty(d)) {
              var f = e.h[d];
              if (f.exists(a)) {
                return f.get(a);
              }
              f.set(a, c());
            } else {
              f = new dk(a, c());
              e.h[d] = f;
            }
          } else {
            e = new Ac();
            f = new dk(a, c());
            f.hash = d;
            e.h[d] = f;
            this.__longWordMap.h[b] = e;
          }
          return c();
        },
        __class__: Li
      };
      function ic(a) {
        this.__shapeCache = new Li();
        this.textField = a;
        this.height = this.width = 100;
        this.set_text("");
        this.bounds = new ba(0, 0, 0, 0);
        this.textBounds = new ba(0, 0, 0, 0);
        this.type = 0;
        this.autoSize = 2;
        this.embedFonts = false;
        this.selectable = true;
        this.borderColor = 0;
        this.border = false;
        this.backgroundColor = 16777215;
        this.background = false;
        this.gridFitType = 1;
        this.maxChars = 0;
        this.multiline = false;
        this.numLines = 1;
        this.scrollH = this.sharpness = 0;
        this.set_scrollV(1);
        this.wordWrap = false;
        this.lineAscents = kb.toFloatVector(null);
        this.lineBreaks = kb.toIntVector(null);
        this.lineDescents = kb.toFloatVector(null);
        this.lineLeadings = kb.toFloatVector(null);
        this.lineHeights = kb.toFloatVector(null);
        this.lineWidths = kb.toFloatVector(null);
        this.layoutGroups = kb.toObjectVector(null);
        this.textFormatRanges = kb.toObjectVector(null);
        if (ic.__context == null) {
          ic.__context = window.document.createElement("canvas").getContext("2d");
        }
      }
      h["openfl.text._internal.TextEngine"] = ic;
      ic.__name__ = "openfl.text._internal.TextEngine";
      ic.findFont = function (a) {
        return fb.__fontByName.h[a];
      };
      ic.findFontVariant = function (a) {
        var b = a.font;
        var c = a.bold;
        a = a.italic;
        if (b == null) {
          b = "_serif";
        }
        var d = v.replace(v.replace(b, " Normal", ""), " Regular", "");
        if (c && a && Object.prototype.hasOwnProperty.call(fb.__fontByName.h, d + " Bold Italic")) {
          return ic.findFont(d + " Bold Italic");
        } else if (c && Object.prototype.hasOwnProperty.call(fb.__fontByName.h, d + " Bold")) {
          return ic.findFont(d + " Bold");
        } else if (a && Object.prototype.hasOwnProperty.call(fb.__fontByName.h, d + " Italic")) {
          return ic.findFont(d + " Italic");
        } else {
          return ic.findFont(b);
        }
      };
      ic.getFormatHeight = function (a) {
        var b = ic.getFont(a);
        ic.__context.font = b;
        b = ic.getFontInstance(a);
        if (a.__ascent != null) {
          var c = a.size * a.__ascent;
          b = a.size * a.__descent;
        } else if (b != null && b.unitsPerEM != 0) {
          c = b.ascender / b.unitsPerEM * a.size;
          b = Math.abs(b.descender / b.unitsPerEM * a.size);
        } else {
          c = a.size;
          b = a.size * 0.185;
        }
        return c + b + a.leading;
      };
      ic.getFont = function (a) {
        var b = a.font;
        var c = a.bold;
        var d = a.italic;
        if (b == null) {
          b = "_serif";
        }
        var e = v.replace(v.replace(b, " Normal", ""), " Regular", "");
        if (c && d && Object.prototype.hasOwnProperty.call(fb.__fontByName.h, e + " Bold Italic")) {
          b = e + " Bold Italic";
          d = c = false;
        } else if (c && Object.prototype.hasOwnProperty.call(fb.__fontByName.h, e + " Bold")) {
          b = e + " Bold";
          c = false;
        } else if (d && Object.prototype.hasOwnProperty.call(fb.__fontByName.h, e + " Italic")) {
          b = e + " Italic";
          d = false;
        } else {
          if (c && (b.indexOf(" Bold ") > -1 || v.endsWith(b, " Bold"))) {
            c = false;
          }
          if (d && (b.indexOf(" Italic ") > -1 || v.endsWith(b, " Italic"))) {
            d = false;
          }
        }
        c = (d ? "italic " : "normal ") + "normal " + (c ? "bold " : "normal ");
        c += a.size + "px";
        c += "/" + (a.size + 3) + "px ";
        switch (b) {
          case "_sans":
            a = "sans-serif";
            break;
          case "_serif":
            a = "serif";
            break;
          case "_typewriter":
            a = "monospace";
            break;
          default:
            a = "'" + b.replace(/^[\s'"]+(.*)[\s'"]+$/, "$1") + "'";
        }
        return c += "" + a;
      };
      ic.getFontInstance = function (a) {
        return ic.findFontVariant(a);
      };
      ic.prototype = {
        getBounds: function () {
          var a = this.border ? 1 : 0;
          this.bounds.width = this.width + a;
          this.bounds.height = this.height + a;
          a = this.width;
          var b = this.height;
          var c = this.layoutGroups.get_length() - 1;
          for (var d = 0, e = this.layoutGroups.get_length(); d < e;) {
            var f = d++;
            var g = this.layoutGroups.get(f);
            if (f != c || g.startIndex != g.endIndex || this.type == 1) {
              if (g.offsetX < a) {
                a = g.offsetX;
              }
              if (g.offsetY < b) {
                b = g.offsetY;
              }
            }
          }
          if (a >= this.width) {
            a = 2;
          }
          if (b >= this.height) {
            b = 2;
          }
          this.textBounds.setTo(Math.max(a - 2, 0), Math.max(b - 2, 0), Math.min(this.textWidth + 4, this.bounds.width), Math.min(this.textHeight * 1.185 + 4, this.bounds.height));
        },
        getLineBreaks: function () {
          this.lineBreaks.set_length(0);
          for (var a = -1, b; a < this.text.length;) {
            b = this.text.indexOf("\n", a + 1);
            a = this.text.indexOf("\r", a + 1);
            a = a == -1 ? b : b == -1 ? a : a < b ? a : b;
            if (a > -1) {
              this.lineBreaks.push(a);
            } else {
              break;
            }
          }
        },
        getLineMeasurements: function () {
          this.lineAscents.set_length(0);
          this.lineDescents.set_length(0);
          this.lineLeadings.set_length(0);
          this.lineHeights.set_length(0);
          this.lineWidths.set_length(0);
          var a = 0;
          var b = 0;
          var c = null;
          var d = 0;
          var e = 0;
          this.textHeight = this.textWidth = 0;
          this.numLines = 1;
          this.maxScrollH = 0;
          var f = this.layoutGroups.get_length() - 1;
          for (var g = 0, h = this.layoutGroups.get_length(); g < h;) {
            var l = g++;
            var p = this.layoutGroups.get(l);
            if (l != f || p.startIndex != p.endIndex || this.type == 1) {
              while (p.lineIndex > this.numLines - 1) {
                this.lineAscents.push(a);
                this.lineDescents.push(b);
                this.lineLeadings.push(c ?? 0);
                this.lineHeights.push(d);
                this.lineWidths.push(e);
                b = a = 0;
                c = null;
                e = d = 0;
                this.numLines++;
              }
              a = Math.max(a, p.ascent);
              b = Math.max(b, p.descent);
              c = c == null ? p.leading : Math.max(c, p.leading) | 0;
              d = Math.max(d, p.height);
              e = p.offsetX - 2 + p.width;
              if (e > this.textWidth) {
                this.textWidth = e;
              }
              l = Math.ceil(p.offsetY - 2 + p.ascent + p.descent);
              if (l > this.textHeight) {
                this.textHeight = l;
              }
            }
          }
          if (this.textHeight == 0 && this.textField != null && this.type == 1) {
            a = this.textField.__textFormat;
            b = ic.getFontInstance(a);
            if (a.__ascent != null) {
              f = a.size * a.__ascent;
              g = a.size * a.__descent;
            } else if (b != null && b.unitsPerEM != 0) {
              f = b.ascender / b.unitsPerEM * a.size;
              g = Math.abs(b.descender / b.unitsPerEM * a.size);
            } else {
              f = a.size;
              g = a.size * 0.185;
            }
            c = a.leading;
            a = f;
            b = g;
            this.textHeight = l = Math.ceil(f + g);
          }
          this.lineAscents.push(a);
          this.lineDescents.push(b);
          this.lineLeadings.push(c ?? 0);
          this.lineHeights.push(d);
          this.lineWidths.push(e);
          if (this.numLines == 1 && c > 0) {
            this.textHeight += c;
          }
          if (this.autoSize != 2) {
            switch (this.autoSize) {
              case 0:
              case 1:
              case 3:
                if (!this.wordWrap) {
                  this.width = this.textWidth + 4;
                }
                this.height = this.textHeight + 4;
                this.bottomScrollV = this.numLines;
            }
          }
          this.maxScrollH = this.textWidth > this.width - 4 ? this.textWidth - this.width + 4 | 0 : 0;
          if (this.scrollH > this.maxScrollH) {
            this.scrollH = this.maxScrollH;
          }
        },
        getLayoutGroups: function () {
          var a = this;
          this.layoutGroups.set_length(0);
          if (this.text != null && this.text != "") {
            var b = -1;
            var c = null;
            var d = null;
            var e = Sc.__defaultTextFormat.clone();
            var f = 0;
            var g = 0;
            var h = 0;
            var l = 0;
            var p = 3;
            var n = 0;
            var m = 0;
            var r = 0;
            var q = 0;
            var w = true;
            var u = null;
            var v = null;
            var y = 0;
            var z = 0;
            var Y = 0;
            var A = -2;
            var C = -1;
            var D = this.text.indexOf(" ");
            var La = 0;
            var E = La < this.lineBreaks.get_length() ? this.lineBreaks.get(La) : -1;
            var B = 0;
            var x = 0;
            var G = 0;
            var I = 0;
            function ha(b, d, f) {
              function g() {
                var c = [];
                if (a.__useIntAdvances == null) {
                  var e = new na("Trident/7.0", "");
                  a.__useIntAdvances = e.match(F.navigator.userAgent);
                }
                if (a.__useIntAdvances) {
                  var g = 0;
                  e = d;
                  for (var k = f; e < k;) {
                    var l = e++;
                    l = a.measureText(b.substring(d, l + 1));
                    c.push(l - g);
                    g = l;
                  }
                } else {
                  e = d;
                  k = f;
                  while (e < k) {
                    l = e++;
                    if (l < b.length - 1) {
                      g = a.measureText(b.charAt(l + 1));
                      g = a.measureText(L.substr(b, l, 2)) - g;
                    } else {
                      g = ic.__context.measureText(b.charAt(l)).width;
                    }
                    c.push(g);
                  }
                }
                return c;
              }
              if (e.align == 2) {
                return g();
              } else {
                return a.__shapeCache.cache(c, g, b.substring(d, f));
              }
            }
            function Ea(a) {
              var b = 0;
              for (var c = 0; c < a.length;) {
                var d = a[c];
                ++c;
                b += d;
              }
              return b;
            }
            function S() {
              return 2 + r + n + (w ? m : 0);
            }
            function ma() {
              return a.width - 2 - q - S();
            }
            function K(b, d) {
              if (u == null || u.startIndex != u.endIndex) {
                u = new Tm(c.format, b, d);
                a.layoutGroups.push(u);
              } else {
                u.format = c.format;
                u.startIndex = b;
                u.endIndex = d;
              }
            }
            function la() {
              if (e.__ascent != null) {
                g = e.size * e.__ascent;
                l = e.size * e.__descent;
              } else if (d != null && d.unitsPerEM != 0) {
                g = d.ascender / d.unitsPerEM * e.size;
                l = Math.abs(d.descender / d.unitsPerEM * e.size);
              } else {
                g = e.size;
                l = e.size * 0.185;
              }
              f = e.leading;
              z = Math.ceil(g + l + f);
              if (z > Y) {
                Y = z;
              }
              if (g > h) {
                h = g;
              }
            }
            function ka() {
              w = true;
              p = e.align ?? 3;
              n = e.blockIndent ?? 0;
              m = e.indent ?? 0;
              r = e.leftMargin ?? 0;
              q = e.rightMargin ?? 0;
            }
            function H() {
              if (b < a.textFormatRanges.get_length() - 1) {
                b += 1;
                c = a.textFormatRanges.get(b);
                e.__merge(c.format);
                var f = ic.getFont(e);
                ic.__context.font = f;
                d = ic.getFontInstance(e);
                return true;
              }
              return false;
            }
            function O(d, e) {
              if (d >= e) {
                v = [];
                y = 0;
              } else if (e <= c.end) {
                v = ha(a.text, d, e);
                y = Ea(v);
              } else {
                var f = d;
                d = c.end;
                var g = 0;
                v = [];
                for (y = 0;;) {
                  if (f != d) {
                    f = ha(a.text, f, d);
                    v = v.concat(f);
                  }
                  if (d != e) {
                    if (!H()) {
                      Ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                        fileName: "openfl/text/_internal/TextEngine.hx",
                        lineNumber: 1121,
                        className: "openfl.text._internal.TextEngine",
                        methodName: "getLayoutGroups"
                      });
                      break;
                    }
                    f = d;
                    d = e < c.end ? e : c.end;
                    ++g;
                  } else {
                    y = Ea(v);
                    break;
                  }
                }
                b -= g + 1;
                H();
              }
            }
            function M(b) {
              if (b <= c.end) {
                v = ha(a.text, G, b);
                y = Ea(v);
                K(G, b);
                u.positions = v;
                var d = B;
                var e = S();
                u.offsetX = d + e;
                u.ascent = g;
                u.descent = l;
                u.leading = f;
                u.lineIndex = I;
                u.offsetY = x + 2;
                u.width = y;
                u.height = z;
                B += y;
                if (b == c.end) {
                  u = null;
                  H();
                  la();
                }
              } else {
                while (true) {
                  var k = b < c.end ? b : c.end;
                  if (G != k) {
                    v = ha(a.text, G, k);
                    y = Ea(v);
                    K(G, k);
                    u.positions = v;
                    d = B;
                    e = S();
                    u.offsetX = d + e;
                    u.ascent = g;
                    u.descent = l;
                    u.leading = f;
                    u.lineIndex = I;
                    u.offsetY = x + 2;
                    u.width = y;
                    u.height = z;
                    B += y;
                    G = k;
                  }
                  if (k == c.end) {
                    u = null;
                  }
                  if (k == b) {
                    break;
                  }
                  if (!H()) {
                    Ua.warn("You found a bug in OpenFL's text code! Please save a copy of your project and create an issue on GitHub so we can fix this.", {
                      fileName: "openfl/text/_internal/TextEngine.hx",
                      lineNumber: 1209,
                      className: "openfl.text._internal.TextEngine",
                      methodName: "getLayoutGroups"
                    });
                    break;
                  }
                  la();
                }
              }
              G = b;
            }
            function P() {
              la();
              for (var b = a.layoutGroups.get_length(); --b > -1;) {
                var c = a.layoutGroups.get(b);
                if (c.lineIndex < I) {
                  break;
                }
                if (!(c.lineIndex > I)) {
                  c.ascent = h;
                  c.height = Y;
                }
              }
              x += Y;
              Y = h = 0;
              I += 1;
              B = 0;
              w = false;
            }
            function R(b) {
              if (a.width >= 4 && a.wordWrap) {
                var c = v;
                var d = Ea(c);
                for (var e = c.length - 1; e >= 0;) {
                  var f = L.cca(a.text, G + e);
                  if (f != 32 && f != 9) {
                    break;
                  }
                  d -= c[e];
                  --e;
                }
                while (c.length > 0 && B + d > ma()) {
                  for (f = e = d = 0; B + f < ma();) {
                    var g = c[e];
                    if (g == 0) {
                      ++e;
                      ++d;
                    } else {
                      f += g;
                      ++e;
                    }
                  }
                  if (e == d) {
                    e = d + 1;
                  } else {
                    while (e > 1 && B + f > ma()) {
                      --e;
                      if (e - d > 0) {
                        O(G, G + e - d);
                        f = y;
                      } else {
                        e = 1;
                        d = 0;
                        O(G, G + 1);
                        f = 0;
                      }
                    }
                  }
                  c = G + e - d;
                  M(c);
                  P();
                  O(c, b);
                  c = v;
                  d = y;
                }
              }
              M(b);
            }
            H();
            ka();
            la();
            var N;
            for (var Ba = this.text.length + 1; G < Ba;) {
              if (E > -1 && (D == -1 || E < D)) {
                if (G <= E) {
                  O(G, E);
                  R(E);
                  u = null;
                } else if (u != null && u.startIndex != u.endIndex) {
                  if (u.endIndex == D) {
                    u.width -= u.positions[u.positions.length - 1];
                  }
                  u = null;
                }
                P();
                if (c.end == E) {
                  H();
                  la();
                }
                G = E + 1;
                C = E;
                ++La;
                E = La < this.lineBreaks.get_length() ? this.lineBreaks.get(La) : -1;
                ka();
              } else if (D > -1) {
                if (u != null && u.startIndex != u.endIndex) {
                  u = null;
                }
                N = false;
                while (G < this.text.length) {
                  var Q = -1;
                  if (D == -1) {
                    Q = E;
                  } else {
                    Q = D + 1;
                    if (E > -1 && E < Q) {
                      Q = E;
                    }
                  }
                  if (Q == -1) {
                    Q = this.text.length;
                  }
                  O(G, Q);
                  if (p == 2) {
                    if (v.length > 0 && G == A) {
                      G += 1;
                      var T = v.shift();
                      y -= T;
                      B += T;
                    }
                    if (v.length > 0 && Q == D + 1) {
                      --Q;
                      T = v.pop();
                      y -= T;
                    }
                  }
                  if (this.wordWrap && B + y > ma()) {
                    N = true;
                    if (v.length > 0 && Q == D + 1 && B + y - v[v.length - 1] <= ma()) {
                      N = false;
                    }
                  }
                  if (N) {
                    if (p != 2 && (u != null || this.layoutGroups.get_length() > 0)) {
                      N = u;
                      if (N == null) {
                        N = this.layoutGroups.get(this.layoutGroups.get_length() - 1);
                      }
                      N.width -= N.positions[N.positions.length - 1];
                      N.endIndex--;
                    }
                    N = this.layoutGroups.get_length() - 1;
                    for (T = 0; N >= 0;) {
                      u = this.layoutGroups.get(N);
                      if (N > 0 && u.startIndex > A) {
                        ++T;
                      } else {
                        break;
                      }
                      --N;
                    }
                    if (G == A + 1) {
                      P();
                    }
                    B = 0;
                    if (T > 0) {
                      N = this.layoutGroups.get(this.layoutGroups.get_length() - T).offsetX;
                      T = this.layoutGroups.get_length() - T;
                      for (var U = this.layoutGroups.get_length(); T < U;) {
                        var wb = T++;
                        u = this.layoutGroups.get(wb);
                        u.offsetX -= N;
                        u.offsetY = x + 2;
                        u.lineIndex = I;
                        B += u.width;
                      }
                    }
                    R(Q);
                    N = false;
                  } else if (u != null && G == D && A != D - 1) {
                    if (p != 2) {
                      u.endIndex = D;
                      u.positions = u.positions.concat(v);
                      u.width += y;
                    }
                    B += y;
                    G = Q;
                  } else if (u == null || p == 2) {
                    R(Q);
                    if (Q == this.text.length) {
                      P();
                    }
                  } else {
                    T = Q < c.end ? Q : c.end;
                    if (T < Q) {
                      v = ha(this.text, G, T);
                      y = Ea(v);
                    }
                    u.endIndex = T;
                    u.positions = u.positions.concat(v);
                    u.width += y;
                    B += y;
                    if (T == c.end) {
                      u = null;
                      H();
                      la();
                      G = T;
                      if (T != Q) {
                        M(Q);
                      }
                    }
                    if (E == Q) {
                      ++Q;
                    }
                    G = Q;
                    if (Q == this.text.length) {
                      P();
                      if (E != -1) {
                        C = E;
                        ++La;
                        E = La < this.lineBreaks.get_length() ? this.lineBreaks.get(La) : -1;
                      }
                    }
                  }
                  Q = this.text.indexOf(" ", G);
                  if (E == A) {
                    u.endIndex = E;
                    if (E - u.startIndex - u.positions.length < 0) {
                      u.positions.push(0);
                    }
                    G = E + 1;
                  }
                  A = D;
                  D = Q;
                  if (E > -1 && E <= G && (D > E || D == -1) || G > this.text.length) {
                    break;
                  }
                }
              } else {
                if (G < this.text.length) {
                  O(G, this.text.length);
                  R(this.text.length);
                  P();
                }
                G += 1;
              }
            }
            if (C == G - 2 && C > -1) {
              K(G - 1, G - 1);
              u.positions = [];
              u.ascent = g;
              u.descent = l;
              u.leading = f;
              u.lineIndex = I;
              u.offsetX = S();
              u.offsetY = x + 2;
              u.width = 0;
              u.height = z;
            }
          }
        },
        measureText: function (a) {
          return ic.__context.measureText(a).width;
        },
        restrictText: function (a) {
          if (a == null) {
            return a;
          }
          if (this.__restrictRegexp != null) {
            a = this.__restrictRegexp.split(a).join("");
          }
          return a;
        },
        setTextAlignment: function () {
          var a = -1;
          var b = 0;
          var c;
          var d;
          var e = false;
          for (var f = 0, g = this.layoutGroups.get_length(); f < g;) {
            var h = f++;
            c = this.layoutGroups.get(h);
            if (c.lineIndex != a) {
              a = c.lineIndex;
              b = this.width - 4 - c.format.rightMargin;
              switch (c.format.align) {
                case 0:
                  b = this.lineWidths.get(a) < b ? Math.round((b - this.lineWidths.get(a)) / 2) : 0;
                  break;
                case 2:
                  if (this.lineWidths.get(a) < b) {
                    d = 1;
                    for (var l = h + 1, p = this.layoutGroups.get_length(); l < p;) {
                      var n = l++;
                      if (this.layoutGroups.get(n).lineIndex == a) {
                        if (n == 0 || L.cca(this.text, this.layoutGroups.get(n).startIndex - 1) == 32) {
                          ++d;
                        }
                      } else {
                        break;
                      }
                    }
                    if (d > 1 && (c = this.layoutGroups.get(h + d - 1), l = L.cca(this.text, c.endIndex), c.endIndex < this.text.length && l != 10 && l != 13)) {
                      b = (b - this.lineWidths.get(a)) / (d - 1);
                      e = true;
                      l = 1;
                      do {
                        this.layoutGroups.get(h + l).offsetX += b * l;
                      } while (++l < d);
                    }
                  }
                  b = 0;
                  break;
                case 4:
                  b = this.lineWidths.get(a) < b ? Math.round(b - this.lineWidths.get(a)) : 0;
                  break;
                default:
                  b = 0;
              }
            }
            if (b > 0) {
              c.offsetX += b;
            }
          }
          if (e) {
            this.getLineMeasurements();
          }
        },
        update: function () {
          if (this.text == null || this.textFormatRanges.get_length() == 0) {
            this.lineAscents.set_length(0);
            this.lineBreaks.set_length(0);
            this.lineDescents.set_length(0);
            this.lineLeadings.set_length(0);
            this.lineHeights.set_length(0);
            this.lineWidths.set_length(0);
            this.layoutGroups.set_length(0);
            this.textHeight = this.textWidth = 0;
            this.numLines = 1;
            this.maxScrollH = 0;
            this.bottomScrollV = this.maxScrollV = 1;
          } else {
            this.getLineBreaks();
            this.getLayoutGroups();
            this.getLineMeasurements();
            this.setTextAlignment();
          }
          this.getBounds();
        },
        get_bottomScrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          var a = this.lineHeights.get_length();
          var b = this.lineLeadings.get_length() == a ? -this.lineLeadings.get(a - 1) : 0;
          for (var c = (this.get_scrollV() > 0 ? this.get_scrollV() : 1) - 1, d = this.lineHeights.get_length(); c < d;) {
            var e = c++;
            var f = this.lineHeights.get(e);
            b += f;
            if (b > this.height - 4) {
              a = e + (b - this.height >= 0 ? 0 : 1);
              break;
            }
          }
          if (a < this.get_scrollV()) {
            return this.get_scrollV();
          } else {
            return a;
          }
        },
        get_maxScrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          for (var a = this.numLines - 1, b = 0; a >= 0;) {
            b += this.lineHeights.get(a);
            if (b > this.height - 4) {
              a += b - this.height < 0 ? 1 : 2;
              break;
            }
            --a;
          }
          if (a < 1) {
            return 1;
          } else {
            return a;
          }
        },
        get_scrollV: function () {
          if (this.numLines == 1 || this.lineHeights == null) {
            return 1;
          }
          var a = this.get_maxScrollV();
          if (this.scrollV > a) {
            return a;
          } else {
            return this.scrollV;
          }
        },
        set_scrollV: function (a) {
          if (a < 1) {
            a = 1;
          } else if (a > this.get_maxScrollV()) {
            a = this.get_maxScrollV();
          }
          return this.scrollV = a;
        },
        set_text: function (a) {
          return this.text = a;
        },
        __class__: ic,
        __properties__: {
          set_text: "set_text",
          set_scrollV: "set_scrollV",
          get_scrollV: "get_scrollV",
          get_maxScrollV: "get_maxScrollV",
          get_bottomScrollV: "get_bottomScrollV"
        }
      };
      function Td(a, b, c) {
        this.format = a;
        this.start = b;
        this.end = c;
      }
      h["openfl.text._internal.TextFormatRange"] = Td;
      Td.__name__ = "openfl.text._internal.TextFormatRange";
      Td.prototype = {
        __class__: Td
      };
      function Tm(a, b, c) {
        this.format = a;
        this.startIndex = b;
        this.endIndex = c;
      }
      h["openfl.text._internal.TextLayoutGroup"] = Tm;
      Tm.__name__ = "openfl.text._internal.TextLayoutGroup";
      Tm.prototype = {
        __class__: Tm
      };
      function Ne(a, b, c, d, e) {
        if (e == null) {
          e = 0;
        }
        va.call(this);
        this.device = a;
        this.id = b;
        this.minValue = c;
        this.maxValue = d;
        this.value = e;
      }
      h["openfl.ui.GameInputControl"] = Ne;
      Ne.__name__ = "openfl.ui.GameInputControl";
      Ne.__super__ = va;
      Ne.prototype = q(va.prototype, {
        __class__: Ne
      });
      function Nn(a, b) {
        this.__controls = [];
        this.__button = new Ac();
        this.__axis = new Ac();
        this.id = a;
        this.name = b;
        a = new Ne(this, "AXIS_0", -1, 1);
        this.__axis.h[0] = a;
        this.__controls.push(a);
        a = new Ne(this, "AXIS_1", -1, 1);
        this.__axis.h[1] = a;
        this.__controls.push(a);
        a = new Ne(this, "AXIS_2", -1, 1);
        this.__axis.h[2] = a;
        this.__controls.push(a);
        a = new Ne(this, "AXIS_3", -1, 1);
        this.__axis.h[3] = a;
        this.__controls.push(a);
        a = new Ne(this, "AXIS_4", -1, 1);
        this.__axis.h[4] = a;
        this.__controls.push(a);
        a = new Ne(this, "AXIS_5", -1, 1);
        this.__axis.h[5] = a;
        this.__controls.push(a);
        for (b = 0; b < 15;) {
          var c = b++;
          a = new Ne(this, "BUTTON_" + c, 0, 1);
          this.__button.h[c] = a;
          this.__controls.push(a);
        }
      }
      h["openfl.ui.GameInputDevice"] = Nn;
      Nn.__name__ = "openfl.ui.GameInputDevice";
      Nn.prototype = {
        getControlAt: function (a) {
          if (a >= 0 && a < this.__controls.length) {
            return this.__controls[a];
          } else {
            return null;
          }
        },
        get_numControls: function () {
          return this.__controls.length;
        },
        __class__: Nn,
        __properties__: {
          get_numControls: "get_numControls"
        }
      };
      function qp() {}
      h["openfl.ui.Keyboard"] = qp;
      qp.__name__ = "openfl.ui.Keyboard";
      qp.__getCharCode = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (b) {
          switch (a) {
            case 48:
              return 41;
            case 49:
              return 33;
            case 50:
              return 64;
            case 51:
              return 35;
            case 52:
              return 36;
            case 53:
              return 37;
            case 54:
              return 94;
            case 55:
              return 38;
            case 56:
              return 42;
            case 57:
              return 40;
            case 186:
              return 58;
            case 187:
              return 43;
            case 188:
              return 60;
            case 189:
              return 95;
            case 190:
              return 62;
            case 191:
              return 63;
            case 192:
              return 126;
            case 219:
              return 123;
            case 220:
              return 124;
            case 221:
              return 125;
            case 222:
              return 34;
          }
          if (a >= 65 && a <= 90) {
            return a - 65 + 65;
          }
        } else {
          switch (a) {
            case 8:
              return 8;
            case 9:
              return 9;
            case 13:
              return 13;
            case 27:
              return 27;
            case 32:
              return 32;
            case 186:
              return 59;
            case 187:
              return 61;
            case 188:
              return 44;
            case 189:
              return 45;
            case 190:
              return 46;
            case 191:
              return 47;
            case 192:
              return 96;
            case 219:
              return 91;
            case 220:
              return 92;
            case 221:
              return 93;
            case 222:
              return 39;
          }
          if (a >= 48 && a <= 57) {
            return a - 48 + 48;
          }
          if (a >= 65 && a <= 90) {
            return a - 65 + 97;
          }
        }
        if (a >= 96 && a <= 105) {
          return a - 96 + 48;
        }
        switch (a) {
          case 8:
            return 8;
          case 13:
            return 13;
          case 46:
            return 127;
          case 106:
            return 42;
          case 107:
            return 43;
          case 108:
            return 44;
          case 110:
            return 45;
          case 111:
            return 46;
        }
        return 0;
      };
      function hd() {}
      h["openfl.ui.Mouse"] = hd;
      hd.__name__ = "openfl.ui.Mouse";
      hd.__properties__ = {
        set_cursor: "set_cursor"
      };
      hd.hide = function () {
        hd.__hidden = true;
        for (var a = 0, b = ka.current.__windows; a < b.length;) {
          var c = b[a];
          ++a;
          c.set_cursor(null);
        }
      };
      hd.show = function () {
        hd.__hidden = false;
        var a = hd.__cursor;
        hd.__cursor = null;
        hd.set_cursor(a);
      };
      hd.set_cursor = function (a) {
        if (a == null) {
          a = "auto";
        }
        var b = null;
        switch (a) {
          case "arrow":
            b = Tb.ARROW;
            break;
          case "button":
            b = Tb.POINTER;
            break;
          case "crosshair":
            b = Tb.CROSSHAIR;
            break;
          case "custom":
            b = Tb.CUSTOM;
            break;
          case "hand":
            b = Tb.MOVE;
            break;
          case "ibeam":
            b = Tb.TEXT;
            break;
          case "resize_nesw":
            b = Tb.RESIZE_NESW;
            break;
          case "resize_ns":
            b = Tb.RESIZE_NS;
            break;
          case "resize_nwse":
            b = Tb.RESIZE_NWSE;
            break;
          case "resize_we":
            b = Tb.RESIZE_WE;
            break;
          case "wait":
            b = Tb.WAIT;
            break;
          case "waitarrow":
            b = Tb.WAIT_ARROW;
        }
        if (b != null && !hd.__hidden) {
          for (var c = 0, d = ka.current.__windows; c < d.length;) {
            var e = d[c];
            ++c;
            e.set_cursor(b);
          }
        }
        return hd.__cursor = a;
      };
      var Up = {
        toLimeCursor: function (a) {
          switch (a) {
            case "arrow":
              return Tb.ARROW;
            case "auto":
              return Tb.DEFAULT;
            case "button":
              return Tb.POINTER;
            case "crosshair":
              return Tb.CROSSHAIR;
            case "custom":
              return Tb.CUSTOM;
            case "hand":
              return Tb.MOVE;
            case "ibeam":
              return Tb.TEXT;
            case "resize_nesw":
              return Tb.RESIZE_NESW;
            case "resize_ns":
              return Tb.RESIZE_NS;
            case "resize_nwse":
              return Tb.RESIZE_NWSE;
            case "resize_we":
              return Tb.RESIZE_WE;
            case "wait":
              return Tb.WAIT;
            case "waitarrow":
              return Tb.WAIT_ARROW;
            default:
              return Tb.DEFAULT;
          }
        }
      };
      function ii() {}
      h["openfl.ui.Multitouch"] = ii;
      ii.__name__ = "openfl.ui.Multitouch";
      function ua(a) {
        if (a == null) {
          a = false;
        }
        this.debugEnabled = a;
        if (!ua.initialized) {
          ua.init();
        }
      }
      h["openfl.utils.AGALMiniAssembler"] = ua;
      ua.__name__ = "openfl.utils.AGALMiniAssembler";
      ua.init = function () {
        ua.initialized = true;
        var a = ua.OPMAP;
        var b = new Ib("mov", 2, 0, 0);
        a.h.mov = b;
        a = ua.OPMAP;
        b = new Ib("add", 3, 1, 0);
        a.h.add = b;
        a = ua.OPMAP;
        b = new Ib("sub", 3, 2, 0);
        a.h.sub = b;
        a = ua.OPMAP;
        b = new Ib("mul", 3, 3, 0);
        a.h.mul = b;
        a = ua.OPMAP;
        b = new Ib("div", 3, 4, 0);
        a.h.div = b;
        a = ua.OPMAP;
        b = new Ib("rcp", 2, 5, 0);
        a.h.rcp = b;
        a = ua.OPMAP;
        b = new Ib("min", 3, 6, 0);
        a.h.min = b;
        a = ua.OPMAP;
        b = new Ib("max", 3, 7, 0);
        a.h.max = b;
        a = ua.OPMAP;
        b = new Ib("frc", 2, 8, 0);
        a.h.frc = b;
        a = ua.OPMAP;
        b = new Ib("sqt", 2, 9, 0);
        a.h.sqt = b;
        a = ua.OPMAP;
        b = new Ib("rsq", 2, 10, 0);
        a.h.rsq = b;
        a = ua.OPMAP;
        b = new Ib("pow", 3, 11, 0);
        a.h.pow = b;
        a = ua.OPMAP;
        b = new Ib("log", 2, 12, 0);
        a.h.log = b;
        a = ua.OPMAP;
        b = new Ib("exp", 2, 13, 0);
        a.h.exp = b;
        a = ua.OPMAP;
        b = new Ib("nrm", 2, 14, 0);
        a.h.nrm = b;
        a = ua.OPMAP;
        b = new Ib("sin", 2, 15, 0);
        a.h.sin = b;
        a = ua.OPMAP;
        b = new Ib("cos", 2, 16, 0);
        a.h.cos = b;
        a = ua.OPMAP;
        b = new Ib("crs", 3, 17, 0);
        a.h.crs = b;
        a = ua.OPMAP;
        b = new Ib("dp3", 3, 18, 0);
        a.h.dp3 = b;
        a = ua.OPMAP;
        b = new Ib("dp4", 3, 19, 0);
        a.h.dp4 = b;
        a = ua.OPMAP;
        b = new Ib("abs", 2, 20, 0);
        a.h.abs = b;
        a = ua.OPMAP;
        b = new Ib("neg", 2, 21, 0);
        a.h.neg = b;
        a = ua.OPMAP;
        b = new Ib("sat", 2, 22, 0);
        a.h.sat = b;
        a = ua.OPMAP;
        b = new Ib("m33", 3, 23, 16);
        a.h.m33 = b;
        a = ua.OPMAP;
        b = new Ib("m44", 3, 24, 16);
        a.h.m44 = b;
        a = ua.OPMAP;
        b = new Ib("m34", 3, 25, 16);
        a.h.m34 = b;
        a = ua.OPMAP;
        b = new Ib("ddx", 2, 26, 288);
        a.h.ddx = b;
        a = ua.OPMAP;
        b = new Ib("ddy", 2, 27, 288);
        a.h.ddy = b;
        a = ua.OPMAP;
        b = new Ib("ife", 2, 28, 897);
        a.h.ife = b;
        a = ua.OPMAP;
        b = new Ib("ine", 2, 29, 897);
        a.h.ine = b;
        a = ua.OPMAP;
        b = new Ib("ifg", 2, 30, 897);
        a.h.ifg = b;
        a = ua.OPMAP;
        b = new Ib("ifl", 2, 31, 897);
        a.h.ifl = b;
        a = ua.OPMAP;
        b = new Ib("els", 0, 32, 1921);
        a.h.els = b;
        a = ua.OPMAP;
        b = new Ib("eif", 0, 33, 1409);
        a.h.eif = b;
        a = ua.OPMAP;
        b = new Ib("kil", 1, 39, 160);
        a.h.kil = b;
        a = ua.OPMAP;
        b = new Ib("tex", 3, 40, 40);
        a.h.tex = b;
        a = ua.OPMAP;
        b = new Ib("sge", 3, 41, 0);
        a.h.sge = b;
        a = ua.OPMAP;
        b = new Ib("slt", 3, 42, 0);
        a.h.slt = b;
        a = ua.OPMAP;
        b = new Ib("sgn", 2, 43, 0);
        a.h.sgn = b;
        a = ua.OPMAP;
        b = new Ib("seq", 3, 44, 0);
        a.h.seq = b;
        a = ua.OPMAP;
        b = new Ib("sne", 3, 45, 0);
        a.h.sne = b;
        a = ua.SAMPLEMAP;
        b = new xc("rgba", 8, 0);
        a.h.rgba = b;
        a = ua.SAMPLEMAP;
        b = new xc("compressed", 8, 1);
        a.h.compressed = b;
        a = ua.SAMPLEMAP;
        b = new xc("compressedalpha", 8, 2);
        a.h.compressedalpha = b;
        a = ua.SAMPLEMAP;
        b = new xc("dxt1", 8, 1);
        a.h.dxt1 = b;
        a = ua.SAMPLEMAP;
        b = new xc("dxt5", 8, 2);
        a.h.dxt5 = b;
        a = ua.SAMPLEMAP;
        b = new xc("video", 8, 3);
        a.h.video = b;
        a = ua.SAMPLEMAP;
        b = new xc("2d", 12, 0);
        a.h["2d"] = b;
        a = ua.SAMPLEMAP;
        b = new xc("3d", 12, 2);
        a.h["3d"] = b;
        a = ua.SAMPLEMAP;
        b = new xc("cube", 12, 1);
        a.h.cube = b;
        a = ua.SAMPLEMAP;
        b = new xc("mipnearest", 24, 1);
        a.h.mipnearest = b;
        a = ua.SAMPLEMAP;
        b = new xc("miplinear", 24, 2);
        a.h.miplinear = b;
        a = ua.SAMPLEMAP;
        b = new xc("mipnone", 24, 0);
        a.h.mipnone = b;
        a = ua.SAMPLEMAP;
        b = new xc("nomip", 24, 0);
        a.h.nomip = b;
        a = ua.SAMPLEMAP;
        b = new xc("nearest", 28, 0);
        a.h.nearest = b;
        a = ua.SAMPLEMAP;
        b = new xc("linear", 28, 1);
        a.h.linear = b;
        a = ua.SAMPLEMAP;
        b = new xc("anisotropic2x", 28, 2);
        a.h.anisotropic2x = b;
        a = ua.SAMPLEMAP;
        b = new xc("anisotropic4x", 28, 3);
        a.h.anisotropic4x = b;
        a = ua.SAMPLEMAP;
        b = new xc("anisotropic8x", 28, 4);
        a.h.anisotropic8x = b;
        a = ua.SAMPLEMAP;
        b = new xc("anisotropic16x", 28, 5);
        a.h.anisotropic16x = b;
        a = ua.SAMPLEMAP;
        b = new xc("centroid", 16, 1);
        a.h.centroid = b;
        a = ua.SAMPLEMAP;
        b = new xc("single", 16, 2);
        a.h.single = b;
        a = ua.SAMPLEMAP;
        b = new xc("ignoresampler", 16, 4);
        a.h.ignoresampler = b;
        a = ua.SAMPLEMAP;
        b = new xc("repeat", 20, 1);
        a.h.repeat = b;
        a = ua.SAMPLEMAP;
        b = new xc("wrap", 20, 1);
        a.h.wrap = b;
        a = ua.SAMPLEMAP;
        b = new xc("clamp", 20, 0);
        a.h.clamp = b;
        a = ua.SAMPLEMAP;
        b = new xc("clamp_u_repeat_v", 20, 2);
        a.h.clamp_u_repeat_v = b;
        a = ua.SAMPLEMAP;
        b = new xc("repeat_u_clamp_v", 20, 3);
        a.h.repeat_u_clamp_v = b;
      };
      ua.prototype = {
        assemble: function (a, b, c, d) {
          if (d == null) {
            d = false;
          }
          if (c == null) {
            c = 1;
          }
          var e = ia.getTimer();
          this.agalcode = new sd(0);
          this.error = "";
          var f = false;
          if (a == "fragment") {
            f = true;
          } else if (a != "vertex") {
            this.error = "ERROR: mode needs to be \"fragment\" or \"vertex\" but is \"" + a + "\".";
          }
          this.agalcode.__endian = 1;
          this.agalcode.writeByte(160);
          this.agalcode.writeUnsignedInt(c);
          this.agalcode.writeByte(161);
          this.agalcode.writeByte(f ? 1 : 0);
          this.initregmap(c, d);
          a = v.replace(b, "\r", "\n").split("\n");
          b = 0;
          d = a.length;
          var g = new na("<.*>", "g");
          var h = new na("([\\w\\.\\-\\+]+)", "gi");
          var l = new na("^\\w{3}", "ig");
          var p = new na("vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?", "gi");
          var n = new na("\\[.*\\]", "ig");
          var m = new na("^\\b[A-Za-z]{1,3}", "ig");
          var r = new na("\\d+", "");
          var q = new na("(\\.[xyzw]{1,4})", "");
          var w = new na("[A-Za-z]{1,3}", "ig");
          var u = new na("(\\.[xyzw]{1,1})", "");
          var z = new na("\\+\\d{1,3}", "ig");
          for (var Y = 0; Y < d && this.error == "";) {
            var A = v.trim(a[Y]);
            var C = A.indexOf("//");
            if (C != -1) {
              A = L.substr(A, 0, C);
            }
            var D = g.match(A) ? g.matchedPos().pos : -1;
            C = null;
            if (D != -1) {
              C = this.match(L.substr(A, D, null), h);
              A = L.substr(A, 0, D);
            }
            var E = null;
            if (l.match(A)) {
              D = l.matched(0);
              E = ua.OPMAP.h[D];
            }
            if (E == null) {
              if (A.length >= 3) {
                Ua.warn("warning: bad line " + Y + ": " + a[Y], {
                  fileName: "openfl/utils/AGALMiniAssembler.hx",
                  lineNumber: 262,
                  className: "openfl.utils.AGALMiniAssembler",
                  methodName: "assemble"
                });
              }
            } else {
              if (this.debugEnabled) {
                Ua.info(E, {
                  fileName: "openfl/utils/AGALMiniAssembler.hx",
                  lineNumber: 272,
                  className: "openfl.utils.AGALMiniAssembler",
                  methodName: "assemble"
                });
              }
              if (E == null) {
                if (A.length >= 3) {
                  Ua.warn("warning: bad line " + Y + ": " + a[Y], {
                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                    lineNumber: 279,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble"
                  });
                }
              } else {
                A = L.substr(A, A.indexOf(E.name) + E.name.length, null);
                if ((E.flags & 256) != 0 && c < 2) {
                  this.error = "error: opcode requires version 2.";
                  break;
                }
                if ((E.flags & 64) != 0 && f) {
                  this.error = "error: opcode is only allowed in vertex programs.";
                  break;
                }
                if ((E.flags & 32) != 0 && !f) {
                  this.error = "error: opcode is only allowed in fragment programs.";
                  break;
                }
                if (this.verbose) {
                  Ua.info("emit opcode=" + y.string(E), {
                    fileName: "openfl/utils/AGALMiniAssembler.hx",
                    lineNumber: 308,
                    className: "openfl.utils.AGALMiniAssembler",
                    methodName: "assemble"
                  });
                }
                this.agalcode.writeUnsignedInt(E.emitCode);
                ++b;
                if (b > 4096) {
                  this.error = "error: too many opcodes. maximum is 4096.";
                  break;
                }
                var La = this.match(A, p);
                if (La.length != E.numRegister) {
                  this.error = "error: wrong number of operands. found " + La.length + " but expected " + E.numRegister + ".";
                  break;
                }
                var B = false;
                var x = 160;
                A = 0;
                for (D = La.length; A < D;) {
                  var G = A++;
                  var I = false;
                  var ha = this.match(La[G], n);
                  if (ha.length > 0) {
                    La[G] = v.replace(La[G], ha[0], "0");
                    if (this.verbose) {
                      Ua.info("IS REL", {
                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                        lineNumber: 344,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                      });
                    }
                    I = true;
                  }
                  var Ea = this.match(La[G], m);
                  if (Ea.length == 0) {
                    this.error = "error: could not parse operand " + G + " (" + La[G] + ").";
                    B = true;
                    break;
                  }
                  var S = ua.REGMAP.h[Ea[0]];
                  if (this.debugEnabled) {
                    Ua.info(S, {
                      fileName: "openfl/utils/AGALMiniAssembler.hx",
                      lineNumber: 363,
                      className: "openfl.utils.AGALMiniAssembler",
                      methodName: "assemble"
                    });
                  }
                  if (S == null) {
                    this.error = "error: could not find register name for operand " + G + " (" + La[G] + ").";
                    B = true;
                    break;
                  }
                  if (f) {
                    if ((S.flags & 32) == 0) {
                      this.error = "error: register operand " + G + " (" + La[G] + ") only allowed in vertex programs.";
                      B = true;
                      break;
                    }
                    if (I) {
                      this.error = "error: register operand " + G + " (" + La[G] + ") relative adressing not allowed in fragment programs.";
                      B = true;
                      break;
                    }
                  } else if ((S.flags & 64) == 0) {
                    this.error = "error: register operand " + G + " (" + La[G] + ") only allowed in fragment programs.";
                    B = true;
                    break;
                  }
                  La[G] = L.substr(La[G], La[G].indexOf(S.name) + S.name.length, null);
                  var ma = I ? this.match(ha[0], r) : this.match(La[G], r);
                  Ea = 0;
                  if (ma.length > 0) {
                    Ea = y.parseInt(ma[0]);
                  }
                  if (mc.gt(Ea, S.range)) {
                    A = S.range + 1;
                    this.error = "error: register operand " + G + " (" + La[G] + ") index exceeds limit of " + (A == null ? "null" : y.string(mc.toFloat(A))) + ".";
                    B = true;
                    break;
                  }
                  var K = this.match(La[G], q);
                  var la = G == 0 && (E.flags & 128) == 0;
                  var ka = G == 2 && (E.flags & 8) != 0;
                  var N = 0;
                  var F = 0;
                  var H = 0;
                  if (la && I) {
                    this.error = "error: relative can not be destination";
                    B = true;
                    break;
                  }
                  if (K.length > 0) {
                    var O = ma = 0;
                    for (var Q = K[0].length, P = 1; P < Q;) {
                      O = L.cca(K[0], P) - 120;
                      if (mc.gt(O, 2)) {
                        O = 3;
                      }
                      ma = la ? ma | 1 << O : ma | O << (P - 1 << 1);
                      ++P;
                    }
                    if (!la) {
                      while (P <= 4) {
                        ma |= O << (P - 1 << 1);
                        ++P;
                      }
                    }
                  } else {
                    ma = la ? 15 : 228;
                  }
                  if (I) {
                    K = this.match(ha[0], w);
                    N = ua.REGMAP.h[K[0]];
                    if (N == null) {
                      this.error = "error: bad index register";
                      B = true;
                      break;
                    }
                    N = N.emitCode;
                    O = this.match(ha[0], u);
                    if (O.length == 0) {
                      this.error = "error: bad index register select";
                      B = true;
                      break;
                    }
                    F = L.cca(O[0], 1) - 120;
                    if (mc.gt(F, 2)) {
                      F = 3;
                    }
                    ha = this.match(ha[0], z);
                    if (ha.length > 0) {
                      H = y.parseInt(ha[0]);
                    }
                    if (H < 0 || H > 255) {
                      this.error = "error: index offset " + H + " out of bounds. [0..255]";
                      B = true;
                      break;
                    }
                    if (this.verbose) {
                      Ua.info("RELATIVE: type=" + N + "==" + K[0] + " sel=" + (F == null ? "null" : y.string(mc.toFloat(F))) + "==" + O[0] + " idx=" + (Ea == null ? "null" : y.string(mc.toFloat(Ea))) + " offset=" + H, {
                        fileName: "openfl/utils/AGALMiniAssembler.hx",
                        lineNumber: 518,
                        className: "openfl.utils.AGALMiniAssembler",
                        methodName: "assemble"
                      });
                    }
                  }
                  if (this.verbose) {
                    Ua.info("  emit argcode=" + y.string(S) + "[" + (Ea == null ? "null" : y.string(mc.toFloat(Ea))) + "][" + ma + "]", {
                      fileName: "openfl/utils/AGALMiniAssembler.hx",
                      lineNumber: 525,
                      className: "openfl.utils.AGALMiniAssembler",
                      methodName: "assemble"
                    });
                  }
                  if (la) {
                    this.agalcode.writeShort(Ea);
                    this.agalcode.writeByte(ma);
                    this.agalcode.writeByte(S.emitCode);
                    x -= 32;
                  } else {
                    if (ka) {
                      if (this.verbose) {
                        Ua.info("  emit sampler", {
                          fileName: "openfl/utils/AGALMiniAssembler.hx",
                          lineNumber: 541,
                          className: "openfl.utils.AGALMiniAssembler",
                          methodName: "assemble"
                        });
                      }
                      G = 5;
                      ha = I = 0;
                      for (S = C == null ? 0 : C.length; ha < S;) {
                        ma = ha++;
                        if (this.verbose) {
                          Ua.info("    opt: " + C[ma], {
                            fileName: "openfl/utils/AGALMiniAssembler.hx",
                            lineNumber: 552,
                            className: "openfl.utils.AGALMiniAssembler",
                            methodName: "assemble"
                          });
                        }
                        la = ua.SAMPLEMAP.h[C[ma]];
                        if (la == null) {
                          I = parseFloat(C[ma]);
                          if (this.verbose) {
                            Ua.info("    bias: " + I, {
                              fileName: "openfl/utils/AGALMiniAssembler.hx",
                              lineNumber: 565,
                              className: "openfl.utils.AGALMiniAssembler",
                              methodName: "assemble"
                            });
                          }
                        } else {
                          if (la.flag != 16) {
                            G &= ~(15 << la.flag);
                          }
                          G |= la.mask << la.flag;
                        }
                      }
                      this.agalcode.writeShort(Ea);
                      this.agalcode.writeByte(I * 8 | 0);
                      this.agalcode.writeByte(0);
                      this.agalcode.writeUnsignedInt(G);
                      if (this.verbose) {
                        Ua.info("    bits: " + (G - 5), {
                          fileName: "openfl/utils/AGALMiniAssembler.hx",
                          lineNumber: 586,
                          className: "openfl.utils.AGALMiniAssembler",
                          methodName: "assemble"
                        });
                      }
                    } else {
                      if (G == 0) {
                        this.agalcode.writeUnsignedInt(0);
                        x -= 32;
                      }
                      this.agalcode.writeShort(Ea);
                      this.agalcode.writeByte(H);
                      this.agalcode.writeByte(ma);
                      this.agalcode.writeByte(S.emitCode);
                      this.agalcode.writeByte(N);
                      this.agalcode.writeShort(I ? F | 32768 : 0);
                    }
                    x -= 64;
                  }
                }
                for (A = 0; A < x;) {
                  this.agalcode.writeByte(0);
                  A += 8;
                }
                if (B) {
                  break;
                }
              }
            }
            ++Y;
          }
          if (this.error != "") {
            this.error += "\n  at line " + Y + " " + a[Y];
            Oe.set_length(this.agalcode, 0);
            Ua.info(this.error, {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 631,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          if (this.debugEnabled) {
            c = "generated bytecode:";
            f = Oe.get_length(this.agalcode);
            A = 0;
            for (D = f; A < D;) {
              f = A++;
              if (f % 16 == 0) {
                c += "\n";
              }
              if (f % 4 == 0) {
                c += " ";
              }
              f = v.hex(this.agalcode.b[f], 2);
              if (f.length < 2) {
                f = "0" + f;
              }
              c += f;
            }
            Ua.info(c, {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 662,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          if (this.verbose) {
            Ua.info("AGALMiniAssembler.assemble time: " + (ia.getTimer() - e) / 1000 + "s", {
              fileName: "openfl/utils/AGALMiniAssembler.hx",
              lineNumber: 667,
              className: "openfl.utils.AGALMiniAssembler",
              methodName: "assemble"
            });
          }
          return this.agalcode;
        },
        initregmap: function (a, b) {
          var c = ua.REGMAP;
          var d = new He("va", "vertex attribute", 0, b ? 1024 : a == 1 || a == 2 ? 7 : 15, 66);
          c.h.va = d;
          c = ua.REGMAP;
          d = new He("vc", "vertex constant", 1, b ? 1024 : a == 1 ? 127 : 249, 66);
          c.h.vc = d;
          c = ua.REGMAP;
          d = new He("vt", "vertex temporary", 2, b ? 1024 : a == 1 ? 7 : 25, 67);
          c.h.vt = d;
          c = ua.REGMAP;
          d = new He("vo", "vertex output", 3, b ? 1024 : 0, 65);
          c.h.vo = d;
          c = ua.REGMAP;
          d = new He("vi", "varying", 4, b ? 1024 : a == 1 ? 7 : 9, 99);
          c.h.vi = d;
          c = ua.REGMAP;
          d = new He("fc", "fragment constant", 1, b ? 1024 : a == 1 ? 27 : a == 2 ? 63 : 199, 34);
          c.h.fc = d;
          c = ua.REGMAP;
          d = new He("ft", "fragment temporary", 2, b ? 1024 : a == 1 ? 7 : 25, 35);
          c.h.ft = d;
          c = ua.REGMAP;
          d = new He("fs", "texture sampler", 5, b ? 1024 : 7, 34);
          c.h.fs = d;
          c = ua.REGMAP;
          d = new He("fo", "fragment output", 3, b ? 1024 : a == 1 ? 0 : 3, 33);
          c.h.fo = d;
          c = ua.REGMAP;
          d = new He("fd", "fragment depth output", 6, b ? 1024 : a == 1 ? -1 : 0, 33);
          c.h.fd = d;
          c = ua.REGMAP;
          d = new He("iid", "instance id", 7, b ? 1024 : 0, 66);
          c.h.iid = d;
          d = ua.REGMAP.h.vo;
          ua.REGMAP.h.op = d;
          d = ua.REGMAP.h.vi;
          ua.REGMAP.h.i = d;
          d = ua.REGMAP.h.vi;
          ua.REGMAP.h.v = d;
          d = ua.REGMAP.h.fo;
          ua.REGMAP.h.oc = d;
          d = ua.REGMAP.h.fd;
          ua.REGMAP.h.od = d;
          d = ua.REGMAP.h.vi;
          ua.REGMAP.h.fi = d;
        },
        match: function (a, b) {
          var c = [];
          for (var d = 0; b.matchSub(a, d);) {
            d = b.matched(0);
            c.push(d);
            d = b.matchedPos().pos + d.length;
          }
          return c;
        },
        __class__: ua
      };
      function Ib(a, b, c, d) {
        this.name = a;
        this.numRegister = b;
        this.emitCode = c;
        this.flags = d;
      }
      h["openfl.utils._AGALMiniAssembler.OpCode"] = Ib;
      Ib.__name__ = "openfl.utils._AGALMiniAssembler.OpCode";
      Ib.prototype = {
        toString: function () {
          return "[OpCode name=\"" + this.name + "\", numRegister=" + this.numRegister + ", emitCode=" + this.emitCode + ", flags=" + this.flags + "]";
        },
        __class__: Ib
      };
      function He(a, b, c, d, e) {
        this.name = a;
        this.longName = b;
        this.emitCode = c;
        this.range = d;
        this.flags = e;
      }
      h["openfl.utils._AGALMiniAssembler.Register"] = He;
      He.__name__ = "openfl.utils._AGALMiniAssembler.Register";
      He.prototype = {
        toString: function () {
          return "[Register name=\"" + this.name + "\", longName=\"" + this.longName + "\", emitCode=" + (this.emitCode == null ? "null" : y.string(mc.toFloat(this.emitCode))) + ", range=" + (this.range == null ? "null" : y.string(mc.toFloat(this.range))) + ", flags=" + (this.flags == null ? "null" : y.string(mc.toFloat(this.flags))) + "]";
        },
        __class__: He
      };
      function xc(a, b, c) {
        this.name = a;
        this.flag = b;
        this.mask = c;
      }
      h["openfl.utils._AGALMiniAssembler.Sampler"] = xc;
      xc.__name__ = "openfl.utils._AGALMiniAssembler.Sampler";
      xc.prototype = {
        __class__: xc
      };
      function Um() {}
      h["openfl.utils.IAssetCache"] = Um;
      Um.__name__ = "openfl.utils.IAssetCache";
      Um.__isInterface__ = true;
      Um.prototype = {
        __class__: Um,
        __properties__: {
          get_enabled: "get_enabled"
        }
      };
      function Vm() {
        this.__enabled = true;
        this.bitmapData = new xa();
        this.font = new xa();
        this.sound = new xa();
      }
      h["openfl.utils.AssetCache"] = Vm;
      Vm.__name__ = "openfl.utils.AssetCache";
      Vm.__interfaces__ = [Um];
      Vm.prototype = {
        getBitmapData: function (a) {
          return this.bitmapData.h[a];
        },
        getFont: function (a) {
          return this.font.h[a];
        },
        getSound: function (a) {
          return this.sound.h[a];
        },
        hasBitmapData: function (a) {
          return Object.prototype.hasOwnProperty.call(this.bitmapData.h, a);
        },
        hasFont: function (a) {
          return Object.prototype.hasOwnProperty.call(this.font.h, a);
        },
        hasSound: function (a) {
          return Object.prototype.hasOwnProperty.call(this.sound.h, a);
        },
        removeBitmapData: function (a) {
          var b = oa.cache.image;
          if (Object.prototype.hasOwnProperty.call(b.h, a)) {
            delete b.h[a];
          }
          b = this.bitmapData;
          if (Object.prototype.hasOwnProperty.call(b.h, a)) {
            delete b.h[a];
            return true;
          } else {
            return false;
          }
        },
        setBitmapData: function (a, b) {
          this.bitmapData.h[a] = b;
        },
        setFont: function (a, b) {
          this.font.h[a] = b;
        },
        setSound: function (a, b) {
          this.sound.h[a] = b;
        },
        get_enabled: function () {
          return this.__enabled;
        },
        __class__: Vm,
        __properties__: {
          get_enabled: "get_enabled"
        }
      };
      function Of() {
        lc.call(this);
      }
      h["openfl.utils.AssetLibrary"] = Of;
      Of.__name__ = "openfl.utils.AssetLibrary";
      Of.fromBundle = function (a) {
        a = lc.fromBundle(a);
        if (a != null) {
          if (a instanceof Of) {
            return a;
          }
          var b = new Of();
          b.__proxy = a;
          return b;
        }
        return null;
      };
      Of.fromManifest = function (a) {
        a = lc.fromManifest(a);
        if (a != null) {
          if (a instanceof Of) {
            return a;
          }
          var b = new Of();
          b.__proxy = a;
          return b;
        }
        return null;
      };
      Of.__super__ = lc;
      Of.prototype = q(lc.prototype, {
        bind: function (a, b) {
          return false;
        },
        exists: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.exists(a, b);
          } else {
            return lc.prototype.exists.call(this, a, b);
          }
        },
        getAsset: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.getAsset(a, b);
          } else {
            return lc.prototype.getAsset.call(this, a, b);
          }
        },
        getAudioBuffer: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getAudioBuffer(a);
          } else {
            return lc.prototype.getAudioBuffer.call(this, a);
          }
        },
        getBytes: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getBytes(a);
          } else {
            return lc.prototype.getBytes.call(this, a);
          }
        },
        getFont: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getFont(a);
          } else {
            return lc.prototype.getFont.call(this, a);
          }
        },
        getImage: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getImage(a);
          } else {
            return lc.prototype.getImage.call(this, a);
          }
        },
        getPath: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getPath(a);
          } else {
            return lc.prototype.getPath.call(this, a);
          }
        },
        getText: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.getText(a);
          } else {
            return lc.prototype.getText.call(this, a);
          }
        },
        isLocal: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.isLocal(a, b);
          } else {
            return lc.prototype.isLocal.call(this, a, b);
          }
        },
        list: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.list(a);
          } else {
            return lc.prototype.list.call(this, a);
          }
        },
        loadAsset: function (a, b) {
          if (this.__proxy != null) {
            return this.__proxy.loadAsset(a, b);
          } else {
            return lc.prototype.loadAsset.call(this, a, b);
          }
        },
        load: function () {
          if (this.__proxy != null) {
            return this.__proxy.load();
          } else {
            return lc.prototype.load.call(this);
          }
        },
        loadAudioBuffer: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadAudioBuffer(a);
          } else {
            return lc.prototype.loadAudioBuffer.call(this, a);
          }
        },
        loadBytes: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadBytes(a);
          } else {
            return lc.prototype.loadBytes.call(this, a);
          }
        },
        loadFont: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadFont(a);
          } else {
            return lc.prototype.loadFont.call(this, a);
          }
        },
        loadImage: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadImage(a);
          } else {
            return lc.prototype.loadImage.call(this, a);
          }
        },
        loadText: function (a) {
          if (this.__proxy != null) {
            return this.__proxy.loadText(a);
          } else {
            return lc.prototype.loadText.call(this, a);
          }
        },
        unload: function () {
          if (this.__proxy != null) {
            this.__proxy.unload();
          } else {
            lc.prototype.unload.call(this);
          }
        },
        __class__: Of
      });
      function U() {}
      h["openfl.utils.Assets"] = U;
      U.__name__ = "openfl.utils.Assets";
      U.addEventListener = function (a, b, c, d, e) {
        if (e == null) {
          e = false;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = false;
        }
        if (!oa.onChange.has(U.LimeAssets_onChange)) {
          oa.onChange.add(U.LimeAssets_onChange);
        }
        U.dispatcher.addEventListener(a, b, c, d, e);
      };
      U.dispatchEvent = function (a) {
        return U.dispatcher.dispatchEvent(a);
      };
      U.exists = function (a, b) {
        return oa.exists(a, b);
      };
      U.getBitmapData = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && U.cache.get_enabled() && U.cache.hasBitmapData(a)) {
          var c = U.cache.getBitmapData(a);
          if (U.isValidBitmapData(c)) {
            return c;
          }
        }
        c = oa.getImage(a, false);
        if (c != null) {
          c = N.fromImage(c);
          if (b && U.cache.get_enabled()) {
            U.cache.setBitmapData(a, c);
          }
          return c;
        } else {
          return null;
        }
      };
      U.getBytes = function (a) {
        return Oe.fromLimeBytes(oa.getBytes(a));
      };
      U.getFont = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && U.cache.get_enabled() && U.cache.hasFont(a)) {
          return U.cache.getFont(a);
        }
        var c = oa.getFont(a, false);
        if (c != null) {
          var d = new fb();
          d.__fromLimeFont(c);
          if (b && U.cache.get_enabled()) {
            U.cache.setFont(a, d);
          }
          return d;
        }
        return new fb();
      };
      U.getLibrary = function (a) {
        return oa.getLibrary(a);
      };
      U.getSound = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b && U.cache.get_enabled() && U.cache.hasSound(a)) {
          var c = U.cache.getSound(a);
          if (U.isValidSound(c)) {
            return c;
          }
        }
        c = oa.getAudioBuffer(a, false);
        if (c != null) {
          c = qg.fromAudioBuffer(c);
          if (b && U.cache.get_enabled()) {
            U.cache.setSound(a, c);
          }
          return c;
        } else {
          return null;
        }
      };
      U.getText = function (a) {
        return oa.getText(a);
      };
      U.hasLibrary = function (a) {
        return oa.hasLibrary(a);
      };
      U.isValidBitmapData = function (a) {
        return a != null && a.image != null;
      };
      U.isValidSound = function (a) {
        return true;
      };
      U.list = function (a) {
        return oa.list(a);
      };
      U.loadLibrary = function (a) {
        return oa.loadLibrary(a).then(function (b) {
          var c = null;
          if (b != null) {
            if (b instanceof Of) {
              c = b;
            } else {
              c = oa.libraries;
              if (Object.prototype.hasOwnProperty.call(c.h, a)) {
                delete c.h[a];
              }
              c = new Of();
              c.__proxy = b;
              oa.registerLibrary(a, c);
            }
          }
          return Eb.withValue(c);
        });
      };
      U.loadSound = function (a, b) {
        if (b == null) {
          b = true;
        }
        if (b == null) {
          b = true;
        }
        var c = new Id();
        oa.loadAudioBuffer(a, b).onComplete(function (d) {
          if (d != null) {
            d = qg.fromAudioBuffer(d);
            if (b && U.cache.get_enabled()) {
              U.cache.setSound(a, d);
            }
            c.complete(d);
          } else {
            c.error("[Assets] Could not load Sound \"" + a + "\"");
          }
        }).onError(n(c, c.error)).onProgress(n(c, c.progress));
        return c.future;
      };
      U.LimeAssets_onChange = function () {
        U.dispatchEvent(new za("change"));
      };
      var Oe = {
        __properties__: {
          set_length: "set_length",
          get_length: "get_length"
        },
        fromBytes: function (a) {
          if (a == null) {
            return null;
          } else if (a instanceof sd) {
            return a;
          } else {
            return sd.fromBytes(a);
          }
        },
        fromLimeBytes: function (a) {
          return Oe.fromBytes(a);
        },
        toBytes: function (a) {
          return a;
        },
        get_length: function (a) {
          if (a == null) {
            return 0;
          } else {
            return a.length;
          }
        },
        set_length: function (a, b) {
          if (b >= 0) {
            a.__resize(b);
            if (b < a.position) {
              a.position = b;
            }
          }
          return a.length = b;
        }
      };
      var mf = {
        __get: function (a, b) {
          if (a == null || b == null) {
            return null;
          }
          if (Object.prototype.hasOwnProperty.call(a, b)) {
            return ha.field(a, b);
          }
          if (a instanceof gb) {
            var c = a.getChildByName(b);
            if (c != null) {
              return c;
            }
          }
          return ha.getProperty(a, b);
        },
        __eq: function (a, b) {
          return a == b;
        }
      };
      function Wm() {}
      h["haxe.lang.Iterator"] = Wm;
      Wm.__name__ = "haxe.lang.Iterator";
      Wm.__isInterface__ = true;
      Wm.prototype = {
        __class__: Wm
      };
      function Xm() {}
      h["haxe.lang.Iterable"] = Xm;
      Xm.__name__ = "haxe.lang.Iterable";
      Xm.__isInterface__ = true;
      Xm.prototype = {
        __class__: Xm
      };
      function xd() {}
      h["openfl.utils._internal.Lib"] = xd;
      xd.__name__ = "openfl.utils._internal.Lib";
      function Mh() {
        this.rollOutStack = [];
      }
      h["openfl.utils._internal.TouchData"] = Mh;
      Mh.__name__ = "openfl.utils._internal.TouchData";
      Mh.prototype = {
        reset: function () {
          this.touchOverTarget = this.touchDownTarget = this.touch = null;
          this.rollOutStack.splice(0, this.rollOutStack.length);
        },
        __class__: Mh
      };
      function se() {
        this.MAX_KEYBIND_WIDTH = 320;
        this.holdingEsc = 0;
        this.bindingKey = false;
        this.holdTime = this.holdValue = 0;
        this.nextAccept = 5;
        this.curSelected = 0;
        this.curOption = null;
        rb.call(this);
        if (this.title == null) {
          this.title = "Options";
        }
        if (this.rpcTitle == null) {
          this.rpcTitle = "Options Menu";
        }
        this.bg = new G().loadGraphic(E.image("menuDesat"));
        this.bg.set_color(-1412611);
        var a = this.bg;
        a.set_x((g.width - a.get_width()) / 2);
        a.set_y((g.height - a.get_height()) / 2);
        this.bg.set_antialiasing(C.data.antialiasing);
        this.add(this.bg);
        this.grpOptions = new ab();
        this.add(this.grpOptions);
        this.grpTexts = new ab();
        this.add(this.grpTexts);
        this.checkboxGroup = new ab();
        this.add(this.checkboxGroup);
        this.descBox = new G().makeGraphic(1, 1, -16777216);
        this.descBox.set_alpha(0.6);
        this.add(this.descBox);
        a = new bc(75, 45, this.title, true);
        a.setScale(0.6);
        a.set_alpha(0.4);
        this.add(a);
        this.descText = new R(50, 600, 1180, "", 32);
        this.descText.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", cb.OUTLINE, -16777216);
        a = this.descText.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.descText.set_borderSize(2.4);
        this.add(this.descText);
        a = 0;
        for (var b = this.optionsArray.length; a < b;) {
          var c = a++;
          var d = new bc(290, 260, this.optionsArray[c].name, false);
          d.isMenuItem = true;
          d.targetY = c;
          this.grpOptions.add(d);
          if (this.optionsArray[c].get_type() == "bool") {
            var e = new Mj(d.x - 105, d.y, y.string(this.optionsArray[c].getValue()) == "true");
            e.sprTracker = d;
            e.ID = c;
            this.checkboxGroup.add(e);
          } else {
            d.set_x(d.x - 80);
            d.startPosition.set_x(d.startPosition.x - 80);
            e = new Ci("" + y.string(this.optionsArray[c].getValue()), d.get_width() + 60);
            e.sprTracker = d;
            e.copyAlpha = true;
            e.ID = c;
            this.grpTexts.add(e);
            this.optionsArray[c].child = e;
          }
          this.updateTextFrom(this.optionsArray[c]);
        }
        this.changeSelection();
        this.reloadCheckboxes();
      }
      h["options.BaseOptionsMenu"] = se;
      se.__name__ = "options.BaseOptionsMenu";
      se.__super__ = rb;
      se.prototype = q(rb.prototype, {
        addOption: function (a) {
          if (this.optionsArray == null || this.optionsArray.length < 1) {
            this.optionsArray = [];
          }
          this.optionsArray.push(a);
          return a;
        },
        update: function (a) {
          rb.prototype.update.call(this, a);
          if (this.bindingKey) {
            this.bindingKeyUpdate(a);
          } else {
            if ($a.instance.get_UI_UP_P()) {
              this.changeSelection(-1);
            }
            if ($a.instance.get_UI_DOWN_P()) {
              this.changeSelection(1);
            }
            if ($a.instance.get_BACK()) {
              this.close();
              g.sound.play(E.sound("cancelMenu"));
            }
            if (this.nextAccept <= 0) {
              if (this.curOption.get_type() == "bool") {
                if ($a.instance.get_ACCEPT()) {
                  g.sound.play(E.sound("scrollMenu"));
                  this.curOption.setValue(this.curOption.getValue() == 1 ? false : true);
                  this.curOption.change();
                  this.reloadCheckboxes();
                }
              } else if (this.curOption.get_type() == "keybind") {
                if ($a.instance.get_ACCEPT()) {
                  this.bindingBlack = new G().makeGraphic(1, 1, -1);
                  a = this.bindingBlack.scale;
                  var b = g.width;
                  var c = g.height;
                  if (c == null) {
                    c = 0;
                  }
                  if (b == null) {
                    b = 0;
                  }
                  a.set_x(b);
                  a.set_y(c);
                  this.bindingBlack.updateHitbox();
                  this.bindingBlack.set_alpha(0);
                  Ha.tween(this.bindingBlack, {
                    alpha: 0.6
                  }, 0.35, {
                    ease: X.linear
                  });
                  this.add(this.bindingBlack);
                  this.bindingText = new bc(g.width / 2, 160, "Rebinding " + this.curOption.name, false);
                  this.bindingText.set_alignment($g.CENTERED);
                  this.add(this.bindingText);
                  this.bindingText2 = new bc(g.width / 2, 340, "Hold ESC to Cancel\nHold Backspace to Delete", true);
                  this.bindingText2.set_alignment($g.CENTERED);
                  this.add(this.bindingText2);
                  this.bindingKey = true;
                  this.holdingEsc = 0;
                  C.toggleVolumeKeys(false);
                  g.sound.play(E.sound("scrollMenu"));
                }
              } else if ($a.instance.get_UI_LEFT() || $a.instance.get_UI_RIGHT()) {
                b = $a.instance.get_UI_LEFT_P() || $a.instance.get_UI_RIGHT_P();
                if (this.holdTime > 0.5 || b) {
                  if (b) {
                    b = null;
                    if (this.curOption.get_type() != "string") {
                      b = $a.instance.get_UI_LEFT() ? -this.curOption.changeValue : this.curOption.changeValue;
                    }
                    switch (this.curOption.get_type()) {
                      case "float":
                      case "int":
                      case "percent":
                        this.holdValue = this.curOption.getValue() + b;
                        if (this.holdValue < this.curOption.minValue) {
                          this.holdValue = this.curOption.minValue;
                        } else if (this.holdValue > this.curOption.maxValue) {
                          this.holdValue = this.curOption.maxValue;
                        }
                        switch (this.curOption.get_type()) {
                          case "int":
                            this.holdValue = Math.round(this.holdValue);
                            this.curOption.setValue(this.holdValue);
                            break;
                          case "float":
                          case "percent":
                            this.holdValue = jc.roundDecimal(this.holdValue, this.curOption.decimals);
                            this.curOption.setValue(this.holdValue);
                        }
                        break;
                      case "string":
                        b = this.curOption.curOption;
                        if ($a.instance.get_UI_LEFT_P()) {
                          --b;
                        } else {
                          ++b;
                        }
                        if (b < 0) {
                          b = this.curOption.options.length - 1;
                        } else if (b >= this.curOption.options.length) {
                          b = 0;
                        }
                        this.curOption.curOption = b;
                        this.curOption.setValue(this.curOption.options[b]);
                    }
                    this.updateTextFrom(this.curOption);
                    this.curOption.change();
                    g.sound.play(E.sound("scrollMenu"));
                  } else if (this.curOption.get_type() != "string") {
                    this.holdValue += this.curOption.scrollSpeed * a * ($a.instance.get_UI_LEFT() ? -1 : 1);
                    if (this.holdValue < this.curOption.minValue) {
                      this.holdValue = this.curOption.minValue;
                    } else if (this.holdValue > this.curOption.maxValue) {
                      this.holdValue = this.curOption.maxValue;
                    }
                    switch (this.curOption.get_type()) {
                      case "int":
                        this.curOption.setValue(Math.round(this.holdValue));
                        break;
                      case "float":
                      case "percent":
                        this.curOption.setValue(jc.roundDecimal(this.holdValue, this.curOption.decimals));
                    }
                    this.updateTextFrom(this.curOption);
                    this.curOption.change();
                  }
                }
                if (this.curOption.get_type() != "string") {
                  this.holdTime += a;
                }
              } else if ($a.instance.get_UI_LEFT_R() || $a.instance.get_UI_RIGHT_R()) {
                if (this.holdTime > 0.5) {
                  g.sound.play(E.sound("scrollMenu"));
                }
                this.holdTime = 0;
              }
              if ($a.instance.get_RESET()) {
                a = this.optionsArray[this.curSelected];
                if (a.get_type() != "keybind") {
                  a.setValue(a.defaultValue);
                  if (a.get_type() != "bool") {
                    if (a.get_type() == "string") {
                      a.curOption = a.options.indexOf(a.getValue());
                    }
                    this.updateTextFrom(a);
                  }
                } else {
                  a.setValue($a.instance.controllerMode ? a.defaultKeys.gamepad : a.defaultKeys.keyboard);
                  this.updateBind(null, a);
                }
                a.change();
                g.sound.play(E.sound("cancelMenu"));
                this.reloadCheckboxes();
              }
            }
            if (this.nextAccept > 0) {
              --this.nextAccept;
            }
          }
        },
        bindingKeyUpdate: function (a) {
          var b = g.keys.pressed;
          if (b.keyManager.checkStatusUnsafe(27, b.status) || g.gamepads.anyHasState(1, 1)) {
            this.holdingEsc += a;
            if (this.holdingEsc > 0.5) {
              g.sound.play(E.sound("cancelMenu"));
              this.closeBinding();
            }
          } else {
            b = g.keys.pressed;
            if (b.keyManager.checkStatusUnsafe(8, b.status) || g.gamepads.anyHasState(6, 1)) {
              this.holdingEsc += a;
              if (this.holdingEsc > 0.5) {
                if ($a.instance.controllerMode) {
                  this.curOption.keys.gamepad = hg.toStringMap.h[-1];
                } else {
                  this.curOption.keys.keyboard = hg.toStringMap.h[-1];
                }
                this.updateBind($a.instance.controllerMode ? Rd.getGamepadName(-1) : Rd.getKeyName(-1));
                g.sound.play(E.sound("cancelMenu"));
                this.closeBinding();
              }
            } else {
              this.holdingEsc = 0;
              a = false;
              if (!$a.instance.controllerMode) {
                if (g.keys.justPressed.get_ANY() || g.keys.justReleased.get_ANY()) {
                  var c = wa.__cast(g.keys.firstJustPressed(), Ck);
                  var d = wa.__cast(g.keys.firstJustReleased(), Ck);
                  if (c != -1 && c != 27 && c != 8) {
                    a = true;
                    this.curOption.keys.keyboard = Fg.toStringMap.h[c];
                  } else if (d != -1 && (d == 27 || d == 8)) {
                    a = true;
                    this.curOption.keys.keyboard = Fg.toStringMap.h[d];
                  }
                }
              } else if (g.gamepads.anyHasState(-2, 2) || g.gamepads.anyHasState(17, 2) || g.gamepads.anyHasState(18, 2) || g.gamepads.anyHasState(-2, -1)) {
                d = c = -1;
                if (g.gamepads.anyHasState(17, 2)) {
                  c = 17;
                } else if (g.gamepads.anyHasState(18, 2)) {
                  c = 18;
                } else {
                  b = 0;
                  for (var e = g.gamepads.get_numActiveGamepads(); b < e;) {
                    var f = b++;
                    f = g.gamepads._activeGamepads[f];
                    if (f != null && (c = f.firstJustPressedRawID(), c = c < 0 ? c : f.mapping.getID(c), d = f.firstJustReleasedRawID(), d = d < 0 ? d : f.mapping.getID(d), c != -1 || d != -1)) {
                      break;
                    }
                  }
                }
                if (c != -1 && c != 6 && c != 1) {
                  a = true;
                  this.curOption.keys.gamepad = hg.toStringMap.h[c];
                } else if (d != -1 && (d == 6 || d == 1)) {
                  a = true;
                  this.curOption.keys.gamepad = hg.toStringMap.h[d];
                }
              }
              if (a) {
                if ($a.instance.controllerMode) {
                  if (this.curOption.keys.gamepad == null) {
                    this.curOption.keys.gamepad = "NONE";
                  }
                  this.curOption.setValue(this.curOption.keys.gamepad);
                  a = this.curOption.keys.gamepad;
                  a = a.toUpperCase();
                  a = Rd.getGamepadName(Object.prototype.hasOwnProperty.call(hg.fromStringMap.h, a) ? hg.fromStringMap.h[a] : -1);
                } else {
                  if (this.curOption.keys.keyboard == null) {
                    this.curOption.keys.keyboard = "NONE";
                  }
                  this.curOption.setValue(this.curOption.keys.keyboard);
                  a = this.curOption.keys.keyboard;
                  a = a.toUpperCase();
                  a = Rd.getKeyName(Object.prototype.hasOwnProperty.call(Fg.fromStringMap.h, a) ? Fg.fromStringMap.h[a] : -1);
                }
                this.updateBind(a);
                g.sound.play(E.sound("confirmMenu"));
                this.closeBinding();
              }
            }
          }
        },
        updateBind: function (a, b) {
          if (b == null) {
            b = this.curOption;
          }
          if (a == null) {
            a = b.getValue();
            if (a == null) {
              a = "NONE";
            }
            if ($a.instance.controllerMode) {
              var c = a.toUpperCase();
              a = Rd.getGamepadName(Object.prototype.hasOwnProperty.call(hg.fromStringMap.h, c) ? hg.fromStringMap.h[c] : -1);
            } else {
              c = a.toUpperCase();
              a = Rd.getKeyName(Object.prototype.hasOwnProperty.call(Fg.fromStringMap.h, c) ? Fg.fromStringMap.h[c] : -1);
            }
          }
          c = b.child;
          a = new Ci(a, c.offsetX);
          a.sprTracker = c.sprTracker;
          a.copyAlpha = true;
          a.ID = c.ID;
          this.playstationCheck(a);
          a.set_scaleX(Math.min(1, this.MAX_KEYBIND_WIDTH / a.get_width()));
          a.set_x(c.x);
          a.set_y(c.y);
          b.child = a;
          this.grpTexts.insert(this.grpTexts.members.indexOf(c), a);
          this.grpTexts.remove(c);
          c.destroy();
        },
        playstationCheck: function (a) {
          if ($a.instance.controllerMode) {
            var b = g.gamepads.firstActive;
            var c = a.letters[0];
            if ((b != null ? b.detectedModel : uc.UNKNOWN) == uc.PS4) {
              switch (a.text) {
                case "[":
                case "]":
                  c.set_image("alphabet_playstation");
                  c.updateHitbox();
                  c.offset.set_x(c.offset.x + 4);
                  c.offset.set_y(c.offset.y - 5);
              }
            }
          }
        },
        closeBinding: function () {
          this.bindingKey = false;
          this.bindingBlack.destroy();
          this.remove(this.bindingBlack);
          this.bindingText.destroy();
          this.remove(this.bindingText);
          this.bindingText2.destroy();
          this.remove(this.bindingText2);
          C.toggleVolumeKeys(true);
        },
        updateTextFrom: function (a) {
          if (a.get_type() == "keybind") {
            this.updateBind(null, a);
          } else {
            var b = a.displayFormat;
            var c = a.getValue();
            if (a.get_type() == "percent") {
              c *= 100;
            }
            var d = a.defaultValue;
            a.set_text(v.replace(v.replace(b, "%v", c), "%d", d));
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.optionsArray.length - 1;
          } else if (this.curSelected >= this.optionsArray.length) {
            this.curSelected = 0;
          }
          this.descText.set_text(this.optionsArray[this.curSelected].description);
          a = this.descText;
          var b = 16;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          a = this.descText;
          a.set_y(a.y + 270);
          b = a = 0;
          for (var c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          for (a = new Cc(this.grpTexts.members, null); a.hasNext();) {
            b = a.next();
            b.set_alpha(0.6);
            if (b.ID == this.curSelected) {
              b.set_alpha(1);
            }
          }
          this.descBox.setPosition(this.descText.x - 10, this.descText.y - 10);
          this.descBox.setGraphicSize(this.descText.get_width() + 20 | 0, this.descText.get_height() + 25 | 0);
          this.descBox.updateHitbox();
          this.curOption = this.optionsArray[this.curSelected];
          g.sound.play(E.sound("scrollMenu"));
        },
        reloadCheckboxes: function () {
          for (var a = new Cc(this.checkboxGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.set_daValue(y.string(this.optionsArray[b.ID].getValue()) == "true");
          }
        },
        __class__: se
      });
      function fh() {
        this.timeForMoving = 0.1;
        this.holdingEsc = 0;
        this.binding = false;
        this.lastID = 0;
        this.onKeyboardMode = true;
        this.keyboardColor = -9334019;
        this.gamepadColor = -167532;
        this.options = [[true, "NOTES"], [true, "Left", "note_left", "Note Left"], [true, "Down", "note_down", "Note Down"], [true, "Up", "note_up", "Note Up"], [true, "Right", "note_right", "Note Right"], [true], [true, "UI"], [true, "Left", "ui_left", "UI Left"], [true, "Down", "ui_down", "UI Down"], [true, "Up", "ui_up", "UI Up"], [true, "Right", "ui_right", "UI Right"], [true], [true, "Reset", "reset", "Reset"], [true, "Accept", "accept", "Accept"], [true, "Back", "back", "Back"], [true, "Pause", "pause", "Pause"], [false], [false, "VOLUME"], [false, "Mute", "volume_mute", "Volume Mute"], [false, "Up", "volume_up", "Volume Up"], [false, "Down", "volume_down", "Volume Down"], [false], [false, "DEBUG"], [false, "Key 1", "debug_1", "Debug Key #1"], [false, "Key 2", "debug_2", "Debug Key #2"]];
        this.curAlt = false;
        this.curSelected = 0;
        rb.call(this);
        this.options.push([true]);
        this.options.push([true]);
        this.options.push([true, fh.defaultKey]);
        this.bg = new G().loadGraphic(E.image("menuDesat"));
        this.bg.set_color(this.keyboardColor);
        this.bg.set_antialiasing(C.data.antialiasing);
        var a = this.bg;
        a.set_x((g.width - a.get_width()) / 2);
        a.set_y((g.height - a.get_height()) / 2);
        this.add(this.bg);
        a = new Zh($h.createGrid(80, 80, 160, 160, true, 872415231, 0));
        var b = a.velocity;
        var c = 40;
        var d = 40;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        b.set_x(c);
        b.set_y(d);
        a.set_alpha(0);
        Ha.tween(a, {
          alpha: 1
        }, 0.5, {
          ease: X.quadOut
        });
        this.add(a);
        this.grpDisplay = new ab();
        this.add(this.grpDisplay);
        this.grpOptions = new ab();
        this.add(this.grpOptions);
        this.grpBlacks = new ab();
        this.add(this.grpBlacks);
        this.selectSpr = new Bi();
        this.selectSpr.makeGraphic(250, 78, -1);
        this.selectSpr.copyAlpha = false;
        this.selectSpr.set_alpha(0.75);
        this.add(this.selectSpr);
        this.grpBinds = new ab();
        this.add(this.grpBinds);
        this.controllerSpr = new G(50, 40).loadGraphic(E.image("controllertype"), true, 82, 60);
        this.controllerSpr.set_antialiasing(C.data.antialiasing);
        this.controllerSpr.animation.add("keyboard", [0], 1, false);
        this.controllerSpr.animation.add("gamepad", [1], 1, false);
        this.add(this.controllerSpr);
        a = new bc(60, 90, "CTRL", false);
        a.set_alignment($g.CENTERED);
        a.setScale(0.4);
        this.add(a);
        this.createTexts();
      }
      h["options.ControlsSubState"] = fh;
      fh.__name__ = "options.ControlsSubState";
      fh.__super__ = rb;
      fh.prototype = q(rb.prototype, {
        createTexts: function () {
          this.curOptions = [];
          this.curOptionsValid = [];
          this.grpDisplay.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpBlacks.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpOptions.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpBinds.forEachAlive(function (a) {
            a.destroy();
          });
          this.grpDisplay.clear();
          this.grpBlacks.clear();
          this.grpOptions.clear();
          this.grpBinds.clear();
          var a = 0;
          for (var b = 0, c = this.options.length; b < c;) {
            var d = b++;
            var e = this.options[d];
            if (e[0] || this.onKeyboardMode) {
              if (e.length > 1) {
                var f = e.length < 3;
                var k = e[1] == fh.defaultKey;
                k = f && !k;
                var h = new bc(200, 300, e[1], !k);
                h.isMenuItem = true;
                h.changeX = false;
                h.distancePerItem.set_y(60);
                h.targetY = a;
                if (k) {
                  this.grpDisplay.add(h);
                } else {
                  this.grpOptions.add(h);
                  this.curOptions.push(d);
                  this.curOptionsValid.push(a);
                }
                this.lastID = h.ID = a;
                if (f) {
                  this.addCenteredText(h, e, a);
                } else {
                  this.addKeyText(h, e, a);
                }
                h.snapToPosition();
                h.set_y(h.y + g.height * 2);
              }
              ++a;
            }
          }
          this.updateText();
        },
        addCenteredText: function (a, b, c) {
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          a.set_y(a.y - 55);
          a.startPosition.set_y(a.startPosition.y - 55);
        },
        addKeyText: function (a, b, c) {
          for (c = 0; c < 2;) {
            var d = c++;
            var e = 350 + d * 300;
            if (this.onKeyboardMode) {
              var f = C.keyBinds.h[b[2]];
              d = Rd.getKeyName(f[d] ?? -1);
            } else {
              f = C.gamepadBinds.h[b[2]];
              d = Rd.getGamepadName(f[d] ?? -1);
            }
            d = new bc(e + 210, 248, d, false);
            d.isMenuItem = true;
            d.changeX = false;
            d.distancePerItem.set_y(60);
            d.targetY = a.targetY;
            d.ID = Math.floor(this.grpBinds.length / 2);
            d.snapToPosition();
            d.set_y(d.y + g.height * 2);
            this.grpBinds.add(d);
            this.playstationCheck(d);
            d.set_scaleX(Math.min(1, 230 / d.get_width()));
            d = new Bi();
            d.makeGraphic(250, 78, -16777216);
            d.alphaMult = 0.4;
            d.sprTracker = a;
            d.yAdd = -6;
            d.xAdd = e;
            this.grpBlacks.add(d);
          }
        },
        playstationCheck: function (a) {
          if (!this.onKeyboardMode) {
            var b = g.gamepads.firstActive;
            var c = a.letters[0];
            if ((b != null ? b.detectedModel : uc.UNKNOWN) == uc.PS4) {
              switch (a.text) {
                case "[":
                case "]":
                  c.set_image("alphabet_playstation");
                  c.updateHitbox();
                  c.offset.set_x(c.offset.x + 4);
                  c.offset.set_y(c.offset.y - 5);
              }
            }
          }
        },
        updateBind: function (a, b) {
          var c = this.grpBinds.members[a];
          b = new bc(350 + a % 2 * 300, 248, b, false);
          b.isMenuItem = true;
          b.changeX = false;
          b.distancePerItem.set_y(60);
          b.targetY = c.targetY;
          b.ID = c.ID;
          b.set_x(c.x);
          b.set_y(c.y);
          this.playstationCheck(b);
          b.set_scaleX(Math.min(1, 230 / b.get_width()));
          c.kill();
          this.grpBinds.remove(c);
          this.grpBinds.insert(a, b);
          c.destroy();
        },
        update: function (a) {
          if (this.timeForMoving > 0) {
            this.timeForMoving = Math.max(0, this.timeForMoving - a);
          } else if (this.binding) {
            var b = this.curAlt ? 1 : 0;
            var c = this.options[this.curOptions[this.curSelected]];
            p = g.keys.pressed;
            if (p.keyManager.checkStatusUnsafe(27, p.status) || g.gamepads.anyHasState(1, 1)) {
              this.holdingEsc += a;
              if (this.holdingEsc > 0.5) {
                g.sound.play(E.sound("cancelMenu"));
                this.closeBinding();
              }
            } else {
              p = g.keys.pressed;
              if (p.keyManager.checkStatusUnsafe(8, p.status) || g.gamepads.anyHasState(6, 1)) {
                this.holdingEsc += a;
                if (this.holdingEsc > 0.5) {
                  C.keyBinds.h[c[2]][b] = -1;
                  C.clearInvalidKeys(c[2]);
                  this.updateBind(Math.floor(this.curSelected * 2) + b, this.onKeyboardMode ? Rd.getKeyName(-1) : Rd.getGamepadName(-1));
                  g.sound.play(E.sound("cancelMenu"));
                  this.closeBinding();
                }
              } else {
                this.holdingEsc = 0;
                p = false;
                var d = C.keyBinds.h[c[2]];
                c = C.gamepadBinds.h[c[2]];
                if (this.onKeyboardMode) {
                  if (g.keys.justPressed.get_ANY() || g.keys.justReleased.get_ANY()) {
                    var e = g.keys.firstJustPressed();
                    var f = g.keys.firstJustReleased();
                    if (e > -1 && e != 27 && e != 8) {
                      d[b] = e;
                      p = true;
                    } else if (f > -1 && (f == 27 || f == 8)) {
                      d[b] = f;
                      p = true;
                    }
                  }
                } else if (g.gamepads.anyHasState(-2, 2) || g.gamepads.anyHasState(17, 2) || g.gamepads.anyHasState(18, 2) || g.gamepads.anyHasState(-2, -1)) {
                  f = e = -1;
                  if (g.gamepads.anyHasState(17, 2)) {
                    e = 17;
                  } else if (g.gamepads.anyHasState(18, 2)) {
                    e = 18;
                  } else {
                    for (var k = 0, h = g.gamepads.get_numActiveGamepads(); k < h;) {
                      var l = k++;
                      l = g.gamepads._activeGamepads[l];
                      if (l != null && (e = l.firstJustPressedRawID(), e = e < 0 ? e : l.mapping.getID(e), f = l.firstJustReleasedRawID(), f = f < 0 ? f : l.mapping.getID(f), e == null && (e = -1), f == null && (f = -1), e != -1 || f != -1)) {
                        break;
                      }
                    }
                  }
                  if (e != -1 && e != 6 && e != 1) {
                    c[b] = e;
                    p = true;
                  } else if (f != -1 && (f == 6 || f == 1)) {
                    c[b] = f;
                    p = true;
                  }
                }
                if (p) {
                  if (this.onKeyboardMode) {
                    if (d[b] == d[1 - b]) {
                      d[1 - b] = -1;
                    }
                  } else if (c[b] == c[1 - b]) {
                    c[1 - b] = -1;
                  }
                  b = this.options[this.curOptions[this.curSelected]][2];
                  C.clearInvalidKeys(b);
                  if (this.onKeyboardMode) {
                    p = C.keyBinds.h[b];
                    p = Rd.getKeyName(p[0] ?? -1);
                  } else {
                    p = C.gamepadBinds.h[b];
                    p = Rd.getGamepadName(p[0] ?? -1);
                  }
                  this.updateBind(Math.floor(this.curSelected * 2), p);
                  if (this.onKeyboardMode) {
                    p = C.keyBinds.h[b];
                    p = Rd.getKeyName(p[1] ?? -1);
                  } else {
                    p = C.gamepadBinds.h[b];
                    p = Rd.getGamepadName(p[1] ?? -1);
                  }
                  this.updateBind(Math.floor(this.curSelected * 2) + 1, p);
                  g.sound.play(E.sound("confirmMenu"));
                  this.closeBinding();
                }
              }
            }
          } else {
            var p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(27, p.status) || g.gamepads.anyHasState(1, 2)) {
              this.close();
              return;
            }
            p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(17, p.status) || g.gamepads.anyHasState(4, 2) || g.gamepads.anyHasState(5, 2)) {
              this.swapMode();
            }
            p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(37, p.status)) {
              b = true;
            } else {
              p = g.keys.justPressed;
              b = p.keyManager.checkStatusUnsafe(39, p.status);
            }
            if (b || g.gamepads.anyHasState(13, 2) || g.gamepads.anyHasState(14, 2) || g.gamepads.anyHasState(37, 2) || g.gamepads.anyHasState(35, 2)) {
              this.updateAlt(true);
            }
            p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(38, p.status) || g.gamepads.anyHasState(11, 2) || g.gamepads.anyHasState(34, 2)) {
              this.updateText(-1);
            } else {
              p = g.keys.justPressed;
              if (p.keyManager.checkStatusUnsafe(40, p.status) || g.gamepads.anyHasState(12, 2) || g.gamepads.anyHasState(36, 2)) {
                this.updateText(1);
              }
            }
            p = g.keys.justPressed;
            if (p.keyManager.checkStatusUnsafe(13, p.status) || g.gamepads.anyHasState(7, 2) || g.gamepads.anyHasState(0, 2)) {
              if (this.options[this.curOptions[this.curSelected]][1] != fh.defaultKey) {
                this.bindingBlack = new G().makeGraphic(1, 1, -1);
                b = this.bindingBlack.scale;
                p = g.width;
                d = g.height;
                if (d == null) {
                  d = 0;
                }
                if (p == null) {
                  p = 0;
                }
                b.set_x(p);
                b.set_y(d);
                this.bindingBlack.updateHitbox();
                this.bindingBlack.set_alpha(0);
                Ha.tween(this.bindingBlack, {
                  alpha: 0.6
                }, 0.35, {
                  ease: X.linear
                });
                this.add(this.bindingBlack);
                this.bindingText = new bc(g.width / 2, 160, "Rebinding " + this.options[this.curOptions[this.curSelected]][3], false);
                this.bindingText.set_alignment($g.CENTERED);
                this.add(this.bindingText);
                this.bindingText2 = new bc(g.width / 2, 340, "Hold ESC to Cancel\nHold Backspace to Delete", true);
                this.bindingText2.set_alignment($g.CENTERED);
                this.add(this.bindingText2);
                this.binding = true;
                this.holdingEsc = 0;
                C.toggleVolumeKeys(false);
                g.sound.play(E.sound("scrollMenu"));
              } else {
                C.resetKeys(!this.onKeyboardMode);
                C.reloadVolumeKeys();
                b = this.curSelected;
                this.createTexts();
                this.curSelected = b;
                this.updateText();
                g.sound.play(E.sound("cancelMenu"));
              }
            }
          }
          rb.prototype.update.call(this, a);
        },
        closeBinding: function () {
          this.binding = false;
          this.bindingBlack.destroy();
          this.remove(this.bindingBlack);
          this.bindingText.destroy();
          this.remove(this.bindingText);
          this.bindingText2.destroy();
          this.remove(this.bindingText2);
          C.reloadVolumeKeys();
        },
        updateText: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this;
          if (a != 0) {
            this.curSelected += a;
            if (this.curSelected < 0) {
              this.curSelected = this.curOptions.length - 1;
            } else if (this.curSelected >= this.curOptions.length) {
              this.curSelected = 0;
            }
          }
          var c = this.curOptionsValid[this.curSelected];
          var d = 0;
          if (c < 3) {
            d = 3 - c;
          } else if (c > this.lastID - 4) {
            d = this.lastID - 4 - c;
          }
          this.grpDisplay.forEachAlive(function (a) {
            a.targetY = a.ID - c - d;
          });
          this.grpOptions.forEachAlive(function (a) {
            a.targetY = a.ID - c - d;
            a.set_alpha(a.ID - c == 0 ? 1 : 0.6);
          });
          this.grpBinds.forEachAlive(function (a) {
            var c = b.grpOptions.members[a.ID];
            a.targetY = c.targetY;
            a.set_alpha(c.alpha);
          });
          this.updateAlt();
          g.sound.play(E.sound("scrollMenu"));
        },
        swapMode: function () {
          if (this.colorTween != null) {
            this.colorTween.destroy();
          }
          this.colorTween = Ha.color(this.bg, 0.5, this.bg.color, this.onKeyboardMode ? this.gamepadColor : this.keyboardColor, {
            ease: X.linear
          });
          this.onKeyboardMode = !this.onKeyboardMode;
          this.curSelected = 0;
          this.curAlt = false;
          this.controllerSpr.animation.play(this.onKeyboardMode ? "keyboard" : "gamepad");
          this.createTexts();
        },
        updateAlt: function (a) {
          if (a == null) {
            a = false;
          }
          if (a) {
            this.curAlt = !this.curAlt;
            g.sound.play(E.sound("scrollMenu"));
          }
          this.selectSpr.sprTracker = this.grpBlacks.members[Math.floor(this.curSelected * 2) + (this.curAlt ? 1 : 0)];
          this.selectSpr.set_visible(this.selectSpr.sprTracker != null);
        },
        __class__: fh
      });
      function Ym() {
        this.title = "Gameplay Settings";
        this.rpcTitle = "Gameplay Settings Menu";
        var a = new sc("Downscroll", "If checked, notes go Down instead of Up, simple enough.", "downScroll", "bool");
        this.addOption(a);
        a = new sc("Middlescroll", "If checked, your notes get centered.", "middleScroll", "bool");
        this.addOption(a);
        a = new sc("Opponent Notes", "If unchecked, opponent notes get hidden.", "opponentStrums", "bool");
        this.addOption(a);
        a = new sc("Ghost Tapping", "If checked, you won't get misses from pressing keys\nwhile there are no notes able to be hit.", "ghostTapping", "bool");
        this.addOption(a);
        a = new sc("Auto Pause", "If checked, the game automatically pauses if the screen isn't on focus.", "autoPause", "bool");
        this.addOption(a);
        a.onChange = n(this, this.onChangeAutoPause);
        a = new sc("Disable Reset Button", "If checked, pressing Reset won't do anything.", "noReset", "bool");
        this.addOption(a);
        a = new sc("Hitsound Volume", "Funny notes does \"Tick!\" when you hit them.", "hitsoundVolume", "percent");
        this.addOption(a);
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        a.onChange = n(this, this.onChangeHitsoundVolume);
        a = new sc("Rating Offset", "Changes how late/early you have to hit for a \"Sick!\"\nHigher values mean you have to hit later.", "ratingOffset", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 20;
        a.minValue = -30;
        a.maxValue = 30;
        this.addOption(a);
        a = new sc("Sick! Hit Window", "Changes the amount of time you have\nfor hitting a \"Sick!\" in milliseconds.", "sickWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 15;
        a.minValue = 15;
        a.maxValue = 45;
        this.addOption(a);
        a = new sc("Good Hit Window", "Changes the amount of time you have\nfor hitting a \"Good\" in milliseconds.", "goodWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 30;
        a.minValue = 15;
        a.maxValue = 90;
        this.addOption(a);
        a = new sc("Bad Hit Window", "Changes the amount of time you have\nfor hitting a \"Bad\" in milliseconds.", "badWindow", "int");
        a.displayFormat = "%vms";
        a.scrollSpeed = 60;
        a.minValue = 15;
        a.maxValue = 135;
        this.addOption(a);
        a = new sc("Safe Frames", "Changes how many frames you have for\nhitting a note earlier or late.", "safeFrames", "float");
        a.scrollSpeed = 5;
        a.minValue = 2;
        a.maxValue = 10;
        a.changeValue = 0.1;
        this.addOption(a);
        a = new sc("Sustains as One Note", "If checked, Hold Notes can't be pressed if you miss,\nand count as a single Hit/Miss.\nUncheck this if you prefer the old Input System.", "guitarHeroSustains", "bool");
        this.addOption(a);
        se.call(this);
      }
      h["options.GameplaySettingsSubState"] = Ym;
      Ym.__name__ = "options.GameplaySettingsSubState";
      Ym.__super__ = se;
      Ym.prototype = q(se.prototype, {
        onChangeHitsoundVolume: function () {
          g.sound.play(E.sound("hitsound"), C.data.hitsoundVolume);
        },
        onChangeAutoPause: function () {
          g.autoPause = C.data.autoPause;
        },
        __class__: Ym
      });
      function Zm() {
        this.boyfriend = null;
        var a = this;
        this.title = "Graphics";
        this.rpcTitle = "Graphics Settings Menu";
        this.boyfriend = new ad(840, 170, "bf", true);
        this.boyfriend.setGraphicSize(this.boyfriend.get_width() * 0.75 | 0);
        this.boyfriend.updateHitbox();
        this.boyfriend.dance();
        this.boyfriend.animation.finishCallback = function (b) {
          a.boyfriend.dance();
        };
        this.boyfriend.set_visible(false);
        var b = new sc("Low Quality", "If checked, disables some background details,\ndecreases loading times and improves performance.", "lowQuality", "bool");
        this.addOption(b);
        b = new sc("Anti-Aliasing", "If unchecked, disables anti-aliasing, increases performance\nat the cost of sharper visuals.", "antialiasing", "bool");
        b.onChange = n(this, this.onChangeAntiAliasing);
        this.addOption(b);
        this.antialiasingOption = this.optionsArray.length - 1;
        b = new sc("Shaders", "If unchecked, disables shaders.\nIt's used for some visual effects, and also CPU intensive for weaker PCs.", "shaders", "bool");
        this.addOption(b);
        b = new sc("GPU Caching", "If checked, allows the GPU to be used for caching textures, decreasing RAM usage.\nDon't turn this on if you have a shitty Graphics Card.", "cacheOnGPU", "bool");
        this.addOption(b);
        se.call(this);
        this.insert(1, this.boyfriend);
      }
      h["options.GraphicsSettingsSubState"] = Zm;
      Zm.__name__ = "options.GraphicsSettingsSubState";
      Zm.__super__ = se;
      Zm.prototype = q(se.prototype, {
        onChangeAntiAliasing: function () {
          for (var a = 0, b = this.members; a < b.length;) {
            var c = b[a];
            ++a;
            if (c != null && c instanceof G && !(c instanceof R)) {
              c.set_antialiasing(C.data.antialiasing);
            }
          }
        },
        onChangeFramerate: function () {
          if (C.data.framerate > g.drawFramerate) {
            g.set_updateFramerate(C.data.framerate);
            g.set_drawFramerate(C.data.framerate);
          } else {
            g.set_drawFramerate(C.data.framerate);
            g.set_updateFramerate(C.data.framerate);
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          se.prototype.changeSelection.call(this, a);
          this.boyfriend.set_visible(this.antialiasingOption == this.curSelected);
        },
        __class__: Zm
      });
      function $m(a, b) {
        this.lastBeatHit = -1;
        var c = 0;
        var d = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = da.pool.get().set(c, d);
        d._inPool = false;
        this.startComboOffset = d;
        d = c = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = da.pool.get().set(c, d);
        d._inPool = false;
        this.startMousePos = d;
        this.holdingObjectType = null;
        this.onComboMenu = true;
        this.holdTime = 0;
        this._lastControllerMode = false;
        this.delayMax = 500;
        this.delayMin = -500;
        this.barPercent = 0;
        this.stageDirectory = "week1";
        P.call(this, a, b);
      }
      h["options.NoteOffsetState"] = $m;
      $m.__name__ = "options.NoteOffsetState";
      $m.__super__ = P;
      $m.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          this.camGame = this.initPsychCamera();
          this.camHUD = new Pb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          g.cameras.add(this.camHUD, false);
          this.camOther = new Pb();
          this.camOther.bgColor &= 16777215;
          this.camOther.bgColor |= 0;
          g.cameras.add(this.camOther, false);
          var b = g.camera.scroll;
          var c = 120;
          var d = 130;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          this.persistentUpdate = true;
          g.sound.pause();
          E.setCurrentLevel(this.stageDirectory);
          new ek();
          b = this.gf = new ad(400, 130, "gf");
          b.set_x(b.x + this.gf.positionArray[0]);
          b = this.gf;
          b.set_y(b.y + this.gf.positionArray[1]);
          b = this.gf.scrollFactor;
          d = c = 0.95;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.boyfriend = new ad(770, 100, "bf", true);
          b.set_x(b.x + this.boyfriend.positionArray[0]);
          b = this.boyfriend;
          b.set_y(b.y + this.boyfriend.positionArray[1]);
          this.add(this.gf);
          this.add(this.boyfriend);
          b = this.coolText = new R(0, 0, 0, "", 32);
          b.set_x((g.width - b.get_width()) / 2);
          b.set_y((g.height - b.get_height()) / 2);
          this.coolText.set_x(g.width * 0.35);
          this.rating = new G().loadGraphic(E.image("sick"));
          this.rating.set_cameras([this.camHUD]);
          this.rating.set_antialiasing(C.data.antialiasing);
          this.rating.setGraphicSize(this.rating.get_width() * 0.7 | 0);
          this.rating.updateHitbox();
          this.add(this.rating);
          this.comboNums = new Na();
          this.comboNums.set_cameras([this.camHUD]);
          this.add(this.comboNums);
          b = [];
          b.push(g.random.int(0, 9));
          b.push(g.random.int(0, 9));
          b.push(g.random.int(0, 9));
          for (d = c = 0; d < b.length;) {
            var e = b[d];
            ++d;
            e = new G(c * 43).loadGraphic(E.image("num" + e));
            e.set_cameras([this.camHUD]);
            e.set_antialiasing(C.data.antialiasing);
            e.setGraphicSize(e.get_width() * 0.5 | 0);
            e.updateHitbox();
            this.comboNums.add(e);
            ++c;
          }
          this.dumbTexts = new ab();
          this.dumbTexts.set_cameras([this.camHUD]);
          this.add(this.dumbTexts);
          this.createTexts();
          this.repositionCombo();
          this.beatText = new bc(0, 0, "Beat Hit!", true);
          this.beatText.setScale(0.6, 0.6);
          b = this.beatText;
          b.set_x(b.x + 260);
          this.beatText.set_alpha(0);
          this.beatText.acceleration.set_y(250);
          this.beatText.set_visible(false);
          this.add(this.beatText);
          this.timeTxt = new R(0, 600, g.width, "", 32);
          this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", cb.OUTLINE, -16777216);
          b = this.timeTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.timeTxt.set_borderSize(2);
          this.timeTxt.set_visible(false);
          this.timeTxt.set_cameras([this.camHUD]);
          this.barPercent = C.data.noteOffset;
          this.updateNoteDelay();
          this.timeBar = new Eh(0, this.timeTxt.y + this.timeTxt.get_height() / 3, "healthBar", function () {
            return a.barPercent;
          }, this.delayMin, this.delayMax);
          b = this.timeBar.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          b = this.timeBar;
          c = 1;
          if (c == null) {
            c = 17;
          }
          if (c == 1 || c == 17) {
            b.set_x((g.width - b.get_width()) / 2);
          }
          if (c == 16 || c == 17) {
            b.set_y((g.height - b.get_height()) / 2);
          }
          this.timeBar.set_visible(false);
          this.timeBar.set_cameras([this.camHUD]);
          this.timeBar.leftBar.set_color(-16711936);
          this.add(this.timeBar);
          this.add(this.timeTxt);
          c = new G().makeGraphic(g.width, 40, -16777216);
          b = c.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          c.set_alpha(0.6);
          c.set_cameras([this.camHUD]);
          this.add(c);
          this.changeModeText = new R(0, 4, g.width, "", 32);
          this.changeModeText.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
          b = this.changeModeText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.changeModeText.set_cameras([this.camHUD]);
          this.add(this.changeModeText);
          this.controllerPointer = new Jk(0, 0, 20, {
            thickness: 0
          }, -1);
          b = this.controllerPointer.offset;
          d = c = 20;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.controllerPointer;
          b.set_x((g.width - b.get_width()) / 2);
          b.set_y((g.height - b.get_height()) / 2);
          this.controllerPointer.set_alpha(0.6);
          this.controllerPointer.set_cameras([this.camHUD]);
          this.add(this.controllerPointer);
          this.updateMode();
          this._lastControllerMode = true;
          K.set_bpm(128);
          b = g.sound;
          c = E.returnSound("music", "offsetSong", null);
          b.playMusic(c, 1, true);
          P.prototype.create.call(this);
        },
        update: function (a) {
          var b = 1;
          var c = g.keys.pressed;
          if (c.keyManager.checkStatusUnsafe(16, c.status) || g.gamepads.anyHasState(4, 1)) {
            b = this.onComboMenu ? 10 : 3;
          }
          if (g.gamepads.anyHasState(-2, 2)) {
            this.get_controls().controllerMode = true;
          } else if (g.mouse._leftButton.current == 2) {
            this.get_controls().controllerMode = false;
          }
          if (this.get_controls().controllerMode != this._lastControllerMode) {
            g.mouse.set_visible(!this.get_controls().controllerMode);
            this.controllerPointer.set_visible(this.get_controls().controllerMode);
            if (this.get_controls().controllerMode) {
              c = g.mouse.getScreenPosition(this.camHUD);
              this.controllerPointer.set_x(c.x);
              this.controllerPointer.set_y(c.y);
            }
            this.updateMode();
            this._lastControllerMode = this.get_controls().controllerMode;
          }
          if (this.onComboMenu) {
            if (g.keys.justPressed.get_ANY() || g.gamepads.anyHasState(-2, 2)) {
              if (this.get_controls().controllerMode) {
                var d = [g.gamepads.anyHasState(13, 2), g.gamepads.anyHasState(14, 2), g.gamepads.anyHasState(11, 2), g.gamepads.anyHasState(12, 2), g.gamepads.anyHasState(41, 2), g.gamepads.anyHasState(39, 2), g.gamepads.anyHasState(38, 2), g.gamepads.anyHasState(40, 2)];
              } else {
                c = g.keys.justPressed;
                var e = c.keyManager.checkStatusUnsafe(37, c.status);
                c = g.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(39, c.status);
                c = g.keys.justPressed;
                var f = c.keyManager.checkStatusUnsafe(38, c.status);
                c = g.keys.justPressed;
                var k = c.keyManager.checkStatusUnsafe(40, c.status);
                c = g.keys.justPressed;
                var h = c.keyManager.checkStatusUnsafe(65, c.status);
                c = g.keys.justPressed;
                var l = c.keyManager.checkStatusUnsafe(68, c.status);
                c = g.keys.justPressed;
                var p = c.keyManager.checkStatusUnsafe(87, c.status);
                c = g.keys.justPressed;
                d = [e, d, f, k, h, l, p, c.keyManager.checkStatusUnsafe(83, c.status)];
              }
              if (d.indexOf(true) != -1) {
                c = 0;
                for (e = d.length; c < e;) {
                  f = c++;
                  if (d[f]) {
                    switch (f) {
                      case 0:
                        C.data.comboOffset[0] -= b;
                        break;
                      case 1:
                        C.data.comboOffset[0] += b;
                        break;
                      case 2:
                        C.data.comboOffset[1] += b;
                        break;
                      case 3:
                        C.data.comboOffset[1] -= b;
                        break;
                      case 4:
                        C.data.comboOffset[2] -= b;
                        break;
                      case 5:
                        C.data.comboOffset[2] += b;
                        break;
                      case 6:
                        C.data.comboOffset[3] += b;
                        break;
                      case 7:
                        C.data.comboOffset[3] -= b;
                    }
                  }
                }
                this.repositionCombo();
              }
            }
            f = b = 0;
            e = c = d = false;
            if (this.get_controls().controllerMode) {
              c = 0;
              for (e = g.gamepads.getActiveGamepads(); c < e.length && !(d = e[c], ++c, b = d.getAnalogXAxisValue(d.mapping.getAnalogStick(19)), f = d.getYAxisRaw(d.mapping.getAnalogStick(19)), d = b != 0 || f != 0););
              this.controllerPointer.set_x(Math.max(0, Math.min(g.width, this.controllerPointer.x + b * 1000 * a)));
              this.controllerPointer.set_y(Math.max(0, Math.min(g.height, this.controllerPointer.y + f * 1000 * a)));
              c = !g.gamepads.anyHasState(7, 2) && this.get_controls().get_ACCEPT();
              e = !g.gamepads.anyHasState(7, -1) && this.get_controls().justReleased("accept");
            }
            if (g.mouse._leftButton.current == 2 || c) {
              this.holdingObjectType = null;
              if (this.get_controls().controllerMode) {
                this.controllerPointer.getScreenPosition(this.startMousePos, this.camHUD);
              } else {
                g.mouse.getScreenPosition(this.camHUD, this.startMousePos);
              }
              if (this.startMousePos.x - this.comboNums.x >= 0 && this.startMousePos.x - this.comboNums.x <= this.comboNums.get_width() && this.startMousePos.y - this.comboNums.y >= 0 && this.startMousePos.y - this.comboNums.y <= this.comboNums.get_height()) {
                this.holdingObjectType = true;
                this.startComboOffset.set_x(C.data.comboOffset[2]);
                this.startComboOffset.set_y(C.data.comboOffset[3]);
              } else if (this.startMousePos.x - this.rating.x >= 0 && this.startMousePos.x - this.rating.x <= this.rating.get_width() && this.startMousePos.y - this.rating.y >= 0 && this.startMousePos.y - this.rating.y <= this.rating.get_height()) {
                this.holdingObjectType = false;
                this.startComboOffset.set_x(C.data.comboOffset[0]);
                this.startComboOffset.set_y(C.data.comboOffset[1]);
              }
            }
            if (g.mouse._leftButton.current == -1 || e) {
              this.holdingObjectType = null;
            }
            if (this.holdingObjectType != null && (c = g.mouse, c._prevX != c.x || c._prevY != c.y || d)) {
              c = this.get_controls().controllerMode ? this.controllerPointer.getScreenPosition(null, this.camHUD) : g.mouse.getScreenPosition(this.camHUD);
              b = this.holdingObjectType ? 2 : 0;
              C.data.comboOffset[b] = Math.round(c.x - this.startMousePos.x + this.startComboOffset.x);
              C.data.comboOffset[b + 1] = -Math.round(c.y - this.startMousePos.y - this.startComboOffset.y);
              this.repositionCombo();
            }
            if (this.get_controls().get_RESET()) {
              c = 0;
              for (e = C.data.comboOffset.length; c < e;) {
                f = c++;
                C.data.comboOffset[f] = 0;
              }
              this.repositionCombo();
            }
          } else {
            if (this.get_controls().get_UI_LEFT_P()) {
              this.barPercent = Math.max(this.delayMin, Math.min(C.data.noteOffset - 1, this.delayMax));
              this.updateNoteDelay();
            } else if (this.get_controls().get_UI_RIGHT_P()) {
              this.barPercent = Math.max(this.delayMin, Math.min(C.data.noteOffset + 1, this.delayMax));
              this.updateNoteDelay();
            }
            c = 1;
            if (this.get_controls().get_UI_LEFT() || this.get_controls().get_UI_RIGHT()) {
              this.holdTime += a;
              if (this.get_controls().get_UI_LEFT()) {
                c = -1;
              }
            }
            if (this.get_controls().get_UI_LEFT_R() || this.get_controls().get_UI_RIGHT_R()) {
              this.holdTime = 0;
            }
            if (this.holdTime > 0.5) {
              this.barPercent += b * 100 * a * c;
              this.barPercent = Math.max(this.delayMin, Math.min(this.barPercent, this.delayMax));
              this.updateNoteDelay();
            }
            if (this.get_controls().get_RESET()) {
              this.barPercent = this.holdTime = 0;
              this.updateNoteDelay();
            }
          }
          if (!this.get_controls().controllerMode && this.get_controls().get_ACCEPT() || this.get_controls().controllerMode && g.gamepads.anyHasState(7, 2)) {
            this.onComboMenu = !this.onComboMenu;
            this.updateMode();
          }
          if (this.get_controls().get_BACK()) {
            if (this.zoomTween != null) {
              this.zoomTween.cancel();
            }
            if (this.beatTween != null) {
              this.beatTween.cancel();
            }
            this.persistentUpdate = false;
            P.switchState(new jd());
            if (jd.onPlayState) {
              if (C.data.pauseMusic != "None") {
                b = g.sound;
                e = C.data.pauseMusic;
                d = new na("[~&\\\\;:<>#]", "");
                c = new na("[.,'\"%?!]", "");
                e = d.split(v.replace(e, " ", "-")).join("-");
                c = E.returnSound("music", c.split(e).join("").toLowerCase(), null);
                b.playMusic(c);
              } else {
                g.sound.music.set_volume(0);
              }
            } else {
              b = g.sound;
              c = E.returnSound("music", "freakyMenu", null);
              b.playMusic(c);
            }
            g.mouse.set_visible(false);
          }
          K.songPosition = g.sound.music._time;
          P.prototype.update.call(this, a);
        },
        beatHit: function () {
          var a = this;
          P.prototype.beatHit.call(this);
          if (this.lastBeatHit != this.curBeat) {
            if (this.curBeat % 2 == 0) {
              this.boyfriend.dance();
              this.gf.dance();
            }
            if (this.curBeat % 4 == 2) {
              g.camera.set_zoom(1.15);
              if (this.zoomTween != null) {
                this.zoomTween.cancel();
              }
              this.zoomTween = Ha.tween(g.camera, {
                zoom: 1
              }, 1, {
                ease: X.circOut,
                onComplete: function (b) {
                  a.zoomTween = null;
                }
              });
              this.beatText.set_alpha(1);
              this.beatText.set_y(320);
              this.beatText.velocity.set_y(-150);
              if (this.beatTween != null) {
                this.beatTween.cancel();
              }
              this.beatTween = Ha.tween(this.beatText, {
                alpha: 0
              }, 1, {
                ease: X.sineIn,
                onComplete: function (b) {
                  a.beatTween = null;
                }
              });
            }
            this.lastBeatHit = this.curBeat;
          }
        },
        repositionCombo: function () {
          var a = this.rating;
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.rating.set_x(this.coolText.x - 40 + C.data.comboOffset[0]);
          a = this.rating;
          a.set_y(a.y - (60 + C.data.comboOffset[1]));
          a = this.comboNums;
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.comboNums.set_x(this.coolText.x - 90 + C.data.comboOffset[2]);
          a = this.comboNums;
          a.set_y(a.y + (80 - C.data.comboOffset[3]));
          this.reloadTexts();
        },
        createTexts: function () {
          var a = new R(10, 48, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", cb.OUTLINE, -16777216);
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a = new R(10, 78, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", cb.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a = new R(10, 108, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", cb.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a.set_y(a.y + 24);
          a = new R(10, 138, 0, "", 24);
          a.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", cb.OUTLINE, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_borderSize(2);
          this.dumbTexts.add(a);
          a.set_cameras([this.camHUD]);
          a.set_y(a.y + 24);
        },
        reloadTexts: function () {
          for (var a = 0, b = this.dumbTexts.length; a < b;) {
            var c = a++;
            switch (c) {
              case 0:
                this.dumbTexts.members[c].set_text("Rating Offset:");
                break;
              case 1:
                this.dumbTexts.members[c].set_text("[" + C.data.comboOffset[0] + ", " + C.data.comboOffset[1] + "]");
                break;
              case 2:
                this.dumbTexts.members[c].set_text("Numbers Offset:");
                break;
              case 3:
                this.dumbTexts.members[c].set_text("[" + C.data.comboOffset[2] + ", " + C.data.comboOffset[3] + "]");
            }
          }
        },
        updateNoteDelay: function () {
          C.data.noteOffset = Math.round(this.barPercent);
          this.timeTxt.set_text("Current offset: " + Math.floor(this.barPercent) + " ms");
        },
        updateMode: function () {
          this.rating.set_visible(this.onComboMenu);
          this.comboNums.set_visible(this.onComboMenu);
          this.dumbTexts.set_visible(this.onComboMenu);
          this.timeBar.set_visible(!this.onComboMenu);
          this.timeTxt.set_visible(!this.onComboMenu);
          this.beatText.set_visible(!this.onComboMenu);
          this.controllerPointer.set_visible(false);
          g.mouse.set_visible(false);
          if (this.onComboMenu) {
            g.mouse.set_visible(!this.get_controls().controllerMode);
            this.controllerPointer.set_visible(this.get_controls().controllerMode);
          }
          var a = this.onComboMenu ? "Combo Offset" : "Note/Beat Delay";
          var b = this.get_controls().controllerMode ? "(Press Start to Switch)" : "(Press Accept to Switch)";
          this.changeModeText.set_text("< " + a.toUpperCase() + " " + b.toUpperCase() + " >");
        },
        __class__: $m
      });
      function sc(a, b, c, d, e) {
        if (d == null) {
          d = "bool";
        }
        if (b == null) {
          b = "";
        }
        this.defaultKeys = this.keys = null;
        this.name = "Unknown";
        this.description = "";
        this.displayFormat = "%v";
        this.decimals = 1;
        this.minValue = this.maxValue = null;
        this.changeValue = 1;
        this.options = null;
        this.curOption = 0;
        this.variable = this.defaultValue = null;
        this.scrollSpeed = 50;
        this.type = "bool";
        this.onChange = null;
        this.name = a;
        this.description = b;
        this.variable = c;
        this.type = d;
        this.options = e;
        if (this.get_type() != "keybind") {
          this.defaultValue = ha.getProperty(C.defaultData, c);
        }
        switch (d) {
          case "bool":
            if (this.defaultValue == null) {
              this.defaultValue = false;
            }
            break;
          case "float":
          case "int":
            if (this.defaultValue == null) {
              this.defaultValue = 0;
            }
            break;
          case "keybind":
            this.defaultValue = "";
            this.defaultKeys = {
              gamepad: "NONE",
              keyboard: "NONE"
            };
            this.keys = {
              gamepad: "NONE",
              keyboard: "NONE"
            };
            break;
          case "percent":
            if (this.defaultValue == null) {
              this.defaultValue = 1;
            }
            this.displayFormat = "%v%";
            this.changeValue = 0.01;
            this.minValue = 0;
            this.maxValue = 1;
            this.scrollSpeed = 0.5;
            this.decimals = 2;
            break;
          case "string":
            if (this.defaultValue == null) {
              this.defaultValue = "";
            }
            if (e.length > 0) {
              this.defaultValue = e[0];
            }
        }
        try {
          if (this.getValue() == null) {
            this.setValue(this.defaultValue);
          }
          if (d == "string") {
            var f = e.indexOf(this.getValue());
            if (f > -1) {
              this.curOption = f;
            }
          }
        } catch (k) {}
      }
      h["options.Option"] = sc;
      sc.__name__ = "options.Option";
      sc.prototype = {
        change: function () {
          if (this.onChange != null) {
            this.onChange();
          }
        },
        getValue: function () {
          var a = ha.getProperty(C.data, this.variable);
          if (this.get_type() == "keybind") {
            if ($a.instance.controllerMode) {
              return a.gamepad;
            } else {
              return a.keyboard;
            }
          } else {
            return a;
          }
        },
        setValue: function (a) {
          if (this.get_type() == "keybind") {
            var b = ha.getProperty(C.data, this.variable);
            if ($a.instance.controllerMode) {
              b.gamepad = a;
            } else {
              b.keyboard = a;
            }
          } else {
            ha.setProperty(C.data, this.variable, a);
          }
        },
        set_text: function (a) {
          if (a == null) {
            a = "";
          }
          if (this.child != null) {
            this.child.set_text(a);
          }
          return null;
        },
        get_type: function () {
          var a = "bool";
          switch (v.trim(this.type.toLowerCase())) {
            case "fl":
              a = "float";
              break;
            case "integer":
              a = "int";
              break;
            case "key":
            case "keybind":
              a = "keybind";
              break;
            case "str":
              a = "string";
              break;
            case "float":
            case "int":
            case "percent":
            case "string":
              a = this.type;
          }
          return this.type = a;
        },
        __class__: sc,
        __properties__: {
          set_text: "set_text",
          get_type: "get_type"
        }
      };
      function jd(a, b) {
        this.options = ["Controls", "Adjust Delay and Combo", "Graphics", "Visuals and UI", "Gameplay"];
        P.call(this, a, b);
      }
      h["options.OptionsState"] = jd;
      jd.__name__ = "options.OptionsState";
      jd.__super__ = P;
      jd.prototype = q(P.prototype, {
        openSelectedSubstate: function (a) {
          switch (a) {
            case "Adjust Delay and Combo":
              P.switchState(new $m());
              break;
            case "Controls":
              this.openSubState(new fh());
              break;
            case "Gameplay":
              this.openSubState(new Ym());
              break;
            case "Graphics":
              this.openSubState(new Zm());
              break;
            case "Visuals and UI":
              this.openSubState(new an());
          }
        },
        create: function () {
          var a = new G().loadGraphic(E.image("menuDesat"));
          a.set_antialiasing(C.data.antialiasing);
          a.set_color(-1412611);
          a.updateHitbox();
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.add(a);
          this.grpOptions = new ab();
          this.add(this.grpOptions);
          a = 0;
          for (var b = this.options.length; a < b;) {
            var c = a++;
            var d = new bc(0, 0, this.options[c], true);
            d.set_x((g.width - d.get_width()) / 2);
            d.set_y((g.height - d.get_height()) / 2);
            d.set_y(d.y + ((c - this.options.length / 2) * 100 + 50));
            this.grpOptions.add(d);
          }
          this.selectorLeft = new bc(0, 0, ">", true);
          this.add(this.selectorLeft);
          this.selectorRight = new bc(0, 0, "<", true);
          this.add(this.selectorRight);
          this.changeSelection();
          C.saveSettings();
          P.prototype.create.call(this);
        },
        closeSubState: function () {
          P.prototype.closeSubState.call(this);
          C.saveSettings();
        },
        update: function (a) {
          P.prototype.update.call(this, a);
          if (this.get_controls().get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if (this.get_controls().get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if (this.get_controls().get_BACK()) {
            g.sound.play(E.sound("cancelMenu"));
            if (jd.onPlayState) {
              we.loadDirectory(z.SONG);
              P.switchState(tc.getNextState(new z(), false));
              g.sound.music.set_volume(0);
            } else {
              P.switchState(new vd());
            }
          } else if (this.get_controls().get_ACCEPT()) {
            this.openSelectedSubstate(this.options[jd.curSelected]);
          }
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          jd.curSelected += a;
          if (jd.curSelected < 0) {
            jd.curSelected = this.options.length - 1;
          }
          if (jd.curSelected >= this.options.length) {
            jd.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - jd.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
              this.selectorLeft.set_x(d.x - 63);
              this.selectorLeft.set_y(d.y);
              this.selectorRight.set_x(d.x + d.get_width() + 15);
              this.selectorRight.set_y(d.y);
            }
          }
          g.sound.play(E.sound("scrollMenu"));
        },
        destroy: function () {
          C.loadPrefs();
          P.prototype.destroy.call(this);
        },
        __class__: jd
      });
      function an() {
        this.changedMusic = false;
        this.noteY = 90;
        this.notesTween = [];
        this.noteOptionID = -1;
        this.title = "Visuals and UI";
        this.rpcTitle = "Visuals & UI Settings Menu";
        this.notes = new ab();
        for (var a = 0, b = Ta.colArray.length; a < b;) {
          var c = a++;
          var d = new ah(370 + 560 / Ta.colArray.length * c, -200, c, 0);
          d.centerOffsets();
          var e = d.origin;
          c = d.frameWidth * 0.5;
          var f = d.frameHeight * 0.5;
          if (f == null) {
            f = 0;
          }
          if (c == null) {
            c = 0;
          }
          e.set_x(c);
          e.set_y(f);
          d.playAnim("static");
          this.notes.add(d);
        }
        a = null;
        if (a == null) {
          a = "assets/shared/";
        }
        a = v.trim(a);
        if (!v.endsWith(a, "/")) {
          a += "/";
        }
        if (!v.startsWith(a, "assets/")) {
          a = "assets/" + a;
        }
        d = [];
        e = [];
        e.push(a + "images/noteSkins/list.txt");
        a += "images/noteSkins/list.txt";
        if (e.indexOf(a) != -1) {
          L.remove(e, a);
          e.splice(0, 0, a);
        }
        for (a = 0; a < e.length;) {
          b = e[a];
          ++a;
          c = null;
          if (U.exists(b)) {
            c = U.getText(b);
          }
          if (c != null) {
            f = v.trim(c).split("\n");
            b = 0;
            for (var g = f.length; b < g;) {
              c = b++;
              f[c] = v.trim(f[c]);
            }
            b = f;
          } else {
            b = [];
          }
          for (c = 0; c < b.length;) {
            f = b[c];
            ++c;
            if (d.indexOf(f) == -1 && f.length > 0) {
              d.push(f);
            }
          }
        }
        a = d;
        if (a.length > 0) {
          if (a.indexOf(C.data.noteSkin) == -1) {
            C.data.noteSkin = C.defaultData.noteSkin;
          }
          a.splice(0, 0, C.defaultData.noteSkin);
          a = new sc("Note Skins:", "Select your prefered Note skin.", "noteSkin", "string", a);
          this.addOption(a);
          a.onChange = n(this, this.onChangeNoteSkin);
          this.noteOptionID = this.optionsArray.length - 1;
        }
        a = null;
        if (a == null) {
          a = "assets/shared/";
        }
        a = v.trim(a);
        if (!v.endsWith(a, "/")) {
          a += "/";
        }
        if (!v.startsWith(a, "assets/")) {
          a = "assets/" + a;
        }
        d = [];
        e = [];
        e.push(a + "images/noteSplashes/list.txt");
        a += "images/noteSplashes/list.txt";
        if (e.indexOf(a) != -1) {
          L.remove(e, a);
          e.splice(0, 0, a);
        }
        for (a = 0; a < e.length;) {
          b = e[a];
          ++a;
          c = null;
          if (U.exists(b)) {
            c = U.getText(b);
          }
          if (c != null) {
            f = v.trim(c).split("\n");
            b = 0;
            for (g = f.length; b < g;) {
              c = b++;
              f[c] = v.trim(f[c]);
            }
            b = f;
          } else {
            b = [];
          }
          for (c = 0; c < b.length;) {
            f = b[c];
            ++c;
            if (d.indexOf(f) == -1 && f.length > 0) {
              d.push(f);
            }
          }
        }
        a = d;
        if (a.length > 0) {
          if (a.indexOf(C.data.splashSkin) == -1) {
            C.data.splashSkin = C.defaultData.splashSkin;
          }
          a.splice(0, 0, C.defaultData.splashSkin);
          a = new sc("Note Splashes:", "Select your prefered Note Splash variation or turn it off.", "splashSkin", "string", a);
          this.addOption(a);
        }
        a = new sc("Note Splash Opacity", "How much transparent should the Note Splashes be.", "splashAlpha", "percent");
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        this.addOption(a);
        a = new sc("Hide HUD", "If checked, hides most HUD elements.", "hideHud", "bool");
        this.addOption(a);
        a = new sc("Time Bar:", "What should the Time Bar display?", "timeBarType", "string", ["Time Left", "Time Elapsed", "Song Name", "Disabled"]);
        this.addOption(a);
        a = new sc("Flashing Lights", "Uncheck this if you're sensitive to flashing lights!", "flashing", "bool");
        this.addOption(a);
        a = new sc("Camera Zooms", "If unchecked, the camera won't zoom in on a beat hit.", "camZooms", "bool");
        this.addOption(a);
        a = new sc("Score Text Zoom on Hit", "If unchecked, disables the Score text zooming\neverytime you hit a note.", "scoreZoom", "bool");
        this.addOption(a);
        a = new sc("Health Bar Opacity", "How much transparent should the health bar and icons be.", "healthBarAlpha", "percent");
        a.scrollSpeed = 1.6;
        a.minValue = 0;
        a.maxValue = 1;
        a.changeValue = 0.1;
        a.decimals = 1;
        this.addOption(a);
        a = new sc("FPS Counter", "If unchecked, hides FPS Counter.", "showFPS", "bool");
        this.addOption(a);
        a.onChange = n(this, this.onChangeFPSCounter);
        a = new sc("Pause Screen Song:", "What song do you prefer for the Pause Screen?", "pauseMusic", "string", ["None", "Breakfast", "Tea Time"]);
        this.addOption(a);
        a.onChange = n(this, this.onChangePauseMusic);
        a = new sc("Combo Stacking", "If unchecked, Ratings and Combo won't stack, saving on System Memory and making them easier to read", "comboStacking", "bool");
        this.addOption(a);
        se.call(this);
        this.add(this.notes);
      }
      h["options.VisualsUISubState"] = an;
      an.__name__ = "options.VisualsUISubState";
      an.__super__ = se;
      an.prototype = q(se.prototype, {
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          se.prototype.changeSelection.call(this, a);
          if (!(this.noteOptionID < 0)) {
            a = 0;
            for (var b = Ta.colArray.length; a < b;) {
              var c = a++;
              var d = this.notes.members[c];
              if (this.notesTween[c] != null) {
                this.notesTween[c].cancel();
              }
              this.notesTween[c] = this.curSelected == this.noteOptionID ? Ha.tween(d, {
                y: this.noteY
              }, Math.abs(d.y / (200 + this.noteY)) / 3, {
                ease: X.quadInOut
              }) : Ha.tween(d, {
                y: -200
              }, Math.abs(d.y / (200 + this.noteY)) / 3, {
                ease: X.quadInOut
              });
            }
          }
        },
        onChangePauseMusic: function () {
          if (C.data.pauseMusic == "None") {
            g.sound.music.set_volume(0);
          } else {
            var a = g.sound;
            var b = C.data.pauseMusic;
            var c = new na("[~&\\\\;:<>#]", "");
            var d = new na("[.,'\"%?!]", "");
            b = c.split(v.replace(b, " ", "-")).join("-");
            d = E.returnSound("music", d.split(b).join("").toLowerCase(), null);
            a.playMusic(d);
          }
          this.changedMusic = true;
        },
        onChangeNoteSkin: function () {
          var a = this;
          this.notes.forEachAlive(function (b) {
            a.changeNoteSkin(b);
            b.centerOffsets();
            var c = b.origin;
            var d = b.frameWidth * 0.5;
            b = b.frameHeight * 0.5;
            if (b == null) {
              b = 0;
            }
            if (d == null) {
              d = 0;
            }
            c.set_x(d);
            c.set_y(b);
          });
        },
        changeNoteSkin: function (a) {
          var b = Ta.defaultNoteSkin;
          var c = b + Ta.getNoteSkinPostfix();
          if (E.fileExists("images/" + c + ".png", "IMAGE")) {
            b = c;
          }
          a.set_texture(b);
          a.reloadNote();
          a.playAnim("static");
        },
        destroy: function () {
          if (this.changedMusic && !jd.onPlayState) {
            var a = g.sound;
            var b = E.returnSound("music", "freakyMenu", null);
            a.playMusic(b, 1, true);
          }
          se.prototype.destroy.call(this);
        },
        onChangeFPSCounter: function () {
          if (Zb.fpsVar != null) {
            Zb.fpsVar.set_visible(C.data.showFPS);
          }
        },
        __class__: an
      });
      function Vc(a) {
        Vc.$name = a;
        rb.call(this);
        this.set_cameras([g.cameras.list[g.cameras.list.length - 1]]);
      }
      h["psychlua.CustomSubstate"] = Vc;
      Vc.__name__ = "psychlua.CustomSubstate";
      Vc.openCustomSubstate = function (a, b) {
        if (b == null) {
          b = false;
        }
        if (b) {
          g.camera.set_followLerp(0);
          z.instance.persistentUpdate = false;
          z.instance.persistentDraw = true;
          z.instance.paused = true;
          if (g.sound.music != null) {
            g.sound.music.pause();
            z.instance.vocals.pause();
          }
        }
        z.instance.openSubState(new Vc(a));
        z.instance.setOnHScript("customSubstate", Vc.instance);
        z.instance.setOnHScript("customSubstateName", a);
      };
      Vc.closeCustomSubstate = function () {
        if (Vc.instance != null) {
          z.instance.closeSubState();
          Vc.instance = null;
          return true;
        } else {
          return false;
        }
      };
      Vc.insertToCustomSubstate = function (a, b) {
        if (b == null) {
          b = -1;
        }
        if (Vc.instance != null && (a = wa.__cast(z.instance.variables.h[a], hc), a != null)) {
          if (b < 0) {
            Vc.instance.add(a);
          } else {
            Vc.instance.insert(b, a);
          }
          return true;
        } else {
          return false;
        }
      };
      Vc.__super__ = rb;
      Vc.prototype = q(rb.prototype, {
        create: function () {
          Vc.instance = this;
          z.instance.callOnScripts("onCustomSubstateCreate", [Vc.$name]);
          rb.prototype.create.call(this);
          z.instance.callOnScripts("onCustomSubstateCreatePost", [Vc.$name]);
        },
        update: function (a) {
          z.instance.callOnScripts("onCustomSubstateUpdate", [Vc.$name, a]);
          rb.prototype.update.call(this, a);
          z.instance.callOnScripts("onCustomSubstateUpdatePost", [Vc.$name, a]);
        },
        destroy: function () {
          z.instance.callOnScripts("onCustomSubstateDestroy", [Vc.$name]);
          Vc.$name = "unnamed";
          z.instance.setOnHScript("customSubstate", null);
          z.instance.setOnHScript("customSubstateName", Vc.$name);
          rb.prototype.destroy.call(this);
        },
        __class__: Vc
      });
      function Jb() {}
      h["psychlua.LuaUtils"] = Jb;
      Jb.__name__ = "psychlua.LuaUtils";
      Jb.setVarInArray = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        var e = b.split("[");
        if (e.length > 1) {
          b = null;
          if (Object.prototype.hasOwnProperty.call(z.instance.variables.h, e[0])) {
            a = z.instance.variables.h[e[0]];
            if (a != null) {
              b = a;
            }
          } else {
            b = ha.getProperty(a, e[0]);
          }
          a = 1;
          for (d = e.length; a < d;) {
            var f = a++;
            var g = L.substr(e[f], 0, e[f].length - 1);
            if (f >= e.length - 1) {
              b[g] = c;
            } else {
              b = b[g];
            }
          }
          return b;
        }
        if (d && Jb.isMap(a)) {
          a.set(b, c);
          return c;
        }
        if (Object.prototype.hasOwnProperty.call(z.instance.variables.h, b)) {
          return z.instance.variables.h[b] = c;
        }
        ha.setProperty(a, b, c);
        return c;
      };
      Jb.getVarInArray = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        var d = b.split("[");
        if (d.length > 1) {
          b = null;
          if (Object.prototype.hasOwnProperty.call(z.instance.variables.h, d[0])) {
            c = z.instance.variables.h[d[0]];
            if (c != null) {
              b = c;
            }
          } else {
            b = ha.getProperty(a, d[0]);
          }
          a = 1;
          for (c = d.length; a < c;) {
            var e = a++;
            e = L.substr(d[e], 0, d[e].length - 1);
            b = b[e];
          }
          return b;
        }
        if (c && Jb.isMap(a)) {
          return a.get(b);
        } else if (Object.prototype.hasOwnProperty.call(z.instance.variables.h, b) && (c = z.instance.variables.h[b], c != null)) {
          return c;
        } else {
          return ha.getProperty(a, b);
        }
      };
      Jb.isMap = function (a) {
        if (a.exists != null && a.keyValueIterator != null) {
          return true;
        } else {
          return false;
        }
      };
      Jb.getPropertyLoop = function (a, b, c, d) {
        if (d == null) {
          d = false;
        }
        if (c == null) {
          c = true;
        }
        if (b == null) {
          b = true;
        }
        b = Jb.getObjectDirectly(a[0], b);
        var e = a.length;
        if (c) {
          e = a.length - 1;
        }
        for (c = 1; c < e;) {
          var f = c++;
          b = Jb.getVarInArray(b, a[f], d);
        }
        return b;
      };
      Jb.getObjectDirectly = function (a, b, c) {
        if (c == null) {
          c = false;
        }
        if (b == null) {
          b = true;
        }
        switch (a) {
          case "game":
          case "instance":
          case "this":
            return z.instance;
          default:
            b = z.instance.getLuaObject(a, b);
            if (b == null) {
              b = Jb.getVarInArray(z.instance.isDead ? Jc.instance : z.instance, a, c);
            }
            return b;
        }
      };
      function Fp() {}
      h["shaders.ColorSwap"] = Fp;
      Fp.__name__ = "shaders.ColorSwap";
      function Vo() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tuniform vec3 uTime;\n\t\tuniform bool awesomeOutline;\n\n\t\tconst float offset = 1.0 / 128.0;\n\t\tvec3 normalizeColor(vec3 color)\n\t\t{\n\t\t\treturn vec3(\n\t\t\t\tcolor[0] / 255.0,\n\t\t\t\tcolor[1] / 255.0,\n\t\t\t\tcolor[2] / 255.0\n\t\t\t);\n\t\t}\n\n\t\tvec3 rgb2hsv(vec3 c)\n\t\t{\n\t\t\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\t\t\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\t\t\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n\t\t\tfloat d = q.x - min(q.w, q.y);\n\t\t\tfloat e = 1.0e-10;\n\t\t\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n\t\t}\n\n\t\tvec3 hsv2rgb(vec3 c)\n\t\t{\n\t\t\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\t\t\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\t\t\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n\t\t}\n\n\t\tvoid main()\n\t\t{\n\t\t\tvec4 color = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\n\t\t\tvec4 swagColor = vec4(rgb2hsv(vec3(color[0], color[1], color[2])), color[3]);\n\n\t\t\t// [0] is the hue???\n\t\t\tswagColor[0] = swagColor[0] + uTime[0];\n\t\t\tswagColor[1] = swagColor[1] + uTime[1];\n\t\t\tswagColor[2] = swagColor[2] * (1.0 + uTime[2]);\n\t\t\t\n\t\t\tif(swagColor[1] < 0.0)\n\t\t\t{\n\t\t\t\tswagColor[1] = 0.0;\n\t\t\t}\n\t\t\telse if(swagColor[1] > 1.0)\n\t\t\t{\n\t\t\t\tswagColor[1] = 1.0;\n\t\t\t}\n\n\t\t\tcolor = vec4(hsv2rgb(vec3(swagColor[0], swagColor[1], swagColor[2])), swagColor[3]);\n\n\t\t\tif (awesomeOutline)\n\t\t\t{\n\t\t\t\t // Outline bullshit?\n\t\t\t\tvec2 size = vec2(3, 3);\n\n\t\t\t\tif (color.a <= 0.5) {\n\t\t\t\t\tfloat w = size.x / openfl_TextureSize.x;\n\t\t\t\t\tfloat h = size.y / openfl_TextureSize.y;\n\t\t\t\t\t\n\t\t\t\t\tif (flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x + w, openfl_TextureCoordv.y)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x - w, openfl_TextureCoordv.y)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x, openfl_TextureCoordv.y + h)).a != 0.\n\t\t\t\t\t|| flixel_texture2D(bitmap, vec2(openfl_TextureCoordv.x, openfl_TextureCoordv.y - h)).a != 0.)\n\t\t\t\t\t\tcolor = vec4(1.0, 1.0, 1.0, 1.0);\n\t\t\t\t}\n\t\t\t}\n\t\t\tgl_FragColor = color;\n\n\t\t\t/* \n\t\t\tif (color.a > 0.5)\n\t\t\t\tgl_FragColor = color;\n\t\t\telse\n\t\t\t{\n\t\t\t\tfloat a = flixel_texture2D(bitmap, vec2(openfl_TextureCoordv + offset, openfl_TextureCoordv.y)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv, openfl_TextureCoordv.y - offset)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv - offset, openfl_TextureCoordv.y)).a +\n\t\t\t\t\t\t  flixel_texture2D(bitmap, vec2(openfl_TextureCoordv, openfl_TextureCoordv.y + offset)).a;\n\t\t\t\tif (color.a < 1.0 && a > 0.0)\n\t\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.8);\n\t\t\t\telse\n\t\t\t\t\tgl_FragColor = color;\n\t\t\t} */\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\t\tif (openfl_HasColorTransform) {\n\t\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\t\t\t}\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        Vd.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["shaders.ColorSwapShader"] = Vo;
      Vo.__name__ = "shaders.ColorSwapShader";
      Vo.__super__ = Vd;
      Vo.prototype = q(Vd.prototype, {
        __class__: Vo
      });
      function jm() {
        this.shader = new bn();
        this.set_r(-65536);
        this.set_g(-16711936);
        this.set_b(-16776961);
        this.set_mult(1);
      }
      h["shaders.RGBPalette"] = jm;
      jm.__name__ = "shaders.RGBPalette";
      jm.prototype = {
        set_r: function (a) {
          this.r = a;
          this.shader.r.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_g: function (a) {
          this.g = a;
          this.shader.g.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_b: function (a) {
          this.b = a;
          this.shader.b.value = [(a >> 16 & 255) / 255, (a >> 8 & 255) / 255, (a & 255) / 255];
          return a;
        },
        set_mult: function (a) {
          a = a < 0 ? 0 : a;
          this.mult = a > 1 ? 1 : a;
          this.shader.mult.value = [this.mult];
          return this.mult;
        },
        __class__: jm,
        __properties__: {
          set_mult: "set_mult",
          set_b: "set_b",
          set_g: "set_g",
          set_r: "set_r"
        }
      };
      function im(a, b) {
        this.enabled = this.allowNew = true;
        this.parent = b;
        this._owner = a;
        this._original = b;
        a.shader = b.shader;
        this.r = this.parent.r;
        this.set_g(this.parent.g);
        this.set_b(this.parent.b);
        this.set_mult(this.parent.mult);
      }
      h["shaders.RGBShaderReference"] = im;
      im.__name__ = "shaders.RGBShaderReference";
      im.prototype = {
        set_r: function (a) {
          if (this.allowNew && a != this._original.r) {
            this.cloneOriginal();
          }
          return this.r = this.parent.set_r(a);
        },
        set_g: function (a) {
          if (this.allowNew && a != this._original.g) {
            this.cloneOriginal();
          }
          return this.g = this.parent.set_g(a);
        },
        set_b: function (a) {
          if (this.allowNew && a != this._original.b) {
            this.cloneOriginal();
          }
          return this.b = this.parent.set_b(a);
        },
        set_mult: function (a) {
          if (this.allowNew && a != this._original.mult) {
            this.cloneOriginal();
          }
          return this.mult = this.parent.set_mult(a);
        },
        set_enabled: function (a) {
          this._owner.shader = a ? this.parent.shader : null;
          return this.enabled = a;
        },
        cloneOriginal: function () {
          if (this.allowNew) {
            this.allowNew = false;
            if (this._original == this.parent) {
              this.parent = new jm();
              this.parent.set_r(this._original.r);
              this.parent.set_g(this._original.g);
              this.parent.set_b(this._original.b);
              this.parent.set_mult(this._original.mult);
              this._owner.shader = this.parent.shader;
            }
          }
        },
        __class__: im,
        __properties__: {
          set_enabled: "set_enabled",
          set_mult: "set_mult",
          set_b: "set_b",
          set_g: "set_g",
          set_r: "set_r"
        }
      };
      function bn() {
        if (this.__glFragmentSource == null) {
          this.__glFragmentSource = "\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\n\n\t\t#pragma header\n\t\t\n\t\tuniform vec3 r;\n\t\tuniform vec3 g;\n\t\tuniform vec3 b;\n\t\tuniform float mult;\n\n\t\tvec4 flixel_texture2DCustom(sampler2D bitmap, vec2 coord) {\n\t\t\tvec4 color = flixel_texture2D(bitmap, coord);\n\t\t\tif (!hasTransform || color.a == 0.0 || mult == 0.0) {\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tvec4 newColor = color;\n\t\t\tnewColor.rgb = min(color.r * r + color.g * g + color.b * b, vec3(1.0));\n\t\t\tnewColor.a = color.a;\n\t\t\t\n\t\t\tcolor = mix(color, newColor, mult);\n\t\t\t\n\t\t\tif(color.a > 0.0) {\n\t\t\t\treturn vec4(color.rgb, color.a);\n\t\t\t}\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = flixel_texture2DCustom(bitmap, openfl_TextureCoordv);\n\t\t}";
        }
        if (this.__glVertexSource == null) {
          this.__glVertexSource = "\n\t\tattribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\t\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\t\t\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\t\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\t\t\t\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
        }
        Vd.call(this);
        this.__isGenerated = true;
        this.__initGL();
      }
      h["shaders.RGBPaletteShader"] = bn;
      bn.__name__ = "shaders.RGBPaletteShader";
      bn.__super__ = Vd;
      bn.prototype = q(Vd.prototype, {
        __class__: bn
      });
      function cn(a, b) {
        this.charData = [{
          name: "coquers",
          x: -500,
          y: 250
        }, {
          name: "betasheep",
          x: -275,
          y: 175
        }, {
          name: "boingbingus",
          x: -75,
          y: 275
        }, {
          name: "ciphie",
          x: -100,
          y: 150
        }, {
          name: "kane",
          x: 100,
          y: 150
        }, {
          name: "m3zra",
          x: 275,
          y: 125
        }, {
          name: "wellwoven",
          x: 325,
          y: 300
        }, {
          name: "firemaster",
          x: 500,
          y: 100
        }, {
          name: "scrilopolis",
          x: 675,
          y: 200
        }, {
          name: "asyu",
          x: 575,
          y: 375
        }, {
          name: "torders",
          x: 800,
          y: 200
        }, {
          name: "frikko",
          x: 900,
          y: 125
        }, {
          name: "valcant",
          x: 925,
          y: 375
        }, {
          name: "awaken",
          x: 1050,
          y: 400
        }, {
          name: "care",
          x: 1100,
          y: 150
        }, {
          name: "karlie",
          x: 1250,
          y: 300
        }, {
          name: "diggin",
          x: 1400,
          y: 300
        }, {
          name: "lewis",
          x: 1400,
          y: 75
        }, {
          name: "leebert",
          x: 1600,
          y: 150
        }, {
          name: "pablo",
          x: 1800,
          y: 325,
          flipX: true
        }, {
          name: "hazey",
          x: 670,
          y: 0
        }];
        this.selecting = false;
        this.specialThx = new R(10, 10, 0, "!!!", 32, false);
        this.credits = [];
        this.titleText = new R(10, 10, 0, "Jeffy's Infinite Irida - Shucks Demo Credits", 32, false).setFormat("assets/fonts/SuperMario256.ttf", 32);
        this.camOver = new Pb();
        P.call(this, a, b);
      }
      h["states.CreditsState"] = cn;
      cn.__name__ = "states.CreditsState";
      cn.__super__ = P;
      cn.prototype = q(P.prototype, {
        getCharData: function (a) {
          for (var b = 0, c = this.charData; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name.toLowerCase() == a.toLowerCase()) {
              return d;
            }
          }
          return null;
        },
        create: function () {
          this.persistentUpdate = true;
          g.mouse.set_visible(true);
          g.cameras.add(this.camOver, false);
          this.camOver.bgColor = 0;
          this.camOver.set_alpha(1);
          var a = this.bigChar = new G();
          var b = null;
          var c = E.image("menus/credits/chars", b, true);
          a.set_frames(Sa.fromSparrow(c, E.getPath("images/menus/credits/chars.xml", null, b)));
          a = this.quote = new G();
          b = null;
          c = E.image("menus/credits/quotes", b, true);
          a.set_frames(Sa.fromSparrow(c, E.getPath("images/menus/credits/quotes.xml", null, b)));
          this.credits = eg.getAnimsListFromSprite(this.bigChar);
          this.chars = new ab();
          this.theThx = new ab();
          a = new Db("menus/credits/bg", 0, 0);
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.add(a);
          a.set_x(a.x + 55);
          b = a.scale;
          var d = c = 2.5;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a.set_antialiasing(true);
          a = 0;
          for (var e = this.credits; a < e.length;) {
            b = e[a];
            var f = c = a++;
            var k = b;
            var h = new G();
            b = null;
            c = E.image("menus/credits/chars", b, true);
            h.set_frames(Sa.fromSparrow(c, E.getPath("images/menus/credits/chars.xml", null, b)));
            h.animation.addByPrefix("idle", k, 0);
            h.animation.play("idle");
            b = h.scale;
            d = c = 0.5;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            h.updateHitbox();
            h.set_antialiasing(true);
            this.bigChar.animation.addByPrefix(k, k, 24, true);
            this.quote.animation.addByPrefix(k, k, 1, false);
            b = this.getCharData(k);
            if (b != null) {
              h.setPosition(b.x, b.y);
              if (Object.prototype.hasOwnProperty.call(b, "flipX")) {
                h.set_flipX(b.flipX);
              }
            } else {
              Ab.trace("No position data for " + k, {
                fileName: "source/states/CreditsState.hx",
                lineNumber: 116,
                className: "states.CreditsState",
                methodName: "create"
              });
              h.set_visible(false);
            }
            this.chars.add(h).ID = f;
          }
          a = 0;
          for (e = ["Efkli:\nShucks Vocal Mixing", "Springon:\nShucks Visualizer", "Top Hat:\nIcons", "Sirvko"]; a < e.length;) {
            b = e[a];
            f = c = a++;
            k = b;
            h = new R(0, 0, 0, k, 32, true);
            h.setPosition(this.theThx.members[0] == null ? g.width / 2 - h.get_width() / 2 : this.theThx.members[0].x, g.height / 5 * (f + 1) - h.get_height() / 1.5);
            h.setFormat("assets/fonts/SuperMario256.ttf", 48, -1, null, cb.OUTLINE, -16777216);
            this.theThx.add(h);
            f = new Db("menus/credits/specialthx/" + k.split(":\n")[0].toLowerCase(), h.x - 155, h.getMidpoint().y - 65);
            b = f.scale;
            c = 130 / f.get_width();
            d = 130 / f.get_height();
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            this.theThx.add(f);
            f.updateHitbox();
            h.set_antialiasing(f.set_antialiasing(true));
          }
          a = new G(0, 50).makeGraphic(g.width, 620, -16777216);
          a.set_alpha(0.5);
          this.add(a);
          e = pd.createGradientFlxSprite(g.width, 620, [0, -16777216], 1, 0);
          e.set_y(50);
          this.add(e);
          this.add(this.theThx).set_camera(this.camOver);
          this.add(this.bigChar);
          this.bigChar.set_antialiasing(e.set_antialiasing(this.quote.set_antialiasing(true)));
          b = this.quote.scale;
          d = c = 0.782608695652174;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          this.add(this.quote);
          a.set_camera(e.set_camera(this.bigChar.set_camera(this.quote.set_camera(this.camOver))));
          this.camOver.set_alpha(0);
          this.add(this.chars);
          a = new G().makeGraphic(g.width, 50, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(a);
          a = new G(0, 670).makeGraphic(g.width, 50, -16777216);
          b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(a);
          b = this.titleText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.titleText);
          this.specialThx.setFormat("assets/fonts/SuperMario256.ttf", 32);
          b = this.specialThx.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.specialThx);
          this.specialThx.set_x(g.width - this.specialThx.get_width() - 10);
          this.clickText = new R(0, 680, g.width, "Click to view info", 32, false).setFormat("assets/fonts/SuperMario256.ttf", 32);
          b = this.clickText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.clickText.set_alignment("center");
          this.add(this.clickText);
          this.titleText.set_antialiasing(this.specialThx.set_antialiasing(this.clickText.set_antialiasing(true)));
          P.prototype.create.call(this);
        },
        update: function (a) {
          if (g.sound.music._volume < 0.7) {
            var b = g.sound.music;
            b.set_volume(b._volume + g.elapsed * 0.5);
          }
          b = this.clickText.y;
          this.clickText.set_y(b + ((this.curCred == null || this.selecting ? 720 : 680) - b) * 0.33);
          b = this.clickText.alpha;
          this.clickText.set_alpha(b + ((this.curCred == null || this.selecting ? 0 : 1) - b) * 0.3);
          if (this.selecting) {
            b = this.bigChar.x;
            this.bigChar.set_x(b + (g.width / 4 - this.bigChar.get_width() / 2 - b) * 0.04);
            if (this.quote.visible) {
              b = this.quote.x;
              this.quote.set_x(b + (g.width / 4 * 3 - this.quote.get_width() / 2 - b) * 0.04);
            }
          } else {
            b = g.camera.scroll.x;
            g.camera.scroll.set_x(b + a * 8 * (125 + (g.mouse.screenX - g.width / 2) - b));
            this.curCred = null;
            this.specialThx.set_color(g.mouse.overlaps(this.specialThx) ? -65536 : -1);
            for (var c = 0, d = this.chars.members; c < d.length;) {
              b = d[c];
              ++c;
              if (g.mouse.overlaps(b) && this.curCred == null) {
                this.curCred = b.ID;
              }
              var e = b.alpha;
              b.set_alpha(e + ((this.curCred == b.ID ? 1 : 0.5) - e) * 0.33);
              b.animation._curAnim.set_curFrame(this.curCred != b.ID ? 0 : 10);
            }
          }
          if (this.get_controls().get_BACK() && !this.selecting) {
            var f = fg.fromState(new vd());
            var k = g.game._state;
            if (!(f instanceof nc) || !!g.canSwitchTo(f)) {
              g.game._state.startOutro(function () {
                if (g.game._state == k) {
                  g.game._nextState = f;
                } else {
                  g.log.advanced("`onOutroComplete` was called after the state was switched. This will be ignored", Aa.WARNING, true);
                }
              });
            }
          }
          if (this.get_controls().get_BACK() && this.selecting) {
            this.titleText.set_text("Jeffy's Infinite Irida - Shucks Demo Credits");
            this.selecting = false;
          }
          P.prototype.update.call(this, a);
        },
        __class__: cn
      });
      function gh(a, b) {
        P.call(this, a, b);
      }
      h["states.FlashingState"] = gh;
      gh.__name__ = "states.FlashingState";
      gh.__super__ = P;
      gh.prototype = q(P.prototype, {
        create: function () {
          P.prototype.create.call(this);
          var a = new G().makeGraphic(g.width, g.height, -16777216);
          this.add(a);
          this.text1 = new R(0, 10, g.width, "WARNING", 128, false);
          this.text2 = new R(150, 150, g.width - 250, "This mod contains content that may not be suitable for all players. Only mature audiences should view this mod.", 48, false);
          this.text3 = new R(0, 400, g.width, "Viewer discretion is advised.\nThank you.", 64, false);
          this.text4 = new R(0, 500, g.width, "\n\nPress Enter to continue.", 64, false);
          this.text1.setFormat("assets/fonts/vcr.ttf", 128, -65536, "center");
          this.text2.setFormat("assets/fonts/vcr.ttf", 48, -1, "center");
          this.text3.setFormat("assets/fonts/vcr.ttf", 64, -1, "center");
          this.text4.setFormat("assets/fonts/vcr.ttf", 48, -1, "center");
          this.add(this.text1);
          this.add(this.text2);
          this.add(this.text3);
          this.add(this.text4);
        },
        update: function (a) {
          if (!gh.leftState) {
            var b = this.get_controls().get_BACK();
            if (this.get_controls().get_ACCEPT() || b) {
              gh.leftState = true;
              Vb.skipNextTransIn = true;
              Vb.skipNextTransOut = true;
              g.sound.play(E.sound("cancelMenu"));
              Ha.tween(this.text1, {
                alpha: 0
              }, 1);
              Ha.tween(this.text2, {
                alpha: 0
              }, 1);
              Ha.tween(this.text3, {
                alpha: 0
              }, 1);
              Ha.tween(this.text4, {
                alpha: 0
              }, 1, {
                onComplete: function (a) {
                  P.switchState(new Qc());
                }
              });
            }
          }
          P.prototype.update.call(this, a);
        },
        __class__: gh
      });
      function _0xe40c(d, e, f) {
        var g = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+/".split("");
        var h = g.slice(0, e);
        var i = g.slice(0, f);
        var j = d.split("").reverse().reduce(function (a, b, c) {
          if (h.indexOf(b) !== -1) {
            return a += h.indexOf(b) * Math.pow(e, c);
          }
        }, 0);
        var k = "";
        while (j > 0) {
          k = i[j % f] + k;
          j = (j - j % f) / f;
        }
        return k || "0";
      }

  function Va(_0x533f7c, _0x13f557) {
    this._lastVisibles = [];
    this._drawDistance = 4;
    this.holdTime = 0;
    this.instPlaying = -1;
    this.iconArray = [];
    this.curPlaying = !1;
    this.lerpScore = this.lerpRating = this.intendedScore = this.intendedRating = 0;
    this.curDifficulty = -1;
    this.lerpSelected = 0;
    this.songs = [];
    P.call(this, _0x533f7c, _0x13f557);
  }
  h["states.FreeplayState"] = Va;
  Va.__name__ = "states.FreeplayState";
  Va.destroyFreeplayVocals = function () {
    if (Va.vocals != null) {
      var _0x2edab3 = Va.vocals;
      _0x2edab3.cleanup(_0x2edab3.autoDestroy, !0);
      Va.vocals.destroy();
    }
    Va.vocals = null;
  };
  Va.__super__ = P;
  Va.prototype = q(P.prototype, {
    create: function () {
      E.clearStoredMemory();
      E.clearUnusedMemory();
      this.persistentUpdate = !0;
      z.isStoryMode = !1;
      jb.reloadWeekFiles(!1);
      for (var _0x55fb71 = 0, _0x4ea48b = jb.weeksList.length; _0x55fb71 < _0x4ea48b;) {
        var _0x439b31 = _0x55fb71++;
        if (!this.weekIsLocked(jb.weeksList[_0x439b31])) {
          var _0xb725a9 = jb.weeksLoaded.h[jb.weeksList[_0x439b31]];
          var _0x723455 = [];
          var _0x363dda = [];
          for (var _0x3e44a9 = 0, _0x1b2e84 = _0xb725a9.songs.length; _0x3e44a9 < _0x1b2e84;) {
            var _0x30fa70 = _0x3e44a9++;
            _0x723455.push(_0xb725a9.songs[_0x30fa70][0]);
            _0x363dda.push(_0xb725a9.songs[_0x30fa70][1]);
          }
          jb.setDirectoryFromWeek(_0xb725a9);
          _0x723455 = 0;
          for (_0xb725a9 = _0xb725a9.songs; _0x723455 < _0xb725a9.length;) {
            _0x3e44a9 = _0xb725a9[_0x723455];
            ++_0x723455;
            var _0x441dbc = _0x3e44a9[2];
            if (_0x441dbc == null || _0x441dbc.length < 3) {
              _0x441dbc = [146, 113, 253];
            }
            _0x363dda = _0x3e44a9[0];
            _0x3e44a9 = _0x3e44a9[1];
            _0x1b2e84 = _0x441dbc[0];
            _0x30fa70 = _0x441dbc[1];
            _0x441dbc = _0x441dbc[2];
            var _0x2754e1 = Gb._new();
            var _0x2d7af7 = 255;
            if (_0x2d7af7 == null) {
              _0x2d7af7 = 255;
            }
            _0x2754e1 &= -16711681;
            _0x2754e1 |= (_0x1b2e84 > 255 ? 255 : _0x1b2e84 < 0 ? 0 : _0x1b2e84) << 16;
            _0x2754e1 &= -65281;
            _0x2754e1 |= (_0x30fa70 > 255 ? 255 : _0x30fa70 < 0 ? 0 : _0x30fa70) << 8;
            _0x2754e1 &= -256;
            _0x2754e1 |= _0x441dbc > 255 ? 255 : _0x441dbc < 0 ? 0 : _0x441dbc;
            _0x2754e1 &= 16777215;
            _0x2754e1 |= (_0x2d7af7 > 255 ? 255 : _0x2d7af7 < 0 ? 0 : _0x2d7af7) << 24;
            this.addSong(_0x363dda, _0x439b31, _0x3e44a9, _0x2754e1);
          }
        }
      }
      ve.loadTopMod();
      this.bg = new G().loadGraphic(E.image("menuBGBlue"));
      this.bg.set_antialiasing(C.data.antialiasing);
      this.add(this.bg);
      _0x55fb71 = this.bg;
      _0x55fb71.set_x((g.width - _0x55fb71.get_width()) / 2);
      _0x55fb71.set_y((g.height - _0x55fb71.get_height()) / 2);
      this.grpSongs = new ab();
      this.add(this.grpSongs);
      _0x55fb71 = 0;
      for (_0x4ea48b = this.songs.length; _0x55fb71 < _0x4ea48b;) {
        _0x439b31 = _0x55fb71++;
        _0x723455 = new bc(90, 320, this.songs[_0x439b31].songName, !0);
        _0x723455.targetY = _0x439b31;
        this.grpSongs.add(_0x723455);
        _0x723455.set_scaleX(Math.min(1, 980 / _0x723455.get_width()));
        _0x723455.snapToPosition();
        ve.currentModDirectory = this.songs[_0x439b31].folder;
        _0x439b31 = new Mf(this.songs[_0x439b31].songCharacter);
        _0x439b31.sprTracker = _0x723455;
        _0x723455.set_visible(_0x723455.set_active(_0x723455.isMenuItem = !1));
        _0x439b31.set_visible(_0x439b31.set_active(!1));
        this.iconArray.push(_0x439b31);
        this.add(_0x439b31);
      }
      jb.setDirectoryFromWeek();
      this.scoreText = new R(g.width * 0.7, 5, 0, "", 32);
      this.scoreText.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
      this.scoreBG = new G(this.scoreText.x - 6, 0).makeGraphic(1, 66, -16777216);
      this.scoreBG.set_alpha(0.6);
      this.add(this.scoreBG);
      this.diffText = new R(this.scoreText.x, this.scoreText.y + 36, 0, "", 24);
      this.diffText.set_font(this.scoreText._font);
      this.add(this.diffText);
      this.add(this.scoreText);
      this.missingTextBG = new G().makeGraphic(g.width, g.height, -16777216);
      this.missingTextBG.set_alpha(0.6);
      this.missingTextBG.set_visible(!1);
      this.add(this.missingTextBG);
      this.missingText = new R(50, 0, g.width - 100, "", 24);
      this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", cb.OUTLINE, -16777216);
      _0x55fb71 = this.missingText.scrollFactor;
      _0x55fb71.set_x(0);
      _0x55fb71.set_y(0);
      this.missingText.set_visible(!1);
      this.add(this.missingText);
      if (Va.curSelected >= this.songs.length) {
        Va.curSelected = 0;
      }
      this.lerpSelected = Va.curSelected;
      this.curDifficulty = Math.round(Math.max(0, qb.defaultList.indexOf(Va.lastDifficultyName)));
      this.bottomBG = new G(0, g.height - 26).makeGraphic(g.width, 26, -16777216);
      this.bottomBG.set_alpha(0.6);
      this.add(this.bottomBG);
      this.bottomString = "Press RESET to Reset your Score and Accuracy.";
      this.bottomText = new R(this.bottomBG.x, this.bottomBG.y + 4, g.width, "Press RESET to Reset your Score and Accuracy.", 16);
      this.bottomText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center");
      _0x55fb71 = this.bottomText.scrollFactor;
      _0x55fb71.set_x(0);
      _0x55fb71.set_y(0);
      this.add(this.bottomText);
      this.player = new hm(this);
      this.add(this.player);
      this.changeSelection();
      this.updateTexts();
      P.prototype.create.call(this);
    },
    closeSubState: function () {
      this.changeSelection(0, !1);
      this.persistentUpdate = !0;
      P.prototype.closeSubState.call(this);
    },
    addSong: function (_0x2f1caf, _0x4c3e6c, _0x2e2376, _0xe012a5) {
      this.songs.push(new Wo(_0x2f1caf, _0x4c3e6c, _0x2e2376, _0xe012a5));
    },
    weekIsLocked: function (_0x359248) {
      _0x359248 = jb.weeksLoaded.h[_0x359248];
      if (!_0x359248.startUnlocked && _0x359248.weekBefore.length > 0) {
        if (Object.prototype.hasOwnProperty.call(Nb.weekCompleted.h, _0x359248.weekBefore)) {
          return !Nb.weekCompleted.h[_0x359248.weekBefore];
        } else {
          return true;
        }
      } else {
        return false;
      }
    },
    update: function (_0x46b454) {
      if (g.sound.music._volume < 0.7) {
        var _0xde8ecc = g.sound.music;
        _0xde8ecc.set_volume(_0xde8ecc._volume + g.elapsed * 0.5);
      }
      _0xde8ecc = this.intendedScore;
      this.lerpScore = Math.floor(_0xde8ecc + Math.exp(-_0x46b454 * 24) * (this.lerpScore - _0xde8ecc));
      _0xde8ecc = this.intendedRating;
      this.lerpRating = _0xde8ecc + Math.exp(-_0x46b454 * 12) * (this.lerpRating - _0xde8ecc);
      if (Math.abs(this.lerpScore - this.intendedScore) <= 10) {
        this.lerpScore = this.intendedScore;
      }
      if (Math.abs(this.lerpRating - this.intendedRating) <= 0.01) {
        this.lerpRating = this.intendedRating;
      }
      var _0x1d75db = y.string(eg.floorDecimal(this.lerpRating * 100, 2)).split(".");
      for (_0x1d75db.length < 2 && _0x1d75db.push(""); _0x1d75db[1].length < 2;) {
        _0x1d75db[1] += "0";
      }
      _0xde8ecc = 1;
      var _0x169ada = g.keys.pressed;
      if (_0x169ada.keyManager.checkStatusUnsafe(16, _0x169ada.status)) {
        _0xde8ecc = 3;
      }
      if (!this.player.playingMusic) {
        this.scoreText.set_text("PERSONAL BEST: " + this.lerpScore + " (" + _0x1d75db.join(".") + "%)");
        this.positionHighscore();
        if (this.songs.length > 1) {
          _0x169ada = g.keys.justPressed;
          if (_0x169ada.keyManager.checkStatusUnsafe(36, _0x169ada.status)) {
            Va.curSelected = 0;
            this.changeSelection();
            this.holdTime = 0;
          } else {
            _0x169ada = g.keys.justPressed;
            if (_0x169ada.keyManager.checkStatusUnsafe(35, _0x169ada.status)) {
              Va.curSelected = this.songs.length - 1;
              this.changeSelection();
              this.holdTime = 0;
            }
          }
          if (this.get_controls().get_UI_UP_P()) {
            this.changeSelection(-_0xde8ecc);
            this.holdTime = 0;
          }
          if (this.get_controls().get_UI_DOWN_P()) {
            this.changeSelection(_0xde8ecc);
            this.holdTime = 0;
          }
          if (this.get_controls().get_UI_DOWN() || this.get_controls().get_UI_UP()) {
            _0x169ada = Math.floor((this.holdTime - 0.5) * 10);
            this.holdTime += _0x46b454;
            _0x1d75db = Math.floor((this.holdTime - 0.5) * 10);
            if (this.holdTime > 0.5 && _0x1d75db - _0x169ada > 0) {
              this.changeSelection((_0x1d75db - _0x169ada) * (this.get_controls().get_UI_UP() ? -_0xde8ecc : _0xde8ecc));
            }
          }
          if (g.mouse.wheel != 0) {
            g.sound.play(E.sound("scrollMenu"), 0.2);
            this.changeSelection(-_0xde8ecc * g.mouse.wheel, false);
          }
        }
        if (this.get_controls().get_UI_LEFT_P()) {
          this.changeDiff(-1);
          _0xde8ecc = this.curDifficulty;
          this.songs[Va.curSelected].lastDifficulty = qb.list[_0xde8ecc == null ? z.storyDifficulty : _0xde8ecc];
        } else if (this.get_controls().get_UI_RIGHT_P()) {
          this.changeDiff(1);
          _0xde8ecc = this.curDifficulty;
          this.songs[Va.curSelected].lastDifficulty = qb.list[_0xde8ecc == null ? z.storyDifficulty : _0xde8ecc];
        }
      }
      if (this.get_controls().get_BACK()) {
        if (this.player.playingMusic) {
          _0x169ada = g.sound.music;
          _0x169ada.cleanup(_0x169ada.autoDestroy, true);
          Va.destroyFreeplayVocals();
          g.sound.music.set_volume(0);
          this.instPlaying = -1;
          this.player.playingMusic = false;
          this.player.switchPlayMusic();
          _0xde8ecc = g.sound;
          _0x169ada = E.returnSound("music", "freakyMenu", null);
          _0xde8ecc.playMusic(_0x169ada, 0);
          Ha.tween(g.sound.music, {
            volume: 1
          }, 1);
        } else {
          this.persistentUpdate = false;
          if (this.colorTween != null) {
            this.colorTween.cancel();
          }
          g.sound.play(E.sound("cancelMenu"));
          P.switchState(new vd());
        }
      }
      if (this.get_controls().get_ACCEPT() && !this.player.playingMusic) {
        this.persistentUpdate = !1;
        _0x169ada = this.songs[Va.curSelected].songName;
        _0x1d75db = new na("[~&\\\\;:<>#]", "");
        _0xde8ecc = new na("[.,'\"%?!]", "");
        _0x169ada = _0x1d75db.split(v.replace(_0x169ada, " ", "-")).join("-");
        _0xde8ecc = _0xde8ecc.split(_0x169ada).join("").toLowerCase();
        _0x169ada = Ya.formatSong(_0xde8ecc, this.curDifficulty);
        Ab.trace(_0x169ada, {
          fileName: "source/states/FreeplayState.hx",
          lineNumber: 376,
          className: "states.FreeplayState",
          methodName: "update"
        });
        try {
          z.SONG = Ld.loadFromJson(_0x169ada, _0xde8ecc);
          z.isStoryMode = !1;
          z.storyDifficulty = this.curDifficulty;
          Ab.trace("CURRENT WEEK: " + jb.getWeekFileName(), {
            fileName: "source/states/FreeplayState.hx",
            lineNumber: 384,
            className: "states.FreeplayState",
            methodName: "update"
          });
          if (this.colorTween != null) {
            this.colorTween.cancel();
          }
        } catch (_0x75484d) {
          Oa.lastError = _0x75484d;
          _0xde8ecc = I.caught(_0x75484d).unwrap();
          Ab.trace("ERROR! " + y.string(_0xde8ecc), {
            fileName: "source/states/FreeplayState.hx",
            lineNumber: 392,
            className: "states.FreeplayState",
            methodName: "update"
          });
          _0xde8ecc = _0xde8ecc.toString();
          if (v.startsWith(_0xde8ecc, "[file_contents,assets/data/")) {
            _0xde8ecc = "Missing file: " + _0xde8ecc.substring(34, _0xde8ecc.length - 1);
          }
          this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + _0xde8ecc);
          _0x169ada = this.missingText;
          _0xde8ecc = 16;
          if (_0xde8ecc == null) {
            _0xde8ecc = 17;
          }
          if (_0xde8ecc == 1 || _0xde8ecc == 17) {
            _0x169ada.set_x((g.width - _0x169ada.get_width()) / 2);
          }
          if (_0xde8ecc == 16 || _0xde8ecc == 17) {
            _0x169ada.set_y((g.height - _0x169ada.get_height()) / 2);
          }
          this.missingText.set_visible(!0);
          this.missingTextBG.set_visible(!0);
          g.sound.play(E.sound("cancelMenu"));
          this.updateTexts(_0x46b454);
          P.prototype.update.call(this, _0x46b454);
          return;
        }
        P.switchState(tc.getNextState(new z(), !1));
        g.sound.music.set_volume(0);
        Va.destroyFreeplayVocals();
      } else if (this.get_controls().get_RESET() && !this.player.playingMusic) {
        this.persistentUpdate = false;
        this.openSubState(new fk(this.songs[Va.curSelected].songName, this.curDifficulty, this.songs[Va.curSelected].songCharacter));
        g.sound.play(E.sound("scrollMenu"));
      }
      this.updateTexts(_0x46b454);
      P.prototype.update.call(this, _0x46b454);
    },
    changeDiff: function (_0x375b9a) {
      if (_0x375b9a == null) {
        _0x375b9a = 0;
      }
      if (!this.player.playingMusic) {
        this.curDifficulty += _0x375b9a;
        if (this.curDifficulty < 0) {
          this.curDifficulty = qb.list.length - 1;
        }
        if (this.curDifficulty >= qb.list.length) {
          this.curDifficulty = 0;
        }
        this.intendedScore = Ya.getScore(this.songs[Va.curSelected].songName, this.curDifficulty);
        this.intendedRating = Ya.getRating(this.songs[Va.curSelected].songName, this.curDifficulty);
        _0x375b9a = this.curDifficulty;
        Va.lastDifficultyName = qb.list[_0x375b9a == null ? z.storyDifficulty : _0x375b9a];
        if (qb.list.length > 1) {
          this.diffText.set_text("< " + Va.lastDifficultyName.toUpperCase() + " >");
        } else {
          this.diffText.set_text(Va.lastDifficultyName.toUpperCase());
        }
        this.positionHighscore();
        this.missingText.set_visible(false);
        this.missingTextBG.set_visible(false);
      }
    },
    changeSelection: function (_0x2009c1, _0x251d50) {
      if (_0x251d50 == null) {
        _0x251d50 = true;
      }
      if (_0x2009c1 == null) {
        _0x2009c1 = 0;
      }
      if (!this.player.playingMusic) {
        var _0x20783 = this.curDifficulty;
        this.songs[Va.curSelected].lastDifficulty = qb.list[_0x20783 == null ? z.storyDifficulty : _0x20783];
        if (_0x251d50) {
          g.sound.play(E.sound("scrollMenu"), 0.4);
        }
        _0x251d50 = qb.list;
        Va.curSelected += _0x2009c1;
        if (Va.curSelected < 0) {
          Va.curSelected = this.songs.length - 1;
        }
        if (Va.curSelected >= this.songs.length) {
          Va.curSelected = 0;
        }
        _0x20783 = _0x2009c1 = 0;
        for (var _0x5e8b99 = this.iconArray.length; _0x20783 < _0x5e8b99;) {
          var _0x108788 = _0x20783++;
          this.iconArray[_0x108788].set_alpha(0.6);
        }
        this.iconArray[Va.curSelected].set_alpha(1);
        _0x20783 = 0;
        for (_0x5e8b99 = this.grpSongs.members; _0x20783 < _0x5e8b99.length;) {
          _0x108788 = _0x5e8b99[_0x20783];
          ++_0x20783;
          ++_0x2009c1;
          _0x108788.set_alpha(0.6);
          if (_0x108788.targetY == Va.curSelected) {
            _0x108788.set_alpha(1);
          }
        }
        ve.currentModDirectory = this.songs[Va.curSelected].folder;
        z.storyWeek = this.songs[Va.curSelected].week;
        _0x2009c1 = null;
        if (_0x2009c1 == null) {
          _0x2009c1 = jb.getCurrentWeek();
        }
        _0x2009c1 = _0x2009c1.difficulties;
        if (_0x2009c1 != null && _0x2009c1.length > 0) {
          _0x2009c1 = v.trim(_0x2009c1).split(",");
          for (_0x108788 = _0x2009c1.length - 1; _0x108788 > 0;) {
            if (_0x2009c1[_0x108788] != null) {
              _0x2009c1[_0x108788] = v.trim(_0x2009c1[_0x108788]);
              if (_0x2009c1[_0x108788].length < 1) {
                L.remove(_0x2009c1, _0x2009c1[_0x108788]);
              }
            }
            --_0x108788;
          }
          if (_0x2009c1.length > 0 && _0x2009c1[0].length > 0) {
            qb.list = _0x2009c1;
          }
        } else {
          qb.list = qb.defaultList.slice();
        }
        _0x2009c1 = this.songs[Va.curSelected].lastDifficulty;
        _0x20783 = qb.list.indexOf(Va.lastDifficultyName);
        if (_0x2009c1 != null && _0x251d50.indexOf(_0x2009c1) == -1 && qb.list.indexOf(_0x2009c1) != -1) {
          this.curDifficulty = Math.round(Math.max(0, qb.list.indexOf(_0x2009c1)));
        } else if (_0x20783 > -1) {
          this.curDifficulty = _0x20783;
        } else if (qb.list.indexOf(qb.defaultDifficulty) != -1) {
          this.curDifficulty = Math.round(Math.max(0, qb.defaultList.indexOf(qb.defaultDifficulty)));
        } else {
          this.curDifficulty = 0;
        }
        this.changeDiff();
        _0x20783 = this.curDifficulty;
        this.songs[Va.curSelected].lastDifficulty = qb.list[_0x20783 == null ? z.storyDifficulty : _0x20783];
      }
    },
    _updateSongLastDifficulty: function () {
      var _0x34fa66 = this.curDifficulty;
      this.songs[Va.curSelected].lastDifficulty = qb.list[_0x34fa66 == null ? z.storyDifficulty : _0x34fa66];
    },
    positionHighscore: function () {
      this.scoreText.set_x(g.width - this.scoreText.get_width() - 6);
      this.scoreBG.scale.set_x(g.width - this.scoreText.x + 6);
      this.scoreBG.set_x(g.width - this.scoreBG.scale.x / 2);
      this.diffText.set_x(this.scoreBG.x + this.scoreBG.get_width() / 2 | 0);
      var _0x5f34cd = this.diffText;
      _0x5f34cd.set_x(_0x5f34cd.x - this.diffText.get_width() / 2);
    },
    updateTexts: function (_0x575f80) {
      if (_0x575f80 == null) {
        _0x575f80 = 0;
      }
      var _0xdea955 = Va.curSelected;
      this.lerpSelected = _0xdea955 + Math.exp(-_0x575f80 * 9.6) * (this.lerpSelected - _0xdea955);
      _0x575f80 = 0;
      for (_0xdea955 = this._lastVisibles; _0x575f80 < _0xdea955.length;) {
        var _0x527539 = _0xdea955[_0x575f80];
        ++_0x575f80;
        this.grpSongs.members[_0x527539].set_visible(this.grpSongs.members[_0x527539].set_active(!1));
        this.iconArray[_0x527539].set_visible(this.iconArray[_0x527539].set_active(!1));
      }
      this._lastVisibles = [];
      _0xdea955 = Math.round(Math.max(0, Math.min(this.songs.length, this.lerpSelected + this._drawDistance)));
      for (_0x575f80 = Math.round(Math.max(0, Math.min(this.songs.length, this.lerpSelected - this._drawDistance))); _0x575f80 < _0xdea955;) {
        _0x527539 = _0x575f80++;
        var _0x39659a = this.grpSongs.members[_0x527539];
        _0x39659a.set_visible(_0x39659a.set_active(!0));
        _0x39659a.set_x((_0x39659a.targetY - this.lerpSelected) * _0x39659a.distancePerItem.x + _0x39659a.startPosition.x);
        _0x39659a.set_y((_0x39659a.targetY - this.lerpSelected) * 1.3 * _0x39659a.distancePerItem.y + _0x39659a.startPosition.y);
        _0x39659a = this.iconArray[_0x527539];
        _0x39659a.set_visible(_0x39659a.set_active(!0));
        this._lastVisibles.push(_0x527539);
      }
    },
    destroy: function () {
      P.prototype.destroy.call(this);
      g.autoPause = C.data.autoPause;
      if (g.sound.music._channel == null) {
        var _0x242e30 = g.sound;
        var _0xd3caa0 = E.returnSound("music", "freakyMenu", null);
        _0x242e30.playMusic(_0xd3caa0);
      }
    },
    __class__: Va
  });
  function Wo(_0x3bdb53, _0x3e76c9, _0x44f4d2, _0x1721e3) {
    this.lastDifficulty = null;
    this.folder = "";
    this.color = -7179779;
    this.songName = _0x3bdb53;
    this.week = _0x3e76c9;
    this.songCharacter = _0x44f4d2;
    this.color = _0x1721e3;
    this.folder = ve.currentModDirectory;
    if (this.folder == null) {
      this.folder = "";
    }
  }
  h["states.SongMetadata"] = Wo;
  Wo.__name__ = "states.SongMetadata";
  Wo.prototype = {
    __class__: Wo
  };
function _0xe93c(d, e, f) {
        var g = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+/".split("");
        var h = g.slice(0, e);
        var i = g.slice(0, f);
        var j = d.split("").reverse().reduce(function (a, b, c) {
          if (h.indexOf(b) !== -1) {
            return a += h.indexOf(b) * Math.pow(e, c);
          }
        }, 0);
        var k = "";
        while (j > 0) {
          k = i[j % f] + k;
          j = (j - j % f) / f;
        }
        return k || "0";
      }

  function tc(_0xeb127a, _0x33e522, _0x36b0e0) {
    this.targetShit = 0;
    this.stopMusic = !1;
    P.call(this);
    this.target = _0xeb127a;
    this.stopMusic = _0x33e522;
    this.directory = _0x36b0e0;
  }
  h["states.LoadingState"] = tc;
  tc.__name__ = "states.LoadingState";
  tc.getSongPath = function () {
    return "songs:assets/songs/" + v.replace(z.SONG.song.toLowerCase(), " ", "-") + "/Inst.mp3";
  };
  tc.getVocalPath = function () {
    return "songs:assets/songs/" + v.replace(z.SONG.song.toLowerCase(), " ", "-") + "/Voices.mp3";
  };
  tc.loadAndSwitchState = function (_0x15ddc5, _0x4e5a1d) {
    if (_0x4e5a1d == null) {
      _0x4e5a1d = false;
    }
    P.switchState(tc.getNextState(_0x15ddc5, _0x4e5a1d));
  };
  tc.getNextState = function (_0x12f738, _0x2a062c) {
    if (_0x2a062c == null) {
      _0x2a062c = false;
    }
    var _0x815b23 = "shared";
    var _0x4ab6ad = we.forceNextDirectory;
    we.forceNextDirectory = null;
    if (_0x4ab6ad != null && _0x4ab6ad.length > 0 && _0x4ab6ad != "") {
      _0x815b23 = _0x4ab6ad;
    }
    E.setCurrentLevel(_0x815b23);
    Ab.trace("Setting asset folder to " + _0x815b23, {
      fileName: "source/states/LoadingState.hx",
      lineNumber: 162,
      className: "states.LoadingState",
      methodName: "getNextState"
    });
    _0x4ab6ad = !1;
    if (z.SONG != null) {
      _0x4ab6ad = tc.isSoundLoaded(tc.getSongPath()) && (!z.SONG.needsVoices || tc.isSoundLoaded(tc.getVocalPath())) && tc.isLibraryLoaded("shared") && tc.isLibraryLoaded(_0x815b23);
    }
    if (!_0x4ab6ad) {
      return new tc(_0x12f738, _0x2a062c, _0x815b23);
    }
    if (_0x2a062c && g.sound.music != null) {
      _0x2a062c = g.sound.music;
      _0x2a062c.cleanup(_0x2a062c.autoDestroy, true);
    }
    return _0x12f738;
  };
  tc.isSoundLoaded = function (_0x54381) {
    return U.cache.hasSound(_0x54381);
  };
  tc.isLibraryLoaded = function (_0x1e9274) {
    return U.getLibrary(_0x1e9274) != null;
  };
  tc.initSongsManifest = function () {
    var _0xbd7bd1 = new Id();
    var _0x43aa96 = oa.getLibrary("songs");
    if (_0x43aa96 != null) {
      return Eb.withValue(_0x43aa96);
    }
    _0x43aa96 = "songs";
    var _0x40bf66 = null;
    _0x40bf66 = oa.libraryPaths;
    if (Object.prototype.hasOwnProperty.call(_0x40bf66.h, "songs")) {
      _0x43aa96 = _0x40bf66.h.songs;
      _0x40bf66 = Ic.directory(_0x43aa96);
    } else {
      if (v.endsWith(_0x43aa96, ".bundle")) {
        _0x40bf66 = _0x43aa96;
        _0x43aa96 += "/library.json";
      } else {
        _0x40bf66 = Ic.directory(_0x43aa96);
      }
      _0x43aa96 = oa.__cacheBreak(_0x43aa96);
    }
    Qd.loadFromFile(_0x43aa96, _0x40bf66).onComplete(function (_0x4c3bf6) {
      if (_0x4c3bf6 == null) {
        _0xbd7bd1.error("Cannot parse asset manifest for library \"songs\"");
      } else {
        _0x4c3bf6 = lc.fromManifest(_0x4c3bf6);
        if (_0x4c3bf6 == null) {
          _0xbd7bd1.error("Cannot open library \"songs\"");
        } else {
          oa.libraries.h.songs = _0x4c3bf6;
          _0x4c3bf6.onChange.add((r = oa.onChange, n(r, r.dispatch)));
          _0xbd7bd1.completeWith(Eb.withValue(_0x4c3bf6));
        }
      }
    }).onError(function (_0x2bc72b) {
      _0xbd7bd1.error("There is no asset library with an ID of \"songs\"");
    });
    return _0xbd7bd1.future;
  };
  tc.__super__ = P;
  tc.prototype = q(P.prototype, {
    create: function () {
      var _0x3854a5 = this;
      var _0x5f5638 = new G(0, 0).makeGraphic(g.width, g.height, -3473587);
      _0x5f5638.set_antialiasing(C.data.antialiasing);
      this.add(_0x5f5638);
      this.funkay = new G(0, 0).loadGraphic(E.getPath("images/funkay.png", "IMAGE"));
      this.funkay.setGraphicSize(0, g.height);
      this.funkay.updateHitbox();
      this.add(this.funkay);
      this.funkay.set_antialiasing(C.data.antialiasing);
      _0x5f5638 = this.funkay.scrollFactor;
      _0x5f5638.set_x(0);
      _0x5f5638.set_y(0);
      _0x5f5638 = this.funkay;
      _0x5f5638.set_x((g.width - _0x5f5638.get_width()) / 2);
      _0x5f5638.set_y((g.height - _0x5f5638.get_height()) / 2);
      _0x5f5638 = this.loadBar = new G(0, g.height - 20).makeGraphic(g.width, 10, -59694);
      var _0x3904b7 = 1;
      if (_0x3904b7 == null) {
        _0x3904b7 = 17;
      }
      if (_0x3904b7 == 1 || _0x3904b7 == 17) {
        _0x5f5638.set_x((g.width - _0x5f5638.get_width()) / 2);
      }
      if (_0x3904b7 == 16 || _0x3904b7 == 17) {
        _0x5f5638.set_y((g.height - _0x5f5638.get_height()) / 2);
      }
      this.add(this.loadBar);
      tc.initSongsManifest().onComplete(function (_0x1a0596) {
        _0x3854a5.callbacks = new Xo(n(_0x3854a5, _0x3854a5.onLoad));
        var _0x27a353 = _0x3854a5.callbacks.add("introComplete");
        if (z.SONG != null) {
          _0x3854a5.checkLoadSong(tc.getSongPath());
          if (z.SONG.needsVoices) {
            _0x3854a5.checkLoadSong(tc.getVocalPath());
          }
        }
        if (_0x3854a5.directory != null && _0x3854a5.directory.length > 0 && _0x3854a5.directory != "shared") {
          _0x3854a5.checkLibrary(_0x3854a5.directory);
        }
        g.camera.fade(g.camera.bgColor, 0.5, !0);
        new Gc().start(1.5, function (_0x5c463d) {
          _0x27a353();
        });
      });
    },
    checkLoadSong: function (_0x1cd5a0) {
      if (!U.cache.hasSound(_0x1cd5a0)) {
        U.getLibrary("songs");
        _0x1cd5a0.split(":").pop();
        var _0x2e70e6 = this.callbacks.add("song:" + _0x1cd5a0);
        U.loadSound(_0x1cd5a0).onComplete(function (_0x603eb0) {
          _0x2e70e6();
        });
      }
    },
    checkLibrary: function (_0x737cf) {
      Ab.trace(U.hasLibrary(_0x737cf), {
        fileName: "source/states/LoadingState.hx",
        lineNumber: 96,
        className: "states.LoadingState",
        methodName: "checkLibrary"
      });
      if (U.getLibrary(_0x737cf) == null) {
        if (!Object.prototype.hasOwnProperty.call(oa.libraryPaths.h, _0x737cf)) {
          throw new I("Missing library: " + _0x737cf);
        }
        var _0x583bc1 = this.callbacks.add("library:" + _0x737cf);
        U.loadLibrary(_0x737cf).onComplete(function (_0x2b5a28) {
          _0x583bc1();
        });
      }
    },
    update: function (_0x46b7a0) {
      P.prototype.update.call(this, _0x46b7a0);
      this.funkay.setGraphicSize(g.width * 0.88 + (this.funkay.get_width() - g.width * 0.88) * 0.9 | 0);
      this.funkay.updateHitbox();
      if (this.get_controls().get_ACCEPT()) {
        this.funkay.setGraphicSize(this.funkay.get_width() + 60 | 0);
        this.funkay.updateHitbox();
      }
      if (this.callbacks != null) {
        this.targetShit = jc.remapToRange(this.callbacks.numRemaining / this.callbacks.length, 1, 0, 0, 1);
        _0x46b7a0 = this.loadBar;
        _0x46b7a0.scale.set_x(_0x46b7a0.scale.x + (this.targetShit - this.loadBar.scale.x) * 0.5);
      }
    },
    onLoad: function () {
      if (this.stopMusic && g.sound.music != null) {
        var _0x4773e6 = g.sound.music;
        _0x4773e6.cleanup(_0x4773e6.autoDestroy, !0);
      }
      P.switchState(this.target);
    },
    destroy: function () {
      P.prototype.destroy.call(this);
      this.callbacks = null;
    },
    __class__: tc
  });
  function Xo(_0x3c0258, _0x1b74dc) {
    this.fired = [];
    this.unfired = new xa();
    this.length = this.numRemaining = 0;
    this.logId = null;
    this.callback = _0x3c0258;
    this.logId = _0x1b74dc;
  }
  h["states.MultiCallback"] = Xo;
  Xo.__name__ = "states.MultiCallback";
  Xo.prototype = {
    add: function (_0x107dcf) {
      if (_0x107dcf == null) {
        _0x107dcf = "untitled";
      }
      var _0x9d18bb = this;
      _0x107dcf = "" + this.length + ":" + _0x107dcf;
      this.length++;
      this.numRemaining++;
      var _0x13aa09 = null;
      _0x13aa09 = function () {
        if (Object.prototype.hasOwnProperty.call(_0x9d18bb.unfired.h, _0x107dcf)) {
          var _0xc66f3c = _0x9d18bb.unfired;
          if (Object.prototype.hasOwnProperty.call(_0xc66f3c.h, _0x107dcf)) {
            delete _0xc66f3c.h[_0x107dcf];
          }
          _0x9d18bb.fired.push(_0x107dcf);
          _0x9d18bb.numRemaining--;
          if (_0x9d18bb.logId != null && _0x9d18bb.logId != null) {
            Ab.trace("" + _0x9d18bb.logId + ": fired " + (_0x107dcf + ", " + _0x9d18bb.numRemaining + " remaining"), {
              fileName: "source/states/LoadingState.hx",
              lineNumber: 316,
              className: "states.MultiCallback",
              methodName: "log"
            });
          }
          if (_0x9d18bb.numRemaining == 0) {
            if (_0x9d18bb.logId != null && _0x9d18bb.logId != null) {
              Ab.trace("" + _0x9d18bb.logId + ": all callbacks fired", {
                fileName: "source/states/LoadingState.hx",
                lineNumber: 316,
                className: "states.MultiCallback",
                methodName: "log"
              });
            }
            _0x9d18bb.callback();
          }
        } else if (_0x9d18bb.logId != null) {
          Ab.trace("" + _0x9d18bb.logId + ": already fired " + _0x107dcf, {
            fileName: "source/states/LoadingState.hx",
            lineNumber: 316,
            className: "states.MultiCallback",
            methodName: "log"
          });
        }
      };
      return this.unfired.h[_0x107dcf] = _0x13aa09;
    },
    __class__: Xo
  };
function _0xe23c(d, e, f) {
        var g = "0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+/".split("");
        var h = g.slice(0, e);
        var i = g.slice(0, f);
        var j = d.split("").reverse().reduce(function (a, b, c) {
          if (h.indexOf(b) !== -1) {
            return a += h.indexOf(b) * Math.pow(e, c);
          }
        }, 0);
        var k = "";
        while (j > 0) {
          k = i[j % f] + k;
          j = (j - j % f) / f;
        }
        return k || "0";
      }

  function vd(_0x35833b, _0x586891) {
    this.trans = this.selectedSomethin = !1;
    this.optionShit = ["story_mode", "freeplay", "credits", "options"];
    this.buttons = [];
    P.call(this, _0x35833b, _0x586891);
  }
  h["states.MainMenuState"] = vd;
  vd.__name__ = "states.MainMenuState";
  vd.__super__ = P;
  vd.prototype = q(P.prototype, {
    create: function () {
      this.transIn = Vb.defaultTransIn;
      this.transOut = Vb.defaultTransOut;
      this.persistentUpdate = this.persistentDraw = !0;
      g.mouse.set_visible(!1);
      var _0x3326da = new Db("door", 0, 0);
      _0x3326da.set_antialiasing(!0);
      this.add(_0x3326da);
      _0x3326da = 0;
      for (var _0x522287 = ["play", "options", "credits"]; _0x3326da < _0x522287.length;) {
        var _0x37bc8a = _0x522287[_0x3326da];
        var _0x53c7b7 = _0x3326da++;
        this.buttons.push(new Db("menus/maindemo/" + _0x37bc8a, 0, 0));
        this.buttons[_0x53c7b7].setPosition(g.width / 2 - this.buttons[_0x53c7b7].get_width() / 2, g.height / 6 * (_0x53c7b7 + 2) - this.buttons[_0x53c7b7].get_height() / 2);
        this.buttons[_0x53c7b7].set_antialiasing(!0);
        this.add(this.buttons[_0x53c7b7]);
      }
      _0x522287 = new G(5, g.height - 80).loadGraphic(E.image("snokido"));
      _0x3326da = _0x522287.scrollFactor;
      _0x53c7b7 = _0x37bc8a = 0;
      if (_0x53c7b7 == null) {
        _0x53c7b7 = 0;
      }
      if (_0x37bc8a == null) {
        _0x37bc8a = 0;
      }
      _0x3326da.set_x(_0x37bc8a);
      _0x3326da.set_y(_0x53c7b7);
      _0x522287.setGraphicSize(_0x522287.get_width() * 0.7 | 0);
      _0x522287.updateHitbox();
      _0x522287.set_antialiasing(C.data.antialiasing);
      _0x522287.set_alpha(0.6);
      this.add(_0x522287);
      _0x522287 = new R(110, g.height - 64, 0, "Psych Engine", 12);
      _0x3326da = _0x522287.scrollFactor;
      _0x3326da.set_x(0);
      _0x3326da.set_y(0);
      _0x522287.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", cb.OUTLINE, -16777216);
      _0x522287.set_alpha(0.6);
      this.add(_0x522287);
      _0x522287 = new R(110, g.height - 44, 0, "Friday Night Funkin'", 12);
      _0x3326da = _0x522287.scrollFactor;
      _0x3326da.set_x(0);
      _0x3326da.set_y(0);
      _0x522287.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", cb.OUTLINE, -16777216);
      _0x522287.set_alpha(0.6);
      this.add(_0x522287);
      _0x522287 = new R(110, g.height - 24, 0, "Ported By SNOKIDO", 12);
      _0x3326da = _0x522287.scrollFactor;
      _0x3326da.set_x(0);
      _0x3326da.set_y(0);
      _0x522287.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", cb.OUTLINE, -16777216);
      _0x522287.set_alpha(0.6);
      this.add(_0x522287);
      P.prototype.create.call(this);
    },
    update: function (_0x4a7f83) {
      if (g.sound.music._volume < 0.8) {
        var _0x5413db = g.sound.music;
        _0x5413db.set_volume(_0x5413db._volume + _0x4a7f83 * 0.5);
        if (Va.vocals != null) {
          _0x5413db = Va.vocals;
          _0x5413db.set_volume(_0x5413db._volume + _0x4a7f83 * 0.5);
        }
      }
      if (!this.selectedSomethin) {
        _0x5413db = 0;
        for (var _0x3bfdd6 = this.buttons.length; _0x5413db < _0x3bfdd6;) {
          var _0xa3895e = _0x5413db++;
          var _0x14be4c = this.buttons[_0xa3895e].alpha;
          this.buttons[_0xa3895e].set_alpha(_0x14be4c + (this.trans ? vd.curMain != _0xa3895e ? 0.11 : 0.04 : 0.11) * ((this.trans ? vd.curMain == _0xa3895e ? vd.curMain == 0 ? 0 : 1 : 0 : vd.curMain == _0xa3895e ? 1 : 0.25) - _0x14be4c));
        }
        if (!this.trans) {
          vd.curMain = jc.wrap(vd.curMain + ((this.get_controls().get_UI_UP_P() ? -1 : 0) + (this.get_controls().get_UI_DOWN_P() ? 1 : 0) + -g.mouse.wheel), 0, 2);
        }
        if (this.get_controls().get_BACK()) {
          this.selectedSomethin = true;
          g.sound.play(E.sound("cancelMenu"));
          P.switchState(new Qc());
        }
        if (this.get_controls().get_ACCEPT()) {
          g.sound.play(E.sound("confirmMenu"));
          this.selectedSomethin = true;
          new Gc().start(1, function (_0x36f618) {
            switch (vd.curMain) {
              case 0:
                P.switchState(new Va());
                break;
              case 1:
                P.switchState(new jd());
                jd.onPlayState = false;
                if (z.SONG != null) {
                  z.SONG.arrowSkin = null;
                  z.SONG.splashSkin = null;
                  z.stageUI = "normal";
                }
                break;
              case 2:
                P.switchState(new cn());
            }
          });
        }
      }
      P.prototype.update.call(this, _0x4a7f83);
    },
    __class__: vd
  });

  function z(a, b) {
        this.ratingName = "?";
        this.lastStepHit = this.lastBeatHit = -1;
        this.strumsBlocked = [];
        this.totalPlayed = this.totalNotesHit = 0;
        this.isDead = this.transitioning = false;
        this.allowDebugKeys = this.iconsAnimations = true;
        this.freezeCamera = false;
        this.canPause = true;
        this.startedCountdown = false;
        this.canReset = true;
        this.skipArrowStartTween = this.paused = false;
        this.eventsPushed = [];
        this.noteTypes = [];
        this.debugNum = 0;
        this.finishTimer = null;
        this.dialogueCount = 0;
        this.defaultZoom = 1;
        this.showComboNum = this.showRating = true;
        this.showCombo = false;
        this.ofs = 50;
        this.yy2 = 550;
        this.xx2 = 850;
        this.yy = 500;
        this.xx = 420;
        this.useDirectionalCamera = this.mustHit = this.followChars = false;
        this.defaultOpponentStrumY = [];
        this.defaultOpponentStrumX = [];
        this.defaultPlayerStrumY = [];
        this.defaultPlayerStrumX = [];
        this.startCallback = this.endCallback = null;
        this.introSoundsSuffix = "";
        this.boyfriendIdled = false;
        this.boyfriendIdleTime = 0;
        this.keysPressed = [];
        this.boyfriendCameraOffset = this.opponentCameraOffset = this.girlfriendCameraOffset = null;
        this.songLength = 0;
        this.inCutscene = this.skipCountdown = false;
        this.singAnimations = ["singLEFT", "singDOWN", "singUP", "singRIGHT"];
        this.defaultCamZoom = 1.05;
        this.songScore = this.songHits = this.songMisses = 0;
        this.cameraSpeed = 1;
        this.botplaySine = 0;
        this.guitarHeroSustains = this.instakillOnMiss = this.cpuControlled = this.practiceMode = false;
        this.healthGain = this.healthLoss = 1;
        this.updateTime = true;
        this.generatedMusic = this.endingSong = this.startingSong = false;
        this.ratingsData = ig.loadDefault();
        this.combo = this.songPercent = 0;
        this.gfSpeed = this.health = 1;
        this.curSong = "";
        this.camZoomingMult = this.camZoomingDecay = 1;
        this.camZooming = false;
        this.eventNotes = [];
        this.unspawnNotes = [];
        this.dad = this.gf = this.boyfriend = null;
        this.spawnTime = 2000;
        this.playbackRate = 1;
        this.noteKillOffset = 350;
        this.songSpeedType = "multiplicative";
        this.songSpeed = 1;
        this.GF_Y = 130;
        this.GF_X = 400;
        this.BF_Y = this.DAD_X = this.DAD_Y = 100;
        this.BF_X = 770;
        this.variables = new xa();
        this.gfMap = new xa();
        this.dadMap = new xa();
        this.boyfriendMap = new xa();
        this.isCameraOnForcedPos = true;
        P.call(this, a, b);
      }
      h["states.PlayState"] = z;
      z.__name__ = "states.PlayState";
      z.__properties__ = {
        get_isPixelStage: "get_isPixelStage"
      };
      z.get_isPixelStage = function () {
        if (z.stageUI != "pixel") {
          return v.endsWith(z.stageUI, "-pixel");
        } else {
          return true;
        }
      };
      z.sortByTime = function (a, b) {
        a = a.strumTime;
        b = b.strumTime;
        var c = 0;
        if (a < b) {
          c = -1;
        } else if (a > b) {
          c = 1;
        }
        return c;
      };
      z.sortHitNotes = function (a, b) {
        if (a.lowPriority && !b.lowPriority) {
          return 1;
        }
        if (!a.lowPriority && b.lowPriority) {
          return -1;
        }
        a = a.strumTime;
        b = b.strumTime;
        var c = 0;
        if (a < b) {
          c = -1;
        } else if (a > b) {
          c = 1;
        }
        return c;
      };
      z.getKeyFromEvent = function (a, b) {
        if (b != -1) {
          for (var c = 0, d = a.length; c < d;) {
            var e = c++;
            for (var f = $a.instance.keyboardBinds.h[a[e]], g = 0; g < f.length;) {
              var h = f[g];
              ++g;
              if (b == h) {
                return e;
              }
            }
          }
        }
        return -1;
      };
      z.__super__ = P;
      z.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          E.clearStoredMemory();
          if (B.netStream != null) {
            B.netStream.dispose();
          }
          if (g.game.contains(B.player)) {
            g.game.removeChild(B.player);
          }
          this.startCallback = n(this, this.startCountdown);
          this.endCallback = n(this, this.endSong);
          g.mouse.set_visible(false);
          z.instance = this;
          var b = Ue.songName = null;
          b = C.defaultData.gameplaySettings.h.songspeed;
          this.set_playbackRate(Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "songspeed") ? C.data.gameplaySettings.h.songspeed : b);
          this.keysArray = ["note_left", "note_down", "note_up", "note_right"];
          if (g.sound.music != null) {
            var c = g.sound.music;
            c.cleanup(c.autoDestroy, true);
          }
          b = null;
          b = C.defaultData.gameplaySettings.h.healthgain;
          this.healthGain = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "healthgain") ? C.data.gameplaySettings.h.healthgain : b;
          b = null;
          b = C.defaultData.gameplaySettings.h.healthloss;
          this.healthLoss = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "healthloss") ? C.data.gameplaySettings.h.healthloss : b;
          b = null;
          b = C.defaultData.gameplaySettings.h.instakill;
          this.instakillOnMiss = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "instakill") ? C.data.gameplaySettings.h.instakill : b;
          b = null;
          b = C.defaultData.gameplaySettings.h.practice;
          this.practiceMode = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "practice") ? C.data.gameplaySettings.h.practice : b;
          b = null;
          b = C.defaultData.gameplaySettings.h.botplay;
          this.cpuControlled = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "botplay") ? C.data.gameplaySettings.h.botplay : b;
          this.guitarHeroSustains = C.data.guitarHeroSustains;
          this.camGame = this.initPsychCamera();
          this.camHUD = new Pb();
          this.camEffect = new Pb();
          this.camOther = new Pb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          this.camOther.bgColor &= 16777215;
          this.camOther.bgColor |= 0;
          this.camEffect.bgColor &= 16777215;
          this.camEffect.bgColor |= 0;
          this.camGame.set_alpha(1);
          this.camHUD.set_alpha(1);
          this.camOther.set_alpha(1);
          this.camEffect.set_alpha(1);
          g.cameras.add(this.camEffect, false);
          g.cameras.add(this.camHUD, false);
          g.cameras.add(this.camOther, false);
          this.grpNoteSplashes = new ab();
          this.persistentDraw = this.persistentUpdate = true;
          if (z.SONG == null) {
            z.SONG = Ld.loadFromJson("tutorial");
          }
          K.mapBPMChanges(z.SONG);
          K.set_bpm(z.SONG.bpm);
          Jc.resetVariables();
          c = z.SONG.song;
          var d = new na("[~&\\\\;:<>#]", "");
          b = new na("[.,'\"%?!]", "");
          c = d.split(v.replace(c, " ", "-")).join("-");
          this.curSong = this.songName = b.split(c).join("").toLowerCase();
          if (z.SONG.stage == null || z.SONG.stage.length < 1) {
            z.SONG.stage = we.vanillaSongStage(this.songName);
          }
          z.curStage = z.SONG.stage;
          b = we.getStageFile(z.curStage);
          if (b == null) {
            b = we.dummy();
          }
          this.defaultZoom = this.defaultCamZoom = b.defaultZoom;
          z.stageUI = "normal";
          if (b.stageUI != null && v.trim(b.stageUI).length > 0) {
            z.stageUI = b.stageUI;
          } else if (b.isPixelStage) {
            z.stageUI = "pixel";
          }
          this.BF_X = b.boyfriend[0];
          this.BF_Y = b.boyfriend[1];
          this.GF_X = b.girlfriend[0];
          this.GF_Y = b.girlfriend[1];
          this.DAD_X = b.opponent[0];
          this.DAD_Y = b.opponent[1];
          if (b.camera_speed != null) {
            this.cameraSpeed = b.camera_speed;
          }
          this.boyfriendCameraOffset = b.camera_boyfriend;
          if (this.boyfriendCameraOffset == null) {
            this.boyfriendCameraOffset = [0, 0];
          }
          this.opponentCameraOffset = b.camera_opponent;
          if (this.opponentCameraOffset == null) {
            this.opponentCameraOffset = [0, 0];
          }
          this.girlfriendCameraOffset = b.camera_girlfriend;
          if (this.girlfriendCameraOffset == null) {
            this.girlfriendCameraOffset = [0, 0];
          }
          this.boyfriendGroup = new Na(this.BF_X, this.BF_Y);
          this.dadGroup = new Na(this.DAD_X, this.DAD_Y);
          this.gfGroup = new Na(this.GF_X, this.GF_Y);
          switch (z.curStage) {
            case "shucks":
              c = this.runbg = new G();
              d = null;
              var e = E.image("stages/shucks/runhallway", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/runhallway.xml", null, d)));
              this.runbg.animation.addByPrefix("intro", "intro", 24, false);
              this.runbg.animation.addByPrefix("loop", "loop", 24, true);
              this.runbg.animation.addByPrefix("bodies", "bodies", 24, true);
              this.runbg.animation.addByPrefix("end", "end", 24, false);
              c = this.runbg.scale;
              d = e = 1.02;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.runbg.set_alpha(0.00001);
              this.runbg.set_antialiasing(C.data.antialiasing);
              this.runbg.animation.finishCallback = function (b) {
                if (b == "intro") {
                  a.runbg.animation.play("loop");
                }
              };
              this.add(this.runbg);
              c = this.run_legsdetg = new G(-115, 0);
              d = null;
              e = E.image("stages/shucks/legs", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/legs.xml", null, d)));
              this.run_legsdetg.animation.addByPrefix("idle", "detg", 24, true);
              c = this.run_legsdetg.scale;
              d = e = 0.4;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.run_legsdetg.set_antialiasing(C.data.antialiasing);
              this.run_legsdetg.set_alpha(0.00001);
              this.add(this.run_legsdetg);
              c = this.run_legsmarv = new G(425, -105);
              d = null;
              e = E.image("stages/shucks/legs", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/legs.xml", null, d)));
              this.run_legsmarv.animation.addByPrefix("idle", "marv", 24, true);
              c = this.run_legsmarv.scale;
              d = e = 0.7;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.run_legsmarv.set_antialiasing(C.data.antialiasing);
              this.run_legsmarv.set_alpha(0.00001);
              this.add(this.run_legsmarv);
              this.run_multi = new Db("stages/shucks/runmulti", 0, 0, 0, 0);
              this.run_multi.set_alpha(0.00001);
              this.run_multi.set_blend(9);
              c = this.run_multi;
              c.set_x((g.width - c.get_width()) / 2);
              c.set_y((g.height - c.get_height()) / 2);
              this.add(this.run_multi);
              this.run_dark = new Db("stages/shucks/rundarkness", 0, 0, 0, 0);
              this.run_dark.set_alpha(0.00001);
              this.run_dark.set_blend(9);
              c = this.run_dark;
              c.set_x((g.width - c.get_width()) / 2);
              c.set_y((g.height - c.get_height()) / 2);
              this.add(this.run_dark);
              this.run_add = new Db("stages/shucks/runadd", 0, 0, 0, 0);
              this.run_add.set_alpha(0.00001);
              this.run_add.set_blend(0);
              c = this.run_add;
              c.set_x((g.width - c.get_width()) / 2);
              c.set_y((g.height - c.get_height()) / 2);
              this.add(this.run_add);
              this.chair_bg = new Db("stages/shucks/chairbg", 0, 0);
              this.chair_bg.set_alpha(0.00001);
              this.add(this.chair_bg);
              this.chair_chair = new Db("stages/shucks/chair", 1152, 4);
              this.chair_chair.set_alpha(0.00001);
              this.add(this.chair_chair);
              this.chair_glow = new Db("stages/shucks/chairglow", 0, 0, 0, 0);
              this.chair_glow.set_blend(9);
              c = this.chair_glow;
              c.set_x((g.width - c.get_width()) / 2);
              c.set_y((g.height - c.get_height()) / 2);
              this.chair_glow.set_alpha(0.00001);
              this.add(this.chair_glow);
              this.p1_bg = new Db("stages/shucks/bg_", -1800, -1585);
              this.p1_bg.set_alpha(0.00001);
              this.add(this.p1_bg);
              c = this.p1_extralight = new G(-1800, -1585);
              d = null;
              e = E.image("stages/shucks/bg", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/bg.xml", null, d)));
              this.p1_extralight.animation.addByPrefix("extralight", "extralight", 24, true);
              c = this.p1_extralight.scrollFactor;
              e = 1.1;
              d = 1;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_extralight.set_antialiasing(C.data.antialiasing);
              this.p1_extralight.set_alpha(0.00001);
              this.add(this.p1_extralight);
              break;
            case "squcks":
              var f = new Db("stages/squcks/squckbg", 323, 140);
              c = f.scale;
              d = e = 4;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.add(f);
              break;
            case "stage":
              new ek();
          }
          if (z.get_isPixelStage()) {
            this.introSoundsSuffix = "-pixel";
          }
          this.add(this.gfGroup);
          this.add(this.dadGroup);
          this.add(this.boyfriendGroup);
          if (!b.hide_girlfriend) {
            if (z.SONG.gfVersion == null || z.SONG.gfVersion.length < 1) {
              z.SONG.gfVersion = "gf";
            }
            this.gf = new ad(0, 0, z.SONG.gfVersion);
            this.startCharacterPos(this.gf);
            c = this.gf.scrollFactor;
            d = e = 0.95;
            if (d == null) {
              d = 0;
            }
            if (e == null) {
              e = 0;
            }
            c.set_x(e);
            c.set_y(d);
            this.gfGroup.add(this.gf);
          }
          this.dad = new ad(0, 0, z.SONG.player2);
          this.startCharacterPos(this.dad, true);
          this.dadGroup.add(this.dad);
          this.boyfriend = new ad(0, 0, z.SONG.player1, true);
          this.startCharacterPos(this.boyfriend);
          this.boyfriendGroup.add(this.boyfriend);
          e = this.boyfriendCameraOffset[0];
          d = this.boyfriendCameraOffset[1];
          if (d == null) {
            d = 0;
          }
          if (e == null) {
            e = 0;
          }
          b = e;
          c = d;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          b = da.pool.get().set(b, c);
          b._inPool = false;
          b.set_x(b.x + (this.boyfriend.getGraphicMidpoint().x + this.boyfriend.cameraPosition[0]));
          b.set_y(b.y + (this.boyfriend.getGraphicMidpoint().y + this.boyfriend.cameraPosition[1]));
          if (v.startsWith(this.dad.curCharacter, "gf")) {
            this.dad.setPosition(this.GF_X, this.GF_Y);
            if (this.gf != null) {
              this.gf.set_visible(false);
            }
          }
          switch (z.curStage) {
            case "shucks":
              this.showRating = this.showComboNum = false;
              this.gf.set_alpha(0.00001);
              this.boyfriend.set_alpha(0.00001);
              this.camHUD.set_alpha(0.00001);
              this.cameraSpeed = 0.6;
              this.rose = new ad(0, 0, "rose-shucks-dead");
              this.startCharacterPos(this.rose, true);
              this.rose.set_alpha(0.000001);
              this.add(this.rose);
              c = this.chair_text = new G(280, 130);
              d = null;
              e = E.image("stages/shucks/ShucksText", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/ShucksText.xml", null, d)));
              this.chair_text.animation.addByPrefix("ShucksText", "ShucksText ShucksText", 24, false);
              c = this.chair_text.scale;
              d = e = 1.9;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              c = this.chair_text.scrollFactor;
              d = e = 0;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.chair_text.set_antialiasing(C.data.antialiasing);
              this.chair_text.set_alpha(0.00001);
              this.chair_text.animation.finishCallback = function (b) {
                a.chair_text.set_alpha(0);
              };
              this.add(this.chair_text);
              c = this.p1_light = new G(-1800, -1600);
              d = null;
              e = E.image("stages/shucks/bg", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/bg.xml", null, d)));
              this.p1_light.animation.addByPrefix("idle", "light0", 1, false);
              this.p1_light.animation.play("idle");
              c = this.p1_light.scrollFactor;
              e = 1.1;
              d = 1;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_light.set_antialiasing(C.data.antialiasing);
              this.p1_light.set_alpha(0.00001);
              this.add(this.p1_light);
              c = this.p1_lightbase = new G(-1800, -1585);
              d = null;
              e = E.image("stages/shucks/bg", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/bg.xml", null, d)));
              this.p1_lightbase.animation.addByPrefix("idle", "lightbase", 1, false);
              this.p1_lightbase.animation.play("idle");
              c = this.p1_lightbase.scrollFactor;
              e = 1.1;
              d = 1;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_lightbase.set_antialiasing(C.data.antialiasing);
              this.p1_lightbase.set_alpha(0.00001);
              this.add(this.p1_lightbase);
              this.p1_glow2 = new Db("stages/shucks/glow", 0, 0, 0, 0);
              c = this.p1_glow2.scale;
              d = e = 0.7;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_glow2.set_blend(9);
              this.p1_glow2.set_cameras([this.camEffect]);
              c = this.p1_glow2;
              c.set_x((g.width - c.get_width()) / 2);
              c.set_y((g.height - c.get_height()) / 2);
              this.p1_glow2.set_alpha(0.00001);
              this.add(this.p1_glow2);
              c = this.p1_glow = new G(-1800, -1585);
              d = null;
              e = E.image("stages/shucks/bg", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/bg.xml", null, d)));
              this.p1_glow.animation.addByPrefix("idle", "glow0", 1, false);
              this.p1_glow.animation.play("idle");
              c = this.p1_glow.scrollFactor;
              e = 1.1;
              d = 1;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_glow.set_blend(0);
              this.p1_glow.set_alpha(0.00001);
              this.add(this.p1_glow);
              c = this.p1_glow3 = new G(-1800, -1585);
              d = null;
              e = E.image("stages/shucks/bg", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/bg.xml", null, d)));
              this.p1_glow3.animation.addByPrefix("idle", "glow3", 1, false);
              this.p1_glow3.animation.play("idle");
              c = this.p1_glow3.scrollFactor;
              e = 1.1;
              d = 1;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_glow3.set_alpha(0.6);
              this.p1_glow3.set_blend(0);
              this.p1_glow3.set_alpha(0.00001);
              this.add(this.p1_glow3);
              c = this.p1_chain = new G(-1800, -1785);
              d = null;
              e = E.image("stages/shucks/bg", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/bg.xml", null, d)));
              this.p1_chain.animation.addByPrefix("idle", "chain", 1, false);
              this.p1_chain.animation.play("idle");
              c = this.p1_chain.scrollFactor;
              e = 0.8;
              d = 1;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_chain.set_antialiasing(C.data.antialiasing);
              this.p1_chain.set_alpha(0.00001);
              this.add(this.p1_chain);
              c = this.p1_hook = new G(-1800, -1785);
              d = null;
              e = E.image("stages/shucks/bg", d, true);
              c.set_frames(Sa.fromSparrow(e, E.getPath("images/stages/shucks/bg.xml", null, d)));
              this.p1_hook.animation.addByPrefix("idle", "hook", 1, false);
              this.p1_hook.animation.play("idle");
              c = this.p1_hook.scrollFactor;
              e = 0.7;
              d = 1;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_hook.set_antialiasing(C.data.antialiasing);
              this.p1_hook.set_alpha(0.00001);
              this.add(this.p1_hook);
              c = this.songcard = new Db("game/cards/shucks", 0, 0);
              c.set_x((g.width - c.get_width()) / 2);
              c.set_y((g.height - c.get_height()) / 2);
              c = this.songcard.scrollFactor;
              c.set_x(0);
              c.set_y(0);
              this.songcard.set_alpha(0.00001);
              this.songcard.set_cameras([this.camHUD]);
              this.add(this.songcard);
              this.p1_darknessred = new Db("stages/shucks/darknessred", 0, 0, 0, 0);
              c = this.p1_darknessred.scale;
              d = e = 0.7;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_darknessred.set_blend(9);
              this.p1_darknessred.set_cameras([this.camEffect]);
              c = this.p1_darknessred;
              c.set_x((g.width - c.get_width()) / 2);
              c.set_y((g.height - c.get_height()) / 2);
              this.p1_darknessred.set_alpha(0.00001);
              this.add(this.p1_darknessred);
              this.p1_darkness = new Db("stages/shucks/darkness", 0, 0, 0, 0);
              c = this.p1_darkness.scale;
              d = e = 0.7;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              this.p1_darkness.set_blend(9);
              this.p1_darkness.set_cameras([this.camEffect]);
              c = this.p1_darkness;
              c.set_x((g.width - c.get_width()) / 2);
              c.set_y((g.height - c.get_height()) / 2);
              this.p1_darkness.set_alpha(0.00001);
              this.add(this.p1_darkness);
              this.blackScreen = new G().makeGraphic(g.width, g.height, -16777216);
              this.blackScreen.set_cameras([this.camEffect]);
              this.add(this.blackScreen);
              this.p1_light.origin.set_y(this.p1_glow.origin.set_y(0));
              break;
            case "squcks":
              f = new Db("stages/squcks/mult", -264, -207);
              c = f.scale;
              e = 1.5;
              d = 1.3;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              f.set_blend(9);
              this.add(f);
              f = new Db("stages/squcks/light2", -275, -207);
              c = f.scale;
              e = 1.5;
              d = 1.3;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              f.set_blend(0);
              this.add(f);
              f = new Db("stages/squcks/darknessred", -259, -217);
              c = f.scale;
              e = 1.56;
              d = 1.26;
              if (d == null) {
                d = 0;
              }
              if (e == null) {
                e = 0;
              }
              c.set_x(e);
              c.set_y(d);
              f.set_alpha(0.85);
              f.set_blend(9);
              this.add(f);
          }
          this.stagesFunc(function (a) {
            a.createPost();
          });
          this.comboGroup = new Na();
          this.add(this.comboGroup);
          this.noteGroup = new ab();
          this.add(this.noteGroup);
          this.uiGroup = new Na();
          this.add(this.uiGroup);
          K.songPosition = -5000 / K.songPosition;
          d = C.data.timeBarType != "Disabled";
          this.timeTxt = new R(z.STRUM_X + g.width / 2 - 248, 19, 400, "", 32);
          this.timeTxt.setFormat("assets/fonts/vcr.ttf", 32, -1, "center", cb.OUTLINE, -16777216);
          c = this.timeTxt.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          this.timeTxt.set_alpha(0);
          this.timeTxt.set_borderSize(2);
          this.timeTxt.set_visible(this.updateTime = d);
          if (C.data.downScroll) {
            this.timeTxt.set_y(g.height - 44);
          }
          if (C.data.timeBarType == "Song Name") {
            this.timeTxt.set_text(z.SONG.song);
          }
          this.timeBar = new Eh(0, this.timeTxt.y + this.timeTxt.get_height() / 4, "timeBar", function () {
            return a.songPercent;
          }, 0, 1);
          c = this.timeBar.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          c = this.timeBar;
          e = 1;
          if (e == null) {
            e = 17;
          }
          if (e == 1 || e == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (e == 16 || e == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.timeBar.set_alpha(0);
          this.timeBar.set_visible(d);
          this.strumLineNotes = new ab();
          this.noteGroup.add(this.strumLineNotes);
          if (C.data.timeBarType == "Song Name") {
            this.timeTxt.set_size(24);
            c = this.timeTxt;
            c.set_y(c.y + 3);
          }
          c = new gc(100, 100);
          this.grpNoteSplashes.add(c);
          c.set_alpha(0.000001);
          this.opponentStrums = new ab();
          this.playerStrums = new ab();
          this.generateSong(z.SONG.song);
          this.noteGroup.add(this.grpNoteSplashes);
          this.camFollow = new hc(0, 0, 1, 1);
          this.camFollow.setPosition(b.x, b.y);
          b.put();
          if (z.prevCamFollow != null) {
            this.camFollow = z.prevCamFollow;
            z.prevCamFollow = null;
          }
          this.add(this.camFollow);
          g.camera.follow(this.camFollow, wf.LOCKON, 0);
          g.camera.set_zoom(this.defaultCamZoom);
          g.camera.snapToTarget();
          c = g.worldBounds;
          d = b = 0;
          e = g.width;
          f = g.height;
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (b == null) {
            b = 0;
          }
          c.x = b;
          c.y = d;
          c.width = e;
          c.height = f;
          c = this.healthBar = new Eh(0, g.height * (C.data.downScroll ? 0.11 : 0.89), "game/bars/shadow", function () {
            return a.health;
          }, 0, 2);
          e = 1;
          if (e == null) {
            e = 17;
          }
          if (e == 1 || e == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (e == 16 || e == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.healthBar.set_leftToRight(false);
          c = this.healthBar.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          this.healthBar.set_visible(!C.data.hideHud);
          this.healthBar.set_alpha(C.data.healthBarAlpha);
          this.reloadHealthBarColors();
          this.uiGroup.add(this.healthBar);
          this.iconP1 = new Mf(this.boyfriend.healthIcon, true);
          this.iconP1.set_y(this.healthBar.y - 55);
          this.iconP1.set_x(970);
          this.iconP1.set_visible(!C.data.hideHud);
          this.iconP1.set_alpha(C.data.healthBarAlpha);
          this.uiGroup.add(this.iconP1);
          this.iconP2 = new Mf(this.dad.healthIcon, false);
          this.iconP2.set_y(this.healthBar.y - 60);
          this.iconP2.set_x(170);
          this.iconP2.set_visible(!C.data.hideHud);
          this.iconP2.set_alpha(C.data.healthBarAlpha);
          this.uiGroup.add(this.iconP2);
          this.scoreTxt = new R(0, this.healthBar.y + 40, g.width, "", 17);
          this.scoreTxt.setFormat("assets/fonts/SuperMario256.ttf", 17, -16777216, "center", cb.OUTLINE, -1);
          c = this.scoreTxt.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          this.scoreTxt.set_borderSize(2);
          this.scoreTxt.set_visible(!C.data.hideHud);
          this.updateScore(false);
          this.uiGroup.add(this.scoreTxt);
          this.botplayTxt = new R(400, this.timeBar.y + 55, g.width - 800, "BOTPLAY", 32);
          this.botplayTxt.setFormat("assets/fonts/SuperMario256.ttf", 32, -1, "center", cb.OUTLINE, -16777216);
          c = this.botplayTxt.scrollFactor;
          c.set_x(0);
          c.set_y(0);
          this.botplayTxt.set_borderSize(1.25);
          this.botplayTxt.set_visible(this.cpuControlled);
          this.uiGroup.add(this.botplayTxt);
          if (C.data.downScroll) {
            this.botplayTxt.set_y(this.timeBar.y - 78);
          }
          this.uiGroup.set_cameras([this.camHUD]);
          this.noteGroup.set_cameras([this.camHUD]);
          this.comboGroup.set_cameras([this.camHUD]);
          this.startingSong = true;
          this.eventsPushed = this.noteTypes = null;
          if (this.eventNotes.length > 1) {
            b = 0;
            for (c = this.eventNotes; b < c.length;) {
              d = c[b];
              ++b;
              d.strumTime -= this.eventEarlyTrigger(d);
            }
            this.eventNotes.sort(z.sortByTime);
          }
          if (z.curStage == "shucks") {
            this.uiGroup.set_alpha(0.00001);
          }
          this.startCallback();
          this.RecalculateRating();
          ia.get_current().stage.addEventListener("keyDown", n(this, this.onKeyPress));
          ia.get_current().stage.addEventListener("keyUp", n(this, this.onKeyRelease));
          if (C.data.hitsoundVolume > 0) {
            E.sound("hitsound");
          }
          E.sound("missnote1");
          E.sound("missnote2");
          E.sound("missnote3");
          E.image("alphabet");
          if (Ue.songName != null) {
            E.returnSound("music", Ue.songName, null);
          } else {
            c = C.data.pauseMusic;
            d = new na("[~&\\\\;:<>#]", "");
            b = new na("[.,'\"%?!]", "");
            c = d.split(v.replace(c, " ", "-")).join("-");
            if (b.split(c).join("").toLowerCase() != "none") {
              c = C.data.pauseMusic;
              d = new na("[~&\\\\;:<>#]", "");
              b = new na("[.,'\"%?!]", "");
              c = d.split(v.replace(c, " ", "-")).join("-");
              E.returnSound("music", b.split(c).join("").toLowerCase(), null);
            }
          }
          this.callOnScripts("onCreatePost");
          this.cacheCountdown();
          this.cachePopUpScore();
          P.prototype.create.call(this);
          E.clearUnusedMemory();
          if (this.eventNotes.length < 1) {
            this.checkEventNote();
          }
        },
        set_songSpeed: function (a) {
          if (this.generatedMusic) {
            var b = a / this.songSpeed;
            if (b != 1) {
              for (var c = 0, d = this.notes.members; c < d.length;) {
                var e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
              c = 0;
              for (d = this.unspawnNotes; c < d.length;) {
                e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
            }
          }
          this.songSpeed = a;
          this.noteKillOffset = Math.max(K.stepCrochet, 350 / this.songSpeed * this.playbackRate);
          return a;
        },
        set_playbackRate: function (a) {
          if (this.generatedMusic) {
            this.vocals.set_pitch(a);
            this.opponentVocals.set_pitch(a);
            g.sound.music.set_pitch(a);
            var b = this.playbackRate / a;
            if (b != 1) {
              for (var c = 0, d = this.notes.members; c < d.length;) {
                var e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
              c = 0;
              for (d = this.unspawnNotes; c < d.length;) {
                e = d[c];
                ++c;
                e.resizeByRatio(b);
              }
            }
          }
          this.playbackRate = a;
          g.animationTimeScale = a;
          K.safeZoneOffset = C.data.safeFrames / 60 * 1000 * a;
          this.setOnScripts("playbackRate", this.playbackRate);
          return this.playbackRate;
        },
        reloadHealthBarColors: function () {
          var a = this.healthBar;
          var b = this.dad.healthColorArray[0];
          var c = this.dad.healthColorArray[1];
          var d = this.dad.healthColorArray[2];
          var e = Gb._new();
          var f = 255;
          if (f == null) {
            f = 255;
          }
          e = (e & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          e &= -256;
          e |= d > 255 ? 255 : d < 0 ? 0 : d;
          e &= 16777215;
          e |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          b = this.boyfriend.healthColorArray[0];
          c = this.boyfriend.healthColorArray[1];
          d = this.boyfriend.healthColorArray[2];
          var g = Gb._new();
          f = 255;
          if (f == null) {
            f = 255;
          }
          g = (g & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          g &= -256;
          g |= d > 255 ? 255 : d < 0 ? 0 : d;
          g &= 16777215;
          g |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          a.setColors(e, g);
        },
        addCharacterToList: function (a, b) {
          switch (b) {
            case 0:
              if (!Object.prototype.hasOwnProperty.call(this.boyfriendMap.h, a)) {
                b = new ad(0, 0, a, true);
                this.boyfriendMap.h[a] = b;
                this.boyfriendGroup.add(b);
                this.startCharacterPos(b);
                b.set_alpha(0.00001);
              }
              break;
            case 1:
              if (!Object.prototype.hasOwnProperty.call(this.dadMap.h, a)) {
                b = new ad(0, 0, a);
                this.dadMap.h[a] = b;
                this.dadGroup.add(b);
                this.startCharacterPos(b, true);
                b.set_alpha(0.00001);
              }
              break;
            case 2:
              if (this.gf != null && !Object.prototype.hasOwnProperty.call(this.gfMap.h, a)) {
                b = new ad(0, 0, a);
                var c = b.scrollFactor;
                var d = 0.95;
                var e = 0.95;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                this.gfMap.h[a] = b;
                this.gfGroup.add(b);
                this.startCharacterPos(b);
                b.set_alpha(0.00001);
              }
          }
        },
        getLuaObject: function (a, b) {
          return null;
        },
        startCharacterPos: function (a, b) {
          if (b == null) {
            b = false;
          }
          if (b && v.startsWith(a.curCharacter, "gf")) {
            a.setPosition(this.GF_X, this.GF_Y);
            b = a.scrollFactor;
            var c = 0.95;
            var d = 0.95;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
            a.danceEveryNumBeats = 2;
          }
          a.set_x(a.x + a.positionArray[0]);
          a.set_y(a.y + a.positionArray[1]);
        },
        startVideo: function (a) {
          var b = this;
          this.inCutscene = true;
          a = E.video(a);
          this.videoCurrentlyPlaying = new oc(a);
          this.isVideoCurrentlyPlaying = true;
          this.videoCurrentlyPlaying.finishCallback = function () {
            b.inCutscene = false;
            b.startAndEnd();
          };
        },
        streamVideo: function (a) {
          a = E.video(a);
          this.streamVid = new B(a);
          this.isStreamVidPlaying = true;
          this.streamVid.finishCallback = function () {};
        },
        startAndEnd: function () {
          if (this.endingSong) {
            this.endSong();
          } else {
            this.startCountdown();
          }
        },
        startDialogue: function (a, b) {
          var c = this;
          if (this.psychDialogue == null) {
            if (a.dialogue.length > 0) {
              this.inCutscene = true;
              this.psychDialogue = new dc(a, b);
              a = this.psychDialogue.scrollFactor;
              a.set_x(0);
              a.set_y(0);
              this.psychDialogue.finishThing = this.endingSong ? function () {
                c.psychDialogue = null;
                c.endSong();
              } : function () {
                c.psychDialogue = null;
                c.startCountdown();
              };
              this.psychDialogue.nextDialogueThing = n(this, this.startNextDialogue);
              this.psychDialogue.skipDialogueThing = n(this, this.skipDialogue);
              this.psychDialogue.set_cameras([this.camHUD]);
              this.add(this.psychDialogue);
            } else {
              g.log.advanced("Your dialogue file is badly formatted!", Aa.WARNING, true);
              this.startAndEnd();
            }
          }
        },
        cacheCountdown: function () {
          var a = Object.create(null);
          switch (z.stageUI) {
            case "normal":
              var b = ["ready", "set", "go"];
              break;
            case "pixel":
              b = ["" + z.stageUI + "UI/ready-pixel", "" + z.stageUI + "UI/set-pixel", "" + z.stageUI + "UI/date-pixel"];
              break;
            default:
              b = ["" + z.stageUI + "UI/ready", "" + z.stageUI + "UI/set", "" + z.stageUI + "UI/go"];
          }
          a[z.stageUI] = b;
          a = a[z.stageUI];
          for (b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            E.image(c);
          }
          E.sound("intro3" + this.introSoundsSuffix);
          E.sound("intro2" + this.introSoundsSuffix);
          E.sound("intro1" + this.introSoundsSuffix);
          E.sound("introGo" + this.introSoundsSuffix);
        },
        startCountdown: function () {
          var a = this;
          if (this.startedCountdown) {
            this.callOnScripts("onStartCountdown");
            return false;
          }
          z.seenCutscene = true;
          this.inCutscene = false;
          if (this.callOnScripts("onStartCountdown", null, true) != Jb.Function_Stop) {
            if (this.skipCountdown || z.startOnTime > 0) {
              this.skipArrowStartTween = true;
            }
            this.generateStaticArrows(0);
            this.generateStaticArrows(1);
            for (var b = 0, c = this.playerStrums.length; b < c;) {
              var d = b++;
              this.defaultPlayerStrumX[d] = this.playerStrums.members[d].x;
              this.defaultPlayerStrumY[d] = this.playerStrums.members[d].y;
            }
            b = 0;
            for (c = this.opponentStrums.length; b < c;) {
              d = b++;
              this.defaultOpponentStrumX[d] = this.opponentStrums.members[d].x;
              this.defaultOpponentStrumY[d] = this.opponentStrums.members[d].y;
            }
            this.startedCountdown = true;
            K.songPosition = -K.crochet * 5;
            this.setOnScripts("startedCountdown", true);
            this.callOnScripts("onCountdownStarted", null);
            var e = 4;
            if (z.startOnTime > 0) {
              this.clearNotesBefore(z.startOnTime);
              this.setSongTime(z.startOnTime - 350);
              return true;
            }
            if (this.skipCountdown) {
              this.setSongTime(0);
              return true;
            }
            this.startTimer = new Gc().start(K.crochet / 1000 / this.playbackRate, function (b) {
              a.characterBopper(b.loops - b._loopsCounter);
              b = Object.create(null);
              switch (z.stageUI) {
                case "normal":
                  var c = ["ready", "set", "go"];
                  break;
                case "pixel":
                  c = ["" + z.stageUI + "UI/ready-pixel", "" + z.stageUI + "UI/set-pixel", "" + z.stageUI + "UI/date-pixel"];
                  break;
                default:
                  c = ["" + z.stageUI + "UI/ready", "" + z.stageUI + "UI/set", "" + z.stageUI + "UI/go"];
              }
              b[z.stageUI] = c;
              c = b[z.stageUI];
              b = C.data.antialiasing && !z.get_isPixelStage();
              var d = Tf.THREE;
              switch (e) {
                case 0:
                  g.sound.play(E.sound("intro3" + a.introSoundsSuffix), 0.6);
                  d = Tf.THREE;
                  break;
                case 1:
                  var f = new G().loadGraphic(E.image(c[0]));
                  f.set_cameras([a.camHUD]);
                  c = f.scrollFactor;
                  c.set_x(0);
                  c.set_y(0);
                  f.updateHitbox();
                  if (z.get_isPixelStage()) {
                    f.setGraphicSize(f.get_width() * z.daPixelZoom | 0);
                  }
                  f.set_x((g.width - f.get_width()) / 2);
                  f.set_y((g.height - f.get_height()) / 2);
                  f.set_antialiasing(b);
                  a.insert(a.members.indexOf(a.noteGroup), f);
                  Ha.tween(f, {
                    alpha: 0
                  }, K.crochet / 1000, {
                    ease: X.cubeInOut,
                    onComplete: function (b) {
                      a.remove(f);
                      f.destroy();
                    }
                  });
                  a.countdownReady = f;
                  g.sound.play(E.sound("intro2" + a.introSoundsSuffix), 0.6);
                  d = Tf.TWO;
                  break;
                case 2:
                  var h = new G().loadGraphic(E.image(c[1]));
                  h.set_cameras([a.camHUD]);
                  c = h.scrollFactor;
                  c.set_x(0);
                  c.set_y(0);
                  h.updateHitbox();
                  if (z.get_isPixelStage()) {
                    h.setGraphicSize(h.get_width() * z.daPixelZoom | 0);
                  }
                  h.set_x((g.width - h.get_width()) / 2);
                  h.set_y((g.height - h.get_height()) / 2);
                  h.set_antialiasing(b);
                  a.insert(a.members.indexOf(a.noteGroup), h);
                  Ha.tween(h, {
                    alpha: 0
                  }, K.crochet / 1000, {
                    ease: X.cubeInOut,
                    onComplete: function (b) {
                      a.remove(h);
                      h.destroy();
                    }
                  });
                  a.countdownSet = h;
                  g.sound.play(E.sound("intro1" + a.introSoundsSuffix), 0.6);
                  d = Tf.ONE;
                  break;
                case 3:
                  var p = new G().loadGraphic(E.image(c[2]));
                  p.set_cameras([a.camHUD]);
                  c = p.scrollFactor;
                  c.set_x(0);
                  c.set_y(0);
                  p.updateHitbox();
                  if (z.get_isPixelStage()) {
                    p.setGraphicSize(p.get_width() * z.daPixelZoom | 0);
                  }
                  p.set_x((g.width - p.get_width()) / 2);
                  p.set_y((g.height - p.get_height()) / 2);
                  p.set_antialiasing(b);
                  a.insert(a.members.indexOf(a.noteGroup), p);
                  Ha.tween(p, {
                    alpha: 0
                  }, K.crochet / 1000, {
                    ease: X.cubeInOut,
                    onComplete: function (b) {
                      a.remove(p);
                      p.destroy();
                    }
                  });
                  a.countdownGo = p;
                  g.sound.play(E.sound("introGo" + a.introSoundsSuffix), 0.6);
                  d = Tf.GO;
                  break;
                case 4:
                  d = Tf.START;
              }
              a.notes.forEachAlive(function (a) {
                if (C.data.opponentStrums || a.mustPress) {
                  a.copyAlpha = false;
                  a.set_alpha(a.multAlpha);
                  if (C.data.middleScroll && !a.mustPress) {
                    a.set_alpha(a.alpha * 0.35);
                  }
                }
              });
              a.stagesFunc(function (a) {
                a.countdownTick(d, e);
              });
              a.callOnLuas("onCountdownTick", [e]);
              a.callOnHScript("onCountdownTick", [d, e]);
              e += 1;
            }, 5);
          }
          return true;
        },
        createCountdownSprite: function (a, b) {
          var c = this;
          var d = new G().loadGraphic(E.image(a));
          d.set_cameras([this.camHUD]);
          a = d.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          d.updateHitbox();
          if (z.get_isPixelStage()) {
            d.setGraphicSize(d.get_width() * z.daPixelZoom | 0);
          }
          d.set_x((g.width - d.get_width()) / 2);
          d.set_y((g.height - d.get_height()) / 2);
          d.set_antialiasing(b);
          this.insert(this.members.indexOf(this.noteGroup), d);
          Ha.tween(d, {
            alpha: 0
          }, K.crochet / 1000, {
            ease: X.cubeInOut,
            onComplete: function (a) {
              c.remove(d);
              d.destroy();
            }
          });
          return d;
        },
        addBehindGF: function (a) {
          this.insert(this.members.indexOf(this.gfGroup), a);
        },
        addBehindBF: function (a) {
          this.insert(this.members.indexOf(this.boyfriendGroup), a);
        },
        addBehindDad: function (a) {
          this.insert(this.members.indexOf(this.dadGroup), a);
        },
        clearNotesBefore: function (a) {
          for (var b = this.unspawnNotes.length - 1; b >= 0;) {
            var c = this.unspawnNotes[b];
            if (c.strumTime - 350 < a) {
              c.set_active(false);
              c.set_visible(false);
              c.ignoreNote = true;
              c.kill();
              L.remove(this.unspawnNotes, c);
              c.destroy();
            }
            --b;
          }
          for (b = this.notes.length - 1; b >= 0;) {
            c = this.notes.members[b];
            if (c.strumTime - 350 < a) {
              c.set_active(false);
              c.set_visible(false);
              c.ignoreNote = true;
              this.invalidateNote(c);
            }
            --b;
          }
        },
        updateScore: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.callOnScripts("preUpdateScore", [a], true) != Jb.Function_Stop) {
            var b = this.ratingName;
            if (this.totalPlayed != 0) {
              var c = eg.floorDecimal(this.ratingPercent * 100, 2);
              b += " (" + c + "%) - " + this.ratingFC;
            }
            this.scoreTxt.set_text("Score: " + this.songScore + (this.instakillOnMiss ? "" : " | Misses: " + this.songMisses) + (" | Rating: " + b) + "\n");
            if (!a && !this.cpuControlled) {
              this.doScoreBop();
            }
            this.callOnScripts("onUpdateScore", [a]);
          }
        },
        fullComboFunction: function () {
          var a = this.ratingsData[0].hits;
          var b = this.ratingsData[1].hits;
          var c = this.ratingsData[2].hits;
          var d = this.ratingsData[3].hits;
          this.ratingFC = "";
          if (this.songMisses == 0) {
            if (c > 0 || d > 0) {
              this.ratingFC = "FC";
            } else if (b > 0) {
              this.ratingFC = "GFC";
            } else if (a > 0) {
              this.ratingFC = "SFC";
            }
          } else {
            this.ratingFC = this.songMisses < 10 ? "SDCB" : "Clear";
          }
        },
        doScoreBop: function () {
          var a = this;
          if (C.data.scoreZoom) {
            if (this.scoreTxtTween != null) {
              this.scoreTxtTween.cancel();
            }
            this.scoreTxt.scale.set_x(1.075);
            this.scoreTxt.scale.set_y(1.075);
            this.scoreTxtTween = Ha.tween(this.scoreTxt.scale, {
              x: 1,
              y: 1
            }, 0.2, {
              onComplete: function (b) {
                a.scoreTxtTween = null;
              }
            });
          }
        },
        setSongTime: function (a) {
          if (a < 0) {
            a = 0;
          }
          g.sound.music.pause();
          this.vocals.pause();
          this.opponentVocals.pause();
          g.sound.music.set_time(a);
          g.sound.music.set_pitch(this.playbackRate);
          g.sound.music.play();
          if (K.songPosition <= this.vocals._length) {
            this.vocals.set_time(a);
            this.opponentVocals.set_time(a);
            this.vocals.set_pitch(this.playbackRate);
            this.opponentVocals.set_pitch(this.playbackRate);
          }
          this.vocals.play();
          this.opponentVocals.play();
          K.songPosition = a;
        },
        startNextDialogue: function () {
          this.dialogueCount++;
          this.callOnScripts("onNextDialogue", [this.dialogueCount]);
        },
        skipDialogue: function () {
          this.callOnScripts("onSkipDialogue", [this.dialogueCount]);
        },
        startSong: function () {
          this.startingSong = false;
          g.sound.playMusic(this.inst._sound, 1, false);
          g.sound.music.set_pitch(this.playbackRate);
          var a = this;
          g.sound.music.onComplete = function () {
            a.finishSong();
          };
          this.vocals.play();
          this.opponentVocals.play();
          if (z.startOnTime > 0) {
            this.setSongTime(z.startOnTime - 500);
          }
          z.startOnTime = 0;
          if (this.paused) {
            g.sound.music.pause();
            this.vocals.pause();
            this.opponentVocals.pause();
          }
          this.songLength = g.sound.music._length;
          Ha.tween(this.timeBar, {
            alpha: 1
          }, 0.5, {
            ease: X.circOut
          });
          Ha.tween(this.timeTxt, {
            alpha: 1
          }, 0.5, {
            ease: X.circOut
          });
          if (z.curStage == "shucks") {
            this.streamVideo("shucks-door");
            this.blackScreen.set_alpha(0);
            this.camGame.set_zoom(1.25);
            this.defaultCamZoom = 1.25;
          }
          this.setOnScripts("songLength", this.songLength);
          this.callOnScripts("onSongStart");
        },
        generateSong: function (a) {
          this.set_songSpeed(z.SONG.speed);
          a = C.defaultData.gameplaySettings.h.scrolltype;
          this.songSpeedType = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrolltype") ? C.data.gameplaySettings.h.scrolltype : a;
          switch (this.songSpeedType) {
            case "constant":
              a = C.defaultData.gameplaySettings.h.scrollspeed;
              this.set_songSpeed(Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : a);
              break;
            case "multiplicative":
              a = C.defaultData.gameplaySettings.h.scrollspeed;
              this.set_songSpeed(z.SONG.speed * (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : a));
          }
          a = z.SONG;
          K.set_bpm(a.bpm);
          this.vocals = new Yd();
          this.opponentVocals = new Yd();
          try {
            if (a.needsVoices) {
              var b = "songs:assets/songs/" + v.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              this.vocals.loadEmbedded(b ?? "songs:assets/songs/" + v.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3");
              var c = "songs:assets/songs/" + v.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              if (c != null) {
                this.opponentVocals.loadEmbedded(c);
              }
            }
          } catch (sk) {
            Oa.lastError = sk;
          }
          this.vocals.set_pitch(this.playbackRate);
          this.opponentVocals.set_pitch(this.playbackRate);
          g.sound.list.add(this.vocals);
          g.sound.list.add(this.opponentVocals);
          this.inst = new Yd();
          try {
            this.inst.loadEmbedded("songs:assets/songs/" + v.replace(a.song.toLowerCase(), " ", "-") + "/Inst.mp3");
          } catch (sk) {
            Oa.lastError = sk;
          }
          g.sound.list.add(this.inst);
          this.notes = new ab();
          this.noteGroup.add(this.notes);
          b = a.notes;
          c = E.getPath("data/" + (this.songName + "/events.json"), "TEXT", null);
          if (U.exists(c)) {
            var d = Ld.loadFromJson("events", this.songName).events;
            for (c = 0; c < d.length;) {
              var e = d[c];
              ++c;
              for (var f = 0, k = e[1].length; f < k;) {
                var h = f++;
                this.makeEvent(e, h);
              }
            }
          }
          for (c = 0; c < b.length;) {
            e = b[c];
            ++c;
            f = 0;
            k = e.sectionNotes;
            while (f < k.length) {
              h = k[f];
              ++f;
              var l = h[0];
              var p = h[1] % 4 | 0;
              var n = e.mustHitSection;
              if (h[1] > 3) {
                n = !e.mustHitSection;
              }
              var m = this.unspawnNotes.length > 0 ? this.unspawnNotes[this.unspawnNotes.length - 1 | 0] : null;
              var r = new Ta(l, p, m);
              r.mustPress = n;
              r.sustainLength = h[2];
              r.gfNote = e.gfSection && h[1] < 4;
              r.set_noteType(h[3]);
              if (typeof h[3] != "string") {
                r.set_noteType(ea.noteTypeList[h[3]]);
              }
              d = r.scrollFactor;
              d.set_x(0);
              d.set_y(0);
              this.unspawnNotes.push(r);
              m = Math.floor(r.sustainLength / K.stepCrochet);
              if (m > 0) {
                d = 0;
                for (var q = m + 1; d < q;) {
                  var w = d++;
                  m = this.unspawnNotes[this.unspawnNotes.length - 1 | 0];
                  w = new Ta(l + K.stepCrochet * w, p, m, true);
                  w.mustPress = n;
                  w.gfNote = e.gfSection && h[1] < 4;
                  w.set_noteType(r.noteType);
                  var u = w.scrollFactor;
                  u.set_x(0);
                  u.set_y(0);
                  w.parent = r;
                  this.unspawnNotes.push(w);
                  r.tail.push(w);
                  w.correctionOffset = r.get_height() / 2;
                  if (z.get_isPixelStage()) {
                    if (m.isSustainNote) {
                      m.scale.set_y(m.scale.y / this.playbackRate);
                      m.updateHitbox();
                    }
                  } else {
                    if (m.isSustainNote) {
                      m.scale.set_y(Ta.SUSTAIN_SIZE / m.frameHeight * m.scale.y);
                      m.scale.set_y(m.scale.y / this.playbackRate);
                      m.updateHitbox();
                    }
                    if (C.data.downScroll) {
                      w.correctionOffset = 0;
                    }
                  }
                  if (w.mustPress) {
                    w.set_x(w.x + g.width / 2);
                  } else if (C.data.middleScroll) {
                    w.set_x(w.x + 310);
                    if (p > 1) {
                      w.set_x(w.x + (g.width / 2 + 25));
                    }
                  }
                }
              }
              if (r.mustPress) {
                r.set_x(r.x + g.width / 2);
              } else if (C.data.middleScroll) {
                r.set_x(r.x + 310);
                if (p > 1) {
                  r.set_x(r.x + (g.width / 2 + 25));
                }
              }
              if (this.noteTypes.indexOf(r.noteType) == -1) {
                this.noteTypes.push(r.noteType);
              }
            }
          }
          c = 0;
          for (f = a.events; c < f.length;) {
            e = f[c];
            ++c;
            k = 0;
            d = e[1].length;
            while (k < d) {
              h = k++;
              this.makeEvent(e, h);
            }
          }
          this.unspawnNotes.sort(z.sortByTime);
          this.generatedMusic = true;
        },
        eventPushed: function (a) {
          this.eventPushedUnique(a);
          if (this.eventsPushed.indexOf(a.event) == -1) {
            this.stagesFunc(function (b) {
              b.eventPushed(a);
            });
            this.eventsPushed.push(a.event);
          }
        },
        eventPushedUnique: function (a) {
          switch (a.event) {
            case "Change Character":
              var b = 0;
              switch (a.value1.toLowerCase()) {
                case "0":
                case "dad":
                case "opponent":
                  b = 1;
                  break;
                case "1":
                case "gf":
                case "girlfriend":
                  b = 2;
                  break;
                default:
                  b = 0;
              }
              this.addCharacterToList(a.value2, b);
              break;
            case "Play Sound":
              E.sound(a.value1);
          }
          this.stagesFunc(function (b) {
            b.eventPushedUnique(a);
          });
        },
        eventEarlyTrigger: function (a) {
          var b = this.callOnScripts("eventEarlyTrigger", [a.event, a.value1, a.value2, a.strumTime], true, [], [0]);
          if (b != null && b != 0 && b != Jb.Function_Continue) {
            return b;
          } else if (a.event == "Kill Henchmen") {
            return 280;
          } else {
            return 0;
          }
        },
        makeEvent: function (a, b) {
          a = {
            strumTime: a[0] + C.data.noteOffset,
            event: a[1][b][0],
            value1: a[1][b][1],
            value2: a[1][b][2]
          };
          this.eventNotes.push(a);
          this.eventPushed(a);
          this.callOnScripts("onEventPushed", [a.event, a.value1 ?? "", a.value2 ?? "", a.strumTime]);
        },
        generateStaticArrows: function (a) {
          var b = C.data.middleScroll ? z.STRUM_X_MIDDLESCROLL : z.STRUM_X;
          var c = C.data.downScroll ? g.height - 150 : 50;
          for (var d = 0; d < 4;) {
            var e = d++;
            var f = 1;
            if (a < 1) {
              if (C.data.opponentStrums) {
                if (C.data.middleScroll) {
                  f = 0.35;
                }
              } else {
                f = 0;
              }
            }
            var k = new ah(b, c, e, a);
            k.downScroll = C.data.downScroll;
            if (z.isStoryMode || this.skipArrowStartTween) {
              k.set_alpha(f);
            } else {
              k.set_alpha(0);
              Ha.tween(k, {
                alpha: f
              }, 1, {
                ease: X.circOut,
                startDelay: 0.5 + e * 0.2
              });
            }
            if (a == 1) {
              this.playerStrums.add(k);
            } else {
              if (C.data.middleScroll) {
                k.set_x(k.x + 310);
                if (e > 1) {
                  k.set_x(k.x + (g.width / 2 + 25));
                }
              }
              this.opponentStrums.add(k);
            }
            this.strumLineNotes.add(k);
            k.postAddedToGroup();
          }
        },
        openSubState: function (a) {
          this.stagesFunc(function (b) {
            b.openSubState(a);
          });
          if (this.paused) {
            if (g.sound.music != null) {
              g.sound.music.pause();
              this.vocals.pause();
              this.opponentVocals.pause();
            }
            Gc.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.active = false;
              }
            });
            Ha.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.set_active(false);
              }
            });
          }
          P.prototype.openSubState.call(this, a);
        },
        closeSubState: function () {
          P.prototype.closeSubState.call(this);
          this.stagesFunc(function (a) {
            a.closeSubState();
          });
          if (this.paused) {
            if (g.sound.music != null && !this.startingSong) {
              this.resyncVocals();
            }
            Gc.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.active = true;
              }
            });
            Ha.globalManager.forEach(function (a) {
              if (!a.finished) {
                a.set_active(true);
              }
            });
            if (this.isStreamVidPlaying) {
              this.streamVid.resume();
            }
            this.paused = false;
            this.callOnScripts("onResume");
          }
        },
        resyncVocals: function () {
          if (this.finishTimer == null) {
            this.vocals.pause();
            g.sound.music.play();
            K.songPosition = g.sound.music._time;
            if (K.songPosition <= this.vocals._length) {
              this.vocals.set_time(K.songPosition);
            }
            this.vocals.play();
          }
        },
        update: function (a) {
          var b = this;
          if (this.inCutscene || this.paused || this.freezeCamera) {
            g.camera.set_followLerp(0);
          } else {
            g.camera.set_followLerp(this.cameraSpeed * 2.4 * this.playbackRate);
            if (this.startingSong || this.endingSong) {
              var c = false;
            } else {
              c = this.boyfriend;
              var d = "";
              if (c.isAnimateAtlas ? c.atlas.anim.get_curSymbol() != null : c.animation._curAnim != null) {
                d = c.isAnimateAtlas ? c.atlas.anim.lastPlayedAnim : c.animation._curAnim.name;
              }
              c = v.startsWith(d ?? "", "idle");
            }
            if (c) {
              this.boyfriendIdleTime += a;
              if (this.boyfriendIdleTime >= 0.15) {
                this.boyfriendIdled = true;
              }
            } else {
              this.boyfriendIdleTime = 0;
            }
          }
          this.callOnScripts("onUpdate", [a]);
          P.prototype.update.call(this, a);
          this.setOnScripts("curDecStep", this.curDecStep);
          this.setOnScripts("curDecBeat", this.curDecBeat);
          if (this.botplayTxt != null && this.botplayTxt.visible) {
            this.botplaySine += a * 180;
            this.botplayTxt.set_alpha(1 - Math.sin(Math.PI * this.botplaySine / 180));
          }
          if (this.get_controls().get_PAUSE() && this.startedCountdown && this.canPause && this.callOnScripts("onPause", null, true) != Jb.Function_Stop) {
            this.openPauseMenu();
            if (this.isStreamVidPlaying) {
              this.streamVid.pause();
            }
          }
          if (!this.endingSong && !this.inCutscene && !!this.allowDebugKeys) {
            if (this.get_controls().justPressed("debug_1")) {
              this.openChartEditor();
            } else if (this.get_controls().justPressed("debug_2")) {
              this.openCharacterEditor();
            }
          }
          if (this.healthBar.bounds.max != null && this.health > this.healthBar.bounds.max) {
            this.set_health(this.healthBar.bounds.max);
          }
          this.updateIconsScale(a);
          if (this.startedCountdown && !this.paused) {
            K.songPosition += g.elapsed * 1000 * this.playbackRate;
          }
          if (this.startingSong) {
            if (this.startedCountdown && K.songPosition >= 0) {
              this.startSong();
            } else if (!this.startedCountdown) {
              K.songPosition = -K.crochet * 5;
            }
          } else if (!this.paused && this.updateTime) {
            c = Math.max(0, K.songPosition - C.data.noteOffset);
            this.songPercent = c / this.songLength;
            d = this.songLength - c;
            if (C.data.timeBarType == "Time Elapsed") {
              d = c;
            }
            c = Math.floor(d / 1000);
            if (c < 0) {
              c = 0;
            }
            if (C.data.timeBarType != "Song Name") {
              this.timeTxt.set_text(Xb.formatTime(c, false));
            }
          }
          if (this.camZooming) {
            c = this.defaultCamZoom;
            g.camera.set_zoom(c + Math.exp(-a * 3.125 * this.camZoomingDecay * this.playbackRate) * (g.camera.zoom - c));
            this.camHUD.set_zoom(1 + Math.exp(-a * 3.125 * this.camZoomingDecay * this.playbackRate) * (this.camHUD.zoom - 1));
          }
          if (!C.data.noReset && this.get_controls().get_RESET() && this.canReset && !this.inCutscene && this.startedCountdown && !this.endingSong) {
            this.set_health(0);
            Ab.trace("RESET = True", {
              fileName: "source/states/PlayState.hx",
              lineNumber: 1925,
              className: "states.PlayState",
              methodName: "update"
            });
          }
          this.doDeathCheck();
          if (this.unspawnNotes[0] != null) {
            c = this.spawnTime * this.playbackRate;
            if (this.songSpeed < 1) {
              c /= this.songSpeed;
            }
            if (this.unspawnNotes[0].multSpeed < 1) {
              c /= this.unspawnNotes[0].multSpeed;
            }
            while (this.unspawnNotes.length > 0 && this.unspawnNotes[0].strumTime - K.songPosition < c) {
              d = this.unspawnNotes[0];
              this.notes.insert(0, d);
              d.spawned = true;
              this.callOnLuas("onSpawnNote", [this.notes.members.indexOf(d), d.noteData, d.noteType, d.isSustainNote, d.strumTime]);
              this.callOnHScript("onSpawnNote", [d]);
              d = this.unspawnNotes.indexOf(d);
              this.unspawnNotes.splice(d, 1);
            }
          }
          if (this.generatedMusic) {
            if (!this.inCutscene && (this.cpuControlled ? this.playerDance() : this.keysCheck(), this.notes.length > 0)) {
              if (this.startedCountdown) {
                var e = 60 / z.SONG.bpm * 1000;
                this.notes.forEachAlive(function (a) {
                  var c = b.playerStrums;
                  if (!a.mustPress) {
                    c = b.opponentStrums;
                  }
                  c = c.members[a.noteData];
                  a.followStrumNote(c, e, b.songSpeed / b.playbackRate);
                  if (a.mustPress) {
                    if (b.cpuControlled && !a.blockHit && a.canBeHit && (a.isSustainNote || a.strumTime <= K.songPosition)) {
                      b.goodNoteHit(a);
                    }
                  } else if (!!a.wasGoodHit && !a.hitByOpponent && !a.ignoreNote) {
                    b.opponentNoteHit(a);
                  }
                  if (a.isSustainNote && c.sustainReduce) {
                    a.clipToStrumNote(c);
                  }
                  if (K.songPosition - a.strumTime > b.noteKillOffset) {
                    if (!!a.mustPress && !b.cpuControlled && !a.ignoreNote && !b.endingSong && (!!a.tooLate || !a.wasGoodHit)) {
                      b.noteMiss(a);
                    }
                    a.set_active(a.set_visible(false));
                    b.invalidateNote(a);
                  }
                });
              } else {
                this.notes.forEachAlive(function (a) {
                  a.canBeHit = false;
                  a.wasGoodHit = false;
                });
              }
            }
            this.checkEventNote();
          }
          if (this.isVideoCurrentlyPlaying) {
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              c = true;
            } else {
              c = g.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(32, c.status);
            }
            if (c) {
              c = true;
            } else {
              c = g.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(27, c.status);
            }
            if (c) {
              this.isVideoCurrentlyPlaying = false;
              this.videoCurrentlyPlaying.skipVideo();
            }
          }
          if (this.followChars) {
            if (this.mustHit) {
              switch (this.boyfriend.animation._curAnim.name) {
                case "singDOWN":
                case "singDOWN-alt":
                  this.camFollow.setPosition(this.xx2, this.yy2 + this.ofs);
                  break;
                case "singLEFT":
                case "singLEFT-alt":
                  this.camFollow.setPosition(this.xx2 - this.ofs, this.yy2);
                  break;
                case "singRIGHT":
                case "singRIGHT-alt":
                  this.camFollow.setPosition(this.xx2 + this.ofs, this.yy2);
                  break;
                case "singUP":
                case "singUP-alt":
                  this.camFollow.setPosition(this.xx2, this.yy2 - this.ofs);
                  break;
                default:
                  this.camFollow.setPosition(this.xx2, this.yy2);
              }
            } else {
              switch (this.dad.animation._curAnim.name) {
                case "singDOWN":
                case "singDOWN-alt":
                  this.camFollow.setPosition(this.xx, this.yy + this.ofs);
                  break;
                case "singLEFT":
                case "singLEFT-alt":
                  this.camFollow.setPosition(this.xx - this.ofs, this.yy);
                  break;
                case "singRIGHT":
                case "singRIGHT-alt":
                  this.camFollow.setPosition(this.xx + this.ofs, this.yy);
                  break;
                case "singUP":
                case "singUP-alt":
                  this.camFollow.setPosition(this.xx, this.yy - this.ofs);
                  break;
                default:
                  this.camFollow.setPosition(this.xx, this.yy);
              }
            }
          }
          if (z.curStage == "shucks" && this.p1_light != null && this.p1_light.alpha == 1 && this.p1_light.visible) {
            this.p1_light.set_angle(this.p1_glow.set_angle(Math.sin(K.songPosition / 1000) * 7.5));
          }
          this.setOnScripts("cameraX", this.camFollow.x);
          this.setOnScripts("cameraY", this.camFollow.y);
          this.setOnScripts("botPlay", this.cpuControlled);
          this.callOnScripts("onUpdatePost", [a]);
        },
        updateIconsScale: function (a) {
          var b = 1 + Math.exp(-a * 9 * this.playbackRate) * (this.iconP1.scale.x - 1);
          var c = this.iconP1.scale;
          var d = b;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(b);
          this.iconP1.updateHitbox();
          b = 1 + Math.exp(-a * 9 * this.playbackRate) * (this.iconP2.scale.x - 1);
          c = this.iconP2.scale;
          d = b;
          if (b == null) {
            b = 0;
          }
          if (d == null) {
            d = 0;
          }
          c.set_x(d);
          c.set_y(b);
          this.iconP2.updateHitbox();
        },
        updateIconsPosition: function () {
          this.iconP1.set_x(this.healthBar.barCenter + (this.iconP1.scale.x * 150 - 150) / 2 - 26);
          this.iconP2.set_x(this.healthBar.barCenter - this.iconP2.scale.x * 150 / 2 - 52);
        },
        set_health: function (a) {
          if (!this.iconsAnimations || this.healthBar == null || !this.healthBar.enabled || this.healthBar.valueFunction == null) {
            return this.health = a;
          }
          this.health = a;
          var b = this.healthBar.valueFunction();
          var c = this.healthBar.bounds.min;
          a = this.healthBar.bounds.max;
          b = c != null && b < c ? c : b;
          a = jc.remapToRange(a != null && b > a ? a : b, this.healthBar.bounds.min, this.healthBar.bounds.max, 0, 100);
          this.healthBar.set_percent(a ?? 0);
          this.iconP1.animation._curAnim.set_curFrame(this.healthBar.percent < 20 ? 1 : 0);
          this.iconP2.animation._curAnim.set_curFrame(this.healthBar.percent > 80 ? 1 : 0);
          return this.health;
        },
        openPauseMenu: function () {
          g.camera.set_followLerp(0);
          this.persistentUpdate = false;
          this.paused = this.persistentDraw = true;
          if (g.sound.music != null) {
            g.sound.music.pause();
            this.vocals.pause();
            this.opponentVocals.pause();
          }
          if (!this.cpuControlled) {
            for (var a = new Cc(this.playerStrums.members, null); a.hasNext();) {
              var b = a.next();
              if (b.animation._curAnim != null && b.animation._curAnim.name != "static") {
                b.playAnim("static");
                b.resetAnim = 0;
              }
            }
          }
          this.openSubState(new Ue());
        },
        openChartEditor: function () {
          g.camera.set_followLerp(0);
          this.persistentUpdate = false;
          this.paused = true;
          if (g.sound.music != null) {
            var a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          z.chartingMode = true;
          P.switchState(new ea());
        },
        openCharacterEditor: function () {
          g.camera.set_followLerp(0);
          this.persistentUpdate = false;
          this.paused = true;
          if (g.sound.music != null) {
            var a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          P.switchState(new gk(z.SONG.player1));
        },
        doDeathCheck: function (a) {
          if (a == null) {
            a = false;
          }
          if ((!a || !this.instakillOnMiss) && !(this.health <= 0) || this.practiceMode || this.isDead || this.callOnScripts("onGameOver", null, true) == Jb.Function_Stop) {
            return false;
          } else {
            g.animationTimeScale = 1;
            this.boyfriend.stunned = true;
            z.deathCounter++;
            this.paused = true;
            a = this.vocals;
            a.cleanup(a.autoDestroy, true);
            a = this.opponentVocals;
            a.cleanup(a.autoDestroy, true);
            a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
            this.persistentDraw = this.persistentUpdate = false;
            ue.clearArray(Gc.globalManager._timers);
            Ha.globalManager.clear();
            this.openSubState(new Jc());
            return this.isDead = true;
          }
        },
        checkEventNote: function () {
          while (this.eventNotes.length > 0) {
            var a = this.eventNotes[0].strumTime;
            if (K.songPosition < a) {
              break;
            }
            var b = "";
            if (this.eventNotes[0].value1 != null) {
              b = this.eventNotes[0].value1;
            }
            var c = "";
            if (this.eventNotes[0].value2 != null) {
              c = this.eventNotes[0].value2;
            }
            this.triggerEvent(this.eventNotes[0].event, b, c, a);
            this.eventNotes.shift();
          }
        },
        triggerEvent: function (a, b, c, d) {
          var e = this;
          var f = parseFloat(b);
          var k = parseFloat(c);
          if (isNaN(f)) {
            f = null;
          }
          if (isNaN(k)) {
            k = null;
          }
          switch (a) {
            case "Add Camera Zoom":
              if (C.data.camZooms && g.camera.zoom < 1.35) {
                if (f == null) {
                  f = 0.015;
                }
                if (k == null) {
                  k = 0.03;
                }
                var h = g.camera;
                h.set_zoom(h.zoom + f);
                h = this.camHUD;
                h.set_zoom(h.zoom + k);
              }
              break;
            case "Alt Idle Animation":
              h = this.dad;
              switch (v.trim(b.toLowerCase())) {
                case "bf":
                case "boyfriend":
                  h = this.boyfriend;
                  break;
                case "gf":
                case "girlfriend":
                  h = this.gf;
                  break;
                default:
                  h = this.dad;
              }
              if (h != null) {
                h.idleSuffix = c;
                h.recalculateDanceIdle();
              }
              break;
            case "Camera Flash":
              this.camGame.flash(y.parseInt(b), parseFloat(c));
              break;
            case "Camera Follow Pos":
              if (this.camFollow != null && (this.isCameraOnForcedPos = false, f != null || k != null)) {
                this.isCameraOnForcedPos = true;
                if (f == null) {
                  f = 0;
                }
                if (k == null) {
                  k = 0;
                }
                this.camFollow.set_x(f);
                this.camFollow.set_y(k);
              }
              break;
            case "Camera Zoom":
              var l = b.split(",");
              var p = c.split(",");
              h = l[0] == "true";
              h = p[3] == "true";
              var n = l[2] == "camHUD" ? this.camHUD : this.camGame;
              if (this.zoomTween != null) {
                this.zoomTween.cancel();
              }
              var m = parseFloat(l[1]);
              h = K.stepCrochet / 1000 * parseFloat(l[3]);
              l = p[0];
              p = p[1];
              this.zoomTween = Ha.tween(n, {
                zoom: m
              }, h, {
                ease: ha.field(X, l + (l == "linear" || p == null ? "" : p)),
                onUpdate: function (a) {
                  if (n == e.camGame) {
                    e.defaultCamZoom = n.zoom;
                  }
                }
              });
              break;
            case "Change Character":
              h = 0;
              switch (v.trim(b.toLowerCase())) {
                case "gf":
                case "girlfriend":
                  h = 2;
                  break;
                case "dad":
                case "opponent":
                  h = 1;
                  break;
                default:
                  h = 0;
              }
              switch (h) {
                case 0:
                  if (this.boyfriend.curCharacter != c) {
                    if (!Object.prototype.hasOwnProperty.call(this.boyfriendMap.h, c)) {
                      this.addCharacterToList(c, h);
                    }
                    h = this.boyfriend.alpha;
                    this.boyfriend.set_alpha(0.00001);
                    this.boyfriend = this.boyfriendMap.h[c];
                    this.boyfriend.set_alpha(h);
                    this.iconP1.changeIcon(this.boyfriend.healthIcon);
                  }
                  this.setOnScripts("boyfriendName", this.boyfriend.curCharacter);
                  break;
                case 1:
                  if (this.dad.curCharacter != c) {
                    if (!Object.prototype.hasOwnProperty.call(this.dadMap.h, c)) {
                      this.addCharacterToList(c, h);
                    }
                    m = v.startsWith(this.dad.curCharacter, "gf-") || this.dad.curCharacter == "gf";
                    h = this.dad.alpha;
                    this.dad.set_alpha(0.00001);
                    this.dad = this.dadMap.h[c];
                    if (v.startsWith(this.dad.curCharacter, "gf-") || this.dad.curCharacter == "gf") {
                      if (this.gf != null) {
                        this.gf.set_visible(false);
                      }
                    } else if (m && this.gf != null) {
                      this.gf.set_visible(true);
                    }
                    this.dad.set_alpha(h);
                    this.iconP2.changeIcon(this.dad.healthIcon);
                  }
                  this.setOnScripts("dadName", this.dad.curCharacter);
                  break;
                case 2:
                  if (this.gf != null) {
                    if (this.gf.curCharacter != c) {
                      if (!Object.prototype.hasOwnProperty.call(this.gfMap.h, c)) {
                        this.addCharacterToList(c, h);
                      }
                      h = this.gf.alpha;
                      this.gf.set_alpha(0.00001);
                      this.gf = this.gfMap.h[c];
                      this.gf.set_alpha(h);
                    }
                    this.setOnScripts("gfName", this.gf.curCharacter);
                  }
              }
              this.reloadHealthBarColors();
              break;
            case "Change Scroll Speed":
              if (this.songSpeedType != "constant") {
                if (f == null) {
                  f = 1;
                }
                if (k == null) {
                  k = 0;
                }
                h = null;
                h = C.defaultData.gameplaySettings.h.scrollspeed;
                h = z.SONG.speed * (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : h) * f;
                if (k <= 0) {
                  this.set_songSpeed(h);
                } else {
                  this.songSpeedTween = Ha.tween(this, {
                    songSpeed: h
                  }, k / this.playbackRate, {
                    ease: X.linear,
                    onComplete: function (a) {
                      e.songSpeedTween = null;
                    }
                  });
                }
              }
              break;
            case "Hey!":
              h = 2;
              switch (v.trim(b.toLowerCase())) {
                case "0":
                case "bf":
                case "boyfriend":
                  h = 0;
                  break;
                case "1":
                case "gf":
                case "girlfriend":
                  h = 1;
              }
              if (k == null || k <= 0) {
                k = 0.6;
              }
              if (h != 0) {
                if (v.startsWith(this.dad.curCharacter, "gf")) {
                  this.dad.playAnim("cheer", true);
                  this.dad.specialAnim = true;
                  this.dad.heyTimer = k;
                } else if (this.gf != null) {
                  this.gf.playAnim("cheer", true);
                  this.gf.specialAnim = true;
                  this.gf.heyTimer = k;
                }
              }
              if (h != 1) {
                this.boyfriend.playAnim("hey", true);
                this.boyfriend.specialAnim = true;
                this.boyfriend.heyTimer = k;
              }
              break;
            case "Play Animation":
              h = this.dad;
              switch (v.trim(c.toLowerCase())) {
                case "0":
                case "bf":
                case "boyfriend":
                  h = this.boyfriend;
                  break;
                case "gf":
                case "girlfriend":
                  h = this.gf;
                  break;
                default:
                  h = this.dad;
              }
              if (h != null) {
                h.playAnim(b, true);
                h.specialAnim = true;
              }
              break;
            case "Play Sound":
              if (k == null) {
                k = 1;
              }
              g.sound.play(E.sound(b), k);
              break;
            case "Screen Shake":
              h = [b, c];
              m = [this.camGame, this.camHUD];
              p = 0;
              for (l = m.length; p < l;) {
                var r = p++;
                var q = h[r].split(",");
                var w = 0;
                var u = 0;
                if (q[0] != null) {
                  w = parseFloat(v.trim(q[0]));
                }
                if (q[1] != null) {
                  u = parseFloat(v.trim(q[1]));
                }
                if (isNaN(w)) {
                  w = 0;
                }
                if (isNaN(u)) {
                  u = 0;
                }
                if (w > 0 && u != 0) {
                  m[r].shake(u, w);
                }
              }
              break;
            case "Set Cam Zoom":
              h = parseFloat(b);
              m = parseFloat(c);
              if (c == "") {
                this.defaultCamZoom = h;
              } else {
                if (this.zoomTween != null) {
                  this.zoomTween.cancel();
                }
                this.zoomTween = Ha.tween(this.camGame, {
                  zoom: h
                }, m, {
                  ease: X.sineInOut,
                  onComplete: function (a) {
                    e.defaultCamZoom = e.camGame.zoom;
                  }
                });
              }
              break;
            case "Set GF Speed":
              if (f == null || f < 1) {
                f = 1;
              }
              this.gfSpeed = Math.round(f);
              break;
            case "Set Property":
              try {
                q = b.split(".");
                if (q.length > 1) {
                  Jb.setVarInArray(Jb.getPropertyLoop(q), q[q.length - 1], c);
                } else {
                  Jb.setVarInArray(this, b, c);
                }
              } catch (sk) {
                Oa.lastError = sk;
                h = I.caught(sk).unwrap();
                m = h.message.indexOf("\n") + 1;
                if (m <= 0) {
                  m = h.message.length;
                }
                g.log.advanced("ERROR (\"Set Property\" Event) - " + y.string(h.message.substr(0, m)), Aa.WARNING, true);
              }
              break;
            case "animphase2":
              this.camGame.flash(-65536, K.stepCrochet / 1000 * 2);
              this.chair_text.set_alpha(1);
              this.chair_text.animation.play("ShucksText");
              break;
            case "animphase3":
              this.camGame.flash(-65536, K.stepCrochet / 1000 * 4);
              this.runbg.animation.play("intro");
              break;
            case "bodies":
              this.runbg.animation.play("bodies");
              break;
            case "camspeed":
              this.cameraSpeed = parseFloat(b);
              break;
            case "card":
              Ha.tween(this.songcard, {
                alpha: 1
              }, K.stepCrochet / 1000 * 8);
              Ha.tween(this.songcard, {
                alpha: 0
              }, K.stepCrochet / 1000 * 16, {
                startDelay: K.stepCrochet / 1000 * 24
              });
              break;
            case "end":
              Ha.tween(this.camHUD, {
                alpha: 0
              }, K.stepCrochet / 1000 * 24);
              this.runbg.animation.play("end");
              this.run_legsdetg.set_alpha(0);
              this.dad.animation.finishCallback = function (a) {
                if (a == "fall") {
                  e.dad.set_alpha(0);
                  Ha.tween(e.camGame, {
                    alpha: 0
                  }, K.stepCrochet / 1000 * 24);
                }
              };
              this.dad.playAnim("fall");
              this.dad.specialAnim = true;
              h = this.dad.scale;
              p = m = 0.6;
              if (p == null) {
                p = 0;
              }
              if (m == null) {
                m = 0;
              }
              h.set_x(m);
              h.set_y(p);
              break;
            case "gfdead":
              this.gf.set_visible(false);
              this.remove(this.gf);
              this.rose.set_alpha(1);
              this.rose.playAnim("idle");
              this.iconP1.changeIcon("marvin-shucks-bloody");
              break;
            case "movecam":
              this.isCameraOnForcedPos = false;
              this.moveCamera(true);
              break;
            case "phase1":
              this.dadGroup.set_visible(false);
              this.camHUD.fade(-16777216, K.stepCrochet / 1000 * 4, null, function () {
                e.showComboNum = true;
                e.showRating = true;
                for (var a = 0, b = e.playerStrums.length; a < b;) {
                  var c = a++;
                  e.playerStrums.members[c].set_texture("default");
                  e.opponentStrums.members[c].set_texture("default");
                }
                a = 0;
                for (b = e.unspawnNotes.length; a < b;) {
                  c = a++;
                  e.unspawnNotes[c].set_texture("default");
                  e.unspawnNotes[c].noteSplashData.texture = "splash";
                }
                e.scoreTxt.setFormat("assets/fonts/SuperMario256.ttf", 17, -7995386, "center", cb.OUTLINE, -16777216);
                e.healthBar.changeBar("game/bars/default");
                e.dadGroup.set_visible(true);
                e.dad.playAnim("intro", true);
                e.dad.specialAnim = true;
                e.camHUD.stopFade();
                e.camHUD.set_alpha(0);
                e.camGame.set_visible(false);
                e.flicker(e.camGame, K.stepCrochet / 1000 * 4, K.stepCrochet / 2500);
                e.defaultCamZoom = 0.4;
                e.gf.set_alpha(1);
                e.p1_bg.set_alpha(1);
                e.p1_extralight.set_alpha(1);
                e.p1_light.set_alpha(1);
                e.p1_lightbase.set_alpha(1);
                e.p1_glow.set_alpha(1);
                e.p1_glow2.set_alpha(1);
                e.p1_glow3.set_alpha(1);
                e.p1_chain.set_alpha(1);
                e.p1_hook.set_alpha(1);
                e.p1_darknessred.set_alpha(1);
                e.p1_darkness.set_alpha(1);
              });
              break;
            case "phase2":
              this.remove(this.rose);
              this.remove(this.p1_bg);
              this.remove(this.p1_extralight);
              this.remove(this.p1_light);
              this.remove(this.p1_lightbase);
              this.remove(this.p1_glow);
              this.remove(this.p1_glow2);
              this.remove(this.p1_glow3);
              this.remove(this.p1_chain);
              this.remove(this.p1_hook);
              this.remove(this.p1_darknessred);
              this.chair_bg.set_alpha(1);
              this.chair_chair.set_alpha(1);
              this.chair_glow.set_alpha(1);
              this.boyfriend.set_alpha(1);
              this.dad.set_alpha(1);
              break;
            case "phase3":
              this.remove(this.chair_bg);
              this.remove(this.chair_chair);
              this.remove(this.chair_glow);
              this.runbg.set_alpha(1);
              this.run_legsmarv.set_alpha(1);
              this.run_legsmarv.animation.play("idle");
              this.run_multi.set_alpha(1);
              this.run_dark.set_alpha(1);
              this.run_add.set_alpha(1);
              this.dad.playAnim("intro");
              this.dad.specialAnim = true;
              this.dad.animation.finishCallback = function (a) {
                if (a == "intro") {
                  e.run_legsdetg.animation.play("idle");
                  e.run_legsdetg.set_alpha(1);
                }
              };
              break;
            case "run":
              Ha.tween(this.boyfriend, {
                x: 1770,
                y: 650,
                "scale.x": 3.3,
                "scale.y": 3.3
              }, 1, {
                ease: X.circInOut
              });
              Ha.tween(this.run_legsmarv, {
                x: 1770,
                y: 505,
                "scale.x": 3.3,
                "scale.y": 3.3
              }, 1, {
                ease: X.circInOut
              });
              break;
            case "show":
              switch (b) {
                case "bf":
                  this.boyfriend.set_alpha(parseFloat(c));
                  break;
                case "black":
                  Ha.tween(this.blackScreen, {
                    alpha: parseFloat(c)
                  }, K.stepCrochet / 1000 * 16, {
                    ease: X.circInOut
                  });
                  break;
                case "hud":
                  Ha.tween(this.camHUD, {
                    alpha: parseFloat(c)
                  }, K.stepCrochet / 1000 * 16, {
                    ease: X.circInOut
                  });
                  break;
                case "strum":
                  p = 0;
                  for (l = this.opponentStrums.length; p < l;) {
                    r = p++;
                    Ha.tween(this.opponentStrums.members[r], {
                      alpha: parseFloat(c)
                    }, K.stepCrochet / 1000 * 16, {
                      ease: X.circInOut
                    });
                  }
                  break;
                case "ui":
                  Ha.tween(this.uiGroup, {
                    alpha: parseFloat(c)
                  }, K.stepCrochet / 1000 * 16, {
                    ease: X.circInOut
                  });
                  Ha.num(1, 0.75, K.stepCrochet / 1000 * 16, {
                    ease: X.circInOut
                  }, function (a) {
                    e.camGame.set_zoom(e.defaultCamZoom = a);
                  });
              }
              break;
            case "video":
              this.streamVideo(b);
          }
          this.stagesFunc(function (e) {
            e.eventCalled(a, b, c, f, k, d);
          });
          this.callOnScripts("onEvent", [a, b, c, d]);
        },
        moveCameraSection: function (a) {
          if (a == null) {
            a = this.curSection;
          }
          if (a < 0) {
            a = 0;
          }
          if (z.SONG.notes[a] != null) {
            if (this.gf != null && z.SONG.notes[a].gfSection) {
              this.camFollow.setPosition(this.gf.getMidpoint().x, this.gf.getMidpoint().y);
              a = this.camFollow;
              a.set_x(a.x + (this.gf.cameraPosition[0] + this.girlfriendCameraOffset[0]));
              a = this.camFollow;
              a.set_y(a.y + (this.gf.cameraPosition[1] + this.girlfriendCameraOffset[1]));
              this.tweenCamIn();
              this.callOnScripts("onMoveCamera", ["gf"]);
            } else {
              a = z.SONG.notes[a].mustHitSection != 1;
              this.moveCamera(a);
              this.callOnScripts("onMoveCamera", [a ? "dad" : "boyfriend"]);
            }
          }
        },
        moveCamera: function (a) {
          var b = this;
          if (a) {
            this.camFollow.setPosition(this.dad.getMidpoint().x + 150, this.dad.getMidpoint().y - 100);
            a = this.camFollow;
            a.set_x(a.x + (this.dad.cameraPosition[0] + this.opponentCameraOffset[0]));
            a = this.camFollow;
            a.set_y(a.y + (this.dad.cameraPosition[1] + this.opponentCameraOffset[1]));
            this.tweenCamIn();
          } else {
            this.camFollow.setPosition(this.boyfriend.getMidpoint().x - 100, this.boyfriend.getMidpoint().y - 100);
            a = this.camFollow;
            a.set_x(a.x - (this.boyfriend.cameraPosition[0] - this.boyfriendCameraOffset[0]));
            a = this.camFollow;
            a.set_y(a.y + (this.boyfriend.cameraPosition[1] + this.boyfriendCameraOffset[1]));
            if (this.songName == "tutorial" && this.cameraTwn == null && g.camera.zoom != 1) {
              this.cameraTwn = Ha.tween(g.camera, {
                zoom: 1
              }, K.stepCrochet * 4 / 1000, {
                ease: X.elasticInOut,
                onComplete: function (a) {
                  b.cameraTwn = null;
                }
              });
            }
          }
        },
        tweenCamIn: function () {
          var a = this;
          if (this.songName == "tutorial" && this.cameraTwn == null && g.camera.zoom != 1.3) {
            this.cameraTwn = Ha.tween(g.camera, {
              zoom: 1.3
            }, K.stepCrochet * 4 / 1000, {
              ease: X.elasticInOut,
              onComplete: function (b) {
                a.cameraTwn = null;
              }
            });
          }
        },
        finishSong: function (a) {
          if (a == null) {
            a = false;
          }
          var b = this;
          this.updateTime = false;
          g.sound.music.set_volume(0);
          this.vocals.set_volume(0);
          this.vocals.pause();
          this.opponentVocals.set_volume(0);
          this.opponentVocals.pause();
          if (z.curStage == "shucks") {
            this.endCallback = n(this, this.endVid);
          }
          if (C.data.noteOffset <= 0 || a) {
            this.endCallback();
          } else {
            this.finishTimer = new Gc().start(C.data.noteOffset / 1000, function (a) {
              b.endCallback();
            });
          }
        },
        endVid: function () {
          this.endingSong = true;
          this.startVideo("shucks-end-cutscene");
        },
        endSong: function () {
          var a = this;
          if (B.netStream != null) {
            B.netStream.dispose();
          }
          if (g.game.contains(B.player)) {
            g.game.removeChild(B.player);
          }
          if (!this.startingSong) {
            this.notes.forEach(function (b) {
              if (b.strumTime < a.songLength - K.safeZoneOffset) {
                a.set_health(a.health - a.healthLoss * 0.05);
              }
            });
            for (var b = 0, c = this.unspawnNotes; b < c.length;) {
              var d = c[b];
              ++b;
              if (d.strumTime < this.songLength - K.safeZoneOffset) {
                this.set_health(this.health - this.healthLoss * 0.05);
              }
            }
            if (this.doDeathCheck()) {
              return false;
            }
          }
          this.timeBar.set_visible(false);
          this.timeTxt.set_visible(false);
          this.canPause = false;
          this.endingSong = true;
          this.updateTime = this.inCutscene = this.camZooming = false;
          z.deathCounter = 0;
          z.seenCutscene = false;
          if (this.callOnScripts("onEndSong", null, true) != Jb.Function_Stop && !this.transitioning) {
            b = this.ratingPercent;
            if (isNaN(b)) {
              b = 0;
            }
            Ya.saveScore(z.SONG.song, this.songScore, z.storyDifficulty, b);
            this.set_playbackRate(1);
            if (z.chartingMode) {
              this.openChartEditor();
              return false;
            }
            if (z.isStoryMode) {
              z.campaignScore += this.songScore;
              z.campaignMisses += this.songMisses;
              L.remove(z.storyPlaylist, z.storyPlaylist[0]);
              if (z.storyPlaylist.length <= 0) {
                ve.loadTopMod();
                b = g.sound;
                c = E.returnSound("music", "freakyMenu", null);
                b.playMusic(c);
                P.switchState(new Nb());
                b = null;
                b = C.defaultData.gameplaySettings.h.practice;
                if (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "practice") ? C.data.gameplaySettings.h.practice : b) {
                  b = false;
                } else {
                  b = null;
                  b = C.defaultData.gameplaySettings.h.botplay;
                  b = !(Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "botplay") ? C.data.gameplaySettings.h.botplay : b);
                }
                if (b) {
                  Nb.weekCompleted.h[jb.weeksList[z.storyWeek]] = true;
                  Ya.saveWeekScore(jb.getWeekFileName(), z.campaignScore, z.storyDifficulty);
                  g.save.data.weekCompleted = Nb.weekCompleted;
                  g.save.flush();
                }
                z.changedDifficulty = false;
              } else {
                b = null;
                if (b == null) {
                  b = z.storyDifficulty;
                }
                d = qb.list[b];
                d = d != qb.defaultDifficulty ? "-" + d : "";
                c = new na("[~&\\\\;:<>#]", "");
                b = new na("[.,'\"%?!]", "");
                var e = c.split(v.replace(d, " ", "-")).join("-");
                d = b.split(e).join("").toLowerCase();
                Ab.trace("LOADING NEXT SONG", {
                  fileName: "source/states/PlayState.hx",
                  lineNumber: 3207,
                  className: "states.PlayState",
                  methodName: "endSong"
                });
                e = z.storyPlaylist[0];
                c = new na("[~&\\\\;:<>#]", "");
                b = new na("[.,'\"%?!]", "");
                c = c.split(v.replace(e, " ", "-")).join("-");
                Ab.trace(b.split(c).join("").toLowerCase() + d, {
                  fileName: "source/states/PlayState.hx",
                  lineNumber: 3208,
                  className: "states.PlayState",
                  methodName: "endSong"
                });
                Vb.skipNextTransIn = true;
                Vb.skipNextTransOut = true;
                z.prevCamFollow = this.camFollow;
                z.SONG = Ld.loadFromJson(z.storyPlaylist[0] + d, z.storyPlaylist[0]);
                b = g.sound.music;
                b.cleanup(b.autoDestroy, true);
                P.switchState(tc.getNextState(new z(), false));
              }
            } else {
              Ab.trace("WENT BACK TO FREEPLAY??", {
                fileName: "source/states/PlayState.hx",
                lineNumber: 3222,
                className: "states.PlayState",
                methodName: "endSong"
              });
              ve.loadTopMod();
              P.switchState(new Va());
              b = g.sound;
              c = E.returnSound("music", "freakyMenu", null);
              b.playMusic(c);
              z.changedDifficulty = false;
            }
            this.transitioning = true;
          }
          return true;
        },
        KillNotes: function () {
          while (this.notes.length > 0) {
            var a = this.notes.members[0];
            a.set_active(false);
            a.set_visible(false);
            this.invalidateNote(a);
          }
          this.unspawnNotes = [];
          this.eventNotes = [];
        },
        cachePopUpScore: function () {
          var a = "";
          var b = "";
          if (z.stageUI != "normal") {
            a = "" + z.stageUI + "UI/";
            if (z.get_isPixelStage()) {
              b = "-pixel";
            }
          }
          for (var c = 0, d = this.ratingsData; c < d.length;) {
            var e = d[c];
            ++c;
            E.image(a + e.image + b);
          }
          E.image(a + "num0" + b);
          E.image(a + "num1" + b);
          E.image(a + "num2" + b);
          E.image(a + "num3" + b);
          E.image(a + "num4" + b);
          E.image(a + "num5" + b);
          E.image(a + "num6" + b);
          E.image(a + "num7" + b);
          E.image(a + "num8" + b);
          E.image(a + "num9" + b);
        },
        popUpScore: function (a) {
          var b = Math.abs(a.strumTime - K.songPosition + C.data.ratingOffset);
          this.vocals.set_volume(1);
          if (!C.data.comboStacking && this.comboGroup.group.members.length > 0) {
            for (var c = new Cc(this.comboGroup.group.members, null); c.hasNext();) {
              var d = c.next();
              d.destroy();
              this.comboGroup.remove(d);
            }
          }
          c = g.width * 0.87;
          var e = new G();
          d = 350;
          var f = K.judgeNote(this.ratingsData, b / this.playbackRate);
          this.totalNotesHit += f.ratingMod;
          a.ratingMod = f.ratingMod;
          if (!a.ratingDisabled) {
            f.hits++;
          }
          a.rating = f.name;
          d = f.score;
          if (f.noteSplash && !a.noteSplashData.disabled) {
            this.spawnNoteSplashOnNote(a);
          }
          if (!this.practiceMode && !this.cpuControlled) {
            this.songScore += d;
            if (!a.ratingDisabled) {
              this.songHits++;
              this.totalPlayed++;
              this.RecalculateRating(false);
            }
          }
          b = a = "";
          d = C.data.antialiasing;
          if (z.stageUI != "normal") {
            a = "" + z.stageUI + "UI/";
            if (z.get_isPixelStage()) {
              b = "-pixel";
            }
            d = !z.get_isPixelStage();
          }
          e.loadGraphic(E.image(a + f.image + b));
          e.set_x((g.width - e.get_width()) / 2);
          e.set_y((g.height - e.get_height()) / 2);
          e.set_x(c + 20);
          e.set_y(e.y + 330);
          e.acceleration.set_y(this.playbackRate * 550 * this.playbackRate);
          e.velocity.set_y(e.velocity.y - g.random.int(140, 175) * this.playbackRate);
          e.velocity.set_x(e.velocity.x - g.random.int(0, 10) * this.playbackRate);
          e.set_visible(!C.data.hideHud && this.showRating);
          e.set_antialiasing(d);
          var k = new G().loadGraphic(E.image(a + "combo" + b));
          k.set_x((g.width - k.get_width()) / 2);
          k.set_y((g.height - k.get_height()) / 2);
          k.set_x(c);
          k.acceleration.set_y(g.random.int(200, 300) * this.playbackRate * this.playbackRate);
          k.velocity.set_y(k.velocity.y - g.random.int(140, 160) * this.playbackRate);
          k.set_visible(!C.data.hideHud && this.showCombo);
          k.set_x(k.x + C.data.comboOffset[0]);
          k.set_y(k.y - C.data.comboOffset[1]);
          k.set_antialiasing(d);
          k.set_y(k.y + 60);
          k.velocity.set_x(k.velocity.x + g.random.int(1, 10) * this.playbackRate);
          this.comboGroup.add(e);
          if (z.get_isPixelStage()) {
            e.setGraphicSize(e.get_width() * z.daPixelZoom * 0.85 | 0);
            k.setGraphicSize(k.get_width() * z.daPixelZoom * 0.85 | 0);
          } else {
            e.setGraphicSize(e.get_width() * 0.5 | 0);
            k.setGraphicSize(k.get_width() * 0.5 | 0);
          }
          k.updateHitbox();
          e.updateHitbox();
          f = [];
          if (this.combo >= 1000) {
            f.push(Math.floor(this.combo / 1000) % 10);
          }
          f.push(Math.floor(this.combo / 100) % 10);
          f.push(Math.floor(this.combo / 10) % 10);
          f.push(this.combo % 10);
          var h = 0;
          var l = 0;
          if (this.showCombo) {
            this.comboGroup.add(k);
          }
          for (var p = 0; p < f.length;) {
            var n = f[p];
            ++p;
            n = [new G().loadGraphic(E.image(a + "num" + (n | 0) + b))];
            n[0].set_x((g.width - n[0].get_width()) / 2);
            n[0].set_y((g.height - n[0].get_height()) / 2);
            n[0].set_x(c + h * 20 + 20);
            n[0].set_y(n[0].y + 460);
            if (z.get_isPixelStage()) {
              n[0].setGraphicSize(n[0].get_width() * z.daPixelZoom | 0);
            } else {
              n[0].setGraphicSize(n[0].get_width() * 0.2 | 0);
            }
            n[0].updateHitbox();
            n[0].acceleration.set_y(g.random.int(200, 300) * this.playbackRate * this.playbackRate);
            n[0].velocity.set_y(n[0].velocity.y - g.random.int(140, 160) * this.playbackRate);
            n[0].velocity.set_x(g.random.float(-5, 5) * this.playbackRate);
            n[0].set_visible(!C.data.hideHud);
            n[0].set_antialiasing(d);
            if (this.showComboNum) {
              this.comboGroup.add(n[0]);
            }
            var m = K.crochet * 0.002;
            Ha.tween(n[0], {
              alpha: 0
            }, 0.2 / this.playbackRate, {
              onComplete: function (a) {
                return function (b) {
                  a[0].destroy();
                };
              }(n),
              startDelay: m / this.playbackRate
            });
            ++h;
            if (n[0].x > l) {
              l = n[0].x;
            }
          }
          k.set_x(l + 50);
          Ha.tween(e, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            startDelay: K.crochet * 0.001 / this.playbackRate
          });
          Ha.tween(k, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            onComplete: function (a) {
              k.destroy();
              e.destroy();
            },
            startDelay: K.crochet * 0.002 / this.playbackRate
          });
        },
        onKeyPress: function (a) {
          a = a.keyCode;
          var b = z.getKeyFromEvent(this.keysArray, a);
          if (!this.get_controls().controllerMode) {
            if (g.keys.checkStatus(a, 2)) {
              this.keyPressed(b);
            }
          }
        },
        keyPressed: function (a) {
          if (!this.cpuControlled && !this.paused && !this.inCutscene && !(a < 0) && !(a >= this.playerStrums.length) && !!this.generatedMusic && !this.endingSong && !this.boyfriend.stunned && this.callOnScripts("onKeyPressPre", [a]) != Jb.Function_Stop) {
            var b = K.songPosition;
            if (K.songPosition >= 0) {
              K.songPosition = g.sound.music._time;
            }
            var c = [];
            for (var d = 0, e = this.notes.members; d < e.length;) {
              var f = e[d];
              ++d;
              var k = !this.strumsBlocked[f.noteData] && f.canBeHit && f.mustPress && !f.tooLate && !f.wasGoodHit && !f.blockHit;
              if (f != null && k && !f.isSustainNote && f.noteData == a) {
                c.push(f);
              }
            }
            c.sort(z.sortHitNotes);
            d = !C.data.ghostTapping;
            if (c.length != 0) {
              d = c[0];
              if (c.length > 1) {
                c = c[1];
                if (c.noteData == d.noteData) {
                  if (Math.abs(c.strumTime - d.strumTime) < 1) {
                    this.invalidateNote(c);
                  } else if (c.strumTime < d.strumTime) {
                    d = c;
                  }
                }
              }
              this.goodNoteHit(d);
            } else if (d) {
              this.callOnScripts("onGhostTap", [a]);
              this.noteMissPress(a);
            }
            if (this.keysPressed.indexOf(a) == -1) {
              this.keysPressed.push(a);
            }
            K.songPosition = b;
            b = this.playerStrums.members[a];
            if (this.strumsBlocked[a] != 1 && b != null && b.animation._curAnim.name != "confirm") {
              b.playAnim("pressed");
              b.resetAnim = 0;
            }
            this.callOnScripts("onKeyPress", [a]);
          }
        },
        onKeyRelease: function (a) {
          a = z.getKeyFromEvent(this.keysArray, a.keyCode);
          if (!this.get_controls().controllerMode && a > -1) {
            this.keyReleased(a);
          }
        },
        keyReleased: function (a) {
          if (!this.cpuControlled && !!this.startedCountdown && !this.paused && !(a < 0) && !(a >= this.playerStrums.length) && this.callOnScripts("onKeyReleasePre", [a]) != Jb.Function_Stop) {
            var b = this.playerStrums.members[a];
            if (b != null) {
              b.playAnim("static");
              b.resetAnim = 0;
            }
            this.callOnScripts("onKeyRelease", [a]);
          }
        },
        keysCheck: function () {
          var a = [];
          var b = [];
          var c = [];
          for (var d = 0, e = this.keysArray; d < e.length;) {
            var f = e[d];
            ++d;
            a.push(this.get_controls().pressed(f));
            if (this.get_controls().controllerMode) {
              b.push(this.get_controls().justPressed(f));
              c.push(this.get_controls().justReleased(f));
            }
          }
          if (this.get_controls().controllerMode && b.indexOf(true) != -1) {
            d = 0;
            e = b.length;
            while (d < e) {
              f = d++;
              if (b[f] && this.strumsBlocked[f] != 1) {
                this.keyPressed(f);
              }
            }
          }
          if (this.startedCountdown && !this.inCutscene && !this.boyfriend.stunned && this.generatedMusic) {
            if (this.notes.length > 0) {
              for (b = new Cc(this.notes.members, null); b.hasNext();) {
                d = b.next();
                e = d != null && !this.strumsBlocked[d.noteData] && d.canBeHit && d.mustPress && !d.tooLate && !d.wasGoodHit && !d.blockHit;
                if (this.guitarHeroSustains) {
                  e = e && d.parent != null && d.parent.wasGoodHit;
                }
                if (e && d.isSustainNote && a[d.noteData]) {
                  this.goodNoteHit(d);
                }
              }
            }
            if (a.indexOf(true) == -1 || this.endingSong) {
              this.playerDance();
            }
          }
          if ((this.get_controls().controllerMode || this.strumsBlocked.indexOf(true) != -1) && c.indexOf(true) != -1) {
            d = 0;
            e = c.length;
            while (d < e) {
              f = d++;
              if (c[f] || this.strumsBlocked[f] == 1) {
                this.keyReleased(f);
              }
            }
          }
        },
        noteMiss: function (a) {
          var b = this;
          this.notes.forEachAlive(function (c) {
            if (a != c && a.mustPress && a.noteData == c.noteData && a.isSustainNote == c.isSustainNote && Math.abs(a.strumTime - c.strumTime) < 1) {
              b.invalidateNote(c);
            }
          });
          this.noteMissCommon(a.noteData, a);
          var c = this.callOnLuas("noteMiss", [this.notes.members.indexOf(a), a.noteData, a.noteType, a.isSustainNote]);
          if (c != Jb.Function_Stop && c != Jb.Function_StopHScript && c != Jb.Function_StopAll) {
            this.callOnHScript("noteMiss", [a]);
          }
        },
        noteMissPress: function (a) {
          if (a == null) {
            a = 1;
          }
          if (!C.data.ghostTapping) {
            this.noteMissCommon(a);
            g.sound.play(E.sound("missnote" + g.random.int(1, 3), null), g.random.float(0.1, 0.2));
            this.callOnScripts("noteMissPress", [a]);
          }
        },
        noteMissCommon: function (a, b) {
          var c = 0.05;
          if (b != null) {
            c = b.missHealth;
          }
          if (b != null && this.guitarHeroSustains && b.parent == null) {
            if (b.tail.length > 0) {
              b.set_alpha(0.35);
              for (var d = 0, e = b.tail; d < e.length;) {
                var f = e[d];
                ++d;
                f.set_alpha(b.alpha);
                f.missed = true;
                f.canBeHit = false;
                f.ignoreNote = true;
                f.tooLate = true;
              }
              b.missed = true;
              b.canBeHit = false;
              c *= b.tail.length + 1;
            }
            if (b.missed) {
              return;
            }
          }
          if (b != null && this.guitarHeroSustains && b.parent != null && b.isSustainNote) {
            if (b.missed) {
              return;
            }
            e = b.parent;
            if (e.wasGoodHit && e.tail.length > 0) {
              d = 0;
              e = e.tail;
              while (d < e.length) {
                f = e[d];
                ++d;
                if (f != b) {
                  f.missed = true;
                  f.canBeHit = false;
                  f.ignoreNote = true;
                  f.tooLate = true;
                }
              }
            }
          }
          if (this.instakillOnMiss) {
            this.vocals.set_volume(0);
            this.opponentVocals.set_volume(0);
            this.doDeathCheck(true);
          }
          d = this.combo;
          this.combo = 0;
          this.set_health(this.health - c * this.healthLoss);
          if (!this.practiceMode) {
            this.songScore -= 10;
          }
          if (!this.endingSong) {
            this.songMisses++;
          }
          this.totalPlayed++;
          this.RecalculateRating(true);
          c = this.boyfriend;
          if (b != null && b.gfNote || z.SONG.notes[this.curSection] != null && z.SONG.notes[this.curSection].gfSection) {
            c = this.gf;
          }
          if (c != null && (b == null || !b.noMissAnimation) && !!c.hasMissAnimations && !c.specialAnim) {
            e = "";
            if (b != null) {
              e = b.animSuffix;
            }
            c.playAnim(this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a)) | 0] + "miss" + e, true);
            if (c != this.gf && d > 5 && this.gf != null && Object.prototype.hasOwnProperty.call(this.gf.animOffsets.h, "sad")) {
              this.gf.playAnim("sad");
              this.gf.specialAnim = true;
            }
          }
          this.vocals.set_volume(0);
        },
        opponentNoteHit: function (a) {
          var b = this.callOnLuas("opponentNoteHitPre", [this.notes.members.indexOf(a), Math.abs(a.noteData), a.noteType, a.isSustainNote]);
          if (b != Jb.Function_Stop && b != Jb.Function_StopHScript && b != Jb.Function_StopAll) {
            this.callOnHScript("opponentNoteHitPre", [a]);
          }
          if (this.songName != "tutorial") {
            this.camZooming = true;
          }
          if (a.noteType == "Hey!" && Object.prototype.hasOwnProperty.call(this.dad.animOffsets.h, "hey")) {
            this.dad.playAnim("hey", true);
            this.dad.specialAnim = true;
            this.dad.heyTimer = 0.6;
          } else if (!a.noAnimation) {
            var c = a.animSuffix;
            if (z.SONG.notes[this.curSection] != null && z.SONG.notes[this.curSection].altAnim && !z.SONG.notes[this.curSection].gfSection) {
              c = "-alt";
            }
            b = this.dad;
            c = this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a.noteData)) | 0] + c;
            if (a.gfNote) {
              b = this.gf;
            }
            if (b != null && !b.specialAnim) {
              b.playAnim(c, true);
              b.holdTimer = 0;
            }
          }
          this.vocals.set_volume(1);
          this.strumPlayAnim(true, Math.abs(a.noteData) | 0, K.stepCrochet * 1.25 / 1000 / this.playbackRate);
          a.hitByOpponent = true;
          b = this.callOnLuas("opponentNoteHit", [this.notes.members.indexOf(a), Math.abs(a.noteData), a.noteType, a.isSustainNote]);
          if (b != Jb.Function_Stop && b != Jb.Function_StopHScript && b != Jb.Function_StopAll) {
            this.callOnHScript("opponentNoteHit", [a]);
          }
          if (!a.isSustainNote) {
            this.invalidateNote(a);
          }
        },
        goodNoteHit: function (a) {
          if (!a.wasGoodHit && (!this.cpuControlled || !a.ignoreNote)) {
            var b = a.isSustainNote;
            var c = Math.round(Math.abs(a.noteData));
            var d = a.noteType;
            var e = this.callOnLuas("goodNoteHitPre", [this.notes.members.indexOf(a), c, d, b]);
            if (e != Jb.Function_Stop && e != Jb.Function_StopHScript && e != Jb.Function_StopAll) {
              this.callOnHScript("goodNoteHitPre", [a]);
            }
            a.wasGoodHit = true;
            if (C.data.hitsoundVolume > 0 && !a.hitsoundDisabled) {
              g.sound.play(E.sound(a.hitsound), C.data.hitsoundVolume);
            }
            if (a.hitCausesMiss) {
              if (!a.noMissAnimation && a.noteType == "Hurt Note" && Object.prototype.hasOwnProperty.call(this.boyfriend.animOffsets.h, "hurt")) {
                this.boyfriend.playAnim("hurt", true);
                this.boyfriend.specialAnim = true;
              }
              this.noteMiss(a);
              if (!a.noteSplashData.disabled && !a.isSustainNote) {
                this.spawnNoteSplashOnNote(a);
              }
            } else {
              if (!a.noAnimation) {
                e = this.singAnimations[Math.abs(Math.min(this.singAnimations.length - 1, a.noteData)) | 0];
                var f = this.boyfriend;
                var k = "hey";
                if (a.gfNote) {
                  f = this.gf;
                  k = "cheer";
                }
                if (f != null && !f.specialAnim) {
                  f.playAnim(e + a.animSuffix, true);
                  f.holdTimer = 0;
                  if (a.noteType == "Hey!" && Object.prototype.hasOwnProperty.call(f.animOffsets.h, k)) {
                    f.playAnim(k, true);
                    f.specialAnim = true;
                    f.heyTimer = 0.6;
                  }
                }
              }
              if (this.cpuControlled) {
                this.strumPlayAnim(false, Math.abs(a.noteData) | 0, K.stepCrochet * 1.25 / 1000 / this.playbackRate);
              } else {
                e = this.playerStrums.members[a.noteData];
                if (e != null) {
                  e.playAnim("confirm", true);
                }
              }
              this.vocals.set_volume(1);
              if (!a.isSustainNote) {
                this.combo++;
                if (this.combo > 9999) {
                  this.combo = 9999;
                }
                this.popUpScore(a);
              }
              e = true;
              if (this.guitarHeroSustains && a.isSustainNote) {
                e = false;
              }
              if (e) {
                this.set_health(this.health + a.hitHealth * this.healthGain);
              }
              e = this.callOnLuas("goodNoteHit", [this.notes.members.indexOf(a), c, d, b]);
              if (e != Jb.Function_Stop && e != Jb.Function_StopHScript && e != Jb.Function_StopAll) {
                this.callOnHScript("goodNoteHit", [a]);
              }
            }
            if (!a.isSustainNote) {
              this.invalidateNote(a);
            }
          }
        },
        invalidateNote: function (a) {
          a.kill();
          this.notes.remove(a, true);
          a.destroy();
        },
        spawnNoteSplashOnNote: function (a) {
          if (a != null) {
            var b = this.playerStrums.members[a.noteData];
            if (b != null) {
              this.spawnNoteSplash(b.x, b.y, a.noteData, a);
            }
          }
        },
        spawnNoteSplash: function (a, b, c, d) {
          var e = this.grpNoteSplashes.recycle(gc);
          e.setupNoteSplash(a, b, c, d);
          this.grpNoteSplashes.add(e);
        },
        destroy: function () {
          ia.get_current().stage.removeEventListener("keyDown", n(this, this.onKeyPress));
          ia.get_current().stage.removeEventListener("keyUp", n(this, this.onKeyRelease));
          g.animationTimeScale = 1;
          g.sound.music.set_pitch(1);
          Ta.globalRgbShaders = [];
          Yi.clearNoteTypesData();
          z.instance = null;
          P.prototype.destroy.call(this);
        },
        stepHit: function () {
          P.prototype.stepHit.call(this);
          if (Math.abs(g.sound.music._time - (K.songPosition - K.offset)) > 20 || z.SONG.needsVoices && Math.abs(this.vocals._time - (K.songPosition - K.offset)) > 20) {
            this.resyncVocals();
          }
          if (this.curStep != this.lastStepHit) {
            this.lastStepHit = this.curStep;
            this.setOnScripts("curStep", this.curStep);
            this.callOnScripts("onStepHit");
          }
        },
        beatHit: function () {
          if (!(this.lastBeatHit >= this.curBeat)) {
            if (this.generatedMusic) {
              var a = C.data.downScroll ? -1 : 1;
              if (a == null) {
                a = -1;
              }
              var b = eo.byY;
              var c = a;
              this.notes.members.sort(function (a, d) {
                return b(c, a, d);
              });
            }
            a = this.iconP1.scale;
            var d = 1.2;
            var e = 1.2;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            a.set_x(d);
            a.set_y(e);
            a = this.iconP2.scale;
            e = d = 1.2;
            if (e == null) {
              e = 0;
            }
            if (d == null) {
              d = 0;
            }
            a.set_x(d);
            a.set_y(e);
            this.iconP1.updateHitbox();
            this.iconP2.updateHitbox();
            this.characterBopper(this.curBeat);
            P.prototype.beatHit.call(this);
            this.lastBeatHit = this.curBeat;
            this.setOnScripts("curBeat", this.curBeat);
            this.callOnScripts("onBeatHit");
          }
        },
        characterBopper: function (a) {
          if (this.gf != null && a % Math.round(this.gfSpeed * this.gf.danceEveryNumBeats) == 0) {
            var b = this.gf;
            var c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !v.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (b && !this.gf.stunned) {
            this.gf.dance();
          }
          if (this.boyfriend != null && a % this.boyfriend.danceEveryNumBeats == 0) {
            b = this.boyfriend;
            c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !v.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (!!b && !this.boyfriend.stunned && !this.boyfriend.specialAnim) {
            this.boyfriend.dance();
          }
          if (this.dad != null && a % this.dad.danceEveryNumBeats == 0) {
            b = this.dad;
            c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            b = !v.startsWith(c ?? "", "sing");
          } else {
            b = false;
          }
          if (!!b && !this.dad.stunned && !this.dad.specialAnim) {
            this.dad.dance();
          }
        },
        playerDance: function () {
          var a = this.boyfriend;
          var b = "";
          if (a.isAnimateAtlas ? a.atlas.anim.get_curSymbol() != null : a.animation._curAnim != null) {
            b = a.isAnimateAtlas ? a.atlas.anim.lastPlayedAnim : a.animation._curAnim.name;
          }
          a = b ?? "";
          if (this.boyfriend.holdTimer > 0.0011 / g.sound.music._pitch * K.stepCrochet * this.boyfriend.singDuration && v.startsWith(a, "sing") && !v.endsWith(a, "miss")) {
            this.boyfriend.dance();
          }
        },
        sectionHit: function () {
          if (z.SONG.notes[this.curSection] != null) {
            if (!!this.generatedMusic && !this.endingSong && !this.isCameraOnForcedPos) {
              this.moveCameraSection();
            }
            if (this.camZooming && g.camera.zoom < 1.35 && C.data.camZooms) {
              var a = g.camera;
              a.set_zoom(a.zoom + this.camZoomingMult * 0.015);
              a = this.camHUD;
              a.set_zoom(a.zoom + this.camZoomingMult * 0.03);
            }
            if (z.SONG.notes[this.curSection].changeBPM) {
              K.set_bpm(z.SONG.notes[this.curSection].bpm);
              this.setOnScripts("curBpm", K.bpm);
              this.setOnScripts("crochet", K.crochet);
              this.setOnScripts("stepCrochet", K.stepCrochet);
            }
            this.mustHit = z.SONG.notes[this.curSection].mustHitSection;
            this.setOnScripts("mustHitSection", z.SONG.notes[this.curSection].mustHitSection);
            this.setOnScripts("altAnim", z.SONG.notes[this.curSection].altAnim);
            this.setOnScripts("gfSection", z.SONG.notes[this.curSection].gfSection);
          }
          P.prototype.sectionHit.call(this);
          this.setOnScripts("curSection", this.curSection);
          this.callOnScripts("onSectionHit");
        },
        callOnScripts: function (a, b, c, d, e) {
          if (c == null) {
            c = false;
          }
          if (b == null) {
            b = [];
          }
          if (d == null) {
            d = [];
          }
          if (e == null) {
            e = [Jb.Function_Continue];
          }
          var f = this.callOnLuas(a, b, c, d, e);
          if (f == null || e.indexOf(f) != -1) {
            f = this.callOnHScript(a, b, c, d, e);
          }
          return f;
        },
        callOnLuas: function (a, b, c, d, e) {
          return Jb.Function_Continue;
        },
        callOnHScript: function (a, b, c, d, e) {
          return Jb.Function_Continue;
        },
        setOnScripts: function (a, b, c) {
          if (c == null) {
            c = [];
          }
          this.setOnLuas(a, b, c);
          this.setOnHScript(a, b, c);
        },
        setOnLuas: function (a, b, c) {},
        setOnHScript: function (a, b, c) {},
        strumPlayAnim: function (a, b, c) {
          a = a ? this.opponentStrums.members[b] : this.playerStrums.members[b];
          if (a != null) {
            a.playAnim("confirm", true);
            a.resetAnim = c;
          }
        },
        RecalculateRating: function (a) {
          if (a == null) {
            a = false;
          }
          this.setOnScripts("score", this.songScore);
          this.setOnScripts("misses", this.songMisses);
          this.setOnScripts("hits", this.songHits);
          this.setOnScripts("combo", this.combo);
          if (this.callOnScripts("onRecalculateRating", null, true) != Jb.Function_Stop) {
            this.ratingName = "?";
            if (this.totalPlayed != 0 && (this.ratingPercent = Math.min(1, Math.max(0, this.totalNotesHit / this.totalPlayed)), this.ratingName = z.ratingStuff[z.ratingStuff.length - 1][0], this.ratingPercent < 1)) {
              for (var b = 0, c = z.ratingStuff.length - 1; b < c;) {
                var d = b++;
                if (this.ratingPercent < z.ratingStuff[d][1]) {
                  this.ratingName = z.ratingStuff[d][0];
                  break;
                }
              }
            }
            this.fullComboFunction();
          }
          this.updateScore(a);
          this.setOnScripts("rating", this.ratingPercent);
          this.setOnScripts("ratingName", this.ratingName);
          this.setOnScripts("ratingFC", this.ratingFC);
        },
        getFlxEaseByString: function (a) {
          if (a == null) {
            a = "";
          }
          switch (v.trim(a.toLowerCase())) {
            case "backin":
              return X.backIn;
            case "backinout":
              return X.backInOut;
            case "backout":
              return X.backOut;
            case "bouncein":
              return X.bounceIn;
            case "bounceinout":
              return X.bounceInOut;
            case "bounceout":
              return X.bounceOut;
            case "circin":
              return X.circIn;
            case "circinout":
              return X.circInOut;
            case "circout":
              return X.circOut;
            case "cubein":
              return X.cubeIn;
            case "cubeinout":
              return X.cubeInOut;
            case "cubeout":
              return X.cubeOut;
            case "elasticin":
              return X.elasticIn;
            case "elasticinout":
              return X.elasticInOut;
            case "elasticout":
              return X.elasticOut;
            case "expoin":
              return X.expoIn;
            case "expoinout":
              return X.expoInOut;
            case "expoout":
              return X.expoOut;
            case "quadin":
              return X.quadIn;
            case "quadinout":
              return X.quadInOut;
            case "quadout":
              return X.quadOut;
            case "quartin":
              return X.quartIn;
            case "quartinout":
              return X.quartInOut;
            case "quartout":
              return X.quartOut;
            case "quintin":
              return X.quintIn;
            case "quintinout":
              return X.quintInOut;
            case "quintout":
              return X.quintOut;
            case "sinein":
              return X.sineIn;
            case "sineinout":
              return X.sineInOut;
            case "sineout":
              return X.sineOut;
            case "smootherstepin":
              return X.smootherStepIn;
            case "smootherstepinout":
              return X.smootherStepInOut;
            case "smootherstepout":
              return X.smootherStepOut;
            case "smoothstepin":
              return X.smoothStepIn;
            case "smoothstepinout":
              return X.smoothStepInOut;
            case "smoothstepout":
              return X.smoothStepInOut;
          }
          return X.linear;
        },
        flicker: function (a, b, c) {
          var d = this;
          a.set_visible(!a.visible);
          this.lol = new Gc().start(c, function (b) {
            a.set_visible(!a.visible);
            b = d.lol;
            if (b.loops - b._loopsCounter == 0) {
              a.set_visible(true);
            }
          }, b / c | 0);
        },
        __class__: z,
        __properties__: q(P.prototype.__properties__, {
          set_health: "set_health",
          set_playbackRate: "set_playbackRate",
          set_songSpeed: "set_songSpeed"
        })
      });
      function Nb(a, b) {
        this.lerpScore = this.intendedScore = 0;
        this.movedBack = this.selectedWeek = this.stopspamming = false;
        this.loadedWeeks = [];
        this.curDifficulty = 1;
        P.call(this, a, b);
      }
      h["states.StoryMenuState"] = Nb;
      Nb.__name__ = "states.StoryMenuState";
      Nb.__super__ = P;
      Nb.prototype = q(P.prototype, {
        create: function () {
          E.clearStoredMemory();
          E.clearUnusedMemory();
          z.isStoryMode = true;
          jb.reloadWeekFiles(true);
          if (Nb.curWeek >= jb.weeksList.length) {
            Nb.curWeek = 0;
          }
          this.persistentUpdate = this.persistentDraw = true;
          this.scoreText = new R(10, 10, 0, "SCORE: 49324858", 36);
          this.scoreText.setFormat("assets/fonts/vcr.ttf", 32);
          this.txtWeekTitle = new R(g.width * 0.7, 10, 0, "", 32);
          this.txtWeekTitle.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
          this.txtWeekTitle.set_alpha(0.7);
          var a = new R(0, 10);
          a.set_text("RANK: GREAT");
          a.setFormat("assets/fonts/vcr.ttf", 32);
          a.set_size(this.scoreText._defaultFormat.size | 0);
          var b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          var c = E.image("campaign_menu_UI_assets", null, true);
          c = Sa.fromSparrow(c, E.getPath("images/campaign_menu_UI_assets.xml", null, null));
          var d = new G(0, 56).makeGraphic(g.width, 386, -405679);
          this.bgSprite = new G(0, 56);
          this.grpWeekText = new ab();
          this.add(this.grpWeekText);
          var e = new G().makeGraphic(g.width, 56, -16777216);
          this.add(e);
          this.grpWeekCharacters = new ab();
          this.grpLocks = new ab();
          this.add(this.grpLocks);
          for (var f = e = 0, k = jb.weeksList.length; f < k;) {
            var h = f++;
            b = jb.weeksLoaded.h[jb.weeksList[h]];
            var l = this.weekIsLocked(jb.weeksList[h]);
            if (!l || !b.hiddenUntilUnlocked) {
              this.loadedWeeks.push(b);
              jb.setDirectoryFromWeek(b);
              var p = new Nj(0, this.bgSprite.y + 396, jb.weeksList[h]);
              p.set_y(p.y + (p.get_height() + 20) * e);
              p.targetY = e;
              this.grpWeekText.add(p);
              b = 1;
              if (b == null) {
                b = 17;
              }
              if (b == 1 || b == 17) {
                p.set_x((g.width - p.get_width()) / 2);
              }
              if (b == 16 || b == 17) {
                p.set_y((g.height - p.get_height()) / 2);
              }
              if (l) {
                l = new G(p.get_width() + 10 + p.x);
                l.set_antialiasing(C.data.antialiasing);
                l.set_frames(c);
                l.animation.addByPrefix("lock", "lock");
                l.animation.play("lock");
                l.ID = h;
                this.grpLocks.add(l);
              }
              ++e;
            }
          }
          jb.setDirectoryFromWeek(this.loadedWeeks[0]);
          e = this.loadedWeeks[0].weekCharacters;
          f = new qe(g.width * 0.25 - 150, e[0]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          f = new qe(g.width * 0.5 - 150, e[1]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          f = new qe(g.width * 0.75 - 150, e[2]);
          f.set_y(f.y + 70);
          this.grpWeekCharacters.add(f);
          this.difficultySelectors = new ab();
          this.add(this.difficultySelectors);
          this.leftArrow = new G(this.grpWeekText.members[0].x + this.grpWeekText.members[0].get_width() + 10, this.grpWeekText.members[0].y + 10);
          this.leftArrow.set_antialiasing(C.data.antialiasing);
          this.leftArrow.set_frames(c);
          this.leftArrow.animation.addByPrefix("idle", "arrow left");
          this.leftArrow.animation.addByPrefix("press", "arrow push left");
          this.leftArrow.animation.play("idle");
          this.difficultySelectors.add(this.leftArrow);
          qb.list = qb.defaultList.slice();
          if (Nb.lastDifficultyName == "") {
            Nb.lastDifficultyName = qb.defaultDifficulty;
          }
          this.curDifficulty = Math.round(Math.max(0, qb.defaultList.indexOf(Nb.lastDifficultyName)));
          this.sprDifficulty = new G(0, this.leftArrow.y);
          this.sprDifficulty.set_antialiasing(C.data.antialiasing);
          this.difficultySelectors.add(this.sprDifficulty);
          this.rightArrow = new G(this.leftArrow.x + 376, this.leftArrow.y);
          this.rightArrow.set_antialiasing(C.data.antialiasing);
          this.rightArrow.set_frames(c);
          this.rightArrow.animation.addByPrefix("idle", "arrow right");
          this.rightArrow.animation.addByPrefix("press", "arrow push right", 24, false);
          this.rightArrow.animation.play("idle");
          this.difficultySelectors.add(this.rightArrow);
          this.add(d);
          this.add(this.bgSprite);
          this.add(this.grpWeekCharacters);
          c = new G(g.width * 0.07, this.bgSprite.y + 425).loadGraphic(E.image("Menu_Tracks"));
          c.set_antialiasing(C.data.antialiasing);
          this.add(c);
          this.txtTracklist = new R(g.width * 0.05, c.y + 60, 0, "", 32);
          this.txtTracklist.set_alignment("center");
          this.txtTracklist.set_font(a._font);
          this.txtTracklist.set_color(-1747081);
          this.add(this.txtTracklist);
          this.add(this.scoreText);
          this.add(this.txtWeekTitle);
          this.changeWeek();
          this.changeDifficulty();
          P.prototype.create.call(this);
        },
        closeSubState: function () {
          this.persistentUpdate = true;
          this.changeWeek();
          P.prototype.closeSubState.call(this);
        },
        update: function (a) {
          var b = this;
          var c = this.intendedScore;
          this.lerpScore = Math.floor(c + Math.exp(-a * 30) * (this.lerpScore - c));
          if (Math.abs(this.intendedScore - this.lerpScore) < 10) {
            this.lerpScore = this.intendedScore;
          }
          this.scoreText.set_text("WEEK SCORE:" + this.lerpScore);
          if (!this.movedBack && !this.selectedWeek) {
            c = this.get_controls().get_UI_UP_P();
            var d = this.get_controls().get_UI_DOWN_P();
            if (c) {
              this.changeWeek(-1);
              g.sound.play(E.sound("scrollMenu"));
            }
            if (d) {
              this.changeWeek(1);
              g.sound.play(E.sound("scrollMenu"));
            }
            if (g.mouse.wheel != 0) {
              g.sound.play(E.sound("scrollMenu"), 0.4);
              this.changeWeek(-g.mouse.wheel);
              this.changeDifficulty();
            }
            if (this.get_controls().get_UI_RIGHT()) {
              this.rightArrow.animation.play("press");
            } else {
              this.rightArrow.animation.play("idle");
            }
            if (this.get_controls().get_UI_LEFT()) {
              this.leftArrow.animation.play("press");
            } else {
              this.leftArrow.animation.play("idle");
            }
            if (this.get_controls().get_UI_RIGHT_P()) {
              this.changeDifficulty(1);
            } else if (this.get_controls().get_UI_LEFT_P()) {
              this.changeDifficulty(-1);
            } else if (c || d) {
              this.changeDifficulty();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(17, c.status)) {
              this.persistentUpdate = false;
              this.openSubState(new dn());
            } else if (this.get_controls().get_RESET()) {
              this.persistentUpdate = false;
              this.openSubState(new fk("", this.curDifficulty, "", Nb.curWeek));
            } else if (this.get_controls().get_ACCEPT()) {
              this.selectWeek();
            }
          }
          if (!!this.get_controls().get_BACK() && !this.movedBack && !this.selectedWeek) {
            g.sound.play(E.sound("cancelMenu"));
            this.movedBack = true;
            P.switchState(new vd());
          }
          P.prototype.update.call(this, a);
          this.grpLocks.forEach(function (a) {
            a.set_y(b.grpWeekText.members[a.ID].y);
            a.set_visible(a.y > g.height / 2);
          });
        },
        selectWeek: function () {
          if (this.weekIsLocked(this.loadedWeeks[Nb.curWeek].fileName)) {
            g.sound.play(E.sound("cancelMenu"));
          } else {
            var a = [];
            var b = this.loadedWeeks[Nb.curWeek].songs;
            for (var c = 0, d = b.length; c < d;) {
              var e = c++;
              a.push(b[e][0]);
            }
            try {
              z.storyPlaylist = a;
              this.selectedWeek = z.isStoryMode = true;
              var f = this.curDifficulty;
              if (f == null) {
                f = z.storyDifficulty;
              }
              var k = qb.list[f];
              k = k != qb.defaultDifficulty ? "-" + k : "";
              var h = new na("[~&\\\\;:<>#]", "");
              var l = new na("[.,'\"%?!]", "");
              var p = h.split(v.replace(k, " ", "-")).join("-");
              var n = l.split(p).join("").toLowerCase();
              if (n == null) {
                n = "";
              }
              z.storyDifficulty = this.curDifficulty;
              z.SONG = Ld.loadFromJson(z.storyPlaylist[0].toLowerCase() + n, z.storyPlaylist[0].toLowerCase());
              z.campaignScore = 0;
              z.campaignMisses = 0;
            } catch (m) {
              Oa.lastError = m;
              c = I.caught(m).unwrap();
              Ab.trace("ERROR! " + y.string(c), {
                fileName: "source/states/StoryMenuState.hx",
                lineNumber: 306,
                className: "states.StoryMenuState",
                methodName: "selectWeek"
              });
              return;
            }
            if (this.stopspamming == 0) {
              g.sound.play(E.sound("confirmMenu"));
              this.grpWeekText.members[Nb.curWeek].set_isFlashing(true);
              c = 0;
              for (d = this.grpWeekCharacters.members; c < d.length;) {
                a = d[c];
                ++c;
                if (a.character != "" && a.hasConfirmAnimation) {
                  a.animation.play("confirm");
                }
              }
              this.stopspamming = true;
            }
            new Gc().start(1, function (a) {
              a = new z();
              var b = true;
              if (b == null) {
                b = false;
              }
              P.switchState(tc.getNextState(a, b));
              Va.destroyFreeplayVocals();
            });
          }
        },
        changeDifficulty: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this;
          this.curDifficulty += a;
          if (this.curDifficulty < 0) {
            this.curDifficulty = qb.list.length - 1;
          }
          if (this.curDifficulty >= qb.list.length) {
            this.curDifficulty = 0;
          }
          jb.setDirectoryFromWeek(this.loadedWeeks[Nb.curWeek]);
          a = this.curDifficulty;
          a = qb.list[a == null ? z.storyDifficulty : a];
          var c = new na("[~&\\\\;:<>#]", "");
          var d = new na("[.,'\"%?!]", "");
          c = c.split(v.replace(a, " ", "-")).join("-");
          d = E.image("menudifficulties/" + d.split(c).join("").toLowerCase());
          if (this.sprDifficulty.graphic != d) {
            this.sprDifficulty.loadGraphic(d);
            this.sprDifficulty.set_x(this.leftArrow.x + 60);
            d = this.sprDifficulty;
            d.set_x(d.x + (308 - this.sprDifficulty.get_width()) / 3);
            this.sprDifficulty.set_alpha(0);
            this.sprDifficulty.set_y(this.leftArrow.y - 15);
            if (this.tweenDifficulty != null) {
              this.tweenDifficulty.cancel();
            }
            this.tweenDifficulty = Ha.tween(this.sprDifficulty, {
              y: this.leftArrow.y + 15,
              alpha: 1
            }, 0.07, {
              onComplete: function (a) {
                b.tweenDifficulty = null;
              }
            });
          }
          Nb.lastDifficultyName = a;
          this.intendedScore = Ya.getWeekScore(this.loadedWeeks[Nb.curWeek].fileName, this.curDifficulty);
        },
        changeWeek: function (a) {
          if (a == null) {
            a = 0;
          }
          Nb.curWeek += a;
          if (Nb.curWeek >= this.loadedWeeks.length) {
            Nb.curWeek = 0;
          }
          if (Nb.curWeek < 0) {
            Nb.curWeek = this.loadedWeeks.length - 1;
          }
          var b = this.loadedWeeks[Nb.curWeek];
          jb.setDirectoryFromWeek(b);
          this.txtWeekTitle.set_text(b.storyName.toUpperCase());
          this.txtWeekTitle.set_x(g.width - (this.txtWeekTitle.get_width() + 10));
          var c = 0;
          a = !this.weekIsLocked(b.fileName);
          for (var d = 0, e = this.grpWeekText.members; d < e.length;) {
            var f = e[d];
            ++d;
            f.targetY = c - Nb.curWeek;
            if (f.targetY == 0 && a) {
              f.set_alpha(1);
            } else {
              f.set_alpha(0.6);
            }
            ++c;
          }
          this.bgSprite.set_visible(true);
          b = b.weekBackground;
          if (b == null || b.length < 1) {
            this.bgSprite.set_visible(false);
          } else {
            this.bgSprite.loadGraphic(E.image("menubackgrounds/menu_" + b));
          }
          z.storyWeek = Nb.curWeek;
          b = null;
          if (b == null) {
            b = jb.getCurrentWeek();
          }
          b = b.difficulties;
          if (b != null && b.length > 0) {
            b = v.trim(b).split(",");
            for (c = b.length - 1; c > 0;) {
              if (b[c] != null) {
                b[c] = v.trim(b[c]);
                if (b[c].length < 1) {
                  L.remove(b, b[c]);
                }
              }
              --c;
            }
            if (b.length > 0 && b[0].length > 0) {
              qb.list = b;
            }
          } else {
            qb.list = qb.defaultList.slice();
          }
          this.difficultySelectors.set_visible(a);
          if (qb.list.indexOf(qb.defaultDifficulty) != -1) {
            this.curDifficulty = Math.round(Math.max(0, qb.defaultList.indexOf(qb.defaultDifficulty)));
          } else {
            this.curDifficulty = 0;
          }
          a = qb.list.indexOf(Nb.lastDifficultyName);
          if (a > -1) {
            this.curDifficulty = a;
          }
          this.updateText();
        },
        weekIsLocked: function (a) {
          a = jb.weeksLoaded.h[a];
          if (!a.startUnlocked && a.weekBefore.length > 0) {
            if (Object.prototype.hasOwnProperty.call(Nb.weekCompleted.h, a.weekBefore)) {
              return !Nb.weekCompleted.h[a.weekBefore];
            } else {
              return true;
            }
          } else {
            return false;
          }
        },
        updateText: function () {
          var a = this.loadedWeeks[Nb.curWeek].weekCharacters;
          for (var b = 0, c = this.grpWeekCharacters.length; b < c;) {
            var d = b++;
            this.grpWeekCharacters.members[d].changeCharacter(a[d]);
          }
          var e = this.loadedWeeks[Nb.curWeek];
          a = [];
          b = 0;
          for (c = e.songs.length; b < c;) {
            d = b++;
            a.push(e.songs[d][0]);
          }
          this.txtTracklist.set_text("");
          b = 0;
          for (c = a.length; b < c;) {
            d = b++;
            e = this.txtTracklist;
            e.set_text(e.text + (a[d] + "\n"));
          }
          this.txtTracklist.set_text(this.txtTracklist.text.toUpperCase());
          b = this.txtTracklist;
          c = 1;
          if (c == null) {
            c = 17;
          }
          if (c == 1 || c == 17) {
            b.set_x((g.width - b.get_width()) / 2);
          }
          if (c == 16 || c == 17) {
            b.set_y((g.height - b.get_height()) / 2);
          }
          e = this.txtTracklist;
          e.set_x(e.x - g.width * 0.35);
          this.intendedScore = Ya.getWeekScore(this.loadedWeeks[Nb.curWeek].fileName, this.curDifficulty);
        },
        __class__: Nb
      });
      function Qc(a, b) {
        this.titleTimer = 0;
        this.transitioning = this.newTitle = false;
        this.swagShader = null;
        this.mustUpdate = this.danceLeft = false;
        this.curWacky = [];
        this.titleTextAlphas = [1, 0.64];
        this.titleTextColors = [-13369345, -13421620];
        P.call(this, a, b);
      }
      h["states.TitleState"] = Qc;
      Qc.__name__ = "states.TitleState";
      Qc.__super__ = P;
      Qc.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          E.clearStoredMemory();
          ve.loadTopMod();
          g.fixedTimestep = false;
          g.game.focusLostFramerate = 60;
          g.keys.preventDefaultKeys = [9];
          P.prototype.create.call(this);
          var b = g.save;
          var c = ia.get_current().stage.application.meta.h.company;
          b.bind("ShucksDemo", "" + c + "/" + Jd.validate(ia.get_current().stage.application.meta.h.file));
          C.loadPrefs();
          Ya.load();
          this.titleJSON = Uh.parse(E.getTextFromFile("images/gfDanceTitle.json"));
          if (!Qc.initialized) {
            if (g.save.data != null && g.save.data.fullscreen) {
              g.set_fullscreen(g.save.data.fullscreen);
            }
            this.persistentDraw = this.persistentUpdate = true;
          }
          if (g.save.data.weekCompleted != null) {
            Nb.weekCompleted = g.save.data.weekCompleted;
          }
          g.mouse.set_visible(false);
          if (g.save.data.flashing != null || gh.leftState) {
            if (Qc.initialized) {
              this.startIntro();
            } else {
              new Gc().start(1, function (b) {
                a.startIntro();
              });
            }
          } else {
            Vb.skipNextTransIn = true;
            Vb.skipNextTransOut = true;
            P.switchState(new gh());
          }
        },
        startIntro: function () {
          if (!Qc.initialized && g.sound.music == null) {
            var a = g.sound;
            var b = E.returnSound("music", "freakyMenu", null);
            a.playMusic(b, 0);
          }
          this.spikeU = new Zh(E.image("menus/title/spikes"), 1);
          this.spikeD = new Zh(E.image("menus/title/spikes"), 1);
          this.logo = new Db("menus/title/logo", 0, 0);
          this.start = new Db("menus/title/start", 0, 0);
          this.glow = new Db("menus/title/start-glow", g.width / 2 - 582, g.height);
          K.set_bpm(this.titleJSON.bpm);
          this.persistentUpdate = true;
          a = 0;
          for (b = [new Db("menus/title/bg", 0, 0), new Db("menus/title/pillar-3", 0, 0), new Db("menus/title/pillar-2", 0, 0), new Db("menus/title/pillar-1", 0, 0), new Db("menus/title/pillar-mid", 0, 0), new Db("menus/title/pillar-edge", 0, 0), this.spikeU, this.spikeD, this.logo]; a < b.length;) {
            var c = b[a];
            var d = a++;
            switch (d) {
              case 0:
                var e = 0.2;
                break;
              case 1:
                e = 0.3;
                break;
              case 2:
                e = 0.4;
                break;
              case 3:
                e = 0.5;
                break;
              default:
                e = 1;
            }
            d = c.scrollFactor;
            var f = e;
            if (e == null) {
              e = 0;
            }
            if (f == null) {
              f = 0;
            }
            d.set_x(f);
            d.set_y(e);
            c.set_antialiasing(true);
            c.set_x((g.width - c.get_width()) / 2);
            c.set_y((g.height - c.get_height()) / 2);
            this.add(c);
          }
          this.insert(this.members.indexOf(this.logo), this.start);
          this.start.setPosition(this.glow.x + 382, this.glow.y + 114);
          this.glow.set_blend(0);
          this.add(this.glow);
          this.glow.set_color(-917428);
          this.start.set_antialiasing(this.glow.set_antialiasing(true));
          a = this.spikeU;
          d = a.scrollFactor;
          d.set_x(0);
          d.set_y(0);
          a.velocity.set_x(-30);
          a.setPosition(g.width / 2 - a.get_width() / 2, -this.spikeU.get_height());
          a.scrollFactor.set_x(0);
          a.set_flipY(false);
          a.set_antialiasing(true);
          a = this.spikeD;
          d = a.scrollFactor;
          d.set_x(0);
          d.set_y(0);
          a.velocity.set_x(30);
          a.setPosition(g.width / 2 - a.get_width() / 2, 720);
          a.scrollFactor.set_x(0);
          a.set_flipY(true);
          a.set_antialiasing(true);
          a = new Db("menus/title/vignette", 0, 0);
          a.set_x((g.width - a.get_width()) / 2);
          a.set_y((g.height - a.get_height()) / 2);
          this.add(a);
          d = a.scrollFactor;
          d.set_x(0);
          d.set_y(0);
          g.camera.set_zoom(1.25);
          this.spikeU.set_alpha(this.spikeD.set_alpha(0));
          Qc.initialized = true;
          E.clearUnusedMemory();
        },
        update: function (a) {
          if (g.sound.music != null) {
            K.songPosition = g.sound.music._time;
          }
          var b = g.keys.justPressed;
          var c = b.keyManager.checkStatusUnsafe(13, b.status) || this.get_controls().get_ACCEPT();
          var d = g.gamepads.lastActive;
          if (d != null) {
            b = d.justPressed;
            d = b.gamepad;
            b = b.status;
            var e = d.mapping.getRawID(7);
            d = d.buttons[e];
            if (d != null && d.hasState(b)) {
              c = true;
            }
          }
          if (this.newTitle) {
            d = a < 0 ? 0 : a;
            this.titleTimer += d > 1 ? 1 : d;
            if (this.titleTimer > 2) {
              this.titleTimer -= 2;
            }
          }
          if (Qc.initialized && !this.transitioning) {
            if (this.newTitle && !c) {
              d = this.titleTimer;
              if (d >= 1) {
                d = -d + 2;
              }
              d = d <= 0.5 ? d * d * 2 : 1 - --d * d * 2;
            }
            if (c) {
              c = this.glow.alpha;
              this.glow.set_alpha(c + (0.1 - c) * 0.04);
              g.camera.flash(C.data.flashing ? -1 : 1291845631, 1);
              g.sound.play(E.sound("confirmMenu"), 0.7);
              this.transitioning = true;
              new Gc().start(1, function (a) {
                P.switchState(new vd());
              });
            }
            c = g.camera.zoom;
            g.camera.set_zoom(c + ((this.transitioning ? 1.25 : 1) - c) * 0.04);
            c = this.logo.y;
            this.logo.set_y(c + (g.height / 2 - this.logo.get_height() / 2 + (this.transitioning ? 0 : -50) - c) * 0.04);
            c = this.glow.y;
            this.glow.set_y(c + ((this.transitioning ? 720 : g.height - 316) - c) * 0.04);
            this.start.setPosition(this.glow.x + 382, this.glow.y + 114);
            c = this.spikeU.alpha;
            this.spikeU.set_alpha(this.spikeD.set_alpha(c + ((this.transitioning ? 0 : 1) - c) * 0.04));
            c = this.spikeU.y;
            this.spikeU.set_y(c + ((this.transitioning ? -this.spikeU.get_height() : 0) - c) * 0.04);
            c = this.spikeD.y;
            this.spikeD.set_y(c + ((this.transitioning ? 720 : g.height - this.spikeD.get_height()) - c) * 0.04);
          }
          P.prototype.update.call(this, a);
        },
        __class__: Qc
      });
      function gk(a, b) {
        if (b == null) {
          b = true;
        }
        this.characterList = [];
        this.assetFolder = "week1";
        this.undoOffsets = null;
        this.holdingArrowsTime = this.holdingArrowsElapsed = this.holdingFrameTime = this.holdingFrameElapsed = 0;
        this.ghostAlpha = 0.6;
        this.curAnim = 0;
        this.anims = null;
        this._goToPlayState = true;
        this._char = null;
        this.copiedOffset = [0, 0];
        var c = 0;
        var d = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = da.pool.get().set(c, d);
        d._inPool = false;
        d._weak = true;
        this.bfPosition = d;
        d = c = 0;
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        d = da.pool.get().set(c, d);
        d._inPool = false;
        d._weak = true;
        this.dadPosition = d;
        this.isAnimateSprite = false;
        this._char = a;
        this._goToPlayState = b;
        if (this._char == null) {
          this._char = ad.DEFAULT_CHARACTER;
        }
        P.call(this);
      }
      h["states.editors.CharacterEditorState"] = gk;
      gk.__name__ = "states.editors.CharacterEditorState";
      gk.__super__ = P;
      gk.prototype = q(P.prototype, {
        create: function () {
          if (C.data.cacheOnGPU) {
            E.clearStoredMemory();
          }
          var a = g.sound.music;
          a.cleanup(a.autoDestroy, true);
          this.camEditor = this.initPsychCamera();
          this.camHUD = new Pb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          g.cameras.add(this.camHUD, false);
          var b = E.currentLevel;
          E.currentLevel = this.assetFolder;
          a = new Db("stageback", -600, -200, 0.9, 0.9);
          this.add(a);
          a = new Db("stagefront", -650, 600, 0.9, 0.9);
          a.setGraphicSize(a.get_width() * 1.1 | 0);
          a.updateHitbox();
          this.add(a);
          a = this.dadPosition;
          var c = 100;
          var d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          a = this.bfPosition;
          c = 770;
          d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          E.currentLevel = b;
          this.animsTxtGroup = new ab();
          this.silhouettes = new Na();
          this.add(this.silhouettes);
          b = new G(this.dadPosition.x, this.dadPosition.y).loadGraphic(E.image("editors/silhouetteDad"));
          b.set_antialiasing(C.data.antialiasing);
          b.set_active(false);
          a = b.offset;
          c = -4;
          d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          this.silhouettes.add(b);
          b = new G(this.bfPosition.x, this.bfPosition.y + 350).loadGraphic(E.image("editors/silhouetteBF"));
          b.set_antialiasing(C.data.antialiasing);
          b.set_active(false);
          a = b.offset;
          c = -6;
          d = 2;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          a.set_x(c);
          a.set_y(d);
          this.silhouettes.add(b);
          this.silhouettes.set_alpha(0.25);
          this.ghost = new G();
          this.ghost.set_visible(false);
          this.ghost.set_alpha(this.ghostAlpha);
          this.add(this.ghost);
          this.addCharacter();
          this.cameraFollowPointer = new G().loadGraphic(cc.fromClass(li));
          this.cameraFollowPointer.setGraphicSize(40, 40);
          this.cameraFollowPointer.updateHitbox();
          this.add(this.cameraFollowPointer);
          this.healthBar = new Eh(30, g.height - 75);
          a = this.healthBar.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.healthBar);
          this.healthBar.set_cameras([this.camHUD]);
          this.healthIcon = new Mf(this.character.healthIcon, false, false);
          this.healthIcon.set_y(g.height - 150);
          this.add(this.healthIcon);
          this.healthIcon.set_cameras([this.camHUD]);
          this.animsTxtGroup.set_cameras([this.camHUD]);
          this.add(this.animsTxtGroup);
          b = new R(g.width - 300, g.height - 24, 300, "Press F1 for Help", 16);
          b.set_cameras([this.camHUD]);
          b.setFormat(null, 16, -1, "right", cb.OUTLINE_FAST, -16777216);
          b.set_borderColor(-16777216);
          a = b.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          b.set_borderSize(1);
          b.set_active(false);
          this.add(b);
          this.cameraZoomText = new R(0, 50, 200, "Zoom: 1x");
          this.cameraZoomText.setFormat(null, 16, -1, "center", cb.OUTLINE_FAST, -16777216);
          a = this.cameraZoomText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.cameraZoomText.set_borderSize(1);
          a = this.cameraZoomText;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          this.cameraZoomText.set_cameras([this.camHUD]);
          this.add(this.cameraZoomText);
          this.frameAdvanceText = new R(0, 75, 350, "");
          this.frameAdvanceText.setFormat(null, 16, -1, "center", cb.OUTLINE_FAST, -16777216);
          a = this.frameAdvanceText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.frameAdvanceText.set_borderSize(1);
          a = this.frameAdvanceText;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          this.frameAdvanceText.set_cameras([this.camHUD]);
          this.add(this.frameAdvanceText);
          this.addHelpScreen();
          g.mouse.set_visible(true);
          g.camera.set_zoom(1);
          this.makeUIMenu();
          a = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
          b = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
          this.cameraFollowPointer.setPosition(a, b);
          g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
          g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
          this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
          this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
          this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
          a = this.healthBar.leftBar;
          b = this.healthBar.rightBar;
          c = this.character.healthColorArray[0];
          d = this.character.healthColorArray[1];
          var e = this.character.healthColorArray[2];
          var f = Gb._new();
          var k = 255;
          if (k == null) {
            k = 255;
          }
          f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
          f &= -256;
          f |= e > 255 ? 255 : e < 0 ? 0 : e;
          f &= 16777215;
          f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
          a.set_color(b.set_color(f));
          this.healthIcon.changeIcon(this.character.healthIcon, false);
          this.character.finishAnimation();
          if (C.data.cacheOnGPU) {
            E.clearUnusedMemory();
          }
          P.prototype.create.call(this);
        },
        addHelpScreen: function () {
          this.helpBg = new G().makeGraphic(1, 1, -16777216);
          var a = this.helpBg.scale;
          var b = g.width;
          var c = g.height;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.helpBg.updateHitbox();
          this.helpBg.set_alpha(0.6);
          this.helpBg.set_cameras([this.camHUD]);
          this.helpBg.set_active(this.helpBg.set_visible(false));
          this.add(this.helpBg);
          b = "CAMERA;\t\t;E/Q - Camera Zoom In/Out;\t\t;J/K/L/I - Move Camera;\t\t;R - Reset Camera Zoom;\t\t;;\t\t;CHARACTER;\t\t;Ctrl + R - Reset Current Offset;\t\t;Ctrl + C - Copy Current Offset;\t\t;Ctrl + V - Paste Copied Offset on Current Animation;\t\t;Ctrl + Z - Undo Last Paste or Reset;\t\t;W/S - Previous/Next Animation;\t\t;Space - Replay Animation;\t\t;Arrow Keys/Mouse & Right Click - Move Offset;\t\t;A/D - Frame Advance (Back/Forward);\t\t;;\t\t;OTHER;\t\t;F12 - Toggle Silhouettes;\t\t;Hold Shift - Move Offsets 10x faster and Camera 4x faster;\t\t;Hold Control - Move camera 4x slower".split(";");
          this.helpTexts = new Na();
          this.helpTexts.set_cameras([this.camHUD]);
          c = 0;
          for (var d = b.length; c < d;) {
            var e = c++;
            if (!(b[e].length < 2)) {
              var f = new R(0, 0, 600, b[e], 16);
              f.setFormat(null, 16, -1, "center", cb.OUTLINE_FAST, -16777216);
              f.set_borderColor(-16777216);
              a = f.scrollFactor;
              a.set_x(0);
              a.set_y(0);
              f.set_borderSize(1);
              f.set_x((g.width - f.get_width()) / 2);
              f.set_y((g.height - f.get_height()) / 2);
              this.add(f);
              f.set_y(f.y + (e - b.length / 2) * 16);
              f.set_active(false);
              this.helpTexts.add(f);
            }
          }
          this.helpTexts.set_active(this.helpTexts.set_visible(false));
          this.add(this.helpTexts);
        },
        addCharacter: function (a) {
          if (a == null) {
            a = false;
          }
          var b = -1;
          if (this.character != null) {
            b = this.members.indexOf(this.character);
            this.remove(this.character);
            this.character.destroy();
          }
          if (a) {
            var c = this.character.isPlayer;
          } else {
            c = this._char;
            c = (c == "bf" || !!v.startsWith(c, "bf-") || !!v.endsWith(c, "-player") || !!v.endsWith(c, "-dead")) && !v.endsWith(c, "-opponent") && !v.startsWith(c, "gf-") && !v.endsWith(c, "-gf") && c != "gf";
          }
          this.character = new ad(0, 0, this._char, c);
          if (!a && this.character.editorIsPlayer != null && c != this.character.editorIsPlayer) {
            this.character.isPlayer = !this.character.isPlayer;
            this.character.set_flipX(this.character.originalFlipX != this.character.isPlayer);
            if (this.check_player != null) {
              this.check_player.set_checked(this.character.isPlayer);
            }
          }
          this.character.debugMode = true;
          if (b > -1) {
            this.insert(b, this.character);
          } else {
            this.add(this.character);
          }
          if (this.character == null || this.character.isPlayer) {
            if (this.character == null) {
              c = this._char;
              a = c != "bf" && !v.startsWith(c, "bf-") && !v.endsWith(c, "-player") && !v.endsWith(c, "-dead") || v.endsWith(c, "-opponent") || v.startsWith(c, "gf-") || v.endsWith(c, "-gf") || c == "gf";
            } else {
              a = false;
            }
          } else {
            a = true;
          }
          if (a) {
            this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
          } else {
            this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
          }
          a = this.character;
          a.set_x(a.x + this.character.positionArray[0]);
          a = this.character;
          a.set_y(a.y + this.character.positionArray[1]);
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (a = new Cc(this.animsTxtGroup.members, null); a.hasNext();) {
            c = a.next();
            c.kill();
          }
          c = b = 0;
          for (var d = this.anims; c < d.length;) {
            var e = d[c];
            ++c;
            a = this.animsTxtGroup.recycle(R);
            a.set_x(10);
            a.set_y(32 + b * 20);
            a.set_fieldWidth(400);
            a.set_fieldHeight(20);
            a.set_text(e.anim + ": " + y.string(e.offsets));
            a.setFormat(null, 16, -1, "left", cb.OUTLINE_FAST, -16777216);
            e = a.scrollFactor;
            e.set_x(0);
            e.set_y(0);
            a.set_borderSize(1);
            this.animsTxtGroup.add(a);
            ++b;
          }
          b = 0;
          for (a = new Cc(this.animsTxtGroup.members, null); a.hasNext();) {
            c = a.next();
            c.set_color(-1);
            if (b == this.curAnim) {
              c.set_color(-16711936);
            }
            ++b;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
          if (this.healthBar != null && this.healthIcon != null) {
            this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
            this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
            this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
            a = this.healthBar.leftBar;
            b = this.healthBar.rightBar;
            c = this.character.healthColorArray[0];
            d = this.character.healthColorArray[1];
            e = this.character.healthColorArray[2];
            var f = Gb._new();
            var g = 255;
            if (g == null) {
              g = 255;
            }
            f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
            f &= -256;
            f |= e > 255 ? 255 : e < 0 ? 0 : e;
            f &= 16777215;
            f |= (g > 255 ? 255 : g < 0 ? 0 : g) << 24;
            a.set_color(b.set_color(f));
            this.healthIcon.changeIcon(this.character.healthIcon, false);
          }
        },
        makeUIMenu: function () {
          var a = [{
            name: "Ghost",
            label: "Ghost"
          }, {
            name: "Settings",
            label: "Settings"
          }];
          this.UI_box = new ie(null, null, a, null, true);
          this.UI_box.set_cameras([this.camHUD]);
          this.UI_box.resize(250, 120);
          this.UI_box.set_x(g.width - 275);
          this.UI_box.set_y(25);
          a = this.UI_box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          a = [{
            name: "Character",
            label: "Character"
          }, {
            name: "Animations",
            label: "Animations"
          }];
          this.UI_characterbox = new ie(null, null, a, null, true);
          this.UI_characterbox.set_cameras([this.camHUD]);
          this.UI_characterbox.resize(350, 280);
          this.UI_characterbox.set_x(this.UI_box.x - 100);
          this.UI_characterbox.set_y(this.UI_box.y + this.UI_box.get_height());
          a = this.UI_characterbox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.UI_characterbox);
          this.add(this.UI_box);
          this.addGhostUI();
          this.addSettingsUI();
          this.addAnimationsUI();
          this.addCharacterUI();
          this.UI_box.set_selected_tab_id("Settings");
          this.UI_characterbox.set_selected_tab_id("Character");
        },
        addGhostUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Ghost";
          var c = new zb(25, 15, "Make Ghost", function () {
            var b = a.character;
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              b = a.anims[a.curAnim];
              if (a.character.isAnimateAtlas) {
                if (b != null) {
                  if (a.animateGhost == null) {
                    a.animateGhost = new mi(a.ghost.x, a.ghost.y);
                    a.animateGhost.showPivot = false;
                    a.insert(a.members.indexOf(a.ghost), a.animateGhost);
                    a.animateGhost.set_active(false);
                  }
                  if (a.animateGhost == null || a.animateGhostImage != a.character.imageFile) {
                    E.loadAnimateAtlas(a.animateGhost, a.character.imageFile);
                  }
                  if (b.indices != null && b.indices.length > 0) {
                    a.animateGhost.anim.addBySymbolIndices("anim", b.name, b.indices, 0, false);
                  } else {
                    a.animateGhost.anim.addBySymbol("anim", b.name, 0, false);
                  }
                  a.animateGhost.anim.play("anim", true, false, a.character.atlas.anim.get_curFrame());
                  a.animateGhost.anim.pause();
                  a.animateGhostImage = a.character.imageFile;
                }
              } else {
                a.ghost.loadGraphic(a.character.graphic);
                a.ghost.frames.frames = a.character.frames.frames;
                a.ghost.animation.copyFrom(a.character.animation);
                a.ghost.animation.play(a.character.animation._curAnim.name, true, false, a.character.animation._curAnim.curFrame);
                b = a.ghost.animation;
                if (b._curAnim != null) {
                  b._curAnim.pause();
                }
              }
              b = a.character.isAnimateAtlas ? a.animateGhost : a.ghost;
              if (b != null) {
                b.setPosition(a.character.x, a.character.y);
                b.set_antialiasing(a.character.antialiasing);
                b.set_flipX(a.character.flipX);
                b.set_alpha(a.ghostAlpha);
                var c = b.scale;
                var d = a.character.scale.x;
                var e = a.character.scale.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                b.updateHitbox();
                c = b.offset;
                d = a.character.offset.x;
                e = a.character.offset.y;
                if (e == null) {
                  e = 0;
                }
                if (d == null) {
                  d = 0;
                }
                c.set_x(d);
                c.set_y(e);
                b.set_visible(true);
                b = b == a.animateGhost ? a.ghost : a.animateGhost;
                if (b != null) {
                  b.set_visible(false);
                }
              }
              Ab.trace("created ghost image", {
                fileName: "source/states/editors/CharacterEditorState.hx",
                lineNumber: 349,
                className: "states.editors.CharacterEditorState",
                methodName: "addGhostUI"
              });
            }
          });
          var d = new Bb(20 + c.x + c.get_width(), c.y, null, null, "Highlight Ghost", 100);
          d.callback = function () {
            var b = d.checked ? 125 : 0;
            a.ghost.colorTransform.redOffset = b;
            a.ghost.colorTransform.greenOffset = b;
            a.ghost.colorTransform.blueOffset = b;
            if (a.animateGhost != null) {
              a.animateGhost.colorTransform.redOffset = b;
              a.animateGhost.colorTransform.greenOffset = b;
              a.animateGhost.colorTransform.blueOffset = b;
            }
          };
          var e = new wh(this, "ghostAlpha", 10, c.y + 25, 0, 1, 210, null, 5, -1, -16777216);
          e.nameLabel.set_text("Opacity:");
          e.decimals = 2;
          e.callback = function (b) {
            a.ghost.set_alpha(a.ghostAlpha);
            if (a.animateGhost != null) {
              a.animateGhost.set_alpha(a.ghostAlpha);
            }
          };
          e.value = this.ghostAlpha;
          b.add(c);
          b.add(d);
          b.add(e);
          this.UI_box.addGroup(b);
        },
        addSettingsUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Settings";
          this.check_player = new Bb(10, 60, null, null, "Playable Character", 100);
          this.check_player.set_checked(this.character.isPlayer);
          this.check_player.callback = function () {
            a.character.isPlayer = !a.character.isPlayer;
            a.character.set_flipX(!a.character.flipX);
            if (a.character == null || a.character.isPlayer) {
              if (a.character == null) {
                var b = a._char;
                b = b != "bf" && !v.startsWith(b, "bf-") && !v.endsWith(b, "-player") && !v.endsWith(b, "-dead") || v.endsWith(b, "-opponent") || v.startsWith(b, "gf-") || v.endsWith(b, "-gf") || b == "gf";
              } else {
                b = false;
              }
            } else {
              b = true;
            }
            if (b) {
              a.character.setPosition(a.dadPosition.x, a.dadPosition.y);
            } else {
              a.character.setPosition(a.bfPosition.x, a.bfPosition.y);
            }
            b = a.character;
            b.set_x(b.x + a.character.positionArray[0]);
            b = a.character;
            b.set_y(b.y + a.character.positionArray[1]);
            b = false;
            if (b == null) {
              b = true;
            }
            var c = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            var d = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(c, d);
            if (b) {
              g.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - g.width / 2);
              g.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - g.height / 2);
            }
          };
          var c = new zb(140, 20, "Reload Char", function () {
            a.addCharacter(true);
            var b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            var c = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(b, c);
            g.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - g.width / 2);
            g.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - g.height / 2);
            a.reloadCharacterOptions();
            a.reloadCharacterDropDown();
          });
          var d = new zb(140, 50, "Load Template", function () {
            a.character.loadCharacterFile({
              animations: [{
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "idle",
                indices: [],
                name: "BF idle dance"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singLEFT",
                indices: [],
                name: "BF NOTE LEFT0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singDOWN",
                indices: [],
                name: "BF NOTE DOWN0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singUP",
                indices: [],
                name: "BF NOTE UP0"
              }, {
                offsets: [0, 0],
                loop: false,
                fps: 24,
                anim: "singRIGHT",
                indices: [],
                name: "BF NOTE RIGHT0"
              }],
              no_antialiasing: false,
              flip_x: false,
              healthicon: "face",
              image: "characters/BOYFRIEND",
              sing_duration: 4,
              scale: 1,
              healthbar_colors: [161, 161, 161],
              camera_position: [0, 0],
              position: [0, 0],
              vocals_file: null
            });
            a.character.set_color(-1);
            a.character.set_alpha(1);
            a.anims = a.character.animationsArray;
            if (a.anims.length > 0) {
              a.character.playAnim(a.anims[0].anim, true);
            }
            a.curAnim = 0;
            for (var b = new Cc(a.animsTxtGroup.members, null); b.hasNext();) {
              var c = b.next();
              c.kill();
            }
            var d = 0;
            c = 0;
            for (var h = a.anims; c < h.length;) {
              var l = h[c];
              ++c;
              b = a.animsTxtGroup.recycle(R);
              b.set_x(10);
              b.set_y(32 + d * 20);
              b.set_fieldWidth(400);
              b.set_fieldHeight(20);
              b.set_text(l.anim + ": " + y.string(l.offsets));
              b.setFormat(null, 16, -1, "left", cb.OUTLINE_FAST, -16777216);
              l = b.scrollFactor;
              l.set_x(0);
              l.set_y(0);
              b.set_borderSize(1);
              a.animsTxtGroup.add(b);
              ++d;
            }
            d = 0;
            for (b = new Cc(a.animsTxtGroup.members, null); b.hasNext();) {
              c = b.next();
              c.set_color(-1);
              if (d == a.curAnim) {
                c.set_color(-16711936);
              }
              ++d;
            }
            if (a.animationDropDown != null) {
              a.reloadAnimationDropDown();
            }
            a.reloadCharacterOptions();
            if (a.character == null || a.character.isPlayer) {
              if (a.character == null) {
                b = a._char;
                b = b != "bf" && !v.startsWith(b, "bf-") && !v.endsWith(b, "-player") && !v.endsWith(b, "-dead") || v.endsWith(b, "-opponent") || v.startsWith(b, "gf-") || v.endsWith(b, "-gf") || b == "gf";
              } else {
                b = false;
              }
            } else {
              b = true;
            }
            if (b) {
              a.character.setPosition(a.dadPosition.x, a.dadPosition.y);
            } else {
              a.character.setPosition(a.bfPosition.x, a.bfPosition.y);
            }
            b = a.character;
            b.set_x(b.x + a.character.positionArray[0]);
            b = a.character;
            b.set_y(b.y + a.character.positionArray[1]);
            b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
            d = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
            a.cameraFollowPointer.setPosition(b, d);
            g.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - g.width / 2);
            g.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - g.height / 2);
            a.reloadCharacterDropDown();
            a.healthColorStepperR.set_value(a.character.healthColorArray[0]);
            a.healthColorStepperG.set_value(a.character.healthColorArray[1]);
            a.healthColorStepperB.set_value(a.character.healthColorArray[2]);
            b = a.healthBar.leftBar;
            d = a.healthBar.rightBar;
            c = a.character.healthColorArray[0];
            h = a.character.healthColorArray[1];
            l = a.character.healthColorArray[2];
            var p = Gb._new();
            var n = 255;
            if (n == null) {
              n = 255;
            }
            p = (p & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (h > 255 ? 255 : h < 0 ? 0 : h) << 8;
            p &= -256;
            p |= l > 255 ? 255 : l < 0 ? 0 : l;
            p &= 16777215;
            p |= (n > 255 ? 255 : n < 0 ? 0 : n) << 24;
            b.set_color(d.set_color(p));
            a.healthIcon.changeIcon(a.character.healthIcon, false);
          });
          d.set_color(-65536);
          d.label.set_color(-1);
          this.charDropDown = new vc(10, 30, vc.makeStrIdLabelArray([""], true), function (b) {
            b = a.characterList[y.parseInt(b)];
            if (b != null && !(b.length < 1)) {
              var c = E.getPath("characters/" + b + ".json", "TEXT", null, true);
              if (U.exists(c)) {
                a._char = b;
                a.check_player.set_checked(a.character.isPlayer);
                a.addCharacter();
                a.reloadCharacterOptions();
                a.reloadCharacterDropDown();
                b = a.character.isPlayer ? a.character.getMidpoint().x - 100 - a.character.cameraPosition[0] : a.character.getMidpoint().x + 150 + a.character.cameraPosition[0];
                c = a.character.getMidpoint().y - 100 + a.character.cameraPosition[1];
                a.cameraFollowPointer.setPosition(b, c);
                g.camera.scroll.set_x(a.cameraFollowPointer.getMidpoint().x - g.width / 2);
                g.camera.scroll.set_y(a.cameraFollowPointer.getMidpoint().y - g.height / 2);
              } else {
                a.reloadCharacterDropDown();
                g.sound.play(E.sound("cancelMenu"));
              }
            }
          });
          this.reloadCharacterDropDown();
          this.charDropDown.set_selectedLabel(this._char);
          b.add(new R(this.charDropDown.x, this.charDropDown.y - 18, 0, "Character:"));
          b.add(this.check_player);
          b.add(c);
          b.add(d);
          b.add(this.charDropDown);
          this.UI_box.addGroup(b);
        },
        addAnimationsUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Animations";
          this.animationInputText = new pb(15, 85, 80, "", 8);
          this.animationNameInputText = new pb(this.animationInputText.x, this.animationInputText.y + 35, 150, "", 8);
          this.animationIndicesInputText = new pb(this.animationNameInputText.x, this.animationNameInputText.y + 40, 250, "", 8);
          this.animationFramerate = new Lb(this.animationInputText.x + 170, this.animationInputText.y, 1, 24, 0, 240, 0);
          this.animationLoopCheckBox = new Bb(this.animationNameInputText.x + 170, this.animationNameInputText.y - 1, null, null, "Should it Loop?", 100);
          this.animationDropDown = new vc(15, this.animationInputText.y - 55, vc.makeStrIdLabelArray([""], true), function (b) {
            b = y.parseInt(b);
            b = a.character.animationsArray[b];
            a.animationInputText.set_text(b.anim);
            a.animationNameInputText.set_text(b.name);
            a.animationLoopCheckBox.set_checked(b.loop);
            a.animationFramerate.set_value(b.fps);
            b = b.indices.toString();
            a.animationIndicesInputText.set_text(L.substr(b, 1, b.length - 2));
          });
          var c = new zb(70, this.animationIndicesInputText.y + 60, "Add/Update", function () {
            var b = [];
            var c = v.trim(a.animationIndicesInputText.text).split(",");
            if (c.length > 1) {
              for (var d = 0, e = c.length; d < e;) {
                var f = d++;
                var g = y.parseInt(c[f]);
                if (c[f] != null && c[f] != "" && !isNaN(g) && g > -1) {
                  b.push(g);
                }
              }
            }
            g = [0, 0];
            d = 0;
            for (e = a.character.animationsArray; d < e.length;) {
              c = e[d];
              ++d;
              if (a.animationInputText.text == c.anim) {
                g = c.offsets;
                if (Object.prototype.hasOwnProperty.call(a.character.animOffsets.h, a.animationInputText.text)) {
                  if (a.character.isAnimateAtlas) {
                    f = a.animationInputText.text;
                    var k = a.character.atlas.anim.animsMap;
                    if (Object.prototype.hasOwnProperty.call(k.h, f)) {
                      delete k.h[f];
                    }
                  } else {
                    a.character.animation.remove(a.animationInputText.text);
                  }
                }
                L.remove(a.character.animationsArray, c);
              }
            }
            f = {
              offsets: [0, 0],
              loop: false,
              fps: 24,
              anim: a.animationInputText.text,
              indices: [],
              name: a.animationNameInputText.text
            };
            f.fps = Math.round(a.animationFramerate.value);
            f.loop = a.animationLoopCheckBox.checked;
            f.indices = b;
            f.offsets = g;
            a.addAnimation(f.anim, f.name, f.fps, f.loop, f.indices);
            a.character.animationsArray.push(f);
            a.anims = a.character.animationsArray;
            if (a.anims.length > 0) {
              a.character.playAnim(a.anims[0].anim, true);
            }
            a.curAnim = 0;
            for (b = new Cc(a.animsTxtGroup.members, null); b.hasNext();) {
              d = b.next();
              d.kill();
            }
            d = g = 0;
            for (e = a.anims; d < e.length;) {
              c = e[d];
              ++d;
              b = a.animsTxtGroup.recycle(R);
              b.set_x(10);
              b.set_y(32 + g * 20);
              b.set_fieldWidth(400);
              b.set_fieldHeight(20);
              b.set_text(c.anim + ": " + y.string(c.offsets));
              b.setFormat(null, 16, -1, "left", cb.OUTLINE_FAST, -16777216);
              c = b.scrollFactor;
              c.set_x(0);
              c.set_y(0);
              b.set_borderSize(1);
              a.animsTxtGroup.add(b);
              ++g;
            }
            g = 0;
            for (b = new Cc(a.animsTxtGroup.members, null); b.hasNext();) {
              d = b.next();
              d.set_color(-1);
              if (g == a.curAnim) {
                d.set_color(-16711936);
              }
              ++g;
            }
            if (a.animationDropDown != null) {
              a.reloadAnimationDropDown();
            }
            a.curAnim = Math.max(0, a.character.animationsArray.indexOf(f)) | 0;
            a.character.playAnim(f.anim, true);
            Ab.trace("Added/Updated animation: " + a.animationInputText.text, {
              fileName: "source/states/editors/CharacterEditorState.hx",
              lineNumber: 568,
              className: "states.editors.CharacterEditorState",
              methodName: "addAnimationsUI"
            });
          });
          var d = new zb(180, this.animationIndicesInputText.y + 60, "Remove", function () {
            for (var b = 0, c = a.character.animationsArray; b < c.length;) {
              var d = c[b];
              ++b;
              if (a.animationInputText.text == d.anim) {
                b = false;
                c = d.anim;
                var e = a.character;
                var f = "";
                if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
                  f = e.isAnimateAtlas ? e.atlas.anim.lastPlayedAnim : e.animation._curAnim.name;
                }
                if (c == (f ?? "")) {
                  b = true;
                }
                if (Object.prototype.hasOwnProperty.call(a.character.animOffsets.h, d.anim)) {
                  if (a.character.isAnimateAtlas) {
                    c = d.anim;
                    e = a.character.atlas.anim.animsMap;
                    if (Object.prototype.hasOwnProperty.call(e.h, c)) {
                      delete e.h[c];
                    }
                  } else {
                    a.character.animation.remove(d.anim);
                  }
                  c = d.anim;
                  e = a.character.animOffsets;
                  if (Object.prototype.hasOwnProperty.call(e.h, c)) {
                    delete e.h[c];
                  }
                  L.remove(a.character.animationsArray, d);
                }
                if (b && a.character.animationsArray.length > 0) {
                  a.curAnim = jc.wrap(a.curAnim, 0, a.anims.length - 1);
                  a.character.playAnim(a.anims[a.curAnim].anim, true);
                  d = 0;
                  b = new Cc(a.animsTxtGroup.members, null);
                  while (b.hasNext()) {
                    c = b.next();
                    c.set_color(-1);
                    if (d == a.curAnim) {
                      c.set_color(-16711936);
                    }
                    ++d;
                  }
                }
                a.anims = a.character.animationsArray;
                if (a.anims.length > 0) {
                  a.character.playAnim(a.anims[0].anim, true);
                }
                a.curAnim = 0;
                for (d = new Cc(a.animsTxtGroup.members, null); d.hasNext();) {
                  d.next().kill();
                }
                b = d = 0;
                for (c = a.anims; b < c.length;) {
                  f = c[b];
                  ++b;
                  e = a.animsTxtGroup.recycle(R);
                  e.set_x(10);
                  e.set_y(32 + d * 20);
                  e.set_fieldWidth(400);
                  e.set_fieldHeight(20);
                  e.set_text(f.anim + ": " + y.string(f.offsets));
                  e.setFormat(null, 16, -1, "left", cb.OUTLINE_FAST, -16777216);
                  f = e.scrollFactor;
                  f.set_x(0);
                  f.set_y(0);
                  e.set_borderSize(1);
                  a.animsTxtGroup.add(e);
                  ++d;
                }
                d = 0;
                for (b = new Cc(a.animsTxtGroup.members, null); b.hasNext();) {
                  c = b.next();
                  c.set_color(-1);
                  if (d == a.curAnim) {
                    c.set_color(-16711936);
                  }
                  ++d;
                }
                if (a.animationDropDown != null) {
                  a.reloadAnimationDropDown();
                }
                Ab.trace("Removed animation: " + a.animationInputText.text, {
                  fileName: "source/states/editors/CharacterEditorState.hx",
                  lineNumber: 596,
                  className: "states.editors.CharacterEditorState",
                  methodName: "addAnimationsUI"
                });
                break;
              }
            }
          });
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (var e = new Cc(this.animsTxtGroup.members, null); e.hasNext();) {
            var f = e.next();
            f.kill();
          }
          var g = 0;
          f = 0;
          for (var h = this.anims; f < h.length;) {
            var l = h[f];
            ++f;
            e = this.animsTxtGroup.recycle(R);
            e.set_x(10);
            e.set_y(32 + g * 20);
            e.set_fieldWidth(400);
            e.set_fieldHeight(20);
            e.set_text(l.anim + ": " + y.string(l.offsets));
            e.setFormat(null, 16, -1, "left", cb.OUTLINE_FAST, -16777216);
            l = e.scrollFactor;
            l.set_x(0);
            l.set_y(0);
            e.set_borderSize(1);
            this.animsTxtGroup.add(e);
            ++g;
          }
          g = 0;
          for (e = new Cc(this.animsTxtGroup.members, null); e.hasNext();) {
            f = e.next();
            f.set_color(-1);
            if (g == this.curAnim) {
              f.set_color(-16711936);
            }
            ++g;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
          this.animationDropDown.set_selectedLabel(this.anims[0] != null ? this.anims[0].anim : "");
          b.add(new R(this.animationDropDown.x, this.animationDropDown.y - 18, 0, "Animations:"));
          b.add(new R(this.animationInputText.x, this.animationInputText.y - 18, 0, "Animation name:"));
          b.add(new R(this.animationFramerate.x, this.animationFramerate.y - 18, 0, "Framerate:"));
          b.add(new R(this.animationNameInputText.x, this.animationNameInputText.y - 18, 0, "Animation Symbol Name/Tag:"));
          b.add(new R(this.animationIndicesInputText.x, this.animationIndicesInputText.y - 18, 0, "ADVANCED - Animation Indices:"));
          b.add(this.animationInputText);
          b.add(this.animationNameInputText);
          b.add(this.animationIndicesInputText);
          b.add(this.animationFramerate);
          b.add(this.animationLoopCheckBox);
          b.add(c);
          b.add(d);
          b.add(this.animationDropDown);
          this.UI_characterbox.addGroup(b);
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Character";
          this.imageInputText = new pb(15, 30, 200, this.character.imageFile, 8);
          var c = new zb(this.imageInputText.x + 210, this.imageInputText.y - 3, "Reload Image", function () {
            var b = a.character;
            var c = "";
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              c = b.isAnimateAtlas ? b.atlas.anim.lastPlayedAnim : b.animation._curAnim.name;
            }
            c = c ?? "";
            a.character.imageFile = a.imageInputText.text;
            a.reloadCharacterImage();
            b = a.character;
            if (b.isAnimateAtlas ? b.atlas.anim.get_curSymbol() != null : b.animation._curAnim != null) {
              a.character.playAnim(c, true);
            }
          });
          var d = new zb(c.x, c.y + 30, "Get Icon Color", function () {
            var b = a.healthIcon;
            var c = new Ac();
            for (var d = 0, e = b.frameWidth; d < e;) {
              var g = d++;
              for (var h = 0, m = b.frameHeight; h < m;) {
                var p = h++;
                p = b.get_pixels().getPixel32(g, p);
                if (p != 0) {
                  if (c.h.hasOwnProperty(p)) {
                    c.h[p] += 1;
                  } else if (c.h[p] != -13520687) {
                    c.h[p] = 1;
                  }
                }
              }
            }
            d = b = 0;
            c.h[-16777216] = 0;
            for (e = c.keys(); e.hasNext();) {
              g = e.next();
              if (c.h[g] >= b) {
                b = c.h[g];
                d = g;
              }
            }
            new Ac();
            c = Gb._new(d);
            a.character.healthColorArray[0] = c >> 16 & 255;
            a.character.healthColorArray[1] = c >> 8 & 255;
            a.character.healthColorArray[2] = c & 255;
            a.healthColorStepperR.set_value(a.character.healthColorArray[0]);
            a.healthColorStepperG.set_value(a.character.healthColorArray[1]);
            a.healthColorStepperB.set_value(a.character.healthColorArray[2]);
            c = a.healthBar.leftBar;
            b = a.healthBar.rightBar;
            d = a.character.healthColorArray[0];
            e = a.character.healthColorArray[1];
            g = a.character.healthColorArray[2];
            h = Gb._new();
            m = 255;
            if (m == null) {
              m = 255;
            }
            h = (h & -16711681 | (d > 255 ? 255 : d < 0 ? 0 : d) << 16) & -65281 | (e > 255 ? 255 : e < 0 ? 0 : e) << 8;
            h &= -256;
            h |= g > 255 ? 255 : g < 0 ? 0 : g;
            h &= 16777215;
            h |= (m > 255 ? 255 : m < 0 ? 0 : m) << 24;
            c.set_color(b.set_color(h));
            a.healthIcon.changeIcon(a.character.healthIcon, false);
          });
          this.healthIconInputText = new pb(15, this.imageInputText.y + 35, 75, this.healthIcon.getCharacter(), 8);
          this.vocalsInputText = new pb(15, this.healthIconInputText.y + 35, 75, this.character.vocalsFile ?? "", 8);
          this.singDurationStepper = new Lb(15, this.vocalsInputText.y + 45, 0.1, 4, 0, 999, 1);
          this.scaleStepper = new Lb(15, this.singDurationStepper.y + 40, 0.1, 1, 0.05, 10, 1);
          this.flipXCheckBox = new Bb(this.singDurationStepper.x + 80, this.singDurationStepper.y, null, null, "Flip X", 50);
          this.flipXCheckBox.set_checked(this.character.flipX);
          if (this.character.isPlayer) {
            this.flipXCheckBox.set_checked(!this.flipXCheckBox.checked);
          }
          this.flipXCheckBox.callback = function () {
            a.character.originalFlipX = !a.character.originalFlipX;
            a.character.set_flipX(a.character.originalFlipX != a.character.isPlayer);
          };
          this.noAntialiasingCheckBox = new Bb(this.flipXCheckBox.x, this.flipXCheckBox.y + 40, null, null, "No Antialiasing", 80);
          this.noAntialiasingCheckBox.set_checked(this.character.noAntialiasing);
          this.noAntialiasingCheckBox.callback = function () {
            a.character.set_antialiasing(false);
            if (!a.noAntialiasingCheckBox.checked && C.data.antialiasing) {
              a.character.set_antialiasing(true);
            }
            a.character.noAntialiasing = a.noAntialiasingCheckBox.checked;
          };
          this.positionXStepper = new Lb(this.flipXCheckBox.x + 110, this.flipXCheckBox.y, 10, this.character.positionArray[0], -9000, 9000, 0);
          this.positionYStepper = new Lb(this.positionXStepper.x + 60, this.positionXStepper.y, 10, this.character.positionArray[1], -9000, 9000, 0);
          this.positionCameraXStepper = new Lb(this.positionXStepper.x, this.positionXStepper.y + 40, 10, this.character.cameraPosition[0], -9000, 9000, 0);
          this.positionCameraYStepper = new Lb(this.positionYStepper.x, this.positionYStepper.y + 40, 10, this.character.cameraPosition[1], -9000, 9000, 0);
          var e = new zb(c.x, this.noAntialiasingCheckBox.y + 40, "Save Character", function () {
            a.saveCharacter();
          });
          this.healthColorStepperR = new Lb(this.singDurationStepper.x, e.y, 20, this.character.healthColorArray[0], 0, 255, 0);
          this.healthColorStepperG = new Lb(this.singDurationStepper.x + 65, e.y, 20, this.character.healthColorArray[1], 0, 255, 0);
          this.healthColorStepperB = new Lb(this.singDurationStepper.x + 130, e.y, 20, this.character.healthColorArray[2], 0, 255, 0);
          b.add(new R(15, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new R(15, this.healthIconInputText.y - 18, 0, "Health icon name:"));
          b.add(new R(15, this.vocalsInputText.y - 18, 0, "Vocals File Postfix:"));
          b.add(new R(15, this.singDurationStepper.y - 18, 0, "Sing Animation length:"));
          b.add(new R(15, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(new R(this.positionXStepper.x, this.positionXStepper.y - 18, 0, "Character X/Y:"));
          b.add(new R(this.positionCameraXStepper.x, this.positionCameraXStepper.y - 18, 0, "Camera X/Y:"));
          b.add(new R(this.healthColorStepperR.x, this.healthColorStepperR.y - 18, 0, "Health bar R/G/B:"));
          b.add(this.imageInputText);
          b.add(c);
          b.add(d);
          b.add(this.healthIconInputText);
          b.add(this.vocalsInputText);
          b.add(this.singDurationStepper);
          b.add(this.scaleStepper);
          b.add(this.flipXCheckBox);
          b.add(this.noAntialiasingCheckBox);
          b.add(this.positionXStepper);
          b.add(this.positionYStepper);
          b.add(this.positionCameraXStepper);
          b.add(this.positionCameraYStepper);
          b.add(this.healthColorStepperR);
          b.add(this.healthColorStepperG);
          b.add(this.healthColorStepperB);
          b.add(e);
          this.UI_characterbox.addGroup(b);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" || a == "change_numeric_stepper") {
            if (b instanceof pb) {
              if (b == this.healthIconInputText) {
                this.healthIcon.getCharacter();
                this.healthIcon.changeIcon(this.healthIconInputText.text, false);
                this.character.healthIcon = this.healthIconInputText.text;
                this.healthIcon.getCharacter();
              } else if (b == this.vocalsInputText) {
                this.character.vocalsFile = this.vocalsInputText.text;
              } else if (b == this.imageInputText) {
                this.character.imageFile = this.imageInputText.text;
              }
            } else if (b instanceof Lb) {
              if (b == this.scaleStepper) {
                this.reloadCharacterImage();
                this.character.jsonScale = b.value;
                a = this.character.scale;
                c = b = this.character.jsonScale;
                if (c == null) {
                  c = 0;
                }
                if (b == null) {
                  b = 0;
                }
                a.set_x(b);
                a.set_y(c);
                this.character.updateHitbox();
                a = false;
                if (a == null) {
                  a = true;
                }
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                if (a) {
                  g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
                  g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
                }
              } else if (b == this.positionXStepper) {
                this.character.positionArray[0] = this.positionXStepper.value;
                if (this.character == null || this.character.isPlayer) {
                  if (this.character == null) {
                    a = this._char;
                    a = a != "bf" && !v.startsWith(a, "bf-") && !v.endsWith(a, "-player") && !v.endsWith(a, "-dead") || v.endsWith(a, "-opponent") || v.startsWith(a, "gf-") || v.endsWith(a, "-gf") || a == "gf";
                  } else {
                    a = false;
                  }
                } else {
                  a = true;
                }
                if (a) {
                  this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
                } else {
                  this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
                }
                a = this.character;
                a.set_x(a.x + this.character.positionArray[0]);
                a = this.character;
                a.set_y(a.y + this.character.positionArray[1]);
              } else if (b == this.positionYStepper) {
                this.character.positionArray[1] = this.positionYStepper.value;
                if (this.character == null || this.character.isPlayer) {
                  if (this.character == null) {
                    a = this._char;
                    a = a != "bf" && !v.startsWith(a, "bf-") && !v.endsWith(a, "-player") && !v.endsWith(a, "-dead") || v.endsWith(a, "-opponent") || v.startsWith(a, "gf-") || v.endsWith(a, "-gf") || a == "gf";
                  } else {
                    a = false;
                  }
                } else {
                  a = true;
                }
                if (a) {
                  this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
                } else {
                  this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
                }
                a = this.character;
                a.set_x(a.x + this.character.positionArray[0]);
                a = this.character;
                a.set_y(a.y + this.character.positionArray[1]);
              } else if (b == this.singDurationStepper) {
                this.character.singDuration = this.singDurationStepper.value;
              } else if (b == this.positionCameraXStepper) {
                this.character.cameraPosition[0] = this.positionCameraXStepper.value;
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
                g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
              } else if (b == this.positionCameraYStepper) {
                this.character.cameraPosition[1] = this.positionCameraYStepper.value;
                b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
                c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
                this.cameraFollowPointer.setPosition(b, c);
                g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
                g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
              } else if (b == this.healthColorStepperR) {
                this.character.healthColorArray[0] = Math.round(this.healthColorStepperR.value);
                this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
                this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
                this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
                a = this.healthBar.leftBar;
                b = this.healthBar.rightBar;
                c = this.character.healthColorArray[0];
                d = this.character.healthColorArray[1];
                var e = this.character.healthColorArray[2];
                var f = Gb._new();
                var k = 255;
                if (k == null) {
                  k = 255;
                }
                f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
                f &= -256;
                f |= e > 255 ? 255 : e < 0 ? 0 : e;
                f &= 16777215;
                f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
                a.set_color(b.set_color(f));
                this.healthIcon.changeIcon(this.character.healthIcon, false);
              } else if (b == this.healthColorStepperG) {
                this.character.healthColorArray[1] = Math.round(this.healthColorStepperG.value);
                this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
                this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
                this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
                a = this.healthBar.leftBar;
                b = this.healthBar.rightBar;
                c = this.character.healthColorArray[0];
                d = this.character.healthColorArray[1];
                e = this.character.healthColorArray[2];
                f = Gb._new();
                k = 255;
                if (k == null) {
                  k = 255;
                }
                f &= -16711681;
                f = (f | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
                f &= -256;
                f |= e > 255 ? 255 : e < 0 ? 0 : e;
                f &= 16777215;
                f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
                a.set_color(b.set_color(f));
                this.healthIcon.changeIcon(this.character.healthIcon, false);
              } else if (b == this.healthColorStepperB) {
                this.character.healthColorArray[2] = Math.round(this.healthColorStepperB.value);
                this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
                this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
                this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
                a = this.healthBar.leftBar;
                b = this.healthBar.rightBar;
                c = this.character.healthColorArray[0];
                d = this.character.healthColorArray[1];
                e = this.character.healthColorArray[2];
                f = Gb._new();
                k = 255;
                if (k == null) {
                  k = 255;
                }
                f &= -16711681;
                f = (f | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
                f &= -256;
                f |= e > 255 ? 255 : e < 0 ? 0 : e;
                f &= 16777215;
                f |= (k > 255 ? 255 : k < 0 ? 0 : k) << 24;
                a.set_color(b.set_color(f));
                this.healthIcon.changeIcon(this.character.healthIcon, false);
              }
            }
          }
        },
        reloadCharacterImage: function () {
          var a = this.character;
          var b = "";
          if (a.isAnimateAtlas ? a.atlas.anim.get_curSymbol() != null : a.animation._curAnim != null) {
            b = a.isAnimateAtlas ? a.atlas.anim.lastPlayedAnim : a.animation._curAnim.name;
          }
          a = b ?? "";
          b = this.character.animationsArray.slice();
          this.character.destroyAtlas();
          this.character.isAnimateAtlas = false;
          this.character.set_color(-1);
          this.character.set_alpha(1);
          if (E.fileExists("images/" + this.character.imageFile + "/Animation.json", "TEXT")) {
            this.character.atlas = new mi();
            this.character.atlas.showPivot = false;
            try {
              E.loadAnimateAtlas(this.character.atlas, this.character.imageFile);
            } catch (k) {
              Oa.lastError = k;
              var c = I.caught(k).unwrap();
              g.log.advanced("Could not load atlas " + this.character.imageFile + ": " + y.string(c), Aa.WARNING, true);
            }
            this.character.isAnimateAtlas = true;
          } else if (E.fileExists("images/" + this.character.imageFile + ".txt", "TEXT")) {
            c = this.character;
            var d = this.character.imageFile;
            var e = null;
            var f = E.image(d, e, true);
            c.set_frames(Sa.fromSpriteSheetPacker(f, E.getPath("images/" + d + ".txt", null, e)));
          } else if (E.fileExists("images/" + this.character.imageFile + ".json", "TEXT")) {
            c = this.character;
            d = this.character.imageFile;
            e = null;
            f = E.image(d, e, true);
            c.set_frames(Sa.fromTexturePackerJson(f, E.getPath("images/" + d + ".json", null, e)));
          } else {
            c = this.character;
            d = this.character.imageFile;
            e = null;
            f = E.image(d, e, true);
            c.set_frames(Sa.fromSparrow(f, E.getPath("images/" + d + ".xml", null, e)));
          }
          for (c = 0; c < b.length;) {
            d = b[c];
            ++c;
            this.addAnimation("" + d.anim, "" + d.name, d.fps, d.loop, d.indices);
          }
          if (b.length > 0) {
            if (a != "") {
              this.character.playAnim(a, true);
            } else {
              this.character.dance();
            }
          }
        },
        reloadCharacterOptions: function () {
          if (this.UI_characterbox != null) {
            this.check_player.set_checked(this.character.isPlayer);
            this.imageInputText.set_text(this.character.imageFile);
            this.healthIconInputText.set_text(this.character.healthIcon);
            this.vocalsInputText.set_text(this.character.vocalsFile ?? "");
            this.singDurationStepper.set_value(this.character.singDuration);
            this.scaleStepper.set_value(this.character.jsonScale);
            this.flipXCheckBox.set_checked(this.character.originalFlipX);
            this.noAntialiasingCheckBox.set_checked(this.character.noAntialiasing);
            this.positionXStepper.set_value(this.character.positionArray[0]);
            this.positionYStepper.set_value(this.character.positionArray[1]);
            this.positionCameraXStepper.set_value(this.character.cameraPosition[0]);
            this.positionCameraYStepper.set_value(this.character.cameraPosition[1]);
            this.reloadAnimationDropDown();
            this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
            this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
            this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
            var a = this.healthBar.leftBar;
            var b = this.healthBar.rightBar;
            var c = this.character.healthColorArray[0];
            var d = this.character.healthColorArray[1];
            var e = this.character.healthColorArray[2];
            var f = Gb._new();
            var g = 255;
            if (g == null) {
              g = 255;
            }
            f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
            f &= -256;
            f |= e > 255 ? 255 : e < 0 ? 0 : e;
            f &= 16777215;
            f |= (g > 255 ? 255 : g < 0 ? 0 : g) << 24;
            a.set_color(b.set_color(f));
            this.healthIcon.changeIcon(this.character.healthIcon, false);
          }
        },
        update: function (a) {
          P.prototype.update.call(this, a);
          if (this.animationInputText.hasFocus || this.animationNameInputText.hasFocus || this.animationIndicesInputText.hasFocus || this.imageInputText.hasFocus || this.healthIconInputText.hasFocus || this.vocalsInputText.hasFocus) {
            C.toggleVolumeKeys(false);
          } else {
            C.toggleVolumeKeys(true);
            var b = 1;
            var c = 1;
            var d = 1;
            var e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(16, e.status)) {
              b = 4;
              d = 10;
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(17, e.status)) {
              c = 0.25;
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(74, e.status)) {
              var f = g.camera;
              f.scroll.set_x(f.scroll.x - a * 500 * b * c);
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(75, e.status)) {
              f = g.camera;
              f.scroll.set_y(f.scroll.y + a * 500 * b * c);
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(76, e.status)) {
              f = g.camera;
              f.scroll.set_x(f.scroll.x + a * 500 * b * c);
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(73, e.status)) {
              f = g.camera;
              f.scroll.set_y(f.scroll.y - a * 500 * b * c);
            }
            var k = g.camera.zoom;
            e = g.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(82, e.status)) {
              e = g.keys.pressed;
              var h = !e.keyManager.checkStatusUnsafe(17, e.status);
            } else {
              h = false;
            }
            if (h) {
              g.camera.set_zoom(1);
            } else {
              e = g.keys.pressed;
              if (e.keyManager.checkStatusUnsafe(69, e.status) && g.camera.zoom < 3) {
                f = g.camera;
                f.set_zoom(f.zoom + a * g.camera.zoom * b * c);
                if (g.camera.zoom > 3) {
                  g.camera.set_zoom(3);
                }
              } else {
                e = g.keys.pressed;
                if (e.keyManager.checkStatusUnsafe(81, e.status) && g.camera.zoom > 0.1) {
                  f = g.camera;
                  f.set_zoom(f.zoom - a * g.camera.zoom * b * c);
                  if (g.camera.zoom < 0.1) {
                    g.camera.set_zoom(0.1);
                  }
                }
              }
            }
            if (k != g.camera.zoom) {
              this.cameraZoomText.set_text("Zoom: " + jc.roundDecimal(g.camera.zoom, 2) + "x");
            }
            f = false;
            if (this.anims.length > 1 && (e = g.keys.justPressed, h = e.keyManager.checkStatusUnsafe(87, e.status) ? f = true : false, h ? this.curAnim-- : (e = g.keys.justPressed, h = e.keyManager.checkStatusUnsafe(83, e.status) ? f = true : false, h && this.curAnim++), f)) {
              this.undoOffsets = null;
              this.curAnim = jc.wrap(this.curAnim, 0, this.anims.length - 1);
              this.character.playAnim(this.anims[this.curAnim].anim, true);
              e = 0;
              f = new Cc(this.animsTxtGroup.members, null);
              while (f.hasNext()) {
                h = f.next();
                h.set_color(-1);
                if (e == this.curAnim) {
                  h.set_color(-16711936);
                }
                ++e;
              }
            }
            f = false;
            e = g.keys.justPressed;
            h = e.keyManager.checkStatusUnsafe(37, e.status);
            e = g.keys.justPressed;
            c = e.keyManager.checkStatusUnsafe(39, e.status);
            e = g.keys.justPressed;
            k = e.keyManager.checkStatusUnsafe(38, e.status);
            e = g.keys.justPressed;
            h = [h, c, k, e.keyManager.checkStatusUnsafe(40, e.status)];
            e = g.keys.pressed;
            c = e.keyManager.checkStatusUnsafe(37, e.status);
            e = g.keys.pressed;
            k = e.keyManager.checkStatusUnsafe(39, e.status);
            e = g.keys.pressed;
            var l = e.keyManager.checkStatusUnsafe(38, e.status);
            e = g.keys.pressed;
            e = [c, k, l, e.keyManager.checkStatusUnsafe(40, e.status)];
            if (h.indexOf(true) != -1) {
              f = this.character;
              f.offset.set_x(f.offset.x + ((h[0] ? 1 : 0) - (h[1] ? 1 : 0)) * d);
              f = this.character;
              f.offset.set_y(f.offset.y + ((h[2] ? 1 : 0) - (h[3] ? 1 : 0)) * d);
              f = true;
            }
            if (e.indexOf(true) != -1) {
              this.holdingArrowsTime += a;
              if (this.holdingArrowsTime > 0.6) {
                for (this.holdingArrowsElapsed += a; this.holdingArrowsElapsed > 0.016666666666666666;) {
                  f = this.character;
                  f.offset.set_x(f.offset.x + ((e[0] ? 1 : 0) - (e[1] ? 1 : 0)) * d);
                  f = this.character;
                  f.offset.set_y(f.offset.y + ((e[2] ? 1 : 0) - (e[3] ? 1 : 0)) * d);
                  this.holdingArrowsElapsed -= 0.016666666666666666;
                  f = true;
                }
              }
            } else {
              this.holdingArrowsTime = 0;
            }
            e = g.mouse._rightButton;
            if (e.current == 1 || e.current == 2) {
              e = g.mouse;
              if (e.screenX - e._prevScreenX == 0) {
                e = g.mouse;
                h = e.screenY - e._prevScreenY != 0;
              } else {
                h = true;
              }
            } else {
              h = false;
            }
            if (h) {
              f = this.character;
              e = g.mouse;
              f.offset.set_x(f.offset.x - (e.screenX - e._prevScreenX));
              f = this.character;
              e = g.mouse;
              f.offset.set_y(f.offset.y - (e.screenY - e._prevScreenY));
              f = true;
            }
            e = g.keys.pressed;
            if (e.keyManager.checkStatusUnsafe(17, e.status)) {
              e = g.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(67, e.status)) {
                this.copiedOffset[0] = this.character.offset.x;
                this.copiedOffset[1] = this.character.offset.y;
                f = true;
              } else {
                e = g.keys.justPressed;
                if (e.keyManager.checkStatusUnsafe(86, e.status)) {
                  this.undoOffsets = [this.character.offset.x, this.character.offset.y];
                  this.character.offset.set_x(this.copiedOffset[0]);
                  this.character.offset.set_y(this.copiedOffset[1]);
                  f = true;
                } else {
                  e = g.keys.justPressed;
                  if (e.keyManager.checkStatusUnsafe(82, e.status)) {
                    this.undoOffsets = [this.character.offset.x, this.character.offset.y];
                    e = this.character.offset;
                    f = d = 0;
                    if (f == null) {
                      f = 0;
                    }
                    if (d == null) {
                      d = 0;
                    }
                    e.set_x(d);
                    e.set_y(f);
                    f = true;
                  } else {
                    e = g.keys.justPressed;
                    if (e.keyManager.checkStatusUnsafe(90, e.status) && this.undoOffsets != null) {
                      this.character.offset.set_x(this.undoOffsets[0]);
                      this.character.offset.set_y(this.undoOffsets[1]);
                      f = true;
                    }
                  }
                }
              }
            }
            e = this.anims[this.curAnim];
            if (f && e != null && e.offsets != null) {
              e.offsets[0] = this.character.offset.x | 0;
              e.offsets[1] = this.character.offset.y | 0;
              this.animsTxtGroup.members[this.curAnim].set_text(e.anim + ": " + y.string(e.offsets));
              this.character.addOffset(e.anim, this.character.offset.x, this.character.offset.y);
            }
            d = "ERROR: No Animation Found";
            f = -65536;
            e = this.character;
            if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
              e = g.keys.pressed;
              if (e.keyManager.checkStatusUnsafe(65, e.status)) {
                h = true;
              } else {
                e = g.keys.pressed;
                h = e.keyManager.checkStatusUnsafe(68, e.status);
              }
              if (h) {
                this.holdingFrameTime += a;
                if (this.holdingFrameTime > 0.5) {
                  this.holdingFrameElapsed += a;
                }
              } else {
                this.holdingFrameTime = 0;
              }
              e = g.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(32, e.status)) {
                e = h = this.character;
                a = "";
                if (e.isAnimateAtlas ? e.atlas.anim.get_curSymbol() != null : e.animation._curAnim != null) {
                  a = e.isAnimateAtlas ? e.atlas.anim.lastPlayedAnim : e.animation._curAnim.name;
                }
                h.playAnim(a ?? "", true);
              }
              if (this.character.isAnimateAtlas) {
                a = this.character.atlas.anim.get_curFrame();
                d = this.character.atlas.anim.get_length();
              } else {
                a = this.character.animation._curAnim.curFrame;
                d = this.character.animation._curAnim.frames.length;
              }
              e = g.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(65, e.status)) {
                h = true;
              } else {
                e = g.keys.justPressed;
                h = e.keyManager.checkStatusUnsafe(68, e.status);
              }
              if (h || this.holdingFrameTime > 0.5) {
                f = false;
                if (this.holdingFrameTime > 0.5) {
                  e = g.keys.pressed;
                  e = e.keyManager.checkStatusUnsafe(65, e.status);
                } else {
                  e = false;
                }
                if (e) {
                  h = true;
                } else {
                  e = g.keys.justPressed;
                  h = e.keyManager.checkStatusUnsafe(65, e.status);
                }
                if (h) {
                  f = true;
                }
                this.character.set_animPaused(true);
                if (this.holdingFrameTime <= 0.5 || this.holdingFrameElapsed > 0.1) {
                  a = jc.wrap(a + ((f ? -b : b) | 0), 0, d - 1);
                  if (this.character.isAnimateAtlas) {
                    this.character.atlas.anim.set_curFrame(a);
                  } else {
                    this.character.animation._curAnim.set_curFrame(a);
                  }
                  this.holdingFrameElapsed -= 0.1;
                }
              }
              d = "Frames: ( " + a + " / " + (d - 1) + " )";
              f = -1;
            }
            if (d != this.frameAdvanceText.text) {
              this.frameAdvanceText.set_text(d);
            }
            this.frameAdvanceText.set_color(f);
            e = g.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(123, e.status)) {
              this.silhouettes.set_visible(!this.silhouettes.visible);
            }
            e = g.keys.justPressed;
            if (e.keyManager.checkStatusUnsafe(112, e.status)) {
              h = true;
            } else if (this.helpBg.visible) {
              e = g.keys.justPressed;
              h = e.keyManager.checkStatusUnsafe(27, e.status);
            } else {
              h = false;
            }
            if (h) {
              this.helpBg.set_visible(!this.helpBg.visible);
              this.helpTexts.set_visible(this.helpBg.visible);
            } else {
              e = g.keys.justPressed;
              if (e.keyManager.checkStatusUnsafe(27, e.status)) {
                g.mouse.set_visible(false);
                if (this._goToPlayState) {
                  P.switchState(new z());
                } else {
                  P.switchState(new Pf());
                  h = g.sound;
                  b = E.returnSound("music", "freakyMenu", null);
                  h.playMusic(b);
                }
              }
            }
          }
        },
        loadBG: function () {
          var a = E.currentLevel;
          E.currentLevel = this.assetFolder;
          var b = new Db("stageback", -600, -200, 0.9, 0.9);
          this.add(b);
          b = new Db("stagefront", -650, 600, 0.9, 0.9);
          b.setGraphicSize(b.get_width() * 1.1 | 0);
          b.updateHitbox();
          this.add(b);
          b = this.dadPosition;
          var c = 100;
          var d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.bfPosition;
          c = 770;
          d = 100;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          E.currentLevel = a;
        },
        updatePointerPos: function (a) {
          if (a == null) {
            a = true;
          }
          var b = this.character.isPlayer ? this.character.getMidpoint().x - 100 - this.character.cameraPosition[0] : this.character.getMidpoint().x + 150 + this.character.cameraPosition[0];
          var c = this.character.getMidpoint().y - 100 + this.character.cameraPosition[1];
          this.cameraFollowPointer.setPosition(b, c);
          if (a) {
            g.camera.scroll.set_x(this.cameraFollowPointer.getMidpoint().x - g.width / 2);
            g.camera.scroll.set_y(this.cameraFollowPointer.getMidpoint().y - g.height / 2);
          }
        },
        updateHealthBar: function () {
          this.healthColorStepperR.set_value(this.character.healthColorArray[0]);
          this.healthColorStepperG.set_value(this.character.healthColorArray[1]);
          this.healthColorStepperB.set_value(this.character.healthColorArray[2]);
          var a = this.healthBar.leftBar;
          var b = this.healthBar.rightBar;
          var c = this.character.healthColorArray[0];
          var d = this.character.healthColorArray[1];
          var e = this.character.healthColorArray[2];
          var f = Gb._new();
          var g = 255;
          if (g == null) {
            g = 255;
          }
          f = (f & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16) & -65281 | (d > 255 ? 255 : d < 0 ? 0 : d) << 8;
          f &= -256;
          f |= e > 255 ? 255 : e < 0 ? 0 : e;
          f &= 16777215;
          f |= (g > 255 ? 255 : g < 0 ? 0 : g) << 24;
          a.set_color(b.set_color(f));
          this.healthIcon.changeIcon(this.character.healthIcon, false);
        },
        updatePresence: function () {},
        reloadAnimList: function () {
          this.anims = this.character.animationsArray;
          if (this.anims.length > 0) {
            this.character.playAnim(this.anims[0].anim, true);
          }
          this.curAnim = 0;
          for (var a = new Cc(this.animsTxtGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.kill();
          }
          var c = 0;
          b = 0;
          for (var d = this.anims; b < d.length;) {
            var e = d[b];
            ++b;
            a = this.animsTxtGroup.recycle(R);
            a.set_x(10);
            a.set_y(32 + c * 20);
            a.set_fieldWidth(400);
            a.set_fieldHeight(20);
            a.set_text(e.anim + ": " + y.string(e.offsets));
            a.setFormat(null, 16, -1, "left", cb.OUTLINE_FAST, -16777216);
            e = a.scrollFactor;
            e.set_x(0);
            e.set_y(0);
            a.set_borderSize(1);
            this.animsTxtGroup.add(a);
            ++c;
          }
          c = 0;
          for (a = new Cc(this.animsTxtGroup.members, null); a.hasNext();) {
            b = a.next();
            b.set_color(-1);
            if (c == this.curAnim) {
              b.set_color(-16711936);
            }
            ++c;
          }
          if (this.animationDropDown != null) {
            this.reloadAnimationDropDown();
          }
        },
        updateTextColors: function () {
          var a = 0;
          for (var b = new Cc(this.animsTxtGroup.members, null); b.hasNext();) {
            var c = b.next();
            c.set_color(-1);
            if (a == this.curAnim) {
              c.set_color(-16711936);
            }
            ++a;
          }
        },
        updateCharacterPositions: function () {
          if (this.character == null || this.character.isPlayer) {
            if (this.character == null) {
              var a = this._char;
              a = a != "bf" && !v.startsWith(a, "bf-") && !v.endsWith(a, "-player") && !v.endsWith(a, "-dead") || v.endsWith(a, "-opponent") || v.startsWith(a, "gf-") || v.endsWith(a, "-gf") || a == "gf";
            } else {
              a = false;
            }
          } else {
            a = true;
          }
          if (a) {
            this.character.setPosition(this.dadPosition.x, this.dadPosition.y);
          } else {
            this.character.setPosition(this.bfPosition.x, this.bfPosition.y);
          }
          a = this.character;
          a.set_x(a.x + this.character.positionArray[0]);
          a = this.character;
          a.set_y(a.y + this.character.positionArray[1]);
        },
        predictCharacterIsNotPlayer: function (a) {
          if (a != "bf" && !v.startsWith(a, "bf-") && !v.endsWith(a, "-player") && !v.endsWith(a, "-dead") || v.endsWith(a, "-opponent") || v.startsWith(a, "gf-") || v.endsWith(a, "-gf")) {
            return true;
          } else {
            return a == "gf";
          }
        },
        addAnimation: function (a, b, c, d, e) {
          if (this.character.isAnimateAtlas) {
            if (e != null && e.length > 0) {
              this.character.atlas.anim.addBySymbolIndices(a, b, e, c, d);
            } else {
              this.character.atlas.anim.addBySymbol(a, b, c, d);
            }
          } else if (e != null && e.length > 0) {
            this.character.animation.addByIndices(a, b, e, "", c, d);
          } else {
            this.character.animation.addByPrefix(a, b, c, d);
          }
          if (!Object.prototype.hasOwnProperty.call(this.character.animOffsets.h, a)) {
            this.character.addOffset(a, 0, 0);
          }
        },
        newAnim: function (a, b) {
          return {
            offsets: [0, 0],
            loop: false,
            fps: 24,
            anim: a,
            indices: [],
            name: b
          };
        },
        reloadCharacterDropDown: function () {
          Object.create(null);
          var a = E.getPath("data/characterList.txt", "TEXT", null);
          var b = null;
          if (U.exists(a)) {
            b = U.getText(a);
          }
          if (b != null) {
            a = v.trim(b).split("\n");
            b = 0;
            for (var c = a.length; b < c;) {
              var d = b++;
              a[d] = v.trim(a[d]);
            }
          } else {
            a = [];
          }
          this.characterList = a;
          this.charDropDown.setData(vc.makeStrIdLabelArray(this.characterList, true));
          this.charDropDown.set_selectedLabel(this._char);
        },
        reloadAnimationDropDown: function () {
          var a = [];
          for (var b = 0, c = this.anims; b < c.length;) {
            var d = c[b];
            ++b;
            a.push(d.anim);
          }
          if (a.length < 1) {
            a.push("NO ANIMATIONS");
          }
          this.animationDropDown.setData(vc.makeStrIdLabelArray(a, true));
        },
        onSaveComplete: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", n(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", n(this, this.onSaveError));
            this._file = null;
            g.log.advanced("Successfully saved file.", Aa.NOTICE);
          }
        },
        onSaveCancel: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", n(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", n(this, this.onSaveError));
            this._file = null;
          }
        },
        onSaveError: function (a) {
          if (this._file != null) {
            this._file.removeEventListener("complete", n(this, this.onSaveComplete));
            this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
            this._file.removeEventListener("ioError", n(this, this.onSaveError));
            this._file = null;
            g.log.advanced("Problem saving file", Aa.ERROR, true);
          }
        },
        saveCharacter: function () {
          if (this._file == null) {
            var a = JSON.stringify({
              animations: this.character.animationsArray,
              image: this.character.imageFile,
              scale: this.character.jsonScale,
              sing_duration: this.character.singDuration,
              healthicon: this.character.healthIcon,
              position: this.character.positionArray,
              camera_position: this.character.cameraPosition,
              flip_x: this.character.originalFlipX,
              no_antialiasing: this.character.noAntialiasing,
              healthbar_colors: this.character.healthColorArray,
              vocals_file: this.character.vocalsFile,
              _editor_isPlayer: this.character.isPlayer
            }, null, "\t");
            if (a.length > 0) {
              this._file = new Ge();
              this._file.addEventListener("complete", n(this, this.onSaveComplete));
              this._file.addEventListener("cancel", n(this, this.onSaveCancel));
              this._file.addEventListener("ioError", n(this, this.onSaveError));
              this._file.save(a, "" + this._char + ".json");
            }
          }
        },
        __class__: gk
      });
      function ea(a, b) {
        this.characterFailed = false;
        this.characterData = {
          iconP1: null,
          iconP2: null,
          vocalsP1: null,
          vocalsP2: null
        };
        this.lastWaveformHeight = 0;
        this.wavData = [[[0], [0]], [[0], [0]]];
        this.waveformPrinted = true;
        this.columns = 9;
        this.colorSine = this.lastSecBeats = this.lastSecBeatsNext = 0;
        this.updatedSection = false;
        this.playtestingOnComplete = null;
        this.playtestingTime = 0;
        this.playtesting = false;
        this.sectionToCopy = this.currentType = 0;
        this.check_mute_inst = this.check_mute_vocals = this.check_mute_vocals_opponent = this.check_vortex = this.check_warnings = this.playSoundBf = this.playSoundDad = null;
        this.mouseQuant = false;
        this.text = "";
        this.quantizations = [4, 8, 12, 16, 20, 24, 32, 48, 64, 96, 192];
        this.blockPressWhileScrolling = [];
        this.blockPressWhileTypingOnStepper = [];
        this.blockPressWhileTypingOn = [];
        this.curZoom = 2;
        this.zoomList = [0.25, 0.5, 1, 2, 3, 4, 6, 8, 12, 16, 24];
        this.vocals = this.opponentVocals = null;
        this.playbackSpeed = 1;
        this.curSelectedNote = null;
        this.daquantspot = this.curEventSelected = this.curUndoIndex = this.curRedoIndex = 0;
        this.CAM_OFFSET = 360;
        this.amountSteps = 0;
        this.curSong = "Test";
        this.eventStuff = [["", "Nothing. Yep, that's right."], ["Dadbattle Spotlight", "Used in Dad Battle,\nValue 1: 0/1 = ON/OFF,\n2 = Target Dad\n3 = Target BF"], ["Hey!", "Plays the \"Hey!\" animation from Bopeebo,\nValue 1: BF = Only Boyfriend, GF = Only Girlfriend,\nSomething else = Both.\nValue 2: Custom animation duration,\nleave it blank for 0.6s"], ["Set GF Speed", "Sets GF head bopping speed,\nValue 1: 1 = Normal speed,\n2 = 1/2 speed, 4 = 1/4 speed etc.\nUsed on Fresh during the beatbox parts.\n\nWarning: Value must be integer!"], ["Philly Glow", "Exclusive to Week 3\nValue 1: 0/1/2 = OFF/ON/Reset Gradient\n \nNo, i won't add it to other weeks."], ["Kill Henchmen", "For Mom's songs, don't use this please, i love them :("], ["Add Camera Zoom", "Used on MILF on that one \"hard\" part\nValue 1: Camera zoom add (Default: 0.015)\nValue 2: UI zoom add (Default: 0.03)\nLeave the values blank if you want to use Default."], ["BG Freaks Expression", "Should be used only in \"school\" Stage!"], ["Trigger BG Ghouls", "Should be used only in \"schoolEvil\" Stage!"], ["Play Animation", "Plays an animation on a Character,\nonce the animation is completed,\nthe animation changes to Idle\n\nValue 1: Animation to play.\nValue 2: Character (Dad, BF, GF)"], ["Camera Follow Pos", "Value 1: X\nValue 2: Y\n\nThe camera won't change the follow point\nafter using this, for getting it back\nto normal, leave both values blank."], ["Alt Idle Animation", "Sets a specified suffix after the idle animation name.\nYou can use this to trigger 'idle-alt' if you set\nValue 2 to -alt\n\nValue 1: Character to set (Dad, BF or GF)\nValue 2: New suffix (Leave it blank to disable)"], ["Screen Shake", "Value 1: Camera shake\nValue 2: HUD shake\n\nEvery value works as the following example: \"1, 0.05\".\nThe first number (1) is the duration.\nThe second number (0.05) is the intensity."], ["Change Character", "Value 1: Character to change (Dad, BF, GF)\nValue 2: New character's name"], ["Change Scroll Speed", "Value 1: Scroll Speed Multiplier (1 is default)\nValue 2: Time it takes to change fully in seconds."], ["Set Property", "Value 1: Variable name\nValue 2: New value"], ["Play Sound", "Value 1: Sound file name\nValue 2: Volume (Default: 1), ranges from 0 to 1"]];
        this.redos = [];
        this.undos = [];
        this.curNoteTypes = [];
        this.ignoreWarnings = false;
        P.call(this, a, b);
      }
      h["states.editors.ChartingState"] = ea;
      ea.__name__ = "states.editors.ChartingState";
      ea.__super__ = P;
      ea.prototype = q(P.prototype, {
        create: function () {
          if (z.SONG != null) {
            this._song = z.SONG;
          } else {
            qb.list = qb.defaultList.slice();
            this._song = {
              song: "Test",
              notes: [],
              events: [],
              bpm: 150,
              needsVoices: true,
              player1: "bf",
              player2: "dad",
              gfVersion: "gf",
              speed: 1,
              stage: "stage"
            };
            this.addSection();
            z.SONG = this._song;
          }
          ea.vortex = g.save.data.chart_vortex;
          this.ignoreWarnings = g.save.data.ignoreWarnings;
          var a = new G().loadGraphic(E.image("menuDesat"));
          a.set_antialiasing(C.data.antialiasing);
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_color(-14540254);
          this.add(a);
          this.gridLayer = new ab();
          this.add(this.gridLayer);
          this.waveformSprite = new G(ea.GRID_SIZE, 0).makeGraphic(1, 1, 16777215);
          this.add(this.waveformSprite);
          a = new G(-ea.GRID_SIZE - 5, -90).loadGraphic(E.image("eventArrow"));
          a.set_antialiasing(C.data.antialiasing);
          this.leftIcon = new Mf("bf");
          this.rightIcon = new Mf("dad");
          b = a.scrollFactor;
          var c = 1;
          var d = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.leftIcon.scrollFactor;
          d = c = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          b = this.rightIcon.scrollFactor;
          d = c = 1;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a.setGraphicSize(30, 30);
          this.leftIcon.setGraphicSize(0, 45);
          this.rightIcon.setGraphicSize(0, 45);
          this.add(a);
          this.add(this.leftIcon);
          this.add(this.rightIcon);
          this.leftIcon.setPosition(ea.GRID_SIZE + 10, -100);
          this.rightIcon.setPosition(ea.GRID_SIZE * 5.2, -100);
          this.curRenderedSustains = new ab();
          this.curRenderedNotes = new ab();
          this.curRenderedNoteType = new ab();
          this.nextRenderedSustains = new ab();
          this.nextRenderedNotes = new ab();
          g.mouse.set_visible(true);
          this.updateJsonData();
          a = this._song.song;
          c = new na("[~&\\\\;:<>#]", "");
          b = new na("[.,'\"%?!]", "");
          a = c.split(v.replace(a, " ", "-")).join("-");
          this.currentSongName = b.split(a).join("").toLowerCase();
          this.loadSong();
          this.reloadGridLayer();
          K.set_bpm(this._song.bpm);
          K.mapBPMChanges(this._song);
          if (ea.curSec >= this._song.notes.length) {
            ea.curSec = this._song.notes.length - 1;
          }
          this.bpmTxt = new R(1000, 50, 0, "", 16);
          b = this.bpmTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.bpmTxt);
          this.strumLine = new G(0, 50).makeGraphic(ea.GRID_SIZE * 9 | 0, 4);
          this.add(this.strumLine);
          this.quant = new Bi("chart_quant", "chart_quant");
          this.quant.animation.addByPrefix("q", "chart_quant", 0, false);
          this.quant.animation.play("q", true, false, 0);
          this.quant.sprTracker = this.strumLine;
          this.quant.xAdd = -32;
          this.quant.yAdd = 8;
          this.add(this.quant);
          this.strumLineNotes = new ab();
          for (a = 0; a < 8;) {
            b = a++;
            b = new ah(ea.GRID_SIZE * (b + 1), this.strumLine.y, b % 4, 0);
            b.setGraphicSize(ea.GRID_SIZE, ea.GRID_SIZE);
            b.updateHitbox();
            b.playAnim("static", true);
            this.strumLineNotes.add(b);
            b = b.scrollFactor;
            d = c = 1;
            if (d == null) {
              d = 0;
            }
            if (c == null) {
              c = 0;
            }
            b.set_x(c);
            b.set_y(d);
          }
          this.add(this.strumLineNotes);
          this.camPos = new hc(0, 0, 1, 1);
          this.camPos.setPosition(this.strumLine.x + this.CAM_OFFSET, this.strumLine.y);
          this.dummyArrow = new G().makeGraphic(ea.GRID_SIZE, ea.GRID_SIZE);
          this.dummyArrow.set_antialiasing(C.data.antialiasing);
          this.add(this.dummyArrow);
          this.UI_box = new ie(null, null, [{
            name: "Song",
            label: "Song"
          }, {
            name: "Section",
            label: "Section"
          }, {
            name: "Note",
            label: "Note"
          }, {
            name: "Events",
            label: "Events"
          }, {
            name: "Charting",
            label: "Charting"
          }, {
            name: "Data",
            label: "Data"
          }], null, true);
          this.UI_box.resize(300, 400);
          this.UI_box.set_x(640 + ea.GRID_SIZE / 2);
          this.UI_box.set_y(25);
          b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.text = "W/S or Mouse Wheel - Change Conductor's strum time\n\t\t\nA/D - Go to the previous/next section\n\t\t\nLeft/Right - Change Snap\n\t\t\nUp/Down - Change Conductor's Strum Time with Snapping\nLeft Bracket / Right Bracket - Change Song Playback Rate (SHIFT to go Faster)\n\t\t\nALT + Left Bracket / Right Bracket - Reset Song Playback Rate\nHold Shift to move 4x faster\n\t\t\nHold Control and click on an arrow to select it\n\t\t\nZ/X - Zoom in/out\n\t\t\n\n\t\t\nEsc - Test your chart inside Chart Editor\n\t\t\nEnter - Play your chart\n\t\t\nQ/E - Decrease/Increase Note Sustain Length\n\t\t\nSpace - Stop/Resume song";
          c = this.text.split("\n");
          a = 0;
          for (d = c.length; a < d;) {
            b = a++;
            var e = new R(this.UI_box.x, this.UI_box.y + this.UI_box.get_height() + 8, 0, c[b], 16);
            e.set_y(e.y + b * 12);
            e.setFormat("assets/fonts/vcr.ttf", 14, -1, "left");
            b = e.scrollFactor;
            b.set_x(0);
            b.set_y(0);
            this.add(e);
          }
          this.add(this.UI_box);
          this.addSongUI();
          this.addSectionUI();
          this.addNoteUI();
          this.addEventsUI();
          this.addChartingUI();
          this.addDataUI();
          this.updateHeads();
          this.updateWaveform();
          this.add(this.curRenderedSustains);
          this.add(this.curRenderedNotes);
          this.add(this.curRenderedNoteType);
          this.add(this.nextRenderedSustains);
          this.add(this.nextRenderedNotes);
          if (ea.lastSong != this.currentSongName) {
            this.changeSection();
          }
          ea.lastSong = this.currentSongName;
          this.zoomTxt = new R(10, 10, 0, "Zoom: 1 / 1", 16);
          b = this.zoomTxt.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.zoomTxt);
          this.updateGrid();
          P.prototype.create.call(this);
        },
        addSongUI: function () {
          var a = this;
          this.UI_songTitle = new pb(10, 10, 70, this._song.song, 8);
          this.blockPressWhileTypingOn.push(this.UI_songTitle);
          var b = new Bb(10, 25, null, null, "Has voice track", 100);
          b.set_checked(this._song.needsVoices);
          b.callback = function () {
            a._song.needsVoices = b.checked;
          };
          var c = new zb(110, 8, "Save", function () {
            a.saveLevel();
          });
          var d = new zb(c.x + 90, c.y, "Reload Audio", function () {
            var b = a.UI_songTitle.text;
            var c = new na("[~&\\\\;:<>#]", "");
            var d = new na("[.,'\"%?!]", "");
            b = c.split(v.replace(b, " ", "-")).join("-");
            d = d.split(b).join("").toLowerCase();
            a.currentSongName = d;
            a.updateJsonData();
            a.loadSong();
            a.updateWaveform();
          });
          var e = new zb(d.x, c.y + 30, "Reload JSON", function () {
            a.openSubState(new Mi("This action will clear current progress.\n\nProceed?", 0, function () {
              a.loadJson(a._song.song.toLowerCase());
            }, null, a.ignoreWarnings));
          });
          var f = new zb(e.x, e.y + 30, "Load Autosave", function () {
            z.SONG = Ld.parseJSONshit(g.save.data.autosave);
            P.resetState();
          });
          var k = new zb(f.x, f.y + 30, "Load Events", function () {
            var b = a._song.song;
            var c = new na("[~&\\\\;:<>#]", "");
            var d = new na("[.,'\"%?!]", "");
            b = c.split(v.replace(b, " ", "-")).join("-");
            d = d.split(b).join("").toLowerCase();
            b = E.getPath("data/" + (d + "/events.json"), "TEXT", null);
            if (U.exists(b)) {
              a.clearEvents();
              d = Ld.loadFromJson("events", d);
              a._song.events = d.events;
              a.changeSection(ea.curSec);
            }
          });
          var h = new zb(110, e.y, "Save Events", function () {
            a.saveEvents();
          });
          var l = new zb(320, 310, "Clear events", function () {
            a.openSubState(new Mi("This action will clear current progress.\n\nProceed?", 0, n(a, a.clearEvents), null, a.ignoreWarnings));
          });
          l.set_color(-65536);
          l.label.set_color(-1);
          var p = new zb(320, l.y + 30, "Clear notes", function () {
            a.openSubState(new Mi("This action will clear current progress.\n\nProceed?", 0, function () {
              for (var b = 0, c = a._song.notes.length; b < c;) {
                var d = b++;
                a._song.notes[d].sectionNotes = [];
              }
              a.updateGrid();
            }, null, a.ignoreWarnings));
          });
          p.set_color(-65536);
          p.label.set_color(-1);
          var r = new Lb(10, 70, 1, 1, 1, 400, 3);
          r.set_value(K.bpm);
          r.name = "song_bpm";
          this.blockPressWhileTypingOnStepper.push(r);
          var m = new Lb(10, r.y + 35, 0.1, 1, 0.1, 10, 2);
          m.set_value(this._song.speed);
          m.name = "song_speed";
          this.blockPressWhileTypingOnStepper.push(m);
          var q = "characters/";
          if (q == null) {
            q = "";
          }
          var w = [];
          var u = "assets/shared/";
          if (u == null) {
            u = "assets/shared/";
          }
          u = v.trim(u);
          if (!v.endsWith(u, "/")) {
            u += "/";
          }
          if (!v.startsWith(u, "assets/")) {
            u = "assets/" + u;
          }
          var Y = [];
          var A = [];
          A.push(u + "data/characterList.txt");
          u += "data/characterList.txt";
          if (A.indexOf(u) != -1) {
            L.remove(A, u);
            A.splice(0, 0, u);
          }
          for (u = 0; u < A.length;) {
            q = A[u];
            ++u;
            var C = null;
            if (U.exists(q)) {
              C = U.getText(q);
            }
            if (C != null) {
              q = [];
              q = v.trim(C).split("\n");
              C = 0;
              for (var D = q.length; C < D;) {
                var La = C++;
                q[La] = v.trim(q[La]);
              }
            } else {
              q = [];
            }
            for (C = 0; C < q.length;) {
              D = q[C];
              ++C;
              if (Y.indexOf(D) == -1 && D.length > 0) {
                Y.push(D);
              }
            }
          }
          var B = Y;
          for (u = 0; u < B.length;) {
            var G = B[u];
            ++u;
            if (v.trim(G).length > 0) {
              w.push(G);
            }
          }
          w = [];
          G = new vc(10, m.y + 45, vc.makeStrIdLabelArray(B, true), function (b) {
            a._song.player1 = B[y.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          G.set_selectedLabel(this._song.player1);
          this.blockPressWhileScrolling.push(G);
          var x = new vc(G.x, G.y + 40, vc.makeStrIdLabelArray(B, true), function (b) {
            a._song.gfVersion = B[y.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          x.set_selectedLabel(this._song.gfVersion);
          this.blockPressWhileScrolling.push(x);
          var I = new vc(G.x, x.y + 40, vc.makeStrIdLabelArray(B, true), function (b) {
            a._song.player2 = B[y.parseInt(b)];
            a.updateJsonData();
            a.updateHeads();
          });
          I.set_selectedLabel(this._song.player2);
          this.blockPressWhileScrolling.push(I);
          q = "stages/";
          if (q == null) {
            q = "";
          }
          u = "assets/shared/";
          if (u == null) {
            u = "assets/shared/";
          }
          u = v.trim(u);
          if (!v.endsWith(u, "/")) {
            u += "/";
          }
          if (!v.startsWith(u, "assets/")) {
            u = "assets/" + u;
          }
          Y = [];
          A = [];
          A.push(u + "data/stageList.txt");
          u += "data/stageList.txt";
          if (A.indexOf(u) != -1) {
            L.remove(A, u);
            A.splice(0, 0, u);
          }
          for (u = 0; u < A.length;) {
            q = A[u];
            ++u;
            C = null;
            if (U.exists(q)) {
              C = U.getText(q);
            }
            if (C != null) {
              q = [];
              q = v.trim(C).split("\n");
              C = 0;
              D = q.length;
              while (C < D) {
                La = C++;
                q[La] = v.trim(q[La]);
              }
            } else {
              q = [];
            }
            for (C = 0; C < q.length;) {
              D = q[C];
              ++C;
              if (Y.indexOf(D) == -1 && D.length > 0) {
                Y.push(D);
              }
            }
          }
          var ha = [];
          for (u = 0; u < Y.length;) {
            A = Y[u];
            ++u;
            if (v.trim(A).length > 0) {
              ha.push(A);
            }
            w.push(A);
          }
          if (ha.length < 1) {
            ha.push("stage");
          }
          this.stageDropDown = new vc(G.x + 140, G.y, vc.makeStrIdLabelArray(ha, true), function (b) {
            a._song.stage = ha[y.parseInt(b)];
          });
          this.stageDropDown.set_selectedLabel(this._song.stage);
          this.blockPressWhileScrolling.push(this.stageDropDown);
          w = new Ma(null, this.UI_box);
          w.name = "Song";
          w.add(this.UI_songTitle);
          w.add(b);
          w.add(l);
          w.add(p);
          w.add(c);
          w.add(h);
          w.add(d);
          w.add(e);
          w.add(f);
          w.add(k);
          w.add(r);
          w.add(m);
          w.add(new R(r.x, r.y - 15, 0, "Song BPM:"));
          w.add(new R(r.x + 100, r.y - 15, 0, "Song Offset:"));
          w.add(new R(m.x, m.y - 15, 0, "Song Speed:"));
          w.add(new R(I.x, I.y - 15, 0, "Opponent:"));
          w.add(new R(x.x, x.y - 15, 0, "Girlfriend:"));
          w.add(new R(G.x, G.y - 15, 0, "Boyfriend:"));
          w.add(new R(this.stageDropDown.x, this.stageDropDown.y - 15, 0, "Stage:"));
          w.add(I);
          w.add(x);
          w.add(G);
          w.add(this.stageDropDown);
          this.UI_box.addGroup(w);
          this.initPsychCamera().follow(this.camPos, wf.LOCKON, 999);
        },
        addSectionUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Section";
          this.check_mustHitSection = new Bb(10, 15, null, null, "Must hit section", 100);
          this.check_mustHitSection.name = "check_mustHit";
          this.check_mustHitSection.set_checked(this._song.notes[ea.curSec].mustHitSection);
          this.check_gfSection = new Bb(10, this.check_mustHitSection.y + 22, null, null, "GF section", 100);
          this.check_gfSection.name = "check_gf";
          this.check_gfSection.set_checked(this._song.notes[ea.curSec].gfSection);
          this.check_altAnim = new Bb(this.check_gfSection.x + 120, this.check_gfSection.y, null, null, "Alt Animation", 100);
          this.check_altAnim.set_checked(this._song.notes[ea.curSec].altAnim);
          this.stepperBeats = new Lb(10, 100, 1, 4, 1, 7, 2);
          this.stepperBeats.set_value(this.getSectionBeats());
          this.stepperBeats.name = "section_beats";
          this.blockPressWhileTypingOnStepper.push(this.stepperBeats);
          this.check_altAnim.name = "check_altAnim";
          this.check_changeBPM = new Bb(10, this.stepperBeats.y + 30, null, null, "Change BPM", 100);
          this.check_changeBPM.set_checked(this._song.notes[ea.curSec].changeBPM);
          this.check_changeBPM.name = "check_changeBPM";
          this.stepperSectionBPM = new Lb(10, this.check_changeBPM.y + 20, 1, K.bpm, 0, 999, 1);
          if (this.check_changeBPM.checked) {
            this.stepperSectionBPM.set_value(this._song.notes[ea.curSec].bpm);
          } else {
            this.stepperSectionBPM.set_value(K.bpm);
          }
          this.stepperSectionBPM.name = "section_bpm";
          this.blockPressWhileTypingOnStepper.push(this.stepperSectionBPM);
          var c = null;
          var d = null;
          var e = new zb(10, 190, "Copy Section", function () {
            a.notesCopied = [];
            a.sectionToCopy = ea.curSec;
            for (var b = 0, c = a._song.notes[ea.curSec].sectionNotes.length; b < c;) {
              var d = b++;
              a.notesCopied.push(a._song.notes[ea.curSec].sectionNotes[d]);
            }
            var e = a.sectionStartTime();
            var f = a.sectionStartTime(1);
            b = 0;
            for (c = a._song.events; b < c.length;) {
              var g = c[b];
              ++b;
              var k = g[0];
              if (f > g[0] && g[0] >= e) {
                var h = [];
                for (var l = 0, m = g[1].length; l < m;) {
                  d = l++;
                  d = g[1][d];
                  h.push([d[0], d[1], d[2]]);
                }
                a.notesCopied.push([k, -1, h]);
              }
            }
          });
          var f = new zb(e.x + 100, e.y, "Paste Section", function () {
            if (a.notesCopied != null && !(a.notesCopied.length < 1)) {
              var b = K.stepCrochet * 4 * a.getSectionBeats() * (ea.curSec - a.sectionToCopy);
              for (var e = 0, f = a.notesCopied; e < f.length;) {
                var g = f[e];
                ++e;
                var k = g[0] + b;
                if (g[1] < 0) {
                  if (c.checked) {
                    var h = [];
                    for (var l = 0, m = g[2].length; l < m;) {
                      var p = l++;
                      p = g[2][p];
                      h.push([p[0], p[1], p[2]]);
                    }
                    a._song.events.push([k, h]);
                  }
                } else if (d.checked) {
                  g = g[4] != null ? [k, g[1], g[2], g[3], g[4]] : [k, g[1], g[2], g[3]];
                  a._song.notes[ea.curSec].sectionNotes.push(g);
                }
              }
              a.updateGrid();
            }
          });
          var g = new zb(f.x + 100, f.y, "Clear", function () {
            if (d.checked) {
              a._song.notes[ea.curSec].sectionNotes = [];
            }
            if (c.checked) {
              for (var b = a._song.events.length - 1, e = a.sectionStartTime(), f = a.sectionStartTime(1); b > -1;) {
                var g = a._song.events[b];
                if (g != null && f > g[0] && g[0] >= e) {
                  L.remove(a._song.events, g);
                }
                --b;
              }
            }
            a.updateGrid();
            a.updateNoteUI();
          });
          g.set_color(-65536);
          g.label.set_color(-1);
          d = new Bb(10, g.y + 25, null, null, "Notes", 100);
          d.set_checked(true);
          c = new Bb(d.x + 100, d.y, null, null, "Events", 100);
          c.set_checked(true);
          var h = new zb(10, d.y + 40, "Swap section", function () {
            for (var b = 0, c = a._song.notes[ea.curSec].sectionNotes.length; b < c;) {
              var d = b++;
              var e = a._song.notes[ea.curSec].sectionNotes[d];
              e[1] = (e[1] + 4) % 8;
              a._song.notes[ea.curSec].sectionNotes[d] = e;
            }
            a.updateGrid();
          });
          var l = null;
          var p = new zb(10, h.y + 30, "Copy last section", function () {
            var b = l.value | 0;
            if (b != 0) {
              var c = ea.curSec;
              c = c > b ? c : b;
              for (var d = 0, e = a._song.notes[c - b].sectionNotes; d < e.length;) {
                var f = e[d];
                ++d;
                f = [f[0] + K.stepCrochet * 4 * a.getSectionBeats(c) * b, f[1], f[2], f[3]];
                a._song.notes[c].sectionNotes.push(f);
              }
              f = a.sectionStartTime(-b);
              var g = a.sectionStartTime(-b + 1);
              d = 0;
              for (e = a._song.events; d < e.length;) {
                var k = e[d];
                ++d;
                var h = k[0];
                if (g > k[0] && k[0] >= f) {
                  h += K.stepCrochet * 4 * a.getSectionBeats(c) * b;
                  var m = [];
                  for (var p = 0, n = k[1].length; p < n;) {
                    var r = p++;
                    r = k[1][r];
                    m.push([r[0], r[1], r[2]]);
                  }
                  a._song.events.push([h, m]);
                }
              }
              a.updateGrid();
            }
          });
          p.setGraphicSize(80, 30);
          p.updateHitbox();
          l = new Lb(p.x + 100, p.y, 1, 1, -999, 999, 0);
          this.blockPressWhileTypingOnStepper.push(l);
          var n = new zb(10, p.y + 45, "Duet Notes", function () {
            var b = [];
            for (var c = 0, d = a._song.notes[ea.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              var f = e[1];
              f = f > 3 ? f - 4 : f + 4;
              b.push([e[0], f, e[2], e[3]]);
            }
            for (c = 0; c < b.length;) {
              d = b[c];
              ++c;
              a._song.notes[ea.curSec].sectionNotes.push(d);
            }
            a.updateGrid();
          });
          var m = new zb(n.x + 100, n.y, "Mirror Notes", function () {
            var b = [];
            for (var c = 0, d = a._song.notes[ea.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              var f = e[1] % 4;
              f = 3 - f;
              if (e[1] > 3) {
                f += 4;
              }
              e[1] = f;
            }
            for (c = 0; c < b.length;) {
              ++c;
            }
            a.updateGrid();
          });
          b.add(new R(this.stepperBeats.x, this.stepperBeats.y - 15, 0, "Beats per Section:"));
          b.add(this.stepperBeats);
          b.add(this.stepperSectionBPM);
          b.add(this.check_mustHitSection);
          b.add(this.check_gfSection);
          b.add(this.check_altAnim);
          b.add(this.check_changeBPM);
          b.add(e);
          b.add(f);
          b.add(g);
          b.add(d);
          b.add(c);
          b.add(h);
          b.add(l);
          b.add(p);
          b.add(n);
          b.add(m);
          this.UI_box.addGroup(b);
        },
        addNoteUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Note";
          this.stepperSusLength = new Lb(10, 25, K.stepCrochet / 2, 0, 0, K.stepCrochet * 64);
          this.stepperSusLength.set_value(0);
          this.stepperSusLength.name = "note_susLength";
          this.blockPressWhileTypingOnStepper.push(this.stepperSusLength);
          this.strumTimeInputText = new pb(10, 65, 180, "0");
          b.add(this.strumTimeInputText);
          this.blockPressWhileTypingOn.push(this.strumTimeInputText);
          for (var c = 0; c < ea.noteTypeList.length;) {
            this.curNoteTypes.push(ea.noteTypeList[c]);
            ++c;
          }
          c = this.curNoteTypes.slice();
          for (var d = 1, e = c.length; d < e;) {
            var f = d++;
            c[f] = f + ". " + c[f];
          }
          this.noteTypeDropDown = new vc(10, 105, vc.makeStrIdLabelArray(c, true), function (b) {
            a.currentType = y.parseInt(b);
            if (a.curSelectedNote != null && a.curSelectedNote[1] > -1) {
              a.curSelectedNote[3] = a.curNoteTypes[a.currentType];
              a.updateGrid();
            }
          });
          this.blockPressWhileScrolling.push(this.noteTypeDropDown);
          b.add(new R(10, 10, 0, "Sustain length:"));
          b.add(new R(10, 50, 0, "Strum time (in miliseconds):"));
          b.add(new R(10, 90, 0, "Note type:"));
          b.add(this.stepperSusLength);
          b.add(this.strumTimeInputText);
          b.add(this.noteTypeDropDown);
          this.UI_box.addGroup(b);
        },
        addEventsUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Events";
          this.descText = new R(20, 200, 0, this.eventStuff[0][0]);
          var c = [];
          for (var d = 0, e = this.eventStuff.length; d < e;) {
            var f = d++;
            c.push(this.eventStuff[f][0]);
          }
          d = new R(20, 30, 0, "Event:");
          b.add(d);
          this.eventDropDown = new vc(20, 50, vc.makeStrIdLabelArray(c, true), function (b) {
            b = y.parseInt(b);
            a.descText.set_text(a.eventStuff[b][1]);
            if (a.curSelectedNote != null && a.eventStuff != null) {
              if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
                a.curSelectedNote[1][a.curEventSelected][0] = a.eventStuff[b][0];
              }
              a.updateGrid();
            }
          });
          this.blockPressWhileScrolling.push(this.eventDropDown);
          d = new R(20, 90, 0, "Value 1:");
          b.add(d);
          this.value1InputText = new pb(20, 110, 100, "");
          this.blockPressWhileTypingOn.push(this.value1InputText);
          d = new R(20, 130, 0, "Value 2:");
          b.add(d);
          this.value2InputText = new pb(20, 150, 100, "");
          this.blockPressWhileTypingOn.push(this.value2InputText);
          d = new zb(this.eventDropDown.x + this.eventDropDown.get_width() + 10, this.eventDropDown.y, "-", function () {
            if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
              if (a.curSelectedNote[1].length < 2) {
                L.remove(a._song.events, a.curSelectedNote);
                a.curSelectedNote = null;
              } else {
                a.curSelectedNote[1].remove(a.curSelectedNote[1][a.curEventSelected]);
              }
              --a.curEventSelected;
              if (a.curEventSelected < 0) {
                a.curEventSelected = 0;
              } else {
                if (a.curSelectedNote != null) {
                  var b = a.curSelectedNote[1];
                  var c = a.curEventSelected >= b.length;
                } else {
                  c = false;
                }
                if (c) {
                  a.curEventSelected = b.length - 1;
                }
              }
              a.changeEventSelected();
              a.updateGrid();
            }
          });
          d.setGraphicSize(d.get_height() | 0, d.get_height() | 0);
          d.updateHitbox();
          d.set_color(-65536);
          d.label.set_color(-1);
          d.label.set_size(12);
          this.setAllLabelsOffset(d, -30, 0);
          b.add(d);
          c = new zb(d.x + d.get_width() + 10, d.y, "+", function () {
            if (a.curSelectedNote != null && a.curSelectedNote[2] == null) {
              a.curSelectedNote[1].push(["", "", ""]);
              a.changeEventSelected(1);
              a.updateGrid();
            }
          });
          c.setGraphicSize(d.get_width() | 0, d.get_height() | 0);
          c.updateHitbox();
          c.set_color(-16744448);
          c.label.set_color(-1);
          c.label.set_size(12);
          this.setAllLabelsOffset(c, -30, 0);
          b.add(c);
          d = new zb(c.x + c.get_width() + 20, c.y, "<", function () {
            a.changeEventSelected(-1);
          });
          d.setGraphicSize(c.get_width() | 0, c.get_height() | 0);
          d.updateHitbox();
          d.label.set_size(12);
          this.setAllLabelsOffset(d, -30, 0);
          b.add(d);
          e = new zb(d.x + d.get_width() + 10, d.y, ">", function () {
            a.changeEventSelected(1);
          });
          e.setGraphicSize(d.get_width() | 0, d.get_height() | 0);
          e.updateHitbox();
          e.label.set_size(12);
          this.setAllLabelsOffset(e, -30, 0);
          b.add(e);
          this.selectedEventText = new R(c.x - 100, c.y + c.get_height() + 6, e.x - c.x + 186, "Selected Event: None");
          this.selectedEventText.set_alignment("center");
          b.add(this.selectedEventText);
          b.add(this.descText);
          b.add(this.value1InputText);
          b.add(this.value2InputText);
          b.add(this.eventDropDown);
          this.UI_box.addGroup(b);
        },
        changeEventSelected: function (a) {
          if (a == null) {
            a = 0;
          }
          if (this.curSelectedNote != null && this.curSelectedNote[2] == null) {
            this.curEventSelected += a;
            if (this.curEventSelected < 0) {
              this.curEventSelected = (this.curSelectedNote[1].length | 0) - 1;
            } else if (this.curEventSelected >= this.curSelectedNote[1].length) {
              this.curEventSelected = 0;
            }
            this.selectedEventText.set_text("Selected Event: " + (this.curEventSelected + 1) + " / " + y.string(this.curSelectedNote[1].length));
          } else {
            this.curEventSelected = 0;
            this.selectedEventText.set_text("Selected Event: None");
          }
          this.updateNoteUI();
        },
        setAllLabelsOffset: function (a, b, c) {
          var d = 0;
          for (a = a.labelOffsets; d < a.length;) {
            var e = a[d];
            ++d;
            var f = b;
            var g = c;
            if (g == null) {
              g = 0;
            }
            if (f == null) {
              f = 0;
            }
            e.set_x(f);
            e.set_y(g);
          }
        },
        addChartingUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Charting";
          this.check_mute_inst = new Bb(10, 280, null, null, "Mute Instrumental (in editor)", 100);
          this.check_mute_inst.set_checked(false);
          this.check_mute_inst.callback = function () {
            var b = a.instVolume.value;
            if (a.check_mute_inst.checked) {
              b = 0;
            }
            g.sound.music.set_volume(b);
          };
          this.mouseScrollingQuant = new Bb(10, 190, null, null, "Mouse Scrolling Quantization", 100);
          if (g.save.data.mouseScrollingQuant == null) {
            g.save.data.mouseScrollingQuant = false;
          }
          this.mouseScrollingQuant.set_checked(g.save.data.mouseScrollingQuant);
          this.mouseScrollingQuant.callback = function () {
            g.save.data.mouseScrollingQuant = a.mouseScrollingQuant.checked;
            a.mouseQuant = g.save.data.mouseScrollingQuant;
          };
          this.check_vortex = new Bb(10, 160, null, null, "Vortex Editor (BETA)", 100);
          if (g.save.data.chart_vortex == null) {
            g.save.data.chart_vortex = false;
          }
          this.check_vortex.set_checked(g.save.data.chart_vortex);
          this.check_vortex.callback = function () {
            g.save.data.chart_vortex = a.check_vortex.checked;
            ea.vortex = g.save.data.chart_vortex;
            a.reloadGridLayer();
          };
          this.check_warnings = new Bb(10, 120, null, null, "Ignore Progress Warnings", 100);
          if (g.save.data.ignoreWarnings == null) {
            g.save.data.ignoreWarnings = false;
          }
          this.check_warnings.set_checked(g.save.data.ignoreWarnings);
          this.check_warnings.callback = function () {
            g.save.data.ignoreWarnings = a.check_warnings.checked;
            a.ignoreWarnings = g.save.data.ignoreWarnings;
          };
          this.check_mute_vocals = new Bb(this.check_mute_inst.x, this.check_mute_inst.y + 30, null, null, "Mute Main Vocals (in editor)", 100);
          this.check_mute_vocals.set_checked(false);
          this.check_mute_vocals.callback = function () {
            var b = a.voicesVolume.value;
            if (a.check_mute_vocals.checked) {
              b = 0;
            }
            if (a.vocals != null) {
              a.vocals.set_volume(b);
            }
          };
          this.check_mute_vocals_opponent = new Bb(this.check_mute_vocals.x + 120, this.check_mute_vocals.y, null, null, "Mute Opp. Vocals (in editor)", 100);
          this.check_mute_vocals_opponent.set_checked(false);
          this.check_mute_vocals_opponent.callback = function () {
            var b = a.voicesOppVolume.value;
            if (a.check_mute_vocals_opponent.checked) {
              b = 0;
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.set_volume(b);
            }
          };
          this.playSoundBf = new Bb(this.check_mute_inst.x, this.check_mute_vocals.y + 30, null, null, "Play Sound (Boyfriend notes)", 100, null, function () {
            g.save.data.chart_playSoundBf = a.playSoundBf.checked;
          });
          if (g.save.data.chart_playSoundBf == null) {
            g.save.data.chart_playSoundBf = false;
          }
          this.playSoundBf.set_checked(g.save.data.chart_playSoundBf);
          this.playSoundDad = new Bb(this.check_mute_inst.x + 120, this.playSoundBf.y, null, null, "Play Sound (Opponent notes)", 100, null, function () {
            g.save.data.chart_playSoundDad = a.playSoundDad.checked;
          });
          if (g.save.data.chart_playSoundDad == null) {
            g.save.data.chart_playSoundDad = false;
          }
          this.playSoundDad.set_checked(g.save.data.chart_playSoundDad);
          this.metronome = new Bb(10, 15, null, null, "Metronome Enabled", 100, null, function () {
            g.save.data.chart_metronome = a.metronome.checked;
          });
          if (g.save.data.chart_metronome == null) {
            g.save.data.chart_metronome = false;
          }
          this.metronome.set_checked(g.save.data.chart_metronome);
          this.metronomeStepper = new Lb(15, 55, 5, this._song.bpm, 1, 1500, 1);
          this.metronomeOffsetStepper = new Lb(this.metronomeStepper.x + 100, this.metronomeStepper.y, 25, 0, 0, 1000, 1);
          this.blockPressWhileTypingOnStepper.push(this.metronomeStepper);
          this.blockPressWhileTypingOnStepper.push(this.metronomeOffsetStepper);
          this.disableAutoScrolling = new Bb(this.metronome.x + 120, this.metronome.y, null, null, "Disable Autoscroll (Not Recommended)", 120, null, function () {
            g.save.data.chart_noAutoScroll = a.disableAutoScrolling.checked;
          });
          if (g.save.data.chart_noAutoScroll == null) {
            g.save.data.chart_noAutoScroll = false;
          }
          this.disableAutoScrolling.set_checked(g.save.data.chart_noAutoScroll);
          this.instVolume = new Lb(this.metronomeStepper.x, 250, 0.1, 1, 0, 1, 1);
          this.instVolume.set_value(g.sound.music._volume);
          this.instVolume.name = "inst_volume";
          this.blockPressWhileTypingOnStepper.push(this.instVolume);
          this.voicesVolume = new Lb(this.instVolume.x + 100, this.instVolume.y, 0.1, 1, 0, 1, 1);
          this.voicesVolume.set_value(this.vocals._volume);
          this.voicesVolume.name = "voices_volume";
          this.blockPressWhileTypingOnStepper.push(this.voicesVolume);
          this.voicesOppVolume = new Lb(this.instVolume.x + 200, this.instVolume.y, 0.1, 1, 0, 1, 1);
          this.voicesOppVolume.set_value(this.vocals._volume);
          this.voicesOppVolume.name = "voices_opp_volume";
          this.blockPressWhileTypingOnStepper.push(this.voicesOppVolume);
          this.sliderRate = new wh(this, "playbackSpeed", 120, 120, 0.5, 3, 150, null, 5, -1, -16777216);
          this.sliderRate.nameLabel.set_text("Playback Rate");
          b.add(this.sliderRate);
          b.add(new R(this.metronomeStepper.x, this.metronomeStepper.y - 15, 0, "BPM:"));
          b.add(new R(this.metronomeOffsetStepper.x, this.metronomeOffsetStepper.y - 15, 0, "Offset (ms):"));
          b.add(new R(this.instVolume.x, this.instVolume.y - 15, 0, "Inst Volume"));
          b.add(new R(this.voicesVolume.x, this.voicesVolume.y - 15, 0, "Main Vocals"));
          b.add(new R(this.voicesOppVolume.x, this.voicesOppVolume.y - 15, 0, "Opp. Vocals"));
          b.add(this.metronome);
          b.add(this.disableAutoScrolling);
          b.add(this.metronomeStepper);
          b.add(this.metronomeOffsetStepper);
          b.add(this.instVolume);
          b.add(this.voicesVolume);
          b.add(this.voicesOppVolume);
          b.add(this.check_mute_inst);
          b.add(this.check_mute_vocals);
          b.add(this.check_mute_vocals_opponent);
          b.add(this.check_vortex);
          b.add(this.mouseScrollingQuant);
          b.add(this.check_warnings);
          b.add(this.playSoundBf);
          b.add(this.playSoundDad);
          this.UI_box.addGroup(b);
        },
        addDataUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Data";
          this.gameOverCharacterInputText = new pb(10, 25, 150, this._song.gameOverChar ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverCharacterInputText);
          this.gameOverSoundInputText = new pb(10, this.gameOverCharacterInputText.y + 35, 150, this._song.gameOverSound ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverSoundInputText);
          this.gameOverLoopInputText = new pb(10, this.gameOverSoundInputText.y + 35, 150, this._song.gameOverLoop ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverLoopInputText);
          this.gameOverEndInputText = new pb(10, this.gameOverLoopInputText.y + 35, 150, this._song.gameOverEnd ?? "", 8);
          this.blockPressWhileTypingOn.push(this.gameOverEndInputText);
          var c = new Bb(10, 170, null, null, "Disable Note RGB", 100);
          c.set_checked(this._song.disableNoteRGB == 1);
          c.callback = function () {
            a._song.disableNoteRGB = c.checked;
            a.updateGrid();
          };
          this.noteSkinInputText = new pb(10, 280, 150, this._song.arrowSkin ?? "", 8);
          this.blockPressWhileTypingOn.push(this.noteSkinInputText);
          this.noteSplashesInputText = new pb(this.noteSkinInputText.x, this.noteSkinInputText.y + 35, 150, this._song.splashSkin ?? "", 8);
          this.blockPressWhileTypingOn.push(this.noteSplashesInputText);
          var d = new zb(this.noteSplashesInputText.x + 5, this.noteSplashesInputText.y + 20, "Change Notes", function () {
            a._song.arrowSkin = a.noteSkinInputText.text;
            a.updateGrid();
          });
          b.add(this.gameOverCharacterInputText);
          b.add(this.gameOverSoundInputText);
          b.add(this.gameOverLoopInputText);
          b.add(this.gameOverEndInputText);
          b.add(c);
          b.add(d);
          b.add(this.noteSkinInputText);
          b.add(this.noteSplashesInputText);
          b.add(new R(this.gameOverCharacterInputText.x, this.gameOverCharacterInputText.y - 15, 0, "Game Over Character Name:"));
          b.add(new R(this.gameOverSoundInputText.x, this.gameOverSoundInputText.y - 15, 0, "Game Over Death Sound (sounds/):"));
          b.add(new R(this.gameOverLoopInputText.x, this.gameOverLoopInputText.y - 15, 0, "Game Over Loop Music (music/):"));
          b.add(new R(this.gameOverEndInputText.x, this.gameOverEndInputText.y - 15, 0, "Game Over Retry Music (music/):"));
          b.add(new R(this.noteSkinInputText.x, this.noteSkinInputText.y - 15, 0, "Note Texture:"));
          b.add(new R(this.noteSplashesInputText.x, this.noteSplashesInputText.y - 15, 0, "Note Splashes Texture:"));
          this.UI_box.addGroup(b);
        },
        loadSong: function () {
          if (g.sound.music != null) {
            var a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
          }
          if (this.vocals != null) {
            a = this.vocals;
            a.cleanup(a.autoDestroy, true);
            this.vocals.destroy();
          }
          if (this.opponentVocals != null) {
            a = this.opponentVocals;
            a.cleanup(a.autoDestroy, true);
            this.opponentVocals.destroy();
          }
          this.vocals = new Yd();
          this.opponentVocals = new Yd();
          a = "songs:assets/songs/" + v.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3";
          this.vocals.loadEmbedded(a ?? "songs:assets/songs/" + v.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3");
          this.vocals.autoDestroy = false;
          g.sound.list.add(this.vocals);
          this.opponentVocals = new Yd();
          a = "songs:assets/songs/" + v.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Voices.mp3";
          if (a != null) {
            this.opponentVocals.loadEmbedded(a);
          }
          this.opponentVocals.autoDestroy = false;
          g.sound.list.add(this.opponentVocals);
          this.generateSong();
          g.sound.music.pause();
          K.songPosition = this.sectionStartTime();
          g.sound.music.set_time(K.songPosition);
          a = 0;
          if (this._song.notes.length <= 1) {
            for (Ab.trace("first load ever!!", {
              fileName: "source/states/editors/ChartingState.hx",
              lineNumber: 1533,
              className: "states.editors.ChartingState",
              methodName: "loadSong"
            }); a < g.sound.music._length;) {
              this.addSection();
              a += 60 / this._song.bpm * 4000;
            }
          }
        },
        closeSubState: function () {
          if (this.playtesting) {
            g.sound.music.pause();
            g.sound.music.set_time(this.playtestingTime);
            g.sound.music.onComplete = this.playtestingOnComplete;
            if (this.instVolume != null) {
              g.sound.music.set_volume(this.instVolume.value);
            }
            if (this.check_mute_inst != null && this.check_mute_inst.checked) {
              g.sound.music.set_volume(0);
            }
            if (this.vocals != null) {
              this.vocals.pause();
              this.vocals.set_time(this.playtestingTime);
              if (this.voicesVolume != null) {
                this.vocals.set_volume(this.voicesVolume.value);
              }
              if (this.check_mute_vocals != null && this.check_mute_vocals.checked) {
                this.vocals.set_volume(0);
              }
            }
            if (this.opponentVocals != null) {
              this.opponentVocals.pause();
              this.opponentVocals.set_time(this.playtestingTime);
              if (this.voicesOppVolume != null) {
                this.opponentVocals.set_volume(this.voicesOppVolume.value);
              }
              if (this.check_mute_vocals_opponent != null && this.check_mute_vocals_opponent.checked) {
                this.opponentVocals.set_volume(0);
              }
            }
          }
          P.prototype.closeSubState.call(this);
        },
        generateSong: function () {
          var a = this;
          g.sound.playMusic("songs:assets/songs/" + v.replace(this.currentSongName.toLowerCase(), " ", "-") + "/Inst.mp3", 0.6);
          g.sound.music.autoDestroy = false;
          if (this.instVolume != null) {
            g.sound.music.set_volume(this.instVolume.value);
          }
          if (this.check_mute_inst != null && this.check_mute_inst.checked) {
            g.sound.music.set_volume(0);
          }
          g.sound.music.onComplete = function () {
            g.sound.music.pause();
            K.songPosition = 0;
            if (a.vocals != null) {
              a.vocals.pause();
              a.vocals.set_time(0);
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.pause();
              a.opponentVocals.set_time(0);
            }
            a.changeSection();
            ea.curSec = 0;
            a.updateGrid();
            a.updateSectionUI();
            if (a.vocals != null) {
              a.vocals.play();
            }
            if (a.opponentVocals != null) {
              a.opponentVocals.play();
            }
          };
        },
        generateUI: function () {
          while (this.bullshitUI.members.length > 0) {
            this.bullshitUI.remove(this.bullshitUI.members[0], true);
          }
          var a = new R(this.UI_box.x + 20, this.UI_box.y + 20, 0);
          this.bullshitUI.add(a);
        },
        getEvent: function (a, b, c, d) {
          if (a == "click_check_box") {
            switch (b.getLabel().text) {
              case "Alt Animation":
                this._song.notes[ea.curSec].altAnim = b.checked;
                break;
              case "Change BPM":
                this._song.notes[ea.curSec].changeBPM = b.checked;
                g.log.advanced("changed bpm shit", Aa.NORMAL);
                break;
              case "GF section":
                this._song.notes[ea.curSec].gfSection = b.checked;
                this.updateGrid();
                this.updateHeads();
                break;
              case "Must hit section":
                this._song.notes[ea.curSec].mustHitSection = b.checked;
                this.updateGrid();
                this.updateHeads();
            }
          } else if (a == "change_numeric_stepper" && b instanceof Lb) {
            switch (b.name) {
              case "inst_volume":
                g.sound.music.set_volume(b.value);
                if (this.check_mute_inst.checked) {
                  g.sound.music.set_volume(0);
                }
                break;
              case "note_susLength":
                if (this.curSelectedNote != null && this.curSelectedNote[2] != null) {
                  this.curSelectedNote[2] = b.value;
                  this.updateGrid();
                }
                break;
              case "section_beats":
                this._song.notes[ea.curSec].sectionBeats = b.value;
                this.reloadGridLayer();
                break;
              case "section_bpm":
                this._song.notes[ea.curSec].bpm = b.value;
                this.updateGrid();
                break;
              case "song_bpm":
                this._song.bpm = b.value;
                K.mapBPMChanges(this._song);
                K.set_bpm(b.value);
                this.stepperSusLength.stepSize = Math.ceil(K.stepCrochet / 2);
                this.updateGrid();
                break;
              case "song_speed":
                this._song.speed = b.value;
                break;
              case "voices_opp_volume":
                this.opponentVocals.set_volume(b.value);
                if (this.check_mute_vocals_opponent.checked) {
                  this.opponentVocals.set_volume(0);
                }
                break;
              case "voices_volume":
                this.vocals.set_volume(b.value);
                if (this.check_mute_vocals.checked) {
                  this.vocals.set_volume(0);
                }
            }
          } else if (a == "change_input_text" && b instanceof pb) {
            if (b == this.noteSplashesInputText) {
              this._song.splashSkin = this.noteSplashesInputText.text;
            } else if (b == this.noteSkinInputText) {
              this._song.arrowSkin = this.noteSkinInputText.text;
            } else if (b == this.gameOverCharacterInputText) {
              this._song.gameOverChar = this.gameOverCharacterInputText.text;
            } else if (b == this.gameOverSoundInputText) {
              this._song.gameOverSound = this.gameOverSoundInputText.text;
            } else if (b == this.gameOverLoopInputText) {
              this._song.gameOverLoop = this.gameOverLoopInputText.text;
            } else if (b == this.gameOverEndInputText) {
              this._song.gameOverEnd = this.gameOverEndInputText.text;
            } else if (this.curSelectedNote != null) {
              if (b == this.value1InputText) {
                if (this.curSelectedNote[1][this.curEventSelected] != null) {
                  this.curSelectedNote[1][this.curEventSelected][1] = this.value1InputText.text;
                  this.updateGrid();
                }
              } else if (b == this.value2InputText) {
                if (this.curSelectedNote[1][this.curEventSelected] != null) {
                  this.curSelectedNote[1][this.curEventSelected][2] = this.value2InputText.text;
                  this.updateGrid();
                }
              } else if (b == this.strumTimeInputText) {
                a = parseFloat(this.strumTimeInputText.text);
                if (isNaN(a)) {
                  a = 0;
                }
                this.curSelectedNote[0] = a;
                this.updateGrid();
              }
            }
          } else if (a == "change_slider" && b instanceof wh && b == "playbackSpeed") {
            this.playbackSpeed = this.sliderRate.value | 0;
          }
        },
        sectionStartTime: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = this._song.bpm;
          var c = 0;
          var d = 0;
          for (a = ea.curSec + a; d < a;) {
            var e = d++;
            if (this._song.notes[e] != null) {
              if (this._song.notes[e].changeBPM) {
                b = this._song.notes[e].bpm;
              }
              c += this.getSectionBeats(e) * (60000 / b);
            }
          }
          return c;
        },
        update: function (a) {
          var b = this;
          this.curStep = this.recalculateSteps();
          if (g.sound.music._time < 0) {
            g.sound.music.pause();
            g.sound.music.set_time(0);
          } else if (g.sound.music._time > g.sound.music._length) {
            g.sound.music.pause();
            g.sound.music.set_time(0);
            this.changeSection();
          }
          K.songPosition = g.sound.music._time;
          this._song.song = this.UI_songTitle.text;
          this.strumLineUpdateY();
          this.strumLineNotes.members[0].set_y(this.strumLine.y);
          this.strumLineNotes.members[1].set_y(this.strumLine.y);
          this.strumLineNotes.members[2].set_y(this.strumLine.y);
          this.strumLineNotes.members[3].set_y(this.strumLine.y);
          this.strumLineNotes.members[4].set_y(this.strumLine.y);
          this.strumLineNotes.members[5].set_y(this.strumLine.y);
          this.strumLineNotes.members[6].set_y(this.strumLine.y);
          this.strumLineNotes.members[7].set_y(this.strumLine.y);
          g.mouse.set_visible(true);
          this.camPos.set_y(this.strumLine.y);
          if (!this.disableAutoScrolling.checked) {
            if (Math.ceil(this.strumLine.y) >= this.gridBG.get_height()) {
              if (this._song.notes[ea.curSec + 1] == null) {
                this.addSection();
              }
              this.changeSection(ea.curSec + 1, false);
            } else if (this.strumLine.y < -10) {
              this.changeSection(ea.curSec - 1, false);
            }
          }
          if (g.mouse.x > this.gridBG.x && g.mouse.x < this.gridBG.x + this.gridBG.get_width() && g.mouse.y > this.gridBG.y && g.mouse.y < this.gridBG.y + ea.GRID_SIZE * this.getSectionBeats() * 4 * this.zoomList[this.curZoom]) {
            this.dummyArrow.set_visible(true);
            this.dummyArrow.set_x(Math.floor(g.mouse.x / ea.GRID_SIZE) * ea.GRID_SIZE);
            var c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              this.dummyArrow.set_y(g.mouse.y);
            } else {
              c = ea.GRID_SIZE / (ea.quantization / 16);
              this.dummyArrow.set_y(Math.floor(g.mouse.y / c) * c);
            }
          } else {
            this.dummyArrow.set_visible(false);
          }
          if (g.mouse._leftButton.current == 2) {
            if (g.mouse.overlaps(this.curRenderedNotes)) {
              this.curRenderedNotes.forEachAlive(function (a) {
                if (g.mouse.overlaps(a)) {
                  var c = g.keys.pressed;
                  if (c.keyManager.checkStatusUnsafe(17, c.status)) {
                    b.selectNote(a);
                  } else {
                    c = g.keys.pressed;
                    if (c.keyManager.checkStatusUnsafe(18, c.status)) {
                      b.selectNote(a);
                      b.curSelectedNote[3] = b.curNoteTypes[b.currentType];
                      b.updateGrid();
                    } else {
                      b.deleteNote(a);
                    }
                  }
                }
              });
            } else if (g.mouse.x > this.gridBG.x && g.mouse.x < this.gridBG.x + this.gridBG.get_width() && g.mouse.y > this.gridBG.y && g.mouse.y < this.gridBG.y + ea.GRID_SIZE * this.getSectionBeats() * 4 * this.zoomList[this.curZoom]) {
              g.log.advanced("added note", Aa.NORMAL);
              this.addNote();
            }
          }
          var d = false;
          c = 0;
          for (var e = this.blockPressWhileTypingOn; c < e.length;) {
            var f = e[c];
            ++c;
            if (f.hasFocus) {
              C.toggleVolumeKeys(false);
              d = true;
              break;
            }
          }
          if (!d) {
            c = 0;
            e = this.blockPressWhileTypingOnStepper;
            while (c < e.length) {
              f = e[c];
              ++c;
              if (wa.__cast(f.text_field, pb).hasFocus) {
                C.toggleVolumeKeys(false);
                d = true;
                break;
              }
            }
          }
          if (!d) {
            C.toggleVolumeKeys(true);
            c = 0;
            e = this.blockPressWhileScrolling;
            while (c < e.length) {
              f = e[c];
              ++c;
              if (f.dropPanel.visible) {
                d = true;
                break;
              }
            }
          }
          if (d) {
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              c = 0;
              e = this.blockPressWhileTypingOn.length;
              while (c < e) {
                r = c++;
                if (this.blockPressWhileTypingOn[r].hasFocus) {
                  this.blockPressWhileTypingOn[r].set_hasFocus(false);
                }
              }
            }
          } else {
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              if (g.sound.music != null) {
                c = g.sound.music;
                c.cleanup(c.autoDestroy, true);
              }
              if (this.vocals != null) {
                this.vocals.pause();
                this.vocals.set_volume(0);
              }
              if (this.opponentVocals != null) {
                this.opponentVocals.pause();
                this.opponentVocals.set_volume(0);
              }
              this.autosaveSong();
              this.playtesting = true;
              this.playtestingTime = K.songPosition;
              this.playtestingOnComplete = g.sound.music.onComplete;
              this.openSubState(new en(this.playbackSpeed));
            } else {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                this.autosaveSong();
                g.mouse.set_visible(false);
                z.SONG = this._song;
                c = g.sound.music;
                c.cleanup(c.autoDestroy, true);
                if (this.vocals != null) {
                  c = this.vocals;
                  c.cleanup(c.autoDestroy, true);
                }
                if (this.opponentVocals != null) {
                  c = this.opponentVocals;
                  c.cleanup(c.autoDestroy, true);
                }
                we.loadDirectory(this._song);
                P.switchState(tc.getNextState(new z(), false));
              }
            }
            if (this.curSelectedNote != null && this.curSelectedNote[1] > -1) {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(69, c.status)) {
                this.changeNoteSustain(K.stepCrochet);
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(81, c.status)) {
                this.changeNoteSustain(-K.stepCrochet);
              }
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(8, c.status)) {
              this.autosaveSong();
              z.chartingMode = false;
              P.switchState(new Pf());
              c = g.sound;
              d = E.returnSound("music", "freakyMenu", null);
              c.playMusic(d);
              g.mouse.set_visible(false);
              return;
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(90, c.status)) {
              c = g.keys.pressed;
              c = c.keyManager.checkStatusUnsafe(17, c.status);
            } else {
              c = false;
            }
            if (c) {
              this.undo();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(90, c.status) && this.curZoom > 0) {
              c = g.keys.pressed;
              c = !c.keyManager.checkStatusUnsafe(17, c.status);
            } else {
              c = false;
            }
            if (c) {
              --this.curZoom;
              this.updateZoom();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(88, c.status) && this.curZoom < this.zoomList.length - 1) {
              this.curZoom++;
              this.updateZoom();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(9, c.status)) {
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                f = this.UI_box;
                f.set_selected_tab(f.get_selected_tab() - 1);
                if (this.UI_box.get_selected_tab() < 0) {
                  this.UI_box.set_selected_tab(2);
                }
              } else {
                f = this.UI_box;
                f.set_selected_tab(f.get_selected_tab() + 1);
                if (this.UI_box.get_selected_tab() >= 3) {
                  this.UI_box.set_selected_tab(0);
                }
              }
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status)) {
              if (this.vocals != null) {
                this.vocals.play();
              }
              if (this.opponentVocals != null) {
                this.opponentVocals.play();
              }
              this.pauseAndSetVocalsTime();
              if (g.sound.music._channel == null) {
                g.sound.music.play();
                if (this.vocals != null) {
                  this.vocals.play();
                }
                if (this.opponentVocals != null) {
                  this.opponentVocals.play();
                }
              } else {
                g.sound.music.pause();
              }
            }
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(18, c.status)) {
              c = false;
            } else {
              c = g.keys.justPressed;
              c = c.keyManager.checkStatusUnsafe(82, c.status);
            }
            if (c) {
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                this.resetSection(true);
              } else {
                this.resetSection();
              }
            }
            if (g.mouse.wheel != 0) {
              g.sound.music.pause();
              if (this.mouseQuant) {
                e = this.curDecBeat;
                f = ea.quantization / 4;
                var k = 1 / f;
                if (g.mouse.wheel > 0) {
                  c = Math.round(e * f);
                  g.sound.music.set_time(K.beatToSeconds(c / f - k));
                } else {
                  c = Math.round(e * f);
                  g.sound.music.set_time(K.beatToSeconds(c / f + k));
                }
              } else {
                f = g.sound.music;
                f.set_time(f._time - g.mouse.wheel * K.stepCrochet * 0.8);
              }
              this.pauseAndSetVocalsTime();
            }
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(87, c.status)) {
              c = true;
            } else {
              c = g.keys.pressed;
              c = c.keyManager.checkStatusUnsafe(83, c.status);
            }
            if (c) {
              g.sound.music.pause();
              f = 1;
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(17, c.status)) {
                f = 0.25;
              } else {
                c = g.keys.pressed;
                if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                  f = 4;
                }
              }
              k = g.elapsed * 700 * f;
              f = g.sound.music;
              c = g.keys.pressed;
              f.set_time(f._time + k * (c.keyManager.checkStatusUnsafe(87, c.status) ? -1 : 1));
              this.pauseAndSetVocalsTime();
            }
            if (!ea.vortex) {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                c = true;
              } else {
                c = g.keys.justPressed;
                c = c.keyManager.checkStatusUnsafe(40, c.status);
              }
              if (c) {
                g.sound.music.pause();
                this.updateCurStep();
                e = this.curDecBeat;
                f = ea.quantization / 4;
                k = 1 / f;
                c = g.keys.pressed;
                if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                  c = Math.round(e * f);
                  g.sound.music.set_time(K.beatToSeconds(c / f - k));
                } else {
                  c = Math.round(e * f);
                  g.sound.music.set_time(K.beatToSeconds(c / f + k));
                }
              }
            }
            f = this.currentType;
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              f = 3;
            }
            k = K.songPosition;
            if (!d) {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(39, c.status)) {
                ea.curQuant++;
                if (ea.curQuant > this.quantizations.length - 1) {
                  ea.curQuant = 0;
                }
                ea.quantization = this.quantizations[ea.curQuant];
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(37, c.status)) {
                ea.curQuant--;
                if (ea.curQuant < 0) {
                  ea.curQuant = this.quantizations.length - 1;
                }
                ea.quantization = this.quantizations[ea.curQuant];
              }
              this.quant.animation.play("q", true, false, ea.curQuant);
            }
            if (ea.vortex && !d) {
              c = g.keys.justPressed;
              e = c.keyManager.checkStatusUnsafe(49, c.status);
              c = g.keys.justPressed;
              var h = c.keyManager.checkStatusUnsafe(50, c.status);
              c = g.keys.justPressed;
              r = c.keyManager.checkStatusUnsafe(51, c.status);
              c = g.keys.justPressed;
              var l = c.keyManager.checkStatusUnsafe(52, c.status);
              c = g.keys.justPressed;
              var p = c.keyManager.checkStatusUnsafe(53, c.status);
              c = g.keys.justPressed;
              var n = c.keyManager.checkStatusUnsafe(54, c.status);
              c = g.keys.justPressed;
              var m = c.keyManager.checkStatusUnsafe(55, c.status);
              c = g.keys.justPressed;
              h = [e, h, r, l, p, n, m, c.keyManager.checkStatusUnsafe(56, c.status)];
              if (h.indexOf(true) != -1) {
                c = 0;
                e = h.length;
                while (c < e) {
                  var r = c++;
                  if (h[r]) {
                    this.doANoteThing(k, r, f);
                  }
                }
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(38, c.status)) {
                c = true;
              } else {
                c = g.keys.justPressed;
                c = c.keyManager.checkStatusUnsafe(40, c.status);
              }
              if (c && (g.sound.music.pause(), this.updateCurStep(), e = this.curDecBeat, f = ea.quantization / 4, k = 1 / f, c = g.keys.pressed, c.keyManager.checkStatusUnsafe(38, c.status) ? (c = Math.round(e * f), c = K.beatToSeconds(c / f - k)) : (c = Math.round(e * f), c = K.beatToSeconds(c / f + k)), Ha.tween(g.sound.music, {
                time: c
              }, 0.1, {
                ease: X.circOut
              }), this.pauseAndSetVocalsTime(), d = 0, this.curSelectedNote != null && (d = this.curSelectedNote[0]), f = this.sectionStartTime(), d = c - f - (d - f), this.curSelectedNote != null && (c = g.keys.pressed, e = c.keyManager.checkStatusUnsafe(49, c.status), c = g.keys.pressed, h = c.keyManager.checkStatusUnsafe(50, c.status), c = g.keys.pressed, r = c.keyManager.checkStatusUnsafe(51, c.status), c = g.keys.pressed, l = c.keyManager.checkStatusUnsafe(52, c.status), c = g.keys.pressed, p = c.keyManager.checkStatusUnsafe(53, c.status), c = g.keys.pressed, n = c.keyManager.checkStatusUnsafe(54, c.status), c = g.keys.pressed, m = c.keyManager.checkStatusUnsafe(55, c.status), c = g.keys.pressed, h = [e, h, r, l, p, n, m, c.keyManager.checkStatusUnsafe(56, c.status)], h.indexOf(true) != -1))) {
                c = 0;
                for (e = h.length; c < e;) {
                  r = c++;
                  if (h[r] && this.curSelectedNote[1] == r) {
                    this.curSelectedNote[2] += d - this.curSelectedNote[2] - K.stepCrochet;
                  }
                }
                this.updateGrid();
                this.updateNoteUI();
              }
            }
            d = 1;
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              d = 4;
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(68, c.status)) {
              this.changeSection(ea.curSec + d);
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(65, c.status)) {
              if (ea.curSec <= 0) {
                this.changeSection(this._song.notes.length - 1);
              } else {
                this.changeSection(ea.curSec - d);
              }
            }
          }
          this.strumLineNotes.set_visible(this.quant.set_visible(ea.vortex));
          if (g.sound.music._time < 0) {
            g.sound.music.pause();
            g.sound.music.set_time(0);
          } else if (g.sound.music._time > g.sound.music._length) {
            g.sound.music.pause();
            g.sound.music.set_time(0);
            this.changeSection();
          }
          K.songPosition = g.sound.music._time;
          this.strumLineUpdateY();
          this.camPos.set_y(this.strumLine.y);
          this.strumLineNotes.members[0].set_y(this.strumLine.y);
          this.strumLineNotes.members[0].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[1].set_y(this.strumLine.y);
          this.strumLineNotes.members[1].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[2].set_y(this.strumLine.y);
          this.strumLineNotes.members[2].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[3].set_y(this.strumLine.y);
          this.strumLineNotes.members[3].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[4].set_y(this.strumLine.y);
          this.strumLineNotes.members[4].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[5].set_y(this.strumLine.y);
          this.strumLineNotes.members[5].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[6].set_y(this.strumLine.y);
          this.strumLineNotes.members[6].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          this.strumLineNotes.members[7].set_y(this.strumLine.y);
          this.strumLineNotes.members[7].set_alpha(g.sound.music._channel != null ? 1 : 0.35);
          c = g.keys.pressed;
          f = c.keyManager.checkStatusUnsafe(16, c.status);
          c = g.keys.pressed;
          d = c.keyManager.checkStatusUnsafe(219, c.status);
          c = g.keys.pressed;
          k = c.keyManager.checkStatusUnsafe(221, c.status);
          c = g.keys.justPressed;
          e = c.keyManager.checkStatusUnsafe(219, c.status);
          c = g.keys.justPressed;
          h = c.keyManager.checkStatusUnsafe(221, c.status);
          if (!f && e || f && d) {
            this.playbackSpeed -= 0.01;
          }
          if (!f && h || f && k) {
            this.playbackSpeed += 0.01;
          }
          c = g.keys.pressed;
          if (c.keyManager.checkStatusUnsafe(18, c.status) && (e || h || d || k)) {
            this.playbackSpeed = 1;
          }
          if (this.playbackSpeed <= 0.5) {
            this.playbackSpeed = 0.5;
          }
          if (this.playbackSpeed >= 3) {
            this.playbackSpeed = 3;
          }
          g.sound.music.set_pitch(this.playbackSpeed);
          this.vocals.set_pitch(this.playbackSpeed);
          this.opponentVocals.set_pitch(this.playbackSpeed);
          this.bpmTxt.set_text(y.string(jc.roundDecimal(K.songPosition / 1000, 2)) + " / " + y.string(jc.roundDecimal(g.sound.music._length / 1000, 2)) + "\nSection: " + ea.curSec + "\n\nBeat: " + y.string(this.curDecBeat).substring(0, 4) + "\n\nStep: " + this.curStep + "\n\nBeat Snap: " + ea.quantization + "th");
          var q = [false, false, false, false];
          this.curRenderedNotes.forEachAlive(function (c) {
            c.set_alpha(1);
            if (b.curSelectedNote != null) {
              var d = c.noteData;
              if (d > -1 && c.mustPress != b._song.notes[ea.curSec].mustHitSection) {
                d += 4;
              }
              if (b.curSelectedNote[0] == c.strumTime && (b.curSelectedNote[2] == null && d < 0 || b.curSelectedNote[2] != null && b.curSelectedNote[1] == d)) {
                b.colorSine += a;
                var e = 0.7 + Math.sin(Math.PI * b.colorSine) * 0.3;
                var f = 0.999;
                if (f == null) {
                  f = 1;
                }
                d = Gb._new();
                if (f == null) {
                  f = 1;
                }
                var k = Math.round(e * 255);
                d = d & -16711681 | (k > 255 ? 255 : k < 0 ? 0 : k) << 16;
                k = Math.round(e * 255);
                d = d & -65281 | (k > 255 ? 255 : k < 0 ? 0 : k) << 8;
                k = Math.round(e * 255);
                d = d & -256 | (k > 255 ? 255 : k < 0 ? 0 : k);
                k = Math.round(f * 255);
                c.set_color(d & 16777215 | (k > 255 ? 255 : k < 0 ? 0 : k) << 24);
              }
            }
            if (c.strumTime <= K.songPosition) {
              c.set_alpha(0.4);
              if (c.strumTime > b.lastConductorPos && g.sound.music._channel != null && c.noteData > -1) {
                e = c.noteData % 4;
                d = c.noteData;
                if (d > -1 && c.mustPress != b._song.notes[ea.curSec].mustHitSection) {
                  d += 4;
                }
                b.strumLineNotes.members[d].playAnim("confirm", true);
                b.strumLineNotes.members[d].resetAnim = (c.sustainLength / 1000 + 0.15) / b.playbackSpeed;
                if (!q[e] && c.hitsoundChartEditor && (b.playSoundBf.checked && c.mustPress || b.playSoundDad.checked && !c.mustPress)) {
                  d = c.hitsound;
                  if (b._song.player1 == "gf") {
                    d = "GF_" + y.string(e + 1);
                  }
                  d = g.sound.play(E.sound(d));
                  d._transform.pan = c.noteData < 4 ? -0.3 : 0.3;
                  d.updateTransform();
                  q[e] = true;
                }
              }
            }
          });
          if (this.metronome.checked && this.lastConductorPos != K.songPosition) {
            c = 60 / this.metronomeStepper.value;
            if (Math.floor((K.songPosition + this.metronomeOffsetStepper.value) / c / 1000) != Math.floor((this.lastConductorPos + this.metronomeOffsetStepper.value) / c / 1000)) {
              g.sound.play(E.sound("Metronome_Tick"));
            }
          }
          this.lastConductorPos = K.songPosition;
          P.prototype.update.call(this, a);
        },
        pauseAndSetVocalsTime: function () {
          if (this.vocals != null) {
            this.vocals.pause();
            this.vocals.set_time(g.sound.music._time);
          }
          if (this.opponentVocals != null) {
            this.opponentVocals.pause();
            this.opponentVocals.set_time(g.sound.music._time);
          }
        },
        updateZoom: function () {
          var a = this.zoomList[this.curZoom];
          var b = "1 / " + a;
          if (a < 1) {
            b = Math.round(1 / a) + " / 1";
          }
          this.zoomTxt.set_text("Zoom: " + b);
          this.reloadGridLayer();
        },
        destroy: function () {
          Ta.globalRgbShaders = [];
          Yi.clearNoteTypesData();
          P.prototype.destroy.call(this);
        },
        reloadGridLayer: function () {
          this.gridLayer.clear();
          this.gridBG = $h.create(1, 1, this.columns, this.getSectionBeats() * 4 * this.zoomList[this.curZoom] | 0);
          this.gridBG.set_antialiasing(false);
          var a = this.gridBG.scale;
          var b = ea.GRID_SIZE;
          var c = ea.GRID_SIZE;
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.gridBG.updateHitbox();
          a = this.gridBG.get_height() | 0;
          b = false;
          if (this.sectionStartTime(1) <= g.sound.music._length) {
            this.nextGridBG = $h.create(1, 1, this.columns, this.getSectionBeats(ea.curSec + 1) * 4 * this.zoomList[this.curZoom] | 0);
            this.nextGridBG.set_antialiasing(false);
            a = this.nextGridBG.scale;
            c = b = ea.GRID_SIZE;
            if (c == null) {
              c = 0;
            }
            if (b == null) {
              b = 0;
            }
            a.set_x(b);
            a.set_y(c);
            this.nextGridBG.updateHitbox();
            a = this.gridBG.get_height() + this.nextGridBG.get_height() | 0;
            b = true;
          } else {
            this.nextGridBG = new G().makeGraphic(1, 1, 0);
          }
          this.nextGridBG.set_y(this.gridBG.get_height());
          this.gridLayer.add(this.nextGridBG);
          this.gridLayer.add(this.gridBG);
          if (b) {
            b = new G(0, this.gridBG.get_height()).makeGraphic(1, 1, -16777216);
            b.setGraphicSize(ea.GRID_SIZE * 9 | 0, this.nextGridBG.get_height() | 0);
            b.updateHitbox();
            b.set_antialiasing(false);
            b.set_alpha(0.4);
            this.gridLayer.add(b);
          }
          b = new G(this.gridBG.x + this.gridBG.get_width() - ea.GRID_SIZE * 4).makeGraphic(1, 1, -16777216);
          b.setGraphicSize(2, a);
          b.updateHitbox();
          b.set_antialiasing(false);
          this.gridLayer.add(b);
          b = 1;
          for (c = this.getSectionBeats() | 0; b < c;) {
            var d = b++;
            d = new G(this.gridBG.x, ea.GRID_SIZE * 4 * this.zoomList[this.curZoom] * d).makeGraphic(1, 1, 1157562368);
            d.scale.set_x(this.gridBG.get_width());
            d.updateHitbox();
            if (ea.vortex) {
              this.gridLayer.add(d);
            }
          }
          b = new G(this.gridBG.x + ea.GRID_SIZE).makeGraphic(1, 1, -16777216);
          b.setGraphicSize(2, a);
          b.updateHitbox();
          b.set_antialiasing(false);
          this.gridLayer.add(b);
          this.updateGrid();
          this.lastSecBeats = this.getSectionBeats();
          if (this.sectionStartTime(1) > g.sound.music._length) {
            this.lastSecBeatsNext = 0;
          } else {
            this.getSectionBeats(ea.curSec + 1);
          }
        },
        strumLineUpdateY: function () {
          this.strumLine.set_y(this.getYfromStrum((K.songPosition - this.sectionStartTime()) / (this.zoomList[this.curZoom] % (K.stepCrochet * 16))) / (this.getSectionBeats() / 4));
        },
        updateWaveform: function () {},
        waveformData: function (a, b, c, d, e, f, g) {
          return [[[0], [0]], [[0], [0]]];
        },
        changeNoteSustain: function (a) {
          if (this.curSelectedNote != null && this.curSelectedNote[2] != null) {
            this.curSelectedNote[2] += Math.ceil(a);
            this.curSelectedNote[2] = Math.max(this.curSelectedNote[2], 0);
          }
          this.updateNoteUI();
          this.updateGrid();
        },
        recalculateSteps: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = {
            stepTime: 0,
            songTime: 0,
            bpm: 0
          };
          for (var c = 0, d = K.bpmChangeMap.length; c < d;) {
            var e = c++;
            if (g.sound.music._time > K.bpmChangeMap[e].songTime) {
              b = K.bpmChangeMap[e];
            }
          }
          this.curStep = b.stepTime + Math.floor((g.sound.music._time - b.songTime + a) / K.stepCrochet);
          this.updateBeat();
          return this.curStep;
        },
        resetSection: function (a) {
          if (a == null) {
            a = false;
          }
          this.updateGrid();
          g.sound.music.pause();
          g.sound.music.set_time(this.sectionStartTime());
          if (a) {
            g.sound.music.set_time(0);
            ea.curSec = 0;
          }
          this.pauseAndSetVocalsTime();
          this.updateCurStep();
          this.updateGrid();
          this.updateSectionUI();
          this.updateWaveform();
        },
        changeSection: function (a, b) {
          if (b == null) {
            b = true;
          }
          if (a == null) {
            a = 0;
          }
          var c = false;
          if (this._song.notes[a] != null) {
            ea.curSec = a;
            if (b) {
              g.sound.music.pause();
              g.sound.music.set_time(this.sectionStartTime());
              this.pauseAndSetVocalsTime();
              this.updateCurStep();
            }
            a = this.getSectionBeats();
            b = this.getSectionBeats(ea.curSec + 1);
            if (this.sectionStartTime(1) > g.sound.music._length) {
              b = 0;
            }
            if (a != this.lastSecBeats || b != this.lastSecBeatsNext) {
              this.reloadGridLayer();
              c = true;
            } else {
              this.updateGrid();
            }
            this.updateSectionUI();
          } else {
            this.changeSection();
          }
          K.songPosition = g.sound.music._time;
          if (!c) {
            this.updateWaveform();
          }
        },
        updateSectionUI: function () {
          var a = this._song.notes[ea.curSec];
          this.stepperBeats.set_value(this.getSectionBeats());
          this.check_mustHitSection.set_checked(a.mustHitSection);
          this.check_gfSection.set_checked(a.gfSection);
          this.check_altAnim.set_checked(a.altAnim);
          this.check_changeBPM.set_checked(a.changeBPM);
          this.stepperSectionBPM.set_value(a.bpm);
          this.updateHeads();
        },
        updateJsonData: function () {
          var a = this.loadCharacterFile(ha.field(this._song, "player1"));
          this.characterData.iconP1 = this.characterFailed ? "face" : a.healthicon;
          this.characterData.vocalsP1 = a.vocals_file ?? "";
          a = this.loadCharacterFile(ha.field(this._song, "player2"));
          this.characterData.iconP2 = this.characterFailed ? "face" : a.healthicon;
          this.characterData.vocalsP2 = a.vocals_file ?? "";
        },
        updateHeads: function () {
          if (this._song.notes[ea.curSec].mustHitSection) {
            this.leftIcon.changeIcon(this.characterData.iconP1);
            this.rightIcon.changeIcon(this.characterData.iconP2);
          } else {
            this.leftIcon.changeIcon(this.characterData.iconP2);
            this.rightIcon.changeIcon(this.characterData.iconP1);
          }
          if (this._song.notes[ea.curSec].gfSection) {
            this.leftIcon.changeIcon("gf");
          }
        },
        loadCharacterFile: function (a) {
          this.characterFailed = false;
          a = "characters/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          if (!U.exists(a)) {
            a = "characters/" + ad.DEFAULT_CHARACTER + ".json";
            if (a == null) {
              a = "";
            }
            a = "assets/shared/" + a;
            this.characterFailed = true;
          }
          a = U.getText(a);
          return JSON.parse(a);
        },
        updateNoteUI: function () {
          if (this.curSelectedNote != null) {
            if (this.curSelectedNote[2] != null) {
              this.stepperSusLength.set_value(this.curSelectedNote[2]);
              if (this.curSelectedNote[3] != null) {
                this.currentType = this.curNoteTypes.indexOf(this.curSelectedNote[3]);
                if (this.currentType <= 0) {
                  this.noteTypeDropDown.set_selectedLabel("");
                } else {
                  this.noteTypeDropDown.set_selectedLabel(this.currentType + ". " + y.string(this.curSelectedNote[3]));
                }
              }
            } else {
              this.eventDropDown.set_selectedLabel(this.curSelectedNote[1][this.curEventSelected][0]);
              var a = y.parseInt(this.eventDropDown.get_selectedId());
              if (a > 0 && a < this.eventStuff.length) {
                this.descText.set_text(this.eventStuff[a][1]);
              }
              this.value1InputText.set_text(this.curSelectedNote[1][this.curEventSelected][1]);
              this.value2InputText.set_text(this.curSelectedNote[1][this.curEventSelected][2]);
            }
            this.strumTimeInputText.set_text("" + y.string(this.curSelectedNote[0]));
          }
        },
        updateGrid: function () {
          this.curRenderedNotes.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedNotes.clear();
          this.curRenderedSustains.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedSustains.clear();
          this.curRenderedNoteType.forEachAlive(function (a) {
            a.destroy();
          });
          this.curRenderedNoteType.clear();
          this.nextRenderedNotes.forEachAlive(function (a) {
            a.destroy();
          });
          this.nextRenderedNotes.clear();
          this.nextRenderedSustains.forEachAlive(function (a) {
            a.destroy();
          });
          this.nextRenderedSustains.clear();
          if (this._song.notes[ea.curSec].changeBPM && this._song.notes[ea.curSec].bpm > 0) {
            K.set_bpm(this._song.notes[ea.curSec].bpm);
          } else {
            var a = this._song.bpm;
            for (var b = 0, c = ea.curSec; b < c;) {
              var d = b++;
              if (this._song.notes[d].changeBPM) {
                a = this._song.notes[d].bpm;
              }
            }
            K.set_bpm(a);
          }
          var e = this.getSectionBeats();
          b = 0;
          for (c = this._song.notes[ea.curSec].sectionNotes; b < c.length;) {
            d = c[b];
            ++b;
            a = this.setupNoteData(d, false);
            this.curRenderedNotes.add(a);
            if (a.sustainLength > 0) {
              this.curRenderedSustains.add(this.setupSusNote(a, e));
            }
            if (d[3] != null && a.noteType != null && a.noteType.length > 0) {
              var f = this.curNoteTypes.indexOf(d[3]);
              var g = "" + f;
              if (f < 0) {
                g = "?";
              }
              f = new hk(0, 0, 100, g, 24);
              f.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", cb.OUTLINE_FAST, -16777216);
              f.xAdd = -32;
              f.yAdd = 6;
              f.set_borderSize(1);
              this.curRenderedNoteType.add(f);
              f.sprTracker = a;
            }
            a.mustPress = this._song.notes[ea.curSec].mustHitSection;
            if (d[1] > 3) {
              a.mustPress = !a.mustPress;
            }
          }
          e = this.sectionStartTime();
          g = this.sectionStartTime(1);
          b = 0;
          for (c = this._song.events; b < c.length;) {
            d = c[b];
            ++b;
            if (g > d[0] && d[0] >= e) {
              a = this.setupNoteData(d, false);
              this.curRenderedNotes.add(a);
              d = "Event: " + a.eventName + " (" + Math.floor(a.strumTime) + " ms)\nValue 1: " + a.eventVal1 + "\nValue 2: " + a.eventVal2;
              if (a.eventLength > 1) {
                d = a.eventLength + " Events:\n" + a.eventName;
              }
              f = new hk(0, 0, 400, d, 12);
              f.setFormat("assets/fonts/vcr.ttf", 12, -1, "right", cb.OUTLINE_FAST, -16777216);
              f.xAdd = -410;
              f.set_borderSize(1);
              if (a.eventLength > 1) {
                f.yAdd += 8;
              }
              this.curRenderedNoteType.add(f);
              f.sprTracker = a;
            }
          }
          e = this.getSectionBeats(1);
          if (ea.curSec < this._song.notes.length - 1) {
            b = 0;
            c = this._song.notes[ea.curSec + 1].sectionNotes;
            while (b < c.length) {
              d = c[b];
              ++b;
              a = this.setupNoteData(d, true);
              a.set_alpha(0.6);
              this.nextRenderedNotes.add(a);
              if (a.sustainLength > 0) {
                this.nextRenderedSustains.add(this.setupSusNote(a, e));
              }
            }
          }
          e = this.sectionStartTime(1);
          g = this.sectionStartTime(2);
          b = 0;
          for (c = this._song.events; b < c.length;) {
            d = c[b];
            ++b;
            if (g > d[0] && d[0] >= e) {
              a = this.setupNoteData(d, true);
              a.set_alpha(0.6);
              this.nextRenderedNotes.add(a);
            }
          }
        },
        setupNoteData: function (a, b) {
          var c = a[1];
          var d = a[0];
          var e = a[2];
          var f = new Ta(d, c % 4, null, null, true);
          if (e != null) {
            if (typeof a[3] != "string") {
              a[3] = this.curNoteTypes[a[3]];
            }
            if (a.length > 3 && (a[3] == null || a[3].length < 1)) {
              L.remove(a, a[3]);
            }
            f.sustainLength = e;
            f.set_noteType(a[3]);
          } else {
            f.loadGraphic(E.image("eventArrow"));
            f.eventName = this.getEventName(a[1]);
            f.eventLength = a[1].length;
            if (a[1].length < 2) {
              f.eventVal1 = a[1][0][1];
              f.eventVal2 = a[1][0][2];
            }
            c = f.noteData = -1;
          }
          f.setGraphicSize(ea.GRID_SIZE, ea.GRID_SIZE);
          f.updateHitbox();
          f.set_x(Math.floor(c * ea.GRID_SIZE) + ea.GRID_SIZE);
          if (b && this._song.notes[ea.curSec].mustHitSection != this._song.notes[ea.curSec + 1].mustHitSection) {
            if (c > 3) {
              f.set_x(f.x - ea.GRID_SIZE * 4);
            } else if (e != null) {
              f.set_x(f.x + ea.GRID_SIZE * 4);
            }
          }
          a = this.getSectionBeats(b ? 1 : 0);
          f.set_y(this.getYfromStrumNotes(d - this.sectionStartTime(), a));
          if (f.y < -150) {
            f.set_y(-150);
          }
          return f;
        },
        getEventName: function (a) {
          var b = "";
          var c = false;
          for (var d = 0, e = a.length; d < e;) {
            var f = d++;
            if (c) {
              b += ", ";
            }
            b += a[f][0];
            c = true;
          }
          return b;
        },
        setupSusNote: function (a, b) {
          b = Math.floor(jc.remapToRange(a.sustainLength, 0, K.stepCrochet * 16, 0, ea.GRID_SIZE * 16 * this.zoomList[this.curZoom]) + ea.GRID_SIZE * this.zoomList[this.curZoom] - ea.GRID_SIZE / 2);
          var c = ea.GRID_SIZE * this.zoomList[this.curZoom] / 2 + ea.GRID_SIZE / 2 | 0;
          if (b < c) {
            b = c;
          }
          if (b < 1) {
            b = 1;
          }
          return new G(a.x + ea.GRID_SIZE * 0.5 - 4, a.y + ea.GRID_SIZE / 2).makeGraphic(8, b);
        },
        addSection: function (a) {
          if (a == null) {
            a = 4;
          }
          this._song.notes.push({
            sectionBeats: a,
            bpm: this._song.bpm,
            changeBPM: false,
            mustHitSection: true,
            gfSection: false,
            sectionNotes: [],
            altAnim: false
          });
        },
        selectNote: function (a) {
          var b = a.noteData;
          if (b > -1) {
            if (a.mustPress != this._song.notes[ea.curSec].mustHitSection) {
              b += 4;
            }
            for (var c = 0, d = this._song.notes[ea.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              if (e != this.curSelectedNote && e.length > 2 && e[0] == a.strumTime && e[1] == b) {
                this.curSelectedNote = e;
                break;
              }
            }
          } else {
            c = 0;
            d = this._song.events;
            while (c < d.length) {
              e = d[c];
              ++c;
              if (e != this.curSelectedNote && e[0] == a.strumTime) {
                this.curSelectedNote = e;
                this.curEventSelected = (this.curSelectedNote[1].length | 0) - 1;
                break;
              }
            }
          }
          this.changeEventSelected();
          this.updateGrid();
          this.updateNoteUI();
        },
        deleteNote: function (a) {
          var b = a.noteData;
          if (b > -1 && a.mustPress != this._song.notes[ea.curSec].mustHitSection) {
            b += 4;
          }
          if (a.noteData > -1) {
            for (var c = 0, d = this._song.notes[ea.curSec].sectionNotes; c < d.length;) {
              var e = d[c];
              ++c;
              if (e[0] == a.strumTime && e[1] == b) {
                if (e == this.curSelectedNote) {
                  this.curSelectedNote = null;
                }
                L.remove(this._song.notes[ea.curSec].sectionNotes, e);
                break;
              }
            }
          } else {
            c = 0;
            d = this._song.events;
            while (c < d.length) {
              e = d[c];
              ++c;
              if (e[0] == a.strumTime) {
                if (e == this.curSelectedNote) {
                  this.curSelectedNote = null;
                  this.changeEventSelected();
                }
                L.remove(this._song.events, e);
                break;
              }
            }
          }
          this.updateGrid();
        },
        doANoteThing: function (a, b, c) {
          var d = this;
          var e = false;
          if (this.strumLineNotes.members[b].overlaps(this.curRenderedNotes)) {
            this.curRenderedNotes.forEachAlive(function (a) {
              var c = d.strumLineNotes.members[b].x + 1;
              var f = d.strumLine.y + 1;
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              if (f == null) {
                f = 0;
              }
              if (c == null) {
                c = 0;
              }
              c = da.pool.get().set(c, f);
              c._inPool = false;
              if (a.overlapsPoint(c) && a.noteData == b % 4) {
                if (!e) {
                  d.deleteNote(a);
                }
                e = true;
              }
            });
          }
          if (!e) {
            this.addNote(a, b, c);
          }
        },
        clearSong: function () {
          for (var a = 0, b = this._song.notes.length; a < b;) {
            var c = a++;
            this._song.notes[c].sectionNotes = [];
          }
          this.updateGrid();
        },
        addNote: function (a, b, c) {
          var d = this.getStrumTime(this.dummyArrow.y * (this.getSectionBeats() / 4), false) + this.sectionStartTime();
          var e = Math.floor((g.mouse.x - ea.GRID_SIZE) / ea.GRID_SIZE);
          var f = this.currentType;
          if (a != null) {
            d = a;
          }
          if (b != null) {
            e = b;
          }
          if (c != null) {
            f = c;
          }
          if (e > -1) {
            this._song.notes[ea.curSec].sectionNotes.push([d, e, 0, this.curNoteTypes[f]]);
            this.curSelectedNote = this._song.notes[ea.curSec].sectionNotes[this._song.notes[ea.curSec].sectionNotes.length - 1];
          } else {
            a = this.eventStuff[y.parseInt(this.eventDropDown.get_selectedId())][0];
            this._song.events.push([d, [[a, this.value1InputText.text, this.value2InputText.text]]]);
            this.curSelectedNote = this._song.events[this._song.events.length - 1];
            this.curEventSelected = 0;
          }
          this.changeEventSelected();
          a = g.keys.pressed;
          if (a.keyManager.checkStatusUnsafe(17, a.status) && e > -1) {
            this._song.notes[ea.curSec].sectionNotes.push([d, (e + 4) % 8, 0, this.curNoteTypes[f]]);
          }
          this.strumTimeInputText.set_text("" + y.string(this.curSelectedNote[0]));
          this.updateGrid();
          this.updateNoteUI();
        },
        redo: function () {},
        undo: function () {
          this.undos.pop();
        },
        getStrumTime: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.zoomList[this.curZoom];
          if (!b) {
            c = 1;
          }
          return jc.remapToRange(a, this.gridBG.y, this.gridBG.y + this.gridBG.get_height() * c, 0, K.stepCrochet * 16);
        },
        getYfromStrum: function (a, b) {
          if (b == null) {
            b = true;
          }
          var c = this.zoomList[this.curZoom];
          if (!b) {
            c = 1;
          }
          return jc.remapToRange(a, 0, K.stepCrochet * 16, this.gridBG.y, this.gridBG.y + this.gridBG.get_height() * c);
        },
        getYfromStrumNotes: function (a, b) {
          return a / (b * 4 * K.stepCrochet) * b * 4 * this.zoomList[this.curZoom] * ea.GRID_SIZE + this.gridBG.y;
        },
        getNotes: function () {
          var a = [];
          for (var b = 0, c = this._song.notes; b < c.length;) {
            var d = c[b];
            ++b;
            a.push(d.sectionNotes);
          }
          return a;
        },
        loadJson: function (a) {
          var b = this;
          try {
            var c = null;
            if (qb.list[c == null ? z.storyDifficulty : c] != qb.defaultDifficulty) {
              c = null;
              if (qb.list[c == null ? z.storyDifficulty : c] == null) {
                z.SONG = Ld.loadFromJson(a.toLowerCase(), a.toLowerCase());
              } else {
                c = null;
                z.SONG = Ld.loadFromJson(a.toLowerCase() + "-" + qb.list[c == null ? z.storyDifficulty : c], a.toLowerCase());
              }
            } else {
              z.SONG = Ld.loadFromJson(a.toLowerCase(), a.toLowerCase());
            }
            P.resetState();
          } catch (d) {
            a = I.caught(d);
            Ab.trace("ERROR! " + y.string(a), {
              fileName: "source/states/editors/ChartingState.hx",
              lineNumber: 3385,
              className: "states.editors.ChartingState",
              methodName: "loadJson"
            });
            a = a.toString();
            if (v.startsWith(a, "[file_contents,assets/data/")) {
              a = "Missing file: " + a.substring(27, a.length - 1);
            }
            if (this.missingText == null) {
              this.missingText = new R(50, 0, g.width - 100, "", 24);
              this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", cb.OUTLINE, -16777216);
              c = this.missingText.scrollFactor;
              c.set_x(0);
              c.set_y(0);
              this.add(this.missingText);
            } else {
              this.missingTextTimer.cancel();
            }
            this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + a);
            a = this.missingText;
            c = 16;
            if (c == null) {
              c = 17;
            }
            if (c == 1 || c == 17) {
              a.set_x((g.width - a.get_width()) / 2);
            }
            if (c == 16 || c == 17) {
              a.set_y((g.height - a.get_height()) / 2);
            }
            this.missingTextTimer = new Gc().start(5, function (a) {
              b.remove(b.missingText);
              b.missingText.destroy();
            });
            g.sound.play(E.sound("cancelMenu"));
          }
        },
        autosaveSong: function () {
          g.save.data.autosave = JSON.stringify({
            song: this._song
          });
          g.save.flush();
        },
        clearEvents: function () {
          this._song.events = [];
          this.updateGrid();
        },
        saveLevel: function () {
          if (this._song.events != null && this._song.events.length > 1) {
            this._song.events.sort(n(this, this.sortByTime));
          }
          var a = JSON.stringify({
            song: this._song
          }, null, "\t");
          if (a != null && a.length > 0) {
            this._file = new Ge();
            this._file.addEventListener("complete", n(this, this.onSaveComplete));
            this._file.addEventListener("cancel", n(this, this.onSaveCancel));
            this._file.addEventListener("ioError", n(this, this.onSaveError));
            var b = this._file;
            a = v.trim(a);
            var c = this._song.song;
            var d = new na("[~&\\\\;:<>#]", "");
            var e = new na("[.,'\"%?!]", "");
            c = d.split(v.replace(c, " ", "-")).join("-");
            b.save(a, e.split(c).join("").toLowerCase() + ".json");
          }
        },
        sortByTime: function (a, b) {
          a = a[0];
          b = b[0];
          var c = 0;
          if (a < b) {
            c = -1;
          } else if (a > b) {
            c = 1;
          }
          return c;
        },
        saveEvents: function () {
          if (this._song.events != null && this._song.events.length > 1) {
            this._song.events.sort(n(this, this.sortByTime));
          }
          var a = JSON.stringify({
            song: {
              events: this._song.events
            }
          }, null, "\t");
          if (a != null && a.length > 0) {
            this._file = new Ge();
            this._file.addEventListener("complete", n(this, this.onSaveComplete));
            this._file.addEventListener("cancel", n(this, this.onSaveCancel));
            this._file.addEventListener("ioError", n(this, this.onSaveError));
            this._file.save(v.trim(a), "events.json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Successfully saved LEVEL DATA.", Aa.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Problem saving Level data", Aa.ERROR, true);
        },
        getSectionBeats: function (a) {
          if (a == null) {
            a = ea.curSec;
          }
          var b = null;
          if (this._song.notes[a] != null) {
            b = this._song.notes[a].sectionBeats;
          }
          return b ?? 4;
        },
        __class__: ea
      });
      function hk(a, b, c, d, e, f) {
        if (f == null) {
          f = true;
        }
        if (e == null) {
          e = 8;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        this.xAdd = this.yAdd = 0;
        R.call(this, a, b, c, d, e, f);
      }
      h["states.editors.AttachedFlxText"] = hk;
      hk.__name__ = "states.editors.AttachedFlxText";
      hk.__super__ = R;
      hk.prototype = q(R.prototype, {
        update: function (a) {
          R.prototype.update.call(this, a);
          if (this.sprTracker != null) {
            this.setPosition(this.sprTracker.x + this.xAdd, this.sprTracker.y + this.yAdd);
            this.set_angle(this.sprTracker.angle);
            this.set_alpha(this.sprTracker.alpha);
          }
        },
        __class__: hk
      });
      function Qf(a, b) {
        this._file = null;
        this.transitioning = false;
        this.lastTab = "Character";
        this.currentGhosts = 0;
        this.blockPressWhileTypingOn = [];
        this.animationArray = [];
        this.curAnim = 0;
        this.daText = null;
        P.call(this, a, b);
      }
      h["states.editors.DialogueCharacterEditorState"] = Qf;
      Qf.__name__ = "states.editors.DialogueCharacterEditorState";
      Qf.__super__ = P;
      Qf.prototype = q(P.prototype, {
        create: function () {
          this.persistentUpdate = this.persistentDraw = true;
          this.camGame = this.initPsychCamera();
          var a = Gb._new();
          var b = 0;
          var c = b * 0 + 0.5;
          var d = 1;
          if (d == null) {
            d = 1;
          }
          b = Math.round((b + 0.5) * 255);
          a = a & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16;
          b = Math.round(c * 255);
          a = a & -65281 | (b > 255 ? 255 : b < 0 ? 0 : b) << 8;
          b = 128;
          a = a & -256 | (b > 255 ? 255 : b < 0 ? 0 : b);
          b = Math.round(d * 255);
          this.camGame.bgColor = a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24;
          this.camHUD = new Pb();
          this.camHUD.bgColor &= 16777215;
          this.camHUD.bgColor |= 0;
          g.cameras.add(this.camHUD, false);
          this.mainGroup = new Na();
          this.mainGroup.set_cameras([this.camGame]);
          this.hudGroup = new Na();
          this.hudGroup.set_cameras([this.camGame]);
          this.add(this.mainGroup);
          this.add(this.hudGroup);
          this.character = new kd();
          a = this.character.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.mainGroup.add(this.character);
          this.ghostLoop = new kd();
          this.ghostLoop.set_alpha(0);
          this.ghostLoop.set_color(-65536);
          this.ghostLoop.isGhost = true;
          this.ghostLoop.jsonFile = this.character.jsonFile;
          this.ghostLoop.set_cameras([this.camGame]);
          this.add(this.ghostLoop);
          this.ghostIdle = new kd();
          this.ghostIdle.set_alpha(0);
          this.ghostIdle.set_color(-16776961);
          this.ghostIdle.isGhost = true;
          this.ghostIdle.jsonFile = this.character.jsonFile;
          this.ghostIdle.set_cameras([this.camGame]);
          this.add(this.ghostIdle);
          this.box = new G(70, 370);
          this.box.set_antialiasing(C.data.antialiasing);
          a = this.box;
          c = E.image("speech_bubble", null, true);
          a.set_frames(Sa.fromSparrow(c, E.getPath("images/speech_bubble.xml", null, null)));
          a = this.box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
          this.box.animation.addByPrefix("center", "speech bubble middle", 24);
          this.box.animation.play("normal", true);
          this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
          this.box.updateHitbox();
          this.hudGroup.add(this.box);
          this.tipText = new R(10, 10, g.width - 20, Qf.TIP_TEXT_MAIN, 8);
          this.tipText.setFormat("assets/fonts/vcr.ttf", 16, -1, "right", cb.OUTLINE, -16777216);
          this.tipText.set_cameras([this.camHUD]);
          a = this.tipText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.tipText);
          this.offsetLoopText = new R(10, 10, 0, "", 32);
          this.offsetLoopText.setFormat("assets/fonts/vcr.ttf", 32, -1, "left", cb.OUTLINE, -16777216);
          this.offsetLoopText.set_cameras([this.camHUD]);
          a = this.offsetLoopText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.offsetLoopText);
          this.offsetLoopText.set_visible(false);
          this.offsetIdleText = new R(10, 46, 0, "", 32);
          this.offsetIdleText.setFormat("assets/fonts/vcr.ttf", 32, -1, "left", cb.OUTLINE, -16777216);
          this.offsetIdleText.set_cameras([this.camHUD]);
          a = this.offsetIdleText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.offsetIdleText);
          this.offsetIdleText.set_visible(false);
          this.animText = new R(10, 22, g.width - 20, "", 8);
          this.animText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", cb.OUTLINE, -16777216);
          a = this.animText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.animText.set_cameras([this.camHUD]);
          this.add(this.animText);
          this.reloadCharacter();
          this.updateTextBox();
          this.daText = new Wh(dc.DEFAULT_TEXT_X, dc.DEFAULT_TEXT_Y, "", 0.05, false);
          this.daText.setScale(0.7);
          this.daText.set_text(Qf.DEFAULT_TEXT);
          this.hudGroup.add(this.daText);
          this.addEditorBox();
          g.mouse.set_visible(true);
          this.updateCharTypeBox();
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = [{
            name: "Character Type",
            label: "Character Type"
          }];
          this.UI_typebox = new ie(null, null, a, null, true);
          this.UI_typebox.resize(120, 180);
          this.UI_typebox.set_x(900);
          this.UI_typebox.set_y(g.height - this.UI_typebox.get_height() - 50);
          a = this.UI_typebox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_typebox.set_camera(this.camHUD);
          this.addTypeUI();
          this.add(this.UI_typebox);
          a = [{
            name: "Animations",
            label: "Animations"
          }, {
            name: "Character",
            label: "Character"
          }];
          this.UI_mainbox = new ie(null, null, a, null, true);
          this.UI_mainbox.resize(200, 250);
          this.UI_mainbox.set_x(this.UI_typebox.x + this.UI_typebox.get_width());
          this.UI_mainbox.set_y(g.height - this.UI_mainbox.get_height() - 50);
          a = this.UI_mainbox.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_mainbox.set_camera(this.camHUD);
          this.addAnimationsUI();
          this.addCharacterUI();
          this.add(this.UI_mainbox);
          this.UI_mainbox.set_selected_tab_id("Character");
          this.lastTab = this.UI_mainbox.get_selected_tab_id();
        },
        addTypeUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_typebox);
          b.name = "Character Type";
          this.leftCheckbox = new Bb(10, 20, null, null, "Left", 100);
          this.leftCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "left";
            a.updateCharTypeBox();
          };
          this.centerCheckbox = new Bb(this.leftCheckbox.x, this.leftCheckbox.y + 40, null, null, "Center", 100);
          this.centerCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "center";
            a.updateCharTypeBox();
          };
          this.rightCheckbox = new Bb(this.centerCheckbox.x, this.centerCheckbox.y + 40, null, null, "Right", 100);
          this.rightCheckbox.callback = function () {
            a.character.jsonFile.dialogue_pos = "right";
            a.updateCharTypeBox();
          };
          b.add(this.leftCheckbox);
          b.add(this.centerCheckbox);
          b.add(this.rightCheckbox);
          this.UI_typebox.addGroup(b);
        },
        addAnimationsUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_mainbox);
          b.name = "Animations";
          this.animationDropDown = new vc(10, 30, vc.makeStrIdLabelArray([""], true), function (b) {
            b = a.animationArray[y.parseInt(b)];
            if (Object.prototype.hasOwnProperty.call(a.character.dialogueAnimations.h, b)) {
              a.ghostLoop.playAnim(b);
              a.ghostIdle.playAnim(b, true);
              a.curSelectedAnim = b;
              b = a.character.dialogueAnimations.h[a.curSelectedAnim];
              a.offsetLoopText.set_text("Loop: " + y.string(b.loop_offsets));
              a.offsetIdleText.set_text("Idle: " + y.string(b.idle_offsets));
              a.animationInputText.set_text(b.anim);
              a.loopInputText.set_text(b.loop_name);
              a.idleInputText.set_text(b.idle_name);
            }
          });
          this.animationInputText = new pb(15, 85, 80, "", 8);
          this.blockPressWhileTypingOn.push(this.animationInputText);
          this.loopInputText = new pb(this.animationInputText.x, this.animationInputText.y + 35, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.loopInputText);
          this.idleInputText = new pb(this.loopInputText.x, this.loopInputText.y + 40, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.idleInputText);
          var c = new zb(10, this.idleInputText.y + 30, "Add/Update", function () {
            var b = v.trim(a.animationInputText.text);
            if (Object.prototype.hasOwnProperty.call(a.character.dialogueAnimations.h, b)) {
              for (var c = 0, d = a.character.jsonFile.animations.length; c < d;) {
                var g = c++;
                g = a.character.jsonFile.animations[g];
                if (v.trim(g.anim) == b) {
                  g.loop_name = a.loopInputText.text;
                  g.idle_name = a.idleInputText.text;
                  break;
                }
              }
              a.character.reloadAnimations();
              a.ghostLoop.reloadAnimations();
              a.ghostIdle.reloadAnimations();
              if (a.curSelectedAnim == b) {
                a.ghostLoop.playAnim(b);
                a.ghostIdle.playAnim(b, true);
              }
            } else {
              a.character.jsonFile.animations.push({
                anim: b,
                loop_name: a.loopInputText.text,
                loop_offsets: [0, 0],
                idle_name: a.idleInputText.text,
                idle_offsets: [0, 0]
              });
              b = a.animationDropDown.get_selectedLabel();
              a.character.reloadAnimations();
              a.ghostLoop.reloadAnimations();
              a.ghostIdle.reloadAnimations();
              a.reloadAnimationsDropDown();
              a.animationDropDown.set_selectedLabel(b);
            }
          });
          var d = new zb(100, c.y, "Remove", function () {
            for (var b = 0, c = a.character.jsonFile.animations.length; b < c;) {
              var d = b++;
              d = a.character.jsonFile.animations[d];
              if (d != null && v.trim(d.anim) == v.trim(a.animationInputText.text)) {
                b = a.animationDropDown.get_selectedLabel();
                L.remove(a.character.jsonFile.animations, d);
                a.character.reloadAnimations();
                a.ghostLoop.reloadAnimations();
                a.ghostIdle.reloadAnimations();
                a.reloadAnimationsDropDown();
                if (a.character.jsonFile.animations.length > 0 && b == v.trim(d.anim)) {
                  c = a.character.jsonFile.animations[0].anim;
                  a.ghostLoop.playAnim(c);
                  a.ghostIdle.playAnim(c, true);
                }
                a.animationDropDown.set_selectedLabel(b);
                a.animationInputText.set_text("");
                a.loopInputText.set_text("");
                a.idleInputText.set_text("");
                break;
              }
            }
          });
          b.add(new R(this.animationDropDown.x, this.animationDropDown.y - 18, 0, "Animations:"));
          b.add(new R(this.animationInputText.x, this.animationInputText.y - 18, 0, "Animation name:"));
          b.add(new R(this.loopInputText.x, this.loopInputText.y - 18, 0, "Loop name on .XML file:"));
          b.add(new R(this.idleInputText.x, this.idleInputText.y - 18, 0, "Idle/Finished name on .XML file:"));
          b.add(this.animationInputText);
          b.add(this.loopInputText);
          b.add(this.idleInputText);
          b.add(c);
          b.add(d);
          b.add(this.animationDropDown);
          this.UI_mainbox.addGroup(b);
          this.reloadAnimationsDropDown();
        },
        reloadAnimationsDropDown: function () {
          this.animationArray = [];
          for (var a = 0, b = this.character.jsonFile.animations; a < b.length;) {
            var c = b[a];
            ++a;
            this.animationArray.push(c.anim);
          }
          if (this.animationArray.length < 1) {
            this.animationArray = [""];
          }
          this.animationDropDown.setData(vc.makeStrIdLabelArray(this.animationArray, true));
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_mainbox);
          b.name = "Character";
          this.imageInputText = new pb(10, 30, 80, this.character.jsonFile.image, 8);
          this.blockPressWhileTypingOn.push(this.imageInputText);
          this.xStepper = new Lb(this.imageInputText.x, this.imageInputText.y + 50, 10, this.character.jsonFile.position[0], -2000, 2000, 0);
          this.yStepper = new Lb(this.imageInputText.x + 80, this.xStepper.y, 10, this.character.jsonFile.position[1], -2000, 2000, 0);
          this.scaleStepper = new Lb(this.imageInputText.x, this.xStepper.y + 50, 0.05, this.character.jsonFile.scale, 0.1, 10, 2);
          var c = new Bb(this.scaleStepper.x + 80, this.scaleStepper.y, null, null, "No Antialiasing", 100);
          c.set_checked(this.character.jsonFile.no_antialiasing == 1);
          c.callback = function () {
            a.character.jsonFile.no_antialiasing = c.checked;
            a.character.set_antialiasing(!a.character.jsonFile.no_antialiasing);
          };
          b.add(new R(10, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new R(10, this.xStepper.y - 18, 0, "Position Offset:"));
          b.add(new R(10, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(this.imageInputText);
          b.add(this.xStepper);
          b.add(this.yStepper);
          b.add(this.scaleStepper);
          b.add(c);
          var d = new zb(10, this.scaleStepper.y + 60, "Reload Image", function () {
            a.reloadCharacter();
          });
          var e = new zb(d.x + 100, d.y, "Load Character", function () {
            a.loadCharacter();
          });
          var f = new zb(e.x, d.y - 25, "Save Character", function () {
            a.saveCharacter();
          });
          b.add(d);
          b.add(e);
          b.add(f);
          this.UI_mainbox.addGroup(b);
        },
        updateCharTypeBox: function () {
          this.leftCheckbox.set_checked(false);
          this.centerCheckbox.set_checked(false);
          this.rightCheckbox.set_checked(false);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.centerCheckbox.set_checked(true);
              break;
            case "left":
              this.leftCheckbox.set_checked(true);
              break;
            case "right":
              this.rightCheckbox.set_checked(true);
          }
          this.reloadCharacter();
          this.updateTextBox();
        },
        reloadCharacter: function () {
          for (var a = [this.character, this.ghostLoop, this.ghostIdle], b = 0; b < a.length;) {
            var c = a[b];
            ++b;
            var d = "dialogue/" + this.character.jsonFile.image;
            var e = E.image(d, null, true);
            c.set_frames(Sa.fromSparrow(e, E.getPath("images/" + d + ".xml", null, null)));
            c.jsonFile = this.character.jsonFile;
            c.reloadAnimations();
            c.setGraphicSize(c.get_width() * kd.DEFAULT_SCALE * this.character.jsonFile.scale | 0);
            c.updateHitbox();
          }
          this.character.set_x(dc.LEFT_CHAR_X);
          this.character.set_y(dc.DEFAULT_CHAR_Y);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.character.set_x(g.width / 2);
              a = this.character;
              a.set_x(a.x - this.character.get_width() / 2);
              break;
            case "right":
              this.character.set_x(g.width - this.character.get_width() + dc.RIGHT_CHAR_X);
          }
          a = this.character;
          a.set_x(a.x + (this.character.jsonFile.position[0] + this.mainGroup.x));
          a = this.character;
          a.set_y(a.y + (this.character.jsonFile.position[1] + this.mainGroup.y));
          this.character.playAnim(this.character.jsonFile.animations[0].anim);
          if (this.character.jsonFile.animations.length > 0) {
            this.curSelectedAnim = this.character.jsonFile.animations[0].anim;
            a = this.character.dialogueAnimations.h[this.curSelectedAnim];
            this.ghostLoop.playAnim(a.anim);
            this.ghostIdle.playAnim(a.anim, true);
            this.offsetLoopText.set_text("Loop: " + y.string(a.loop_offsets));
            this.offsetIdleText.set_text("Idle: " + y.string(a.idle_offsets));
          }
          this.curAnim = 0;
          this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
        },
        updateTextBox: function () {
          this.box.set_flipX(false);
          var a = "normal";
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              a = "center";
              break;
            case "left":
              this.box.set_flipX(true);
          }
          this.box.animation.play(a, true);
          dc.updateBoxOffsets(this.box);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b == this.imageInputText) {
            this.character.jsonFile.image = this.imageInputText.text;
          } else if (a == "change_numeric_stepper" && b instanceof Lb) {
            if (b == this.scaleStepper) {
              this.character.jsonFile.scale = this.scaleStepper.value;
              this.reloadCharacter();
            } else if (b == this.xStepper) {
              this.character.jsonFile.position[0] = this.xStepper.value;
              this.reloadCharacter();
            } else if (b == this.yStepper) {
              this.character.jsonFile.position[1] = this.yStepper.value;
              this.reloadCharacter();
            }
          }
        },
        update: function (a) {
          if (!this.transitioning) {
            if (this.character.animation._curAnim != null) {
              if (this.daText.finishedText) {
                if (this.character.animationIsLoop()) {
                  this.character.playAnim(this.character.animation._curAnim.name, true);
                }
              } else if (this.character.animation._curAnim.finished) {
                this.character.animation._curAnim.restart();
              }
            }
            var b = false;
            for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.hasFocus) {
                C.toggleVolumeKeys(false);
                b = true;
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                  e.set_hasFocus(false);
                }
                break;
              }
            }
            if (!b && !this.animationDropDown.dropPanel.visible) {
              C.toggleVolumeKeys(true);
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(32, c.status) && this.UI_mainbox.get_selected_tab_id() == "Character") {
                this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
                this.daText.resetDialogue();
                this.updateTextBox();
              }
              e = 1;
              var f = 300;
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(16, c.status)) {
                f = 1200;
                e = 10;
              }
              b = [1, 1, -1, -1];
              c = g.keys.pressed;
              d = c.keyManager.checkStatusUnsafe(74, c.status);
              c = g.keys.pressed;
              var k = c.keyManager.checkStatusUnsafe(73, c.status);
              c = g.keys.pressed;
              var h = c.keyManager.checkStatusUnsafe(76, c.status);
              c = g.keys.pressed;
              k = [d, k, h, c.keyManager.checkStatusUnsafe(75, c.status)];
              c = 0;
              for (d = k.length; c < d;) {
                h = c++;
                if (k[h]) {
                  if (h % 2 == 1) {
                    var l = this.mainGroup;
                    l.set_y(l.y + f * a * b[h]);
                  } else {
                    l = this.mainGroup;
                    l.set_x(l.x + f * a * b[h]);
                  }
                }
              }
              if (this.UI_mainbox.get_selected_tab_id() == "Animations" && this.curSelectedAnim != null && Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, this.curSelectedAnim)) {
                k = false;
                f = this.character.dialogueAnimations.h[this.curSelectedAnim];
                c = g.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(65, c.status);
                c = g.keys.justPressed;
                h = c.keyManager.checkStatusUnsafe(87, c.status);
                c = g.keys.justPressed;
                l = c.keyManager.checkStatusUnsafe(68, c.status);
                c = g.keys.justPressed;
                l = [d, h, l, c.keyManager.checkStatusUnsafe(83, c.status)];
                c = g.keys.justPressed;
                d = c.keyManager.checkStatusUnsafe(37, c.status);
                c = g.keys.justPressed;
                h = c.keyManager.checkStatusUnsafe(38, c.status);
                c = g.keys.justPressed;
                var p = c.keyManager.checkStatusUnsafe(39, c.status);
                c = g.keys.justPressed;
                p = [d, h, p, c.keyManager.checkStatusUnsafe(40, c.status)];
                c = 0;
                for (d = l.length; c < d;) {
                  h = c++;
                  if (l[h]) {
                    if (h % 2 == 1) {
                      f.loop_offsets[1] += e * b[h];
                    } else {
                      f.loop_offsets[0] += e * b[h];
                    }
                    k = true;
                  }
                }
                c = 0;
                for (d = p.length; c < d;) {
                  h = c++;
                  if (p[h]) {
                    if (h % 2 == 1) {
                      f.idle_offsets[1] += e * b[h];
                    } else {
                      f.idle_offsets[0] += e * b[h];
                    }
                    k = true;
                  }
                }
                if (k) {
                  this.offsetLoopText.set_text("Loop: " + y.string(f.loop_offsets));
                  this.offsetIdleText.set_text("Idle: " + y.string(f.idle_offsets));
                  b = this.ghostLoop.offset;
                  e = f.loop_offsets[0];
                  c = f.loop_offsets[1];
                  if (c == null) {
                    c = 0;
                  }
                  if (e == null) {
                    e = 0;
                  }
                  b.set_x(e);
                  b.set_y(c);
                  b = this.ghostIdle.offset;
                  e = f.idle_offsets[0];
                  c = f.idle_offsets[1];
                  if (c == null) {
                    c = 0;
                  }
                  if (e == null) {
                    e = 0;
                  }
                  b.set_x(e);
                  b.set_y(c);
                }
              }
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(81, c.status) && this.camGame.zoom > 0.1) {
                l = this.camGame;
                l.set_zoom(l.zoom - a * this.camGame.zoom);
                if (this.camGame.zoom < 0.1) {
                  this.camGame.set_zoom(0.1);
                }
              }
              c = g.keys.pressed;
              if (c.keyManager.checkStatusUnsafe(69, c.status) && this.camGame.zoom < 1) {
                l = this.camGame;
                l.set_zoom(l.zoom + a * this.camGame.zoom);
                if (this.camGame.zoom > 1) {
                  this.camGame.set_zoom(1);
                }
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(72, c.status)) {
                if (this.UI_mainbox.get_selected_tab_id() == "Animations") {
                  this.currentGhosts++;
                  if (this.currentGhosts > 2) {
                    this.currentGhosts = 0;
                  }
                  this.ghostLoop.set_visible(this.currentGhosts != 1);
                  this.ghostIdle.set_visible(this.currentGhosts != 2);
                  this.ghostLoop.set_alpha(this.currentGhosts == 2 ? 1 : 0.6);
                  this.ghostIdle.set_alpha(this.currentGhosts == 1 ? 1 : 0.6);
                } else {
                  this.hudGroup.set_visible(!this.hudGroup.visible);
                }
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(82, c.status)) {
                this.camGame.set_zoom(1);
                this.mainGroup.setPosition(0, 0);
                this.hudGroup.set_visible(true);
              }
              if (this.UI_mainbox.get_selected_tab_id() != this.lastTab) {
                if (this.UI_mainbox.get_selected_tab_id() == "Animations") {
                  this.hudGroup.set_alpha(0);
                  this.mainGroup.set_alpha(0);
                  this.ghostLoop.set_alpha(0.6);
                  this.ghostIdle.set_alpha(0.6);
                  this.tipText.set_text(Qf.TIP_TEXT_OFFSET);
                  this.offsetLoopText.set_visible(true);
                  this.offsetIdleText.set_visible(true);
                  this.animText.set_visible(false);
                  this.currentGhosts = 0;
                } else {
                  this.hudGroup.set_alpha(1);
                  this.mainGroup.set_alpha(1);
                  this.ghostLoop.set_alpha(0);
                  this.ghostIdle.set_alpha(0);
                  this.tipText.set_text(Qf.TIP_TEXT_MAIN);
                  this.offsetLoopText.set_visible(false);
                  this.offsetIdleText.set_visible(false);
                  this.animText.set_visible(true);
                  this.updateTextBox();
                  this.daText.resetDialogue();
                  if (this.curAnim < 0) {
                    this.curAnim = this.character.jsonFile.animations.length - 1;
                  } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                    this.curAnim = 0;
                  }
                  this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
                  this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                }
                this.lastTab = this.UI_mainbox.get_selected_tab_id();
                this.currentGhosts = 0;
              }
              if (this.UI_mainbox.get_selected_tab_id() == "Character" && (b = [1, -1], c = g.keys.justPressed, e = c.keyManager.checkStatusUnsafe(87, c.status), c = g.keys.justPressed, e = [e, c.keyManager.checkStatusUnsafe(83, c.status)], e.indexOf(true) != -1)) {
                c = 0;
                for (d = e.length; c < d;) {
                  h = c++;
                  if (e[h] && this.character.jsonFile.animations.length > 0) {
                    this.curAnim -= b[h];
                    if (this.curAnim < 0) {
                      this.curAnim = this.character.jsonFile.animations.length - 1;
                    } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                      this.curAnim = 0;
                    }
                    f = this.character.jsonFile.animations[this.curAnim].anim;
                    if (Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, f)) {
                      this.character.playAnim(f, this.daText.finishedText);
                    }
                  }
                }
                this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(27, c.status)) {
                P.switchState(new Pf());
                b = g.sound;
                e = E.returnSound("music", "freakyMenu", null);
                b.playMusic(e, 1);
                this.transitioning = true;
              }
              this.ghostLoop.setPosition(this.character.x, this.character.y);
              this.ghostIdle.setPosition(this.character.x, this.character.y);
              this.hudGroup.set_x(this.mainGroup.x);
              this.hudGroup.set_y(this.mainGroup.y);
            }
          }
          P.prototype.update.call(this, a);
        },
        loadCharacter: function () {
          var a = new Ki("JSON", "json");
          this._file = new Ge();
          this._file.addEventListener("complete", n(this, this.onLoadComplete));
          this._file.addEventListener("cancel", n(this, this.onLoadCancel));
          this._file.addEventListener("ioError", n(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          Ab.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 709,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          this._file = null;
          Ab.trace("Cancelled file loading.", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 722,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          this._file = null;
          Ab.trace("Problem loading file", {
            fileName: "source/states/editors/DialogueCharacterEditorState.hx",
            lineNumber: 734,
            className: "states.editors.DialogueCharacterEditorState",
            methodName: "onLoadError"
          });
        },
        saveCharacter: function () {
          var a = JSON.stringify(this.character.jsonFile, null, "\t");
          if (a.length > 0) {
            var b = v.trim(this.imageInputText.text).split("_");
            b = v.replace(b[0].toLowerCase(), " ", "");
            this._file = new Ge();
            this._file.addEventListener("complete", n(this, this.onSaveComplete));
            this._file.addEventListener("cancel", n(this, this.onSaveCancel));
            this._file.addEventListener("ioError", n(this, this.onSaveError));
            this._file.save(a, b + ".json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Successfully saved file.", Aa.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Problem saving file", Aa.ERROR, true);
        },
        ClipboardAdd: function (a) {
          if (a == null) {
            a = "";
          }
          if (v.endsWith(a.toLowerCase(), "v")) {
            a = a.substring(0, a.length - 1);
          }
          return a + v.replace(yc.get_text(), "\n", "");
        },
        __class__: Qf
      });
      function Rf(a, b) {
        this._file = null;
        this.transitioning = false;
        this.blockPressWhileTypingOn = [];
        this.curSelected = this.curAnim = 0;
        this.dialogueFile = null;
        P.call(this, a, b);
      }
      h["states.editors.DialogueEditorState"] = Rf;
      Rf.__name__ = "states.editors.DialogueEditorState";
      Rf.__super__ = P;
      Rf.prototype = q(P.prototype, {
        create: function () {
          this.persistentUpdate = this.persistentDraw = true;
          var a = Gb._new();
          var b = 0;
          var c = b * 0 + 0.5;
          var d = 1;
          if (d == null) {
            d = 1;
          }
          b = Math.round((b + 0.5) * 255);
          a = a & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16;
          b = Math.round(c * 255);
          a = a & -65281 | (b > 255 ? 255 : b < 0 ? 0 : b) << 8;
          b = 128;
          a = a & -256 | (b > 255 ? 255 : b < 0 ? 0 : b);
          b = Math.round(d * 255);
          g.camera.bgColor = a & 16777215 | (b > 255 ? 255 : b < 0 ? 0 : b) << 24;
          this.defaultLine = {
            portrait: kd.DEFAULT_CHARACTER,
            expression: "talk",
            text: Rf.DEFAULT_TEXT,
            boxState: Rf.DEFAULT_BUBBLETYPE,
            speed: 0.05,
            sound: ""
          };
          this.dialogueFile = {
            dialogue: [this.copyDefaultLine()]
          };
          this.character = new kd();
          a = this.character.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.character);
          this.box = new G(70, 370);
          this.box.set_antialiasing(C.data.antialiasing);
          a = this.box;
          c = E.image("speech_bubble", null, true);
          a.set_frames(Sa.fromSparrow(c, E.getPath("images/speech_bubble.xml", null, null)));
          a = this.box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.box.animation.addByPrefix("normal", "speech bubble normal", 24);
          this.box.animation.addByPrefix("angry", "AHH speech bubble", 24);
          this.box.animation.addByPrefix("center", "speech bubble middle", 24);
          this.box.animation.addByPrefix("center-angry", "AHH Speech Bubble middle", 24);
          this.box.animation.play("normal", true);
          this.box.setGraphicSize(this.box.get_width() * 0.9 | 0);
          this.box.updateHitbox();
          this.add(this.box);
          this.addEditorBox();
          g.mouse.set_visible(true);
          c = new R(10, 10, g.width - 20, "Press O to remove the current dialogue line, Press P to add another line after the current one.", 8);
          c.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", cb.OUTLINE, -16777216);
          a = c.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(c);
          this.selectedText = new R(10, 32, g.width - 20, "", 8);
          this.selectedText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", cb.OUTLINE, -16777216);
          a = this.selectedText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.selectedText);
          this.animText = new R(10, 62, g.width - 20, "", 8);
          this.animText.setFormat("assets/fonts/vcr.ttf", 24, -1, "left", cb.OUTLINE, -16777216);
          a = this.animText.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.add(this.animText);
          this.daText = new Wh(dc.DEFAULT_TEXT_X, dc.DEFAULT_TEXT_Y, Rf.DEFAULT_TEXT);
          this.daText.setScale(0.7);
          this.add(this.daText);
          this.changeText();
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          this.UI_box = new ie(null, null, [{
            name: "Dialogue Line",
            label: "Dialogue Line"
          }], null, true);
          this.UI_box.resize(250, 210);
          this.UI_box.set_x(g.width - this.UI_box.get_width() - 10);
          this.UI_box.set_y(10);
          var a = this.UI_box.scrollFactor;
          a.set_x(0);
          a.set_y(0);
          this.UI_box.set_alpha(0.8);
          this.addDialogueLineUI();
          this.add(this.UI_box);
        },
        addDialogueLineUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Dialogue Line";
          this.characterInputText = new pb(10, 20, 80, kd.DEFAULT_CHARACTER, 8);
          this.blockPressWhileTypingOn.push(this.characterInputText);
          this.speedStepper = new Lb(10, this.characterInputText.y + 40, 0.005, 0.05, 0, 0.5, 3);
          this.angryCheckbox = new Bb(this.speedStepper.x + 120, this.speedStepper.y, null, null, "Angry Textbox", 200);
          this.angryCheckbox.callback = function () {
            a.updateTextBox();
            a.dialogueFile.dialogue[a.curSelected].boxState = a.angryCheckbox.checked ? "angry" : "normal";
          };
          this.soundInputText = new pb(10, this.speedStepper.y + 40, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.soundInputText);
          this.lineInputText = new pb(10, this.soundInputText.y + 35, 200, Rf.DEFAULT_TEXT, 8);
          this.blockPressWhileTypingOn.push(this.lineInputText);
          var c = new zb(20, this.lineInputText.y + 25, "Load Dialogue", function () {
            a.loadDialogue();
          });
          var d = new zb(c.x + 120, c.y, "Save Dialogue", function () {
            a.saveDialogue();
          });
          b.add(new R(10, this.speedStepper.y - 18, 0, "Interval/Speed (ms):"));
          b.add(new R(10, this.characterInputText.y - 18, 0, "Character:"));
          b.add(new R(10, this.soundInputText.y - 18, 0, "Sound file name:"));
          b.add(new R(10, this.lineInputText.y - 18, 0, "Text:"));
          b.add(this.characterInputText);
          b.add(this.angryCheckbox);
          b.add(this.speedStepper);
          b.add(this.soundInputText);
          b.add(this.lineInputText);
          b.add(c);
          b.add(d);
          this.UI_box.addGroup(b);
        },
        copyDefaultLine: function () {
          return {
            portrait: this.defaultLine.portrait,
            expression: this.defaultLine.expression,
            text: this.defaultLine.text,
            boxState: this.defaultLine.boxState,
            speed: this.defaultLine.speed,
            sound: ""
          };
        },
        updateTextBox: function () {
          this.box.set_flipX(false);
          var a = this.angryCheckbox.checked;
          var b = a ? "angry" : "normal";
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              b = a ? "center-angry" : "center";
              break;
            case "left":
              this.box.set_flipX(true);
          }
          this.box.animation.play(b, true);
          dc.updateBoxOffsets(this.box);
        },
        reloadCharacter: function () {
          var a = this.character;
          var b = "dialogue/" + this.character.jsonFile.image;
          var c = E.image(b, null, true);
          a.set_frames(Sa.fromSparrow(c, E.getPath("images/" + b + ".xml", null, null)));
          this.character.jsonFile = this.character.jsonFile;
          this.character.reloadAnimations();
          this.character.setGraphicSize(this.character.get_width() * kd.DEFAULT_SCALE * this.character.jsonFile.scale | 0);
          this.character.updateHitbox();
          this.character.set_x(dc.LEFT_CHAR_X);
          this.character.set_y(dc.DEFAULT_CHAR_Y);
          switch (this.character.jsonFile.dialogue_pos) {
            case "center":
              this.character.set_x(g.width / 2);
              a = this.character;
              a.set_x(a.x - this.character.get_width() / 2);
              break;
            case "right":
              this.character.set_x(g.width - this.character.get_width() + dc.RIGHT_CHAR_X);
          }
          a = this.character;
          a.set_x(a.x + this.character.jsonFile.position[0]);
          a = this.character;
          a.set_y(a.y + this.character.jsonFile.position[1]);
          this.character.playAnim();
          this.characterAnimSpeed();
          if (this.character.animation._curAnim != null && this.character.jsonFile.animations != null) {
            this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
          } else {
            this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
          }
        },
        reloadText: function (a) {
          var b = this.lineInputText.text;
          if (b == null || b.length < 1) {
            b = " ";
          }
          this.daText.set_text(b);
          if (a) {
            this.daText.finishText();
          } else if (this.daText.delay > 0) {
            if (this.character.jsonFile.animations.length > this.curAnim && this.character.jsonFile.animations[this.curAnim] != null) {
              this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim);
            }
            this.characterAnimSpeed();
          }
          this.daText.set_y(dc.DEFAULT_TEXT_Y);
          if (this.daText.rows > 2) {
            a = this.daText;
            a.set_y(a.y - dc.LONG_TEXT_ADD);
          }
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof pb) {
            if (b == this.characterInputText) {
              this.character.reloadCharacterJson(this.characterInputText.text);
              this.reloadCharacter();
              if (this.character.jsonFile.animations.length > 0) {
                this.curAnim = 0;
                if (this.character.jsonFile.animations.length > this.curAnim && this.character.jsonFile.animations[this.curAnim] != null) {
                  this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim, this.daText.finishedText);
                  this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                } else {
                  this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
                }
                this.characterAnimSpeed();
              }
              this.dialogueFile.dialogue[this.curSelected].portrait = this.characterInputText.text;
              this.reloadText(false);
              this.updateTextBox();
            } else if (b == this.lineInputText) {
              this.dialogueFile.dialogue[this.curSelected].text = this.lineInputText.text;
              this.daText.set_text(this.lineInputText.text);
              if (this.daText.text == null) {
                this.daText.set_text("");
              }
              this.reloadText(true);
            } else if (b == this.soundInputText) {
              this.daText.finishText();
              this.dialogueFile.dialogue[this.curSelected].sound = this.soundInputText.text;
              this.daText.sound = this.soundInputText.text;
              if (this.daText.sound == null) {
                this.daText.sound = "";
              }
            }
          } else if (a == "change_numeric_stepper" && b == this.speedStepper) {
            this.dialogueFile.dialogue[this.curSelected].speed = this.speedStepper.value;
            if (isNaN(this.dialogueFile.dialogue[this.curSelected].speed) || this.dialogueFile.dialogue[this.curSelected].speed == null || this.dialogueFile.dialogue[this.curSelected].speed < 0.001) {
              this.dialogueFile.dialogue[this.curSelected].speed = 0;
            }
            this.daText.delay = this.dialogueFile.dialogue[this.curSelected].speed;
            this.reloadText(false);
          }
        },
        update: function (a) {
          if (!this.transitioning) {
            if (this.character.animation._curAnim != null) {
              if (this.daText.finishedText) {
                if (this.character.animationIsLoop() && this.character.animation._curAnim.finished) {
                  this.character.playAnim(this.character.animation._curAnim.name, true);
                }
              } else if (this.character.animation._curAnim.finished) {
                this.character.animation._curAnim.restart();
              }
            }
            var b = false;
            for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
              var e = d[c];
              ++c;
              if (e.hasFocus) {
                C.toggleVolumeKeys(false);
                b = true;
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                  if (e == this.lineInputText) {
                    e.set_text(e.text + "\\n");
                    e.set_caretIndex(e.caretIndex + 2);
                  } else {
                    e.set_hasFocus(false);
                  }
                }
                break;
              }
            }
            if (!b) {
              C.toggleVolumeKeys(true);
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(32, c.status)) {
                this.reloadText(false);
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(27, c.status)) {
                P.switchState(new Pf());
                b = g.sound;
                c = E.returnSound("music", "freakyMenu", null);
                b.playMusic(c, 1);
                this.transitioning = true;
              }
              b = [1, -1];
              c = g.keys.justPressed;
              d = c.keyManager.checkStatusUnsafe(87, c.status);
              c = g.keys.justPressed;
              e = [d, c.keyManager.checkStatusUnsafe(83, c.status)];
              c = g.keys.justPressed;
              d = c.keyManager.checkStatusUnsafe(68, c.status);
              c = g.keys.justPressed;
              var f = [d, c.keyManager.checkStatusUnsafe(65, c.status)];
              c = 0;
              for (d = e.length; c < d;) {
                var k = c++;
                if (e[k] && this.character.jsonFile.animations.length > 0) {
                  this.curAnim -= b[k];
                  if (this.curAnim < 0) {
                    this.curAnim = this.character.jsonFile.animations.length - 1;
                  } else if (this.curAnim >= this.character.jsonFile.animations.length) {
                    this.curAnim = 0;
                  }
                  var h = this.character.jsonFile.animations[this.curAnim].anim;
                  if (Object.prototype.hasOwnProperty.call(this.character.dialogueAnimations.h, h)) {
                    this.character.playAnim(h, this.daText.finishedText);
                    this.dialogueFile.dialogue[this.curSelected].expression = h;
                  }
                  this.animText.set_text("Animation: " + h + " (" + (this.curAnim + 1) + " / " + this.character.jsonFile.animations.length + ") - Press W or S to scroll");
                }
                if (f[k]) {
                  this.changeText(b[k]);
                }
              }
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(79, c.status)) {
                L.remove(this.dialogueFile.dialogue, this.dialogueFile.dialogue[this.curSelected]);
                if (this.dialogueFile.dialogue.length < 1) {
                  b = this.copyDefaultLine();
                  this.dialogueFile.dialogue = [b];
                }
                this.changeText();
              } else {
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(80, c.status)) {
                  c = this.dialogueFile.dialogue;
                  b = this.curSelected + 1;
                  d = this.copyDefaultLine();
                  c.splice(b, 0, d);
                  this.changeText(1);
                }
              }
            }
          }
          P.prototype.update.call(this, a);
        },
        changeText: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.dialogueFile.dialogue.length - 1;
          } else if (this.curSelected >= this.dialogueFile.dialogue.length) {
            this.curSelected = 0;
          }
          a = this.dialogueFile.dialogue[this.curSelected];
          this.characterInputText.set_text(a.portrait);
          this.lineInputText.set_text(a.text);
          this.angryCheckbox.set_checked(a.boxState == "angry");
          this.speedStepper.set_value(a.speed);
          if (a.sound == null) {
            a.sound = "";
          }
          this.soundInputText.set_text(a.sound);
          this.daText.delay = this.speedStepper.value;
          this.daText.sound = this.soundInputText.text;
          if (this.daText.sound != null && v.trim(this.daText.sound) == "") {
            this.daText.sound = "dialogue";
          }
          this.curAnim = 0;
          this.character.reloadCharacterJson(this.characterInputText.text);
          this.reloadCharacter();
          this.reloadText(false);
          this.updateTextBox();
          var b = this.character.jsonFile.animations.length;
          if (b > 0) {
            for (var c = 0; c < b;) {
              var d = c++;
              var e = this.character.jsonFile.animations[d];
              if (e != null && e.anim == a.expression) {
                this.curAnim = d;
                break;
              }
            }
            this.character.playAnim(this.character.jsonFile.animations[this.curAnim].anim, this.daText.finishedText);
            this.animText.set_text("Animation: " + this.character.jsonFile.animations[this.curAnim].anim + " (" + (this.curAnim + 1) + " / " + b + ") - Press W or S to scroll");
          } else {
            this.animText.set_text("ERROR! NO ANIMATIONS FOUND");
          }
          this.characterAnimSpeed();
          this.selectedText.set_text("Line: (" + (this.curSelected + 1) + " / " + this.dialogueFile.dialogue.length + ") - Press A or D to scroll");
        },
        characterAnimSpeed: function () {
          if (this.character.animation._curAnim != null) {
            var a = 24 - (this.speedStepper.value - 0.05) / 5 * 480;
            if (a < 12) {
              a = 12;
            } else if (a > 48) {
              a = 48;
            }
            this.character.animation._curAnim.set_frameRate(a);
          }
        },
        loadDialogue: function () {
          var a = new Ki("JSON", "json");
          this._file = new Ge();
          this._file.addEventListener("complete", n(this, this.onLoadComplete));
          this._file.addEventListener("cancel", n(this, this.onLoadCancel));
          this._file.addEventListener("ioError", n(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          Ab.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 469,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          this._file = null;
          Ab.trace("Cancelled file loading.", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 482,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          this._file = null;
          Ab.trace("Problem loading file", {
            fileName: "source/states/editors/DialogueEditorState.hx",
            lineNumber: 494,
            className: "states.editors.DialogueEditorState",
            methodName: "onLoadError"
          });
        },
        saveDialogue: function () {
          var a = JSON.stringify(this.dialogueFile, null, "\t");
          if (a.length > 0) {
            this._file = new Ge();
            this._file.addEventListener("complete", n(this, this.onSaveComplete));
            this._file.addEventListener("cancel", n(this, this.onSaveCancel));
            this._file.addEventListener("ioError", n(this, this.onSaveError));
            this._file.save(a, "dialogue.json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Successfully saved file.", Aa.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Problem saving file", Aa.ERROR, true);
        },
        __class__: Rf
      });
      function en(a) {
        this.lastStepHit = this.lastBeatHit = -1;
        this.guitarHeroSustains = false;
        this.startOffset = this.startPos = this.timerToStart = 0;
        this.showComboNum = this.showRating = true;
        this.showCombo = false;
        this.totalPlayed = this.totalNotesHit = 0;
        this.songSpeed = 1;
        this.songHits = this.songMisses = this.songLength = 0;
        this.keysArray = ["note_left", "note_down", "note_up", "note_right"];
        this.lastScore = [];
        this.combo = 0;
        this.ratingsData = ig.loadDefault();
        this.unspawnNotes = [];
        this.playbackRate = 1;
        this.startingSong = true;
        this.spawnTime = 2000;
        this.noteKillOffset = 350;
        this.finishTimer = null;
        rb.call(this);
        this.playbackRate = a;
        this.startPos = K.songPosition;
        K.safeZoneOffset = C.data.safeFrames / 60 * 1000 * a;
        K.songPosition -= this.startOffset;
        this.timerToStart = this.startOffset = K.crochet;
        if (g.sound.music != null) {
          a = g.sound.music;
          a.cleanup(a.autoDestroy, true);
        }
        this.cachePopUpScore();
        this.guitarHeroSustains = C.data.guitarHeroSustains;
        if (C.data.hitsoundVolume > 0) {
          E.sound("hitsound");
        }
        var b = new G().loadGraphic(E.image("menuDesat"));
        b.set_antialiasing(C.data.antialiasing);
        a = b.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        b.set_color(-15724528);
        b.set_alpha(0.9);
        this.add(b);
        this.strumLineNotes = new ab();
        this.add(this.strumLineNotes);
        this.grpNoteSplashes = new ab();
        this.add(this.grpNoteSplashes);
        a = new gc(100, 100);
        this.grpNoteSplashes.add(a);
        a.set_alpha(0.000001);
        this.opponentStrums = new ab();
        this.playerStrums = new ab();
        this.generateStaticArrows(0);
        this.generateStaticArrows(1);
        this.scoreTxt = new R(10, g.height - 50, g.width - 20, "", 20);
        this.scoreTxt.setFormat("assets/fonts/vcr.ttf", 20, -1, "center", cb.OUTLINE, -16777216);
        a = this.scoreTxt.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.scoreTxt.set_borderSize(1.25);
        this.scoreTxt.set_visible(!C.data.hideHud);
        this.add(this.scoreTxt);
        this.dataTxt = new R(10, 580, g.width - 20, "Section: 0", 20);
        this.dataTxt.setFormat("assets/fonts/vcr.ttf", 20, -1, "center", cb.OUTLINE, -16777216);
        a = this.dataTxt.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.dataTxt.set_borderSize(1.25);
        this.add(this.dataTxt);
        b = new R(10, g.height - 24, 0, "Press ESC to Go Back to Chart Editor", 16);
        b.setFormat("assets/fonts/vcr.ttf", 16, -1, "left", cb.OUTLINE, -16777216);
        b.set_borderSize(2);
        a = b.scrollFactor;
        a.set_x(0);
        a.set_y(0);
        this.add(b);
        g.mouse.set_visible(false);
        this.generateSong(z.SONG.song);
        ia.get_current().stage.addEventListener("keyDown", n(this, this.onKeyPress));
        ia.get_current().stage.addEventListener("keyUp", n(this, this.onKeyRelease));
        this.RecalculateRating();
      }
      h["states.editors.EditorPlayState"] = en;
      en.__name__ = "states.editors.EditorPlayState";
      en.__super__ = rb;
      en.prototype = q(rb.prototype, {
        update: function (a) {
          var b = this;
          if ($a.instance.get_BACK()) {
            var c = true;
          } else {
            c = g.keys.justPressed;
            c = c.keyManager.checkStatusUnsafe(27, c.status);
          }
          if (c) {
            this.endSong();
          } else {
            if (this.startingSong) {
              this.timerToStart -= a * 1000;
              K.songPosition = this.startPos - this.timerToStart;
              if (this.timerToStart < 0) {
                this.startSong();
              }
            } else {
              K.songPosition += a * 1000 * this.playbackRate;
            }
            if (this.unspawnNotes[0] != null) {
              c = this.spawnTime * this.playbackRate;
              if (this.songSpeed < 1) {
                c /= this.songSpeed;
              }
              if (this.unspawnNotes[0].multSpeed < 1) {
                c /= this.unspawnNotes[0].multSpeed;
              }
              while (this.unspawnNotes.length > 0 && this.unspawnNotes[0].strumTime - K.songPosition < c) {
                var d = this.unspawnNotes[0];
                this.notes.insert(0, d);
                d.spawned = true;
                d = this.unspawnNotes.indexOf(d);
                this.unspawnNotes.splice(d, 1);
              }
            }
            this.keysCheck();
            if (this.notes.length > 0) {
              var e = 60 / z.SONG.bpm * 1000;
              this.notes.forEachAlive(function (a) {
                var c = b.playerStrums;
                if (!a.mustPress) {
                  c = b.opponentStrums;
                }
                c = c.members[a.noteData];
                a.followStrumNote(c, e, b.songSpeed / b.playbackRate);
                if (!a.mustPress && !!a.wasGoodHit && !a.hitByOpponent && !a.ignoreNote) {
                  b.opponentNoteHit(a);
                }
                if (a.isSustainNote && c.sustainReduce) {
                  a.clipToStrumNote(c);
                }
                if (K.songPosition - a.strumTime > b.noteKillOffset) {
                  if (!!a.mustPress && !a.ignoreNote && (!!a.tooLate || !a.wasGoodHit)) {
                    b.noteMiss(a);
                  }
                  a.set_active(a.set_visible(false));
                  b.invalidateNote(a);
                }
              });
            }
            c = eg.floorDecimal((K.songPosition - C.data.noteOffset) / 1000, 1);
            this.dataTxt.set_text("Time: " + c + " / " + this.songLength / 1000 + "\n\t\t\t\t\t\t\nSection: " + this.curSection + "\n\t\t\t\t\t\t\nBeat: " + this.curBeat + "\n\t\t\t\t\t\t\nStep: " + this.curStep);
          }
          rb.prototype.update.call(this, a);
        },
        stepHit: function () {
          if (z.SONG.needsVoices && g.sound.music._time >= -C.data.noteOffset) {
            var a = K.songPosition - K.offset;
            var b = this.playbackRate * 20;
            if (Math.abs(g.sound.music._time - a) > b || this.vocals._length > 0 && Math.abs(this.vocals._time - a) > b || this.opponentVocals._length > 0 && Math.abs(this.opponentVocals._time - a) > b) {
              this.resyncVocals();
            }
          }
          rb.prototype.stepHit.call(this);
          if (this.curStep != this.lastStepHit) {
            this.lastStepHit = this.curStep;
          }
        },
        beatHit: function () {
          if (!(this.lastBeatHit >= this.curBeat)) {
            var a = C.data.downScroll ? -1 : 1;
            if (a == null) {
              a = -1;
            }
            var b = eo.byY;
            var c = a;
            this.notes.members.sort(function (a, e) {
              return b(c, a, e);
            });
            rb.prototype.beatHit.call(this);
            this.lastBeatHit = this.curBeat;
          }
        },
        sectionHit: function () {
          if (z.SONG.notes[this.curSection] != null && z.SONG.notes[this.curSection].changeBPM) {
            K.set_bpm(z.SONG.notes[this.curSection].bpm);
          }
          rb.prototype.sectionHit.call(this);
        },
        destroy: function () {
          ia.get_current().stage.removeEventListener("keyDown", n(this, this.onKeyPress));
          ia.get_current().stage.removeEventListener("keyUp", n(this, this.onKeyRelease));
          g.mouse.set_visible(true);
          rb.prototype.destroy.call(this);
        },
        startSong: function () {
          this.startingSong = false;
          g.sound.playMusic(this.inst._sound, 1, false);
          g.sound.music.set_time(this.startPos);
          g.sound.music.set_pitch(this.playbackRate);
          g.sound.music.onComplete = n(this, this.finishSong);
          this.vocals.set_volume(1);
          this.vocals.set_time(this.startPos);
          this.vocals.play();
          this.opponentVocals.set_volume(1);
          this.opponentVocals.set_time(this.startPos);
          this.opponentVocals.play();
          this.songLength = g.sound.music._length;
        },
        generateSong: function (a) {
          this.songSpeed = z.SONG.speed;
          a = C.defaultData.gameplaySettings.h.scrolltype;
          switch (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrolltype") ? C.data.gameplaySettings.h.scrolltype : a) {
            case "constant":
              a = C.defaultData.gameplaySettings.h.scrollspeed;
              this.songSpeed = Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : a;
              break;
            case "multiplicative":
              a = C.defaultData.gameplaySettings.h.scrollspeed;
              this.songSpeed = z.SONG.speed * (Object.prototype.hasOwnProperty.call(C.data.gameplaySettings.h, "scrollspeed") ? C.data.gameplaySettings.h.scrollspeed : a);
          }
          this.noteKillOffset = Math.max(K.stepCrochet, 350 / this.songSpeed * this.playbackRate);
          a = z.SONG;
          K.set_bpm(a.bpm);
          this.loadCharacterFile(z.SONG.player1);
          this.loadCharacterFile(z.SONG.player2);
          this.vocals = new Yd();
          this.opponentVocals = new Yd();
          try {
            if (a.needsVoices) {
              var b = "songs:assets/songs/" + v.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              this.vocals.loadEmbedded(b ?? "songs:assets/songs/" + v.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3");
              var c = "songs:assets/songs/" + v.replace(a.song.toLowerCase(), " ", "-") + "/Voices.mp3";
              if (c != null) {
                this.opponentVocals.loadEmbedded(c);
              }
            }
          } catch (ta) {
            Oa.lastError = ta;
          }
          this.vocals.set_volume(0);
          this.opponentVocals.set_volume(0);
          this.vocals.set_pitch(this.playbackRate);
          this.opponentVocals.set_pitch(this.playbackRate);
          g.sound.list.add(this.vocals);
          g.sound.list.add(this.opponentVocals);
          this.inst = new Yd().loadEmbedded("songs:assets/songs/" + v.replace(a.song.toLowerCase(), " ", "-") + "/Inst.mp3");
          g.sound.list.add(this.inst);
          g.sound.music.set_volume(0);
          this.notes = new ab();
          this.add(this.notes);
          b = a.notes;
          for (c = 0; c < b.length;) {
            a = b[c];
            ++c;
            for (var d = 0, e = a.sectionNotes; d < e.length;) {
              var f = e[d];
              ++d;
              var k = f[0];
              if (!(k < this.startPos)) {
                var h = f[1] % 4 | 0;
                var l = a.mustHitSection;
                if (f[1] > 3) {
                  l = !a.mustHitSection;
                }
                var p = this.unspawnNotes.length > 0 ? this.unspawnNotes[this.unspawnNotes.length - 1 | 0] : null;
                var n = new Ta(k, h, p, null, null, this);
                n.mustPress = l;
                n.sustainLength = f[2];
                n.set_noteType(f[3]);
                if (typeof f[3] != "string") {
                  n.set_noteType(ea.noteTypeList[f[3]]);
                }
                p = n.scrollFactor;
                p.set_x(0);
                p.set_y(0);
                this.unspawnNotes.push(n);
                p = Math.floor(n.sustainLength / K.stepCrochet);
                if (p > 0) {
                  f = 0;
                  for (var m = p + 1; f < m;) {
                    var r = f++;
                    p = this.unspawnNotes[this.unspawnNotes.length - 1 | 0];
                    r = new Ta(k + K.stepCrochet * r, h, p, true, null, this);
                    r.mustPress = l;
                    r.set_noteType(n.noteType);
                    var q = r.scrollFactor;
                    q.set_x(0);
                    q.set_y(0);
                    r.parent = n;
                    this.unspawnNotes.push(r);
                    n.tail.push(r);
                    r.correctionOffset = n.get_height() / 2;
                    if (z.get_isPixelStage()) {
                      if (p.isSustainNote) {
                        p.scale.set_y(p.scale.y / this.playbackRate);
                        p.updateHitbox();
                      }
                    } else {
                      if (p.isSustainNote) {
                        p.scale.set_y(Ta.SUSTAIN_SIZE / p.frameHeight * p.scale.y);
                        p.scale.set_y(p.scale.y / this.playbackRate);
                        p.updateHitbox();
                      }
                      if (C.data.downScroll) {
                        r.correctionOffset = 0;
                      }
                    }
                    if (r.mustPress) {
                      r.set_x(r.x + g.width / 2);
                    } else if (C.data.middleScroll) {
                      r.set_x(r.x + 310);
                      if (h > 1) {
                        r.set_x(r.x + (g.width / 2 + 25));
                      }
                    }
                  }
                }
                if (n.mustPress) {
                  n.set_x(n.x + g.width / 2);
                } else if (C.data.middleScroll) {
                  n.set_x(n.x + 310);
                  if (h > 1) {
                    n.set_x(n.x + (g.width / 2 + 25));
                  }
                }
              }
            }
          }
          this.unspawnNotes.sort(z.sortByTime);
        },
        generateStaticArrows: function (a) {
          var b = C.data.middleScroll ? z.STRUM_X_MIDDLESCROLL : z.STRUM_X;
          var c = C.data.downScroll ? g.height - 150 : 50;
          for (var d = 0; d < 4;) {
            var e = d++;
            var f = 1;
            if (a < 1) {
              if (C.data.opponentStrums) {
                if (C.data.middleScroll) {
                  f = 0.35;
                }
              } else {
                f = 0;
              }
            }
            var k = new ah(b, c, e, a);
            k.downScroll = C.data.downScroll;
            k.set_alpha(f);
            if (a == 1) {
              this.playerStrums.add(k);
            } else {
              if (C.data.middleScroll) {
                k.set_x(k.x + 310);
                if (e > 1) {
                  k.set_x(k.x + (g.width / 2 + 25));
                }
              }
              this.opponentStrums.add(k);
            }
            this.strumLineNotes.add(k);
            k.postAddedToGroup();
          }
        },
        finishSong: function () {
          var a = this;
          if (C.data.noteOffset <= 0) {
            this.endSong();
          } else {
            this.finishTimer = new Gc().start(C.data.noteOffset / 1000, function (b) {
              a.endSong();
            });
          }
        },
        endSong: function () {
          this.vocals.pause();
          this.vocals.destroy();
          this.opponentVocals.pause();
          this.opponentVocals.destroy();
          if (this.finishTimer != null) {
            this.finishTimer.cancel();
            this.finishTimer.destroy();
          }
          this.close();
        },
        cachePopUpScore: function () {
          for (var a = 0, b = this.ratingsData; a < b.length;) {
            var c = b[a];
            ++a;
            E.image(c.image);
          }
          E.image("num0");
          E.image("num1");
          E.image("num2");
          E.image("num3");
          E.image("num4");
          E.image("num5");
          E.image("num6");
          E.image("num7");
          E.image("num8");
          E.image("num9");
        },
        popUpScore: function (a) {
          var b = Math.abs(a.strumTime - K.songPosition + C.data.ratingOffset);
          this.vocals.set_volume(1);
          var c = y.string(this.combo);
          var d = new R(0, 0, 0, c, 32);
          d.set_x((g.width - d.get_width()) / 2);
          d.set_y((g.height - d.get_height()) / 2);
          d.set_x(g.width * 0.35);
          var e = new G();
          b = K.judgeNote(this.ratingsData, b / this.playbackRate);
          this.totalNotesHit += b.ratingMod;
          a.ratingMod = b.ratingMod;
          if (!a.ratingDisabled) {
            b.hits++;
          }
          a.rating = b.name;
          if (b.noteSplash && !a.noteSplashData.disabled) {
            this.spawnNoteSplashOnNote(a);
          }
          if (!a.ratingDisabled) {
            this.songHits++;
            this.totalPlayed++;
            this.RecalculateRating(false);
          }
          e.loadGraphic(E.image("" + b.image));
          e.set_x((g.width - e.get_width()) / 2);
          e.set_y((g.height - e.get_height()) / 2);
          e.set_x(d.x - 40);
          e.set_y(e.y - 60);
          e.acceleration.set_y(this.playbackRate * 550 * this.playbackRate);
          e.velocity.set_y(e.velocity.y - g.random.int(140, 175) * this.playbackRate);
          e.velocity.set_x(e.velocity.x - g.random.int(0, 10) * this.playbackRate);
          e.set_visible(!C.data.hideHud && this.showRating);
          e.set_x(e.x + C.data.comboOffset[0]);
          e.set_y(e.y - C.data.comboOffset[1]);
          var f = new G().loadGraphic(E.image("combo"));
          f.set_x((g.width - f.get_width()) / 2);
          f.set_y((g.height - f.get_height()) / 2);
          f.set_x(d.x);
          f.acceleration.set_y(g.random.int(200, 300) * this.playbackRate * this.playbackRate);
          f.velocity.set_y(f.velocity.y - g.random.int(140, 160) * this.playbackRate);
          f.set_visible(!C.data.hideHud && this.showCombo);
          f.set_x(f.x + C.data.comboOffset[0]);
          f.set_y(f.y - C.data.comboOffset[1]);
          f.set_y(f.y + 60);
          f.velocity.set_x(f.velocity.x + g.random.int(1, 10) * this.playbackRate);
          this.insert(this.members.indexOf(this.strumLineNotes), e);
          if (!C.data.comboStacking) {
            if (this.lastRating != null) {
              this.lastRating.kill();
            }
            this.lastRating = e;
          }
          e.setGraphicSize(e.get_width() * 0.7 | 0);
          e.updateHitbox();
          f.setGraphicSize(f.get_width() * 0.7 | 0);
          f.updateHitbox();
          a = [];
          if (this.combo >= 1000) {
            a.push(Math.floor(this.combo / 1000) % 10);
          }
          a.push(Math.floor(this.combo / 100) % 10);
          a.push(Math.floor(this.combo / 10) % 10);
          a.push(this.combo % 10);
          c = b = 0;
          if (this.showCombo) {
            this.insert(this.members.indexOf(this.strumLineNotes), f);
          }
          if (!C.data.comboStacking) {
            if (this.lastCombo != null) {
              this.lastCombo.kill();
            }
            this.lastCombo = f;
          }
          if (this.lastScore != null) {
            while (this.lastScore.length > 0) {
              this.lastScore[0].kill();
              L.remove(this.lastScore, this.lastScore[0]);
            }
          }
          for (var k = 0; k < a.length;) {
            var h = a[k];
            ++k;
            h = [new G().loadGraphic(E.image("num" + (h | 0)))];
            h[0].set_x((g.width - h[0].get_width()) / 2);
            h[0].set_y((g.height - h[0].get_height()) / 2);
            h[0].set_x(d.x + b * 43 - 90 + C.data.comboOffset[2]);
            h[0].set_y(h[0].y + (80 - C.data.comboOffset[3]));
            if (!C.data.comboStacking) {
              this.lastScore.push(h[0]);
            }
            h[0].setGraphicSize(h[0].get_width() * 0.5 | 0);
            h[0].updateHitbox();
            h[0].acceleration.set_y(g.random.int(200, 300) * this.playbackRate * this.playbackRate);
            h[0].velocity.set_y(h[0].velocity.y - g.random.int(140, 160) * this.playbackRate);
            h[0].velocity.set_x(g.random.float(-5, 5) * this.playbackRate);
            h[0].set_visible(!C.data.hideHud);
            if (this.showComboNum) {
              this.insert(this.members.indexOf(this.strumLineNotes), h[0]);
            }
            var l = K.crochet * 0.002;
            Ha.tween(h[0], {
              alpha: 0
            }, 0.2 / this.playbackRate, {
              onComplete: function (a) {
                return function (b) {
                  a[0].destroy();
                };
              }(h),
              startDelay: l / this.playbackRate
            });
            ++b;
            if (h[0].x > c) {
              c = h[0].x;
            }
          }
          f.set_x(c + 50);
          d.set_text(y.string(a));
          Ha.tween(e, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            startDelay: K.crochet * 0.001 / this.playbackRate
          });
          Ha.tween(f, {
            alpha: 0
          }, 0.2 / this.playbackRate, {
            onComplete: function (a) {
              d.destroy();
              f.destroy();
              e.destroy();
            },
            startDelay: K.crochet * 0.002 / this.playbackRate
          });
        },
        onKeyPress: function (a) {
          a = a.keyCode;
          var b = z.getKeyFromEvent(this.keysArray, a);
          if (!$a.instance.controllerMode) {
            if (g.keys.checkStatus(a, 2)) {
              this.keyPressed(b);
            }
          }
        },
        keyPressed: function (a) {
          if (!(a < 0)) {
            var b = K.songPosition;
            if (K.songPosition >= 0) {
              K.songPosition = g.sound.music._time;
            }
            var c = [];
            for (var d = 0, e = this.notes.members; d < e.length;) {
              var f = e[d];
              ++d;
              if (f != null && !!f.canBeHit && !!f.mustPress && !f.tooLate && !f.wasGoodHit && !f.blockHit && !f.isSustainNote && f.noteData == a) {
                c.push(f);
              }
            }
            c.sort(z.sortHitNotes);
            if (c.length != 0) {
              d = c[0];
              if (c.length > 1) {
                c = c[1];
                if (c.noteData == d.noteData) {
                  if (Math.abs(c.strumTime - d.strumTime) < 1) {
                    this.invalidateNote(c);
                  } else if (c.strumTime < d.strumTime) {
                    d = c;
                  }
                }
              }
              this.goodNoteHit(d);
            }
            K.songPosition = b;
            a = this.playerStrums.members[a];
            if (a != null && a.animation._curAnim.name != "confirm") {
              a.playAnim("pressed");
              a.resetAnim = 0;
            }
          }
        },
        onKeyRelease: function (a) {
          a = z.getKeyFromEvent(this.keysArray, a.keyCode);
          if (!$a.instance.controllerMode && a > -1) {
            this.keyReleased(a);
          }
        },
        keyReleased: function (a) {
          a = this.playerStrums.members[a];
          if (a != null) {
            a.playAnim("static");
            a.resetAnim = 0;
          }
        },
        keysCheck: function () {
          var a = [];
          var b = [];
          var c = [];
          for (var d = 0, e = this.keysArray; d < e.length;) {
            var f = e[d];
            ++d;
            a.push($a.instance.pressed(f));
            if ($a.instance.controllerMode) {
              b.push($a.instance.justPressed(f));
              c.push($a.instance.justReleased(f));
            }
          }
          if ($a.instance.controllerMode && b.indexOf(true) != -1) {
            d = 0;
            e = b.length;
            while (d < e) {
              f = d++;
              if (b[f]) {
                this.keyPressed(f);
              }
            }
          }
          if (this.notes.length > 0) {
            for (b = new Cc(this.notes.members, null); b.hasNext();) {
              d = b.next();
              e = d != null && d.canBeHit && d.mustPress && !d.tooLate && !d.wasGoodHit && !d.blockHit;
              if (this.guitarHeroSustains) {
                e = e && d.parent != null && d.parent.wasGoodHit;
              }
              if (e && d.isSustainNote && a[d.noteData]) {
                this.goodNoteHit(d);
              }
            }
          }
          if ($a.instance.controllerMode && c.indexOf(true) != -1) {
            d = 0;
            e = c.length;
            while (d < e) {
              f = d++;
              if (c[f]) {
                this.keyReleased(f);
              }
            }
          }
        },
        opponentNoteHit: function (a) {
          if (z.SONG.needsVoices && this.opponentVocals._length <= 0) {
            this.vocals.set_volume(1);
          }
          var b = this.opponentStrums.members[Math.abs(a.noteData) | 0];
          if (b != null) {
            b.playAnim("confirm", true);
            b.resetAnim = K.stepCrochet * 1.25 / 1000 / this.playbackRate;
          }
          a.hitByOpponent = true;
          if (!a.isSustainNote) {
            this.invalidateNote(a);
          }
        },
        goodNoteHit: function (a) {
          if (!a.wasGoodHit) {
            a.wasGoodHit = true;
            if (C.data.hitsoundVolume > 0 && !a.hitsoundDisabled) {
              g.sound.play(E.sound("hitsound"), C.data.hitsoundVolume);
            }
            if (a.hitCausesMiss) {
              this.noteMiss(a);
              if (!a.noteSplashData.disabled && !a.isSustainNote) {
                this.spawnNoteSplashOnNote(a);
              }
            } else {
              if (!a.isSustainNote) {
                this.combo++;
                if (this.combo > 9999) {
                  this.combo = 9999;
                }
                this.popUpScore(a);
              }
              var b = this.playerStrums.members[a.noteData];
              if (b != null) {
                b.playAnim("confirm", true);
              }
              this.vocals.set_volume(1);
            }
            if (!a.isSustainNote) {
              this.invalidateNote(a);
            }
          }
        },
        noteMiss: function (a) {
          var b = this;
          this.notes.forEachAlive(function (c) {
            if (a != c && a.mustPress && a.noteData == c.noteData && a.isSustainNote == c.isSustainNote && Math.abs(a.strumTime - c.strumTime) < 1) {
              b.invalidateNote(a);
            }
          });
          if (a != null && this.guitarHeroSustains && a.parent == null) {
            if (a.tail.length > 0) {
              a.set_alpha(0.35);
              for (var c = 0, d = a.tail; c < d.length;) {
                var e = d[c];
                ++c;
                e.set_alpha(a.alpha);
                e.missed = true;
                e.canBeHit = false;
                e.ignoreNote = true;
                e.tooLate = true;
              }
              a.missed = true;
              a.canBeHit = false;
            }
            if (a.missed) {
              return;
            }
          }
          if (a != null && this.guitarHeroSustains && a.parent != null && a.isSustainNote) {
            if (a.missed) {
              return;
            }
            d = a.parent;
            if (d.wasGoodHit && d.tail.length > 0) {
              c = 0;
              d = d.tail;
              while (c < d.length) {
                e = d[c];
                ++c;
                if (e != a) {
                  e.missed = true;
                  e.canBeHit = false;
                  e.ignoreNote = true;
                  e.tooLate = true;
                }
              }
            }
          }
          this.songMisses++;
          this.totalPlayed++;
          this.RecalculateRating(true);
          this.vocals.set_volume(0);
          this.combo = 0;
        },
        invalidateNote: function (a) {
          a.kill();
          this.notes.remove(a, true);
          a.destroy();
        },
        spawnNoteSplashOnNote: function (a) {
          if (a != null) {
            var b = this.playerStrums.members[a.noteData];
            if (b != null) {
              this.spawnNoteSplash(b.x, b.y, a.noteData, a);
            }
          }
        },
        spawnNoteSplash: function (a, b, c, d) {
          var e = this.grpNoteSplashes.recycle(gc);
          e.setupNoteSplash(a, b, c, d);
          this.grpNoteSplashes.add(e);
        },
        resyncVocals: function () {
          if (this.finishTimer == null) {
            g.sound.music.play();
            g.sound.music.set_pitch(this.playbackRate);
            K.songPosition = g.sound.music._time;
            if (K.songPosition <= this.vocals._length) {
              this.vocals.set_time(K.songPosition);
              this.vocals.set_pitch(this.playbackRate);
            }
            if (K.songPosition <= this.opponentVocals._length) {
              this.opponentVocals.set_time(K.songPosition);
              this.opponentVocals.set_pitch(this.playbackRate);
            }
            this.vocals.play();
            this.opponentVocals.play();
          }
        },
        RecalculateRating: function (a) {
          if (a == null) {
            a = false;
          }
          if (this.totalPlayed != 0) {
            this.ratingPercent = Math.min(1, Math.max(0, this.totalNotesHit / this.totalPlayed));
          }
          this.fullComboUpdate();
          this.updateScore(a);
        },
        updateScore: function (a) {
          a = "?";
          if (this.totalPlayed != 0) {
            a = "" + eg.floorDecimal(this.ratingPercent * 100, 2) + "% - " + this.ratingFC;
          }
          this.scoreTxt.set_text("Hits: " + this.songHits + " | Misses: " + this.songMisses + " | Rating: " + a);
        },
        fullComboUpdate: function () {
          var a = this.ratingsData[0].hits;
          var b = this.ratingsData[1].hits;
          var c = this.ratingsData[2].hits;
          var d = this.ratingsData[3].hits;
          this.ratingFC = "Clear";
          if (this.songMisses < 1) {
            if (c > 0 || d > 0) {
              this.ratingFC = "FC";
            } else if (b > 0) {
              this.ratingFC = "GFC";
            } else if (a > 0) {
              this.ratingFC = "SFC";
            }
          } else if (this.songMisses < 10) {
            this.ratingFC = "SDCB";
          }
        },
        loadCharacterFile: function (a) {
          a = "characters/" + a + ".json";
          if (a == null) {
            a = "";
          }
          a = "assets/shared/" + a;
          if (!U.exists(a)) {
            a = "characters/" + ad.DEFAULT_CHARACTER + ".json";
            if (a == null) {
              a = "";
            }
            a = "assets/shared/" + a;
          }
          a = U.getText(a);
          return JSON.parse(a);
        },
        __class__: en
      });
      function Pf(a, b) {
        this.curSelected = this.curDirectory = 0;
        this.directories = [null];
        this.options = "Chart Editor;Character Editor;Week Editor;Menu Character Editor;Dialogue Editor;Dialogue Portrait Editor;Note Splash Debug".split(";");
        P.call(this, a, b);
      }
      h["states.editors.MasterEditorMenu"] = Pf;
      Pf.__name__ = "states.editors.MasterEditorMenu";
      Pf.__super__ = P;
      Pf.prototype = q(P.prototype, {
        create: function () {
          g.camera.bgColor = -16777216;
          var a = new G().loadGraphic(E.image("menuDesat"));
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          a.set_color(-13290187);
          this.add(a);
          this.grpTexts = new ab();
          this.add(this.grpTexts);
          a = 0;
          for (b = this.options.length; a < b;) {
            var c = a++;
            var d = new bc(90, 320, this.options[c], true);
            d.isMenuItem = true;
            d.targetY = c;
            this.grpTexts.add(d);
            d.snapToPosition();
          }
          this.changeSelection();
          g.mouse.set_visible(false);
          P.prototype.create.call(this);
        },
        update: function (a) {
          if (this.get_controls().get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if (this.get_controls().get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if (this.get_controls().get_BACK()) {
            P.switchState(new vd());
          }
          if (this.get_controls().get_ACCEPT()) {
            switch (this.options[this.curSelected]) {
              case "Character Editor":
                P.switchState(tc.getNextState(new gk(ad.DEFAULT_CHARACTER, false), false));
                break;
              case "Chart Editor":
                var b = new ea();
                var c = false;
                if (c == null) {
                  c = false;
                }
                P.switchState(tc.getNextState(b, c));
                break;
              case "Dialogue Editor":
                b = new Rf();
                c = false;
                if (c == null) {
                  c = false;
                }
                P.switchState(tc.getNextState(b, c));
                break;
              case "Dialogue Portrait Editor":
                b = new Qf();
                c = false;
                if (c == null) {
                  c = false;
                }
                P.switchState(tc.getNextState(b, c));
                break;
              case "Menu Character Editor":
                P.switchState(new fn());
                break;
              case "Note Splash Debug":
                P.switchState(new hh());
                break;
              case "Week Editor":
                P.switchState(new Ja());
            }
            g.sound.music.set_volume(0);
            Va.destroyFreeplayVocals();
          }
          c = b = 0;
          for (var d = this.grpTexts.members; c < d.length;) {
            var e = d[c];
            ++c;
            e.targetY = b - this.curSelected;
            ++b;
            e.set_alpha(0.6);
            if (e.targetY == 0) {
              e.set_alpha(1);
            }
          }
          P.prototype.update.call(this, a);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          g.sound.play(E.sound("scrollMenu"), 0.4);
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.options.length - 1;
          }
          if (this.curSelected >= this.options.length) {
            this.curSelected = 0;
          }
        },
        __class__: Pf
      });
      function fn(a, b) {
        this._file = null;
        this.curTypeSelected = 0;
        this.blockPressWhileTypingOn = [];
        this.defaultCharacters = ["dad", "bf", "gf"];
        this.characterFile = null;
        P.call(this, a, b);
      }
      h["states.editors.MenuCharacterEditorState"] = fn;
      fn.__name__ = "states.editors.MenuCharacterEditorState";
      fn.__super__ = P;
      fn.prototype = q(P.prototype, {
        create: function () {
          this.characterFile = {
            image: "Menu_Dad",
            scale: 1,
            position: [0, 0],
            idle_anim: "M Dad Idle",
            confirm_anim: "M Dad Idle",
            flipX: false
          };
          this.grpWeekCharacters = new ab();
          var a = new qe(g.width * 0.25 - 150, this.defaultCharacters[0]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          a = new qe(g.width * 0.5 - 150, this.defaultCharacters[1]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          a = new qe(g.width * 0.75 - 150, this.defaultCharacters[2]);
          a.set_y(a.y + 70);
          a.set_alpha(0.2);
          this.grpWeekCharacters.add(a);
          this.add(new G(0, 56).makeGraphic(g.width, 386, -405679));
          this.add(this.grpWeekCharacters);
          this.txtOffsets = new R(20, 10, 0, "[0, 0]", 32);
          this.txtOffsets.setFormat("assets/fonts/vcr.ttf", 32, -1, "center");
          this.txtOffsets.set_alpha(0.7);
          this.add(this.txtOffsets);
          a = new R(0, 540, g.width, "Arrow Keys - Change Offset (Hold shift for 10x speed)\n\t\t\t\nSpace - Play \"Start Press\" animation (Boyfriend Character Type)", 16);
          a.setFormat("assets/fonts/vcr.ttf", 16, -1, "center");
          var b = a.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(a);
          this.addEditorBox();
          g.mouse.set_visible(true);
          this.updateCharTypeBox();
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          var b = [{
            name: "Character Type",
            label: "Character Type"
          }];
          this.UI_typebox = new ie(null, null, b, null, true);
          this.UI_typebox.resize(120, 180);
          this.UI_typebox.set_x(100);
          this.UI_typebox.set_y(g.height - this.UI_typebox.get_height() - 50);
          b = this.UI_typebox.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addTypeUI();
          this.add(this.UI_typebox);
          b = [{
            name: "Character",
            label: "Character"
          }];
          this.UI_mainbox = new ie(null, null, b, null, true);
          this.UI_mainbox.resize(240, 180);
          this.UI_mainbox.set_x(g.width - this.UI_mainbox.get_width() - 100);
          this.UI_mainbox.set_y(g.height - this.UI_mainbox.get_height() - 50);
          b = this.UI_mainbox.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addCharacterUI();
          this.add(this.UI_mainbox);
          var c = new zb(0, 480, "Load Character", function () {
            a.loadCharacter();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 60);
          this.add(c);
          c = new zb(0, 480, "Save Character", function () {
            a.saveCharacter();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 60);
          this.add(c);
        },
        addTypeUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_typebox);
          b.name = "Character Type";
          this.opponentCheckbox = new Bb(10, 20, null, null, "Opponent", 100);
          this.opponentCheckbox.callback = function () {
            a.curTypeSelected = 0;
            a.updateCharTypeBox();
          };
          this.boyfriendCheckbox = new Bb(this.opponentCheckbox.x, this.opponentCheckbox.y + 40, null, null, "Boyfriend", 100);
          this.boyfriendCheckbox.callback = function () {
            a.curTypeSelected = 1;
            a.updateCharTypeBox();
          };
          this.girlfriendCheckbox = new Bb(this.boyfriendCheckbox.x, this.boyfriendCheckbox.y + 40, null, null, "Girlfriend", 100);
          this.girlfriendCheckbox.callback = function () {
            a.curTypeSelected = 2;
            a.updateCharTypeBox();
          };
          b.add(this.opponentCheckbox);
          b.add(this.boyfriendCheckbox);
          b.add(this.girlfriendCheckbox);
          this.UI_typebox.addGroup(b);
        },
        addCharacterUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_mainbox);
          b.name = "Character";
          this.imageInputText = new pb(10, 20, 80, this.characterFile.image, 8);
          this.blockPressWhileTypingOn.push(this.imageInputText);
          this.idleInputText = new pb(10, this.imageInputText.y + 35, 100, this.characterFile.idle_anim, 8);
          this.blockPressWhileTypingOn.push(this.idleInputText);
          this.confirmInputText = new pb(10, this.idleInputText.y + 35, 100, this.characterFile.confirm_anim, 8);
          this.blockPressWhileTypingOn.push(this.confirmInputText);
          this.flipXCheckbox = new Bb(10, this.confirmInputText.y + 30, null, null, "Flip X", 100);
          this.flipXCheckbox.callback = function () {
            a.grpWeekCharacters.members[a.curTypeSelected].set_flipX(a.flipXCheckbox.checked);
            a.characterFile.flipX = a.flipXCheckbox.checked;
          };
          var c = new zb(140, this.confirmInputText.y + 30, "Reload Char", function () {
            a.reloadSelectedCharacter();
          });
          this.scaleStepper = new Lb(140, this.imageInputText.y, 0.05, 1, 0.1, 30, 2);
          var d = new R(10, this.confirmInputText.y - 18, 0, "Start Press animation on the .XML:");
          b.add(new R(10, this.imageInputText.y - 18, 0, "Image file name:"));
          b.add(new R(10, this.idleInputText.y - 18, 0, "Idle animation on the .XML:"));
          b.add(new R(this.scaleStepper.x, this.scaleStepper.y - 18, 0, "Scale:"));
          b.add(this.flipXCheckbox);
          b.add(c);
          b.add(d);
          b.add(this.imageInputText);
          b.add(this.idleInputText);
          b.add(this.confirmInputText);
          b.add(this.scaleStepper);
          this.UI_mainbox.addGroup(b);
        },
        updateCharTypeBox: function () {
          this.opponentCheckbox.set_checked(false);
          this.boyfriendCheckbox.set_checked(false);
          this.girlfriendCheckbox.set_checked(false);
          switch (this.curTypeSelected) {
            case 0:
              this.opponentCheckbox.set_checked(true);
              break;
            case 1:
              this.boyfriendCheckbox.set_checked(true);
              break;
            case 2:
              this.girlfriendCheckbox.set_checked(true);
          }
          this.updateCharacters();
        },
        updateCharacters: function () {
          var a = this.grpWeekCharacters.members[0];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[0]);
          a = this.grpWeekCharacters.members[1];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[1]);
          a = this.grpWeekCharacters.members[2];
          a.set_alpha(0.2);
          a.character = "";
          a.changeCharacter(this.defaultCharacters[2]);
          this.reloadSelectedCharacter();
        },
        reloadSelectedCharacter: function () {
          var a = this.grpWeekCharacters.members[this.curTypeSelected];
          a.set_alpha(1);
          var b = "menucharacters/" + this.characterFile.image;
          var c = E.image(b, null, true);
          a.set_frames(Sa.fromSparrow(c, E.getPath("images/" + b + ".xml", null, null)));
          a.animation.addByPrefix("idle", this.characterFile.idle_anim, 24);
          if (this.curTypeSelected == 1) {
            a.animation.addByPrefix("confirm", this.characterFile.confirm_anim, 24, false);
          }
          a.set_flipX(this.characterFile.flipX == 1);
          b = a.scale;
          var d = c = this.characterFile.scale;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a.updateHitbox();
          a.animation.play("idle");
          this.updateOffset();
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof pb) {
            if (b == this.imageInputText) {
              this.characterFile.image = this.imageInputText.text;
            } else if (b == this.idleInputText) {
              this.characterFile.idle_anim = this.idleInputText.text;
            } else if (b == this.confirmInputText) {
              this.characterFile.confirm_anim = this.confirmInputText.text;
            }
          } else if (a == "change_numeric_stepper" && b instanceof Lb && b == this.scaleStepper) {
            this.characterFile.scale = this.scaleStepper.value;
            this.reloadSelectedCharacter();
          }
        },
        update: function (a) {
          var b = false;
          for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.hasFocus) {
              C.toggleVolumeKeys(false);
              b = true;
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                e.set_hasFocus(false);
              }
              break;
            }
          }
          if (!b) {
            C.toggleVolumeKeys(true);
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              P.switchState(new Pf());
              b = g.sound;
              e = E.returnSound("music", "freakyMenu", null);
              b.playMusic(e);
            }
            b = 1;
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(16, c.status)) {
              b = 10;
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(37, c.status)) {
              this.characterFile.position[0] += b;
              this.updateOffset();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(39, c.status)) {
              this.characterFile.position[0] -= b;
              this.updateOffset();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(38, c.status)) {
              this.characterFile.position[1] += b;
              this.updateOffset();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(40, c.status)) {
              this.characterFile.position[1] -= b;
              this.updateOffset();
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status) && this.curTypeSelected == 1) {
              this.grpWeekCharacters.members[this.curTypeSelected].animation.play("confirm", true);
            }
          }
          b = this.grpWeekCharacters.members[1];
          if (b.animation._curAnim != null && b.animation._curAnim.name == "confirm" && b.animation._curAnim.finished) {
            b.animation.play("idle", true);
          }
          P.prototype.update.call(this, a);
        },
        updateOffset: function () {
          var a = this.grpWeekCharacters.members[this.curTypeSelected].offset;
          var b = this.characterFile.position[0];
          var c = this.characterFile.position[1];
          if (c == null) {
            c = 0;
          }
          if (b == null) {
            b = 0;
          }
          a.set_x(b);
          a.set_y(c);
          this.txtOffsets.set_text("" + y.string(this.characterFile.position));
        },
        loadCharacter: function () {
          var a = new Ki("JSON", "json");
          this._file = new Ge();
          this._file.addEventListener("complete", n(this, this.onLoadComplete));
          this._file.addEventListener("cancel", n(this, this.onLoadCancel));
          this._file.addEventListener("ioError", n(this, this.onLoadError));
          this._file.browse([a]);
        },
        onLoadComplete: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          Ab.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 392,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadComplete"
          });
        },
        onLoadCancel: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          this._file = null;
          Ab.trace("Cancelled file loading.", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 405,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadCancel"
          });
        },
        onLoadError: function (a) {
          this._file.removeEventListener("complete", n(this, this.onLoadComplete));
          this._file.removeEventListener("cancel", n(this, this.onLoadCancel));
          this._file.removeEventListener("ioError", n(this, this.onLoadError));
          this._file = null;
          Ab.trace("Problem loading file", {
            fileName: "source/states/editors/MenuCharacterEditorState.hx",
            lineNumber: 417,
            className: "states.editors.MenuCharacterEditorState",
            methodName: "onLoadError"
          });
        },
        saveCharacter: function () {
          var a = JSON.stringify(this.characterFile, null, "\t");
          if (a.length > 0) {
            var b = v.trim(this.imageInputText.text).split("_");
            b = v.replace(b[b.length - 1].toLowerCase(), " ", "");
            this._file = new Ge();
            this._file.addEventListener("complete", n(this, this.onSaveComplete));
            this._file.addEventListener("cancel", n(this, this.onSaveCancel));
            this._file.addEventListener("ioError", n(this, this.onSaveError));
            this._file.save(a, b + ".json");
          }
        },
        onSaveComplete: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Successfully saved file.", Aa.NOTICE);
        },
        onSaveCancel: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
        },
        onSaveError: function (a) {
          this._file.removeEventListener("complete", n(this, this.onSaveComplete));
          this._file.removeEventListener("cancel", n(this, this.onSaveCancel));
          this._file.removeEventListener("ioError", n(this, this.onSaveError));
          this._file = null;
          g.log.advanced("Problem saving file", Aa.ERROR, true);
        },
        __class__: fn
      });
      function hh(a, b) {
        this.maxAnims = this.maxFrame = 0;
        this.copiedArray = null;
        this.texturePath = "";
        this.textureName = hh.defaultTexture;
        this.visibleTime = this.pressEnterToSave = 0;
        this.curAnim = 1;
        this.selecArr = null;
        this.maxNotes = 4;
        this.curSelected = 0;
        this.forceFrame = -1;
        P.call(this, a, b);
      }
      h["states.editors.NoteSplashDebugState"] = hh;
      hh.__name__ = "states.editors.NoteSplashDebugState";
      hh.__super__ = P;
      hh.prototype = q(P.prototype, {
        create: function () {
          var a = this;
          var b = Gb._new();
          var c = 0;
          var d = c * 0 + 0.5;
          var e = 1;
          if (e == null) {
            e = 1;
          }
          c = Math.round((c + 0.5) * 255);
          b = b & -16711681 | (c > 255 ? 255 : c < 0 ? 0 : c) << 16;
          c = Math.round(d * 255);
          b = b & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          c = 128;
          b = b & -256 | (c > 255 ? 255 : c < 0 ? 0 : c);
          c = Math.round(e * 255);
          g.camera.bgColor = b & 16777215 | (c > 255 ? 255 : c < 0 ? 0 : c) << 24;
          this.selection = new G(0, 270).makeGraphic(150, 150, -16777216);
          this.selection.set_alpha(0.4);
          this.add(this.selection);
          this.notes = new ab();
          this.add(this.notes);
          this.splashes = new ab();
          this.add(this.splashes);
          b = 0;
          for (d = this.maxNotes; b < d;) {
            c = b++;
            e = c * 220 + 240;
            c = new ah(e, 290, c, 0);
            c.set_alpha(0.75);
            c.playAnim("static");
            this.notes.add(c);
            e = new G(e, 290);
            e.setPosition(e.x - Ta.swagWidth * 0.95, e.y - Ta.swagWidth);
            e.shader = c.rgbShader.parent.shader;
            e.set_antialiasing(C.data.antialiasing);
            this.splashes.add(e);
          }
          b = new R(60, 520, null, "Image Name:", 16);
          this.add(b);
          this.imageInputText = new bf(60, 540, 360, hh.defaultTexture, 16);
          this.imageInputText.callback = function (b, c) {
            if (c == "enter") {
              a.imageInputText.set_hasFocus(false);
              a.textureName = b;
              try {
                a.loadFrames();
              } catch (t) {
                Oa.lastError = t;
                c = I.caught(t).unwrap();
                Ab.trace("ERROR! " + y.string(c), {
                  fileName: "source/states/editors/NoteSplashDebugState.hx",
                  lineNumber: 83,
                  className: "states.editors.NoteSplashDebugState",
                  methodName: "create"
                });
                a.textureName = hh.defaultTexture;
                a.loadFrames();
                a.missingText.set_text("ERROR WHILE LOADING IMAGE:\n" + b);
                b = a.missingText;
                c = 16;
                if (c == null) {
                  c = 17;
                }
                if (c == 1 || c == 17) {
                  b.set_x((g.width - b.get_width()) / 2);
                }
                if (c == 16 || c == 17) {
                  b.set_y((g.height - b.get_height()) / 2);
                }
                a.missingText.set_visible(true);
                a.missingTextBG.set_visible(true);
                g.sound.play(E.sound("cancelMenu"));
                new Gc().start(2.5, function (b) {
                  a.missingText.set_visible(false);
                  a.missingTextBG.set_visible(false);
                });
              }
            } else {
              Ab.trace("changed image to " + b, {
                fileName: "source/states/editors/NoteSplashDebugState.hx",
                lineNumber: 101,
                className: "states.editors.NoteSplashDebugState",
                methodName: "create"
              });
            }
          };
          this.add(this.imageInputText);
          b = new R(60, 640, null, "Animation Name:", 16);
          this.add(b);
          this.nameInputText = new bf(60, 660, 360, "", 16);
          this.nameInputText.callback = function (b, c) {
            if (c == "enter") {
              a.nameInputText.set_hasFocus(false);
            } else {
              Ab.trace("changed anim name to " + b, {
                fileName: "source/states/editors/NoteSplashDebugState.hx",
                lineNumber: 119,
                className: "states.editors.NoteSplashDebugState",
                methodName: "create"
              });
              a.config.anim = b;
              a.curAnim = 1;
              a.reloadAnims();
            }
          };
          this.add(this.nameInputText);
          this.add(new R(60, 590, 0, "Min/Max Framerate:", 16));
          this.stepperMinFps = new Lb(60, 610, 1, 22, 1, 60, 0);
          this.stepperMinFps.name = "min_fps";
          this.add(this.stepperMinFps);
          this.stepperMaxFps = new Lb(120, 610, 1, 26, 1, 60, 0);
          this.stepperMaxFps.name = "max_fps";
          this.add(this.stepperMaxFps);
          this.offsetsText = new R(300, 150, 680, "", 16);
          this.offsetsText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", cb.OUTLINE, -16777216);
          b = this.offsetsText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.offsetsText);
          this.curFrameText = new R(300, 100, 680, "", 16);
          this.curFrameText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", cb.OUTLINE, -16777216);
          b = this.curFrameText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.curFrameText);
          this.curAnimText = new R(300, 50, 680, "", 16);
          this.curAnimText.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", cb.OUTLINE, -16777216);
          b = this.curAnimText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.curAnimText);
          d = new R(0, 520, g.width, "Press SPACE to Reset animation\n\n\t\t\tPress ENTER twice to save to the loaded Note Splash PNG's folder\n\n\t\t\tA/D change selected note - Arrow Keys to change offset (Hold shift for 10x)\n\n\t\t\tCtrl + C/V - Copy & Paste", 16);
          d.setFormat("assets/fonts/vcr.ttf", 16, -1, "center", cb.OUTLINE, -16777216);
          b = d.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(d);
          this.savedText = new R(0, 340, g.width, "", 24);
          this.savedText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", cb.OUTLINE, -16777216);
          b = this.savedText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.add(this.savedText);
          this.missingTextBG = new G().makeGraphic(g.width, g.height, -16777216);
          this.missingTextBG.set_alpha(0.6);
          this.missingTextBG.set_visible(false);
          this.add(this.missingTextBG);
          this.missingText = new R(50, 0, g.width - 100, "", 24);
          this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", cb.OUTLINE, -16777216);
          b = this.missingText.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.missingText.set_visible(false);
          this.add(this.missingText);
          this.loadFrames();
          this.changeSelection();
          P.prototype.create.call(this);
          g.mouse.set_visible(true);
        },
        update: function (a) {
          var b = this;
          wa.__cast(this.stepperMinFps.text_field, bf).set_hasFocus(wa.__cast(this.stepperMaxFps.text_field, bf).set_hasFocus(false));
          var c = !this.nameInputText.hasFocus && !this.imageInputText.hasFocus;
          if (this.get_controls().get_BACK() && c) {
            P.switchState(new Pf());
            var d = g.sound;
            var e = E.returnSound("music", "freakyMenu", null);
            d.playMusic(e);
            g.mouse.set_visible(false);
          }
          P.prototype.update.call(this, a);
          if (!!c && !(c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(65, c.status) ? this.changeSelection(-1) : (c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(68, c.status) && this.changeSelection(1)), this.maxAnims < 1)) {
            if (this.selecArr != null && (e = d = 0, c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(37, c.status) ? d = -1 : (c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(39, c.status) && (d = 1)), c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(38, c.status) ? e = 1 : (c = g.keys.justPressed, c.keyManager.checkStatusUnsafe(40, c.status) && (e = -1)), c = g.keys.pressed, c.keyManager.checkStatusUnsafe(16, c.status) && (d *= 10, e *= 10), d != 0 || e != 0)) {
              this.selecArr[0] -= d;
              this.selecArr[1] += e;
              this.updateOffsetText();
              c = this.splashes.members[this.curSelected].offset;
              d = 10 + this.selecArr[0];
              e = 10 + this.selecArr[1];
              if (e == null) {
                e = 0;
              }
              if (d == null) {
                d = 0;
              }
              c.set_x(d);
              c.set_y(e);
            }
            c = g.keys.pressed;
            if (c.keyManager.checkStatusUnsafe(17, c.status)) {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(67, c.status)) {
                c = this.selectedArray();
                if (this.copiedArray == null) {
                  this.copiedArray = [0, 0];
                }
                this.copiedArray[0] = c[0];
                this.copiedArray[1] = c[1];
              } else {
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(86, c.status) && this.copiedArray != null) {
                  e = this.selectedArray();
                  e[0] = this.copiedArray[0];
                  e[1] = this.copiedArray[1];
                  c = this.splashes.members[this.curSelected].offset;
                  d = 10 + e[0];
                  e = 10 + e[1];
                  if (e == null) {
                    e = 0;
                  }
                  if (d == null) {
                    d = 0;
                  }
                  c.set_x(d);
                  c.set_y(e);
                  this.updateOffsetText();
                }
              }
            }
            this.pressEnterToSave -= a;
            if (this.visibleTime >= 0) {
              this.visibleTime -= a;
              if (this.visibleTime <= 0) {
                this.savedText.set_visible(false);
              }
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(13, c.status)) {
              this.savedText.set_text("Press ENTER again to save.");
              if (this.pressEnterToSave > 0) {
                this.saveFile();
                g.sound.play(E.sound("confirmMenu"), 0.4);
                this.pressEnterToSave = 0;
                this.visibleTime = 3;
              } else {
                this.visibleTime = this.pressEnterToSave = 0.5;
              }
              this.savedText.set_visible(true);
            }
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(32, c.status)) {
              this.changeAnim();
            } else {
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(83, c.status)) {
                this.changeAnim(-1);
              } else {
                c = g.keys.justPressed;
                if (c.keyManager.checkStatusUnsafe(87, c.status)) {
                  this.changeAnim(1);
                }
              }
            }
            a = false;
            c = g.keys.justPressed;
            if (a = c.keyManager.checkStatusUnsafe(81, c.status)) {
              this.forceFrame--;
            } else {
              c = g.keys.justPressed;
              if (a = c.keyManager.checkStatusUnsafe(69, c.status)) {
                this.forceFrame++;
              }
            }
            if (a) {
              if (this.forceFrame < 0) {
                this.forceFrame = 0;
              } else if (this.forceFrame >= this.maxFrame) {
                this.forceFrame = this.maxFrame - 1;
              }
              this.curFrameText.set_text("Force Frame: " + (this.forceFrame + 1) + " / " + this.maxFrame + "\n(Press Q/E to change)");
              this.splashes.forEachAlive(function (a) {
                a.animation._curAnim.paused = true;
                a.animation._curAnim.set_curFrame(b.forceFrame);
              });
            }
          }
        },
        updateOffsetText: function () {
          this.selecArr = this.selectedArray();
          this.offsetsText.set_text(this.selecArr.toString());
        },
        loadFrames: function () {
          var a = this;
          this.texturePath = "noteSplashes/" + this.textureName;
          this.splashes.forEachAlive(function (b) {
            var c = a.texturePath;
            var d = E.image(c, null, true);
            b.set_frames(Sa.fromSparrow(d, E.getPath("images/" + c + ".xml", null, null)));
          });
          gc.configs.h = Object.create(null);
          this.config = gc.precacheConfig(this.texturePath);
          if (this.config == null) {
            this.config = gc.precacheConfig(gc.defaultNoteSplash);
          }
          this.nameInputText.set_text(this.config.anim);
          this.stepperMinFps.set_value(this.config.minFps);
          this.stepperMaxFps.set_value(this.config.maxFps);
          this.reloadAnims();
        },
        saveFile: function () {
          this.savedText.set_text("Can't save on this platform, too bad.");
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_numeric_stepper" && b instanceof Lb) {
            switch (b.name) {
              case "max_fps":
                if (b.value < this.stepperMinFps.value) {
                  this.stepperMinFps.set_value(b.value);
                }
                break;
              case "min_fps":
                if (b.value > this.stepperMaxFps.value) {
                  this.stepperMaxFps.set_value(b.value);
                }
            }
            this.config.minFps = this.stepperMinFps.value | 0;
            this.config.maxFps = this.stepperMaxFps.value | 0;
          }
        },
        reloadAnims: function () {
          var a = this;
          var b = true;
          this.splashes.forEachAlive(function (a) {
            a.animation.destroyAnimations();
          });
          for (this.maxAnims = 0; b;) {
            this.splashes.forEachAlive(function (c) {
              return function (d) {
                for (var e = 0, f = Ta.colArray.length; e < f;) {
                  var g = e++;
                  var h = "note" + g + "-" + c[0];
                  if (!a.addAnimAndCheck(d, h, "" + a.config.anim + " " + Ta.colArray[g] + " " + c[0], 24, false)) {
                    b = false;
                    break;
                  }
                  d.animation.play(h, true);
                }
              };
            }([this.maxAnims + 1]));
            if (b) {
              this.maxAnims++;
            }
          }
          Ab.trace("maxAnims: " + this.maxAnims, {
            fileName: "source/states/editors/NoteSplashDebugState.hx",
            lineNumber: 405,
            className: "states.editors.NoteSplashDebugState",
            methodName: "reloadAnims"
          });
          this.changeAnim();
        },
        changeAnim: function (a) {
          if (a == null) {
            a = 0;
          }
          this.maxFrame = 0;
          this.forceFrame = -1;
          if (this.maxAnims > 0) {
            this.curAnim += a;
            if (this.curAnim > this.maxAnims) {
              this.curAnim = 1;
            } else if (this.curAnim < 1) {
              this.curAnim = this.maxAnims;
            }
            this.curAnimText.set_text("Current Animation: " + this.curAnim + " / " + this.maxAnims + "\n(Press W/S to change)");
            this.curFrameText.set_text("Force Frame Disabled\n(Press Q/E to change)");
            a = 0;
            for (var b = this.maxNotes; a < b;) {
              var c = a++;
              var d = this.splashes.members[c];
              d.animation.play("note" + c + "-" + this.curAnim, true);
              if (this.maxFrame < d.animation._curAnim.frames.length) {
                this.maxFrame = d.animation._curAnim.frames.length;
              }
              d.animation._curAnim.set_frameRate(g.random.int(this.config.minFps, this.config.maxFps));
              c = this.selectedArray(c);
              d = d.offset;
              var e = 10 + c[0];
              c = 10 + c[1];
              if (c == null) {
                c = 0;
              }
              if (e == null) {
                e = 0;
              }
              d.set_x(e);
              d.set_y(c);
            }
          } else {
            this.curAnimText.set_text("INVALID ANIMATION NAME");
            this.curFrameText.set_text("");
          }
          this.updateOffsetText();
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          var b = Ta.colArray.length;
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = b - 1;
          } else if (this.curSelected >= b) {
            this.curSelected = 0;
          }
          this.selection.set_x(this.curSelected * 220 + 220);
          this.updateOffsetText();
        },
        selectedArray: function (a) {
          if (a == null) {
            a = -1;
          }
          if (a < 0) {
            a = this.curSelected;
          }
          a += (this.curAnim - 1) * Ta.colArray.length;
          if (this.config.offsets[a] == null) {
            while (this.config.offsets[a] == null) {
              this.config.offsets.push(this.config.offsets[jc.wrap(a, 0, this.config.offsets.length - 1)].slice());
            }
          }
          return this.config.offsets[jc.wrap(a, 0, this.config.offsets.length - 1)];
        },
        addAnimAndCheck: function (a, b, c, d, e) {
          if (e == null) {
            e = false;
          }
          if (d == null) {
            d = 24;
          }
          a.animation.addByPrefix(b, c, d, e);
          return a.animation._animations.h[b] != null;
        },
        destroy: function () {
          P.prototype.destroy.call(this);
        },
        __class__: hh
      });
      function Ja(a) {
        this.blockPressWhileTypingOn = [];
        this.weekFile = null;
        P.call(this);
        this.weekFile = jb.createWeekFile();
        if (a != null) {
          this.weekFile = a;
        } else {
          Ja.weekFileName = "week1";
        }
      }
      h["states.editors.WeekEditorState"] = Ja;
      Ja.__name__ = "states.editors.WeekEditorState";
      Ja.loadWeek = function () {
        var a = new Ki("JSON", "json");
        Ja._file = new Ge();
        Ja._file.addEventListener("complete", Ja.onLoadComplete);
        Ja._file.addEventListener("cancel", Ja.onLoadCancel);
        Ja._file.addEventListener("ioError", Ja.onLoadError);
        Ja._file.browse([a]);
      };
      Ja.onLoadComplete = function (a) {
        Ja._file.removeEventListener("complete", Ja.onLoadComplete);
        Ja._file.removeEventListener("cancel", Ja.onLoadCancel);
        Ja._file.removeEventListener("ioError", Ja.onLoadError);
        Ab.trace("File couldn't be loaded! You aren't on Desktop, are you?", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 548,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadComplete"
        });
      };
      Ja.onLoadCancel = function (a) {
        Ja._file.removeEventListener("complete", Ja.onLoadComplete);
        Ja._file.removeEventListener("cancel", Ja.onLoadCancel);
        Ja._file.removeEventListener("ioError", Ja.onLoadError);
        Ja._file = null;
        Ab.trace("Cancelled file loading.", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 561,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadCancel"
        });
      };
      Ja.onLoadError = function (a) {
        Ja._file.removeEventListener("complete", Ja.onLoadComplete);
        Ja._file.removeEventListener("cancel", Ja.onLoadCancel);
        Ja._file.removeEventListener("ioError", Ja.onLoadError);
        Ja._file = null;
        Ab.trace("Problem loading file", {
          fileName: "source/states/editors/WeekEditorState.hx",
          lineNumber: 573,
          className: "states.editors.WeekEditorState",
          methodName: "onLoadError"
        });
      };
      Ja.saveWeek = function (a) {
        a = JSON.stringify(a, null, "\t");
        if (a.length > 0) {
          Ja._file = new Ge();
          Ja._file.addEventListener("complete", Ja.onSaveComplete);
          Ja._file.addEventListener("cancel", Ja.onSaveCancel);
          Ja._file.addEventListener("ioError", Ja.onSaveError);
          Ja._file.save(a, Ja.weekFileName + ".json");
        }
      };
      Ja.onSaveComplete = function (a) {
        Ja._file.removeEventListener("complete", Ja.onSaveComplete);
        Ja._file.removeEventListener("cancel", Ja.onSaveCancel);
        Ja._file.removeEventListener("ioError", Ja.onSaveError);
        Ja._file = null;
        g.log.advanced("Successfully saved file.", Aa.NOTICE);
      };
      Ja.onSaveCancel = function (a) {
        Ja._file.removeEventListener("complete", Ja.onSaveComplete);
        Ja._file.removeEventListener("cancel", Ja.onSaveCancel);
        Ja._file.removeEventListener("ioError", Ja.onSaveError);
        Ja._file = null;
      };
      Ja.onSaveError = function (a) {
        Ja._file.removeEventListener("complete", Ja.onSaveComplete);
        Ja._file.removeEventListener("cancel", Ja.onSaveCancel);
        Ja._file.removeEventListener("ioError", Ja.onSaveError);
        Ja._file = null;
        g.log.advanced("Problem saving file", Aa.ERROR, true);
      };
      Ja.__super__ = P;
      Ja.prototype = q(P.prototype, {
        create: function () {
          this.txtWeekTitle = new R(g.width * 0.7, 10, 0, "", 32);
          this.txtWeekTitle.setFormat("assets/fonts/vcr.ttf", 32, -1, "right");
          this.txtWeekTitle.set_alpha(0.7);
          var a = E.image("campaign_menu_UI_assets", null, true);
          var b = Sa.fromSparrow(a, E.getPath("images/campaign_menu_UI_assets.xml", null, null));
          a = new G(0, 56).makeGraphic(g.width, 386, -405679);
          this.bgSprite = new G(0, 56);
          this.bgSprite.set_antialiasing(C.data.antialiasing);
          var c = this.weekThing = new Nj(0, this.bgSprite.y + 396, Ja.weekFileName);
          c.set_y(c.y + (this.weekThing.get_height() + 20));
          this.weekThing.set_antialiasing(C.data.antialiasing);
          this.add(this.weekThing);
          c = new G().makeGraphic(g.width, 56, -16777216);
          this.add(c);
          this.grpWeekCharacters = new ab();
          this.lock = new G();
          this.lock.set_frames(b);
          this.lock.animation.addByPrefix("lock", "lock");
          this.lock.animation.play("lock");
          this.lock.set_antialiasing(C.data.antialiasing);
          this.add(this.lock);
          this.missingFileText = new R(0, 0, g.width, "");
          this.missingFileText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", cb.OUTLINE, -16777216);
          this.missingFileText.set_borderSize(2);
          this.missingFileText.set_visible(false);
          this.add(this.missingFileText);
          b = this.weekFile.weekCharacters;
          c = new qe(g.width * 0.25 - 150, b[0]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          c = new qe(g.width * 0.5 - 150, b[1]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          c = new qe(g.width * 0.75 - 150, b[2]);
          c.set_y(c.y + 70);
          this.grpWeekCharacters.add(c);
          this.add(a);
          this.add(this.bgSprite);
          this.add(this.grpWeekCharacters);
          a = new G(g.width * 0.07, this.bgSprite.y + 435).loadGraphic(E.image("Menu_Tracks"));
          a.set_antialiasing(C.data.antialiasing);
          this.add(a);
          this.txtTracklist = new R(g.width * 0.05, a.y + 60, 0, "", 32);
          this.txtTracklist.set_alignment("center");
          this.txtTracklist.set_font("assets/fonts/vcr.ttf");
          this.txtTracklist.set_color(-1747081);
          this.add(this.txtTracklist);
          this.add(this.txtWeekTitle);
          this.addEditorBox();
          this.reloadAllShit();
          g.mouse.set_visible(true);
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          this.UI_box = new ie(null, null, [{
            name: "Week",
            label: "Week"
          }, {
            name: "Other",
            label: "Other"
          }], null, true);
          this.UI_box.resize(250, 375);
          this.UI_box.set_x(g.width - this.UI_box.get_width());
          this.UI_box.set_y(g.height - this.UI_box.get_height());
          var b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.addWeekUI();
          this.addOtherUI();
          this.UI_box.set_selected_tab_id("Week");
          this.add(this.UI_box);
          var c = new zb(0, 650, "Load Week", function () {
            Ja.loadWeek();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 120);
          this.add(c);
          c = new zb(0, 650, "Freeplay", function () {
            P.switchState(new ik(a.weekFile));
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.add(c);
          c = new zb(0, 650, "Save Week", function () {
            Ja.saveWeek(a.weekFile);
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 120);
          this.add(c);
        },
        addWeekUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Week";
          this.songsInputText = new pb(10, 30, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.songsInputText);
          this.opponentInputText = new pb(10, this.songsInputText.y + 40, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.opponentInputText);
          this.boyfriendInputText = new pb(this.opponentInputText.x + 75, this.opponentInputText.y, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.boyfriendInputText);
          this.girlfriendInputText = new pb(this.boyfriendInputText.x + 75, this.opponentInputText.y, 70, "", 8);
          this.blockPressWhileTypingOn.push(this.girlfriendInputText);
          this.backgroundInputText = new pb(10, this.opponentInputText.y + 40, 120, "", 8);
          this.blockPressWhileTypingOn.push(this.backgroundInputText);
          this.displayNameInputText = new pb(10, this.backgroundInputText.y + 60, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.backgroundInputText);
          this.weekNameInputText = new pb(10, this.displayNameInputText.y + 60, 150, "", 8);
          this.blockPressWhileTypingOn.push(this.weekNameInputText);
          this.weekFileInputText = new pb(10, this.weekNameInputText.y + 40, 100, "", 8);
          this.blockPressWhileTypingOn.push(this.weekFileInputText);
          this.reloadWeekThing();
          this.hideCheckbox = new Bb(10, this.weekFileInputText.y + 40, null, null, "Hide Week from Story Mode?", 100);
          this.hideCheckbox.callback = function () {
            a.weekFile.hideStoryMode = a.hideCheckbox.checked;
          };
          b.add(new R(this.songsInputText.x, this.songsInputText.y - 18, 0, "Songs:"));
          b.add(new R(this.opponentInputText.x, this.opponentInputText.y - 18, 0, "Characters:"));
          b.add(new R(this.backgroundInputText.x, this.backgroundInputText.y - 18, 0, "Background Asset:"));
          b.add(new R(this.displayNameInputText.x, this.displayNameInputText.y - 18, 0, "Display Name:"));
          b.add(new R(this.weekNameInputText.x, this.weekNameInputText.y - 18, 0, "Week Name (for Reset Score Menu):"));
          b.add(new R(this.weekFileInputText.x, this.weekFileInputText.y - 18, 0, "Week File:"));
          b.add(this.songsInputText);
          b.add(this.opponentInputText);
          b.add(this.boyfriendInputText);
          b.add(this.girlfriendInputText);
          b.add(this.backgroundInputText);
          b.add(this.displayNameInputText);
          b.add(this.weekNameInputText);
          b.add(this.weekFileInputText);
          b.add(this.hideCheckbox);
          this.UI_box.addGroup(b);
        },
        addOtherUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Other";
          this.lockedCheckbox = new Bb(10, 30, null, null, "Week starts Locked", 100);
          this.lockedCheckbox.callback = function () {
            a.weekFile.startUnlocked = !a.lockedCheckbox.checked;
            a.lock.set_visible(a.lockedCheckbox.checked);
            a.hiddenUntilUnlockCheckbox.set_alpha(0.4 + (a.lockedCheckbox.checked ? 1 : 0) * 0.6);
          };
          this.hiddenUntilUnlockCheckbox = new Bb(10, this.lockedCheckbox.y + 25, null, null, "Hidden until Unlocked", 110);
          this.hiddenUntilUnlockCheckbox.callback = function () {
            a.weekFile.hiddenUntilUnlocked = a.hiddenUntilUnlockCheckbox.checked;
          };
          this.hiddenUntilUnlockCheckbox.set_alpha(0.4);
          this.weekBeforeInputText = new pb(10, this.hiddenUntilUnlockCheckbox.y + 55, 100, "", 8);
          this.blockPressWhileTypingOn.push(this.weekBeforeInputText);
          this.difficultiesInputText = new pb(10, this.weekBeforeInputText.y + 60, 200, "", 8);
          this.blockPressWhileTypingOn.push(this.difficultiesInputText);
          b.add(new R(this.weekBeforeInputText.x, this.weekBeforeInputText.y - 28, 0, "Week File name of the Week you have\nto finish for Unlocking:"));
          b.add(new R(this.difficultiesInputText.x, this.difficultiesInputText.y - 20, 0, "Difficulties:"));
          b.add(new R(this.difficultiesInputText.x, this.difficultiesInputText.y + 20, 0, "Default difficulties are \"Easy, Normal, Hard\"\nwithout quotes."));
          b.add(this.weekBeforeInputText);
          b.add(this.difficultiesInputText);
          b.add(this.hiddenUntilUnlockCheckbox);
          b.add(this.lockedCheckbox);
          this.UI_box.addGroup(b);
        },
        reloadAllShit: function () {
          var a = this.weekFile.songs[0][0];
          for (var b = 1, c = this.weekFile.songs.length; b < c;) {
            var d = b++;
            a += ", " + this.weekFile.songs[d][0];
          }
          this.songsInputText.set_text(a);
          this.backgroundInputText.set_text(this.weekFile.weekBackground);
          this.displayNameInputText.set_text(this.weekFile.storyName);
          this.weekNameInputText.set_text(this.weekFile.weekName);
          this.weekFileInputText.set_text(Ja.weekFileName);
          this.opponentInputText.set_text(this.weekFile.weekCharacters[0]);
          this.boyfriendInputText.set_text(this.weekFile.weekCharacters[1]);
          this.girlfriendInputText.set_text(this.weekFile.weekCharacters[2]);
          this.hideCheckbox.set_checked(this.weekFile.hideStoryMode);
          this.weekBeforeInputText.set_text(this.weekFile.weekBefore);
          this.difficultiesInputText.set_text("");
          if (this.weekFile.difficulties != null) {
            this.difficultiesInputText.set_text(this.weekFile.difficulties);
          }
          this.lockedCheckbox.set_checked(!this.weekFile.startUnlocked);
          this.lock.set_visible(this.lockedCheckbox.checked);
          this.hiddenUntilUnlockCheckbox.set_checked(this.weekFile.hiddenUntilUnlocked);
          this.hiddenUntilUnlockCheckbox.set_alpha(0.4 + (this.lockedCheckbox.checked ? 1 : 0) * 0.6);
          this.reloadBG();
          this.reloadWeekThing();
          this.updateText();
        },
        updateText: function () {
          for (var a = 0, b = this.grpWeekCharacters.length; a < b;) {
            var c = a++;
            this.grpWeekCharacters.members[c].changeCharacter(this.weekFile.weekCharacters[c]);
          }
          var d = [];
          a = 0;
          for (b = this.weekFile.songs.length; a < b;) {
            c = a++;
            d.push(this.weekFile.songs[c][0]);
          }
          this.txtTracklist.set_text("");
          a = 0;
          for (b = d.length; a < b;) {
            c = a++;
            var e = this.txtTracklist;
            e.set_text(e.text + (d[c] + "\n"));
          }
          this.txtTracklist.set_text(this.txtTracklist.text.toUpperCase());
          a = this.txtTracklist;
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          e = this.txtTracklist;
          e.set_x(e.x - g.width * 0.35);
          this.txtWeekTitle.set_text(this.weekFile.storyName.toUpperCase());
          this.txtWeekTitle.set_x(g.width - (this.txtWeekTitle.get_width() + 10));
        },
        reloadBG: function () {
          this.bgSprite.set_visible(true);
          var a = this.weekFile.weekBackground;
          var b = true;
          if (a != null && a.length > 0 && U.exists(E.getPath("images/menubackgrounds/menu_" + a + ".png", "IMAGE"), "IMAGE")) {
            this.bgSprite.loadGraphic(E.image("menubackgrounds/menu_" + a));
            b = false;
          }
          if (b) {
            this.bgSprite.set_visible(false);
          }
        },
        reloadWeekThing: function () {
          this.weekThing.set_visible(true);
          this.missingFileText.set_visible(false);
          var a = v.trim(this.weekFileInputText.text);
          var b = true;
          if (a != null && a.length > 0 && U.exists(E.getPath("images/storymenu/" + a + ".png", "IMAGE"), "IMAGE")) {
            this.weekThing.loadGraphic(E.image("storymenu/" + a));
            b = false;
          }
          if (b) {
            this.weekThing.set_visible(false);
            this.missingFileText.set_visible(true);
            this.missingFileText.set_text("MISSING FILE: images/storymenu/" + a + ".png");
          }
          this.recalculateStuffPosition();
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof pb) {
            if (b == this.weekFileInputText) {
              Ja.weekFileName = v.trim(this.weekFileInputText.text);
              this.reloadWeekThing();
            } else if (b == this.opponentInputText || b == this.boyfriendInputText || b == this.girlfriendInputText) {
              this.weekFile.weekCharacters[0] = v.trim(this.opponentInputText.text);
              this.weekFile.weekCharacters[1] = v.trim(this.boyfriendInputText.text);
              this.weekFile.weekCharacters[2] = v.trim(this.girlfriendInputText.text);
              this.updateText();
            } else if (b == this.backgroundInputText) {
              this.weekFile.weekBackground = v.trim(this.backgroundInputText.text);
              this.reloadBG();
            } else if (b == this.displayNameInputText) {
              this.weekFile.storyName = v.trim(this.displayNameInputText.text);
              this.updateText();
            } else if (b == this.weekNameInputText) {
              this.weekFile.weekName = v.trim(this.weekNameInputText.text);
            } else if (b == this.songsInputText) {
              a = v.trim(this.songsInputText.text).split(",");
              b = 0;
              for (c = a.length; b < c;) {
                d = b++;
                a[d] = v.trim(a[d]);
              }
              while (a.length < this.weekFile.songs.length) {
                this.weekFile.songs.pop();
              }
              b = 0;
              for (c = a.length; b < c;) {
                d = b++;
                if (d >= this.weekFile.songs.length) {
                  this.weekFile.songs.push([a[d], "dad", [146, 113, 253]]);
                } else {
                  this.weekFile.songs[d][0] = a[d];
                  if (this.weekFile.songs[d][1] == null || this.weekFile.songs[d][1]) {
                    this.weekFile.songs[d][1] = "dad";
                    this.weekFile.songs[d][2] = [146, 113, 253];
                  }
                }
              }
              this.updateText();
            } else if (b == this.weekBeforeInputText) {
              this.weekFile.weekBefore = v.trim(this.weekBeforeInputText.text);
            } else if (b == this.difficultiesInputText) {
              this.weekFile.difficulties = v.trim(this.difficultiesInputText.text);
            }
          }
        },
        update: function (a) {
          if (Ja.loadedWeek != null) {
            this.weekFile = Ja.loadedWeek;
            Ja.loadedWeek = null;
            this.reloadAllShit();
          }
          var b = false;
          for (var c = 0, d = this.blockPressWhileTypingOn; c < d.length;) {
            var e = d[c];
            ++c;
            if (e.hasFocus) {
              C.toggleVolumeKeys(false);
              b = true;
              c = g.keys.justPressed;
              if (c.keyManager.checkStatusUnsafe(13, c.status)) {
                e.set_hasFocus(false);
              }
              break;
            }
          }
          if (!b) {
            C.toggleVolumeKeys(true);
            c = g.keys.justPressed;
            if (c.keyManager.checkStatusUnsafe(27, c.status)) {
              P.switchState(new Pf());
              b = g.sound;
              e = E.returnSound("music", "freakyMenu", null);
              b.playMusic(e);
            }
          }
          P.prototype.update.call(this, a);
          this.lock.set_y(this.weekThing.y);
          this.missingFileText.set_y(this.weekThing.y + 36);
        },
        recalculateStuffPosition: function () {
          var a = this.weekThing;
          var b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            a.set_x((g.width - a.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            a.set_y((g.height - a.get_height()) / 2);
          }
          this.lock.set_x(this.weekThing.get_width() + 10 + this.weekThing.x);
        },
        __class__: Ja
      });
      function ik(a) {
        this.blockPressWhileTypingOn = [];
        this.curSelected = 0;
        this.iconArray = [];
        this.weekFile = null;
        P.call(this);
        this.weekFile = jb.createWeekFile();
        if (a != null) {
          this.weekFile = a;
        }
      }
      h["states.editors.WeekEditorFreeplayState"] = ik;
      ik.__name__ = "states.editors.WeekEditorFreeplayState";
      ik.__super__ = P;
      ik.prototype = q(P.prototype, {
        create: function () {
          this.bg = new G().loadGraphic(E.image("menuDesat"));
          this.bg.set_antialiasing(C.data.antialiasing);
          this.bg.set_color(-1);
          this.add(this.bg);
          this.grpSongs = new ab();
          this.add(this.grpSongs);
          for (var a = 0, b = this.weekFile.songs.length; a < b;) {
            var c = a++;
            var d = new bc(90, 320, this.weekFile.songs[c][0], true);
            d.isMenuItem = true;
            d.targetY = c;
            this.grpSongs.add(d);
            d.set_scaleX(Math.min(1, 980 / d.get_width()));
            d.snapToPosition();
            c = new Mf(this.weekFile.songs[c][1]);
            c.sprTracker = d;
            this.iconArray.push(c);
            this.add(c);
          }
          this.addEditorBox();
          this.changeSelection();
          P.prototype.create.call(this);
        },
        addEditorBox: function () {
          var a = this;
          this.UI_box = new ie(null, null, [{
            name: "Freeplay",
            label: "Freeplay"
          }], null, true);
          this.UI_box.resize(250, 200);
          this.UI_box.set_x(g.width - this.UI_box.get_width() - 100);
          this.UI_box.set_y(g.height - this.UI_box.get_height() - 60);
          var b = this.UI_box.scrollFactor;
          b.set_x(0);
          b.set_y(0);
          this.UI_box.set_selected_tab_id("Week");
          this.addFreeplayUI();
          this.add(this.UI_box);
          b = new G(0, 670).makeGraphic(g.width, 50, -16777216);
          b.set_alpha(0.6);
          this.add(b);
          var c = new zb(0, 685, "Load Week", function () {
            Ja.loadWeek();
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x - 120);
          this.add(c);
          c = new zb(0, 685, "Story Mode", function () {
            P.switchState(new Ja(a.weekFile));
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          this.add(c);
          c = new zb(0, 685, "Save Week", function () {
            Ja.saveWeek(a.weekFile);
          });
          b = 1;
          if (b == null) {
            b = 17;
          }
          if (b == 1 || b == 17) {
            c.set_x((g.width - c.get_width()) / 2);
          }
          if (b == 16 || b == 17) {
            c.set_y((g.height - c.get_height()) / 2);
          }
          c.set_x(c.x + 120);
          this.add(c);
        },
        getEvent: function (a, b, c, d) {
          if (a == "change_input_text" && b instanceof pb) {
            this.weekFile.songs[this.curSelected][1] = this.iconInputText.text;
            this.iconArray[this.curSelected].changeIcon(this.iconInputText.text);
          } else if (a == "change_numeric_stepper" && b instanceof Lb && (b == this.bgColorStepperR || b == this.bgColorStepperG || b == this.bgColorStepperB)) {
            this.updateBG();
          }
        },
        addFreeplayUI: function () {
          var a = this;
          var b = new Ma(null, this.UI_box);
          b.name = "Freeplay";
          this.bgColorStepperR = new Lb(10, 40, 20, 255, 0, 255, 0);
          this.bgColorStepperG = new Lb(80, 40, 20, 255, 0, 255, 0);
          this.bgColorStepperB = new Lb(150, 40, 20, 255, 0, 255, 0);
          var c = new zb(10, this.bgColorStepperR.y + 25, "Copy Color", function () {
            yc.set_text((a.bg.color >> 16 & 255) + "," + (a.bg.color >> 8 & 255) + "," + (a.bg.color & 255));
          });
          var d = new zb(140, c.y, "Paste Color", function () {
            if (yc.get_text() != null) {
              var b = [];
              var c = v.trim(yc.get_text()).split(",");
              for (var d = 0, e = c.length; d < e;) {
                var g = d++;
                g = y.parseInt(c[g]);
                if (!isNaN(g)) {
                  if (g > 255) {
                    g = 255;
                  } else if (g < 0) {
                    g *= -1;
                  }
                  b.push(g);
                }
              }
              if (b.length > 2) {
                a.bgColorStepperR.set_value(b[0]);
                a.bgColorStepperG.set_value(b[1]);
                a.bgColorStepperB.set_value(b[2]);
                a.updateBG();
              }
            }
          });
          this.iconInputText = new pb(10, this.bgColorStepperR.y + 70, 100, "", 8);
          var e = new Bb(10, this.iconInputText.y + 30, null, null, "Hide Week from Freeplay?", 100);
          e.set_checked(this.weekFile.hideFreeplay);
          e.callback = function () {
            a.weekFile.hideFreeplay = e.checked;
          };
          b.add(new R(10, this.bgColorStepperR.y - 18, 0, "Selected background Color R/G/B:"));
          b.add(new R(10, this.iconInputText.y - 18, 0, "Selected icon:"));
          b.add(this.bgColorStepperR);
          b.add(this.bgColorStepperG);
          b.add(this.bgColorStepperB);
          b.add(c);
          b.add(d);
          b.add(this.iconInputText);
          b.add(e);
          this.UI_box.addGroup(b);
        },
        updateBG: function () {
          this.weekFile.songs[this.curSelected][2][0] = Math.round(this.bgColorStepperR.value);
          this.weekFile.songs[this.curSelected][2][1] = Math.round(this.bgColorStepperG.value);
          this.weekFile.songs[this.curSelected][2][2] = Math.round(this.bgColorStepperB.value);
          var a = this.bg;
          var b = this.weekFile.songs[this.curSelected][2][0];
          var c = this.weekFile.songs[this.curSelected][2][1];
          var d = this.weekFile.songs[this.curSelected][2][2];
          var e = Gb._new();
          var f = 255;
          if (f == null) {
            f = 255;
          }
          e = (e & -16711681 | (b > 255 ? 255 : b < 0 ? 0 : b) << 16) & -65281 | (c > 255 ? 255 : c < 0 ? 0 : c) << 8;
          e &= -256;
          e |= d > 255 ? 255 : d < 0 ? 0 : d;
          e &= 16777215;
          e |= (f > 255 ? 255 : f < 0 ? 0 : f) << 24;
          a.set_color(e);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          g.sound.play(E.sound("scrollMenu"), 0.4);
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.weekFile.songs.length - 1;
          }
          if (this.curSelected >= this.weekFile.songs.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.iconArray.length; b < c;) {
            var d = b++;
            this.iconArray[d].set_alpha(0.6);
          }
          this.iconArray[this.curSelected].set_alpha(1);
          b = 0;
          for (c = this.grpSongs.members; b < c.length;) {
            d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          Ab.trace(this.weekFile.songs[this.curSelected], {
            fileName: "source/states/editors/WeekEditorState.hx",
            lineNumber: 845,
            className: "states.editors.WeekEditorFreeplayState",
            methodName: "changeSelection"
          });
          this.iconInputText.set_text(this.weekFile.songs[this.curSelected][1]);
          this.bgColorStepperR.set_value(Math.round(this.weekFile.songs[this.curSelected][2][0]));
          this.bgColorStepperG.set_value(Math.round(this.weekFile.songs[this.curSelected][2][1]));
          this.bgColorStepperB.set_value(Math.round(this.weekFile.songs[this.curSelected][2][2]));
          this.updateBG();
        },
        update: function (a) {
          if (Ja.loadedWeek != null) {
            P.prototype.update.call(this, a);
            Vb.skipNextTransIn = true;
            Vb.skipNextTransOut = true;
            P.switchState(new ik(Ja.loadedWeek));
            Ja.loadedWeek = null;
          } else {
            if (this.iconInputText.hasFocus) {
              C.toggleVolumeKeys(false);
              var b = g.keys.justPressed;
              if (b.keyManager.checkStatusUnsafe(13, b.status)) {
                this.iconInputText.set_hasFocus(false);
              }
            } else {
              C.toggleVolumeKeys(true);
              b = g.keys.justPressed;
              if (b.keyManager.checkStatusUnsafe(27, b.status)) {
                P.switchState(new Pf());
                b = g.sound;
                var c = E.returnSound("music", "freakyMenu", null);
                b.playMusic(c);
              }
              if (this.get_controls().get_UI_UP_P()) {
                this.changeSelection(-1);
              }
              if (this.get_controls().get_UI_DOWN_P()) {
                this.changeSelection(1);
              }
            }
            P.prototype.update.call(this, a);
          }
        },
        __class__: ik
      });
      function ek() {
        Rh.call(this);
      }
      h["states.stages.StageWeek1"] = ek;
      ek.__name__ = "states.stages.StageWeek1";
      ek.__super__ = Rh;
      ek.prototype = q(Rh.prototype, {
        create: function () {
          var a = new Db("stageback", -600, -200, 0.9, 0.9);
          this.add(a);
          a = new Db("stagefront", -650, 600, 0.9, 0.9);
          a.setGraphicSize(a.get_width() * 1.1 | 0);
          a.updateHitbox();
          this.add(a);
          if (!C.data.lowQuality) {
            a = new Db("stage_light", -125, -100, 0.9, 0.9);
            a.setGraphicSize(a.get_width() * 1.1 | 0);
            a.updateHitbox();
            this.add(a);
            a = new Db("stage_light", 1225, -100, 0.9, 0.9);
            a.setGraphicSize(a.get_width() * 1.1 | 0);
            a.updateHitbox();
            a.set_flipX(true);
            this.add(a);
            a = new Db("stagecurtains", -500, -300, 1.3, 1.3);
            a.setGraphicSize(a.get_width() * 0.9 | 0);
            a.updateHitbox();
            this.add(a);
          }
        },
        eventPushed: function (a) {
          if (a.event == "Dadbattle Spotlight") {
            this.dadbattleBlack = new Db(null, -800, -400, 0, 0);
            this.dadbattleBlack.makeGraphic(g.width * 2 | 0, g.height * 2 | 0, -16777216);
            this.dadbattleBlack.set_alpha(0.25);
            this.dadbattleBlack.set_visible(false);
            this.add(this.dadbattleBlack);
            this.dadbattleLight = new Db("spotlight", 400, -400);
            this.dadbattleLight.set_alpha(0.375);
            this.dadbattleLight.set_blend(0);
            this.dadbattleLight.set_visible(false);
            this.add(this.dadbattleLight);
            this.dadbattleFog = new gn();
            this.dadbattleFog.set_visible(false);
            this.add(this.dadbattleFog);
          }
        },
        eventCalled: function (a, b, c, d, e, f) {
          var g = this;
          if (a == "Dadbattle Spotlight") {
            if (d == null) {
              d = 0;
            }
            a = Math.round(d);
            switch (a) {
              case 1:
              case 2:
              case 3:
                if (a == 1) {
                  this.dadbattleBlack.set_visible(true);
                  this.dadbattleLight.set_visible(true);
                  this.dadbattleFog.set_visible(true);
                  this.game.defaultCamZoom += 0.12;
                }
                b = this.game.dad;
                if (a > 2) {
                  b = this.game.boyfriend;
                }
                this.dadbattleLight.set_alpha(0);
                new Gc().start(0.12, function (a) {
                  g.dadbattleLight.set_alpha(0.375);
                });
                this.dadbattleLight.setPosition(b.getGraphicMidpoint().x - this.dadbattleLight.get_width() / 2, b.y + b.get_height() - this.dadbattleLight.get_height() + 50);
                Ha.tween(this.dadbattleFog, {
                  alpha: 0.7
                }, 1.5, {
                  ease: X.quadInOut
                });
                break;
              default:
                this.dadbattleBlack.set_visible(false);
                this.dadbattleLight.set_visible(false);
                this.game.defaultCamZoom -= 0.12;
                Ha.tween(this.dadbattleFog, {
                  alpha: 0
                }, 0.7, {
                  onComplete: function (a) {
                    g.dadbattleFog.set_visible(false);
                  }
                });
            }
          }
        },
        __class__: ek
      });
      function gn() {
        Na.call(this);
        this.set_alpha(0);
        this.set_blend(0);
        var a = new Db("smoke", -1350, 660 + g.random.float(-20, 20), 1.2, 1.05);
        a.setGraphicSize(a.get_width() * g.random.float(1.1, 1.22) | 0);
        a.updateHitbox();
        a.velocity.set_x(g.random.float(15, 22));
        a.set_active(true);
        a.set_antialiasing(C.data.antialiasing);
        this.add(a);
        a = new Db("smoke", 1750, 660 + g.random.float(-20, 20), 1.2, 1.05);
        a.setGraphicSize(a.get_width() * g.random.float(1.1, 1.22) | 0);
        a.updateHitbox();
        a.velocity.set_x(g.random.float(-15, -22));
        a.set_active(true);
        a.set_flipX(true);
        a.set_antialiasing(C.data.antialiasing);
        this.add(a);
      }
      h["states.stages.objects.DadBattleFog"] = gn;
      gn.__name__ = "states.stages.objects.DadBattleFog";
      gn.__super__ = Na;
      gn.prototype = q(Na.prototype, {
        __class__: gn
      });
      function Lj(a, b, c) {
        this.tankSpeed = 0.7;
        this.strumTime = 0;
        this.goingRight = c;
        G.call(this, a, b);
        a = E.image("tankmanKilled1", null, true);
        this.set_frames(Sa.fromSparrow(a, E.getPath("images/tankmanKilled1.xml", null, null)));
        this.animation.addByPrefix("run", "tankman running", 24, true);
        this.animation.addByPrefix("shot", "John Shot " + g.random.int(1, 2), 24, false);
        this.animation.play("run");
        this.animation._curAnim.set_curFrame(g.random.int(0, this.animation._curAnim.frames.length - 1));
        this.set_antialiasing(C.data.antialiasing);
        c = this.scale;
        b = a = 0.8;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        c.set_x(a);
        c.set_y(b);
        this.updateHitbox();
      }
      h["states.stages.objects.TankmenBG"] = Lj;
      Lj.__name__ = "states.stages.objects.TankmenBG";
      Lj.__super__ = G;
      Lj.prototype = q(G.prototype, {
        update: function (a) {
          G.prototype.update.call(this, a);
          this.set_visible(this.x > g.width * -0.5 && this.x < g.width * 1.2);
          if (this.animation._curAnim.name == "run") {
            a = (K.songPosition - this.strumTime) * this.tankSpeed;
            if (this.goingRight) {
              this.set_x(g.width * 0.02 - this.endingOffset + a);
            } else {
              this.set_x(g.width * 0.74 + this.endingOffset - a);
            }
          } else if (this.animation._curAnim.finished) {
            this.kill();
          }
          if (K.songPosition > this.strumTime) {
            this.animation.play("shot");
            if (this.goingRight) {
              this.offset.set_x(300);
              this.offset.set_y(200);
            }
          }
        },
        __class__: Lj
      });
      function Jc() {
        this.startedDeath = this.isEnding = false;
        this.charX = this.charY = 0;
        this.stageSuffix = "";
        this.moveCamera = this.playingDeathSound = false;
        rb.call(this);
      }
      h["substates.GameOverSubstate"] = Jc;
      Jc.__name__ = "substates.GameOverSubstate";
      Jc.resetVariables = function () {
        Jc.characterName = "bf-dead";
        Jc.deathSoundName = "fnf_loss_sfx";
        Jc.loopSoundName = "gameOver";
        Jc.endSoundName = "gameOverEnd";
        var a = z.SONG;
        if (a != null) {
          if (a.gameOverChar != null && v.trim(a.gameOverChar).length > 0) {
            Jc.characterName = a.gameOverChar;
          }
          if (a.gameOverSound != null && v.trim(a.gameOverSound).length > 0) {
            Jc.deathSoundName = a.gameOverSound;
          }
          if (a.gameOverLoop != null && v.trim(a.gameOverLoop).length > 0) {
            Jc.loopSoundName = a.gameOverLoop;
          }
          if (a.gameOverEnd != null && v.trim(a.gameOverEnd).length > 0) {
            Jc.endSoundName = a.gameOverEnd;
          }
        }
      };
      Jc.__super__ = rb;
      Jc.prototype = q(rb.prototype, {
        create: function () {
          Jc.instance = this;
          K.songPosition = 0;
          var a = this.boyfriend = new ad(z.instance.boyfriend.getScreenPosition().x, z.instance.boyfriend.getScreenPosition().y, Jc.characterName, true);
          a.set_x(a.x + (this.boyfriend.positionArray[0] - z.instance.boyfriend.positionArray[0]));
          a = this.boyfriend;
          a.set_y(a.y + (this.boyfriend.positionArray[1] - z.instance.boyfriend.positionArray[1]));
          this.add(this.boyfriend);
          g.sound.play(E.sound(Jc.deathSoundName));
          var b = g.camera.scroll;
          b.set_x(0);
          b.set_y(0);
          g.camera.target = null;
          this.boyfriend.playAnim("firstDeath");
          this.camFollow = new hc(0, 0, 1, 1);
          this.camFollow.setPosition(this.boyfriend.getGraphicMidpoint().x + this.boyfriend.cameraPosition[0], this.boyfriend.getGraphicMidpoint().y + this.boyfriend.cameraPosition[1]);
          a = g.camera;
          var c = g.camera.scroll.x + g.camera.width / 2;
          var d = g.camera.scroll.y + g.camera.height / 2;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          var e = da.pool.get().set(c, d);
          e._inPool = false;
          b = a.scroll;
          c = e.x - a.width * 0.5;
          d = e.y - a.height * 0.5;
          if (d == null) {
            d = 0;
          }
          if (c == null) {
            c = 0;
          }
          b.set_x(c);
          b.set_y(d);
          a = e;
          if (a._weak) {
            a.put();
          }
          this.add(this.camFollow);
          z.instance.setOnScripts("inGameOver", true);
          z.instance.callOnScripts("onGameOverStart", []);
          rb.prototype.create.call(this);
        },
        update: function (a) {
          var b = this;
          rb.prototype.update.call(this, a);
          z.instance.callOnScripts("onUpdate", [a]);
          if ($a.instance.get_ACCEPT()) {
            this.endBullshit();
          }
          if ($a.instance.get_BACK()) {
            var c = g.sound.music;
            c.cleanup(c.autoDestroy, true);
            z.deathCounter = 0;
            z.seenCutscene = false;
            z.chartingMode = false;
            ve.loadTopMod();
            if (z.isStoryMode) {
              P.switchState(new Nb());
            } else {
              P.switchState(new Va());
            }
            c = g.sound;
            var d = E.returnSound("music", "freakyMenu", null);
            c.playMusic(d);
            z.instance.callOnScripts("onGameOverConfirm", [false]);
          }
          if (this.boyfriend.animation._curAnim != null) {
            if (this.boyfriend.animation._curAnim.name == "firstDeath" && this.boyfriend.animation._curAnim.finished && this.startedDeath) {
              this.boyfriend.playAnim("deathLoop");
            }
            if (this.boyfriend.animation._curAnim.name == "firstDeath") {
              if (this.boyfriend.animation._curAnim.curFrame >= 12 && !this.moveCamera) {
                g.camera.follow(this.camFollow, wf.LOCKON, 0.6);
                this.moveCamera = true;
              }
              if (this.boyfriend.animation._curAnim.finished && !this.playingDeathSound) {
                this.startedDeath = true;
                if (z.SONG.stage == "tank") {
                  this.playingDeathSound = true;
                  this.coolStartDeath(0.2);
                  g.sound.play(E.sound("jeffGameover/jeffGameover-" + g.random.int(1, 25, [])), 1, false, null, true, function () {
                    if (!b.isEnding) {
                      var a = g.sound.music;
                      var c = 0.2;
                      var d = 1;
                      var h = 4;
                      if (h == null) {
                        h = 1;
                      }
                      if (d == null) {
                        d = 0;
                      }
                      if (c == null) {
                        c = 1;
                      }
                      if (a._channel == null) {
                        a.play();
                      }
                      if (a.fadeTween != null) {
                        a.fadeTween.cancel();
                      }
                      a.fadeTween = Ha.num(d, h, c, {
                        onComplete: null
                      }, n(a, a.volumeTween));
                    }
                  });
                } else {
                  this.coolStartDeath();
                }
              }
            }
          }
          if (g.sound.music._channel != null) {
            K.songPosition = g.sound.music._time;
          }
          z.instance.callOnScripts("onUpdatePost", [a]);
        },
        coolStartDeath: function (a) {
          if (a == null) {
            a = 1;
          }
          var b = g.sound;
          var c = E.returnSound("music", Jc.loopSoundName, null);
          b.playMusic(c, a);
        },
        endBullshit: function () {
          if (!this.isEnding) {
            this.isEnding = true;
            this.boyfriend.playAnim("deathConfirm", true);
            var a = g.sound.music;
            a.cleanup(a.autoDestroy, true);
            a = g.sound;
            var b = E.returnSound("music", Jc.endSoundName, null);
            a.play(b);
            new Gc().start(0.7, function (a) {
              g.camera.fade(-16777216, 2, false, function () {
                P.resetState();
              });
            });
            z.instance.callOnScripts("onGameOverConfirm", [true]);
          }
        },
        destroy: function () {
          Jc.instance = null;
          rb.prototype.destroy.call(this);
        },
        __class__: Jc
      });
      function dn() {
        this.holdTime = this.holdValue = 0;
        this.nextAccept = 5;
        this.optionsArray = [];
        this.curSelected = 0;
        this.curOption = null;
        rb.call(this);
        var a = new G().makeGraphic(g.width, g.height, -16777216);
        a.set_alpha(0.6);
        this.add(a);
        this.grpOptions = new ab();
        this.add(this.grpOptions);
        this.grpTexts = new ab();
        this.add(this.grpTexts);
        this.checkboxGroup = new ab();
        this.add(this.checkboxGroup);
        this.getOptions();
        a = 0;
        for (var b = this.optionsArray.length; a < b;) {
          var c = a++;
          var d = new bc(200, 360, this.optionsArray[c].name, true);
          d.isMenuItem = true;
          d.setScale(0.8);
          d.targetY = c;
          this.grpOptions.add(d);
          if (this.optionsArray[c].type == "bool") {
            d.set_x(d.x + 90);
            d.startPosition.set_x(d.startPosition.x + 90);
            d.snapToPosition();
            var e = new Mj(d.x - 105, d.y, this.optionsArray[c].getValue() == 1);
            e.sprTracker = d;
            e.offsetX -= 20;
            e.offsetY = -52;
            e.ID = c;
            this.checkboxGroup.add(e);
          } else {
            d.snapToPosition();
            e = new Ci(y.string(this.optionsArray[c].getValue()), d.get_width() + 40, 0, true, 0.8);
            e.sprTracker = d;
            e.copyAlpha = true;
            e.ID = c;
            this.grpTexts.add(e);
            this.optionsArray[c].setChild(e);
          }
          this.updateTextFrom(this.optionsArray[c]);
        }
        this.changeSelection();
        this.reloadCheckboxes();
      }
      h["substates.GameplayChangersSubstate"] = dn;
      dn.__name__ = "substates.GameplayChangersSubstate";
      dn.__super__ = rb;
      dn.prototype = q(rb.prototype, {
        getOptions: function () {
          var a = new cg("Scroll Type", "scrolltype", "string", "multiplicative", ["multiplicative", "constant"]);
          this.optionsArray.push(a);
          var b = new cg("Scroll Speed", "scrollspeed", "float", 1);
          b.scrollSpeed = 2;
          b.minValue = 0.35;
          b.changeValue = 0.05;
          b.decimals = 2;
          if (a.getValue() != "constant") {
            b.displayFormat = "%vX";
            b.maxValue = 3;
          } else {
            b.displayFormat = "%v";
            b.maxValue = 6;
          }
          this.optionsArray.push(b);
          b = new cg("Playback Rate", "songspeed", "float", 1);
          b.scrollSpeed = 1;
          b.minValue = 0.5;
          b.maxValue = 3;
          b.changeValue = 0.05;
          b.displayFormat = "%vX";
          b.decimals = 2;
          this.optionsArray.push(b);
          b = new cg("Health Gain Multiplier", "healthgain", "float", 1);
          b.scrollSpeed = 2.5;
          b.minValue = 0;
          b.maxValue = 5;
          b.changeValue = 0.1;
          b.displayFormat = "%vX";
          this.optionsArray.push(b);
          b = new cg("Health Loss Multiplier", "healthloss", "float", 1);
          b.scrollSpeed = 2.5;
          b.minValue = 0.5;
          b.maxValue = 5;
          b.changeValue = 0.1;
          b.displayFormat = "%vX";
          this.optionsArray.push(b);
          this.optionsArray.push(new cg("Instakill on Miss", "instakill", "bool", false));
          this.optionsArray.push(new cg("Practice Mode", "practice", "bool", false));
          this.optionsArray.push(new cg("Botplay", "botplay", "bool", false));
        },
        getOptionByName: function (a) {
          for (var b = 0, c = this.optionsArray; b < c.length;) {
            var d = c[b];
            ++b;
            if (d.name == a) {
              return d;
            }
          }
          return null;
        },
        update: function (a) {
          if ($a.instance.get_UI_UP_P()) {
            this.changeSelection(-1);
          }
          if ($a.instance.get_UI_DOWN_P()) {
            this.changeSelection(1);
          }
          if ($a.instance.get_BACK()) {
            this.close();
            C.saveSettings();
            g.sound.play(E.sound("cancelMenu"));
          }
          if (this.nextAccept <= 0) {
            var b = true;
            if (this.curOption.get_type() != "bool") {
              b = false;
            }
            if (b) {
              if ($a.instance.get_ACCEPT()) {
                g.sound.play(E.sound("scrollMenu"));
                this.curOption.setValue(this.curOption.getValue() == 1 ? false : true);
                this.curOption.change();
                this.reloadCheckboxes();
              }
            } else if ($a.instance.get_UI_LEFT() || $a.instance.get_UI_RIGHT()) {
              b = $a.instance.get_UI_LEFT_P() || $a.instance.get_UI_RIGHT_P();
              if (this.holdTime > 0.5 || b) {
                if (b) {
                  b = null;
                  if (this.curOption.get_type() != "string") {
                    b = $a.instance.get_UI_LEFT() ? -this.curOption.changeValue : this.curOption.changeValue;
                  }
                  switch (this.curOption.get_type()) {
                    case "float":
                    case "int":
                    case "percent":
                      this.holdValue = this.curOption.getValue() + b;
                      if (this.holdValue < this.curOption.minValue) {
                        this.holdValue = this.curOption.minValue;
                      } else if (this.holdValue > this.curOption.maxValue) {
                        this.holdValue = this.curOption.maxValue;
                      }
                      switch (this.curOption.get_type()) {
                        case "int":
                          this.holdValue = Math.round(this.holdValue);
                          this.curOption.setValue(this.holdValue);
                          break;
                        case "float":
                        case "percent":
                          this.holdValue = jc.roundDecimal(this.holdValue, this.curOption.decimals);
                          this.curOption.setValue(this.holdValue);
                      }
                      break;
                    case "string":
                      b = this.curOption.curOption;
                      if ($a.instance.get_UI_LEFT_P()) {
                        --b;
                      } else {
                        ++b;
                      }
                      if (b < 0) {
                        b = this.curOption.options.length - 1;
                      } else if (b >= this.curOption.options.length) {
                        b = 0;
                      }
                      this.curOption.curOption = b;
                      this.curOption.setValue(this.curOption.options[b]);
                      if (this.curOption.name == "Scroll Type") {
                        b = this.getOptionByName("Scroll Speed");
                        if (b != null) {
                          if (this.curOption.getValue() == "constant") {
                            b.displayFormat = "%v";
                            b.maxValue = 6;
                          } else {
                            b.displayFormat = "%vX";
                            b.maxValue = 3;
                            if (b.getValue() > 3) {
                              b.setValue(3);
                            }
                          }
                          this.updateTextFrom(b);
                        }
                      }
                  }
                  this.updateTextFrom(this.curOption);
                  this.curOption.change();
                  g.sound.play(E.sound("scrollMenu"));
                } else if (this.curOption.get_type() != "string") {
                  this.holdValue = Math.max(this.curOption.minValue, Math.min(this.curOption.maxValue, this.holdValue + this.curOption.scrollSpeed * a * ($a.instance.get_UI_LEFT() ? -1 : 1)));
                  switch (this.curOption.get_type()) {
                    case "int":
                      this.curOption.setValue(Math.round(this.holdValue));
                      break;
                    case "float":
                    case "percent":
                      this.curOption.setValue(jc.roundDecimal(Math.max(this.curOption.minValue, Math.min(this.curOption.maxValue, this.holdValue + this.curOption.changeValue - this.holdValue % this.curOption.changeValue)), this.curOption.decimals));
                  }
                  this.updateTextFrom(this.curOption);
                  this.curOption.change();
                }
              }
              if (this.curOption.get_type() != "string") {
                this.holdTime += a;
              }
            } else if ($a.instance.get_UI_LEFT_R() || $a.instance.get_UI_RIGHT_R()) {
              this.clearHold();
            }
            if ($a.instance.get_RESET()) {
              b = 0;
              for (var c = this.optionsArray.length; b < c;) {
                var d = b++;
                d = this.optionsArray[d];
                d.setValue(d.defaultValue);
                if (d.get_type() != "bool") {
                  if (d.get_type() == "string") {
                    d.curOption = d.options.indexOf(d.getValue());
                  }
                  this.updateTextFrom(d);
                }
                if (d.name == "Scroll Speed") {
                  d.displayFormat = "%vX";
                  d.maxValue = 3;
                  if (d.getValue() > 3) {
                    d.setValue(3);
                  }
                  this.updateTextFrom(d);
                }
                d.change();
              }
              g.sound.play(E.sound("cancelMenu"));
              this.reloadCheckboxes();
            }
          }
          if (this.nextAccept > 0) {
            --this.nextAccept;
          }
          rb.prototype.update.call(this, a);
        },
        updateTextFrom: function (a) {
          var b = a.displayFormat;
          var c = a.getValue();
          if (a.get_type() == "percent") {
            c *= 100;
          }
          var d = a.defaultValue;
          a.set_text(v.replace(v.replace(b, "%v", c), "%d", d));
        },
        clearHold: function () {
          if (this.holdTime > 0.5) {
            g.sound.play(E.sound("scrollMenu"));
          }
          this.holdTime = 0;
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          if (this.curSelected < 0) {
            this.curSelected = this.optionsArray.length - 1;
          }
          if (this.curSelected >= this.optionsArray.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpOptions.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
            }
          }
          for (a = new Cc(this.grpTexts.members, null); a.hasNext();) {
            b = a.next();
            b.set_alpha(0.6);
            if (b.ID == this.curSelected) {
              b.set_alpha(1);
            }
          }
          this.curOption = this.optionsArray[this.curSelected];
          g.sound.play(E.sound("scrollMenu"));
        },
        reloadCheckboxes: function () {
          for (var a = new Cc(this.checkboxGroup.members, null); a.hasNext();) {
            var b = a.next();
            b.set_daValue(this.optionsArray[b.ID].getValue() == 1);
          }
        },
        __class__: dn
      });
      function cg(a, b, c, d, e) {
        if (d == null) {
          d = "null variable value";
        }
        if (c == null) {
          c = "bool";
        }
        this.name = "Unknown";
        this.displayFormat = "%v";
        this.decimals = 1;
        this.minValue = this.maxValue = null;
        this.changeValue = 1;
        this.options = null;
        this.curOption = 0;
        this.variable = this.defaultValue = null;
        this.scrollSpeed = 50;
        this.type = "bool";
        this.onChange = null;
        this.name = a;
        this.variable = b;
        this.type = c;
        this.defaultValue = d;
        this.options = e;
        if (d == "null variable value") {
          switch (c) {
            case "bool":
              d = false;
              break;
            case "float":
            case "int":
              d = 0;
              break;
            case "percent":
              d = 1;
              break;
            case "string":
              d = "";
              if (e.length > 0) {
                d = e[0];
              }
          }
        }
        if (this.getValue() == null) {
          this.setValue(d);
        }
        switch (c) {
          case "percent":
            this.displayFormat = "%v%";
            this.changeValue = 0.01;
            this.minValue = 0;
            this.maxValue = 1;
            this.scrollSpeed = 0.5;
            this.decimals = 2;
            break;
          case "string":
            a = e.indexOf(this.getValue());
            if (a > -1) {
              this.curOption = a;
            }
        }
      }
      h["substates.GameplayOption"] = cg;
      cg.__name__ = "substates.GameplayOption";
      cg.prototype = {
        change: function () {
          if (this.onChange != null) {
            this.onChange();
          }
        },
        getValue: function () {
          return C.data.gameplaySettings.h[this.variable];
        },
        setValue: function (a) {
          C.data.gameplaySettings.h[this.variable] = a;
        },
        set_text: function (a) {
          if (a == null) {
            a = "";
          }
          if (this.child != null) {
            this.child.set_text(a);
          }
          return null;
        },
        get_type: function () {
          var a = "bool";
          switch (v.trim(this.type.toLowerCase())) {
            case "fl":
              a = "float";
              break;
            case "integer":
              a = "int";
              break;
            case "str":
              a = "string";
              break;
            case "float":
            case "int":
            case "percent":
            case "string":
              a = this.type;
          }
          return this.type = a;
        },
        __class__: cg,
        __properties__: {
          set_text: "set_text",
          get_type: "get_type"
        }
      };
      function Ue() {
        this.cantUnpause = 0.1;
        this.holdTime = 0;
        this.curTime = Math.max(0, K.songPosition);
        this.curSelected = 0;
        this.difficultyChoices = [];
        this.menuItemsOG = "Resume;Restart Song;Change Difficulty;Options;botplay;Exit to menu".split(";");
        this.menuItems = [];
        rb.call(this);
      }
      h["substates.PauseSubState"] = Ue;
      Ue.__name__ = "substates.PauseSubState";
      Ue.restartSong = function (a) {
        if (a == null) {
          a = false;
        }
        z.instance.paused = true;
        g.sound.music.set_volume(0);
        z.instance.vocals.set_volume(0);
        if (a) {
          Vb.skipNextTransIn = true;
          Vb.skipNextTransOut = true;
        }
        P.resetState();
      };
      Ue.__super__ = rb;
      Ue.prototype = q(rb.prototype, {
        create: function () {
          if (qb.list.length < 2) {
            L.remove(this.menuItemsOG, "Change Difficulty");
          }
          if (z.chartingMode) {
            this.menuItemsOG.splice(2, 0, "Leave Charting Mode");
            var a = 0;
            if (!z.instance.startingSong) {
              a = 1;
              this.menuItemsOG.splice(3, 0, "Skip Time");
            }
            this.menuItemsOG.splice(3 + a, 0, "End Song");
            this.menuItemsOG.splice(4 + a, 0, "Toggle Practice Mode");
            this.menuItemsOG.splice(5 + a, 0, "Toggle Botplay");
          }
          this.menuItems = this.menuItemsOG;
          a = 0;
          for (var b = qb.list.length; a < b;) {
            var c = a++;
            this.difficultyChoices.push(qb.list[c == null ? z.storyDifficulty : c]);
          }
          this.difficultyChoices.push("BACK");
          this.pauseMusic = new Yd();
          try {
            var d = this.getPauseSong();
            if (d != null) {
              var e = this.pauseMusic;
              var f = E.returnSound("music", d, null);
              e.loadEmbedded(f, true, true);
            }
          } catch (k) {
            Oa.lastError = k;
          }
          this.pauseMusic.set_volume(0);
          this.pauseMusic.play(false, g.random.int(0, this.pauseMusic._length / 2 | 0));
          g.sound.list.add(this.pauseMusic);
          d = new G().makeGraphic(1, 1, -16777216);
          e = d.scale;
          f = g.width;
          a = g.height;
          if (a == null) {
            a = 0;
          }
          if (f == null) {
            f = 0;
          }
          e.set_x(f);
          e.set_y(a);
          d.updateHitbox();
          d.set_alpha(0);
          e = d.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.add(d);
          f = new R(20, 15, 0, z.SONG.song, 32);
          e = f.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          f.setFormat("assets/fonts/vcr.ttf", 32);
          f.updateHitbox();
          this.add(f);
          a = null;
          a = new R(20, 47, 0, qb.list[a == null ? z.storyDifficulty : a].toUpperCase(), 32);
          e = a.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          a.setFormat("assets/fonts/vcr.ttf", 32);
          a.updateHitbox();
          this.add(a);
          b = new R(20, 79, 0, "Blueballed: " + z.deathCounter, 32);
          e = b.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          b.setFormat("assets/fonts/vcr.ttf", 32);
          b.updateHitbox();
          this.add(b);
          this.practiceText = new R(20, 116, 0, "PRACTICE MODE", 32);
          e = this.practiceText.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.practiceText.setFormat("assets/fonts/vcr.ttf", 32);
          this.practiceText.set_x(g.width - (this.practiceText.get_width() + 20));
          this.practiceText.updateHitbox();
          this.practiceText.set_visible(z.instance.practiceMode);
          this.add(this.practiceText);
          c = new R(20, 116, 0, "CHARTING MODE", 32);
          e = c.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          c.setFormat("assets/fonts/vcr.ttf", 32);
          c.set_x(g.width - (c.get_width() + 20));
          c.set_y(g.height - (c.get_height() + 20));
          c.updateHitbox();
          c.set_visible(z.chartingMode);
          this.add(c);
          b.set_alpha(0);
          a.set_alpha(0);
          f.set_alpha(0);
          f.set_x(g.width - (f.get_width() + 20));
          a.set_x(g.width - (a.get_width() + 20));
          b.set_x(g.width - (b.get_width() + 20));
          Ha.tween(d, {
            alpha: 0.6
          }, 0.4, {
            ease: X.quartInOut
          });
          Ha.tween(f, {
            alpha: 1,
            y: 20
          }, 0.4, {
            ease: X.quartInOut,
            startDelay: 0.3
          });
          Ha.tween(a, {
            alpha: 1,
            y: a.y + 5
          }, 0.4, {
            ease: X.quartInOut,
            startDelay: 0.5
          });
          Ha.tween(b, {
            alpha: 1,
            y: b.y + 5
          }, 0.4, {
            ease: X.quartInOut,
            startDelay: 0.7
          });
          this.grpMenuShit = new ab();
          this.add(this.grpMenuShit);
          this.missingTextBG = new G().makeGraphic(1, 1, -16777216);
          e = this.missingTextBG.scale;
          f = g.width;
          a = g.height;
          if (a == null) {
            a = 0;
          }
          if (f == null) {
            f = 0;
          }
          e.set_x(f);
          e.set_y(a);
          this.missingTextBG.updateHitbox();
          this.missingTextBG.set_alpha(0.6);
          this.missingTextBG.set_visible(false);
          this.add(this.missingTextBG);
          this.missingText = new R(50, 0, g.width - 100, "", 24);
          this.missingText.setFormat("assets/fonts/vcr.ttf", 24, -1, "center", cb.OUTLINE, -16777216);
          e = this.missingText.scrollFactor;
          e.set_x(0);
          e.set_y(0);
          this.missingText.set_visible(false);
          this.add(this.missingText);
          this.regenMenu();
          this.set_cameras([g.cameras.list[g.cameras.list.length - 1]]);
          rb.prototype.create.call(this);
        },
        getPauseSong: function () {
          if (Ue.songName != null) {
            var a = Ue.songName;
            var b = new na("[~&\\\\;:<>#]", "");
            var c = new na("[.,'\"%?!]", "");
            a = b.split(v.replace(a, " ", "-")).join("-");
            var d = c.split(a).join("").toLowerCase();
          } else {
            d = "";
          }
          a = C.data.pauseMusic;
          b = new na("[~&\\\\;:<>#]", "");
          c = new na("[.,'\"%?!]", "");
          a = b.split(v.replace(a, " ", "-")).join("-");
          c = c.split(a).join("").toLowerCase();
          if (d == "none" || d != "none" && c == "none") {
            return null;
          } else if (d != "") {
            return d;
          } else {
            return c;
          }
        },
        update: function (a) {
          this.cantUnpause -= a;
          if (this.pauseMusic._volume < 0.5) {
            var b = this.pauseMusic;
            b.set_volume(b._volume + a * 0.01);
          }
          rb.prototype.update.call(this, a);
          if ($a.instance.get_BACK()) {
            this.close();
          } else {
            this.updateSkipTextStuff();
            if ($a.instance.get_UI_UP_P()) {
              this.changeSelection(-1);
            }
            if ($a.instance.get_UI_DOWN_P()) {
              this.changeSelection(1);
            }
            b = this.menuItems[this.curSelected];
            if (b == "Skip Time" && ($a.instance.get_UI_LEFT_P() && (g.sound.play(E.sound("scrollMenu"), 0.4), this.curTime -= 1000, this.holdTime = 0), $a.instance.get_UI_RIGHT_P() && (g.sound.play(E.sound("scrollMenu"), 0.4), this.curTime += 1000, this.holdTime = 0), $a.instance.get_UI_LEFT() || $a.instance.get_UI_RIGHT())) {
              this.holdTime += a;
              if (this.holdTime > 0.5) {
                this.curTime += a * 45000 * ($a.instance.get_UI_LEFT() ? -1 : 1);
              }
              if (this.curTime >= g.sound.music._length) {
                this.curTime -= g.sound.music._length;
              } else if (this.curTime < 0) {
                this.curTime += g.sound.music._length;
              }
              this.updateSkipTimeText();
            }
            if ($a.instance.get_ACCEPT() && (this.cantUnpause <= 0 || !$a.instance.controllerMode)) {
              if (this.menuItems == this.difficultyChoices) {
                try {
                  if (this.menuItems.length - 1 != this.curSelected && this.difficultyChoices.indexOf(b) != -1) {
                    var c = z.SONG.song;
                    var d = Ya.formatSong(c, this.curSelected);
                    z.SONG = Ld.loadFromJson(d, c);
                    z.storyDifficulty = this.curSelected;
                    P.resetState();
                    g.sound.music.set_volume(0);
                    z.changedDifficulty = true;
                    z.chartingMode = false;
                    return;
                  }
                } catch (e) {
                  Oa.lastError = e;
                  c = I.caught(e).unwrap();
                  Ab.trace("ERROR! " + y.string(c), {
                    fileName: "source/substates/PauseSubState.hx",
                    lineNumber: 250,
                    className: "substates.PauseSubState",
                    methodName: "update"
                  });
                  c = c.toString();
                  if (v.startsWith(c, "[file_contents,assets/data/")) {
                    c = "Missing file: " + c.substring(27, c.length - 1);
                  }
                  this.missingText.set_text("ERROR WHILE LOADING CHART:\n" + c);
                  c = this.missingText;
                  d = 16;
                  if (d == null) {
                    d = 17;
                  }
                  if (d == 1 || d == 17) {
                    c.set_x((g.width - c.get_width()) / 2);
                  }
                  if (d == 16 || d == 17) {
                    c.set_y((g.height - c.get_height()) / 2);
                  }
                  this.missingText.set_visible(true);
                  this.missingTextBG.set_visible(true);
                  g.sound.play(E.sound("cancelMenu"));
                  rb.prototype.update.call(this, a);
                  return;
                }
                this.menuItems = this.menuItemsOG;
                this.regenMenu();
              }
              switch (b) {
                case "Change Difficulty":
                  this.menuItems = this.difficultyChoices;
                  this.deleteSkipTimeText();
                  this.regenMenu();
                  break;
                case "End Song":
                  this.close();
                  z.instance.notes.clear();
                  z.instance.unspawnNotes = [];
                  z.instance.finishSong(true);
                  break;
                case "Exit to menu":
                  z.deathCounter = 0;
                  z.seenCutscene = false;
                  ve.loadTopMod();
                  if (z.isStoryMode) {
                    P.switchState(new Nb());
                  } else {
                    P.switchState(new Va());
                  }
                  a = g.sound;
                  c = E.returnSound("music", "freakyMenu", null);
                  a.playMusic(c);
                  z.changedDifficulty = false;
                  z.chartingMode = false;
                  g.camera.set_followLerp(0);
                  break;
                case "Leave Charting Mode":
                  Ue.restartSong();
                  z.chartingMode = false;
                  break;
                case "Options":
                  z.instance.paused = true;
                  z.instance.vocals.set_volume(0);
                  P.switchState(new jd());
                  if (C.data.pauseMusic != "None") {
                    a = g.sound;
                    d = C.data.pauseMusic;
                    b = new na("[~&\\\\;:<>#]", "");
                    c = new na("[.,'\"%?!]", "");
                    d = b.split(v.replace(d, " ", "-")).join("-");
                    c = E.returnSound("music", c.split(d).join("").toLowerCase(), null);
                    a.playMusic(c, this.pauseMusic._volume);
                    g.sound.music.set_time(this.pauseMusic._time);
                  }
                  jd.onPlayState = true;
                  break;
                case "Restart Song":
                  Ue.restartSong();
                  break;
                case "Resume":
                  this.close();
                  break;
                case "Skip Time":
                  if (this.curTime < K.songPosition) {
                    z.startOnTime = this.curTime;
                    Ue.restartSong(true);
                  } else {
                    if (this.curTime != K.songPosition) {
                      z.instance.clearNotesBefore(this.curTime);
                      z.instance.setSongTime(this.curTime);
                    }
                    this.close();
                  }
                  break;
                case "Toggle Practice Mode":
                  z.instance.practiceMode = !z.instance.practiceMode;
                  z.changedDifficulty = true;
                  this.practiceText.set_visible(z.instance.practiceMode);
                  break;
                case "botplay":
                  z.instance.cpuControlled = !z.instance.cpuControlled;
                  z.changedDifficulty = true;
                  z.instance.botplayTxt.set_visible(z.instance.cpuControlled);
                  z.instance.botplayTxt.set_alpha(1);
                  z.instance.botplaySine = 0;
              }
            }
          }
        },
        deleteSkipTimeText: function () {
          if (this.skipTimeText != null) {
            this.skipTimeText.kill();
            this.remove(this.skipTimeText);
            this.skipTimeText.destroy();
          }
          this.skipTimeTracker = this.skipTimeText = null;
        },
        destroy: function () {
          this.pauseMusic.destroy();
          rb.prototype.destroy.call(this);
        },
        changeSelection: function (a) {
          if (a == null) {
            a = 0;
          }
          this.curSelected += a;
          g.sound.play(E.sound("scrollMenu"), 0.4);
          if (this.curSelected < 0) {
            this.curSelected = this.menuItems.length - 1;
          }
          if (this.curSelected >= this.menuItems.length) {
            this.curSelected = 0;
          }
          for (var b = a = 0, c = this.grpMenuShit.members; b < c.length;) {
            var d = c[b];
            ++b;
            d.targetY = a - this.curSelected;
            ++a;
            d.set_alpha(0.6);
            if (d.targetY == 0) {
              d.set_alpha(1);
              if (d == this.skipTimeTracker) {
                this.curTime = Math.max(0, K.songPosition);
                this.updateSkipTimeText();
              }
            }
          }
          this.missingText.set_visible(false);
          this.missingTextBG.set_visible(false);
        },
        regenMenu: function () {
          for (var a = 0, b = this.grpMenuShit.members.length; a < b;) {
            a++;
            var c = this.grpMenuShit.members[0];
            c.kill();
            this.grpMenuShit.remove(c, true);
            c.destroy();
          }
          a = 0;
          for (b = this.menuItems.length; a < b;) {
            var d = a++;
            c = new bc(90, 320, this.menuItems[d], true);
            c.isMenuItem = true;
            c.targetY = d;
            this.grpMenuShit.add(c);
            if (this.menuItems[d] == "Skip Time") {
              this.skipTimeText = new R(0, 0, 0, "", 64);
              this.skipTimeText.setFormat("assets/fonts/vcr.ttf", 64, -1, "center", cb.OUTLINE, -16777216);
              d = this.skipTimeText.scrollFactor;
              d.set_x(0);
              d.set_y(0);
              this.skipTimeText.set_borderSize(2);
              this.skipTimeTracker = c;
              this.add(this.skipTimeText);
              this.updateSkipTextStuff();
              this.updateSkipTimeText();
            }
          }
          this.curSelected = 0;
          this.changeSelection();
        },
        updateSkipTextStuff: function () {
          if (this.skipTimeText != null && this.skipTimeTracker != null) {
            this.skipTimeText.set_x(this.skipTimeTracker.x + this.skipTimeTracker.get_width() + 60);
            this.skipTimeText.set_y(this.skipTimeTracker.y);
            this.skipTimeText.set_visible(this.skipTimeTracker.alpha >= 1);
          }
        },
        updateSkipTimeText: function () {
          this.skipTimeText.set_text(Xb.formatTime(Math.max(0, Math.floor(this.curTime / 1000)), false) + " / " + Xb.formatTime(Math.max(0, Math.floor(g.sound.music._length / 1000)), false));
        },
        __class__: Ue
      });
      function Mi(a, b, c, d, e, f, g) {
        if (e == null) {
          e = false;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = "";
        }
        this.cornerSize = 10;
        this.goAnyway = false;
        this.theText = "";
        this.buttons = new G(473.3, 450);
        this.selected = 0;
        var k = this;
        this.selected = b;
        this.okc = c;
        this.cancelc = d;
        this.theText = a;
        this.goAnyway = e;
        a = "OK";
        b = "CANCEL";
        if (f != null) {
          a = f;
        }
        if (g != null) {
          b = g;
        }
        this.buttonAccept = new zb(473.3, 450, a, function () {
          if (k.okc != null) {
            k.okc();
          }
          k.close();
        });
        this.buttonNo = new zb(633.3, 450, b, function () {
          if (k.cancelc != null) {
            k.cancelc();
          }
          k.close();
        });
        rb.call(this);
      }
      h["substates.Prompt"] = Mi;
      Mi.__name__ = "substates.Prompt";
      Mi.__super__ = rb;
      Mi.prototype = q(rb.prototype, {
        create: function () {
          rb.prototype.create.call(this);
          if (this.goAnyway) {
            if (this.okc != null) {
              this.okc();
            }
            this.close();
          } else {
            this.panel = new G(0, 0);
            this.panelbg = new G(0, 0);
            this.makeSelectorGraphic(this.panel, 300, 150, -6710887);
            this.makeSelectorGraphic(this.panelbg, 304, 154, -16777216);
            var a = this.panel.scrollFactor;
            a.set_x(0);
            a.set_y(0);
            var b = this.panel;
            b.set_x((g.width - b.get_width()) / 2);
            b.set_y((g.height - b.get_height()) / 2);
            a = this.panelbg.scrollFactor;
            a.set_x(0);
            a.set_y(0);
            b = this.panelbg;
            b.set_x((g.width - b.get_width()) / 2);
            b.set_y((g.height - b.get_height()) / 2);
            this.add(this.panelbg);
            this.add(this.panel);
            this.add(this.buttonAccept);
            this.add(this.buttonNo);
            a = new R(this.buttonNo.get_width() * 2, this.panel.y, 300, this.theText, 16);
            a.set_alignment("center");
            this.add(a);
            a.set_x((g.width - a.get_width()) / 2);
            a.set_y((g.height - a.get_height()) / 2);
            b = this.buttonAccept;
            b.set_x((g.width - b.get_width()) / 2);
            b.set_y((g.height - b.get_height()) / 2);
            b = this.buttonNo;
            b.set_x((g.width - b.get_width()) / 2);
            b.set_y((g.height - b.get_height()) / 2);
            b = this.buttonAccept;
            b.set_x(b.x - this.buttonNo.get_width() / 1.5);
            this.buttonAccept.set_y(this.panel.y + this.panel.get_height() - 30);
            b = this.buttonNo;
            b.set_x(b.x + this.buttonNo.get_width() / 1.5);
            this.buttonNo.set_y(this.panel.y + this.panel.get_height() - 30);
            a = a.scrollFactor;
            a.set_x(0);
            a.set_y(0);
          }
        },
        makeSelectorGraphic: function (a, b, c, d) {
          a.makeGraphic(b, c, d);
          a.get_pixels().fillRect(new ba(0, 190, a.get_width(), 5), 0);
          a.get_pixels().fillRect(new ba(0, 0, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, false, false, d);
          a.get_pixels().fillRect(new ba(a.get_width() - this.cornerSize, 0, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, true, false, d);
          a.get_pixels().fillRect(new ba(0, a.get_height() - this.cornerSize, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, false, true, d);
          a.get_pixels().fillRect(new ba(a.get_width() - this.cornerSize, a.get_height() - this.cornerSize, this.cornerSize, this.cornerSize), 0);
          this.drawCircleCornerOnSelector(a, true, true, d);
        },
        drawCircleCornerOnSelector: function (a, b, c, d) {
          var e = a.get_width() - this.cornerSize;
          var f = c ? a.get_height() - 1 : 0;
          if (c) {
            f -= 2;
          }
          a.get_pixels().fillRect(new ba(b ? e : 1, Math.abs(f - 8) | 0, 10, 3), d);
          if (c) {
            ++f;
          }
          a.get_pixels().fillRect(new ba(b ? e : 2, Math.abs(f - 6) | 0, 9, 2), d);
          if (c) {
            ++f;
          }
          a.get_pixels().fillRect(new ba(b ? e : 3, Math.abs(f - 5) | 0, 8, 1), d);
          a.get_pixels().fillRect(new ba(b ? e : 4, Math.abs(f - 4) | 0, 7, 1), d);
          a.get_pixels().fillRect(new ba(b ? e : 5, Math.abs(f - 3) | 0, 6, 1), d);
          a.get_pixels().fillRect(new ba(b ? e : 6, Math.abs(f - 2) | 0, 5, 1), d);
          a.get_pixels().fillRect(new ba(b ? e : 8, Math.abs(f - 1) | 0, 3, 1), d);
        },
        __class__: Mi
      });
      function fk(a, b, c, d) {
        if (d == null) {
          d = -1;
        }
        this.onYes = false;
        this.alphabetArray = [];
        this.song = a;
        this.difficulty = b;
        this.week = d;
        rb.call(this);
        if (d > -1) {
          a = jb.weeksLoaded.h[jb.weeksList[d]].weekName;
        }
        a += " (" + qb.list[b == null ? z.storyDifficulty : b] + ")?";
        this.bg = new G().makeGraphic(g.width, g.height, -16777216);
        this.bg.set_alpha(0);
        b = this.bg.scrollFactor;
        b.set_x(0);
        b.set_y(0);
        this.add(this.bg);
        var e = a.length > 18 ? 0.8 : 1;
        var f = new bc(0, 180, "Reset the score of", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          f.set_x((g.width - f.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          f.set_y((g.height - f.get_height()) / 2);
        }
        this.alphabetArray.push(f);
        f.set_alpha(0);
        this.add(f);
        a = new bc(0, f.y + 90, a, true);
        a.set_scaleX(e);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          a.set_x((g.width - a.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          a.set_y((g.height - a.get_height()) / 2);
        }
        if (d == -1) {
          a.set_x(a.x + e * 60);
        }
        this.alphabetArray.push(a);
        a.set_alpha(0);
        this.add(a);
        if (d == -1) {
          this.icon = new Mf(c);
          this.icon.setGraphicSize(this.icon.get_width() * e | 0);
          this.icon.updateHitbox();
          this.icon.setPosition(a.x - this.icon.get_width() + e * 10, a.y - 30);
          this.icon.set_alpha(0);
          this.add(this.icon);
        }
        c = this.yesText = new bc(0, a.y + 150, "Yes", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          c.set_x((g.width - c.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          c.set_y((g.height - c.get_height()) / 2);
        }
        c = this.yesText;
        c.set_x(c.x - 200);
        this.add(this.yesText);
        c = this.noText = new bc(0, a.y + 150, "No", true);
        b = 1;
        if (b == null) {
          b = 17;
        }
        if (b == 1 || b == 17) {
          c.set_x((g.width - c.get_width()) / 2);
        }
        if (b == 16 || b == 17) {
          c.set_y((g.height - c.get_height()) / 2);
        }
        c = this.noText;
        c.set_x(c.x + 200);
        this.add(this.noText);
        this.updateOptions();
      }
      h["substates.ResetScoreSubState"] = fk;
      fk.__name__ = "substates.ResetScoreSubState";
      fk.__super__ = rb;
      fk.prototype = q(rb.prototype, {
        update: function (a) {
          var b = this.bg;
          b.set_alpha(b.alpha + a * 1.5);
          if (this.bg.alpha > 0.6) {
            this.bg.set_alpha(0.6);
          }
          b = 0;
          for (var c = this.alphabetArray.length; b < c;) {
            var d = b++;
            d = this.alphabetArray[d];
            d.set_alpha(d.alpha + a * 2.5);
          }
          if (this.week == -1) {
            b = this.icon;
            b.set_alpha(b.alpha + a * 2.5);
          }
          if ($a.instance.get_UI_LEFT_P() || $a.instance.get_UI_RIGHT_P()) {
            g.sound.play(E.sound("scrollMenu"), 1);
            this.onYes = !this.onYes;
            this.updateOptions();
          }
          if ($a.instance.get_BACK()) {
            g.sound.play(E.sound("cancelMenu"), 1);
            this.close();
          } else if ($a.instance.get_ACCEPT()) {
            if (this.onYes) {
              if (this.week == -1) {
                Ya.resetSong(this.song, this.difficulty);
              } else {
                Ya.resetWeek(jb.weeksList[this.week], this.difficulty);
              }
            }
            g.sound.play(E.sound("cancelMenu"), 1);
            this.close();
          }
          rb.prototype.update.call(this, a);
        },
        updateOptions: function () {
          var a = [0.75, 1];
          var b = [0.6, 1.25];
          var c = this.onYes ? 1 : 0;
          this.yesText.set_alpha(b[c]);
          var d = this.yesText.scale;
          var e = a[c];
          var f = a[c];
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
          this.noText.set_alpha(b[1 - c]);
          d = this.noText.scale;
          e = a[1 - c];
          f = a[1 - c];
          if (f == null) {
            f = 0;
          }
          if (e == null) {
            e = 0;
          }
          d.set_x(e);
          d.set_y(f);
          if (this.week == -1) {
            this.icon.animation._curAnim.set_curFrame(c);
          }
        },
        __class__: fk
      });
      function Uh() {}
      h["tjson.TJSON"] = Uh;
      Uh.__name__ = "tjson.TJSON";
      Uh.parse = function (a, b, c) {
        if (b == null) {
          b = "JSON Data";
        }
        return new Yo(a, b, c).doParse();
      };
      function Yo(a, b, c) {
        if (b == null) {
          b = "JSON Data";
        }
        this.json = a;
        this.fileName = b;
        this.currentLine = 1;
        this.lastSymbolQuoted = false;
        this.pos = 0;
        this.floatRegex = new na("^-?[0-9]*\\.[0-9]+$", "");
        this.intRegex = new na("^-?[0-9]+$", "");
        this.strProcessor = c == null ? n(this, this.defaultStringProcessor) : c;
        this.cache = [];
      }
      h["tjson.TJSONParser"] = Yo;
      Yo.__name__ = "tjson.TJSONParser";
      Yo.prototype = {
        doParse: function () {
          try {
            var a = this.getNextSymbol();
            switch (a) {
              case "[":
                return this.doArray();
              case "{":
                return this.doObject();
              default:
                return this.convertSymbolToProperType(a);
            }
          } catch (b) {
            Oa.lastError = b;
            a = I.caught(b).unwrap();
            if (typeof a == "string") {
              throw I.thrown(this.fileName + " on line " + this.currentLine + ": " + a);
            }
            throw b;
          }
        },
        doObject: function () {
          var a = {};
          var b = false;
          for (this.cache.push(a); this.pos < this.json.length;) {
            var c = this.getNextSymbol();
            if (c != "," || this.lastSymbolQuoted) {
              if (c == "}" && !this.lastSymbolQuoted) {
                if (b && a.TJ_unserialize != null) {
                  a.TJ_unserialize();
                }
                return a;
              }
              var d = this.getNextSymbol();
              if (d != ":") {
                throw I.thrown("Expected ':' but got '" + d + "' instead.");
              }
              d = this.getNextSymbol();
              if (c == "_hxcls") {
                a = h[d];
                if (a == null) {
                  throw I.thrown("Invalid class name - " + d);
                }
                a = Object.create(a.prototype);
                this.cache.pop();
                this.cache.push(a);
                b = true;
              } else {
                d = d != "{" || this.lastSymbolQuoted ? d != "[" || this.lastSymbolQuoted ? this.convertSymbolToProperType(d) : this.doArray() : this.doObject();
                a[c] = d;
              }
            }
          }
          throw I.thrown("Unexpected end of file. Expected '}'");
        },
        doArray: function () {
          var a = [];
          var b;
          while (this.pos < this.json.length) {
            b = this.getNextSymbol();
            if (b != "," || this.lastSymbolQuoted) {
              if (b != "]" || this.lastSymbolQuoted) {
                b = b != "{" || this.lastSymbolQuoted ? b != "[" || this.lastSymbolQuoted ? this.convertSymbolToProperType(b) : this.doArray() : this.doObject();
              } else {
                return a;
              }
              a.push(b);
            }
          }
          throw I.thrown("Unexpected end of file. Expected ']'");
        },
        convertSymbolToProperType: function (a) {
          if (this.lastSymbolQuoted) {
            if (v.startsWith(a, Uh.OBJECT_REFERENCE_PREFIX)) {
              a = y.parseInt(L.substr(a, Uh.OBJECT_REFERENCE_PREFIX.length, null));
              return this.cache[a];
            } else {
              return a;
            }
          } else if (this.looksLikeFloat(a)) {
            return parseFloat(a);
          } else if (this.looksLikeInt(a)) {
            return y.parseInt(a);
          } else if (a.toLowerCase() == "true") {
            return true;
          } else if (a.toLowerCase() == "false") {
            return false;
          } else if (a.toLowerCase() == "null") {
            return null;
          } else {
            return a;
          }
        },
        looksLikeFloat: function (a) {
          if (this.floatRegex.match(a)) {
            return true;
          } else if (this.intRegex.match(a)) {
            a = this.intRegex.matched(0);
            if (L.cca(a, 0) == 45) {
              return a > "-2147483648";
            } else {
              return a > "2147483647";
            }
          } else {
            return false;
          }
        },
        looksLikeInt: function (a) {
          return this.intRegex.match(a);
        },
        getNextSymbol: function () {
          this.lastSymbolQuoted = false;
          var a;
          var b = false;
          var c = "";
          var d = "";
          var e = false;
          var f = false;
          var g = false;
          var h = false;
          while (this.pos < this.json.length) {
            a = this.json.charAt(this.pos++);
            if (a == "\n" && !f) {
              this.currentLine++;
            }
            if (g) {
              if (a == "\n" || a == "\r") {
                g = false;
                this.pos++;
              }
            } else if (h) {
              if (a == "*" && this.json.charAt(this.pos) == "/") {
                h = false;
                this.pos++;
              }
            } else if (b) {
              if (e) {
                e = false;
                if (a == "'" || a == "\"") {
                  d += a;
                  continue;
                }
                if (a == "t") {
                  d += "\t";
                  continue;
                }
                if (a == "n") {
                  d += "\n";
                  continue;
                }
                if (a == "\\") {
                  d += "\\";
                  continue;
                }
                if (a == "r") {
                  d += "\r";
                  continue;
                }
                if (a == "/") {
                  d += "/";
                  continue;
                }
                if (a == "u") {
                  for (var l = a = 0; l < 4;) {
                    l++;
                    if (this.pos >= this.json.length) {
                      throw I.thrown("Unfinished UTF8 character");
                    }
                    var p = L.cca(this.json, this.pos++);
                    a <<= 4;
                    if (p >= 48 && p <= 57) {
                      a += p - 48;
                    } else if (p >= 65 && p <= 70) {
                      a += 10 + p - 65;
                    } else if (p >= 97 && p <= 102) {
                      a += 10 + p - 95;
                    } else {
                      throw I.thrown("Not a hex digit");
                    }
                  }
                  l = new jo();
                  l.__b += String.fromCodePoint(a);
                  d += l.__b;
                  continue;
                }
                throw I.thrown("Invalid escape sequence '\\" + a + "'");
              }
              if (a == "\\") {
                e = true;
              } else {
                if (a == c) {
                  return d;
                }
                d += a;
              }
            } else {
              if (a == "/") {
                l = this.json.charAt(this.pos);
                if (l == "/") {
                  g = true;
                  this.pos++;
                  continue;
                } else if (l == "*") {
                  h = true;
                  this.pos++;
                  continue;
                }
              }
              if (f) {
                if (a == " " || a == "\n" || a == "\r" || a == "\t" || a == "," || a == ":" || a == "}" || a == "]") {
                  this.pos--;
                  return d;
                }
                d += a;
              } else if (a != " " && a != "\t" && a != "\n" && a != "\r") {
                if (a == "{" || a == "}" || a == "[" || a == "]" || a == "," || a == ":") {
                  return a;
                }
                if (a == "'" || a == "\"") {
                  b = true;
                  c = a;
                  this.lastSymbolQuoted = true;
                } else {
                  f = true;
                  d = a;
                }
              }
            }
          }
          if (b) {
            throw I.thrown("Unexpected end of data. Expected ( " + c + " )");
          }
          return d;
        },
        defaultStringProcessor: function (a) {
          return a;
        },
        __class__: Yo
      };
      F.$haxeUID |= 0;
      if (typeof performance != "undefined" && typeof performance.now == "function") {
        L.now = performance.now.bind(performance);
      }
      h.Math = Math;
      if (String.fromCodePoint == null) {
        String.fromCodePoint = function (a) {
          if (a < 65536) {
            return String.fromCharCode(a);
          } else {
            return String.fromCharCode((a >> 10) + 55232) + String.fromCharCode((a & 1023) + 56320);
          }
        };
      }
      Object.defineProperty(String.prototype, "__class__", {
        value: h.String = String,
        enumerable: false,
        writable: true
      });
      String.__name__ = "String";
      h.Array = Array;
      Array.__name__ = "Array";
      Date.prototype.__class__ = h.Date = Date;
      Date.__name__ = "Date";
      var Ck = {};
      var Ip = {};
      var tp = Number;
      var Hp = Boolean;
      var aj = {};
      var yp = {};
      wa.__toStr = {}.toString;
      $e.content = [{
        name: "__ASSET__:bitmap_flixel_system_GraphicLogo",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUdRQUFBQmtDQU1BQUFCSFBHVm1BQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQkRsQk1WRVVBQUFBN1FQODVRZjhEemZzRXp2c0V6UHYzSkUwQXpQKzNTME1EelB3RHpmb0R6Zm9FemZzQXp2ODdRUDg2UVA4elJQLy93akU2UXY4NlFQOER5K2c2UVA4N1FQLy93REgvd0RMMEprNzFKMDcveFRIL3dUTC96RFAxSms3L0lrVC93VEQvd0RIMUprMzFKazczSVVyMEprNEF6di90d0REMEowMy93REgvd3pFRHpQdkFSa1VzWDhmSXZ5Ny93VEQwSmt6L3dESTdRUC8vd2pEL3dUTC93REVMb2tzV2pIUTNTUEU3UWY4RHNTOGticXd2VjlVT20xa0R5KzBDeGFrQ3c0NGhkWjR6VU9NQXZFb0V6ZnNCdjJVQndIUDFKMDRBdVNMbE1Fdi93VExIUWtWYmdqTFB2eThQdVNPWlhUMmZ2aXlQdlNzdG5TcGZ2Q2p2d0RFUHJ5U3Z2aTBlcGlkNmNEZ3Z1aVhLcmR2WEFBQUFOblJTVGxNQXZ6L3ZQNzgvRDc5Zm45OS9IKytmRHo4ZmY3L2ZYKytmWDk4ZmZ3L1BEMS9mbjM4Zjd5L2Z2Nzh2cjkrLzMyOHZyNDlQajgvNUdwWGFBQUFDa1VsRVFWUjQyclhXQlpJYk1SaEU0VjVtWm1ZTTgwSTRzMkE3ekxuL1FVTDBLb285Y2VlWDN3Vys2cG9hU2FvMmJIWkJWaXZyWncwQytidVp4U1dEMk5nNk14RVlnM0FSbU5WbWpMbjVNMm9lb2JWVmc3QVJtTEV5b252NWpIeUU5bUJTWXZlTWJDUmw5dXNSVnlFY3hQbHROdmt4NGdpTVIvZ0l2dzAvUm40RUJpSS93dDg1QjVFWG9jc1h6OHg4NU5uemR6VVg4WTN6YzVUY0NJYXR5RGQ4UmI3eG94ZXRRdDVqb0dSR1hpSjRpbnpEVitRYnZpTGY4Qlg1aHEvSU4zeEZ2dUVyMm5PTnRJOU5JR08ya2ZiMDM0aG1YY05YcEtVWnovQ1ZlVWxYU28xWDUwbStNaWRKYXlYR20zT3lGWVpJWTRiaEtReVJyaG1HcFRCRVdwZ3hERXRoaUxRWU1GQXFaVU9rcFRYWElIcU5VbWVJZE1Nd0xHVlpvajNEY0pSdWlmWU53MUIyOVVjM2N4Z29EQ0dPTUl5b3doQmFEUnNvREVtNzlaTjQreWxpb0RCRU5JYVJTV0VJeldMRStsQmpDUEh0TVNLOXF6RWtiUkVqckRBa2JRY2pyREFrNmRMUmVUYWxWL1ZyUDd5YlRYa3lxZnExSGFKRWpmdEZaNE1oaHloaG8raHFOT1JyeDVtTWdpbkpFSlN3d1pSa0NFcllZRW82QkNWdU1DVWRnaEkzbUpJT1FZa2JUR0ZJRnVVRWd5a01TWHIwWDhacFFVeGhTTnFkcU1FVWhzUVZETHFRRElrb0dHbER5WkNBZ3BIV0w0WVlpbUV3aFNFUkJTT2R3aEJETVF5bU1JVG9Yc1JnQ2tPSURtNEhES1l3eEZjd1NxY3d4RmN3eW1PSW9aaEd3UkJETVkyQ0lZWmlHZ1ZERE1VMENoMDIxK01qei9BUkhuMmVBUkpRSGhZdTRpc1BpdHdJQ2tadUJBVWpONEtDa1IxQndjaU4wREZHZmdRRkl6K0NncEVmUWNGb0dUSXlQdFRmWXFTdFhaSzJ1enpFSjc3WENaTVhtWm9XT1l4c2d2b0dNaVBERXlLWFVaUEVxTWhnRE9RNmhOSjZCanNpQ0QrR3lHQU1wQTNDWUN5RUg2Tzg4a1BnQzUyOVN2ZFRmSXFLQUFBQUFFbEZUa1N1UW1DQw"
      }, {
        name: "__ASSET__:file_flixel_system_VirtualInputData",
        data: "YmFzZSA9IDI2NiA0NiA4NCA4NAp0aHVtYiA9IDI2NiAxMzEgNTIgNTIKYSA9IDAgMCAxMzIgNDUKYiA9IDAgNDYgMTMyIDQ1CmMgPSAwIDkyIDEzMiA0NQpkb3duID0gMCAxMzggMTMyIDQ1CmxlZnQgPSAxMzMgMCAxMzIgNDUKcmlnaHQgPSAxMzMgNDYgMTMyIDQ1CnVwID0gMTMzIDkyIDEzMiA0NQp4ID0gMjY2IDAgMTMyIDQ1CnkgPSAxMzMgMTM4IDEzMiA0NQo"
      }, {
        name: "__ASSET__:bitmap_flixel_system_GraphicVirtualInput",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVk4QUFBQzNDQVlBQUFEcXhOS1RBQUFBQ1hCSVdYTUFBQTdEQUFBT3d3SEhiNmhrQUFCeVcwbEVRVlI0MnVTWkJXaGNTeGlGYjZSSzhXZDFiNWU2dTd1N1M5emQzVDNWNSs1ZWQxMnBLeG9QUmV2dUVpWG56UStYTU56bHhvRFo2YjZGcnhJN1h5WW4vd3gzRk8wTGdFTTlHZDhNWkl3U2pJRjMwT2pabDY4RWtGTnpuTStkT3pmdzdObXpvMFRDTWx1OHhqZHUzQmpJR0NXWS8xVW5Ndkl4TUNNUG80U1NEKzBhMjYydkREUlYxaEdwWDBVaTVjdEhTUG9VU05qSjJDRUd5a3I2REpUTkhIekpoWmR2MURmOUs0QklFNE9hMTJ4ZkZTY1ZaNUZ3dVk3V3Z2ck9aODZjaWJSWUxJOHNGak1zRnBOZ3pLQnM1dERrTlM0dkw0OWtQQ29ySzBWcGFZbFFLSk95R1hiZGlkUWNSS1prNHhIN0d5blpqQ3d4VUJabHF0bmFOVzdVTnpNZklESkV3R1h4dm5iVENVN1dDU2xmN0VKNERqRE5FeGl3RWpDc0VBdGx6dklHSXBrRHVaQ1RLcS9ybS9ZbDRKY05iRWdHMWllSmhUSURtR3Y2bDQzNmNpVm94V2l0MGtZa1hDNDVPRnY3V2p1em9iM0xaRHFGWGJ0MjRiZmZmc092di80cUZNcmNzMmMzVEtiVElKZkcxcGdON1YxRlJRVzRjT0Vjak1iVE9IMWFMSlI1OGVJRkZCY1hnbHpzc1JNcDJkaVZrQTZzY1FWbUx3Rm1MUllMWmE3M0FCSXpBSExobmZWOHM3Y0NrUW1BWHlqZ0d5SVd5b3hpMmVSQUxuYlFDWTF3NnBkdWlNb0RocTZoUVc1VHlJRmN5SWtYdC9LbGpXTnpDckF1MGFhUUE3azA1S3YrSU5vdzJzNlpNNmRudjM3OUpvbW1kKy9lRXhjdFd0U05ITWlGbkxURjBHd2NibWJ6YWZ6eHgrODB5RzBLT1pBTE9mSE9tbzNEallhMnlXU2lRVzVUeUVIZFFMUytqdTl6SjlKeTRaYVVBU3hZU1lQY3RwQkRVaVpBVHJ5ejFqZHJLeEFZQWZnRTJ4WnlvQTJFbk43M09hRnd3cTJSOEdrQkZ2Z0QvWmZMd2VJQUlQSFRTK1JHamp6MXZrRzVOTHpsSUNSUHo5ZFpmVnZiamgwN0xuTjJkcjVHU3ovem8yNVkzcm1QVUtaKzJBV1V6Und1ZE8zYWRTNDVjYjZPMms1WUxKYUNmZnYyMHZDV2d2Mzc5NEU1NlhhaXRMUzA0UExsaXpTOHBlREtsVXRnVHJ3dlB5Q3NPakZreUJDTUd6ZE9LSU1HRFdwV0o5akdVYkRaQjVpNVdBN2MvSUhrRE9oMmdueGprbWg0eTBGY0N1L2IrSnpvMkdrU3VuV2ZKNVNQTzQ1cnRCUDBod1BEaWFpcHFSNmczSDJxU1BPNi8wSjVWMWs1Z2p6SmovTjFydmQ5K1k2K1J6bDRYYUhuNjhRdWZsdTNhOWZ1aS92Mzd4LzRZZXk4TVpWUld4V1RkNFN5M3lXUUVTQUV5anJyRTYxUTlvNWgweWZkdm4zN1pJY09IZkxJazNOVitFNVVWMWNQZVBldVFwcEtWRlpXS2hVVkZicWRxSzJ0SFZCUlVTbVJieFZEN1lRR3ZoT0JnWUZqVHB3NG9YejY2VTRsSnlkTEtKOS8vcGxDMlI0ZUhrM3FSRTF0ellBblQrVDV0WHY2bEsxejFUdmRUcER2MnpmeStMNTl5L3ZxejRtSlUzZU1pWXA3cVhqNW5sVmNQSTRwTHU1aW9Dd2YvNHNLWlk4ZWw2N2ZDZlVFMUpZSjV5TnFHMkNnVS84eU9SaTJCaStDczhERXN3QzA0NTdIdGF2M1haY0FySldFVGNrTitYNU95MTJ3TWdBSXMvV2RrZzhRbmtzdUlDZlZ0eTExUWRzSm85RklKMzVwK09PUFAzRHc0RUhkVHBTVWxOQ0pYeHJNWmpPdVhyMnE5VzNMZCtLcnI3NkMwVWgzU3YvYStFN3BGTGswMm9uWUZHQVduZm9YeVFFOXVncUxmYUhiQ2ZLbEU3OTNrQndFaE9uNGNwMVl0K2tTNGxQcXNNYkZobmRLN2tCOGFoMjVXSGRDTFVWcjlveHJOUHRuTFNLMlNMTnhFSFR2OFNZb0UrUTJjdVRJd2JTNHhJQUJBOGJVKzY2Tmw0ZU5TY3czeThxM2YvLys0Mm1wODRaT0FTSWt1bE9LekNNbjNyZTF0aE0wQU9YYVBIN0hvVU9IZER0UlhGd3MxZVpCOXg3WHIxL25mZHN5MnJOSFJSTWNIQnpnNHVJQzJlNlV5S21oVHNRa0F6TVd5c1A4RlVCWXpHdVEyN2h4NDRab08wRyszb0h5NEI5S200ZTFyOEZnb0RtQlVXTVNrWkJhSjgyZEVybVFrN1lUanNTdFc3ZDgvdVB1S29EYlNOcnNFOWxPekE1ekZrTExFRmhHZTVtWm1abjNtSm1aK1c2WjZjZmsrRzZaR1V3Ym94ekxkc1R5VE04L3IxeXRxUzdKa2tmcWJOcDVWVjlOelV5ci9VcnBmUFM2YlFBaDJBS21JV3c3SUxmUFAvLzhMbG5tOWZiMjNoSUlCTXprNnhUeWRiL2YrMTIrdVBId1k0SFBlNEhNSk9BNHU5Zkk0Y3Z0dU9xZ0xTQkhOMk8vMDJ0UmVHdkM0VmhOU0NhVE5GU0xZREE0N1pyUXlYZHljcEtHYWhFS2hRcjRkbloyM2djQVo1NTVKc2JIZDhJMllDMlR3OFJFSEIwZEhTWFhoQkF3RG80VEF2LzlQLzc0NHp2bGQ5elQwNVBuNjhBa0s4NjN1N3Y3ZmdBNGJPT3QyRDRRUURhMyszbVN3OEJRQUFjZWZLMjZKbVQveXUxcmQ0QVFkdFUvcm5NeWdiY3pZM243SkR0UjFYeEJZY3RlOTNHeVA1ak5adHNsMzJxZGFHZmM1VGs2a0xkUHhxTlZ6UmQwUkFGZjF3RWRDd0N0emMzQWdFR2EwdEFZRnJTMFNVZDVJcm1DOE5ZRWREbmprWkVSOVBmM1kyQmdRRXNBS2I0bTlQRk5KQklZSFIybHlRQ2lrMi9Bc2l5dUNUUzdhOEkwVGFtdHJmU2E4QnM4VW9rdnNIUDg3YnhsTS8zRmYzYTZ0L3k0WW5BQTRRUkF1T3NndnlZeW1VeDdKWHpIeDc3QVNQVHR2Q1dUeFhrazRyMGx4cFdoclBKVi9FUmoweUxzR0RWSVV4b0RtbHVXcW10Q0JnOGh4SElRZHZVaE9uRG5aZGpuaVQvSVcrdHZQNGkwc0N1ZjB4YXl2YmFZWEdtTzQzaDhxMFRnNHBPeHorOCtrcmZXZTY5RzJyWlFNV3hINGV0R2F1NmdXQWdBSVdiTTJVbHpWb1ZsSVFBSGhCQmlFU1RrbXREa2pCazA2SVJiVzF2UjB0SUNWd3hFNVpDY0N0ZUVMcjVqWTJQWXVYTW4zQjR2RGJGWVRDdGZkK3R1UkFpeFVGWlJ0bTNERk1nS3FOU2FFTUpmVG5YL1BhdnhsMys4VDk1T1BuNENRbGpLR050SzQ3eXowdDY0UDlrWFo1KzVaSVkvUXdrUWNrMVV6UGZHNjFialYzNStuN3h0T25RQ3RxM3l0U2JUT09IWXREZnVGL2JGeVNkV3pwZCtJcjhtQW1Fd1h6RUZkSWR3Z2dWcklpZ3JheDNPT0dwbnNmS21TOUYyNUdGNVczYkptWWd0YmtIRkVIbG5FSmFMUXVGYlJaVVF6U1N4OHFMVDBYYklmbmxiZHZyeGlEWFhWVGluSUNlRjczUFBQVmNQSUtqd05RVU9DdmpDUTBpSE0rN3I2Mk4yQlhlN0grcnE2dUFLZ2xpK2ZMa1daNnl1Q1QxOEdUaFlhU3hZc0FDUlNBUTFOVFdZUDMrK1RyN0JwNTkrZWk2djhwMVpjTWlwNUpyd204bS84VllkTmg3ZWxyZUg3bHVMY0dpN01xYTVzUXNQMzc4K1AyYjkyaGI4Myt2QkdUS1duTlExVVNuZmp6K3R3MEVIdHVYdDVodlh3ckZWdmpXUkx0eDYwL3I4bUgzM2JzR0hIODJRcjFQSTk1bG5ubW1RYTBJNE11Q1pZOEpSK1VLU3pjT3VybTJWT1drVHdrME5VQUhrVHQ1YzBYeGtUVTZFSkt5VjcyRnJFVzZvTCtSNytMcks1eTNrRzRTRWljMWlJY283dmlvQ2g5dnF3TUtGQzVteE1NdW1NK2E5TG1jYzBNbFhCZzVXUjVKdk9CeG1hMGt6WDI5Tm1LY3BsZWNraEwvL0VoOThCRHo3b29CRVkyTVlGNTVqUTFocHZzZGtMb2I3N2xvQVF1SjMvakNBaEkvdHRlUlVmRTM0ZDhSZmZBWDhhSnVBUkVOOUdDZWZZTFBhbUpJTE16RmNlNVhLOXgvK05ZQmt5b2N6VnZsUy93ak9LamRSR0R3cVoyMDVEa0x0VzFBTTh5ODZEV25IaGkrVTRWUnRtODBTQXFITkJ4VG4yM0VNMHBaVlZadE5JcFZLaFJTK2htbEtzTFVIRHlWd0xGNjhtRTZZb2pFemVTeGF0SWpQTlRnM3ZYeGw0R0JyalpzYkpHY0dFc3V5dFBLVmE4SlVUYWtjcDBvRTZIOStMSWhFd29IRWJUZnZpNmFtTHI3RGhyV0RPUEg0aFpENG4vKzM4VCt2Ky93WlFsK3dvNzN5V2hDcGxNZjNxaXYyUlUyNGkrK3djdWtnampyQzQvdmUremJlLzhEWC9PUlVkRTJZcUNrNXhUbnBxenhHNnNOc1VVSEMzdm82SkJyM1g0T0JSVTBWekN2SUNRcDA4UTBKdDBWMUFpVHNOei8yK0s1WmpZSEdTR1dWa2lqRDF6aE55ZFlkUE9qRVpPQlFkaHk1cDJiWndqSXNlQ2lCUTluUlJlR1l6M1VIRHduVE5TVVYxZVdZaVNUdzIzK29GZ1dzTnBMeFQvRGd2U3U5Y1FtQnYvamJVQVZTbzk0Y001a0cvdUZmVkw3WFhiTUFzZGdudVBGNmoyOHlKZkRrY3lGLzg1Y0pFR1pyU2g2Q2VqSjUyWnJ5RVByMXYxZnU2NjQ5VjBzbUwxR3Q1cEhidUVIbCs4K3ZxSHpQUHI2U2VjdndOVWxUa3F2WTBSbzhaT0JZdW5RcENHYnh0YlcxV0xac0dVK0djemVQQm9lcGp5OERCNFBEdkhuekpGOVdTTHhub0dQd2tITnE1MlMycHFUTHVVbGpSUUc4LzZHQXhFbHV0Zkd6ajdaaTNkcEdTUHpUWTBFTURsWFFreGY2K2I3N0FmRDVsd0lTckRadXY3a1YrK3p0OFgzWnJWQkdkdWpqYTZLbWhGMVplYVFkQzNQYWo0UkU3ck5Pb0g4WW1SLzlIeVRhVGowT2NlRi9wMUg1eXNNLzByYkw5NGlEUEw1ZDI0SG9HREt2ZitqeFBXWWo0bFlPWlZHR2s3bWFVdm52bHhBK1Z2TFEwQkFEQnlzTU9pQ3BjYkJWeGJLY3dVT0h3eVFuTFh3bkppWVlPRmhoa0pQVU9KaTlLeFdTZnI3bWEwcWxJR3hVQ0ZZZlFjUVRBaExubnJVTUV1OS9hTHZhQ0h5aERLZXFUeUQ4d3o4SFdWMUE0cFIyaisvblg5ajQwZGJLNWhWaWRtbEtqbE11ZUZnQ2xTQzJwQTBMVHpzZUVvRVh0b0dvMmZZMkpPYXNXSUxSdGN2MWFoNVdaU2tGZDFNdFBIYXp4L2MvM3VGejFMejdtY2QzOFFLTUxtbjFQNy9sUUlIeG1wSSt6VU8ycXFSbXdDc3plUGJnR1R4NEw0VGcxWWhNbm9GRHRxb2twNmFtSmdZT21qYStlNHltcEVIUUhSb0dubnN4aUdMNDg3OEo2UkYwTldnMDBrWkdnUjl2Szg3M2lXZERsYzFiaHE5dG9LWms3NkxLbzZCbEZkbjZKcDhqdU8xMTlma0Y3UlhzdGhLNk0vbUNsbFhrbmMrbStMNzFxZnI4cE0yYUt5VWpOU1Z0em0zbHlwWHk5SGNlN2wvVjQ0RTdPbURPSlIyeENjR0QyM0VWUHJMdHhncEpNMThqTkNVTjBMRkRIbi83anpIRTQ2cU85TktyZy9qeXE3UWNvNzliN0ZSdVR6MGJReUtwOHYzUjFrRjBkNlYzeVQ0VllaYW01S050NWNDWFVheGw1dXUxckw0QitvYW4zazhrZWErMHJxSldUcCtnV3dsZnk4TDhVNC8xK0hadUI0WmpVKzhUYWQ0cnJhdG9KcVdScjVHYWtyYmd3ZllQZSs3UzRmTEs3TDY3dTV0WHprVmpObStFTTI1c2JLUWVvL0MxYlJ2RHc4TzhTcjRHYUI0YU5DVkRLZy9Ic2JCaGJSL1lXaUU4L1dNQm1odS9ybkRTWFZkNVVIaGVzYXdQRGZVcTM2T081RG1nci9WWEh1WnJTdnEyNmtZWHQ3cVo3MXBJZEQzOUNuNllHcEhHZTZWMWxXbmZEQi9RbmxKRW0ydlJ1R1l2ais5clcvSEQ0UjVwdlBmNExsbUl6TVlOUGlvbFVYcFZtS2dwQ1gyVlJ6d2VCdy9VMFpteEF1Rm5lYzlUMmowOVBmSWt0VEZ0S3pwYnRxblk3cEY4ZVUvaE9ScU5xa0hPQUw3K05TVWp6bmtvRmdsdWQwOWtyeWtTeU1QNHhaOWRqc2xzdExKTmptTFg4SFhFZGpkekwrVExZSEx2bmN1UlNVWDFheDZHYVVyU1RlaHZXMTF3a2pMRitsKzZINmYydnltTjkyb3JpRTVRWnh2SWJ3ZzljWlBLOTU3cmNlci9QU2VOOXlyZkxRZjZtYjhNWDhNMEpWbDVhQkxNMlRJWkh4OW5PNGhPamM0dFg1SE1uVHVYRllqTTZLdHdiTm9FYU82a29oN0RRNEFVeWlWZldaR3dBdEVSUU1ocDltdEtHbmFjVzFZY0Y1NXZ1MVhUSERtVjBxZmZkSGdiTm04Y2duQXMvNW04WmpkQnkrWGk2RGpKZG9Oem5xOXk5dVBnZzlxd1laM0wxN2I4WmZIbDNZUlptdEpNTlE4L2lBc0xDeTgrRTM2dzRMVGpFTFZ6MVlTOHl2bGFPVHBoZjN5UDI0eG9OcVYvdDVVSm1wTG1RNEowV215YmNQc3JkL3pJQ29UUFdZSFUxOWV6QXFuU0lUdmtwSXN2SFRJMUdRWVFWaUNTcjc0S3BBd256bTJXcGlRNTZXOWJyVmoyTGU2NFpWOUlEQTRKM0hDSHl2ZFhmMkUvaElQZC9qazcrdm5PYi8wVzExemw4UjNaSWZCenY2THlmZWorL1dEYlB2azY1UTgxbXFRcGlSbTFyU3gvOVIwelhXYThmaEJ1YWtUaTVJMHpyMGZKU1VYbGZKZTJzUlhsajI5RFBSSWIxL3M1dWw0NmZKdWxLV2tNSHFwRGpzVmlyRUFVVFlIMzFFVFlmakZFUTVDNkRCMHdBd1lyRU1tWEFZVVZGSU5oTlZ4cHMweFQwdCsyeXFaNzNmYVA2aXQrNi9lRDdscmdZVHgxbStrTjE5VEF5c1Y4emE5YjgwZ2tlbkhURFFwZjF5bFBuZWw0L2lVQmlZYUdNQzQ4cndiWmJNeGZwZVFZcnlrcGNIUUw1cUVMT3FEZzdMdUFmYzhvdEJQVVZsRERoYWZCRW80UDU2YW5IZzJkdEFVSzd2OGQ0THg3QysyV1gxYjV0aDhGUzlnYXRuM1lCbXBLK2pRUG1mbnl5cFlRVHozVDRUR0F5T2NNSUlRQm1ieWNoMWM2WDJvMmJGa3hnRWkrRENBNk12bFpxQ25wYzhhMlNMc09OZ3UycFNUKysvOXN2UGZoMVB0blhsVDc5RmRmc1FvYjF2WHBGS0I5RWVacDdJNFRzMkJiU3VLZDkyeDgvc1hVK3g5dVZjOStYSGorS3F4YzFxY3QyTm1HYVVvMDI5RW9tTFAxdE9UU015Rmg5UTBCbjNlaEdKZ3BaNzBNR1d3ZGpkUkhOQWptUHZobTAxaHk1b2tlMytFZFFIZi9OSU5qeUhaKzYvRTliZ3RHSWhvMm5KdXBLV2x0VzNHODdMMHpnRkFEb1lPajVzSG50RFZyMXBoUWVaQ0x3cHZPbC9vQkt4QVo4R2pjMmZRZDhUVkFVOUpmZWJRMGRya25zL2VHQkFQRm4vNWxLUDgrRVlkN3I3cWlYL21GTmNpa092VlZIczdNclM3U2hhdXY5UGdta3dLUFBSbVM3OTE3NExFblZMNFAzcjhHOFoyZCtrN0VtNllwbGEwOGZLeUsybE9PQWx0UUVzNXpQeTQ1UHZoanRUOWZmK294MyttcXFEM3lFTGFnUEw3YjNpdzVQdmpteHlyZkl3K3JmbFhZd2tCTlNXaXRQS1JKaDB5SEp5c1FiaWZsVGlGcUNmcWRzUjYrREhqTThKbk5rek1QRWRKUjYrZHJ1S2FrU2ZOZ0crWGhCMVlyYlpSbm5nOVMyRlh3L1I4QlgzOGpJTEhNZFlBMzM5RHFvN3JUeEZkWXVQWG0xV0E3U29LVkJ0dFZIbGc1QVQyOUFoS0xYVkg5c292MTh6VkdVOUlwbURjSHc4Q2YvRnZlSXR3Qk5EMzRYaG5mbE1ob0VLQjk4STNVQUU5OFAyK1IvM2diSmNEM3l2aW1uSTJ5Y01yek5VdFQwbFI1bFBrOE5SRHVYR0pXVCtlM1k4Y09ZMzlYbEd4aE1jT1hCKzc0aDZIMDh6VldVOUlhUEJnMHVycnJYVjBEZWZ2SGYwVlIvT2J2QlpWeDRYRGJkMzdDZkc1REdIMkQ5WGp1SlNoV2JPemYvR05RR1JPcGJkUFRack1ENW1sSzVLVHRuQWNyaVQ5NXpET0t1Q1hBOThwNGZyNDg5R1h5YjN3RVBQbDl6Nkl4bEFUZmUrUDVlVDF0TnVNMEpVZFg4R0FXTEUzNXRlYXlQMDlSbWxrOTcwMnJQSVFROHJOS0M0dW1JU0ROUWsxSmp6T09KL2kzTGxTYmJ1eFhuUVZqdjNQTkk1VUVubjlSdGVuRzl2WVdqdFdsZVppbUtkaysybGJtV1BsVllaQ0pBcjZ6V1ZPU2pzUTBrTk9lejljVVRjbjgvM2FPb0pYaGF4aUVtUDJhVW1IbEVRekFHQVJtSXBnSHpGbklnVUJwdnNJMlVGT3laNVR0bW9LWmNER0lMcm5zVVpvU0lSekQzRVNBbkVyekpSekhEQXVBMTltaUtjMHdlT1FtSjRFNU5lWTQ0OXBJeVQvRWszTUVFQW5BR01LaEFDeW5YTEF6VFZNU1pVOWhoOE1obUlKUUtNZzFVWkp2S0dRUzN4RDU3aUdha3Z5T1U2aXRnekdvclFXc0VwdEVMQ3VGU0FUR0lCd0c3Qko4aFdPV3B1VFF5bTNWSFVzbmdjWHpnSERJakc5NDBUeU1wSktZRG1NQk1jVTFGRFNBYnhDb0NXTWtZRVBCN05XVTVOa0NackpHVkIva1FDNXMxVXdIaXR2Y0hXVUlYNTVhSjk4OVJsTWkwcWsrTEZ3SUJFTzdQMlVMaFlINTg0RlVvbnY2WUpmcmM5ZU5nMUJvOXllWVlaZEQ3UnhXak4yelMxTXFGenkrR292QzdvMytoTHF6MEcxY2ljTHdWd2lVN0N3ejd6N0w1VGZzTTF3VXd6SnpLY3hKTWN4WlEzem5sTG5DVVRyU1Z3ajluNndqMDhuWThQQVdYQTdCWkFDQ2ZyMUk1cFVRUEx5Qm0xMG4xaWh4MG9nSEJyanpTVENuUVFqNHdEZXVGOGswWjhDWXh2MmVJRGJ1SHI1bmhIZHVlMHJiOTQybzF4dVk1b3lzdUdVQ25heXd0Q0taOGkwaXd6Q28xUnJJbFdWUEdvVkNnVmFyemVUa2hHeEVkbGF1V3BITVFNQ1BPSWhMUHA4L1VoUG50VWNEVUMwOW83aHNjZjh1WEF4Qk1BQUJ2MTRrODFJSTd0MUd1VGhVSzY4NGFYUmF6NGdtNURiRFlCZ2VmcitIejZjWHlaUnNVemxFWXE1eU91QXJSOHg3TlRHRXE0a3paNWgzSFp2NThpcE9zZ2hYRFhoeUd4NHJIbWxDc29UTEJwWnltQ3V2MExJdFRocmRVWmlmOEhEZXo4UEFnU3NtWEEzSmJ5MUlscmppV0ZqS1lVNjV0RVk5OWcyWkwrQ3lNd1pEMTFNU3B6TW5wcVhUYVVxbENzR2dIOU0wdHBuUmhMRTlhVzljT1pURVJhNGVlNlp2b3lGSElPTk1UVTBxcGpRemljODNqbXgwVTZuVUVkOUFJT0RLQ3ZxODlwUnN1MFpwL1QreStSOWN2Z3dQNzhQOWUzcVJ6SXVYSVpQdnNySDZGN1pWUHFYVldLUFQvSSs1Ull1eHNSR3VYZ0U1Y3JweVJRODdXYU1xZTM2aHAxeit3blVPK0VyZHVFTzdtaGc1dWVmaHFZTHBBRFE4bDQxK2h6Y2JlZEtmRjZsOWlkS2NpOU9jMTROa1ZiOUdTSDlaNU0xNm5wSnk2Yk5qalFVTXR0bnl0UzAyZlBER0dDRzlFS1gyN0JQTjU0b1huN1VnV1ZYMU83MFVReHhLUHVpN3puNWY3K2VmZjI1di84MFB5eHE2bnBKdEgvUUYyRjhUc3VKck5CcUV3MkZGbEV3bVN6NWZVQlExVVpDSmJ5bzdKZzdpb3B6dEUydEN6dnZMYWFMRnhVVmlzUVRGNGpLcnE2dGFLUlNLa2kwTzRvdGxXUWVXOFI5Ly9ORld5OWNDNUxsaDZ5bko4ajIxSmx5M1E2K1RZS1V3eS9mdmIxbFlLaEtKcnVsRVplYVpVOW5pME91bThBYldrWnJZOFhXY0RyYVZvRldiNWN2WGQ3ejVzTUs3RHh1OC82Z0h5WHI3dnNoWGxkMnN6eXFYRkFQM1lFMzgrdXV2LzdQM0hlQlJWVnZiNzVUMFFpZ0NTZ2dsRUZLNXRDQk54UUpZNzdYM2d0U2Y4bDNGTGxld2dkMFA2OFZlTDFjQnFYWTZBdEpGTUhRcGdVQWdRRG9wWkdiV3Y5Ynp6WWtuTTVra3d5Um5Ub2J6UHMvN0RDbk9lbWU3c3RiZWE1MjlkNUhpRXhXc1YxYzlwV0RwS1pXNyt3UVJoWEpaSUFNQVRRNXRRejlGZE5FVkh3MDVYNFFTMTQ3WEUxR1VrTXNSR1R6UU5EbWhGLzEwNGJXNjRxUHgzYXJvM2JKbFM0eWlkMGU3aTRrRzMwK1VjRFZSeHlIK1pjSTFSRU9HMCthMi9kVjZRMTE4UXB5YXhvOGZyeXNPR2pUSW8wL2NkZGRkTkhYcVZGM3g1cHR2RnIzRUdrVnY5S1pObTVxSVhnQTBaY29VbWpQbkcvcjg4OC9wczg4Kzh5dEZ3OXk1MzlEa3laTnI5SW1XNTk5TjdUdS9xQ3UyYUgyckpEZmkwbXFsVDdEZTdhSzNmZnpkOUxkZUwrcUtjUjJxNnYzdHQ5OWlGTDA5K215a080WVNYVFNZcU4vbC91WEZRNGp1SEViMHQ5NHIzWHpDekNSZVJxOEc0Nk16SjFCS0R1Z0ZaMEQ0cXVJVUdGTHpYcVhNS0hqQTF4QVJQanEwRTZWMm0zNzBPdXo0NnNpZlZmUjI2OWF0Z3ZXdUZyMGpqbStEN2RBSklGNEhQYVg0QzZTL2hZZE83SUNBTmE1UXp6SVZuMWl6Wm8weUU5VUY1TWtsRHI0ZWZlS25uMzVTWnZxNmdJemRpaFVybERFV3ZZNmVQWHRXOFBqS3YvSHBwNTl5SHlkZlZ6MmxtVE5uMXVnVGVTZC9oTU9obnpFbXFrQkI3bklRa1h5T1gxUStJV09NN0N4ZDZXVXRGVGllWFZWdjkrN2RLeFM5ZTNlTTRkVnJ1ZlJ6L041VGltc0RYdjFYNE1DZUo5eDlnb2lDMnJWck40UWJmWWNCVUI5TEpNMEo3K3ozRmNmTThFN1UyeEpCb2ttMGRlclU2UXJKZU1MNCtQZ3JLL1UyYlVWemVsM3A5eFhIekI2RHFYZE15K3IwaGlVa0pBems3K1VBb0VlajI5T1p6bGNUWFR1SzZJWnhSSDhmUTNTZFJoUmIxNDhsc1YzVytTcWFFQjFYcVRjNU9ibTMrRUoxUHRHaFF3Y2FOV3FVMzFjY3c0Y1BwL2J0MjlmcUUwbEpTVFJwMGlTL3J6Z21UcHhJWGJwMHFkVExtL2NHaVQrSVhyVlBEQmt5aEQ3ODhFT2FQMzh1ZmZ2dFFscTRjQUZ6dmtZVVd3dlo5aHg2Ly8zM1pWVlhKNThJajBpaXVQaW4vYjdpYU52eEtRcUxTS3pXSnpwMjdGanBFOUV4U1pUYS9XbS9yemhTdWoxRjBVMnExUnZHL2xIcEUrZkhqcVYrbDVYU3ZTT0pSb3dodW4rMHRodytodGkyZy9wZVdrU3RZMGRYNnhNZ0lpdi9RVjdJdTFSSDh6SXFId0ExTjFucHZ1QVc5SHBvSEwwZDFrNVR2aHJhbHNSMkU1T0ZuSFhXUWo0RWJqai9zZlVpb21BaEQzaWZLbnFEUSttKzJDNzBlbkkvZWp2MUlrMzVhbEpmRXR0OGRwWkh2ZjM3OTQ5bnZXUDVaeVVBS0RVb2toYTI3RVpaY1FQcGVMdkxOT1VodGltMjQ2MWhWZlFPR0RBZ1RuekJrMDl3UTQvNjlPbEROOTEwRTkxNjY2MmE4b1liYmlDeHpiTzBPdnNFejZKSkFxRWt2YkZqeDJyS0VTTkdpRzBacytyMGhqQ0QwdFBUTzZwOWdrL3VKVW1RcjczMkdrMmJOazFUdnZMS0t5UzIrV2dUcjN6Q1lvMm1wczBIa3dTWEMrTEdhMG0yT1lyRXRzVlNkWXc1V1ZmNkJFOG9xdmhFVUhBMHRXNHptRG9sanFhRTVQR2FNcjdMS0JMYlZxdG52WDM3OXEwU0o4SjRFdDBsZFFiMTdMZUhlZzNJMUpROSt1NFMyMXhXYStmUkowQkU1dllNZHQ1QnZFUDFWcTVwclFGQWVpQXZxVFA0ZnViN1JCc0hoMWdpc2dnYm1WN3JEei84RU5LMmJkdUxaUEQ1ZC9icVRTL2ZVRGVBUzBGQjRndUdUelNjM3BTVWxMYmlENFpQR0Q0UkNIRUNSR1RpNVdvUUgyL1FsMy9oQ2hZL21QLzlJTSthUHVhbTNrcjVFRnFTYlM1bjJ4K0lCdEVpbWtUYjh1WExyU0phMk1qMENpMERCdzZNNFo5ZHh2NDhoSS81ZmtRdmV2bE83SUZYWFhWVnRHaGttZ3lmMEVTdnlmQUp3eWNhZFp4UW5FTEl5NmVvbUppWWkvbEMvU3ZrZzBsV2xQOUlQb1NhbkNucmxhN3ZMemJGdG1nUUxhS0paMnlSaXM1R3FsZG9sc0huMzd0UUwzclpJZEp2dWVVVzBXcFdkQm8rMGVCNnpZWlBHRDRSQ0hFQ2FzZGcwU0djYmJyeXhyYkwrUHJOeStWREtwUTNhVWlxYllsdDBjQW5oZlpraEN2NkdydGVaWGFSbUpqWW5KdVBIV0pqWTd1S2t3aDVhZDJuSWFuWVladHBZanN0TGEycDZIRjFDTU1uREo4d2ZLS3VOSHpDelRsNHVkU0VNMk03L3FDcC9FSFR1Zm1vQ2NVVzIwd1IyNkpCSlRhUTlDbzBxMmpSaUdxYkpoZTloazlvb0RjQVlQaUVFU2NNR0RCZ3dJQ0JlcDVWQ0czYm4wMWg5dEtZaVdvTmdheFhEL1RXSjFhdVhKbkNtOTU2YVVtMmVkWmp2R2ZQbmhSbUw0MFpBRDZoNnhqVmxObWJlUnR6QW5NS2N4cnpBeWVuT2I4M3dmazdmZVMvUVlQRFNCcG1XOGJraDIwWmszSnN1LzVGOWwxUGFrcmJ6bitSMkdZTm85WExwanJwM2YwczJmYzhweW5GcHJkNlhaYWdWbzFwRWRhbGpxbld6RStGUEx4czJiS2NaY3VXMHJKbFN6VG1VaExicktIT1k3eHIxNjZIbVRrN2QrNmdIVHUyYTBxeEtiYVpBZUFUdW9oTnZaZ1BNZWN4TStuc2tTbnY0WHl2WHZBZEJ0Uk5HbnZHcEptT1B4OG1PbkE5Y3lEekVvMHBObThpMFNCYVZFNXQ4cWczY3lyUnlVbEVlWTh6SDlPV1l2UEVKSEljbkZvWHZVcGdDR0lHT3htaU1SVzdvc0hxcnRkZE13ZnRtVXVXL0V4OGJJVmZ6bUFTbTdObno2SWxTeGFSYUtsdGpEbG96L3pqajYyMGF0VktXcng0RVMxYXBDM0Y1dXJWcXlnall4dUpsa0R4Q1kxajBvM01yNWhaNUFJKytKSTJiOTVNOHhjc29BOC8rcGhlZmUxMWVuN0tWSHB5NGxQMHhKTVQ2WmxubjZPWFhuNlpwazkvajc3NTVodGF2MzQ5NWVYbFVUWElFaHRpQ3o3Q1NCemJueDdxMlBzSTBZSExpZlpmNGxlS0JzZmVSMGswcVozWlRlK0JLVVI1VHhMbFB1WlhpZ2JSVXBOZVpoQXpoQms2ZVBEZ0RyemplSURXNUYyMy9hKzk5dG80MGFEc2RsYnJyU1p4REYyNmRCRjkrZVVYZmorNFR6U0lGdEdrMXV5U09JWkswRjZ5WklrRWNuOVNOQ2dKeEZXdnViSDVoRWF4cUNmejM4eHRwTUtPSFR2cDA4OCtwd2tQUDBwL3YrRVc2dDMzSXEvNXR4N3BkUEhBeStqK1ljUHA3YmZmcG0zYnRwRUx0b2x0WTBYaUJWUk9IR3pQbUxpVjl0MUd0TzhTZlhEL0hSeU0vN1ZHdElsR2hWWDBIcHRNZFBKUlhWQzBlTkJyZFg0dmxPK1l2dDVxdGE0SFFGZjJQSTl1dmVoOFRYbDV0K1lrdGxuREtuNldlNGhvVXVrMXUvb0VsNHUyeXFtdkVyejF3TGx6NXhCcjh1Z1RmR3o3MWw5L1hTM0JXeGRjdTNZTnNTYVZYblhTY1BlSnJsMjd5bEVzbWpJMU5iVkduOUFnQmcxa3ppTVZ0bS9mVHErK1BvMnUvY2VOM2lRSkw1SkpiN3F3VDE5Ni9QSEhpVSsrSmhlSWxvR29FUWJNVEJQVElxeXcyWktCa3dDUlB1aklRMmxwZVErblRvdEtyN1ZTcjdrY0lPaUQ1Z3BQZWkzYytBM21zNW5lNXZzZTVzMTRvbWZ2c28wUDRic1pJL0hWaC9kcHlwKy9HZzJ4UFgxODF3Rjg2OTVQL0FqaFM2SlRwUlZxbitBVGFwTkxTa3FoRThnZDNYTEhpRWVmc0xGUGxKYVc2VWh2dVdoVzlGYWgyaWZHalJ2WCs4Y2ZmOFFiYjB6REN5OU0wWlJ2dmZVbXhQYXdZY004KzBUREpJMExtZDhDV002OHZxU2tCUCtaOFYvY2VmZDlHRHA4TkdiTm5vUGp4M05BUlBWT3VXWFNBUXVXclZ5RHUrOGJoa3N2dTV6SC9nMjVEd2FpUlRTSk50R0k2bUhBT1FNS1pTZCsyWjd4R05IZVM1Z1g2NE4vWGtHNTZ4NGdkdVlwUkJTbXF0R0dWZXJOZVVRL1BQNVlUWHJmQWtDN1o5eEE5ajhmOG10UHliSC9Sckx2ZlZpMEVBQkZieWd6eU5VbkZpOWVySk5WaDFLNitwTG16NS92MFNka3hxcVhWWWR3NmRLbHRHN2RPbGU5b1dxZmVQZmRkN2xQSWoybHIvM2NVL3BadExqN1JEM0R1YXI1bUp3b0tDeWtEejc4bUFaZGVRMmw5eG5nTjhwcUpDVzFLejMvL1BQU1Z5RVZSR3N3RExqL2orUzZaem9BbXozakVhSTlGK3VIZTYrZ29nMy9RNktOZDJTbUVWR1lVSTRGcnRSNy9HSDk4TmlqVkxUeEFUZTlmRVJDWHdEMHh2OUxsYUN0bDU0U2EzbEVOS24xQnJ2NmhBUkFmU1dQTDJqQmdnVWVmWUp2NzlOVjhwQyt4NFlORzlSNlE1bmhYQ3JxSjVjQjNYdnZ2YVMzbnBKb1V2dEVQY2ViVzVnN21NU3JXdnJzaXkvcHNpdXVsT0N0RzZaMTYwa0pDWWx5d2pIeHRjWWtjR3ErR1FZcVlSYnlCZjJqQUZnQUFraGZETElRUk52T25UdkhLNldLek16TVVmeUg1OVFMUFpIMXdrMHZqKzhFMW91aE42ZkRiTTRDSERaLzZ4UU5yT1VJN3Z4N040aEduckdQVTBvVWFwOGdJdmdLS1FVSTZ3bXMyK3pSSjRpb1hpNXdFdFlYNU1JbFY3MTh0L21EWUZ4enpUWEl6eStFM2U2QXZ5RWFDZ3FLd01mSnUvaEUvVUJtOEFCbU1aUFdyOStBTzdnODllNi8zMGRSY1RIMGhORFFNRFJwMWdMVDMvOElmRHlIY3BsWEVuTzI4ek1vTUhvZVBBTVlCQUU1bUtnejkyV1c0ZWRWZWJYeTE5OEs1WGRoczNrZjdNMXdLTFh1aTVVYU44OEdydmhMTDlXWit3NndudVVIYXVXdkc0N0k3OEpXWWZjNjJabE41S2FYQTlGRllFUTJid3BkOVpRb0R6SG5OVk1DNXFXaWxRbTFUeENSejRuajZOR2pPSExrQ0U2Y09JRjZnd2VmSUNLZkU4ZXBVNmVFS0M0dWJpaTlKdTdOaUUrQXp6dUMzbnBLelpxNStvVFBTU09XK1NPQVlleFhlUDMxYWZqbmd3L2pVT1loZ0VpdjVIRm9qdWdtelhISG5YZmh3UWNmQlBzWUdNUGtzekJqQVJqSncrRndPQWZDQVcvUXRPTklEQm4rUjYxTUcvUTFxUGxRL0xaTGFrMEViMkJ5YWlLaTF2S2xrSWdVdlY0bG9xWnQvbzRodDgrcGxXa0RYZ0JGRE1adkdZV2NRTHl6NGFxWFoyOVdJbW9KK2NKc1ZsWWRPcUdOOVJJRTdBT3RvRUR4aVhvSXh0d01CcC9wQXo3VFJ3S3lKSkg2bU1GNjhBbmY5ZWJtNW9Mci9VSVVGaGFDOXdmVXUxNStkRGVJeDdlbHNvcXkyKzNRQzlRcklQR0pldmpzaVFCV002L2taanhHakI2THI3a1I3aUFDQWJvbnpHYkV4blhBbkxuendSY2g0Y0NCQTVEUHdsd2puKzFjVHg0Q2k5TjF2Qm5aT2lPcWVTSTY5UmlMcEVzK3hONURGaTl0VkRxelZRa1VWZlZTWFZsM3ZVMDdvRlBhYlVpNjhDbnNQVkRteGZzTDdWWDB6cGt6SitLdmNWWldTdEFQM2NkWGdhVStnakdmemluM05NdmR4K0RIUUdYMmhxeXNMRjhEa2dlZjhGMHYzK1FtVCtLQUx3OEMzNnduczI5SklQV3AxenhyMXF4d2VYWFZxdytRKy9qNjhEUVZnTTNNZGl0Vy9vTDdobzNFenAyNzBCalIrb0pZNUJlZVJvOGVQZkQ5OTkrREVjZmNMSi94SEU4ZUNoeUFnK3BPWXNLN0pCSVRQOEVyRzZKSm9EaXhiM3JoRlNTSnhMUzkxVmU5eWhnclpUYWQwVkZyNFBNRmZDdWFCR09aWWN0TVZyNkdsQzU4U0NCcVRhYjYxaXRsSk43dm9PaVZWWlBQQ1lTSVBQcUVubnBLOWFtSmlBWUFXTWNNbjc5Z0laNllPQWxGUmNWb3pJaHAyZ3l0MjhUaCt1dXZCeitoQmtZNGM1M3pzeHJKNDJ4WEhrVTVtNER0RjdsejN6RFlUKytGZ3ZQYVhlYUZEZkpVU3ZOZDc2a2R3T0VKN2p6Mkd1eGxXWC9wYmRQYlM3MU1GZmpaZFFzcW9iK2VFa0FOR2tna1VmRDlBREtUbDhheEJHWHc1VEkrSlJBaWFqQzkzSXVRaEZHcGxadndVbkx6S1lFUWVmQUpuZmFVaUtnK0VzY3FKajcvNGorWSt1SXJNcTRnb2tiUGlJaElKQ1ozeFdPUFA4bTltOWZoeENyNXpPZDI4aUFIRTk1UkRhcUdwWHVSdCtkL29jQWFIT1dsRGZmazRkTk1YZzBpZDU3SlF0N0JyMVI2SStwdkprLzY2eW1KcG9aT0hsS3E0bDNVRXBDaFFFa2dFdlQwbGp3a1VValRXSktIQWxVQzBWNnY5ajBsWDNzYzN6UHg4U2VmNGUxM3B5dnZGekFJNFJKc3E5WVg0SkZISHNGTEw3MEVKNzRub2lTamJIVVdaU0NIQThqTnEzQmo1cEV5NUJRMmh3SmI2Vkh2eTBBZUlYcFJkN3JxelMxelkrYmhJdVRraGYybHQreWtkelpRWS9MUVUwOUprN0lWRVNtN3dzRTNsU0VrSkVSbTh4RHdOWmRuazBBYVhLOGtDVWw0ZlB1YnJKZ1V2ZksxSkJkSklQV2lTZmM5SmUvL3U3WUFsakNqdi8zdWU3ejN3VWNJVkFTekgzZEpTc1hFaVJNeFk4WU1NS0taaTJVTXpzbmtZZktoWVc2MlJtSmZicEliU3lOdlJrS2Z4NkhBV3ZDVFZ6WkVreWVZZkdpWW15MWgySGU4aFJ0TGcvc2hvZWY5ZitrdDNlaWxEVHM4dzY2dm5sS3RlaUYxLy9vSVJKSThwRndqSmF6S0hnZ1JRVllra2tDT0hUdUd1a0kwTmJSZVpjVWtzM3JwZ1NoNlpVVWlDYVNnb01CM3ZicnVLWGwvUmg2QXo1aHRsaTVianVlbnZnVFJRMFFCeTRqSUtNUjNUc1I5OTkySGhRc1hndEdHK2JtWDU0RVpQWStvRm9sSS84ZW5ia3pzL3ppc0lWRVFITjgxQTBYN1B2VFNSc1AwUEtLYWRVRDZrQ2x1VEV3ZkRpbFZRZlR1K3dGRldRdnJUeS9wcmFmVTRHVXJtYlZMRUpGWFNSNVNvNWNadkh5dDlCU1VFcFl1WnZKcXZaSThoSHlWcVBLenloS1dKQkRmb2YrZWtoZjRtSG5adnYzNzhkeVVGNVhIandNZTBVMWljSDZidHVCZCtlQkhzTUc0Vk1iaUhFMGU1QjI5UUZCVUFuWm10NEhONW9VZENOWFE3dW13b0lnNDdNd01rODJDdnBmWnRPc3A2U3A1S0VHWGlDQ3ZzdkdPYjlwejJ6RWVGeGVuaStUaHFsZFdUSzVsTmZtK1BNYnJ2VjU5OTVSOFNJQzNBeGdxNWNrbm5weWtiSzQ4WjlDeTFmbmNCd25IVFRmZEJQRVhHUXNpdXVQY1NoNCtsSzNzWjRxQW9pMXVsT0Ntb0ZtYmRQUzQ3bE5rNTRaNFlhUG1NdERaQ3JaWG5CWnQ3aXpQK2t0djYxVDBHUHc4c2s4NnZMQlJzMTc5OVpUc0RabzgxS1VMbWEzTEppdDVWV2J4OGlvMWV5a0g2U0VZSzFxRk1ucytmdnk0dkZiUkszMmJxS2dvNy9YcXRhZmt1NllubVhqanJYY2dLdzhpT3VkNFFXd2MrT2g5U0JQZGlTZFFOeGhQVzVYazdRYjJqSGZuanFIQXdhbFFJQ1VzYW5hMXJ6TmozL1htWndKWmI3bnowTXZBOGY5VWVkcUtvaTcwd2daNXIxZjducEttWlN1QkJPQ0RCdzlDZG03TFJqd2lncXc0Sk5qSjEwVkZSYnBaZVNoSkx5Y25SeHJSVXJaUzlFcDVTTDZXWUsyMVhnMTZTdDVySXFJUEFIVGR0SGt6Wm44ekYrY3F4TS9iZGVpRTZkT25ZODJhTlpBeGtiRkI3VENldGdMVjhIc252a2RCOWtZb2FCbzcwT2N5a085bHF4cCtMMzhkQ25LMi82WDMvRjVldkg4TmVzbXUvNTVTQXpTZ0pYSElpaU04UEx4eWhTSEJUWUtjbEgvNCtHc3B2ZFR4L1JxMEFhMThabGx4cUZjWW9sY2E1N0tKVVBvMlhoMmNTRVFCMDFOeStiMTBBQ05sSmZuYTYyL0sxemlYMGF4NUM3UTRyeFg0YmhhbEp6YXl0cHNKamJLVkFxcWVSM0xPd0d5TmdnS0wyVlJIRzdXV2dYenJ6eEJWeXlQSGl1VnBMTFhlK25uYWluVFlVeUpIZzVldFpNVVJFUkVoSzR6S29DYUJXWjRNa3NkZXBld2kzNjhieUlkZzdQV0tRM1FwS3c1SkhGTFBsMERzUWEvM21zU2VibnBLM210Nm1va1ovLzBhdTlrbUVaM3psT1N4ZGV0V3ZQUE9PM0RpR2RRTTQya3JteDNZdUwzWWpiL3c3dWU4NENHSU9pOFJDb0lyL3ZUejAxYWlsN0R4anh3My9yTHhLUExRRFZITk8vNmwxNTd0KzQ1NFhmYVVHcnpuSWVVUzZXbklDa1BkTTVDdjVSQkNkU0RXdzB4ZWtwbXNpQ1JSS0hwbHhTR0pSQUt6MHEveFJxc3dVSHBLNnQrNUdzQTFzbXI4aURjREdxaTZnZkNaWjU2QitMZU1rWXdWUE1ONDJrcktLdkdEUG5KaitwMC9JM1hRVktoaHpabFZ4L2V1NzdKVjFVZDE0L3RQZG1QNjllOGo5WklIcStyTlgrRjdtVTMvUGFVR0t3TkpvaUFpSlhGSUlKUGQwRkw2VWI0dnI3cVp5VXZpSUNJbGNVanBTbm95eWhFYjNvNkxhQXFZbnBJS1k1VGpSNHJsdllrTU9ubGV5OWFRZlVCOG1aUjZySXlHdVpvQ2RkQnFGdHZialdIUmJWQUZmMDRCeXJMOTNqQ1hSbml6QzlMY0dCYlZFbFZ3NUF2Z3pLbjYwNnV2bmxLREo0L09uVHRMZ0JOS3owTUNtZlE0SkhGSVVGV1hYSFN4OHBBbmxFU0xrdWhreFNGOUJBbk9hcDNhNjlXcXB5U2t1cHlXZTIxQlFTRyttVHNmQkJoVTBXSzFTZ0tSNXJteW1mUmFHVE9qYktWaVZKZ0ZkWVpzWk52MU9KRHpmVDBlM09kZ1VwMFpGV0ZGblNHSEl4NTZEOGhiNiswVmZWQkQzejBsTkhqWlNub0g4c1NQUEVhcXJEZ2trS2xYSEFyMUVJd2w0TW9tUU5FcXMzaVpzVXVpMDZ0ZWpYdEtDa1l5TVhmZVBBOHJHZ1BOV3Z4ZjB2N29vNC9VWTJZa0Q0VkJwMzRFTXNiVnp2V0RnTi92QlU3OUFoRDh0c004cUdnRHNIOWE3ZHp4RUxCM0tsQ3d0WDcxa3M1NlNocVVyVTZlUENuQlMyYnY4Z1NUOURnOHY2Y09nckZjQUtWc3ZKTS9maWxWYWE5WDF6MGxNNERoUklRRkM3L3pVTG94R0JvU2l2Q0lTSHo0NFlmS2VNcVltUVA0YkN2dlp2SW9Qd29VYks2ZHRpSmZMdHVHSjVpODdkR1Vud1NLZDlkT1c4bFpPNDBKQkk4Z1hmV1VGRFpvOHBCWnNNeE9wZG1zMU9IVng1M0xxMEs5bElFazBhbExWY3IzWlphdi9jcERWejBsd2MxTWJOcTBHUWNPWm9JQUR6UW85My9zM3IwYnYvNzZxMnJzakpXSGRuUk5IbzFaTDlsMTJGUHlvbXlsRXhDUm9kYy9QU1hCVFV3c1dyTEVXR0hVd2laTllpQ1lPWE9tZXV3Q09YbVlkQlNJM1lPeHJ2V1N5VjJ2N250S3RaZXRKUERvQkhYU29pTzVvaVZRZWtwS3llcFdJc0t5NWIvVTRsb0dyVUhCQ0FrTkExOUZyWXlwakowNUlKT0hvNndjc0lUb1ovUk53WERZS3VBSjlnb0hZSUorWmh1eTI5ZnVmYzlEdTU2Uzl6MFBtY0ZhclJib0JSYUxXZm9RTmVxMVdQU2sxeUo2QTZXbjFJdUpuVHQzMXZIV1FnTlJVZEdRbXg0ek1qTFVZeGg0eWFNc0p4K0lQQTh3bWYyZk9Vd1dJS0lGVGgvSmd5ZVVGd0FVekdTOTVHL0ZvaUhJaE5PbkNKNmh0NTZTdzBuUGtINkZ6Rzcxc1BvUURhSkZ5akkxTmJ6bGlTbWQ2SldkNmFJM1VIcEtBNWhZOCt2YU9rNm9ESWFIUjBDd2VQRmk5UmdHWHZMSTM3SVBkQ1liRkJrSHNqWURtY05BcGhCdEtUYkZkbFJiVUVVMlRtNDlDRS9JTzJnQ1NuWUF3ZUVnU3lUSUZNeTBha3V4YVlrQ1FzS0IwZ3ljT0VDdTE1cVN5OHBEWjZ3NWVjaWRFUG41QlZ5L2paTEFMWnZtSkRocFNyRXBUeFRKbm91OHZJSWFUNGs5ZlBnd0I5TmloSWVIU1JKUkFxbW1GSnNoSWNFUURhTGwwS0ZEN2o3Uk9IczBBNWpZOWtkR0hkM0xZQ2ozb1FTcXBubi9nRXdldHFKU25GeXpDMlE3QkVRM1pjWUJVZTJZY1JxeEhjU21LVG9HVko2Sms2dDI4T3FpRko1Z0t6UGh4QjRMcUhRalRNRmxRR2dVczRuR2pHVGJwK0VvM29nVHV5d29MNEVhc2xmQURnV2t0NTZTcWRia0lmWHovZnYzYzVuaUZDY1BPYllqMnNrb2pSZ3RTWU9Ec1ZWS0phSkZUcEN0Vlc5QmdheEFySWlJQ0dkR2FNeHdYbkZZSVVsMzM3NTlybnJsaVNnN0VUWEdubEpQSm5idjNpUENEZGFCd2R6M2tBbkZ4bzBiQTdKc1Jld3dwOEU0VlFLVVpwMUM5bmViVWZUN3J6aHpmQ3NxY2pPWTJ6VmlCczRjK3gyRnY2L0YwVzgzby9SSUxrNVhRTUVaVloxRjlDSzMrQXhLYzgwNCtsc1FDdi9rL3o1bkRXd25WMnRKSHFOZjJmWk9aRzhKUW1tZUdhZkw3V3E5ZE9XVlZ4WTcvdzFiT2IrWTlkVlRzdG1xNm1WQzVSTVMrR1NYck54VndOekZPNWtQOGt6Nk1ETkxJeDZXVFhCc2U3ZG9FQzNTMS9Eb0UxTDdsektSMUpoMzc5N0xLNmNqeU03TzFwU0hEMmVKYmRFZ2VxVVBvZFpMMTExM1hUR1ByL3hiZnFhM25wTHIrSkl6eWNVQWlKT3k0TkhzWTE2NG1jR1FrRkJaZlNxN3plTmtMQkVJSUtKUUxndGtBS0FQL2dIS2ZFUmZuSFkxU0xSeDdYZzlFVVVKdVJ5UndYOTg5UDdJcm5Ud25jdDF4Zis5TjZXSzNpMWJ0c1FvZXZkL25FaU9EVGNTL2RLWGFHVnYvL0tYZnVUWWVCTnQvM2RudGQ1UVY1KzQrdXFyYWZ6NDhicmlvRUdEUFByRVhYZmRSVk9uVHRVVmI3NzVadEZMckZIMFJtL2F0S21KNkFWQVU2Wk1vVGx6dnFIUFAvK2NQdnZzTTc5U05NeWQrdzFObmp5NU9wL293NlNOR3pkUlNscDNMMmlRcjZvbEFMUisvWHB5b25mQXJEeDRHYjBhakJkV1FtYjZ1a0daRFhoN0hRUlM4MTZsekRLNTlyNkdpUERpL0wweTA5ZVAzZ29IM3ZuNVFCVzkzYnAxcTJDOXEwWHYvYThkaEwzd0NDaTByZjk3U21HeGNMQ1dmMDdQZ29BMXJsQ3ZQQlNma0l0dFpDYXFGOGlUU3h4OFBmckVUei85cE16MGRRRVp1eFVyVmloakxIb2RQWHYyck9EeGxYL2owMDgvNVQ1T3ZwNTZTc3ErQkZlZjZNREVvY09Iak5XRWw3UmFneUNRODhlVXNReVU1T0hnalVYenVDNlhkVEFmZU9BN29LZ2Nmb2VVME1Zc0JQYm5BcUtOeituNUNZQmR5RHRxLzAvdmlWSTgrRmtHaWtwdDhEZWtoRGIyNHordy8zaUpxMTRIWDhiek5YL3Z4TXFkWlhodStoN1lDdzRBd1UyQThMYk1PSG5WaUdJckZoUWN6U1hDZlpqMDlpNHMvYU1Vb3JkdDI3WnpSQ3NUYXArUXBmYWlSWXQwRVpDbGhDYkpRYzVyOHVRVHNzOWgxcXhaa01kWC9RMHBvWDMxMVZlUXgybEZHOS95OTdQaUU3dzNZNmI0aFBSRVpzK2VyWXVla3R4ajh2WFhYOHV1Nk9wOG9qV1RkWjZFQWU4Z0J5VUtwS1RweEFXQlVyYXl0bS9mL2tJT0ZxTjUyWjhQZ0ZwSGdoNFpBUHJtRHRCMzkyakxtYmRCYkZQemNKQ3o5bDdJUVdKNFFrSkNMeUlLRm5icTFLbFBGYjB4SWZUSWRmRTBlMEpQK3ZheDNwcHk1Z005eERZMWl3ejJxTGQvLy83eHJIY3MvNndFQUhWckYweUxuNG1sbksrU0tYZDJxcVk4TmlOSmJGUEMrVUZWOUE0WU1DQk9mTUdUVDNBam1QcjA2VU44eVQvZGV1dXRtdktHRzI0UTI4U3o0enI3QkFkRUtXL1JxRkdqYU96WXNacHl4SWdSWWx2R3JEcTlJY3lnOVBUMGptcWY0Tk44cFNSSGZJdzNUWnMyVFZPKzhzb3JZcHM0QWRma0UxT1k5TkxMcjFCeWFqY3ZhTERWK1cwSUFFMmFOSW1jZUQ1UWtvZTVQWU9kZHhEdlVyMlY2NXhyOUxMaTR5VjFCcy9XN2hOdEhCeGlpY2dpYkdSNnJULzg4RU1JeitJdWtqOUkvcDI5ZXRQTHQ4d040RkpRa1BpQzRSTU5wemNsSmFXdCtFTWo5WW0zbVBUVXBNbVVsTnJOQ3hwc2ZVRXNBYUFISG5pQW5IZ3pVSktINmYzMzN3L2lvdzM2c3ROY3dRNDltUC85SU0rYVB1YW0za3B4YkMzSk5wZXo3UTlFZzJnUlRhSnQrZkxsVm5Ga1lTUFRLN1FNSERnd2huOTJHY2U0SVh6azl5TjYwY3NsdFlGWFhYVlZ0R2hrbWd5ZjBFU3ZxUkg2eEhRbVBmN0VrNVNVOGpjdmFMQzFjK1V4WnN3WWNtSjZ3Q1FQWVpjdVhhSmlZbUl1NXN2enJ4Qm5sNW1TT0pJNHRwbzgyNnRYdXI2LzJCVGJva0cwaUNhZXNVVXFPaHVwWHFGWi9pRDU5eTdVaTE0T0V1bTMzSEtMYURVck9nMmZhSEM5NXNib0UwcnllT3p4SnlpUkE2TEJ1ck5sNndzQ00zbW9nd1U3Y2dqUFFMcnl4cmJMK0NyT3k4WHhGWXBqTlNUVnRzUzJhT0JUUW5zeXdoVjlqVjJ2c2dwSlRFeHMzcTVkdXc2eHNiRmRKWEFJdWR6U3B5R3AyR0diYVdJN0xTMnRxZWdSS3ZvTW4vQkV3eWVVc3RXVEUvOUZpY2xkdmFEQkZ1ZTEwcUJzcFpNa3drdm9KanhiYXNmT244ck9uODdOUjAwb3R0aG1pdGdXRFlxZUFOT3IwS3lpUlNPYUZhcTFHRDZoZ2Q1R0RxVmhQblhxQzlRbHVhc1hOTmkwV1FzTkd1WUdEQmd3b00va01ZRko3Nzc3YitxU2xPWUZEVVpGTnlFQThtUWJPVEVoVUozRXBQQzVMRXBoOXRLWWlXb05nYWhYVC9UV0oxYXVYSm5DbTk1NmFVbTJlZFpqdkdmUG5oUm1MNDBaY0Q1QlJIY3dpZmZRR0FuQlM0YUdoaEVBNGowLzVNUWRnWm8wekU4ZnBvY25INmFjSjQ4UVBYWlVXNHBOc2MwYVJxdkxLM1hSKzJ3MjBiUEhpSjdSaU04S3M3M1g2MUtxc21wTWk5Qmp2OE9EWm41UzZPRmx5NWJsTEZ1MmxKWXRXNkl4bDVMWVpnMTFIdU5kdTNZOXpNelp1WE1IN2RpeFhWT0tUYkhOREJpZlVJNG5XYmR1SFNVa3BYbEJnN3poTXZDT0oxR2didHhOT2t3enh4d2pTajVCRk0yTTFKaGk4Mjg1UkdOWmcyaFJPYlhKazk1bmNvbEdseFBkYVNlNlEyT0t6VEZsUktLaERucVZ3QkRFREhZeVJHTXFka1dEMVYydnUyWU8yak9YTFBtWitOZ0t2NXpCSkRabno1NUZTNVlzSXRGUzJ4aHowSjc1eHg5YmFkV3FsYlI0OFNKYXRFaGJpczNWcTFkUlJzWTJFaTJCNEJORUZNTWtQblNTT3NRblVFSmlhaDFvVU1ZS2dGREdqcHlJQ2J6RWtVVkR4eDBqYWlHQlBNZS9GQTNqV1l0b1VqdXpxOTZuVHhMZFl5TzYzYzhVRGFLbEpyM01JR1lJTTNUdzRNRWRlTWZ4QUswWkh4L2YvOXBycjQwVERjcHVaN1hlYWhMSDBLVkxGOUdYWDM3aDk0UDdSSU5vRVUxcXpTNkpZNmdFN1NWTGxrZ2c5eWRGZzVKQVhQV2FHNXRQQ0lnb2swbTlldmVoem9tcGRhREI4OXUwSlFERW15N0ppY3hBT3BMZDVLU2x3b0VKbTB4QW1RTUErWmVpNFRmV1luTmdwR2h6YWpRTDFYcFBoZ0g4Q3ZpWm9pRTN6S05lb1VYSXo5TmZ4VHVnVjNKdzJaL2ZKRzdWNlF0U05HVmhkTnZWMzMzM1hTWnJXTXdPUFZEUnBmSURxSDFDbW52NStZV3cyeDN3TjBSRFFVRVJpTWlqVHpnY2pnbHliRGkvd3M4UURYTExuN3lxOVNxMFZPY1RjbmdpYjliVGxIenNTMTE4UXJDWmlhVEVMZ0JSSFdpd3RLUUVBajZPQms1c0NyVGtZUkdlc1ZVazd3ZUQ5TUhEQUVyTFNub293VmVsMTZyb0xiVG9SMitSMmFOZUN6ZCtnL21QOUcwK0hHMWU3OGtmOVg1NGR4bnVuNzhZZC94M3JxWWMvdDF5aU8xdUQwMGJ3TGZ1L2NTUGxiN2tFb0JSeFNmT25Fa3VLU21GVGlBSEhzb0JpUjU5d21hekpaZVdsdWxJYjdsb1Z2UldvZG9ueG8wYjEvdkhIMy9FRzI5TXd3c3ZUTkdVYjczMUpzVDJzR0hEYXZJSndXb21ldmJvWHNjL0NZTWxKY1VROU92WEQwNnNRYURBdVVRTlpTZCtlVUltVVdRMlVZUk8yT29ZMGRpTWZHSm5ua0pFWWFvYWJaaWk5L1l5b3R0MHdydExhOVQ3RmdDNmFlNDJHbjJNS01uUFBTWHBhNGtXQUlyZVVHYVFxMC93M2N2cTBwRU9TbGRmMHZ6NTh6MzZ4UGJ0MjZWa3BCc3VYYnBVbXN5dWVrUFZQdkh1dSs5eW4wUjZTbC83dWFmMHMyaXAxaWNFMHVobDB1Ky8vMDd0TzNhbVRnbkpCbXVnakpHU1I3WnUzUnFRemZKZ3JudW1BN0Q5TTVNbzRxaCsySkw1LzNZVWsyampYYnBwUkJRbVRFNU83cTNvdmExVVA3eXJoR2pNVG5lOWZHeEdYd0RVOVg5ZW9ySFordWtwaVJiUnBOSWI3T29URWdEMWxUeStvQVVMRm5qMENiNjlUMWZKUS9vZUd6WnNVT3NOWllhbnBxYjJrOHVyN3IzM1h0SmJUMGswdWZxRXdOa0RJUzdEVVZyWGJrYUNxSVV0em10TnlvbkpNbVpPbUJFZ01BdjVpc1JSQUN6MmVpaFpVVjR1SEFmM1ZaSk81QUFWdHJON0x3QjJpeFdpYmVmT25lT1ZVa1ZtWnVZby9zT3JGNzFuY25OUnZHOWZKY3R5Y2tCbnFWZm9xRVl2ais4RTFvc2VkNDNBSnJOK2VrcGJXRXZhemZkQU5QS01mWnhTb2xEN0JCSHB6Mm5OWm84K29VZTljdUdTcTE2K3grTkJNSzY1NWhyb3JhZkV4OGxYNXhQZzhSV1JzOFNYTDc5c1lDMHVackM0dUJDQ0cyKzhFVEptenJGekJGVFBnK3ZhNGkydys1STBEbWZDdm1vcEJtVHZ3OFJJcXVRMStVY1F1V0VsSExzeXppcUoyR0ZXYXQwWEt6WHU4dkx5S3hTOWRKWThuWm1KWTh1WG9pMG51SnVzVk1uVVkwZFF2SG9sOHJkbndNRjZ2WHBmRDNyNU5ybUx3SWh1RVlNRGV1b3BNV05hdFlDQU5WNHFXcGxRK3dRUlFhOXc5WWxHcE5mRXZSbnhDZkFaV05CYlQ0bWI2SzQrb2NZOEp2aHFYWndwTHpPYTRoNG9ZMU5XV2dMQmJiZmRCaWZtTWhGUXlZT1hWTEZnMkpnZzd5bUpZYXkxRk1kdXVBUS9YNTZPcDlJNlZYTFd4ZDF4N09iTDhYNzdwb2pjdWtHdWcvTXllVlF1bVZ1TFZpRVIrYVMzZ0JQREVGc3B2aHQwQ2Q3c2w0Nzd1M1NxNUpUZTNmSDlWWmZqZ1paTlViWnBBK3dsdnVubDJadVZpRnBDdnJCYVVPclFqNDlYQUhDWVRNcVRRYTJnUVBFSm5RWmpJdkxvRTQxQkx6KzZHOFRqMjFKWlJkbnRkdWdFNmhXUXEwOG9tS1UwZ0Z1MWJHR3NNRHl3c0NBZkFpNVpneStEZ3hPekF5MTVDQ3hNMk01aWxLUTBKWW5oMVo2SmFCSnNoU2ZjMDdFTjFsL1dIYkg3ZDNqei9xSkpnVlVKRkdxOTVDV0w5dS9EQTYyYVlueHFJaUtEUE91OUtxNE5QdWpUSFNHN2Q5VDV2UjNWNkowelowNkVqTE42cFFTZDBPRVFUVzdqcThDaTkyQ3M5b2xHcE5mTVIzeUV5NnMrOVZKMTR3dVgwdFhIL0lyYmI3c1ZkcHZOV0dtNFVNYWtJRDhYZ3BFalJ5b2xLeGt6UjhBbER3VjJKaHhla0dmbEU2TUk5OFMzZ1JyL0tRWmV5QWZlTFFReWJhaEV1OGd3ek9xVkFEcDZwTTQyN0NxL1pjSVh2ZmJUcGJqRlNwREVvTWFLQ21CMk9mRDlHZUNFQTVWb0hSNkdaMUlUVUpybGcxN1ZHTnRJWHowbFJaTm4xRTl3azN2UXQyM2JCdTVMeUV5N1BvT3hxU0gwU3VtR2V6NlErOUN0Vm12OTYxVjhRdi9KemhNK1pHTDQ4T0VBMlZFVkJwVEV3U2NyZzY4ay92L3NuUVZNSmNrYWhUOWtmRmdGeHJMdTd1N3VSSjYvZFhkM2QzZDNkM2QzOTJYZERSYVhLOWpsK3V1VGwwcW5jNWViRHJlSExhQlA4cTlNMjZrYStFLy9kYXFxUFgwMjVzUmp1TWx0b2E0V1RsbGxTUXdhVWpuV2I0RUR1a0RpY1h3RVZtZ0NpWW5CeWd0VXNjdkVsTDlFbVMrUzNFemxrZk1mMDl0YjJITTVsMjlISnNleHZYQnRQenlVZ0RzRzRLQWVlQ09GQVV2Tlc4WEcrWlRmWnhUd0hSZ1lxRUN3MUZQS3pXWHg2T3JxSWhLSnNQamlpK05NVGVYbm4zL1dtMWhBeVMxNHZuMTlmVnJZaC9OUkpKd3Y3TkhTMGlMRE8xQysrcGtZcGVKaHFvOFBnV2VVSFAvN24zL0pHMEZYaElINmdsaTBHOEg1K0pNOExkUlg2ak5jaE9KeGNNMWtCSU1EdXN2NU1sbDQzZ0dkMERDWXdXRG5oYXI5ZXdoNXZDaUI3MDVWWHI3WEpjcjVQVk40bnNTa1BlWHkzWHBtTUh5ejFucEtjMGM4T2pvNnRLQVBaNnFpRXJGK2tXVEdTa0NzRkErSlJpcVZRaHhWY1RqZjVxQ3FxZ3BuRVo4cUppdjRXaUFlQnRjREhIUE1NZVN5YWRBMVlaaXFRei9yNmh0UFg0MXQ4UURJK1l4MGhwMW1MNERCVzdFRWJ3OE1mZjUxZlpXOG5RQkYyYlFxMzgvSk1EUXkrSzg2Y3FrTUc5YTZmTC9zVGZCMWF1anpuMDlYOGswYUZKWFRxL3c5cHdoZnV6Mmw0TVdqdmIyZFpESkpiVzJ0NTE2cVBtcHFhbkNtcWhJWUF1Q3JMVTMwMXFoZmVnTkJvdWQ4NUltMnRqWlhRRUx4VVBYeEhQQ2NoUGJRUXc2aXY2K1g4UTcxUVU4OGluRFNTU2VaV1d2UHFxOXdFVlllOHd6MElnL0RRTUpSN1B4clk3QmRzNGtTazlzdytFN3M2MlhtTkpmdk42bmk1eitUZ05QamJnUXp6R2FYcCtRT3N4WGZuMms0RlljU3NmT0pVeVZjaFJLUy9xMmt3NlJKazR5QURDZDVpbE9RZkZWeGFNYVR4cWc5Zk1WVjRlejVWSXFBaU5Pbzg1Ujg0anlBSTQ0NGdubm5tYWJyeG5WMHRMY2dMTFhVVWppZm5QWDAwZmlvUFBMK1l1VXAzcmZndDNzemdROGc1dk0rS28rOHYxaHNrcGZ2VjRsTXNCV3JENzYyZVVwQlZ4Nm00dERRajRURGVCdEt2Z3N0dEJET1oxa1JsT0JNQmZMYmI3LzlwVy95cWpneW1Rd1NEc05YSG9lNE9WdDBHTDRTdkJJRVpIUjZTajZxajNlQjI5VTNOOTU0STlGSUYrTVZrZTVPMHllb0w5UW42aHZuLzk4YjQrSXhqRGZqUEY2WWF3T093dVJtTmQvaW5vZUZubEl1d09TbWlrUENNV3ZXTE14YnU3d0RDWWtTdEpLeEJNUWNtelp0R3RYVjFmejY2Ni82LzVFV0QxVWM0dVhoSk9HUWtLZ1NjWGE0RldkelRQOXZCRVRuQmNEWEFrK3BkQndJZkwvWlpwdXg4My8vYlladHhoWFVab1V4eWRVWDZoUDlMNFVJS3cvS0svQWdtWVE4Z1VjMm9NcWp6TXVYck1OMzVDc1BDejJsZ0NvUERaM0k0MUFpTThNMFJqZ2tLSG83MWt3bUpWL2pLK2c4bWRKNnk5ZVF5d2dtWTAzSDFkQ2FrcTJ1TVJXR2hFT0NvdmJvSFBGVG1IdExRTVJmaVRzQXZuWjRTaVZ3a3FnbWdiTUFMcm5rRW1iT3FORk9zdU5tcUVwdE5WV0hzNzhhRjE5OE1ZTDZSSDFESVVMUG8yZkNWQXlFUlhMRnhTUGYzRUR1cTQ5TmpMam5NVGpKeTdjNlhaenZ3QjhOUk9zL05oRU1YeXp5bEl6WUJaQklsSVRORzdEeE5pUWNtdTZxUkJ5TlJoSDYrL3MxVENRQlVaSTJIb2lTc3hLeTdqRVN5VmpuS1BFYVExTWN4RVVWaUNvT2NUUlRhaFhpcHlySlZFY2FrdEQvcTIzQjhMWEFVeXFCazU1NVAzQ0hoT3V4eHg0am1lZ25PWmhnckVOdDdHaHJ3Y3l1Y2hZRW14ZU5POVVuL0RsQzhmZ3lnUWNiVGkrSHpOQyt4MEh6WkhoaHd5WCtINXN1RjR6bjRiOGk0TmNVSHF3d3Biem8zbFU3VE1wdzJlcExvTGg4bmVYOHJUREh2OWpaNENrcGdqRE1UYkl5U1ZoREtCSU9KV2hWSEJpNEFxSXBzTVpuVUVoUTlOYnNJN0dWYkVETGc5RXZ1MmRvVGNLaGhLeUt3NFVySU9KbUJNUUludG9adkhqWTZTbjV3TjdBYTlxTzQ2Njc3cUtyczgySTY1aUUydGJXMm9UeHlOVG1aWmRkRnVCMVlDK0dSamhzcFhpNmF4Q0R1a1ZxcUJwaW1taXU4UmNPV1hZMkc4OWFBRVc4ck5KL2NzT0xVdmkrSDNQNWJqeTdodHhQZjg2My8vZGYrUHNTczFsdHhnSW9FdVVCOGJYU295azVrVWdFNUhPWU4zUUpoNFo4VE1VaERDa2dTbkJLZmdzdXVLQXFBVCtwcmVSa0xJNTZsa1JQdzFCR09NU3BFSjRLUktLalpDSHVpcEtUc1lUUU5rL0pQNmVDYlV2MkFKcnI2dXB3dG5oSFBrQTZuUnB6UTFWcWsxblBvWDUxdm9lQzJxeTJBN3VyTDhhVmVBeG5yNmhua3BNeDBCcUVHMWVaU2JiK1BYTHR6ZVJpRVhMZEhXUy9yZWVrNmp5TFZFM0JRTmY1ZlVhUWl3US95YnQ4cHp0OGoxbDZKcEdQMzJPd3RabFVORUt5czRQNFYvWDhhM3FlV2U2MFhsMFgvS0pHU3p5bElEd1BWUmRLdmhJTmhieU5XQ3hHTVVoQXRIcGJDWHpSUlJmVlc3enVNeUp2OHFvdWpGRXU0WlBRRlFwSG9ZQjBkblpLNkpTc2xiUjFIMTljRmFQZlUvSWxJSDhBV3dJOU8rKzhNeWVkZUR3dFRRMW9oOW14QXJWRmJlcnJqU09jZDk1NXFLMXFNN0NWK29EaUNCY0pLdTdwaHJmNzhoalVMVnJMQjl1dXhNNWxVVGJzL29VZEU4MDh1T1ljVGxselNReStITWpwdWhGZkpLaDR0UmUrVHJoOE4xNm9sbHMyWG9rTlUxRVdhL21GbFdQTm5MSENIUFplMmVYN2F6S242NEpmSkdpTnB4Uk1JbEdWOGZ2dnYydVl4Q1JWWDVDQWFHeGVNNWlFa1hxVGwxaG81YmhDczY3OFFnTFMzTnlzZmErQ1grZGh2NmZrUjBDK0IzWUFPT0dFRTdqb29vdG9iMnNtTWREUGFJZmFZSWFxMUs4eXg5VkdRVzEyL3V3Ny9DSGNua1R4cjkvTGFFamxNVmlsdW9xYk4xdVJsK3JXNHFGdFZxTnVzVm9NNHRrOC8yNG9MLzNOdUFTKzUzZVYwZUhlbEtVV3FPTGs5VmZrbXEzWDRvSk5WME9DWXRDZnkzTkJWL0I4cmZLVUROL1J2d0o2OVBPMXhGTXluRW9Ra0hlQWpRQ09QZlpZYnJ2dE5xS1JUdUx4NktnZHF0SVFYR2RIcTZuNDFDYXovWWl3a2RxTXdiaXRQSHpEQ0FLczkyTVpiL2RSRkRxdTh4cFMrRWFlNEJZSm11akx3aEV0Wlh3OVNGSG91TTVyVC91L2Q4NlA1MkdacDVRTnhjTk92aFo0U2dFSXlQcEFZbzg5OXNENTdqejViSnBZcE12Y2YxUkFYTVhaYkhZb0VWWmIxQ1lnQWF4bmhHUDhpa2NKdTc3R003RHR6N0RlRDNCdW00VENqV3M2ZFV3QkRVbUMyL1cxQkw3OVdUaTVGWTVvaHZ1akVnbzNudXJSTVFWMHBJUGxhNk9uRkZZZWx2SzF3Rk1LUUVEZUIxWUhHdlc1M2M4Ly81eGxsbG1LcHNaZkdlanZ3M2FJbzdqMjlzWVIxbHh6VGVycjYxRmIxQ2ExelduakIvaEJPTnVxZUh3NUFPZTF3clkvdVhGOGs2YVpsbURvNGtXUWZIOUx3Z05ST0xuRmpWdTc1SXNNODU0VTU1dTEwRlBLRW9xSDdYd3Q4SlJLOVVBMkFsNVliTEhGZU9lZGR6amtrRU9JZEhkb094UFNHZnUyY3hjbmNldnVhamR0RUdkeDF6WXdBQytxVFdvYkhvU1ZoMVVoVGw1WXpoY3ZyUFdVd3NyREowSytBUWhJb3hQYkFiZXBFcnI2NnF0NTlkVlhtVFd6bHJibVJ1TFJicktadjM1YmQzRVFGM0hTYkNxenllRnJyNzBtem9pNzJ1QzBaVnUxQ1JlRTRnR1VXNVNJeTRvblk3S1lKR2hIbFBrUkR5czhKZitjek82eWxzQVhGNHZvaXN2b0YrZmcvdTcyQnY1dDlzTDYrdXV2TlJ1TE1uSzBOamNTaTNhUlRxVVlhZWlaOGpURW9iY25acndOemFZU1J6YmRkRk9BNzhSZGJhQVFoTU5XZ3ltbWxkc2pIcFBMSVp2T01oVHl5UlFWWlhaMVpxNlE3NmoxbE13MDBjcktDbXhCUlVXNXBxY1c0K3VjWXhQZkN2RU54Y01Wa0FlQlZZSGI1Y05vTnBiV29KeDk5dGxNbWppQjlyWW0ybHViNk8ySms4MW1tRnZRdmZVTVBVdlBOSldHSmhhSWl6NURyTmxVNGlpdXdHcml6aEFJeGFNdHh1d3BVR2xCUXA1UUJyTW5RN3FwYytoek9tTmt5cURDQXFHckJISmxNS0cxMDc5NFdPQXBpUlBGZDU3Vkttd2JxZyt6czIxUnMxaXpqUFFMYnd0ZnpYUVMzMUE4dkpzcE9yRVhzRDd3bkdhVG5YTEtLUklScnJqaUNwWmRkaG5pc1c1VkFrcnVxZ3EweHFLazdVNTByZTZoZSttZXVyZWVvZFhpd2tvcnJjVGxsMTh1RHVKaUZsbytCNnducnVKTWlJSWZsS2ttbFV3NzQzL3NuUVdRRkZlNGhkZmRkOUYxeFozRjRaSEYzZDA5bnVDOG9CRXNIdHlKR3c1eDNOMGQ0dklraXR2S2VlZWthcXFhZmp2RW9LYzNOWmM2TlhkdXkvL1Y4Ty85KzByZnV4TVJoM09RZVFwSU9nd1VPZ0JFV3l6WlRLWnRNVVFjelVYUTJBMWlBLy96cm9CRkVwL205QjFsbnQrQnlDTTU2UG9sMFBOem9PTjVvUDA1YXlXYnNpMkdTUEtXbkxMK050N2h3NGNuTzNoakR3SkJObExFSWFENDdsdEczaUN6VDVBZml4Y3Z4dXJWSy9IdXUrL2l6VGZmeEJ0dnZHR3BaUE85OTk3RHFsV3JJQlp1dE9QVUo3aXlLejcrK0dQczNMa0RXN1pzQWZ2V3NXSERCa3NsbTF1M2JvRVl4TUsza0ozNkJOZEVBcGZ5c0l2STh4cjREb1BaSis1MUhWU2ZXZzFET25Ub0VJWU9IUXBPVVJZTEhQTDA4b0tmbno4Q2c0SVJFaHFHc1BCSWhFZEVJU0l5R3BMeUt0TXhuYU56ZFkydU5VdjNsZzNaTXFYVll2TDQ4OGtkUElLR3JVZnd5MGNRZGlnYk5jNENkVThEdFU4QnRTeVNiTWxtalROQTJJR2JDSDdwTUFJZld1MjBvcWd3NlRPa0x6ak1nSmVOTmw4QUE3NmlxUDRXeVdHckpXMUhIcnlKOVBtSFVIYk1xdHQ0SjA2Y21PRGdMWG9BQ0tHQ2JDRXhBMFYyM1RsNGNKWUp4bzRkaTRVTEYwSUJaTjI2dFZpN2RnMjEyaUxKMWxyYVhvRUZDeFpBTElNSEQzYnFFNU1uVDhiczJiUHgwVWNmWWRldUhkaXpaemQyNzdaV3NpbmJIMzc0SVdiTm1vWHg0OGZmeHNzdFNoUDRzaC9FeTNXUkpMc0VEd2JyMXkwUEhvNEVvQW8xaHpwR1FZbHY1ME9WK3dzdnZJQjI3ZG9oSVNGQmJIOUx1bGIzMEFPRzdxbDdHNUpzeW5iVlAwL3NEaDZCY2hKbEF4OVlyZ0NDb0hIYkVQem1sd2paOEJ0Q3RseTBWdXQvbFcwRVBiRlZMQWdjL0k3RGtYOEZFQ2F4b3JqQzd5Z3pjcGtDQ01wTTM0cjRaVjhpWnZOdmlONTIwVklWMnZTcmJLUHMxQzFpUWVsaGJ4dDV3MW1aUkpIM3BuaGp0dDlBRVQzMTc3ZUhpaDBDWXJaY00vSUdtbjFpd0lBQkNpQjZRdE1UTkdiTW1LRUswVkxKcG14enUxT3hvRisvZms1OWdoV3pBZ2c0RUl1bFM1ZGkrZkxsNERMaGxtclpzbVd5amVuVHA0c0ZvMGVQZHVvVENzcHZ2ZldtYllMSDIyKy9DZTZFWi9ZSnl4T0E5dFQ3eUNkeDJqSUQ5QjYxaE1HdUpyQ2JTYTFSUFZSSXlxdE14M1NPenRVMWNKTGVsNjIvUitrT0hnRjgzZjZFc3Y2dEo2bkN0cFg4bW82RzJOaDN2QmRBcU1RKzdSTjBiQ1IxbWFnSzIxWkthRGZxTmw2K1ZCVGg0QTEvNHpRcUhWZXJ5dldCSTV3TVZjU3k4S0NSTjhEc0U4MmJOMWVGYlNzMWF0VElxVTl3a1RwVjJMWlN4NDRkeFFzeWlqZnN3SUVENGVKVjJUUFBQSU1WSzViYm9mVWhCZ2EvNVpnd1lZTEpKMXhhUDNsUjFhaGgxQ3JxRy96OXBHdDFqeEZVZGQzN245RzVnNGMvbHp5WXA2eG5SSEVFUGJMV1BzSGowUS9nRlJrUHNYSHEzUE1BZ2lYbTU2dk1QNm80eWoyeHhqYUJvOXpZZGZDUGljdVBWNzh2dkV2WFFzU3ViR1FldDhHWUVoa2lkdWZBcDF4OThZSkxXVXlYTDVoOWdnT0hHREpraUcwQ3gvMzMzdyt1aHV2VUp6aGJCdXdxdEUzZ21EUnBFcmdzdXBFM2hBcmk3ejFYWmFtcHFWaTBhSkd0eHBTNEo0ZlpKK3hXWjBWU05hZ3UxRkRxR2VvVmFvR2t2TXAwVE9mb1hGMXo5MG5jd2NNM01UR3hDZnRndjlOWDc5U2FHbWR3ZWVCUUY1cDNTbldJU1d4cGFXa05BUVJJL0lOcjZ1QU5LMUZUNHd3dUR4enFRZ3ZMeUpjM01DTWpvejdMZnRReHY4NmpFTGJqRm1xY0FPcWVCR3J6czVaRmtpM1pyS0VXeDdZYjhPc3dEQTVlYnFGWlRiNlFuMC93eldCMUI3ZzhjS2dMalV0dC9LRlBsQ3BWU3VNTUxnOGM2a0p6Vk1SaTR3dG5qZVFQNGpYNlJKTW1UZXd3cHFUdUtyWHE4dkdKL0pNN3VZT0hELzhncS9QcGFBaWIvUmRVNUJrU0E5L2EvUkRRNVNVRTlKaGpyVHEvQU5uMkRBeDM5THRlNGo3TkEvakhWaFdBbjhSS280YVIxemNzQmtXeitpS3QvNHZJR0R6YlVxWDJmUjZ5N1JQc25MZDI3ZHFwNUgyUXg2N3BISytrY2dpY3ZBN0JLMzlBOExvZnJkV0s3eURiWHNWU2IrT3RVNmRPZ256Qm1VK3dKWUlhTldxZ1E0Y082Tnk1czZYU0lLZHNjMVhZUCtzVGVzcUhLa0lGdlFjZmZOQlNEUnc0VUxiMW0rWEg2MC81Wm1abXBoaDlnc3V0SzBCcU1GZDk5WlpLNDBPeXpVVVVuZnJFWFU2ZWxCZmxTd1ZRUVZTb1NTclRNWjJqYzNXTk85a3BBYXpMbU9pOGpXSmpZenV6bjNPbml1MGdEaXFlNEdZM2ZjVEd5aUVPZ0xkVXdIaDlPUFBIbjl1RTF0VWZKTTg1YnpkZXprS3B3MzU0WC9tQzJ5ZnVIVytaTW1YaTVROEYwU2Z1VXNEd29ZS29DQ3FKNmtTTnBaWlF5NmhQSmVWVnBtTTZSK2ZxR2wycmU5Z25rTGlEaHllYnE3NWNycmttbmFZaEhib3g4NC96cVdreEIvVzJ5ckd0RkcxdXB1MEZZaENMbU1TMmVmTm1Iem15Vk1CNEpXOHVjUkRCWTFtczQ1cXd6MzZFWFhpNVNtdjlaczJhaFltUjhuVDdoQ1c4bmdYSkorNUNDOE9maXFBcVU5T293N1NaeHk2OW0xbFpXZGU3ZHUxNnZVK2Z2dGM1dG5hTnJiYnJYYnAwdmRxcVZhdkxiSjFkWVJDN3hza2J1YnFHMHJXNmgrN2xiNE1XaVR0NFNQeVBET1dibnZVNDROaFF6cTRuSlRtU0hOc29QdTNkVlpudkw1dXlMUWF4aUlsUGJDRU96Z0xLSzNucEQ1TG5WYmNMTHl1SnpFNmRPb1U0S2pUSjdSUDNuTmVyd1BuRTMwdU9vQkZGOWFRMk1VRG10R25UOXNia3lWTnlYM3Y5OWJ6Rmk1ZGczcng1bk5MOEhDY1dQSWtubjN3U28wYU54c2lSbzZFWlgvLzV4RmlNR3pjQkdyL3EzcjNIbFVxVksxL2duaWEzZEMvZFUvYzJCQkZYSm5jQW9TTnJsazE1YnFTZnhWazJEZVQ0RHNteDdxV010bVJiREhTVUtreEJEcjZDenV0b2haUXNXVEthQTlMSmNYRng1VlZ4U094dXFYRXY1YkJEbStWa204c3hSSXJIV1NYaDlnbko3Uk4vczdYaFM0VlJQYW5ObkNpUVBXN2MrSnZ2djc4TWVnRng4cFNwSEdONUJKMDZkMEdEQm8xUXQyNDlaRmFyZ1hMbEs2RlNwY3BVRlZTdWtvbDY5ZXFqY2VNbWFObXlqWUlISjB3TVFyLytBL0t5c2hwY1pDRFNlMGhicUY2eUpadnVWb2dOZ2dqL1k4TDV0SlJJNXk5TDU4L2s0S01sa2kzYUxDUGJZbkR3L010NEhmSXl5TnNLR1cwYVdkdytZVDN2djNpdHZBQXFqbnFONHprNWJFSGNXcjU4QldiT25JV2hRNGVoWmF2V3FGQ2hNcEpUMGxDc2VEd2lvd3FqU05GWUNWSFJSVkcwV0p5a3ZNcVVSK0Vpc1VqUEtJbXFtZFdSbGRVSWJkdTI1OFNOVHNqTXJQWXpsMG0vSmx1eUtkdnVWb2c3dVpNN3VWUEJTdDVVRU5XZHM3Vll3YmU5c1dMRkNuWkx6V2NyNDFHOWJJcVUxQXdVS2x3TW5IV0c2SmlpaUNsVURKd096TExpVkN6S2xpMnJRQ0VwcnpJZDB6azZWMUs1QWdtcTE2aU4xcTFiczlWU1A3dHdrU0xhWEJ4VUR6R0loWEluVjdVK3BLMWJ0NWJoNG5KVnJSUnRsalF5L0JYZWMrZk9sYUdxV3F5L3dXc2YvVldmZUJxdnBqK0ZwVld0bEd5YW1mOXR2SGJTM3d3Y29kUTR0cnh5dVRUSXJiZmZmZ2ZqeGs5RWl4YXRrRkdpTkFOQ2NiVWlVRHcyQVlVWUhPTGlreEdma0l3aXhlS1JrSmhDcGZKNGdqNU4rUlNkbzNOMWphNUZiRnlpeWhtRVNxRmE5VnBVVFpiRi83ZFd2aFdEV0Z3VFFOeEJ3NHV6UW9aejk2d2ZOMjNhaUUyYk5sZ3EyWlJ0TWd3eDliMDY1VDF6NXN4dzZzZlRwMC9oMUttVGxrbzJaWnY2czd6bXJpb2ZpK1d3NjdSdjI4dzhPMjlsOE1TOHhTOU95RnQwWVV6MkxJeTQrYktsa2szWkpzTTBzWmlZNzhnN01Ycyt4dCtjYTZsazA4eGJZSDNpendlT3lleW15MzNsbFJtM0ZpMWF6UGRkSGtLVktwbXM4QlBWUGFVV0JDdjRKQVVCUjJCQVlwSzZyaEwxS1RHd0pDSXBPVjFTWG1YR2N4eEJSZmZRdmRpdEZZZmtsSFNPbFZSazY2UWNpaFl0Zm9FQjVDcFpwcmdEaUVYSk9IREhTdnU5RFJzKzFYSUZMbGx2UnphWExYc2ZHelo4QnJFWW5Ob3pQMTVXMnU4ZFAzNFUyN2R2eGZyMW4rR3p6NnlWYk83WXNSMG5UaHlEV083RWE2Z1lmQ2svaWZLM1dBNjd2bUl4OCtiSFBDNTN3U2U5TDQ1RjlGZi9BYy96bGVGeHZwS2xrczBZMnU1emFSekk4dUhHdkFOK1ptWXo3OGlMTDZETmx3K2h3Ym4reUxKWXNpbmJvOGpnNEMzNFB1RjBqQ09ZR3M5cHZqbXpaczNPMWx2cTNicjFRTWxTWmNGSkFBb2FxdVJSdm54NUJRRUdoU1JVcmx4WmxUK1ZERTRtME9lZnpQOStyZTZoZSttZURDYnhLZ2VuOVNxUUlDUWsvRGVPbTE4Vms5aXNHd054QjQ2K0d6ZCtwbVdaYmJFMHRGakVaSFJtVStEb3EwcGJleWlvSW5laHhPQUlJRVplODFPbEwrVlBCVFJ1M0RpWmZiOTFyQmFYOGFqZHNtWExCREdJUlV4R1hyTlBqTTlaOE1DZ1N4UGhmejRUSHVjcXVWUmlFSXVZak14bTN0R1hYa0xqYzROdzM5bitMcFVZeHBERk9XL0I4WWw4a3NvRHFINTg4ei8zdWVlZXoyYXJnNHRBZGtGR3lkSW9IcGVBd2d3YThZbkpiRFdrOG5zeWtsaTVKNmRtSURZK1JaLy9LSzk3Nlo2NmQwSlNDc3VUa0Y2aUpHSnBOemc0VkR1eTNSU2JHTjJ6c081Uk1qaXhIN3VMam1xRlQ3c3NENzF5NVFxUWFhZll4R2lTMzZsVHA0NXEzd1JWM25iUTd0MDdRU1lqcjdHQ1VGa0FONkJweTVlZTl1cW4xNU9UbHQyd1VocHdsRzB5Yk9mOC9pWmlNdklhZk1KSDVhTnZ6VDVlNnRzMjhEaGJ5UmFxOEYxSGpMazFaNC9aSjR5ODNiNGRnZnZPOUxPRmVuNDM2bzY4WnArSXF4S0hqS1lsTEpWczN0a244azIrVkNLN2lmUnV4dlVaTTJhcXhZRzBkRmJnc1FtSWkxZnJRTjFRREJncEdmeWVncFRVRWhMenFYY3BuNko3eTRaYUkveE1SVnBhQ1VSRkYwRlFjSWpXRFFPVkpGYktuZTUyY2xURVZPQW5uM3lTclZVMjdiTzN3RnZhVU9lNm5OblVyUFlYNzdGang3STNidHhnbStDeGVmTW1iVExqNEhXdzZ0T2ZMYWdRYnFHNlVEKzU5aHZRRG5NdUdsT1NiY2VHU2xwLzZXVURyN2ZSSjhRODlPckx1UUhuMk9vNFU5RVdpdnk4RGg2NzhFSytQdUhnYlh4MklPNDczYzhXYW5IK2dUdnl5aWNDd3Z6UitmMWVlT1MzS1hqb3loUU11ZnlVcFpKTjJlNzRWbmVJeGV3VFRycXJ3cW5YbXpadGVrMHYrdlh2UHdpbFNwZFhWNVhHSlZTWm8yTEZpcXJzRVorUXBxNG5mZDZUdkd6SVZteGNDcituZ0M5a01vQVVocmUzenpkaUZLdTcrK29lcmFwTEJiRHBPWDM5K3ZXMkNSeVNBdG5xMWF2QmVmUFBLRmhRL3BMeTRqMTU4cVJkQW9lazdVZTE4WXlaTjRBUzd3ejkzTnJsYnYxNmpTbTk2K0l4cFUvRkFqR0oxMUZabUh4aXh1UFhYNExINllxMlVjaTVtbmpnZjZjNjh3bnhvdjZwdnJaUms3T0RuZkk2ZktML2djZlErWmVoSEZPcUI4L1BPYWIwZVNWTEpac3h0TjNsbDJIb3QvZFJlUGw2bTMzQzNGM2xUL1hoUW9xMzJGV1ZOMnpZQ0wza3A0RnN0allTMkFKSVU0dUEzMU9SbWxaU1FrSmkycjNNeTVac1V1a2FXTmVzTGdhUVF0bmt2Q2hXTWJ1N3IrNSs4UEJqdjJjbXN6bXFBTzBWUEY3SG1qVnJJRFkrWlpRREVDaHBxV2lWblRoeHdsYkJRK01lKy9idE0vSUdVRUhzS3FxbDVuM3YzcjFoc3pFbE1SbDUvUncrb1ZWcWxYM2sydlB3T0ZYUk5nbytXd05EZm53R1pwL2cwaVExSGJ6MVQvYTFqUnFmR1VqZXlVNTVHenpkR0QxL0hRbi96ek0xT2NDVkVnTlpSb25KN0JQbTJWVlIxRGJ1clhMOXFhZWVRYVBHVFpHWXJCYUd4aDZTa2F4dUpWWHVTZWxJVFM4bFdaS1hUZG1PSTRlNnNvb1VpMFZBWU5EM1loV3p1L1Z4ZDVPWDlPMjMzdzZXVXdDd0g2QVhFY2wyK3ZUcGgvVlYrVysrK1dZd0syTmI4bktodWYvSCs4VVhYenl1d2hZdFduaGN1SERKSXpjM3orV2NZcmg0OGJJSGx3Ny9uWmV0dUljTVQyYnlpYUhLNU9UbHF1ZllWc3JsUC9OdkxGNzZoQzE1OHp5ZDh5WjNxK1N4Ny9KcGo1dDVPUzduRk1QaHErYzhFdHVYTmZ1RU1mbFFyUklULzQrOXM0Q09HMG0zOEZlUzJwall6c1RKUWpJdlRwYUhsNW1abVprWkR6MW1abVpZWm1iZVlUejdocFloTVROMHUxbFNWVDM5NXowNWVoNTNwNjJPMi9KczN6bjNxRHF0bEs0OW5icXEvMWExamozdzJMR3h2bFBqcDFoZFdjS3ZCeGhyT1hSd0dLMk5NR29QRVlaYTJKRjJmTjNSYzRZUUxRcUhRNk1IanlpbHpnT2UyczArenI1NUtOLzNIdzlnclNXcnFOVnFqd0Jjd0tuWDY0L2JRM3BWR0lZUEJ4Z2VIcVpTcVdaSkk5RVNTd1JCRUR3NmNXZW1vdGNQUzJVZU16NU0xayt6WkJxZksrOG5HZHFXcmhGaWJ2T1o4SDMvb2JGZWEyM0xyTTRVcVV5dWJ6QXMrUTNQbGZlVE5LRnA2UnFodmEzZUlBZ2VEcUFPOWpQaEw0QzFtZUJNZlFsM2RIQ3J6NFJBQWYzQXF4LytpRWNHeFdLUjhWUGpMQ3l0MHR2VGczQ3RVSW1PT1hweUhpdHJKVGwydEMzWEZnMDV6Nk92dDVlYXI0bG1IeHA0aldnL3k2V3JybmtZWTQ1bWREQ09OY254am9BU1J1MDlvemRhdXBzenhoeU9aMUZhYTdLQzVBd28wbmlIdUgzVlZWZEpvQ3V2MFNiYzF1RHpyckZYOEZ1amI5emdKV3RqVzUrYkQrWDkweno2WmtaeSs4L1l2NDBvbXBLLzQrZ08yUU1TZW1tWkx4cDdPcTg2OUt3Tm5ydDJjR3ZEeXRlVDUvR2FvODlsZjI2d3BXdHNwVGRxSHdiUUN1bzZ5TXdzS1RBYXJXenlNNUdFQzl3OWVqenRRNkt2U2grWW5aMWpZV0VSYThGeFhmbDhvNVRLREwxY2pwenJNVGk0N3hEd0FPRDQyZDA0MkRVUGdadnh3VmpneGVheGgvUTZILy80eHdma21FMjlkcXZmTDlFenRRY0JOODNNSTk5ZjVyZnY5ODROL3RXRnZ3cjUyL2J4cU5vbHlmTjQxQzg5aUh4WWJPa2FvaW1wT2ZvT3BVMTZiY3VzOVFlOCtYNHYzK0M3TDNvdFliNTJtL1BPcXg4amVkNERqbDFDS1N5M2RBMjl0VjRIUUdlc3pHYTMwTXRwOUFEUGp6TEhpdEdobXA2ZW9WU3VjR0I0RUdQbDcxa09IdGhIcUEzQ2MwWUdkNk10R2tSTFJNT0JBL3RSeWxHZTU2MEFMd1o2T0t2b21nZmJHZHlXbDVlSmdtRnV2UEZHVmxkWGFSVlI3Witycjc2YW4vM3NaMmtHWTRVZ2hkNVNxWVJjYzN4OG5FcWxRcXRZWEZ3ayt1NHFGaFlXMnRIcklNaTQyU1hSMDlNVGF5Y3dJUmhhNW50WFBzOTRiWllZajdyekEzbFVjQWtrejZzYWZ1dGVieU9KZDgvL2VZdlhzSVNpS2ZFNzlqd3ZxUmRyYUpsZldibUN1ZG9TTWU1LzU0czVMemhCOGh4ZDFieituaThtaWIrZiswaEwvUnNqbW5URHo0UzJHY3lVckc2MEtiQUhlT3l4c2JGY3ZyQk92cERIY1JURnNrOU95a2M5THZuMWF0UjJoYnZhRmkyZTUxS3FCUFQyOXREZlB6QUFQQTdvMmFYU1ZkYzhaRUNkbTVzamVtZ01Vc09Qd212a3o4NkVLQ3lrV3EwU1RYZXAxK3RNVDArbkd0eTJxMWZxc210cmEwVGZ1OFBBd0FDaVZmN3NUSmlkblVWMFJzc1JwZllyZmFUUksyYmw3alh6MEZxcnVCMm1DSEpmUGYyYkpQSE9xSlJGeld5OFA3WnlDREdWR085ZCtodzNWWDdjY3YraUtZa3dERGZwdGR2aUgwLzlPMG04NlBoVE1iWFQvUnhZNmVQK1J5NG14bGVXTHVkbmxZa1cremVpcWVGbklqUW1lNW1TTVkzTVl5UXk2b3ZQT2VkZy84cnFHdVZTR1NXbEtxRnlnSWhLQVVxNHkyM1I1RWc1TGFKSGIxL2ZDSEFoTU5JMWoxMHlEeG1BeFRpaXpVMUVtNG1JdnJOZkJ0cW1CaEx0dXNaMVhUbFg3bXBsUUJiajZZaDU5UGIyaW5ISWRVV3pYRmRtUzAwTlpHWm1CcW5mam95TXlGMnQvQjM1dVR1aU53UG1JU2J2SWtoUkJoSmVXcnlCU3dzM0VPTlp4eDhmR2Nhb3ZDY2Q4bHZIMzB3U3Y3UDR6eTMzYlkyVndhM3hZSnlpREhSVDhZZmNXUGdCTVI1ei9LRWNXTzBIQ3phMHZQYkU4MG5pdlF1ZjNWYi9vcWtSdE5IdFpVcXJMV1pLUjFyTGxJUm1hL053Z1FlTWpvNld3MUNyV3FWRXRWN0hHc1hJL2o2MHRzSk10ckVLY0Z6SGNVckFBN3U1eHk2WlIyd1lTaW5FRUdSUWpwNUdKZ2F5WlhrbjJvdEJMcGREQm5ENU96SW9SNEVid3ZSb1hXOXNHUEcxUll1WWdoakkrdm82bXpFMU5ZWDhYTkVtcVkzZ0xkck1KZnlGTVE5Qk96TVA0YnRuLzR3a2Z1dkVXNkJtR0ZucTQxWDNmQjR4M3J2OE9jYnJzOXNjak1PbWVxMjEyK2JmejM2WUpGNTcvUG5vV2todXlmRE1lejZSR0Y5WnZweTUrbExyZlJ1TGJxQTNkYVowMzNmR2JKWXBKYzVyUFZPeWpjM09CYzRiSGg3UmdlK3pzbFpFb1pBeVVha2NJQ3VkY3A3TGVzbVhZeWJhb3FrbzdlZ29ONEZpSHNCNVhmUFlBZk13eG5BbUtLV1FBVGg2NWpISkFWbGV6OC9QSTR3UnJTcVJRVmVXZzI2WWpkekJ5OHlqUllpbVZPOGx6NUVQVHF3aDFpR3ZwUlJWS0JTSUlhVTBtYW5FeGlZL203d1c4NUYrMHV2TmVxYlVHRUZLODVBeTFIc1hQMGNNTVl5eHhWSGVPZnBTWXVTREl1K2Uvck50OWgxbkhtZFg3MC9MRTN4NThYSmlQUE5lVDJSa3NZL25IVHB0SE1XZ3pOOU5mV2liQVRRRXRyRmV2Vk9aMGowM1pVb0xyV1pLaUtaRzVqRVcvWHMydFhvZDM2K2pIQVZLU2RrcVVURlMyV3FMdHY4ZHB5SzZBTWU2NXJHTGdibnYrNGhoU1BuS2NSeGtNSmJYMFJlOHNiUzBoTXhDSk9NUTQ0aWU1NHhTU2did3VPUVYzL0YzN0U1ZXNndlJtSno5eEFZaVd2TDV2R2lXV1pRWVIyd3dHeVV2Q2RuVFkrOW1Tb0pRcDkrODlqc0wvNHdZUkl5L3V2QlhlTmRGcnliR1h5OThNTDRiVGp2emFLRFhwdUo3NXorREdFU005MFFycjE1MjBYT0k4WW1GcjhZcnJMYkZVT3ZHZWxNRTVxK2UyWlFwSGR1VUtTMXZ5cFNXdDVNcFdkSFVhS3pZQjRSMStmZnZ5cWtLNGY3QkhNWWd6R1FiRkJZbFk5UUJZSDkzcC9udW1VZGNaNWFTa0F4eVlneENNWXZZUU9ROW1XSEV4aUxsTG5sUEJtb1p2RHRwSG5FZGY2TjhKcHJpa3B1OGx0bUh2Q2VEZFd3c29sL2VLNWZMY3AzMGVyT1RLYVZBdk5yS3B1SjRkWWEvbnY4QU1aNTE0Z21NOUE0aHlBZnIvRTFrSHR2dDAwWU1qRzZxVjg1Snc3bnFJcCtZLytycDdPUEVROW5mdXkrZWRjaDdLZm8xQkdjcVcyRzN4VXRMRFRJbExPZ3RNcVdsZjk1Vy83cng3M2NmS00rRUlaVmFnT2M2Q010Vm5lbTI2emdSRmNiWUFqREk3cUpySHZGS0pyazdUODVBeEVEdWRyZTd5Wjl0RE5JeUNNcnJsWldWcEhGMFBFTVFJNGdOUkhRSVJiK1UzSkovRmh1SC9IeHlqZmIwWmlCVDZuem1FVE15aUE4bFp4K0pXY2VIMHN3NmhLSnBwL1RLN0NJNSs5ZzA2NmlrNmZQTW1ZZGgyM3ozM0taTTZmaGJvR29ZV2R3aVU2ck5icXZ2MEJnYVFldlFCS0hHV0ZDTytqODYyVzhyQUt2SUJycm1JWkN5and4eU1xdVFvekRlYVNwSHVaT1d3VkJtSTdGeDdKWjV4SHMrUkVmQ0xHSzl5WXhEWmlQU2Z3ZjBkanBUU3BGNXRJRzhMdkx1cVQ4bGlmSEtETDh6ODAra3hJNWtIakZMUVlXL20vZ2dTY3lWRi9tdnFVK24zSFJIODVsSE81blNVZ3VaMHN5ZmJWdHZhQnZxTGRkcTlTQUlBL3B5Q21zam9oam9WUmdyekdiYkFzWW9ITmNaQnNwMEh0M0F2Sm1CQ09JNzV1UXFwV2hwbjVSY1VocEhTd0YwS2dNUnlLcXJUWnZqR0JvYVNtMGNqVFZsUGxOcVByZ1oyeFpsYVdzUzd4My9kQnY5bVIxWmJaWGtseGN2STRrdmpIK3JuZjVhV0txYk1sT2EzNVFwWFJCbFNoY21NcVhGZEptUzNscXZBWXExV3RVSmd4QmZnK01vWEtXb0JkSFJFV2F6N2FBQVF4Q0VhMEFSTU93K3VqT1BwSUZvcldXQWswRlk3dDVsWUV0cEhESHNqaTE5RlFNeHhzaGRlNXpKU0ttblZlTklwVW11bDdGTVNUU2xLRnVsWUJJMlBlT2xwQjNWMjZabTBiUVQ1anhlaXpLbGhSU1pVanB6MXNCRXFWUTBzaUREVlM0cXNicEoyaXFqYll2QldvUFJvUU5NQUpyc29Hc2U4WUFzd2ZUWTJKanNrNUFTUzNyajZNQytDY2xBZk4rWEdaTU14akx3dG0wYzZmVm1MMU1TQkRwN2c3Rm9hcTdYdHMwRTJ1ekxFT3IwK3p4U1owcUxqVE9sbERNUERYeS9YQzU3MVZvTjE5Rlk2MkJ4NlBVTWx1eTJ0WUZRRzR3eGc4QVBNbWdlWGZNUWlIbkk4bExacXlCM3l6RTZjQ2VmV3ErWW5CaEhPclN1S2Z1WlV2Wm5Ia0p0ZDdac0pkd3N0NjJ5VlZPOU9sT1prcVZoWUs2QjY0TWdPRkFwbDNTdGJsSEs0a1FNdEJjZEVXYXU3WWN1VmdjUlF4TmhBTGd1bytiUk5ZK083WURlKzNvemtDbTFZaDQ2ZzJVZ3ZXZjAyaGIwdHAwcExaN05UTWsyMG11QnZMWDIxdVdsNVJVLzhEZCtUSlJRWlpMR2FvSXdwRnFyRm9GYmdUeGc2YUpySG50ZmIzWXpKVUZvZHFBTTVKSzZIMnVOYU9yb1RFazVLbjAvdDUrTXhnSSs4TzF5dVZnSy9USUtCMnNWbmdvQVIwak95VlpibVRxQkgxQ3JWbXZBTndHL2F4NWQ4OWo3ZWpPZUtTVjNRTGZMUy9NM2JIRENXV2h2Y0xQbURIcHQyN3d4LzRNTkxqbjV0dnJTdHZscXE2eVZCVTFqcy9PQmo5ZnJ0Y09CZHF3eEFRcUR0ajF5eEZFV1RhOGNNOUcySnFUcVc4TFF0MkVZREFNZkFYeTY2SnJIM3RlYjdVeEpvRTNJMmNDamIzNzFCdDg3LzlrMmM2V3dxVjVyYVp0dnZmRjNOdmlsdVV2YjZNdUtwc3lWMlZKOFBZbEFBejhCdnJ1ZVg1MDAybUJOUkpLcm5MSkRvMFA4ZW8xeXVWZ0FyZ1ZPZGZPT3JubDA5WjRWZEM3elNNOFVtVWVHWU0rZ1NWdWR1YVhRMnBwbVAwNFYrSzlpTWI4LzFCcHRRWmtxRmplaWcyTnJvRnpocnJhMXNkVDlBTDlXb2xxcEtPQS9SZnNPbHF5NjVpR09uUkcwcENWRGNtTXR0eXZ6MEViam9ESmpITW9xMFhRR3ZZQzFtYUN5b0p1YlhZWXlwYWFCZVl3UStJTFcrdnVGdFpWNUhmaG9lc0NFS0F5NEEzTGMxYloxK2dtRE90VktpV0twdkdLdHZRWDRFaEN3TStpYVJ4QUVlSjVMVnVDNkRtRVkwZ2lpMTNXenBOY1Z2YmN2ODZqNjdIUDZNbU1lQTA0UE9tanlPNjZGZUk2YkdiMDlyb2NObXB0ZDFqSWwwZFFFQmlnRC81SFByL2I3UVYySFlZQzJCaXYvc2ZzcnIwSWRVcTJXSTFaTXRWTHVFNjJpdVR2cjJFSHpLQmFMc2xrdUU3TVAwUkJ2M0d1eUFrbFdIbVZGcit6MEZyMjNLL093QzBYdU1uaVVITzZ1MzhYM3Fod25CbzVnWjlacEJHK2hUdTlnSHk3dWJzc2xweno2K3Z2d1ptck55MVpuQVkrKzVkVXg0NitEU1EzVFhKTUZBdUN6MXRyUHo4L05UTllyQlVKdE1CWnNVRUk1cmhEQ2NzZmJvcUZhWEpFTndCVHlxNnZBcDBVckVIVE5Zd2ZOUTU0QmtjOFhHQjdlTHdPM0JMSnlOOTFSeGwvRElkOHh0YlpXa0VmQzBnankxTDlpc2NUQVFMK1lTTHlCcnFPVWE4b0Q5a1dEYUptY25OejhmRzI3MTh6RDkzMGJ0NzJiRnZoKzhTUVBHRG1mdS9TZnl3RnZpQ0Z2WDBkNVRtNll1dzZjeS8xR3p1UFcwa25jVzVZYS9vNkhieXh6ZWVtL3VmUElZWTcwSDJaL2JvQkJyNitqSE1vTmNuVGdEdHh4NUJEZkxuK1hmYmRVR3VyVnhtUXVVeEpOWjRBQktzQ3YrZlg2OFh4aGZjcXZWUWw5SDd4K3JORmdEVTdQUGpsMnJHMTBnRHdldDF6MUtSYnk2MkVZam9wRzBRb1lkZzVkODZqWDY1dzhlWktscFpYSVBHUXZ3WkJRektSREhCTFRvTGZYa3gzVG9rVldGOUVJc2Q1Q1FXWWdIb09EQXhFSE84d0JjamxQVEZlZTVDZDZOejlEWFZ0cjkxS21KRCtYM2ppbjZOTno5U3pYNTIvbER2M0RrWW1jeHdPSHorOG83emQ4VHc3MURuUDl5czMwWERtTkt2Z2tJTXVXTi9UbVNvYlJhOHA4dHZBZGF2MTF6aDIrSTJNalJ6aldJY3Examd3ZnB0Ulg0WE9yMytIUVZXVnk2N3FoWG0wemxpbTFQaHNLZ1NYZzVmbTExY1BGOVh5K1hxOFJCZ0ZHbTQyK1ZJZitzMGJMWGc3VzF3dXNGL0tsU3FYY0Q3eENOQUloTzRLdWVWaWxWRGxlQmxvb0ZPVGhRaEYveEtsVDQweE9Ua1djN2hDbkdCOGZqNjc5WTlFZ1dpVFhTSzR4TjRtYXEweE5wVXdrejdUZ3h6LytLZFBUTS9JVXZvNXlhbXBhcmkwYVJLL2N0U2YxMnFjLy9la2xwWlMwNWIzTVpVcWJmcjhXNERuUGVjNkdabHUxZURNbEJyNDh6bzNYWGNXM2YzNDVsMDVjMlZGKzUyZVhjOVAxVjRrR3ZOa3lOckFrTlQvcFNVOHFTUnRBVnpVRE15Rkh2MUxpMmhzdTU2TW5QOCtISno3UFJ6cEV1ZGJIZi80RmJyamhTa1REd0d5SWFhTFhxOW1NWlVxOUtQLy82d1dhYlJyOERQQUhpd3R6WHJGWVdLc1VWd21Od2FBSTYwV1U2MGIwMEw2MHZSMW91eGdzcGNJeVVzYU9US3hTS2haeXdPOEJuKzV1Q3R6WnNrV2Y1M25maytiL3RHOFdzSTFqUVJnT3VYWWNMamZVcEl4cHlzemN3NFgybUpsUnNDZzRabVkrMFRJek0zWjF6TXl3ekx4ek16NWJjcGJSY2FRODZWZGluSy9XN3pkdjNrdDdlbnJnemp2dlZKWGEyOXVCMkJpR1dRMEFGaEpPVVgyT25SdGNjY1VWOE1namo2aEtnd2NQRm5pUmtYaXQvZjM5TnVLbGZROC8vRENNSHo4T1B2amdBM2ovL2ZmREttS1lNR0VjakJ3NVV2NThPZkxFbURGanpKSW5URjBNMkcvblZDVytsUW54eE5LbFN4MlNKNXpkaVpCMWgwOVZTbTZMRCtIOTZLT1A3Qkt2KzhNZ0JOZGVCTXlDQUdqbTU0VlY3TUlnbFBZUEFNOWJSYUdlT0g3VG95eW9SMUE3RTVLUzE2ZG41a0JCb0FSS0srcWh2S29lS3FvYm9MSzJoVDdQNG5kVVRUTVVsMVZEZGw0aE9OMCtNRnVzTktqY2czcFVaRHJYSTdWbzVjR3k3RExhV0w1OHVUZ1NWVWVqWHk1aDUwdGZhUjFrcVZSNWNCeTNIQUEwczJiTkVrZjY2bWowN0JZdFdpUjhSMGFCdDdTMGREOCtYL3F1ZWUrOTkzQWRaNHVxMXBSR2p4NHQ4Ukk0aU0vNmtPU0ozU3NQYUVBOWx0REFBZXdkMWgwSThRUjJ4QWNsVDZ4ZnNSbEgrb2RVeEF1YVRmMWJRM2lEd2VCKzVGMUd2RnVmL0VuenpmWmZOUlUyRmF3cFdmTndmZXNuemRhWGZ3bjF4UEhiUVhGTjRYSFVZK3YvK2R1eVlmMC8vKzdZdnAxK0trcy9tY1ZwTER3RmdLYXh6cHJvbm50Mzc5TGdQeXRxdG16YXFObTg4Wjh0Tzdadm80cmpZZUlnSnBIdEhMWm81Y0drcHFaMjR1THZiN1RwOS92aDVwdHZEbnZGY2NNTk40RFA1d05pSXJhTWpJdzJBT0JJNmVucFhSSnZibTR1akJneEl1d1Z4OUNoUXlFN094c2szc3pNekhZQU1CSnZWbFpXRSs3N2w0NTFkbmJDVzIrOUJaTW1UWUNwVTZmQWxDbVRVWk1VRXNXYWdySEh3eHR2dkNGVmRRSnZYbDVlQlhsQjlFU014K001WDJKbWZEcXczUmoraXNOMkhZdG0xUjNORTBiMHlnVVNyOW5QUThaTjNyQlhIT25YZThDVWFqd3FyOXdUaVplNmdadFhCRFhyK3FEam8rdWgvYVByRkZkVmZ4L3djNHNnc2RkMVZFK2NSTk9qZU5TVktLeTgyVjlUVXB5UWtaMFBCY0Z5Q0FRQ1dDazBDWlVERHFpZ3FxNlZkSXJmVzZDNHVCaUNaVFdRazE4RVRxY1RZdU1URCtnTmhvMWlrcnVLR0tJVmgzTEp3NEF2WG1WOGZQd3RXRVp2b1YyNFlBcFZWVlV3YU5BZzZPdnJVMVFEQmd3UVl1TW9EY1QxbUcySmlZazM0TXRXUnAwYUNWL0NLamt2anFLcEl4U1MzdTIzMzY2b2JyenhSb3BOeit4b3ZDeUtLUzh2VDBQZTIvRVlqWWJJOUVLQ2ZQcnBwK0c1NTU1VFZFOCsrYVFRT3lFaElZUzNycTdPUzE2UWUwTE9yRE5wZ2FzMGdIbEFERmg2bFpYNTRoZ2h0dGFvUGI0blpMd0dreDdpS3gzZ0daZ00zajZub3ZJTVNCWmk2NDM2WS9MVzF0YW15M241TkJNNEg4bUd1TEdGNEppb3JPTEhGQXF4V1NkM1ZFK2M0a3dHaDNLalBxQ2ZXMWh0dHZVZXIxOUlJbmtGUVFpV1ZrSjVkWU13blZWWjB3alY5YTMwZVp6dnFOcG1LQzJ2Z1VDd0RMTHpBdUJKOVVOOFFoTDFFWnVwT0taWVlreE9aSWcyaFpLSHpvY05PN1IybDh2Vnh6RE1jdHF0QnVFMHkrZEpTVW5YRUJ0MkRtNEEwSk1pZ1RjL1A5OURMeDVweG93WkxJN2s2K21GeEhPK1V4dXYxK3V0dytsQmhyd2dla0tmazVNalBHT0pXZVdlTUVRU2J5UjY0aFNhRnNXZ3JHSWxzQWlUMFdhejFmcTMwKzA5NVBXbFExWk9JZVJpSWluRVpGQmNWb09xaGhKTURtVlZEY0luN1N1cHFJT2k0Z29vQ0pSaWxSRUVYMW9tcExnOG1EU1NEM0ZHNHphODV3NjZOOFVRWXpGaWJBVmJOSGxvY1FxRGlZMk5yVWJUdEtHaE8vRDd2VGlTZmdmbmtoZVRzWlVVeGx5SXNkOGtCbUloSm1KYnVIQ2hnWXhNaWpCZUxVcmYxTlJreDJNdG1QYzZIUTdIZzJyaFRVNU9idXJ1N3JZU0k3SEtQWUdjdGZUM1NNeHE5MFFrOFVhVUowNS9QWlZGeFlwVFdRdFF1eGdtNWkrc1J2WWxwYmdQdWp3K3FzSXhNV1JCV2tZdTRQUTVwR2ZtZ2o4akczQmdDQzZQSC9BOFFDN2dUWmF0aHYrbnAvYUs5N3BTdkRjYnhtb2ptanhJT0Y5dnNkdnREWEZ4Y1cxa2Rob3BrWkhJMkhMaDZPbXM2dkQ3VTB5S1RRekVRa3c0aWpkTG5CSEdxNU14NitpRnhQTXExY0tMblVSNWIyK3ZXYzRwOXdSZWI4Vy9wMG45bm9nczNvanp4T2szclN5SjJGRWw0c0w2UjZqOXVLNnlHZGNyL21FNWJnTm41RGZ5dkhrRGFqUExHVGZGc094NlBMYUpwdERFLzlQNFNMeVc3bUdYa29aS3FvMW9Ba0Vqc3pnQ0Naak41aGFiemRaS3hwZUV4anFua3NlaTJNVEE4M3dwTmw3aWkzUmVsRTZjRW9yRFVaYmY3WFlIcU9NZzRVaXI2bHhLaW9NeEN5bDJZV0doZzNoSW9ieWh6TlRwNFpwU3VZcWZzUUs4VVUrY2hhWkZHVkE4eW83eW9YcFJ3MUh2b2NhaDVwREU3KytKeDNyRmMrM2l0UVlWSjR4b0VzRVMyb2FqcFZRMGZ3R2F2eHhmUmtWRXNUQm1Qc1VtQm9rbjhua2ozeFBZR1RvaXlST1J4aXRLSjVOZUljbGphaFh5c0ZTUk1DZ094YU1zaDRrWGp6SHFyRENpN1QvU0FqQ1QvckszaHdBQUFBQkpSVTVFcmtKZ2dnPT0"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileDiamond",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUFzNUpSRUZVZUp6dDJORnFIRUVNUk5GeC92K2ZOeS9KUzRpaHJWR051cGx6d1dCc2RXbFlyN2VMKy9YNWZDNEFPSXgvUDdpK2h2YitTK281ZnZwQjNmVWNkeStJNm5OMFgweXJ6NUcrRUw5N2pxY3Y0ci9QTVZvQWZrMHVCM0EwbjJ2bUEreC9PNTk0anBVZGllZW9aSFk4eDFURzFHczQ5UjdhNVgvb2NSUVFBQlUrMzN6LzVONmYvQzY1OTg1c01tdnE3SjJzcWIvaDFIdDRzZ2lNbHhBRkJEZ1hCcUkyazlqYmNXYVhEQVlpei9qbHZ3TUtDSEFtREVUUGJES0xnVmpQWmlCZWlBSUMxR0VnYWpPSnZSMW5kc2xnSVBLOC92TGZBUVVFcU1GQTlNd21zeGlJOVd3R0FvK2pnT0JrR0lqYVRHSnZ4NWxkTWhpSVBDNS9LQ0E0RmdhaVp6YVp4VUNzWnpNUWVCMEtDTzdBUU5SbUVuczd6dXlTd1VEa2NmbGpIQVVFVlJpSW50bGtGZ094bnMxQUFBK2pnSndOQTFHYlNlenRPTE5MQmdPUngrV1AxNk9BbkFzRDBUT2J6R0lnMXJNWkNPQmxLQ0QzWUNCcU00bTlIV2QyeVdBZzhyajhnV0VVa0RvTVJNOXNNb3VCV005bUlBQTh5dWtGaElHb3pTVDJkcHpaSllPQnlPUHlCMTdPNlFVRUFBQWN5T2tGNU92UDE4VGVsWjg5c2JjeWs5amJjV2FYaktuWGNPbzl0TXYvRUlBWGNYb0JtZVRybSsrZjNQdVQzeVgzM3BsTlprMmR2Wk0xOVRlY2VnOVBGaEVsQ0JoRUFia0hBMU9iU2V6dE9MTkxCZ09UUi9rQWhsRkF6b1dCNlpsTlpqRXc2OWtNRFBBeUZKQ3pZV0JxTTRtOUhXZDJ5V0JnOGlnZmVEMEtDS293TUQyenlTd0daajJiZ1FFZVJnSEJIUmlZMmt4aWI4ZVpYVElZbUR6S0I4WlJRSEFxREV6UGJES0xnVm5QWm1Ed09oUVFuQXdEVTV0SjdPMDRzMHNHQTVOSCtZQUNBaFJoWUhwbWsxa016SG8yQTRQSFVVQ0FPZ3hNYlNheHQrUE1MaGtNVEI3bFl3TVVFT0JNR0ppZTJXUVdBN09lemNDOEVBVUVPQmNHcGphVDJOdHhacGNNQmliUDY4dkhkU2tnQUdvd01EMnp5U3dHWmoyYmdSbEFBUUZRaFlHcHpTVDJkcHpaSllPQnlUTmVQcTdydW40RDVOWDdQSTd2WFpFQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoCorners",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUVBQUFBQkFDQVFBQUFBQVlMbFZBQUFFT1VsRVFWUjQybHlOaFJFRFFSRERGR2JxdjVzVTlNenNjVGluMFI2dlo5elprSk1SbTBpcmxKSktOTFIwOUdZd0krSTlnM3hYbUNIRkhHbVdMT1NLdFRLMkhNV0ZHMWQ1MW5yTG5ucXA1WXFlaGlVNHBIblR5dDZNY25pRnY4SDFQWjd4UE9NWHIvZlA4Nlc3RFY1dEZIMlFSK281T1NrSk1aRUlST2hWVENweUNsSEs2a245cHJILzFMaUs4a2xCVGtaSy9Nd0l2VXJKM0xtY1V6a21JeUdXa1d2NmZGQlJ5cWs0TStCdEdvYUNjSG1VdHF3dytQLy9jMXFsTm9oMy9YU2NMSVZLRzR2eHlZNmJacm52bloxVTBtS1liS3hiOXlqZkJPZ2lDR04wbC9TWnUxMUxGeWlGRmdoOWtaRGdINHh2V0Q3UW9qRVFUa1BaZ1pEaVZKb0J1djZXQUd6dnIxRnFIYTBXWmxIT0l6SnhEaXEwWlFleXZSWmtzQTFmeFRxR3RyTitXZFlBZzVLRUVkb3RHWlREdVkrdk5uZkZObkpubExURFI2MmNEd3hKWEx3cEJjSVNBeUM5c05zeHg1WXh0MlpFek5hMURzRmlnQ0QxVVFCKzBPQng0QktXYU1YeWIyMThTK1FlTnlrcCtCRXZieEFIMzNwb2Fac0hvbzE1TEJyWkUzYVVQUURZVS8yQ09YcGc5cWl0LzdWenVBNElGd0hrT1Y5YytYQzc5N1lSd3hETDhHQUMwSks5NngvSi83WDVIaXdvQU5lOG9NclB1K3k1MlAzalduTHdRb0FnQVVEOVh2MnRXaks0a1lJRWdPTjNBdHZZcTZuSUFhRTBUZjFiSmdBRUdZQWdsVjg5Vzhmdm93Q01JQlVIb3RsOEVad0FBRXNBbG0wVEdDR01nQ28vclBCTkFURENUUUMzSU15eEgzL2NLK1pveXgyd3RnaVYzM3BmTUNPRGFDV0J6ZDhEeUFBY0J1c1pDSXNSS2dzd0J5SUpnRkEyanYwc0NFb3ZEWFBOY1RSRXpZN2ZSKys3OG9tTTI5bXZMVVQyZ05rbXRDUXVnTW5OMXA0cGdmL1hQaldBaHZtMk9aWW5ibk9CU0NDYTFYRFRzUXd3ZVFHd2w1S0FUMjFySFpjeUFCTkVtNGRRQWtCekYwRXFSdHRiOCt5bHo3dlNFSWpOSDBJdkFQYnFPa2dnVExRSHdRQWxUZHFHU0w1N0FMNzBSTk5QMFZiVnAzN0tsbk5oejRwc1oyL3pJQ1NCUFJsTWVoZ2R2eVRuTDdVNzZERHNCR21qN2VjTmlMbThCWERVQnhZaUs3WFJHN0JjdnhHcTdROFNBTWkwSHhXNlo1THJUd0pIU2RPa0VPSkI0MTVlRjIzdFRMbisvQjlKcXQxcDk3VzdQZ0F3N2dXampMdDR0Y1Y2L2IxdmV5cDM4dFgyVDkyQk9CZ0IrWS9mcmZLWTJsMTlkNVYrRklBUmtnTVl5Y0tqdTJlZXh5eld5TWEyZHZRblNVY1NPTGVlV2lBY3ZCaCtSVEdtZSthNXI3QnlEZmV3ZFV2V2xQeEU0WVY5NnhzbjcyUUhiMHJFYmQ2a3ZZVzVLOGVhY2dWQ0FnYVFqT0RuSWhnY0h5dVc3dDV3eEk3NTJRamVBekwvVG0rZCtjTExnVUI1Z3c2T2ZLamNaWDRIZ1FST1F1QzBCSUtUR0NDWUlRd3NtNDdDbWpVWFFGeVVnczRkZVJQS2p2b053QVZHUUVaWVU2N0lYTmJzZG05emwrakZQZ0Z3dnA5OGJ2M2MvYmpyZVZnTVFJekM2Tm1hK01aVlo0dkw0MGQ3ZEc4OU80Zjk3cVgzN09YUGY3YUxoNlkvK2YvZVM2djBhZVdmR2ZwKy9PUmU0ODh1NmptL05Fdjd2ZDdudDk4YlN4R0tIQlprUkFBQUFBQkpSVTVFcmtKZ2dnPT0"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__TransitionFade_RawGraphicDiagonalGradient",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVQ0QUFBQ0FDQVlBQUFDU2p3V0JBQUFLT21sRFExQlFhRzkwYjNOb2IzQWdTVU5ESUhCeWIyWnBiR1VBQUVpSm5aWjNWRlRYRm9mUHZYZDZvYzB3RkNsRDc3ME5JTDAzcWRKRVlaZ1pZQ2dERGpNMHNTR2lBaEZGUkFRVlFZSWlCb3lHSXJFaWlvV0FZTUVla0NDZ3hHQVVVVkY1TTdKV2RPWGx2WmVYM3g5bmZXdWZ2ZmM5Wis5OTFyb0FrTHo5dWJ4MFdBcUFOSjZBSCtMbFNvK01pcVpqK3dFTThBQUR6QUJnc2pJekFrSTl3NEJJUGg1dTlFeVJFL2dpQ0lBM2Q4UXJBRGVOdklQb2RQRC9TWnFWd1JlSTBnU0oySUxOeVdTSnVGREVxZG1DRExGOVJzVFUrQlF4d3lneDgwVUhGTEc4bUJNWDJmQ3p6eUk3aTVtZHhtT0xXSHptREhZYVc4dzlJdDZhSmVTSUdQRVhjVkVXbDVNdDRsc2kxa3dWcG5GRi9GWWNtOFpoWmdLQUlvbnRBZzRyU2NTbUlpYnh3MExjUkx3VUFCd3A4U3VPLzRvRm5CeUIrRkp1NlJtNWZHNWlrb0N1eTlLam05bmFNdWplbk94VWprQmdGTVJrcFRENWJMcGJlbG9HazVjTHdPS2RQMHRHWEZ1NnFNaldacmJXMWtibXhtWmZGZXEvYnY1TmlYdTdTSytDUC9jTW92VjlzZjJWWDNvOUFJeFpVVzEyZkxIRjd3V2dZek1BOHZlLzJEUVBBaUFwNmx2N3dGZjNvWW5uSlVrZ3lMQXpNY25PempibWNsakc0b0wrb2YvcDhEZjAxZmVNeGVuK0tBL2RuWlBBRktZSzZPSzZzZEpUMDRWOGVtWUdrOFdoRy8xNWlQOXg0Ritmd3pDRWs4RGhjM2lpaUhEUmxIRjVpYUoyODloY0FUZWRSK2Z5L2xNVC8ySFluN1E0MXlKUkdqNEJhcXd4a0JxZ0F1VFhQb0NpRUFFU2MwQzBBLzNSTjM5OE9CQy92QWpWaWNXNS95em8zN1BDWmVJbGs1djRPYzR0Skl6T0V2S3pGdmZFenhLZ0FRRklBaXBRQUNwQUErZ0NJMkFPYklBOWNBWWV3QmNFZ2pBUUJWWUJGa2dDYVlBUHNrRSsyQWlLUUFuWUFYYURhbEFMR2tBVGFBRW5RQWM0RFM2QXkrQTZ1QUZ1Z3dkZ0JJeUQ1MkFHdkFIekVBUmhJVEpFZ1JRZ1ZVZ0xNb0RNSVFia0NIbEEvbEFJRkFYRlFZa1FEeEpDK2RBbXFBUXFoNnFoT3FnSitoNDZCVjJBcmtLRDBEMW9GSnFDZm9mZXd3aE1ncW13TXF3Tm04QU0yQVgyZzhQZ2xYQWl2QnJPZ3d2aDdYQVZYQThmZzl2aEMvQjErRFk4QWorSFp4R0FFQkVhb29ZWUlRekVEUWxFb3BFRWhJK3NRNHFSU3FRZWFVRzZrRjdrSmpLQ1RDUHZVQmdVQlVWSEdhSHNVZDZvNVNnV2FqVnFIYW9VVlkwNmdtcEg5YUJ1b2taUk02aFBhREphQ1cyQXRrUDdvQ1BSaWVoc2RCRzZFdDJJYmtOZlF0OUdqNlBmWURBWUdrWUhZNFB4eGtSaGtqRnJNS1dZL1poV3pIbk1JR1lNTTR2RlloV3dCbGdIYkNDV2lSVmdpN0I3c2NldzU3QkQySEhzV3h3UnA0b3p4M25pb25FOFhBR3VFbmNVZHhZM2hKdkF6ZU9sOEZwNE8zd2dubzNQeFpmaEcvQmQrQUg4T0g2ZUlFM1FJVGdRd2dqSmhJMkVLa0lMNFJMaEllRVZrVWhVSjlvU2c0bGM0Z1ppRmZFNDhRcHhsUGlPSkVQU0o3bVJZa2hDMG5iU1lkSjUwajNTS3pLWnJFMTJKa2VUQmVUdDVDYnlSZkpqOGxzSmlvU3hoSThFVzJLOVJJMUV1OFNReEF0SnZLU1dwSXZrS3NrOHlVckprNUlEa3ROU2VDbHRLVGNwcHRRNnFScXBVMUxEVXJQU0ZHa3o2VURwTk9sUzZhUFNWNlVuWmJBeTJqSWVNbXlaUXBsRE1oZGx4aWdJUllQaVJtRlJObEVhS0pjbzQxUU1WWWZxUTAybWxsQy9vL1pUWjJSbFpDMWx3MlZ6Wkd0a3o4aU8wQkNhTnMySGxrb3JvNTJnM2FHOWwxT1djNUhqeUcyVGE1RWJrcHVUWHlMdkxNK1JMNVp2bGI4dC8xNkJydUNoa0tLd1U2RkQ0WkVpU2xGZk1WZ3hXL0dBNGlYRjZTWFVKZlpMV0V1S2w1eFljbDhKVnRKWENsRmFvM1JJcVU5cFZsbEYyVXM1UTNtdjhrWGxhUldhaXJOS3NrcUZ5bG1WS1ZXS3FxTXFWN1ZDOVp6cU03b3MzWVdlU3EraTk5Qm4xSlRVdk5XRWFuVnEvV3J6NmpycXk5VUwxRnZWSDJrUU5CZ2FDUm9WR3QwYU01cXFtZ0dhK1pyTm12ZTE4Rm9NclNTdFBWcTlXblBhT3RvUjJsdTBPN1FuZGVSMWZIVHlkSnAxSHVxU2RaMTBWK3ZXNjk3U3crZ3g5RkwwOXV2ZDBJZjFyZlNUOUd2MEJ3eGdBMnNEcnNGK2cwRkR0S0d0SWMrdzNuRFlpR1RrWXBSbDFHdzBha3d6OWpjdU1PNHdmbUdpYVJKdHN0T2sxK1NUcVpWcHFtbUQ2UU16R1ROZnN3S3pMclBmemZYTldlWTE1cmNzeUJhZUZ1c3RPaTFlV2hwWWNpd1BXTjYxb2xnRldHMng2cmI2YUcxanpiZHVzWjZ5MGJTSnM5bG5NOHlnTW9JWXBZd3J0bWhiVjl2MXRxZHQzOWxaMnduc1R0ajlabTlrbjJKLzFINXlxYzVTenRLR3BXTU82ZzVNaHpxSEVVZTZZNXpqUWNjUkp6VW5wbE85MHhObkRXZTJjNlB6aEl1ZVM3TExNWmNYcnFhdWZOYzIxemszTzdlMWJ1ZmRFWGN2OTJMM2ZnOFpqK1VlMVI2UFBkVTlFejJiUFdlOHJMeldlSjMzUm52N2VlLzBIdlpSOW1INU5Qbk0rTnI0cnZYdDhTUDVoZnBWK3ozeDEvZm4rM2NGd0FHK0Fic0NIaTdUV3NaYjFoRUlBbjBDZHdVK0N0SUpXaDMwWXpBbU9DaTRKdmhwaUZsSWZraHZLQ1UwTnZSbzZKc3cxN0N5c0FmTGRaY0xsM2VIUzRiSGhEZUZ6MFc0UjVSSGpFU2FSSzZOdkI2bEdNV042b3pHUm9kSE4wYlBydkJZc1h2RmVJeFZURkhNblpVNkszTldYbDJsdUNwMTFabFl5VmhtN01rNGRGeEUzTkc0RDh4QVpqMXpOdDRuZmwvOERNdU50WWYxbk8zTXJtQlBjUnc0NVp5SkJJZUU4b1RKUklmRVhZbFRTVTVKbFVuVFhEZHVOZmRsc25keWJmSmNTbURLNFpTRjFJalUxalJjV2x6YUtaNE1MNFhYazY2U25wTSttR0dRVVpReHN0cHU5ZTdWTTN3L2ZtTW1sTGt5czFOQUZmMU05UWwxaFp1Rm8xbU9XVFZaYjdQRHMwL21TT2Z3Y3ZweTlYTzM1VTdrZWVaOXV3YTFocldtTzE4dGYyUCs2RnFYdFhYcm9IWHg2N3JYYTZ3dlhEKyt3V3ZEa1kyRWpTa2JmeW93TFNndmVMMHBZbE5Yb1hMaGhzS3h6VjZibTRza2l2aEZ3MXZzdDlSdVJXM2xidTNmWnJGdDc3WlB4ZXppYXlXbUpaVWxIMHBacGRlK01mdW02cHVGN1FuYis4dXN5dzdzd096ZzdiaXowMm5ua1hMcDhyenlzVjBCdTlvcjZCWEZGYTkzeCs2K1dtbFpXYnVIc0VlNFo2VEt2NnB6citiZUhYcy9WQ2RWMzY1eHJXbmRwN1J2Mjc2NS9lejlRd2VjRDdUVUt0ZVcxTDQveUQxNHQ4NnJycjFldTc3eUVPWlExcUduRGVFTnZkOHl2bTFxVkd3c2FmeDRtSGQ0NUVqSWtaNG1tNmFtbzBwSHk1cmhabUh6MUxHWVl6ZStjLyt1czhXb3BhNlYxbHB5SEJ3WEhuLzJmZHozZDA3NG5lZyt5VGpaOG9QV0QvdmFLRzNGN1ZCN2J2dE1SMUxIU0dkVTUrQXAzMVBkWGZaZGJUOGEvM2o0dE5ycG1qT3laOHJPRXM0V25sMDRsM2R1OW56Rytla0xpUmZHdW1PN0gxeU12SGlySjdpbi81TGZwU3VYUFM5ZjdIWHBQWGZGNGNycHEzWlhUMTFqWE91NGJuMjl2YytxciswbnE1L2ErcTM3Mndkc0JqcHYyTjdvR2x3NmVIYklhZWpDVGZlYmwyLzUzTHArZTludHdUdkw3OXdkamhrZXVjdStPM2t2OWQ3TCsxbjM1eDlzZUloK1dQeEk2bEhsWTZYSDlUL3IvZHc2WWoxeVp0Ujl0TzlKNkpNSFk2eXg1NzlrL3ZKaHZQQXArV25saE9wRTA2VDU1T2twejZrYnoxWThHMytlOFh4K3V1aFg2Vi8zdmRCOThjTnZ6ci8xelVUT2pML2t2MXo0dmZTVndxdkRyeTFmZDg4R3pUNStrL1ptZnE3NHJjTGJJKzhZNzNyZlI3eWZtTS8rZ1AxUTlWSHZZOWNudjA4UEY5SVdGdjRGQTVqei9DVjNGblVBQUFSbFNVUkJWSGljN2RSSGtoVkJBRU5Cd2YyUERERXM4RERtbSs1V21jd0lYVUNMOStubDVlVWx3STYrN0xyUFI3d0hUS2NlbitLK0NoL3NweDJlYXZTU1JQaGdMKzN3MUtPWENCL3NwQjJlSWFLWENCL3NvaDJlWWFLWENCL3NvQjJlb2FLWENCK3NyaDJlNGFLWENCK3NyQjJlSWFPWENCK3NxaDJlWWFPWENCK3NxQjJlb2FPWENCK3NwaDJlNGFPWENCK3NwQjJlS2FLWENCK3NvaDJlYWFLWENCK3NvQjJlcWFLWENCL01yaDJlNmFLWENCL01yQjJlS2FPWENCL01xaDJlYWFPWENCL01xQjJlcWFPWENCL01waDJlNmFPWENCL01wQjJlSmFLWENCL01vaDJlWmFLWENCL01vQjJlcGFLWENCK01yaDJlNWFLWENCK01yQjJlSmFPWENCK01xaDJlWmFPWENCK01xQjJlcGFPWENCK01waDJlNWFPWENCK01wQjJlTGFLWENCK01vaDJlYmFLWENCK01vQjJlcmFLWENCKzB0Y096WGZRUzRZT21kbmkyakY0aWZORFNEcysyMFV1RUR4cmE0ZGs2ZW9ud3dkWGE0ZGsrZW9ud3daWGE0Ukc5SDRRUHJ0RU9qK2o5UWZqZ2ZPM3dpTjQvaEEvTzFRNlA2TDFDK09BODdmQ0kzaHVFRDg3UkRvL292VVA0NEhqdDhJamVCNFFQanRVT2oramRRUGpnT08zd2lONk5oQStPMFE2UDZOMUIrT0I1N2ZDSTNwMkVENTdURG8vb1BVRDQ0SEh0OElqZWc0UVBIdE1PaitnOVFmamdmdTN3aU42VGhBL3UwdzZQNkIxQStPQjI3ZkNJM2tHRUQyN1REby9vSFVqNDRHUHQ4SWpld1lRUDN0Y09qK2lkUVBqZ2JlM3dpTjVKaEE5ZTF3NlA2SjFJK09CLzdmQ0kzc21FRC83V0RvL29YVUQ0NExkMmVFVHZJc0lIMzdYREkzb1hFajdvaDBmMExpWjg3SzRkSHRFckVENTIxZzZQNkpVSUg3dHFoMGYwaW9TUEhiWERJM3Bsd3NkdTJ1RVJ2UUVJSHp0cGgwZjBCaUY4N0tJZEh0RWJpUEN4ZzNaNFJHOHd3c2ZxMnVFUnZRRUpIeXRyaDBmMEJpVjhyS29kSHRFYm1QQ3hvblo0Ukc5d3dzZHEydUVSdlFrSUh5dHBoMGYwSmlGOHJLSWRIdEdiaVBDeGduWjRSRzh5d3NmczJ1RVJ2UWtKSHpOcmgwZjBKaVY4ektvZEh0R2JtUEF4bzNaNFJHOXl3c2RzMnVFUnZRVUlIek5waDBmMEZpRjh6S0lkSHRGYmlQQXhnM1o0Ukc4eHdzZm8ydUVSdlFVSkh5TnJoMGYwRmlWOGpLb2RIdEZibVBBeG9uWjRSRzl4d3NkbzJ1RVJ2UTBJSHlOcGgwZjBOaUY4aktJZEh0SGJpUEF4Z25aNFJHOHp3a2RiT3p5aXR5SGhvNmtkSHRIYmxQRFIwZzZQNkcxTStHaG9oMGYwTmlkOFhLMGRIdEZEK0xoVU96eWlSeExoNHpydDhJZ2V2d2dmVjJpSFIvVDRpL0J4dG5aNFJJLy9DQjluYW9kSDlIaVY4SEdXZG5oRWp6Y0pIMmRvaDBmMGVKZndjYlIyZUVTUER3a2ZSMnFIUi9TNGlmQnhsSFo0UkkrYkNSOUhhSWRIOUxpTDhQR3NkbmhFajdzSkg4OW9oMGYwZUlqdzhhaDJlRVNQaHdrZmoyaUhSL1I0aXZCeHIzWjRSSStuQ1IvM2FJZEg5RGlFOEhHcmRuaEVqOE1JSDdkb2gwZjBPSlR3OFpGMmVFU1B3d2tmNzJtSFIvUTRoZkR4bG5aNFJJL1RDQit2YVlkSDlEaVY4UEd2ZG5oRWo5TUpIMzlxaDBmMHVJVHc4Vk03UEtMSFpZU1BwQjhlMGVOU3drYzdQS0xINWI0Qjl1U0dVREtrdjBzQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_input_mouse__FlxMouse_GraphicCursor",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJnQUFBQWdDQVlBQUFBSVhyZzRBQUFCcFVsRVFWUjQyclRSQTVLRFFSQUY0QnhnYmR1MjdUM0RvckMyelR1dGJkdTJiYU5qZFp4TVh0VXJ6WFIvUHlqYUpzYU5GQ1dHRGdCNUJBSGtFUVJvR1JzaGhEQ2dZV2lJRVNVQVJvemxDQ0VJcEJlVVFtQkVCRUVFQWNXMXpUQzlzQW8rSWNFRUVRVDBUU3pCNmZrNWVBVUdFa0lRMERvd0F5ZVh0M0J5ZWdydS9uNWtFQXdNejZ3QlBmc0hCK0RpNDQwUUFnQzlkdy9QREdSbmR4Y2NQVDBRUWdDWVdka0JkamEzdDhETzNVMStCQVBzdnJ4OUFEdHJHeHRnNCtLTUVjV0E1YTFENE0zaThoSllPanBnUkg2Z1kzZ092cjUvK0pDNWhRWFpFUXp3ZHZ2Z0RIQW1wcWZBMk1ZYUkvSUIzV01MOFB2M0J6aGpFeFBTSXhqQVBUcS9CbUVaR0I0Q1Ewc0xqTWdPREU2dmdLaDA5L1pLUUNRQXlSbDU0T1lmQkNFeHNSQ1ZtQ2kwN0orT0VZbEFhbVlCcU9ycU1hcHBhSWlXU0d5aldDQ3pxSkt4V0UxUEQ3U01qR1JiamhFTUZGUTFNSmFyNnh1d0wvYlI2aTFucVdORHNhQzBvUTA5U0xZRE1TZFY2Z05iVncrZ3dWTElsZjlHa0F1b1ZhTUJzUVJ5K0swR0dVN2xoaGVtNGJTd1lDa1FNOU9xNlRnZlpqZ3RMSmhKeThidlpBWWFBZ0JJUDV2ZHJxV1ZzQUFBQUFCSlJVNUVya0pnZ2c9PQ"
      }, {
        name: "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoLight",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUVBQUFBQkFDQVlBQUFDcWFYSGVBQUFGT1VsRVFWUjQycjJhQ1E3VE1CUkUyN0t2MStFY1hJUTdjVVQyblVKUXFoZmxFVDBVbVZnYTJXM2NaZWJQLzNiY25rNnZYdjlQbkFmaDlMOXc1L1RpNVdsd093TmZDL1RyeHJaeEFvejc4cnltQkI0bndIamlaOEc0OExwd2crZnhPY2NMME1ROU52bTRybXZ4UFk0Vm9DSnVzaDd2aUhvNFlaOFFsMzNrVFR5aWVkbUxFRWxDREhaQTI5dEVsNFQ5WElnaWdoNURNdVlOZDBDN3dZVHYwQWNhWitHSUdqREMzcERRT0MzZmhIbGN3b1FBSFdIMW01WTIyWGFDaGFBUHEwZHgzaWxBVjJFVHBsL2hMZ0FsaGdTTzZDYngvUUxRdC8waHZTSi9iOVV6SjkzUUtWQk9TQUdhUEdqaWtBYkx4NzRHZUsrb0NVbE84d1lKd0pleTVTRmprdmNuTUxZQUFQSnlna2xkUTRpc0FYdklROXJrSVF3ZWJEeG1MdVNWQ3JrYUlFU21jd2pnSmNWd1ZYZkVJUW9FQ2JHcUQ1VUcxeUI5N1hxQUFDYmZCYy81YnVJUEo2ekdqM2lNR0U0SE84QmtUSm8rVXFFRU1DQU9uT2VRZy9DeXR4Q2toK3VBOHorSVI1TVlFa0RSajJydmZEZkp4Mzk2OEhnRzgrd0Mxd0RhV2RGbVROL2lXSUIvTFh4cGU1Tjlzc0JqUk5sMmdlOEJIUFVBNUVPQWlMNWQ4SGNCSUE5RVhDTGdBdFVCV1g4bjhXc1dRUk1IVWZnZ2I5c3Z5VCs5allFRm1LSG95KzdnSjMxRjMwS2tBQnQzYzhwOWs1OEFlWTBoLzlnMUFQSWlBRmtERVl4T2dkN3hiVGlBM01mMml2Nk1aMHN4bUwrS3Z2SmV4SDhBa1pjUVVRdk9rd0RLZnhjKzUvNEV5TnNCRUljMFFBQ1JWOVVYZVVTUUVFNkoyaGhkZXJPQUtMMGZjRXJNd0FuZytlUUtRV2t5d1VzbGdubkR4TGk1eVFFbUNyUUV4dExuM0ljWXI1MEo4Umx6VTZTL0E3QzZiaGZRcmlBZFlQVktHSW1qZXdIdERCOXJvd1NZN3p2SXUzVjJrTDlVV1lCdXZVemFKYkZiaENRaU1VOEhLVDVtaTVQa0lDOEJpaXpOdVdZM1dBd0xzeHdEdlVhRWhTQ3UxZ0wwSFZYOVdoT25PZkViZ1FSdVZHc0IyaTVSVkRUV2tpUjRxWXZYTWgvNDJuZ0hNSTR2NHpXYjhSTGZKbFJsMS91QUl0K2NFTURSVmlRMWhtZ3NWOTlXK1BJYlgvLzA0UE9FMnpXQVNFdXhZZ2NvQjVZSWx4M0svVFJNSENJUW5mdVA4L2pUTko3eGFRSnp3RTJNY0VuZUVlNVlCU0t2SFhrVEo3cWZWb1EvTFBDUkhpQUlvaWgxdEIyMkNCS2k5Z0ZiQ3NwcTI1WW42cEQvc01MNzMzaTN3SHVBR0N0WGtCcHlnQUJ4OFpJRFBDbWl6bmpUOGxoOFJmcHRBRkZTQ0p3ZzRsa280WGZwQXdSWGVWdWZJaWNCSFBFbDRUZEw4RHh1VUgyQVBFNndJMDVaQVB0SWpER0lQei9nS2gxaFNUQ0pwUnBCand0d3c1WVRuQmFPZmd2UXY3M2ZFTC9nWGlObEpBQUFkZ0hrNVFaRXVBbzZYb3RUNFNEdDIyZWF5R3VsQUo4aHR5VHJxQk41Uk5DS0VJVXdmaG1pMzNLRWdBaXN0Ym9uMTJyaHpSQWtQem5xTTVqck9nRDQzTjRmK0xmQkZvS3hYK09WQTZoZ1NvUVZSSDdMOWhIOUxvSW1aL3ZIZFgvQTBnVVVxRzg0WUlKRjJINk05WHRIYU9oWHBSU2dDNkd2bTd5M3lpMkNpWU52MitSQjdBUnArZitBYUtxcWtFY0U3eHVvQS9UZklHblNRZDdSNzUxZ0M5QVJ0eEFBOG1EN2J0RkVJUThnN2pVZlJPRUxCMlNoTS9td0d1UWxnb1FnTlJocnh3ZjVKajd3WDJMZCtzNFJRRWhpUUJUaUNLZEtIOGZnNnZjSTRQRlZ6OGR4RmNBTkVLWFhXRERodUEwZWVTanE1L2hDa0lzemdvVHpIbFRPbHpQVEFmdWRZQmZFM1NTQUZHTmZkOVQ3SHlMai95NnZQcHVKNjFoTks0Y2pISWlEbkVFQ0JHbDlhTGtCT0s5WHlLVXRIRGxFZ053dGRoUnMyU0FjeFMxRnA0MFhvTVhaSm0xU29BWGNFZlhSQXZRL3Nxc2lCNEdJYkZ3N1FJRGNGc2NYMjduczlwempCV2czZERPUmN4TnY4a2NMME9UN1dwUHJhOGNMTUlEc2JqR09GMkM4TUNaNmNQc0ZMZ2kyUWU0OEVWTUFBQUFBU1VWT1JLNUNZSUk9"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileCircle",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUF2SkpSRUZVZUp6dDNORnUyekFNQmRCNi8vL1Azc01RTEREcU9MSXRVclRPQVlvTmJXS3lXU1BkVVVhWGRWMS9BSW80V3JDV2hKcDdydlp5MStMYzJrZXZUZUdvajZqTjZMYytvamZDOXg2eU51RWxzZmEvQmdRUW9JRUEwSzVLQU9oWis2Z0hBV0JDQWdod1pMWUFjR2Z0MWg2eUFrQkU3YjBlQklCSkNTQlF6OTZiOXU3cGd3Qnd2eEVEUUdUdGJRODJvSWtKSUZCRDZ4dDFsT25EUzBzLzdrR0k3Y0VFZ2hRQ0NMU0xta0I4cXZXdEVhWVBMeVBmZ3hCUmU2OEhBWUFwL2NsdUFBcFpmejR2MkVkZlAxTXYraG85TjZTamEwZHNobnMxSWpkaW16NzhtSUJRVStRRTRsTzlJMWY2eVRnQ2NRUVIzNE1GbUdtWmdGQko5QVRpZGMzbzUvYllsR3gwd0ZBRUVNNWFOeDhSOVhvOHR2ZDFxbXo4bVVjUUdhL1J1dmt6UTVXZkRlaENBS0hWWHVEb0dVVE9YTGZxNHA1NUR3WkFHQUdrdHFqcHczdTlPeDV6ZDgzUm50dnpXZ0NQSUlEVXRBMGVFVUVrNHdpRUdJNUFnSEFDeURYUkU0aFh6VE5mcXlqckhveXNtMEJIdTVjR29Cc0I1THp0Qk9MSlJ0bkVBWGlJNmdFa1l3THhxdnZONXlMcW5ua01BS1NxSGtBQWdJS3FCNURscDk5dnZ6eXErODNuSXVxZWVRd0FwS29lUURJdE8zOS9valBmMzlOZkV3QXVFRUN1eVpqQWZLcjN0RTMvanU5bmxQRDB0SDhiZ0VzRWtKcTJ3U2NpQ0xWYzMyWjdUdFl4WHVZeFp1YlBpcDlUU0NTQTFCWTlnY200QitYSzliS2UyL05hQUk4Z2dOQnFML1QwREVPakhLTkU2TmwzMWRjRWVDQUJoTE9XelVkRXZSNlA3WDJkS3B0KzVpVE5FUkJNU0FDaGtxT3cweU1NWlJ6anVBa1dlTHhsWGYzaVRQalN0MitXdXpiN3U5NmNMZjMwWGhBKzlSSzFHUDNXUS9SQytONUQxaUs4Sk5ZR0V4Qm9FRDJCeVRnQ3lyd0hKZk1vYjdTYnVlSHhURUNnaHRZMzZ0Vk43dTZGWVlRcHpGRVBKakR4UGRpQUppYUFRRDE3YjlxNy8yZWRjUVIwZCszV0hoeEJ4ZlpnQTVxWUFBSWNPYnRJakRLRkVZRCtHekVBbWNCTVNnQUJXaHd0R0QzdWI1Z3RBR1VkUWZXc2ZkU0RJNmdKQ1NCQUpRSlF1eW9CYU1ZanFJemE3ejJrQm9DL0tSRFdBS1A2d3BFQUFBQUFTVVZPUks1Q1lJST0"
      }, {
        name: "__ASSET__:bitmap_flixel_addons_transition_RawGraphicTransTileSquare",
        data: "aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWlBQUFBQWdDQVlBQUFBckZzTTFBQUFBQVhOU1IwSUFyczRjNlFBQUFUbEpSRUZVZUp6dDNUa1N3akFRUlVHZ3VQK1ZUWVFEQThieU5qTlc5d1drN0w4cUJib1B3M0FEQUxvVEdnRFB5TU1Cb0hOUkVYQVBPbmNrUUFEbzNka1JFRDcrR1FnUUFESTRLd0tNZnhJQ0JJQzNveVBBK0RNU0lBQzVIQlVCeHA5VUJBakFwNzBqd1BqRGhBQUJzdG9yQW93L0pDUkFnRGxiSThENEExOEpFTWh2YlFRWWZ5QXRBUUxMdEVhQThRZVlJVUNvWkdrRUdIK0E1QVFJcmY1RmdQRUg0QzhCVXRPdkNERCtBSlFnUU5hYlJvRHhCNENGSHRFWDJHaTRCWDhuREFDMHF4NGdBRUJCMVo5Z1BIc0FRRUhWQXlTUytBR0FsUVJJVGVJSGdOSUVDSzNFRHdDYkNSQXFFVDhBRnlGQVlCbnhBN0FqQVFMNWlSL2djZ1FJTUVmOEFJY1FJRUJXNGdjdVRJQUFmQkkvY0RBQkFwQ0wrS0VMQWdTQU4vSERhUVFJQUJtSW44NElFQUI2SjM0Q0NCQUFpTk50L0x3QXc0NFVnME5GRTVnQUFBQUFTVVZPUks1Q1lJST0"
      }];
      if (ArrayBuffer.prototype.slice == null) {
        ArrayBuffer.prototype.slice = jp.sliceImpl;
      }
      O.__alpha16 = new Uint32Array(256);
      for (var Ni = 0; Ni < 256;) {
        var jk = Ni++;
        O.__alpha16[jk] = Math.ceil(jk * 257.00392156862745);
      }
      O.__clamp = new Uint8Array(511);
      for (Ni = 0; Ni < 255;) {
        jk = Ni++;
        O.__clamp[jk] = jk;
      }
      for (Ni = 255; Ni < 511;) {
        jk = Ni++;
        O.__clamp[jk] = 255;
      }
      Ua.level = 3;
      if (typeof console == "undefined") {
        console = {};
      }
      if (console.log == null) {
        console.log = function () {};
      }
      A.hitTestCanvas = tg.get_supported() ? window.document.createElement("canvas") : null;
      A.hitTestContext = tg.get_supported() ? A.hitTestCanvas.getContext("2d") : null;
      ii.maxTouchPoints = 2;
      ii.supportedGestures = null;
      ii.supportsGestureEvents = false;
      ii.inputMode = 2;
      kb.__meta__ = {
        statics: {
          toNullVector: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Ba.__meta__ = {
        fields: {
          __cairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          addEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          removeEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Ba.__broadcastEvents = new xa();
      Ba.__instanceCount = 0;
      Ba.__tempStack = new ib(function () {
        return kb.toObjectVector(null);
      }, function (a) {
        a.set_length(0);
      });
      Ca.idEnumerator = 0;
      fb.__fontByName = new xa();
      fb.__registeredFonts = [];
      T.Element = 0;
      T.PCData = 1;
      T.CData = 2;
      T.Comment = 3;
      T.DocType = 4;
      T.ProcessingInstruction = 5;
      T.Document = 6;
      C.data = new tk(null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null);
      C.defaultData = new tk(null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null);
      C.keyBinds = function (a) {
        a = new xa();
        a.h.note_up = [87, 38];
        a.h.note_left = [65, 37];
        a.h.note_down = [83, 40];
        a.h.note_right = [68, 39];
        a.h.ui_up = [87, 38];
        a.h.ui_left = [65, 37];
        a.h.ui_down = [83, 40];
        a.h.ui_right = [68, 39];
        a.h.accept = [32, 13];
        a.h.back = [8, 27];
        a.h.pause = [13, 27];
        a.h.reset = [82];
        a.h.volume_mute = [48];
        a.h.volume_up = [107, 187];
        a.h.volume_down = [109, 189];
        a.h.debug_1 = [55];
        a.h.debug_2 = [56];
        return a;
      }(this);
      C.gamepadBinds = function (a) {
        a = new xa();
        a.h.note_up = [11, 3];
        a.h.note_left = [13, 2];
        a.h.note_down = [12, 0];
        a.h.note_right = [14, 1];
        a.h.ui_up = [11, 34];
        a.h.ui_left = [13, 37];
        a.h.ui_down = [12, 36];
        a.h.ui_right = [14, 35];
        a.h.accept = [0, 7];
        a.h.back = [1];
        a.h.pause = [7];
        a.h.reset = [6];
        return a;
      }(this);
      K.bpm = 100;
      K.crochet = 60 / K.bpm * 1000;
      K.stepCrochet = K.crochet / 4;
      K.songPosition = 0;
      K.offset = 0;
      K.safeZoneOffset = 0;
      K.bpmChangeMap = [];
      qb.defaultList = ["Easy", "Normal", "Hard"];
      qb.list = [];
      qb.defaultDifficulty = "Normal";
      Ya.weekScores = new xa();
      Ya.songScores = new xa();
      Ya.songRating = new xa();
      ve.currentModDirectory = "";
      Vb.skipNextTransIn = false;
      Vb.skipNextTransOut = false;
      P.timePassedOnState = 0;
      Yi.noteTypesData = new xa();
      E.dumpExclusions = ["assets/shared/music/freakyMenu.mp3"];
      E.localTrackedAssets = [];
      E.currentTrackedAssets = new xa();
      E.currentTrackedSounds = new xa();
      da.pool = function (a) {
        return new Th(function () {
          return new da(0, 0);
        });
      }(this);
      Ia._pool = function (a) {
        return new Th(function () {
          return new Ia(0, 0, 0, 0);
        });
      }(this);
      ya.__meta__ = {
        fields: {
          equals: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      ya.__identity = new ya();
      ya.__pool = new ib(function () {
        return new ya();
      }, function (a) {
        a.identity();
      });
      Ob.__pool = new ib(function () {
        return new Ob();
      }, function (a) {
        a.__identity();
      });
      Pb.defaultZoom = 1;
      jb.weeksLoaded = new xa();
      jb.weeksList = [];
      hc.defaultPixelPerfectPosition = false;
      hc.defaultMoves = true;
      G.defaultAntialiasing = false;
      dc.DEFAULT_TEXT_X = 175;
      dc.DEFAULT_TEXT_Y = 460;
      dc.LONG_TEXT_ADD = 24;
      dc.LEFT_CHAR_X = -60;
      dc.RIGHT_CHAR_X = -100;
      dc.DEFAULT_CHAR_Y = 60;
      kd.IDLE_SUFFIX = "-IDLE";
      kd.DEFAULT_CHARACTER = "bf";
      kd.DEFAULT_SCALE = 0.7;
      $i.sha = "";
      g.autoPause = true;
      g.fixedTimestep = true;
      g.timeScale = 1;
      g.animationTimeScale = 1;
      g.worldDivisions = 6;
      g.VERSION = new $i(5, 8, 0);
      g.elapsed = 0;
      g.maxElapsed = 0.1;
      g.scaleMode = new Ek();
      g.worldBounds = function (a) {
        a = Ia._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      g.save = new Jd();
      g.random = new tn();
      g.swipes = [];
      g.inputs = new rn();
      g.log = new sn();
      g.debugger = new qn();
      g.bitmap = new on();
      g.cameras = new pn();
      g.initialWidth = 0;
      g.initialHeight = 0;
      g.signals = new wn();
      mg.muted = true;
      fe.__meta__ = {
        fields: {
          glProgram: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      ge.BASE_VERTEX_HEADER = "attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;";
      ge.BASE_VERTEX_BODY = "openfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform)\n\t\t{\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;";
      ge.BASE_VERTEX_SOURCE = "#pragma header\n\n\t\tattribute float alpha;\n\t\tattribute vec4 colorMultiplier;\n\t\tattribute vec4 colorOffset;\n\t\tuniform bool hasColorTransform;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\t#pragma body\n\n\t\t\topenfl_Alphav = openfl_Alpha * alpha;\n\n\t\t\tif (hasColorTransform)\n\t\t\t{\n\t\t\t\topenfl_ColorOffsetv = colorOffset / 255.0;\n\t\t\t\topenfl_ColorMultiplierv = colorMultiplier;\n\t\t\t}\n\t\t}";
      ge.BASE_FRAGMENT_HEADER = "varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tuniform bool hasTransform;\n\t\tuniform bool hasColorTransform;\n\n\t\tvec4 flixel_texture2D(sampler2D bitmap, vec2 coord)\n\t\t{\n\t\t\tvec4 color = texture2D(bitmap, coord);\n\n\t\t\tif (!hasTransform)\n\t\t\t{\n\t\t\t\treturn color;\n\t\t\t}\n\n\t\t\tif (color.a == 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\n\t\t\tif (!hasColorTransform)\n\t\t\t{\n\t\t\t\treturn color * openfl_Alphav;\n\t\t\t}\n\n\t\t\tcolor = vec4(color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4(0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp(openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\treturn vec4(color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\n\t\t\treturn vec4(0.0, 0.0, 0.0, 0.0);\n\t\t}";
      ge.BASE_FRAGMENT_BODY = "vec4 color = texture2D(bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0)\n\t\t{\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t}\n\t\telse if (openfl_HasColorTransform)\n\t\t{\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0)\n\t\t\t{\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\t\t}";
      ge.BASE_FRAGMENT_SOURCE = "#pragma header\n\n\t\tvoid main(void)\n\t\t{\n\t\t\tgl_FragColor = flixel_texture2D(bitmap, openfl_TextureCoordv);\n\t\t}";
      N.__meta__ = {
        fields: {
          image: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __framebufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __indexBufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __surface: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __textureContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __vertexBufferContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __fromImage: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      N.__tempVector = new bi();
      xe.resourceType = "image/png";
      xe.resourceName = "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileCircle";
      ye.resourceType = "image/png";
      ye.resourceName = "__ASSET__:bitmap_flixel_addons_transition__FlxTransitionSprite_RawGraphicTransTileDiamond";
      ze.resourceType = "image/png";
      ze.resourceName = "__ASSET__:bitmap_flixel_addons_transition_RawGraphicTransTileSquare";
      Ae.resourceType = "image/png";
      Ae.resourceName = "__ASSET__:bitmap_flixel_addons_transition__TransitionFade_RawGraphicDiagonalGradient";
      ob.__pool = new ib(function () {
        return new ob();
      }, function (a) {
        a.setTo(0, 0);
      });
      ba.__pool = new ib(function () {
        return new ba();
      }, function (a) {
        a.setTo(0, 0, 0, 0);
      });
      W.bitmapsCreated = 0;
      W.useSectionCache = true;
      W._staticPoint = new ob();
      W._staticRect = new ba();
      W._staticRect2 = new ba();
      W._staticPointZero = new ob(0, 0);
      W._staticMatrix = new ya();
      W._staticFlxRect = function (a) {
        a = Ia._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      W._staticFlxRect2 = function (a) {
        a = Ia._pool.get();
        var b = 0;
        var c = 0;
        var d = 0;
        var e = 0;
        if (e == null) {
          e = 0;
        }
        if (d == null) {
          d = 0;
        }
        if (c == null) {
          c = 0;
        }
        if (b == null) {
          b = 0;
        }
        a.x = b;
        a.y = c;
        a.width = d;
        a.height = e;
        a._inPool = false;
        return a;
      }(this);
      gd._cachedPoint = function (a) {
        var b = 0;
        a = 0;
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        if (b == null) {
          b = 0;
        }
        a = da.pool.get().set(b, a);
        a._inPool = false;
        return a;
      }(this);
      pj.CLICK_EVENT = "click_popup";
      md.EXTENSIONS = [".ttf", ".otf"];
      cc.defaultPersist = false;
      sb._point = new ob();
      sb._rect = new ba();
      sb._matrix = new Rc();
      Kd.drawCalls = 0;
      hg.fromStringMap = function (a) {
        a = new xa();
        a.h.ANY = -2;
        a.h.A = 0;
        a.h.B = 1;
        a.h.X = 2;
        a.h.Y = 3;
        a.h.LEFT_SHOULDER = 4;
        a.h.RIGHT_SHOULDER = 5;
        a.h.BACK = 6;
        a.h.START = 7;
        a.h.LEFT_STICK_CLICK = 8;
        a.h.RIGHT_STICK_CLICK = 9;
        a.h.GUIDE = 10;
        a.h.DPAD_UP = 11;
        a.h.DPAD_DOWN = 12;
        a.h.DPAD_LEFT = 13;
        a.h.DPAD_RIGHT = 14;
        a.h.LEFT_TRIGGER_BUTTON = 15;
        a.h.RIGHT_TRIGGER_BUTTON = 16;
        a.h.LEFT_TRIGGER = 17;
        a.h.RIGHT_TRIGGER = 18;
        a.h.LEFT_ANALOG_STICK = 19;
        a.h.RIGHT_ANALOG_STICK = 20;
        a.h.DPAD = 21;
        a.h.TILT_PITCH = 26;
        a.h.TILT_ROLL = 27;
        a.h.POINTER_X = 28;
        a.h.POINTER_Y = 29;
        a.h.EXTRA_0 = 30;
        a.h.EXTRA_1 = 31;
        a.h.EXTRA_2 = 32;
        a.h.EXTRA_3 = 33;
        a.h.LEFT_STICK_DIGITAL_UP = 34;
        a.h.LEFT_STICK_DIGITAL_RIGHT = 35;
        a.h.LEFT_STICK_DIGITAL_DOWN = 36;
        a.h.LEFT_STICK_DIGITAL_LEFT = 37;
        a.h.RIGHT_STICK_DIGITAL_UP = 38;
        a.h.RIGHT_STICK_DIGITAL_RIGHT = 39;
        a.h.RIGHT_STICK_DIGITAL_DOWN = 40;
        a.h.RIGHT_STICK_DIGITAL_LEFT = 41;
        return a;
      }(this);
      hg.toStringMap = function (a) {
        a = new Ac();
        a.h[-2] = "ANY";
        a.h[0] = "A";
        a.h[1] = "B";
        a.h[2] = "X";
        a.h[3] = "Y";
        a.h[4] = "LEFT_SHOULDER";
        a.h[5] = "RIGHT_SHOULDER";
        a.h[6] = "BACK";
        a.h[7] = "START";
        a.h[8] = "LEFT_STICK_CLICK";
        a.h[9] = "RIGHT_STICK_CLICK";
        a.h[10] = "GUIDE";
        a.h[11] = "DPAD_UP";
        a.h[12] = "DPAD_DOWN";
        a.h[13] = "DPAD_LEFT";
        a.h[14] = "DPAD_RIGHT";
        a.h[15] = "LEFT_TRIGGER_BUTTON";
        a.h[16] = "RIGHT_TRIGGER_BUTTON";
        a.h[17] = "LEFT_TRIGGER";
        a.h[18] = "RIGHT_TRIGGER";
        a.h[19] = "LEFT_ANALOG_STICK";
        a.h[20] = "RIGHT_ANALOG_STICK";
        a.h[21] = "DPAD";
        a.h[26] = "TILT_PITCH";
        a.h[27] = "TILT_ROLL";
        a.h[28] = "POINTER_X";
        a.h[29] = "POINTER_Y";
        a.h[30] = "EXTRA_0";
        a.h[31] = "EXTRA_1";
        a.h[32] = "EXTRA_2";
        a.h[33] = "EXTRA_3";
        a.h[34] = "LEFT_STICK_DIGITAL_UP";
        a.h[35] = "LEFT_STICK_DIGITAL_RIGHT";
        a.h[36] = "LEFT_STICK_DIGITAL_DOWN";
        a.h[37] = "LEFT_STICK_DIGITAL_LEFT";
        a.h[38] = "RIGHT_STICK_DIGITAL_UP";
        a.h[39] = "RIGHT_STICK_DIGITAL_RIGHT";
        a.h[40] = "RIGHT_STICK_DIGITAL_DOWN";
        a.h[41] = "RIGHT_STICK_DIGITAL_LEFT";
        return a;
      }(this);
      vb.__meta__ = {
        fields: {
          addEventListener: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      vb.numDevices = 0;
      vb.__deviceList = [];
      vb.__instances = [];
      vb.__devices = new ma();
      lg._gameInput = new vb();
      ff.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 24,
        down: 25,
        left: 26,
        right: 27
      });
      ff.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 28,
        down: 29,
        left: 30,
        right: 31
      });
      gf.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      gf.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      Bd.REMOTE_DPAD = new Mc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25,
        threshold: 0.5,
        mode: Pg.ONLY_DIGITAL
      });
      Bd.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Bd.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      hf.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 23,
        down: 24,
        left: 25,
        right: 26
      });
      hf.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 27,
        down: 28,
        left: 29,
        right: 30
      });
      jf.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      jf.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Ce.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      Ce.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      gi.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      hi.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      kf.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25
      });
      kf.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 26,
        down: 27,
        left: 28,
        right: 29
      });
      Cd.REMOTE_DPAD = new Mc(0, 1, {
        up: 22,
        down: 23,
        left: 24,
        right: 25,
        threshold: 0.5,
        mode: Pg.ONLY_DIGITAL
      });
      Cd.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 28,
        down: 29,
        left: 30,
        right: 31
      });
      Cd.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 32,
        down: 33,
        left: 34,
        right: 35
      });
      lf.LEFT_ANALOG_STICK = new Mc(0, 1, {
        up: 21,
        down: 22,
        left: 23,
        right: 24
      });
      lf.RIGHT_ANALOG_STICK = new Mc(2, 3, {
        up: 25,
        down: 26,
        left: 27,
        right: 28
      });
      Fg.fromStringMap = function (a) {
        a = new xa();
        a.h.ANY = -2;
        a.h.A = 65;
        a.h.B = 66;
        a.h.C = 67;
        a.h.D = 68;
        a.h.E = 69;
        a.h.F = 70;
        a.h.G = 71;
        a.h.H = 72;
        a.h.I = 73;
        a.h.J = 74;
        a.h.K = 75;
        a.h.L = 76;
        a.h.M = 77;
        a.h.N = 78;
        a.h.O = 79;
        a.h.P = 80;
        a.h.Q = 81;
        a.h.R = 82;
        a.h.S = 83;
        a.h.T = 84;
        a.h.U = 85;
        a.h.V = 86;
        a.h.W = 87;
        a.h.X = 88;
        a.h.Y = 89;
        a.h.Z = 90;
        a.h.ZERO = 48;
        a.h.ONE = 49;
        a.h.TWO = 50;
        a.h.THREE = 51;
        a.h.FOUR = 52;
        a.h.FIVE = 53;
        a.h.SIX = 54;
        a.h.SEVEN = 55;
        a.h.EIGHT = 56;
        a.h.NINE = 57;
        a.h.PAGEUP = 33;
        a.h.PAGEDOWN = 34;
        a.h.HOME = 36;
        a.h.END = 35;
        a.h.INSERT = 45;
        a.h.ESCAPE = 27;
        a.h.MINUS = 189;
        a.h.PLUS = 187;
        a.h.DELETE = 46;
        a.h.BACKSPACE = 8;
        a.h.LBRACKET = 219;
        a.h.RBRACKET = 221;
        a.h.BACKSLASH = 220;
        a.h.CAPSLOCK = 20;
        a.h.SCROLL_LOCK = 145;
        a.h.NUMLOCK = 144;
        a.h.SEMICOLON = 186;
        a.h.QUOTE = 222;
        a.h.ENTER = 13;
        a.h.SHIFT = 16;
        a.h.COMMA = 188;
        a.h.PERIOD = 190;
        a.h.SLASH = 191;
        a.h.GRAVEACCENT = 192;
        a.h.CONTROL = 17;
        a.h.ALT = 18;
        a.h.SPACE = 32;
        a.h.UP = 38;
        a.h.DOWN = 40;
        a.h.LEFT = 37;
        a.h.RIGHT = 39;
        a.h.TAB = 9;
        a.h.WINDOWS = 15;
        a.h.MENU = 302;
        a.h.PRINTSCREEN = 301;
        a.h.BREAK = 19;
        a.h.F1 = 112;
        a.h.F2 = 113;
        a.h.F3 = 114;
        a.h.F4 = 115;
        a.h.F5 = 116;
        a.h.F6 = 117;
        a.h.F7 = 118;
        a.h.F8 = 119;
        a.h.F9 = 120;
        a.h.F10 = 121;
        a.h.F11 = 122;
        a.h.F12 = 123;
        a.h.NUMPADZERO = 96;
        a.h.NUMPADONE = 97;
        a.h.NUMPADTWO = 98;
        a.h.NUMPADTHREE = 99;
        a.h.NUMPADFOUR = 100;
        a.h.NUMPADFIVE = 101;
        a.h.NUMPADSIX = 102;
        a.h.NUMPADSEVEN = 103;
        a.h.NUMPADEIGHT = 104;
        a.h.NUMPADNINE = 105;
        a.h.NUMPADMINUS = 109;
        a.h.NUMPADPLUS = 107;
        a.h.NUMPADPERIOD = 110;
        a.h.NUMPADMULTIPLY = 106;
        a.h.NUMPADSLASH = 111;
        return a;
      }(this);
      Fg.toStringMap = function (a) {
        a = new Ac();
        a.h[-2] = "ANY";
        a.h[65] = "A";
        a.h[66] = "B";
        a.h[67] = "C";
        a.h[68] = "D";
        a.h[69] = "E";
        a.h[70] = "F";
        a.h[71] = "G";
        a.h[72] = "H";
        a.h[73] = "I";
        a.h[74] = "J";
        a.h[75] = "K";
        a.h[76] = "L";
        a.h[77] = "M";
        a.h[78] = "N";
        a.h[79] = "O";
        a.h[80] = "P";
        a.h[81] = "Q";
        a.h[82] = "R";
        a.h[83] = "S";
        a.h[84] = "T";
        a.h[85] = "U";
        a.h[86] = "V";
        a.h[87] = "W";
        a.h[88] = "X";
        a.h[89] = "Y";
        a.h[90] = "Z";
        a.h[48] = "ZERO";
        a.h[49] = "ONE";
        a.h[50] = "TWO";
        a.h[51] = "THREE";
        a.h[52] = "FOUR";
        a.h[53] = "FIVE";
        a.h[54] = "SIX";
        a.h[55] = "SEVEN";
        a.h[56] = "EIGHT";
        a.h[57] = "NINE";
        a.h[33] = "PAGEUP";
        a.h[34] = "PAGEDOWN";
        a.h[36] = "HOME";
        a.h[35] = "END";
        a.h[45] = "INSERT";
        a.h[27] = "ESCAPE";
        a.h[189] = "MINUS";
        a.h[187] = "PLUS";
        a.h[46] = "DELETE";
        a.h[8] = "BACKSPACE";
        a.h[219] = "LBRACKET";
        a.h[221] = "RBRACKET";
        a.h[220] = "BACKSLASH";
        a.h[20] = "CAPSLOCK";
        a.h[145] = "SCROLL_LOCK";
        a.h[144] = "NUMLOCK";
        a.h[186] = "SEMICOLON";
        a.h[222] = "QUOTE";
        a.h[13] = "ENTER";
        a.h[16] = "SHIFT";
        a.h[188] = "COMMA";
        a.h[190] = "PERIOD";
        a.h[191] = "SLASH";
        a.h[192] = "GRAVEACCENT";
        a.h[17] = "CONTROL";
        a.h[18] = "ALT";
        a.h[32] = "SPACE";
        a.h[38] = "UP";
        a.h[40] = "DOWN";
        a.h[37] = "LEFT";
        a.h[39] = "RIGHT";
        a.h[9] = "TAB";
        a.h[15] = "WINDOWS";
        a.h[302] = "MENU";
        a.h[301] = "PRINTSCREEN";
        a.h[19] = "BREAK";
        a.h[112] = "F1";
        a.h[113] = "F2";
        a.h[114] = "F3";
        a.h[115] = "F4";
        a.h[116] = "F5";
        a.h[117] = "F6";
        a.h[118] = "F7";
        a.h[119] = "F8";
        a.h[120] = "F9";
        a.h[121] = "F10";
        a.h[122] = "F11";
        a.h[123] = "F12";
        a.h[96] = "NUMPADZERO";
        a.h[97] = "NUMPADONE";
        a.h[98] = "NUMPADTWO";
        a.h[99] = "NUMPADTHREE";
        a.h[100] = "NUMPADFOUR";
        a.h[101] = "NUMPADFIVE";
        a.h[102] = "NUMPADSIX";
        a.h[103] = "NUMPADSEVEN";
        a.h[104] = "NUMPADEIGHT";
        a.h[105] = "NUMPADNINE";
        a.h[109] = "NUMPADMINUS";
        a.h[107] = "NUMPADPLUS";
        a.h[110] = "NUMPADPERIOD";
        a.h[106] = "NUMPADMULTIPLY";
        a.h[111] = "NUMPADSLASH";
        return a;
      }(this);
      Me.resourceType = "image/png";
      Me.resourceName = "__ASSET__:bitmap_flixel_input_mouse__FlxMouse_GraphicCursor";
      Xh.maxTouchPoints = 0;
      Xd._point = function (a) {
        var b = a = 0;
        if (b == null) {
          b = 0;
        }
        if (a == null) {
          a = 0;
        }
        a = da.pool.get().set(a, b);
        a._inPool = false;
        return a;
      }(this);
      Bf.resourceType = "image/png";
      Bf.resourceName = "__ASSET__:bitmap_flixel_system_GraphicLogo";
      Cf.resourceType = "image/png";
      Cf.resourceName = "__ASSET__:bitmap_flixel_system_GraphicVirtualInput";
      sd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      sd.defaultObjectEncoding = 10;
      Md.defaultSoundExtension = "ogg";
      Md.FONT_DEFAULT = "Nokia Cellphone FC Small";
      Md.FONT_DEBUGGER = "Monsterrat";
      Dd._NUM_CACHED_FLX_LIST = 0;
      nf.resourceType = "image/png";
      nf.resourceName = "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoLight";
      of.resourceType = "image/png";
      of.resourceName = "__ASSET__:bitmap_flixel_system__FlxPreloader_GraphicLogoCorners";
      De._NUM_CACHED_QUAD_TREES = 0;
      ji._tooltips = [];
      Pe.windowAmount = 0;
      Aa.NORMAL = new Aa();
      Aa.WARNING = new Aa("[WARNING] ", "D9F85C", 12, false, false, false, "flixel/sounds/beep", true);
      Aa.ERROR = new Aa("[ERROR] ", "FF8888", 12, false, false, false, "flixel/sounds/beep", true);
      Aa.NOTICE = new Aa("[NOTICE] ", "5CF878", 12, false);
      X.PI2 = Math.PI / 2;
      X.B1 = 0.36363636363636365;
      X.B2 = 0.7272727272727273;
      X.B3 = 0.5454545454545454;
      X.B4 = 0.9090909090909091;
      X.B5 = 0.8181818181818182;
      X.B6 = 0.9545454545454546;
      X.ELASTIC_AMPLITUDE = 1;
      X.ELASTIC_PERIOD = 0.4;
      Gb.colorLookup = function (a) {
        a = new xa();
        a.h.TRANSPARENT = 0;
        a.h.WHITE = -1;
        a.h.GRAY = -8355712;
        a.h.BLACK = -16777216;
        a.h.GREEN = -16744448;
        a.h.LIME = -16711936;
        a.h.YELLOW = -256;
        a.h.ORANGE = -23296;
        a.h.RED = -65536;
        a.h.PURPLE = -8388480;
        a.h.BLUE = -16776961;
        a.h.BROWN = -7650029;
        a.h.PINK = -16181;
        a.h.MAGENTA = -65281;
        a.h.CYAN = -16711681;
        return a;
      }(this);
      Gb.COLOR_REGEX = new na("^(0x|#)(([A-F0-9]{2}){3,4})$", "i");
      Yf.defaultObjectEncoding = 10;
      Fc.flashGfxSprite = new Ra();
      Fc.flashGfx = Fc.flashGfxSprite.get_graphics();
      Xc._pool = new Th(function () {
        return new Xc();
      });
      Ff.__fullCombineShader = new Sl();
      Ff.__innerCombineShader = new Tl();
      Ff.__combineShader = new Rl();
      Fj.s_arrayOfDeltaIndex = [0, 0.01, 0.02, 0.04, 0.05, 0.06, 0.07, 0.08, 0.1, 0.11, 0.12, 0.14, 0.15, 0.16, 0.17, 0.18, 0.2, 0.21, 0.22, 0.24, 0.25, 0.27, 0.28, 0.3, 0.32, 0.34, 0.36, 0.38, 0.4, 0.42, 0.44, 0.46, 0.48, 0.5, 0.53, 0.56, 0.59, 0.62, 0.65, 0.68, 0.71, 0.74, 0.77, 0.8, 0.83, 0.86, 0.89, 0.92, 0.95, 0.98, 1, 1.06, 1.12, 1.18, 1.24, 1.3, 1.36, 1.42, 1.48, 1.54, 1.6, 1.66, 1.72, 1.78, 1.84, 1.9, 1.96, 2, 2.12, 2.25, 2.37, 2.5, 2.62, 2.75, 2.87, 3, 3.2, 3.4, 3.6, 3.8, 4, 4.3, 4.7, 4.9, 5, 5.5, 6, 6.5, 6.8, 7, 7.3, 7.5, 7.8, 8, 8.4, 8.7, 9, 9.4, 9.6, 9.8, 10];
      Hf.MATRIX_ORDER_APPEND = 1;
      Fe.lumR = 0.3086;
      Fe.lumG = 0.6094;
      Fe.lumB = 0.082;
      le.USE_CACHE = false;
      le.USE_ENUM_INDEX = false;
      le.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
      Zd.DEFAULT_RESOLVER = new Vl();
      Zd.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
      pi.CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
      pi.BYTES = ac.ofString(pi.CHARS);
      Dg.escapes = function (a) {
        a = new xa();
        a.h.lt = "<";
        a.h.gt = ">";
        a.h.amp = "&";
        a.h.quot = "\"";
        a.h.apos = "'";
        return a;
      }(this);
      Fd.LEN_EXTRA_BITS_TBL = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, -1, -1];
      Fd.LEN_BASE_VAL_TBL = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258];
      Fd.DIST_EXTRA_BITS_TBL = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, -1, -1];
      Fd.DIST_BASE_VAL_TBL = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577];
      Fd.CODE_LENGTHS_POS = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
      Pa.activeRequests = 0;
      Pa.requestLimit = 17;
      Pa.requestQueue = new mb();
      Xa.dummyCharacter = "";
      Xa.windowID = 0;
      Zf.DICTIONARY = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");
      Zf.EXTENDED_DICTIONARY = function (a) {
        a = [];
        for (var b = 0, c = Zf.DICTIONARY; b < c.length;) {
          var d = c[b];
          ++b;
          for (var e = 0, f = Zf.DICTIONARY; e < f.length;) {
            var g = f[e];
            ++e;
            a.push(d + g);
          }
        }
        return a;
      }(this);
      pe.MUL_TABLE = [1, 171, 205, 293, 57, 373, 79, 137, 241, 27, 391, 357, 41, 19, 283, 265, 497, 469, 443, 421, 25, 191, 365, 349, 335, 161, 155, 149, 9, 278, 269, 261, 505, 245, 475, 231, 449, 437, 213, 415, 405, 395, 193, 377, 369, 361, 353, 345, 169, 331, 325, 319, 313, 307, 301, 37, 145, 285, 281, 69, 271, 267, 263, 259, 509, 501, 493, 243, 479, 118, 465, 459, 113, 446, 55, 435, 429, 423, 209, 413, 51, 403, 199, 393, 97, 3, 379, 375, 371, 367, 363, 359, 355, 351, 347, 43, 85, 337, 333, 165, 327, 323, 5, 317, 157, 311, 77, 305, 303, 75, 297, 294, 73, 289, 287, 71, 141, 279, 277, 275, 68, 135, 67, 133, 33, 262, 260, 129, 511, 507, 503, 499, 495, 491, 61, 121, 481, 477, 237, 235, 467, 232, 115, 457, 227, 451, 7, 445, 221, 439, 218, 433, 215, 427, 425, 211, 419, 417, 207, 411, 409, 203, 202, 401, 399, 396, 197, 49, 389, 387, 385, 383, 95, 189, 47, 187, 93, 185, 23, 183, 91, 181, 45, 179, 89, 177, 11, 175, 87, 173, 345, 343, 341, 339, 337, 21, 167, 83, 331, 329, 327, 163, 81, 323, 321, 319, 159, 79, 315, 313, 39, 155, 309, 307, 153, 305, 303, 151, 75, 299, 149, 37, 295, 147, 73, 291, 145, 289, 287, 143, 285, 71, 141, 281, 35, 279, 139, 69, 275, 137, 273, 17, 271, 135, 269, 267, 133, 265, 33, 263, 131, 261, 130, 259, 129, 257, 1];
      pe.SHG_TABLE = [0, 9, 10, 11, 9, 12, 10, 11, 12, 9, 13, 13, 10, 9, 13, 13, 14, 14, 14, 14, 10, 13, 14, 14, 14, 13, 13, 13, 9, 14, 14, 14, 15, 14, 15, 14, 15, 15, 14, 15, 15, 15, 14, 15, 15, 15, 15, 15, 14, 15, 15, 15, 15, 15, 15, 12, 14, 15, 15, 13, 15, 15, 15, 15, 16, 16, 16, 15, 16, 14, 16, 16, 14, 16, 13, 16, 16, 16, 15, 16, 13, 16, 15, 16, 14, 9, 16, 16, 16, 16, 16, 16, 16, 16, 16, 13, 14, 16, 16, 15, 16, 16, 10, 16, 15, 16, 14, 16, 16, 14, 16, 16, 14, 16, 16, 14, 15, 16, 16, 16, 14, 15, 14, 15, 13, 16, 16, 15, 17, 17, 17, 17, 17, 17, 14, 15, 17, 17, 16, 16, 17, 16, 15, 17, 16, 17, 11, 17, 16, 17, 16, 17, 16, 17, 17, 16, 17, 17, 16, 17, 17, 16, 16, 17, 17, 17, 16, 14, 17, 17, 17, 17, 15, 16, 14, 16, 15, 16, 13, 16, 15, 16, 14, 16, 15, 16, 12, 16, 15, 16, 17, 17, 17, 17, 17, 13, 16, 15, 17, 17, 17, 16, 15, 17, 17, 17, 16, 15, 17, 17, 14, 16, 17, 17, 16, 17, 17, 16, 15, 17, 16, 14, 17, 16, 15, 17, 16, 17, 17, 16, 17, 15, 16, 17, 14, 17, 16, 15, 17, 16, 17, 13, 17, 16, 17, 17, 16, 17, 14, 17, 16, 17, 16, 17, 16, 17, 9];
      nb.__identity = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
      yc.onUpdate = new Uc();
      yc.__updated = false;
      Ie.sensorByID = new Ac();
      Ie.sensors = [];
      Oc.devices = new Ac();
      Oc.onConnect = new Ao();
      Kc.devices = new Ac();
      Kc.onConnect = new Bo();
      Dc.onCancel = new yi();
      Dc.onEnd = new yi();
      Dc.onMove = new yi();
      Dc.onStart = new yi();
      oa.cache = new Go();
      oa.onChange = new Uc();
      oa.bundlePaths = new xa();
      oa.libraries = new xa();
      oa.libraryPaths = new xa();
      Ua.throwErrors = true;
      bc.Y_PER_ROW = 85;
      sf.allLetters = function (a) {
        a = new xa();
        a.h.a = null;
        a.h.b = null;
        a.h.c = null;
        a.h.d = null;
        a.h.e = null;
        a.h.f = null;
        a.h.g = null;
        a.h.h = null;
        a.h.i = null;
        a.h.j = null;
        a.h.k = null;
        a.h.l = null;
        a.h.m = null;
        a.h.n = null;
        a.h.o = null;
        a.h.p = null;
        a.h.q = null;
        a.h.r = null;
        a.h.s = null;
        a.h.t = null;
        a.h.u = null;
        a.h.v = null;
        a.h.w = null;
        a.h.x = null;
        a.h.y = null;
        a.h.z = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = {
          offsetsBold: [0, -11]
        };
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h. = null;
        a.h["0"] = null;
        a.h["1"] = null;
        a.h["2"] = null;
        a.h["3"] = null;
        a.h["4"] = null;
        a.h["5"] = null;
        a.h["6"] = null;
        a.h["7"] = null;
        a.h["8"] = null;
        a.h["9"] = null;
        a.h["&"] = {
          offsetsBold: [0, 2]
        };
        a.h["("] = {
          offsetsBold: [0, 0]
        };
        a.h[")"] = {
          offsetsBold: [0, 0]
        };
        a.h["["] = null;
        a.h["]"] = {
          offsets: [0, -1]
        };
        a.h["*"] = {
          offsets: [0, 28],
          offsetsBold: [0, 40]
        };
        a.h["+"] = {
          offsets: [0, 7],
          offsetsBold: [0, 12]
        };
        a.h["-"] = {
          offsets: [0, 16],
          offsetsBold: [0, 16]
        };
        a.h["<"] = {
          offsetsBold: [0, -2]
        };
        a.h[">"] = {
          offsetsBold: [0, -2]
        };
        a.h["'"] = {
          anim: "apostrophe",
          offsets: [0, 32],
          offsetsBold: [0, 40]
        };
        a.h["\""] = {
          anim: "quote",
          offsets: [0, 32],
          offsetsBold: [0, 40]
        };
        a.h["!"] = {
          anim: "exclamation"
        };
        a.h["?"] = {
          anim: "question"
        };
        a.h["."] = {
          anim: "period"
        };
        a.h[""] = {
          anim: "start quote",
          offsets: [0, 24],
          offsetsBold: [0, 40]
        };
        a.h[""] = {
          anim: "end quote",
          offsets: [0, 24],
          offsetsBold: [0, 40]
        };
        a.h._ = null;
        a.h["#"] = null;
        a.h.$ = null;
        a.h["%"] = null;
        a.h[":"] = {
          offsets: [0, 2],
          offsetsBold: [0, 8]
        };
        a.h[";"] = {
          offsets: [0, -2],
          offsetsBold: [0, 4]
        };
        a.h["@"] = null;
        a.h["^"] = {
          offsets: [0, 28],
          offsetsBold: [0, 38]
        };
        a.h[","] = {
          anim: "comma",
          offsets: [0, -6],
          offsetsBold: [0, -4]
        };
        a.h["\\"] = {
          anim: "back slash",
          offsets: [0, 0]
        };
        a.h["/"] = {
          anim: "forward slash",
          offsets: [0, 0]
        };
        a.h["|"] = null;
        a.h["~"] = {
          offsets: [0, 16],
          offsetsBold: [0, 20]
        };
        a.h[""] = {
          anim: "inverted exclamation",
          offsets: [0, -20],
          offsetsBold: [0, -20]
        };
        a.h[""] = {
          anim: "inverted question",
          offsets: [0, -20],
          offsetsBold: [0, -20]
        };
        a.h["{"] = null;
        a.h["}"] = null;
        a.h[""] = {
          anim: "bullet",
          offsets: [0, 18],
          offsetsBold: [0, 20]
        };
        return a;
      }(this);
      ad.DEFAULT_CHARACTER = "bf";
      qe.DEFAULT_CHARACTER = "bf";
      Ta.globalRgbShaders = [];
      Ta.SUSTAIN_SIZE = 44;
      Ta.swagWidth = 112;
      Ta.colArray = ["purple", "blue", "green", "red"];
      Ta.defaultNoteSkin = "noteSkins/NOTE_assets";
      gc.defaultNoteSplash = "noteSplashes/noteSplashes";
      gc.configs = new xa();
      gc.aliveTime = 0;
      gc.buggedKillTime = 0.5;
      ia.__lastTimerID = 0;
      ia.__timers = new Ac();
      yg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      lm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Sf.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      mm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Qh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      kh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          toJSON: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Oi.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      be.__meta__ = {
        fields: {
          __context: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __type: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      nm.__meta__ = {
        fields: {
          cairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __matrix3: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          applyMatrix: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __setBlendModeCairo: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      og.__meta__ = {
        fields: {
          context: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          applySmoothing: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          setTransform: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __setBlendModeContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      rm.__meta__ = {
        fields: {
          __element: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Rj.__meta__ = {
        fields: {
          element: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      ee.__meta__ = {
        fields: {
          overrideBlendMode: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Nf.__meta__ = {
        statics: {
          create: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        },
        fields: {
          parameters: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Nf.__rootURL = tg.get_supported() ? window.document.URL : "";
      tb.__meta__ = {
        fields: {
          gl: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __gl: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __matrix: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __projection: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __projectionFlipped: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      tb.__alphaValue = [1];
      tb.__colorMultipliersValue = [0, 0, 0, 0];
      tb.__colorOffsetsValue = [0, 0, 0, 0];
      tb.__emptyColorValue = [0, 0, 0, 0];
      tb.__hasColorTransformValue = [false];
      tb.__scissorRectangle = new ba();
      tb.__textureSizeValue = [0, 0];
      kk.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          onComplete: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Am.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ej.__meta__ = {
        fields: {
          index: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          name: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      ng.__meta__ = {
        fields: {
          index: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          name: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Fi.__meta__ = {
        fields: {
          __broadcastEvent: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __dispatchEvent: {
            SuppressWarnings: [["checkstyle:Dynamic", "checkstyle:LeftCurly"]]
          },
          __dispatchStack: {
            SuppressWarnings: [["checkstyle:Dynamic", "checkstyle:LeftCurly"]]
          },
          __dispatchTarget: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __handleError: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Cm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Pj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          _: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Qj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Fh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      de.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          o: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      de.empty = new de();
      A.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        statics: {
          windingRule: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          createBitmapFill: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          createGradientPattern: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      A.fillCommands = new de();
      A.strokeCommands = new de();
      aa.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      zg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        statics: {
          renderTileContainer: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Gh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Re.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Vj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Jh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      rc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      rc.blankBitmapData = new N(1, 1, false, 0);
      rc.tempColorTransform = new Ob(1, 1, 1, 1, 0, 0, 0, 0);
      Ih.opaqueBitmapData = new N(1, 1, false, 0);
      ag.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Bg.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Q.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Se.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Se.__textureSizeValue = [0, 0];
      wc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ce.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      dh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      bh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ch.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Ag.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      $f.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Nh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      vm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          overrideIntValues: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Kb.__glDepthStencil = -1;
      Kb.__glMaxTextureMaxAnisotropy = -1;
      Kb.__glMaxViewportDims = -1;
      Kb.__glMemoryCurrentAvailable = -1;
      Kb.__glMemoryTotalAvailable = -1;
      Kb.__glTextureMaxAnisotropy = -1;
      Gm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Yj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Hd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Hd.limitedProfile = true;
      Gi.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Hm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Hi.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Oh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Wj.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Yb.__meta__ = {
        fields: {
          __textureContext: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          },
          __getGLFramebuffer: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Pi.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      jh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      jh.supportsWeakReference = Object.prototype.hasOwnProperty.call(F, "WeakRef");
      Gf.__blurShader = new Lm();
      ck.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Vg.__colorMatrixShader = new ck();
      Ed.__invertAlphaShader = new Rm();
      Ed.__blurAlphaShader = new Mm();
      Ed.__combineShader = new Om();
      Ed.__innerCombineShader = new Qm();
      Ed.__combineKnockoutShader = new Nm();
      Ed.__innerCombineKnockoutShader = new Pm();
      pg.__meta__ = {
        fields: {
          clone: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      re.__soundChannels = [];
      re.__soundTransform = new pg();
      eh.followRedirects = true;
      eh.idleTimeout = 0;
      eh.manageCookies = true;
      pc.currentX = 0;
      pc.currentY = 1;
      pc.currentZ = 0;
      pc.defaultInterval = 34;
      pc.initialized = false;
      pc.supported = false;
      Di.currentDomain = new Di(null);
      ld.__meta__ = {
        fields: {
          clone: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      dk.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Za.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Za.__regexAlign = new na("align\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexBreakTag = new na("<br\\s*/?>", "gi");
      Za.__regexBlockIndent = new na("blockindent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexClass = new na("class\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexColor = new na("color\\s?=\\s?(\"#([^\"]+)\"|'#([^']+)')", "i");
      Za.__regexEntityApos = new na("&apos;", "g");
      Za.__regexEntityNbsp = new na("&nbsp;", "g");
      Za.__regexCharEntity = new na("&#(?:([0-9]+)|(x[0-9a-fA-F]+));", "g");
      Za.__regexFace = new na("face\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexHTMLTag = new na("<.*?>", "g");
      Za.__regexHref = new na("href\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexIndent = new na(" indent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexLeading = new na("leading\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexLeftMargin = new na("leftmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexRightMargin = new na("rightmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexSize = new na("size\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Za.__regexTabStops = new na("tabstops\\s?=\\s?(\"([^\"]+)\"|'([^']+)')", "i");
      Li.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      ic.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Tm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      hd.__cursor = "auto";
      ua.__meta__ = {
        obj: {
          SuppressWarnings: [["checkstyle:ConstantName", "checkstyle:FieldDocComment"]]
        }
      };
      ua.OPMAP = new xa();
      ua.REGMAP = new xa();
      ua.SAMPLEMAP = new xa();
      ua.initialized = false;
      Ib.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      He.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      xc.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      U.cache = new Vm();
      U.dispatcher = new va();
      mf.__meta__ = {
        statics: {
          __get: {
            SuppressWarnings: ["checkstyle:FieldDocComment"]
          }
        }
      };
      Wm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Xm.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      xd.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        }
      };
      Mh.__meta__ = {
        obj: {
          SuppressWarnings: ["checkstyle:FieldDocComment"]
        },
        fields: {
          touch: {
            SuppressWarnings: ["checkstyle:Dynamic"]
          }
        }
      };
      Mh.__pool = new ib(function () {
        return new Mh();
      }, function (a) {
        a.reset();
      });
      fh.defaultKey = "Reset to Default Keys";
      jd.curSelected = 0;
      jd.onPlayState = false;
      Vc.$name = "unnamed";
      Jb.Function_Stop = "##PSYCHLUA_FUNCTIONSTOP";
      Jb.Function_Continue = "##PSYCHLUA_FUNCTIONCONTINUE";
      Jb.Function_StopHScript = "##PSYCHLUA_FUNCTIONSTOPHSCRIPT";
      Jb.Function_StopAll = "##PSYCHLUA_FUNCTIONSTOPALL";
      gh.leftState = false;
      Va.curSelected = 0;
      Va.lastDifficultyName = qb.defaultDifficulty;
      tc.MIN_TIME = 1;
      vd.psychEngineVersion = "0.7.3";
      vd.curSelected = 0;
      vd.curMain = 0;
      z.STRUM_X = 42;
      z.STRUM_X_MIDDLESCROLL = -278;
      z.ratingStuff = [["You Suck!", 0.2], ["Shit", 0.4], ["Bad", 0.5], ["Bruh", 0.6], ["Meh", 0.69], ["Nice", 0.7], ["Good", 0.8], ["Great", 0.9], ["Sick!", 1], ["Perfect!!", 1]];
      z.curStage = "";
      z.stageUI = "normal";
      z.isStoryMode = false;
      z.storyWeek = 0;
      z.storyPlaylist = [];
      z.storyDifficulty = 1;
      z.changedDifficulty = false;
      z.chartingMode = false;
      z.campaignScore = 0;
      z.campaignMisses = 0;
      z.seenCutscene = false;
      z.deathCounter = 0;
      z.daPixelZoom = 6;
      z.startOnTime = 0;
      Nb.weekCompleted = new xa();
      Nb.lastDifficultyName = "";
      Nb.curWeek = 0;
      Qc.muteKeys = [48];
      Qc.volumeDownKeys = [109, 189];
      Qc.volumeUpKeys = [107, 187];
      Qc.initialized = false;
      Qc.updateVersion = "";
      Qc.playJingle = false;
      ea.noteTypeList = ";Alt Animation;Hey!;Hurt Note;GF Sing;No Animation".split(";");
      ea.goToPlayState = false;
      ea.curSec = 0;
      ea.lastSection = 0;
      ea.lastSong = "";
      ea.GRID_SIZE = 40;
      ea.quantization = 16;
      ea.curQuant = 3;
      ea.vortex = false;
      Qf.TIP_TEXT_MAIN = "JKLI - Move camera (Hold Shift to move 4x faster)\n\t\nQ/E - Zoom out/in\n\t\nR - Reset Camera\n\t\nH - Toggle Speech Bubble\n\t\nSpace - Reset text";
      Qf.TIP_TEXT_OFFSET = "JKLI - Move camera (Hold Shift to move 4x faster)\n\t\nQ/E - Zoom out/in\n\t\nR - Reset Camera\n\t\nH - Toggle Ghosts\n\t\nWASD - Move Looping animation offset (Red)\n\t\nArrow Keys - Move Idle/Finished animation offset (Blue)\n\t\nHold Shift to move offsets 10x faster";
      Qf.DEFAULT_TEXT = "Lorem ipsum dolor sit amet";
      Rf.DEFAULT_TEXT = "coolswag";
      Rf.DEFAULT_SPEED = 0.05;
      Rf.DEFAULT_BUBBLETYPE = "normal";
      hh.defaultTexture = "noteSplashes";
      Ja.weekFileName = "week1";
      Ja.loadError = false;
      Lj.animationNotes = [];
      Jc.characterName = "bf-dead";
      Jc.deathSoundName = "fnf_loss_sfx";
      Jc.loopSoundName = "gameOver";
      Jc.endSoundName = "gameOverEnd";
      Uh.OBJECT_REFERENCE_PREFIX = "@~obRef#";
      H.main();
    })(typeof x != "undefined" ? x : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this, typeof window != "undefined" ? window : typeof H != "undefined" ? H : typeof self != "undefined" ? self : this);
  };
  qa.lime.embed = function (F) {
    var H = {};
    var M = qa.lime.$scripts[F];
    if (!M) {
      throw Error("Cannot find project name \"" + F + "\"");
    }
    M(H, x);
    for (var fa in H) {
      qa[fa] = qa[fa] || H[fa];
    }
    if ((M = H.lime || window.lime) && M.embed && this != M.embed) {
      M.embed.apply(M, arguments);
    }
    return H;
  };
  if (typeof define == "function" && define.amd) {
    define([], function () {
      return qa.lime;
    });
    define.__amd = define.amd;
    define.amd = null;
  }
})(typeof exports != "undefined" ? exports : typeof define == "function" && define.amd ? {} : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this, typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
(function () {
  function qa() {
    this.init();
  }
  qa.prototype = {
    init: function () {
      var h = this || x;
      h._counter = 1000;
      h._html5AudioPool = [];
      h.html5PoolSize = 10;
      h._codecs = {};
      h._howls = [];
      h._muted = false;
      h._volume = 1;
      h._canPlayEvent = "canplaythrough";
      h._navigator = typeof window != "undefined" && window.navigator ? window.navigator : null;
      h.masterGain = null;
      h.noAudio = false;
      h.usingWebAudio = true;
      h.autoSuspend = true;
      h.ctx = null;
      h.autoUnlock = true;
      h._setup();
      return h;
    },
    volume: function (p) {
      var n = this || x;
      p = parseFloat(p);
      if (!n.ctx) {
        h();
      }
      if (p !== undefined && p >= 0 && p <= 1) {
        n._volume = p;
        if (n._muted) {
          return n;
        }
        if (n.usingWebAudio) {
          n.masterGain.gain.setValueAtTime(p, x.ctx.currentTime);
        }
        for (var r = 0; r < n._howls.length; r++) {
          if (!n._howls[r]._webAudio) {
            for (var q = n._howls[r]._getSoundIds(), la = 0; la < q.length; la++) {
              var S = n._howls[r]._soundById(q[la]);
              if (S && S._node) {
                S._node.volume = S._volume * p;
              }
            }
          }
        }
        return n;
      }
      return n._volume;
    },
    mute: function (p) {
      var n = this || x;
      if (!n.ctx) {
        h();
      }
      n._muted = p;
      if (n.usingWebAudio) {
        n.masterGain.gain.setValueAtTime(p ? 0 : n._volume, x.ctx.currentTime);
      }
      for (var r = 0; r < n._howls.length; r++) {
        if (!n._howls[r]._webAudio) {
          for (var q = n._howls[r]._getSoundIds(), la = 0; la < q.length; la++) {
            var S = n._howls[r]._soundById(q[la]);
            if (S && S._node) {
              S._node.muted = !!p || S._muted;
            }
          }
        }
      }
      return n;
    },
    stop: function () {
      for (var h = this || x, n = 0; n < h._howls.length; n++) {
        h._howls[n].stop();
      }
      return h;
    },
    unload: function () {
      var p = this || x;
      for (var n = p._howls.length - 1; n >= 0; n--) {
        p._howls[n].unload();
      }
      if (p.usingWebAudio && p.ctx && p.ctx.close !== undefined) {
        p.ctx.close();
        p.ctx = null;
        h();
      }
      return p;
    },
    codecs: function (h) {
      return (this || x)._codecs[h.replace(/^x-/, "")];
    },
    _setup: function () {
      var h = this || x;
      h.state = h.ctx ? h.ctx.state || "suspended" : "suspended";
      h._autoSuspend();
      if (!h.usingWebAudio) {
        if (typeof Audio != "undefined") {
          try {
            var n = new Audio();
            if (n.oncanplaythrough === undefined) {
              h._canPlayEvent = "canplay";
            }
          } catch (r) {
            h.noAudio = true;
          }
        } else {
          h.noAudio = true;
        }
      }
      try {
        n = new Audio();
        if (n.muted) {
          h.noAudio = true;
        }
      } catch (r) {}
      if (!h.noAudio) {
        h._setupCodecs();
      }
      return h;
    },
    _setupCodecs: function () {
      var h = this || x;
      var n = null;
      try {
        n = typeof Audio != "undefined" ? new Audio() : null;
      } catch (ka) {
        return h;
      }
      if (!n || typeof n.canPlayType != "function") {
        return h;
      }
      var r = n.canPlayType("audio/mpeg;").replace(/^no$/, "");
      var q = h._navigator ? h._navigator.userAgent : "";
      var la = q.match(/OPR\/(\d+)/g);
      la = la && parseInt(la[0].split("/")[1], 10) < 33;
      var S = q.indexOf("Safari") !== -1 && q.indexOf("Chrome") === -1;
      q = q.match(/Version\/(.*?) /);
      q = S && q && parseInt(q[1], 10) < 15;
      h._codecs = {
        mp3: !la && (!!r || !!n.canPlayType("audio/mp3;").replace(/^no$/, "")),
        mpeg: !!r,
        opus: !!n.canPlayType("audio/ogg; codecs=\"opus\"").replace(/^no$/, ""),
        ogg: !!n.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/, ""),
        oga: !!n.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/, ""),
        wav: !!(n.canPlayType("audio/wav; codecs=\"1\"") || n.canPlayType("audio/wav")).replace(/^no$/, ""),
        aac: !!n.canPlayType("audio/aac;").replace(/^no$/, ""),
        caf: !!n.canPlayType("audio/x-caf;").replace(/^no$/, ""),
        m4a: !!(n.canPlayType("audio/x-m4a;") || n.canPlayType("audio/m4a;") || n.canPlayType("audio/aac;")).replace(/^no$/, ""),
        m4b: !!(n.canPlayType("audio/x-m4b;") || n.canPlayType("audio/m4b;") || n.canPlayType("audio/aac;")).replace(/^no$/, ""),
        mp4: !!(n.canPlayType("audio/x-mp4;") || n.canPlayType("audio/mp4;") || n.canPlayType("audio/aac;")).replace(/^no$/, ""),
        weba: !q && !!n.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/, ""),
        webm: !q && !!n.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/, ""),
        dolby: !!n.canPlayType("audio/mp4; codecs=\"ec-3\"").replace(/^no$/, ""),
        flac: !!(n.canPlayType("audio/x-flac;") || n.canPlayType("audio/flac;")).replace(/^no$/, "")
      };
      return h;
    },
    _unlockAudio: function () {
      var h = this || x;
      if (!h._audioUnlocked && h.ctx) {
        h._audioUnlocked = false;
        h.autoUnlock = false;
        if (!h._mobileUnloaded && h.ctx.sampleRate !== 44100) {
          h._mobileUnloaded = true;
          h.unload();
        }
        h._scratchBuffer = h.ctx.createBuffer(1, 1, 22050);
        function n(p) {
          while (h._html5AudioPool.length < h.html5PoolSize) {
            try {
              var r = new Audio();
              r._unlocked = true;
              h._releaseHtml5Audio(r);
            } catch (wd) {
              h.noAudio = true;
              break;
            }
          }
          for (p = 0; p < h._howls.length; p++) {
            if (!h._howls[p]._webAudio) {
              r = h._howls[p]._getSoundIds();
              for (var q = 0; q < r.length; q++) {
                var w = h._howls[p]._soundById(r[q]);
                if (w && w._node && !w._node._unlocked) {
                  w._node._unlocked = true;
                  w._node.load();
                }
              }
            }
          }
          h._autoResume();
          var x = h.ctx.createBufferSource();
          x.buffer = h._scratchBuffer;
          x.connect(h.ctx.destination);
          if (x.start === undefined) {
            x.noteOn(0);
          } else {
            x.start(0);
          }
          if (typeof h.ctx.resume == "function") {
            h.ctx.resume();
          }
          x.onended = function () {
            x.disconnect(0);
            h._audioUnlocked = true;
            document.removeEventListener("touchstart", n, true);
            document.removeEventListener("touchend", n, true);
            document.removeEventListener("click", n, true);
            document.removeEventListener("keydown", n, true);
            for (var p = 0; p < h._howls.length; p++) {
              h._howls[p]._emit("unlock");
            }
          };
        }
        document.addEventListener("touchstart", n, true);
        document.addEventListener("touchend", n, true);
        document.addEventListener("click", n, true);
        document.addEventListener("keydown", n, true);
        return h;
      }
    },
    _obtainHtml5Audio: function () {
      var h = this || x;
      if (h._html5AudioPool.length) {
        return h._html5AudioPool.pop();
      }
      h = new Audio().play();
      if (h && typeof Promise != "undefined" && (h instanceof Promise || typeof h.then == "function")) {
        h.catch(function () {
          console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.");
        });
      }
      return new Audio();
    },
    _releaseHtml5Audio: function (h) {
      var p = this || x;
      if (h._unlocked) {
        p._html5AudioPool.push(h);
      }
      return p;
    },
    _autoSuspend: function () {
      var h = this;
      if (h.autoSuspend && h.ctx && h.ctx.suspend !== undefined && x.usingWebAudio) {
        for (var n = 0; n < h._howls.length; n++) {
          if (h._howls[n]._webAudio) {
            for (var r = 0; r < h._howls[n]._sounds.length; r++) {
              if (!h._howls[n]._sounds[r]._paused) {
                return h;
              }
            }
          }
        }
        if (h._suspendTimer) {
          clearTimeout(h._suspendTimer);
        }
        h._suspendTimer = setTimeout(function () {
          if (h.autoSuspend) {
            h._suspendTimer = null;
            h.state = "suspending";
            function p() {
              h.state = "suspended";
              if (h._resumeAfterSuspend) {
                delete h._resumeAfterSuspend;
                h._autoResume();
              }
            }
            h.ctx.suspend().then(p, p);
          }
        }, 30000);
        return h;
      }
    },
    _autoResume: function () {
      var h = this;
      if (h.ctx && h.ctx.resume !== undefined && x.usingWebAudio) {
        if (h.state === "running" && h.ctx.state !== "interrupted" && h._suspendTimer) {
          clearTimeout(h._suspendTimer);
          h._suspendTimer = null;
        } else if (h.state === "suspended" || h.state === "running" && h.ctx.state === "interrupted") {
          h.ctx.resume().then(function () {
            h.state = "running";
            for (var p = 0; p < h._howls.length; p++) {
              h._howls[p]._emit("resume");
            }
          });
          if (h._suspendTimer) {
            clearTimeout(h._suspendTimer);
            h._suspendTimer = null;
          }
        } else if (h.state === "suspending") {
          h._resumeAfterSuspend = true;
        }
        return h;
      }
    }
  };
  var x = new qa();
  function F(h) {
    if (!h.src || h.src.length === 0) {
      console.error("An array of source files must be passed with any new Howl.");
      return;
    }
    this.init(h);
  }
  F.prototype = {
    init: function (p) {
      var n = this;
      if (!x.ctx) {
        h();
      }
      n._autoplay = p.autoplay || false;
      n._format = typeof p.format != "string" ? p.format : [p.format];
      n._html5 = p.html5 || false;
      n._muted = p.mute || false;
      n._loop = p.loop || false;
      n._pool = p.pool || 5;
      n._preload = typeof p.preload != "boolean" && p.preload !== "metadata" || p.preload;
      n._rate = p.rate || 1;
      n._sprite = p.sprite || {};
      n._src = typeof p.src != "string" ? p.src : [p.src];
      n._volume = p.volume !== undefined ? p.volume : 1;
      n._xhr = {
        method: p.xhr && p.xhr.method ? p.xhr.method : "GET",
        headers: p.xhr && p.xhr.headers ? p.xhr.headers : null,
        withCredentials: !!p.xhr && !!p.xhr.withCredentials && p.xhr.withCredentials
      };
      n._duration = 0;
      n._state = "unloaded";
      n._sounds = [];
      n._endTimers = {};
      n._queue = [];
      n._playLock = false;
      n._onend = p.onend ? [{
        fn: p.onend
      }] : [];
      n._onfade = p.onfade ? [{
        fn: p.onfade
      }] : [];
      n._onload = p.onload ? [{
        fn: p.onload
      }] : [];
      n._onloaderror = p.onloaderror ? [{
        fn: p.onloaderror
      }] : [];
      n._onplayerror = p.onplayerror ? [{
        fn: p.onplayerror
      }] : [];
      n._onpause = p.onpause ? [{
        fn: p.onpause
      }] : [];
      n._onplay = p.onplay ? [{
        fn: p.onplay
      }] : [];
      n._onstop = p.onstop ? [{
        fn: p.onstop
      }] : [];
      n._onmute = p.onmute ? [{
        fn: p.onmute
      }] : [];
      n._onvolume = p.onvolume ? [{
        fn: p.onvolume
      }] : [];
      n._onrate = p.onrate ? [{
        fn: p.onrate
      }] : [];
      n._onseek = p.onseek ? [{
        fn: p.onseek
      }] : [];
      n._onunlock = p.onunlock ? [{
        fn: p.onunlock
      }] : [];
      n._onresume = [];
      n._webAudio = x.usingWebAudio && !n._html5;
      if (x.ctx !== undefined && x.ctx && x.autoUnlock) {
        x._unlockAudio();
      }
      x._howls.push(n);
      if (n._autoplay) {
        n._queue.push({
          event: "play",
          action: function () {
            n.play();
          }
        });
      }
      if (n._preload && n._preload !== "none") {
        n.load();
      }
      return n;
    },
    load: function () {
      var h = null;
      if (x.noAudio) {
        this._emit("loaderror", null, "No audio support.");
        return;
      }
      if (typeof this._src == "string") {
        this._src = [this._src];
      }
      for (var n = 0; n < this._src.length; n++) {
        var r;
        if (this._format && this._format[n]) {
          var q = this._format[n];
        } else {
          if (typeof (r = this._src[n]) != "string") {
            this._emit("loaderror", null, "Non-string found in selected audio sources - ignoring.");
            continue;
          }
          if (!(q = /^data:audio\/([^;,]+);/i.exec(r))) {
            q = /\.([^.]+)$/.exec(r.split("?", 1)[0]);
          }
          q &&= q[1].toLowerCase();
        }
        if (!q) {
          console.warn("No file extension was found. Consider using the \"format\" property or specify an extension.");
        }
        if (q && x.codecs(q)) {
          h = this._src[n];
          break;
        }
      }
      if (h) {
        this._src = h;
        this._state = "loading";
        if (window.location.protocol === "https:" && h.slice(0, 5) === "http:") {
          this._html5 = true;
          this._webAudio = false;
        }
        new H(this);
        if (this._webAudio) {
          fa(this);
        }
        return this;
      } else {
        this._emit("loaderror", null, "No codec support for selected audio sources.");
        return;
      }
    },
    play: function (h, n) {
      var p = this;
      var q = null;
      if (typeof h == "number") {
        q = h;
        h = null;
      } else {
        if (typeof h == "string" && p._state === "loaded" && !p._sprite[h]) {
          return null;
        }
        if (h === undefined && (h = "__default", !p._playLock)) {
          var w = 0;
          for (var S = 0; S < p._sounds.length; S++) {
            if (p._sounds[S]._paused && !p._sounds[S]._ended) {
              w++;
              q = p._sounds[S]._id;
            }
          }
          if (w === 1) {
            h = null;
          } else {
            q = null;
          }
        }
      }
      var ka = q ? p._soundById(q) : p._inactiveSound();
      if (!ka) {
        return null;
      }
      if (q && !h) {
        h = ka._sprite || "__default";
      }
      if (p._state !== "loaded") {
        ka._sprite = h;
        ka._ended = false;
        var F = ka._id;
        p._queue.push({
          event: "play",
          action: function () {
            p.play(F);
          }
        });
        return F;
      }
      if (q && !ka._paused) {
        if (!n) {
          p._loadQueue("play");
        }
        return ka._id;
      }
      if (p._webAudio) {
        x._autoResume();
      }
      var H = Math.max(0, ka._seek > 0 ? ka._seek : p._sprite[h][0] / 1000);
      var M = Math.max(0, (p._sprite[h][0] + p._sprite[h][1]) / 1000 - H);
      var sa = M * 1000 / Math.abs(ka._rate);
      var fa = p._sprite[h][0] / 1000;
      var qa = (p._sprite[h][0] + p._sprite[h][1]) / 1000;
      ka._sprite = h;
      ka._ended = false;
      function kc() {
        ka._paused = false;
        ka._seek = H;
        ka._start = fa;
        ka._stop = qa;
        ka._loop = !!ka._loop || !!p._sprite[h][2];
      }
      if (H >= qa) {
        p._ended(ka);
        return;
      }
      var ma = ka._node;
      if (p._webAudio) {
        q = function () {
          p._playLock = false;
          kc();
          p._refreshBuffer(ka);
          ma.gain.setValueAtTime(ka._muted || p._muted ? 0 : ka._volume, x.ctx.currentTime);
          ka._playStart = x.ctx.currentTime;
          if (ma.bufferSource.start === undefined) {
            if (ka._loop) {
              ma.bufferSource.noteGrainOn(0, H, 86400);
            } else {
              ma.bufferSource.noteGrainOn(0, H, M);
            }
          } else if (ka._loop) {
            ma.bufferSource.start(0, H, 86400);
          } else {
            ma.bufferSource.start(0, H, M);
          }
          if (sa !== Infinity) {
            p._endTimers[ka._id] = setTimeout(p._ended.bind(p, ka), sa);
          }
          if (!n) {
            setTimeout(function () {
              p._emit("play", ka._id);
              p._loadQueue();
            }, 0);
          }
        };
        if (x.state === "running" && x.ctx.state !== "interrupted") {
          q();
        } else {
          p._playLock = true;
          p.once("resume", q);
          p._clearTimer(ka._id);
        }
      } else {
        function mb() {
          ma.currentTime = H;
          ma.muted = ka._muted || p._muted || x._muted || ma.muted;
          ma.volume = ka._volume * x.volume();
          ma.playbackRate = ka._rate;
          try {
            var r = ma.play();
            if (r && typeof Promise != "undefined" && (r instanceof Promise || typeof r.then == "function")) {
              p._playLock = true;
              kc();
              r.then(function () {
                p._playLock = false;
                ma._unlocked = true;
                if (n) {
                  p._loadQueue();
                } else {
                  p._emit("play", ka._id);
                }
              }).catch(function () {
                p._playLock = false;
                p._emit("playerror", ka._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
                ka._ended = true;
                ka._paused = true;
              });
            } else if (!n) {
              p._playLock = false;
              kc();
              p._emit("play", ka._id);
            }
            ma.playbackRate = ka._rate;
            if (ma.paused) {
              p._emit("playerror", ka._id, "Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");
              return;
            }
            if (h !== "__default" || ka._loop) {
              p._endTimers[ka._id] = setTimeout(p._ended.bind(p, ka), sa);
            } else {
              p._endTimers[ka._id] = function () {
                p._ended(ka);
                ma.removeEventListener("ended", p._endTimers[ka._id], false);
              };
              ma.addEventListener("ended", p._endTimers[ka._id], false);
            }
          } catch (gb) {
            p._emit("playerror", ka._id, gb);
          }
        }
        if (ma.src === "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA") {
          ma.src = p._src;
          ma.load();
        }
        q = window && window.ejecta || !ma.readyState && x._navigator.isCocoonJS;
        if (ma.readyState >= 3 || q) {
          mb();
        } else {
          p._playLock = true;
          p._state = "loading";
          function Ba() {
            p._state = "loaded";
            mb();
            ma.removeEventListener(x._canPlayEvent, Ba, false);
          }
          ma.addEventListener(x._canPlayEvent, Ba, false);
          p._clearTimer(ka._id);
        }
      }
      return ka._id;
    },
    pause: function (h, n) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "pause",
          action: function () {
            p.pause(h);
          }
        });
        return p;
      }
      for (var q = p._getSoundIds(h), w = 0; w < q.length; w++) {
        p._clearTimer(q[w]);
        var x = p._soundById(q[w]);
        if (x && !x._paused && (x._seek = p.seek(q[w]), x._rateSeek = 0, x._paused = true, p._stopFade(q[w]), x._node)) {
          if (p._webAudio) {
            if (!x._node.bufferSource) {
              continue;
            }
            if (x._node.bufferSource.stop === undefined) {
              x._node.bufferSource.noteOff(0);
            } else {
              x._node.bufferSource.stop(0);
            }
            p._cleanBuffer(x._node);
          } else if (!isNaN(x._node.duration) || x._node.duration === Infinity) {
            x._node.pause();
          }
        }
        if (!n) {
          p._emit("pause", x ? x._id : null);
        }
      }
      return p;
    },
    stop: function (h, n) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "stop",
          action: function () {
            p.stop(h);
          }
        });
        return p;
      }
      for (var q = p._getSoundIds(h), w = 0; w < q.length; w++) {
        p._clearTimer(q[w]);
        var x = p._soundById(q[w]);
        if (x) {
          x._seek = x._start || 0;
          x._rateSeek = 0;
          x._paused = true;
          x._ended = true;
          p._stopFade(q[w]);
          if (x._node) {
            if (p._webAudio) {
              if (x._node.bufferSource) {
                if (x._node.bufferSource.stop === undefined) {
                  x._node.bufferSource.noteOff(0);
                } else {
                  x._node.bufferSource.stop(0);
                }
                p._cleanBuffer(x._node);
              }
            } else if (!isNaN(x._node.duration) || x._node.duration === Infinity) {
              x._node.currentTime = x._start || 0;
              x._node.pause();
              if (x._node.duration === Infinity) {
                p._clearSound(x._node);
              }
            }
          }
          if (!n) {
            p._emit("stop", x._id);
          }
        }
      }
      return p;
    },
    mute: function (h, n) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "mute",
          action: function () {
            p.mute(h, n);
          }
        });
        return p;
      }
      if (n === undefined) {
        if (typeof h != "boolean") {
          return p._muted;
        }
        p._muted = h;
      }
      for (var q = p._getSoundIds(n), w = 0; w < q.length; w++) {
        var S = p._soundById(q[w]);
        if (S) {
          S._muted = h;
          if (S._interval) {
            p._stopFade(S._id);
          }
          if (p._webAudio && S._node) {
            S._node.gain.setValueAtTime(h ? 0 : S._volume, x.ctx.currentTime);
          } else if (S._node) {
            S._node.muted = !!x._muted || h;
          }
          p._emit("mute", S._id);
        }
      }
      return p;
    },
    volume: function () {
      var h;
      var n;
      var r = this;
      var q = arguments;
      if (q.length === 0) {
        return r._volume;
      }
      if (q.length === 1 || q.length === 2 && q[1] === undefined) {
        if (r._getSoundIds().indexOf(q[0]) >= 0) {
          n = parseInt(q[0], 10);
        } else {
          h = parseFloat(q[0]);
        }
      } else if (q.length >= 2) {
        h = parseFloat(q[0]);
        n = parseInt(q[1], 10);
      }
      var la;
      if (h === undefined || !(h >= 0) || !(h <= 1)) {
        la = n ? r._soundById(n) : r._sounds[0];
        if (la) {
          return la._volume;
        } else {
          return 0;
        }
      }
      if (r._state !== "loaded" || r._playLock) {
        r._queue.push({
          event: "volume",
          action: function () {
            r.volume.apply(r, q);
          }
        });
        return r;
      }
      if (n === undefined) {
        r._volume = h;
      }
      n = r._getSoundIds(n);
      for (var S = 0; S < n.length; S++) {
        if (la = r._soundById(n[S])) {
          la._volume = h;
          if (!q[2]) {
            r._stopFade(n[S]);
          }
          if (r._webAudio && la._node && !la._muted) {
            la._node.gain.setValueAtTime(h, x.ctx.currentTime);
          } else if (la._node && !la._muted) {
            la._node.volume = h * x.volume();
          }
          r._emit("volume", la._id);
        }
      }
      return r;
    },
    fade: function (h, n, r, q) {
      var p = this;
      if (p._state !== "loaded" || p._playLock) {
        p._queue.push({
          event: "fade",
          action: function () {
            p.fade(h, n, r, q);
          }
        });
        return p;
      }
      h = Math.min(Math.max(0, parseFloat(h)), 1);
      n = Math.min(Math.max(0, parseFloat(n)), 1);
      r = parseFloat(r);
      p.volume(h, q);
      for (var w = p._getSoundIds(q), ka = 0; ka < w.length; ka++) {
        var H = p._soundById(w[ka]);
        if (H) {
          if (!q) {
            p._stopFade(w[ka]);
          }
          if (p._webAudio && !H._muted) {
            var F = x.ctx.currentTime;
            var Ea = F + r / 1000;
            H._volume = h;
            H._node.gain.setValueAtTime(h, F);
            H._node.gain.linearRampToValueAtTime(n, Ea);
          }
          p._startFadeInterval(H, h, n, r, w[ka], q === undefined);
        }
      }
      return p;
    },
    _startFadeInterval: function (h, n, q, x, H, S) {
      var p = this;
      var r = n;
      var w = q - n;
      H = Math.abs(w / 0.01);
      H = Math.max(4, H > 0 ? x / H : x);
      var F = Date.now();
      h._fadeTo = q;
      h._interval = setInterval(function () {
        var H = (Date.now() - F) / x;
        F = Date.now();
        r += w * H;
        r = Math.round(r * 100) / 100;
        r = w < 0 ? Math.max(q, r) : Math.min(q, r);
        if (p._webAudio) {
          h._volume = r;
        } else {
          p.volume(r, h._id, true);
        }
        if (S) {
          p._volume = r;
        }
        if (q < n && r <= q || q > n && r >= q) {
          clearInterval(h._interval);
          h._interval = null;
          h._fadeTo = null;
          p.volume(q, h._id);
          p._emit("fade", h._id);
        }
      }, H);
    },
    _stopFade: function (h) {
      var p = this._soundById(h);
      if (p && p._interval) {
        if (this._webAudio) {
          p._node.gain.cancelScheduledValues(x.ctx.currentTime);
        }
        clearInterval(p._interval);
        p._interval = null;
        this.volume(p._fadeTo, h);
        p._fadeTo = null;
        this._emit("fade", h);
      }
      return this;
    },
    loop: function () {
      var h;
      var n;
      var q;
      var x = arguments;
      if (x.length === 0) {
        return this._loop;
      }
      if (x.length === 1) {
        if (typeof x[0] != "boolean") {
          return !!(q = this._soundById(parseInt(x[0], 10))) && q._loop;
        }
        this._loop = h = x[0];
      } else if (x.length === 2) {
        h = x[0];
        n = parseInt(x[1], 10);
      }
      n = this._getSoundIds(n);
      for (x = 0; x < n.length; x++) {
        if (q = this._soundById(n[x])) {
          q._loop = h;
          if (this._webAudio && q._node && q._node.bufferSource) {
            q._node.bufferSource.loop = h;
            if (h) {
              q._node.bufferSource.loopStart = q._start || 0;
              q._node.bufferSource.loopEnd = q._stop;
              if (this.playing(n[x])) {
                this.pause(n[x], true);
                this.play(n[x], true);
              }
            }
          }
        }
      }
      return this;
    },
    rate: function () {
      var h;
      var n;
      var q = this;
      var H = arguments;
      if (H.length === 0) {
        n = q._sounds[0]._id;
      } else if (H.length === 1) {
        if (q._getSoundIds().indexOf(H[0]) >= 0) {
          n = parseInt(H[0], 10);
        } else {
          h = parseFloat(H[0]);
        }
      } else if (H.length === 2) {
        h = parseFloat(H[0]);
        n = parseInt(H[1], 10);
      }
      var F;
      if (typeof h != "number") {
        F = q._soundById(n);
        if (F) {
          return F._rate;
        } else {
          return q._rate;
        }
      }
      if (q._state !== "loaded" || q._playLock) {
        q._queue.push({
          event: "rate",
          action: function () {
            q.rate.apply(q, H);
          }
        });
        return q;
      }
      if (n === undefined) {
        q._rate = h;
      }
      n = q._getSoundIds(n);
      for (var S = 0; S < n.length; S++) {
        if (F = q._soundById(n[S])) {
          if (q.playing(n[S])) {
            F._rateSeek = q.seek(n[S]);
            F._playStart = q._webAudio ? x.ctx.currentTime : F._playStart;
          }
          F._rate = h;
          if (q._webAudio && F._node && F._node.bufferSource) {
            F._node.bufferSource.playbackRate.setValueAtTime(h, x.ctx.currentTime);
          } else if (F._node) {
            F._node.playbackRate = h;
          }
          var ka = q.seek(n[S]);
          ka = ((q._sprite[F._sprite][0] + q._sprite[F._sprite][1]) / 1000 - ka) * 1000 / Math.abs(F._rate);
          if (!!q._endTimers[n[S]] || !F._paused) {
            q._clearTimer(n[S]);
            q._endTimers[n[S]] = setTimeout(q._ended.bind(q, F), ka);
          }
          q._emit("rate", F._id);
        }
      }
      return q;
    },
    seek: function () {
      var h;
      var n;
      var q = this;
      var H = arguments;
      if (H.length === 0) {
        if (q._sounds.length) {
          n = q._sounds[0]._id;
        }
      } else if (H.length === 1) {
        if (q._getSoundIds().indexOf(H[0]) >= 0) {
          n = parseInt(H[0], 10);
        } else if (q._sounds.length) {
          n = q._sounds[0]._id;
          h = parseFloat(H[0]);
        }
      } else if (H.length === 2) {
        h = parseFloat(H[0]);
        n = parseInt(H[1], 10);
      }
      if (n === undefined) {
        return 0;
      }
      if (typeof h == "number" && (q._state !== "loaded" || q._playLock)) {
        q._queue.push({
          event: "seek",
          action: function () {
            q.seek.apply(q, H);
          }
        });
        return q;
      }
      var F = q._soundById(n);
      if (F) {
        if (typeof h != "number" || !(h >= 0)) {
          if (q._webAudio) {
            h = q.playing(n) ? x.ctx.currentTime - F._playStart : 0;
            return F._seek + ((F._rateSeek ? F._rateSeek - F._seek : 0) + h * Math.abs(F._rate));
          } else {
            return F._node.currentTime;
          }
        }
        var S = q.playing(n);
        if (S) {
          q.pause(n, true);
        }
        F._seek = h;
        F._ended = false;
        q._clearTimer(n);
        if (!q._webAudio && !!F._node && !isNaN(F._node.duration)) {
          F._node.currentTime = h;
        }
        function ka() {
          if (S) {
            q.play(n, true);
          }
          q._emit("seek", n);
        }
        if (S && !q._webAudio) {
          function M() {
            if (q._playLock) {
              setTimeout(M, 0);
            } else {
              ka();
            }
          }
          setTimeout(M, 0);
        } else {
          ka();
        }
      }
      return q;
    },
    playing: function (h) {
      if (typeof h == "number") {
        h = this._soundById(h);
        return !!h && !h._paused;
      }
      for (h = 0; h < this._sounds.length; h++) {
        if (!this._sounds[h]._paused) {
          return true;
        }
      }
      return false;
    },
    duration: function (h) {
      var p = this._duration;
      h = this._soundById(h);
      if (h) {
        p = this._sprite[h._sprite][1] / 1000;
      }
      return p;
    },
    state: function () {
      return this._state;
    },
    unload: function () {
      for (var h = this._sounds, n = 0; n < h.length; n++) {
        if (!h[n]._paused) {
          this.stop(h[n]._id);
        }
        if (!this._webAudio) {
          this._clearSound(h[n]._node);
          h[n]._node.removeEventListener("error", h[n]._errorFn, false);
          h[n]._node.removeEventListener(x._canPlayEvent, h[n]._loadFn, false);
          h[n]._node.removeEventListener("ended", h[n]._endFn, false);
          x._releaseHtml5Audio(h[n]._node);
        }
        delete h[n]._node;
        this._clearTimer(h[n]._id);
      }
      n = x._howls.indexOf(this);
      if (n >= 0) {
        x._howls.splice(n, 1);
      }
      h = true;
      for (n = 0; n < x._howls.length; n++) {
        if (x._howls[n]._src === this._src || this._src.indexOf(x._howls[n]._src) >= 0) {
          h = false;
          break;
        }
      }
      if (M && h) {
        delete M[this._src];
      }
      x.noAudio = false;
      this._state = "unloaded";
      this._sounds = [];
      return null;
    },
    on: function (h, n, q, x) {
      h = this["_on" + h];
      if (typeof n == "function") {
        h.push(x ? {
          id: q,
          fn: n,
          once: x
        } : {
          id: q,
          fn: n
        });
      }
      return this;
    },
    off: function (h, n, q) {
      var p = this["_on" + h];
      if (typeof n == "number") {
        q = n;
        n = null;
      }
      if (n || q) {
        for (h = 0; h < p.length; h++) {
          var r = q === p[h].id;
          if (n === p[h].fn && r || !n && r) {
            p.splice(h, 1);
            break;
          }
        }
      } else if (h) {
        this["_on" + h] = [];
      } else {
        n = Object.keys(this);
        h = 0;
        for (; h < n.length; h++) {
          if (n[h].indexOf("_on") === 0 && Array.isArray(this[n[h]])) {
            this[n[h]] = [];
          }
        }
      }
      return this;
    },
    once: function (h, n, q) {
      this.on(h, n, q, 1);
      return this;
    },
    _emit: function (h, n, q) {
      var p = this["_on" + h];
      for (var r = p.length - 1; r >= 0; r--) {
        if (!p[r].id || p[r].id === n || h === "load") {
          setTimeout(function (h) {
            h.call(this, n, q);
          }.bind(this, p[r].fn), 0);
          if (p[r].once) {
            this.off(h, p[r].fn, p[r].id);
          }
        }
      }
      this._loadQueue(h);
      return this;
    },
    _loadQueue: function (h) {
      if (this._queue.length > 0) {
        var p = this._queue[0];
        if (p.event === h) {
          this._queue.shift();
          this._loadQueue();
        }
        if (!h) {
          p.action();
        }
      }
      return this;
    },
    _ended: function (h) {
      var p = h._sprite;
      if (!this._webAudio && h._node && !h._node.paused && !h._node.ended && h._node.currentTime < h._stop) {
        setTimeout(this._ended.bind(this, h), 100);
        return this;
      }
      p = !!h._loop || !!this._sprite[p][2];
      this._emit("end", h._id);
      if (!this._webAudio && p) {
        this.stop(h._id, true).play(h._id);
      }
      if (this._webAudio && p) {
        this._emit("play", h._id);
        h._seek = h._start || 0;
        h._rateSeek = 0;
        h._playStart = x.ctx.currentTime;
        var n = (h._stop - h._start) * 1000 / Math.abs(h._rate);
        this._endTimers[h._id] = setTimeout(this._ended.bind(this, h), n);
      }
      if (this._webAudio && !p) {
        h._paused = true;
        h._ended = true;
        h._seek = h._start || 0;
        h._rateSeek = 0;
        this._clearTimer(h._id);
        this._cleanBuffer(h._node);
        x._autoSuspend();
      }
      if (!this._webAudio && !p) {
        this.stop(h._id, true);
      }
      return this;
    },
    _clearTimer: function (h) {
      if (this._endTimers[h]) {
        if (typeof this._endTimers[h] != "function") {
          clearTimeout(this._endTimers[h]);
        } else {
          var p = this._soundById(h);
          if (p && p._node) {
            p._node.removeEventListener("ended", this._endTimers[h], false);
          }
        }
        delete this._endTimers[h];
      }
      return this;
    },
    _soundById: function (h) {
      for (var p = 0; p < this._sounds.length; p++) {
        if (h === this._sounds[p]._id) {
          return this._sounds[p];
        }
      }
      return null;
    },
    _inactiveSound: function () {
      this._drain();
      for (var h = 0; h < this._sounds.length; h++) {
        if (this._sounds[h]._ended) {
          return this._sounds[h].reset();
        }
      }
      return new H(this);
    },
    _drain: function () {
      var h = this._pool;
      var n = 0;
      var q;
      if (!(this._sounds.length < h)) {
        for (q = 0; q < this._sounds.length; q++) {
          if (this._sounds[q]._ended) {
            n++;
          }
        }
        for (q = this._sounds.length - 1; q >= 0 && !(n <= h); q--) {
          if (this._sounds[q]._ended) {
            if (this._webAudio && this._sounds[q]._node) {
              this._sounds[q]._node.disconnect(0);
            }
            this._sounds.splice(q, 1);
            n--;
          }
        }
      }
    },
    _getSoundIds: function (h) {
      if (h === undefined) {
        h = [];
        for (var p = 0; p < this._sounds.length; p++) {
          h.push(this._sounds[p]._id);
        }
        return h;
      }
      return [h];
    },
    _refreshBuffer: function (h) {
      h._node.bufferSource = x.ctx.createBufferSource();
      h._node.bufferSource.buffer = M[this._src];
      if (h._panner) {
        h._node.bufferSource.connect(h._panner);
      } else {
        h._node.bufferSource.connect(h._node);
      }
      h._node.bufferSource.loop = h._loop;
      if (h._loop) {
        h._node.bufferSource.loopStart = h._start || 0;
        h._node.bufferSource.loopEnd = h._stop || 0;
      }
      h._node.bufferSource.playbackRate.setValueAtTime(h._rate, x.ctx.currentTime);
      return this;
    },
    _cleanBuffer: function (h) {
      var n = x._navigator && x._navigator.vendor.indexOf("Apple") >= 0;
      if (!h.bufferSource) {
        return this;
      }
      if (x._scratchBuffer && h.bufferSource && (h.bufferSource.onended = null, h.bufferSource.disconnect(0), n)) {
        try {
          h.bufferSource.buffer = x._scratchBuffer;
        } catch (r) {}
      }
      h.bufferSource = null;
      return this;
    },
    _clearSound: function (h) {
      if (!/MSIE |Trident\//.test(x._navigator && x._navigator.userAgent)) {
        h.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
      }
    }
  };
  function H(h) {
    this._parent = h;
    this.init();
  }
  H.prototype = {
    init: function () {
      var h = this._parent;
      this._muted = h._muted;
      this._loop = h._loop;
      this._volume = h._volume;
      this._rate = h._rate;
      this._seek = 0;
      this._paused = true;
      this._ended = true;
      this._sprite = "__default";
      this._id = ++x._counter;
      h._sounds.push(this);
      this.create();
      return this;
    },
    create: function () {
      var h = this._parent;
      var n = x._muted || this._muted || this._parent._muted ? 0 : this._volume;
      if (h._webAudio) {
        this._node = x.ctx.createGain === undefined ? x.ctx.createGainNode() : x.ctx.createGain();
        this._node.gain.setValueAtTime(n, x.ctx.currentTime);
        this._node.paused = true;
        this._node.connect(x.masterGain);
      } else if (!x.noAudio) {
        this._node = x._obtainHtml5Audio();
        this._errorFn = this._errorListener.bind(this);
        this._node.addEventListener("error", this._errorFn, false);
        this._loadFn = this._loadListener.bind(this);
        this._node.addEventListener(x._canPlayEvent, this._loadFn, false);
        this._endFn = this._endListener.bind(this);
        this._node.addEventListener("ended", this._endFn, false);
        this._node.src = h._src;
        this._node.preload = h._preload === true ? "auto" : h._preload;
        this._node.volume = n * x.volume();
        this._node.load();
      }
      return this;
    },
    reset: function () {
      var h = this._parent;
      this._muted = h._muted;
      this._loop = h._loop;
      this._volume = h._volume;
      this._rate = h._rate;
      this._seek = 0;
      this._rateSeek = 0;
      this._paused = true;
      this._ended = true;
      this._sprite = "__default";
      this._id = ++x._counter;
      return this;
    },
    _errorListener: function () {
      this._parent._emit("loaderror", this._id, this._node.error ? this._node.error.code : 0);
      this._node.removeEventListener("error", this._errorFn, false);
    },
    _loadListener: function () {
      var h = this._parent;
      h._duration = Math.ceil(this._node.duration * 10) / 10;
      if (Object.keys(h._sprite).length === 0) {
        h._sprite = {
          __default: [0, h._duration * 1000]
        };
      }
      if (h._state !== "loaded") {
        h._state = "loaded";
        h._emit("load");
        h._loadQueue();
      }
      this._node.removeEventListener(x._canPlayEvent, this._loadFn, false);
    },
    _endListener: function () {
      var h = this._parent;
      if (h._duration === Infinity) {
        h._duration = Math.ceil(this._node.duration * 10) / 10;
        if (h._sprite.__default[1] === Infinity) {
          h._sprite.__default[1] = h._duration * 1000;
        }
        h._ended(this);
      }
      this._node.removeEventListener("ended", this._endFn, false);
    }
  };
  var M = {};
  function fa(h) {
    var p = h._src;
    if (M[p]) {
      h._duration = M[p].duration;
      n(h);
      return;
    }
    if (/^data:[^;]+;base64,/.test(p)) {
      for (var r = atob(p.split(",")[1]), x = new Uint8Array(r.length), H = 0; H < r.length; ++H) {
        x[H] = r.charCodeAt(H);
      }
      sa(x.buffer, h);
    } else {
      var F = new XMLHttpRequest();
      F.open(h._xhr.method, p, true);
      F.withCredentials = h._xhr.withCredentials;
      F.responseType = "arraybuffer";
      if (h._xhr.headers) {
        Object.keys(h._xhr.headers).forEach(function (n) {
          F.setRequestHeader(n, h._xhr.headers[n]);
        });
      }
      F.onload = function () {
        var n = (F.status + "")[0];
        if (n !== "0" && n !== "2" && n !== "3") {
          h._emit("loaderror", null, "Failed loading audio file with status: " + F.status + ".");
          return;
        }
        sa(F.response, h);
      };
      F.onerror = function () {
        if (h._webAudio) {
          h._html5 = true;
          h._webAudio = false;
          h._sounds = [];
          delete M[p];
          h.load();
        }
      };
      q(F);
    }
  }
  function q(h) {
    try {
      h.send();
    } catch (w) {
      h.onerror();
    }
  }
  function sa(h, q) {
    function p() {
      q._emit("loaderror", null, "Decoding audio data failed.");
    }
    function w(h) {
      if (h && q._sounds.length > 0) {
        M[q._src] = h;
        n(q, h);
      } else {
        p();
      }
    }
    if (typeof Promise != "undefined" && x.ctx.decodeAudioData.length === 1) {
      x.ctx.decodeAudioData(h).then(w).catch(p);
    } else {
      x.ctx.decodeAudioData(h, w, p);
    }
  }
  function n(h, n) {
    if (n && !h._duration) {
      h._duration = n.duration;
    }
    if (Object.keys(h._sprite).length === 0) {
      h._sprite = {
        __default: [0, h._duration * 1000]
      };
    }
    if (h._state !== "loaded") {
      h._state = "loaded";
      h._emit("load");
      h._loadQueue();
    }
  }
  function h() {
    if (x.usingWebAudio) {
      try {
        if (typeof AudioContext != "undefined") {
          x.ctx = new AudioContext();
        } else if (typeof webkitAudioContext != "undefined") {
          x.ctx = new webkitAudioContext();
        } else {
          x.usingWebAudio = false;
        }
      } catch (r) {
        x.usingWebAudio = false;
      }
      if (!x.ctx) {
        x.usingWebAudio = false;
      }
      var h = /iP(hone|od|ad)/.test(x._navigator && x._navigator.platform);
      var n = x._navigator && x._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
      n = n ? parseInt(n[1], 10) : null;
      if (h && n && n < 9) {
        h = /safari/.test(x._navigator && x._navigator.userAgent.toLowerCase());
        if (x._navigator && !h) {
          x.usingWebAudio = false;
        }
      }
      if (x.usingWebAudio) {
        x.masterGain = x.ctx.createGain === undefined ? x.ctx.createGainNode() : x.ctx.createGain();
        x.masterGain.gain.setValueAtTime(x._muted ? 0 : x._volume, x.ctx.currentTime);
        x.masterGain.connect(x.ctx.destination);
      }
      x._setup();
    }
  }
  if (typeof define == "function" && define.amd) {
    define([], function () {
      return {
        Howler: x,
        Howl: F
      };
    });
  }
  if (typeof exports != "undefined") {
    exports.Howler = x;
    exports.Howl = F;
  }
  if (typeof global != "undefined") {
    global.HowlerGlobal = qa;
    global.Howler = x;
    global.Howl = F;
    global.Sound = H;
  } else if (typeof window != "undefined") {
    window.HowlerGlobal = qa;
    window.Howler = x;
    window.Howl = F;
    window.Sound = H;
  }
})();
(function () {
  HowlerGlobal.prototype._pos = [0, 0, 0];
  HowlerGlobal.prototype._orientation = [0, 0, -1, 0, 1, 0];
  HowlerGlobal.prototype.stereo = function (x) {
    if (!this.ctx || !this.ctx.listener) {
      return this;
    }
    for (var F = this._howls.length - 1; F >= 0; F--) {
      this._howls[F].stereo(x);
    }
    return this;
  };
  HowlerGlobal.prototype.pos = function (x, F, H) {
    if (this.ctx && this.ctx.listener) {
      F = typeof F != "number" ? this._pos[1] : F;
      H = typeof H != "number" ? this._pos[2] : H;
      if (typeof x != "number") {
        return this._pos;
      } else {
        this._pos = [x, F, H];
        if (this.ctx.listener.positionX !== undefined) {
          this.ctx.listener.positionX.setTargetAtTime(this._pos[0], Howler.ctx.currentTime, 0.1);
          this.ctx.listener.positionY.setTargetAtTime(this._pos[1], Howler.ctx.currentTime, 0.1);
          this.ctx.listener.positionZ.setTargetAtTime(this._pos[2], Howler.ctx.currentTime, 0.1);
        } else {
          this.ctx.listener.setPosition(this._pos[0], this._pos[1], this._pos[2]);
        }
        return this;
      }
    } else {
      return this;
    }
  };
  HowlerGlobal.prototype.orientation = function (x, F, H, M, fa, q) {
    if (!this.ctx || !this.ctx.listener) {
      return this;
    }
    var sa = this._orientation;
    F = typeof F != "number" ? sa[1] : F;
    H = typeof H != "number" ? sa[2] : H;
    M = typeof M != "number" ? sa[3] : M;
    fa = typeof fa != "number" ? sa[4] : fa;
    q = typeof q != "number" ? sa[5] : q;
    if (typeof x != "number") {
      return sa;
    } else {
      this._orientation = [x, F, H, M, fa, q];
      if (this.ctx.listener.forwardX !== undefined) {
        this.ctx.listener.forwardX.setTargetAtTime(x, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.forwardY.setTargetAtTime(F, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.forwardZ.setTargetAtTime(H, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upX.setTargetAtTime(M, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upY.setTargetAtTime(fa, Howler.ctx.currentTime, 0.1);
        this.ctx.listener.upZ.setTargetAtTime(q, Howler.ctx.currentTime, 0.1);
      } else {
        this.ctx.listener.setOrientation(x, F, H, M, fa, q);
      }
      return this;
    }
  };
  Howl.prototype.init = function (x) {
    return function (F) {
      this._orientation = F.orientation || [1, 0, 0];
      this._stereo = F.stereo || null;
      this._pos = F.pos || null;
      this._pannerAttr = {
        coneInnerAngle: F.coneInnerAngle !== undefined ? F.coneInnerAngle : 360,
        coneOuterAngle: F.coneOuterAngle !== undefined ? F.coneOuterAngle : 360,
        coneOuterGain: F.coneOuterGain !== undefined ? F.coneOuterGain : 0,
        distanceModel: F.distanceModel !== undefined ? F.distanceModel : "inverse",
        maxDistance: F.maxDistance !== undefined ? F.maxDistance : 10000,
        panningModel: F.panningModel !== undefined ? F.panningModel : "HRTF",
        refDistance: F.refDistance !== undefined ? F.refDistance : 1,
        rolloffFactor: F.rolloffFactor !== undefined ? F.rolloffFactor : 1
      };
      this._onstereo = F.onstereo ? [{
        fn: F.onstereo
      }] : [];
      this._onpos = F.onpos ? [{
        fn: F.onpos
      }] : [];
      this._onorientation = F.onorientation ? [{
        fn: F.onorientation
      }] : [];
      return x.call(this, F);
    };
  }(Howl.prototype.init);
  Howl.prototype.stereo = function (x, F) {
    var H = this;
    if (!H._webAudio) {
      return H;
    }
    if (H._state !== "loaded") {
      H._queue.push({
        event: "stereo",
        action: function () {
          H.stereo(x, F);
        }
      });
      return H;
    }
    var M = Howler.ctx.createStereoPanner === undefined ? "spatial" : "stereo";
    if (F === undefined) {
      if (typeof x != "number") {
        return H._stereo;
      }
      H._stereo = x;
      H._pos = [x, 0, 0];
    }
    for (var fa = H._getSoundIds(F), q = 0; q < fa.length; q++) {
      var sa = H._soundById(fa[q]);
      if (sa) {
        if (typeof x != "number") {
          return sa._stereo;
        }
        sa._stereo = x;
        sa._pos = [x, 0, 0];
        if (sa._node) {
          sa._pannerAttr.panningModel = "equalpower";
          if (!sa._panner || !sa._panner.pan) {
            qa(sa, M);
          }
          if (M === "spatial") {
            if (sa._panner.positionX !== undefined) {
              sa._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
              sa._panner.positionY.setValueAtTime(0, Howler.ctx.currentTime);
              sa._panner.positionZ.setValueAtTime(0, Howler.ctx.currentTime);
            } else {
              sa._panner.setPosition(x, 0, 0);
            }
          } else {
            sa._panner.pan.setValueAtTime(x, Howler.ctx.currentTime);
          }
        }
        H._emit("stereo", sa._id);
      }
    }
    return H;
  };
  Howl.prototype.pos = function (x, F, H, M) {
    var fa = this;
    if (!fa._webAudio) {
      return fa;
    }
    if (fa._state !== "loaded") {
      fa._queue.push({
        event: "pos",
        action: function () {
          fa.pos(x, F, H, M);
        }
      });
      return fa;
    }
    F = typeof F != "number" ? 0 : F;
    H = typeof H != "number" ? -0.5 : H;
    if (M === undefined) {
      if (typeof x != "number") {
        return fa._pos;
      }
      fa._pos = [x, F, H];
    }
    for (var q = fa._getSoundIds(M), sa = 0; sa < q.length; sa++) {
      var n = fa._soundById(q[sa]);
      if (n) {
        if (typeof x != "number") {
          return n._pos;
        }
        n._pos = [x, F, H];
        if (n._node) {
          if (!n._panner || !!n._panner.pan) {
            qa(n, "spatial");
          }
          if (n._panner.positionX !== undefined) {
            n._panner.positionX.setValueAtTime(x, Howler.ctx.currentTime);
            n._panner.positionY.setValueAtTime(F, Howler.ctx.currentTime);
            n._panner.positionZ.setValueAtTime(H, Howler.ctx.currentTime);
          } else {
            n._panner.setPosition(x, F, H);
          }
        }
        fa._emit("pos", n._id);
      }
    }
    return fa;
  };
  Howl.prototype.orientation = function (x, F, H, M) {
    var fa = this;
    if (!fa._webAudio) {
      return fa;
    }
    if (fa._state !== "loaded") {
      fa._queue.push({
        event: "orientation",
        action: function () {
          fa.orientation(x, F, H, M);
        }
      });
      return fa;
    }
    F = typeof F != "number" ? fa._orientation[1] : F;
    H = typeof H != "number" ? fa._orientation[2] : H;
    if (M === undefined) {
      if (typeof x != "number") {
        return fa._orientation;
      }
      fa._orientation = [x, F, H];
    }
    for (var q = fa._getSoundIds(M), sa = 0; sa < q.length; sa++) {
      var n = fa._soundById(q[sa]);
      if (n) {
        if (typeof x != "number") {
          return n._orientation;
        }
        n._orientation = [x, F, H];
        if (n._node) {
          if (!n._panner) {
            n._pos ||= fa._pos || [0, 0, -0.5];
            qa(n, "spatial");
          }
          if (n._panner.orientationX !== undefined) {
            n._panner.orientationX.setValueAtTime(x, Howler.ctx.currentTime);
            n._panner.orientationY.setValueAtTime(F, Howler.ctx.currentTime);
            n._panner.orientationZ.setValueAtTime(H, Howler.ctx.currentTime);
          } else {
            n._panner.setOrientation(x, F, H);
          }
        }
        fa._emit("orientation", n._id);
      }
    }
    return fa;
  };
  Howl.prototype.pannerAttr = function () {
    var x;
    var F;
    var H = arguments;
    if (!this._webAudio) {
      return this;
    }
    if (H.length === 0) {
      return this._pannerAttr;
    }
    if (H.length === 1) {
      if (typeof H[0] != "object") {
        F = this._soundById(parseInt(H[0], 10));
        if (F) {
          return F._pannerAttr;
        } else {
          return this._pannerAttr;
        }
      }
      var M = H[0];
      if (x === undefined) {
        M.pannerAttr ||= {
          coneInnerAngle: M.coneInnerAngle,
          coneOuterAngle: M.coneOuterAngle,
          coneOuterGain: M.coneOuterGain,
          distanceModel: M.distanceModel,
          maxDistance: M.maxDistance,
          refDistance: M.refDistance,
          rolloffFactor: M.rolloffFactor,
          panningModel: M.panningModel
        };
        this._pannerAttr = {
          coneInnerAngle: M.pannerAttr.coneInnerAngle !== undefined ? M.pannerAttr.coneInnerAngle : this._coneInnerAngle,
          coneOuterAngle: M.pannerAttr.coneOuterAngle !== undefined ? M.pannerAttr.coneOuterAngle : this._coneOuterAngle,
          coneOuterGain: M.pannerAttr.coneOuterGain !== undefined ? M.pannerAttr.coneOuterGain : this._coneOuterGain,
          distanceModel: M.pannerAttr.distanceModel !== undefined ? M.pannerAttr.distanceModel : this._distanceModel,
          maxDistance: M.pannerAttr.maxDistance !== undefined ? M.pannerAttr.maxDistance : this._maxDistance,
          refDistance: M.pannerAttr.refDistance !== undefined ? M.pannerAttr.refDistance : this._refDistance,
          rolloffFactor: M.pannerAttr.rolloffFactor !== undefined ? M.pannerAttr.rolloffFactor : this._rolloffFactor,
          panningModel: M.pannerAttr.panningModel !== undefined ? M.pannerAttr.panningModel : this._panningModel
        };
      }
    } else if (H.length === 2) {
      M = H[0];
      x = parseInt(H[1], 10);
    }
    x = this._getSoundIds(x);
    for (H = 0; H < x.length; H++) {
      if (F = this._soundById(x[H])) {
        var fa = F._pannerAttr;
        fa = {
          coneInnerAngle: M.coneInnerAngle !== undefined ? M.coneInnerAngle : fa.coneInnerAngle,
          coneOuterAngle: M.coneOuterAngle !== undefined ? M.coneOuterAngle : fa.coneOuterAngle,
          coneOuterGain: M.coneOuterGain !== undefined ? M.coneOuterGain : fa.coneOuterGain,
          distanceModel: M.distanceModel !== undefined ? M.distanceModel : fa.distanceModel,
          maxDistance: M.maxDistance !== undefined ? M.maxDistance : fa.maxDistance,
          refDistance: M.refDistance !== undefined ? M.refDistance : fa.refDistance,
          rolloffFactor: M.rolloffFactor !== undefined ? M.rolloffFactor : fa.rolloffFactor,
          panningModel: M.panningModel !== undefined ? M.panningModel : fa.panningModel
        };
        var q = F._panner;
        if (!q) {
          F._pos ||= this._pos || [0, 0, -0.5];
          qa(F, "spatial");
          q = F._panner;
        }
        q.coneInnerAngle = fa.coneInnerAngle;
        q.coneOuterAngle = fa.coneOuterAngle;
        q.coneOuterGain = fa.coneOuterGain;
        q.distanceModel = fa.distanceModel;
        q.maxDistance = fa.maxDistance;
        q.refDistance = fa.refDistance;
        q.rolloffFactor = fa.rolloffFactor;
        q.panningModel = fa.panningModel;
      }
    }
    return this;
  };
  Sound.prototype.init = function (x) {
    return function () {
      var F = this._parent;
      this._orientation = F._orientation;
      this._stereo = F._stereo;
      this._pos = F._pos;
      this._pannerAttr = F._pannerAttr;
      x.call(this);
      if (this._stereo) {
        F.stereo(this._stereo);
      } else if (this._pos) {
        F.pos(this._pos[0], this._pos[1], this._pos[2], this._id);
      }
    };
  }(Sound.prototype.init);
  Sound.prototype.reset = function (x) {
    return function () {
      var F = this._parent;
      this._orientation = F._orientation;
      this._stereo = F._stereo;
      this._pos = F._pos;
      this._pannerAttr = F._pannerAttr;
      if (this._stereo) {
        F.stereo(this._stereo);
      } else if (this._pos) {
        F.pos(this._pos[0], this._pos[1], this._pos[2], this._id);
      } else if (this._panner) {
        this._panner.disconnect(0);
        this._panner = undefined;
        F._refreshBuffer(this);
      }
      return x.call(this);
    };
  }(Sound.prototype.reset);
  function qa(x, F) {
    if ((F || "spatial") === "spatial") {
      x._panner = Howler.ctx.createPanner();
      x._panner.coneInnerAngle = x._pannerAttr.coneInnerAngle;
      x._panner.coneOuterAngle = x._pannerAttr.coneOuterAngle;
      x._panner.coneOuterGain = x._pannerAttr.coneOuterGain;
      x._panner.distanceModel = x._pannerAttr.distanceModel;
      x._panner.maxDistance = x._pannerAttr.maxDistance;
      x._panner.refDistance = x._pannerAttr.refDistance;
      x._panner.rolloffFactor = x._pannerAttr.rolloffFactor;
      x._panner.panningModel = x._pannerAttr.panningModel;
      if (x._panner.positionX !== undefined) {
        x._panner.positionX.setValueAtTime(x._pos[0], Howler.ctx.currentTime);
        x._panner.positionY.setValueAtTime(x._pos[1], Howler.ctx.currentTime);
        x._panner.positionZ.setValueAtTime(x._pos[2], Howler.ctx.currentTime);
      } else {
        x._panner.setPosition(x._pos[0], x._pos[1], x._pos[2]);
      }
      if (x._panner.orientationX !== undefined) {
        x._panner.orientationX.setValueAtTime(x._orientation[0], Howler.ctx.currentTime);
        x._panner.orientationY.setValueAtTime(x._orientation[1], Howler.ctx.currentTime);
        x._panner.orientationZ.setValueAtTime(x._orientation[2], Howler.ctx.currentTime);
      } else {
        x._panner.setOrientation(x._orientation[0], x._orientation[1], x._orientation[2]);
      }
    } else {
      x._panner = Howler.ctx.createStereoPanner();
      x._panner.pan.setValueAtTime(x._stereo, Howler.ctx.currentTime);
    }
    x._panner.connect(x._node);
    if (!x._paused) {
      x._parent.pause(x._id, true).play(x._id, true);
    }
  }
})();
(function (qa) {
  if (typeof exports == "object" && typeof module != "undefined") {
    module.exports = qa();
  } else if (typeof define == "function" && define.amd) {
    define([], qa);
  } else {
    (typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this).pako = qa();
  }
})(function () {
  return function M(x, F, H) {
    function fa(n, h) {
      if (!F[n]) {
        if (!x[n]) {
          var p = typeof require == "function" && require;
          if (!h && p) {
            return p(n, true);
          }
          if (q) {
            return q(n, true);
          }
          h = Error("Cannot find module '" + n + "'");
          h.code = "MODULE_NOT_FOUND";
          throw h;
        }
        h = F[n] = {
          exports: {}
        };
        x[n][0].call(h.exports, function (h) {
          var p = x[n][1][h];
          return fa(p ? p : h);
        }, h, h.exports, M, x, F, H);
      }
      return F[n].exports;
    }
    var q = typeof require == "function" && require;
    for (var sa = 0; sa < H.length; sa++) {
      fa(H[sa]);
    }
    return fa;
  }({
    1: [function (x, F, H) {
      function M(x) {
        if (!(this instanceof M)) {
          return new M(x);
        }
        x = this.options = sa.assign({
          level: Ea,
          method: S,
          chunkSize: 16384,
          windowBits: 15,
          memLevel: 8,
          strategy: la,
          to: ""
        }, x || {});
        if (x.raw && x.windowBits > 0) {
          x.windowBits = -x.windowBits;
        } else if (x.gzip && x.windowBits > 0 && x.windowBits < 16) {
          x.windowBits += 16;
        }
        this.err = 0;
        this.msg = "";
        this.ended = false;
        this.chunks = [];
        this.strm = new p();
        this.strm.avail_out = 0;
        var F = q.deflateInit2(this.strm, x.level, x.method, x.windowBits, x.memLevel, x.strategy);
        if (F !== r) {
          throw Error(h[F]);
        }
        if (x.header) {
          q.deflateSetHeader(this.strm, x.header);
        }
        if (x.dictionary) {
          var H;
          H = typeof x.dictionary == "string" ? n.string2buf(x.dictionary) : w.call(x.dictionary) === "[object ArrayBuffer]" ? new Uint8Array(x.dictionary) : x.dictionary;
          F = q.deflateSetDictionary(this.strm, H);
          if (F !== r) {
            throw Error(h[F]);
          }
          this._dict_set = true;
        }
      }
      function fa(h, n) {
        n = new M(n);
        n.push(h, true);
        if (n.err) {
          throw n.msg;
        }
        return n.result;
      }
      var q = x("./zlib/deflate");
      var sa = x("./utils/common");
      var n = x("./utils/strings");
      var h = x("./zlib/messages");
      var p = x("./zlib/zstream");
      var w = Object.prototype.toString;
      var r = 0;
      var Ea = -1;
      var la = 0;
      var S = 8;
      M.prototype.push = function (h, p) {
        var x;
        var F = this.strm;
        var H = this.options.chunkSize;
        if (this.ended) {
          return false;
        }
        p = p === ~~p ? p : p === true ? 4 : 0;
        if (typeof h == "string") {
          F.input = n.string2buf(h);
        } else if (w.call(h) === "[object ArrayBuffer]") {
          F.input = new Uint8Array(h);
        } else {
          F.input = h;
        }
        F.next_in = 0;
        F.avail_in = F.input.length;
        do {
          if (F.avail_out === 0) {
            F.output = new sa.Buf8(H);
            F.next_out = 0;
            F.avail_out = H;
          }
          x = q.deflate(F, p);
          if (x !== 1 && x !== r) {
            this.onEnd(x);
            this.ended = true;
            return false;
          }
          if (F.avail_out === 0 || F.avail_in === 0 && (p === 4 || p === 2)) {
            if (this.options.to === "string") {
              this.onData(n.buf2binstring(sa.shrinkBuf(F.output, F.next_out)));
            } else {
              this.onData(sa.shrinkBuf(F.output, F.next_out));
            }
          }
        } while ((F.avail_in > 0 || F.avail_out === 0) && x !== 1);
        if (p === 4) {
          x = q.deflateEnd(this.strm);
          this.onEnd(x);
          this.ended = true;
          return x === r;
        } else {
          return p !== 2 || (this.onEnd(r), F.avail_out = 0, true);
        }
      };
      M.prototype.onData = function (h) {
        this.chunks.push(h);
      };
      M.prototype.onEnd = function (h) {
        if (h === r) {
          if (this.options.to === "string") {
            this.result = this.chunks.join("");
          } else {
            this.result = sa.flattenChunks(this.chunks);
          }
        }
        this.chunks = [];
        this.err = h;
        this.msg = this.strm.msg;
      };
      H.Deflate = M;
      H.deflate = fa;
      H.deflateRaw = function (h, n) {
        n = n || {};
        n.raw = true;
        return fa(h, n);
      };
      H.gzip = function (h, n) {
        n = n || {};
        n.gzip = true;
        return fa(h, n);
      };
    }, {
      "./utils/common": 3,
      "./utils/strings": 4,
      "./zlib/deflate": 8,
      "./zlib/messages": 13,
      "./zlib/zstream": 15
    }],
    2: [function (x, F, H) {
      function M(n) {
        if (!(this instanceof M)) {
          return new M(n);
        }
        var x = this.options = sa.assign({
          chunkSize: 16384,
          windowBits: 0,
          to: ""
        }, n || {});
        if (x.raw && x.windowBits >= 0 && x.windowBits < 16) {
          x.windowBits = -x.windowBits;
          if (x.windowBits === 0) {
            x.windowBits = -15;
          }
        }
        if (!!(x.windowBits >= 0) && !!(x.windowBits < 16) && (!n || !n.windowBits)) {
          x.windowBits += 32;
        }
        if (x.windowBits > 15 && x.windowBits < 48 && (x.windowBits & 15) === 0) {
          x.windowBits |= 15;
        }
        this.err = 0;
        this.msg = "";
        this.ended = false;
        this.chunks = [];
        this.strm = new w();
        this.strm.avail_out = 0;
        n = q.inflateInit2(this.strm, x.windowBits);
        if (n !== h.Z_OK) {
          throw Error(p[n]);
        }
        this.header = new r();
        q.inflateGetHeader(this.strm, this.header);
      }
      function fa(h, n) {
        n = new M(n);
        n.push(h, true);
        if (n.err) {
          throw n.msg;
        }
        return n.result;
      }
      var q = x("./zlib/inflate");
      var sa = x("./utils/common");
      var n = x("./utils/strings");
      var h = x("./zlib/constants");
      var p = x("./zlib/messages");
      var w = x("./zlib/zstream");
      var r = x("./zlib/gzheader");
      var Ea = Object.prototype.toString;
      M.prototype.push = function (p, r) {
        var w;
        var x;
        var F;
        var H;
        var M;
        var S = this.strm;
        var la = this.options.chunkSize;
        var fa = this.options.dictionary;
        var ma = false;
        if (this.ended) {
          return false;
        }
        r = r === ~~r ? r : r === true ? h.Z_FINISH : h.Z_NO_FLUSH;
        if (typeof p == "string") {
          S.input = n.binstring2buf(p);
        } else if (Ea.call(p) === "[object ArrayBuffer]") {
          S.input = new Uint8Array(p);
        } else {
          S.input = p;
        }
        S.next_in = 0;
        S.avail_in = S.input.length;
        do {
          if (S.avail_out === 0) {
            S.output = new sa.Buf8(la);
            S.next_out = 0;
            S.avail_out = la;
          }
          w = q.inflate(S, h.Z_NO_FLUSH);
          if (w === h.Z_NEED_DICT && fa) {
            M = typeof fa == "string" ? n.string2buf(fa) : Ea.call(fa) === "[object ArrayBuffer]" ? new Uint8Array(fa) : fa;
            w = q.inflateSetDictionary(this.strm, M);
          }
          if (w === h.Z_BUF_ERROR && ma === true) {
            w = h.Z_OK;
            ma = false;
          }
          if (w !== h.Z_STREAM_END && w !== h.Z_OK) {
            this.onEnd(w);
            this.ended = true;
            return false;
          }
          if (S.next_out) {
            if (S.avail_out === 0 || w === h.Z_STREAM_END || S.avail_in === 0 && (r === h.Z_FINISH || r === h.Z_SYNC_FLUSH)) {
              if (this.options.to === "string") {
                x = n.utf8border(S.output, S.next_out);
                F = S.next_out - x;
                H = n.buf2string(S.output, x);
                S.next_out = F;
                S.avail_out = la - F;
                if (F) {
                  sa.arraySet(S.output, S.output, x, F, 0);
                }
                this.onData(H);
              } else {
                this.onData(sa.shrinkBuf(S.output, S.next_out));
              }
            }
          }
          if (S.avail_in === 0 && S.avail_out === 0) {
            ma = true;
          }
        } while ((S.avail_in > 0 || S.avail_out === 0) && w !== h.Z_STREAM_END);
        if (w === h.Z_STREAM_END) {
          r = h.Z_FINISH;
        }
        if (r === h.Z_FINISH) {
          w = q.inflateEnd(this.strm);
          this.onEnd(w);
          this.ended = true;
          return w === h.Z_OK;
        } else {
          return r !== h.Z_SYNC_FLUSH || (this.onEnd(h.Z_OK), S.avail_out = 0, true);
        }
      };
      M.prototype.onData = function (h) {
        this.chunks.push(h);
      };
      M.prototype.onEnd = function (n) {
        if (n === h.Z_OK) {
          if (this.options.to === "string") {
            this.result = this.chunks.join("");
          } else {
            this.result = sa.flattenChunks(this.chunks);
          }
        }
        this.chunks = [];
        this.err = n;
        this.msg = this.strm.msg;
      };
      H.Inflate = M;
      H.inflate = fa;
      H.inflateRaw = function (h, n) {
        n = n || {};
        n.raw = true;
        return fa(h, n);
      };
      H.ungzip = fa;
    }, {
      "./utils/common": 3,
      "./utils/strings": 4,
      "./zlib/constants": 6,
      "./zlib/gzheader": 9,
      "./zlib/inflate": 11,
      "./zlib/messages": 13,
      "./zlib/zstream": 15
    }],
    3: [function (x, F, H) {
      x = typeof Uint8Array != "undefined" && typeof Uint16Array != "undefined" && typeof Int32Array != "undefined";
      H.assign = function (q) {
        for (var x = Array.prototype.slice.call(arguments, 1); x.length;) {
          var n = x.shift();
          if (n) {
            if (typeof n != "object") {
              throw new TypeError(n + "must be non-object");
            }
            for (var h in n) {
              if (n.hasOwnProperty(h)) {
                q[h] = n[h];
              }
            }
          }
        }
        return q;
      };
      H.shrinkBuf = function (q, x) {
        if (q.length === x) {
          return q;
        } else if (q.subarray) {
          return q.subarray(0, x);
        } else {
          q.length = x;
          return q;
        }
      };
      var M = {
        arraySet: function (q, x, n, h, p) {
          if (x.subarray && q.subarray) {
            q.set(x.subarray(n, n + h), p);
            return;
          }
          for (var w = 0; w < h; w++) {
            q[p + w] = x[n + w];
          }
        },
        flattenChunks: function (q) {
          var x;
          var n;
          var h = n = 0;
          for (x = q.length; h < x; h++) {
            n += q[h].length;
          }
          var p = new Uint8Array(n);
          h = n = 0;
          for (x = q.length; h < x; h++) {
            var w = q[h];
            p.set(w, n);
            n += w.length;
          }
          return p;
        }
      };
      var fa = {
        arraySet: function (q, x, n, h, p) {
          for (var w = 0; w < h; w++) {
            q[p + w] = x[n + w];
          }
        },
        flattenChunks: function (q) {
          return [].concat.apply([], q);
        }
      };
      H.setTyped = function (q) {
        if (q) {
          H.Buf8 = Uint8Array;
          H.Buf16 = Uint16Array;
          H.Buf32 = Int32Array;
          H.assign(H, M);
        } else {
          H.Buf8 = Array;
          H.Buf16 = Array;
          H.Buf32 = Array;
          H.assign(H, fa);
        }
      };
      H.setTyped(x);
    }, {}],
    4: [function (x, F, H) {
      function M(h, n) {
        if (n < 65537 && (h.subarray && sa || !h.subarray && q)) {
          return String.fromCharCode.apply(null, fa.shrinkBuf(h, n));
        }
        var p = "";
        for (var r = 0; r < n; r++) {
          p += String.fromCharCode(h[r]);
        }
        return p;
      }
      var fa = x("./common");
      var q = true;
      var sa = true;
      try {
        String.fromCharCode.apply(null, [0]);
      } catch (h) {
        q = false;
      }
      try {
        String.fromCharCode.apply(null, new Uint8Array(1));
      } catch (h) {
        sa = false;
      }
      var n = new fa.Buf8(256);
      for (x = 0; x < 256; x++) {
        n[x] = x >= 252 ? 6 : x >= 248 ? 5 : x >= 240 ? 4 : x >= 224 ? 3 : x >= 192 ? 2 : 1;
      }
      n[254] = n[254] = 1;
      H.string2buf = function (h) {
        var n;
        var q;
        var r;
        var x = h.length;
        var F = 0;
        for (q = 0; q < x; q++) {
          var H = h.charCodeAt(q);
          if ((H & 64512) === 55296 && q + 1 < x) {
            n = h.charCodeAt(q + 1);
            if ((n & 64512) === 56320) {
              H = 65536 + (H - 55296 << 10) + (n - 56320);
              q++;
            }
          }
          F += H < 128 ? 1 : H < 2048 ? 2 : H < 65536 ? 3 : 4;
        }
        var M = new fa.Buf8(F);
        for (q = r = 0; r < F; q++) {
          H = h.charCodeAt(q);
          if ((H & 64512) === 55296 && q + 1 < x) {
            n = h.charCodeAt(q + 1);
            if ((n & 64512) === 56320) {
              H = 65536 + (H - 55296 << 10) + (n - 56320);
              q++;
            }
          }
          if (H < 128) {
            M[r++] = H;
          } else if (H < 2048) {
            M[r++] = H >>> 6 | 192;
            M[r++] = H & 63 | 128;
          } else if (H < 65536) {
            M[r++] = H >>> 12 | 224;
            M[r++] = H >>> 6 & 63 | 128;
            M[r++] = H & 63 | 128;
          } else {
            M[r++] = H >>> 18 | 240;
            M[r++] = H >>> 12 & 63 | 128;
            M[r++] = H >>> 6 & 63 | 128;
            M[r++] = H & 63 | 128;
          }
        }
        return M;
      };
      H.buf2binstring = function (h) {
        return M(h, h.length);
      };
      H.binstring2buf = function (h) {
        var n = new fa.Buf8(h.length);
        for (var q = 0, r = n.length; q < r; q++) {
          n[q] = h.charCodeAt(q);
        }
        return n;
      };
      H.buf2string = function (h, p) {
        var q;
        var r;
        var x;
        var F = p || h.length;
        var H = Array(F * 2);
        for (p = q = 0; p < F;) {
          r = h[p++];
          if (r < 128) {
            H[q++] = r;
          } else {
            x = n[r];
            if (x > 4) {
              H[q++] = 65533;
              p += x - 1;
            } else {
              for (r &= x === 2 ? 31 : x === 3 ? 15 : 7; x > 1 && p < F;) {
                r = r << 6 | h[p++] & 63;
                x--;
              }
              if (x > 1) {
                H[q++] = 65533;
              } else if (r < 65536) {
                H[q++] = r;
              } else {
                r -= 65536;
                H[q++] = r >> 10 & 1023 | 55296;
                H[q++] = r & 1023 | 56320;
              }
            }
          }
        }
        return M(H, q);
      };
      H.utf8border = function (h, p) {
        var q;
        p = p || h.length;
        if (p > h.length) {
          p = h.length;
        }
        for (q = p - 1; q >= 0 && (h[q] & 192) === 128;) {
          q--;
        }
        if (q < 0) {
          return p;
        } else if (q === 0) {
          return p;
        } else if (q + n[h[q]] > p) {
          return q;
        } else {
          return p;
        }
      };
    }, {
      "./common": 3
    }],
    5: [function (x, F, H) {
      F.exports = function (x, F, q, H) {
        var n = x & 65535 | 0;
        x = x >>> 16 & 65535 | 0;
        var h;
        while (q !== 0) {
          h = q > 2000 ? 2000 : q;
          q -= h;
          do {
            n = n + F[H++] | 0;
            x = x + n | 0;
          } while (--h);
          n %= 65521;
          x %= 65521;
        }
        return n | x << 16 | 0;
      };
    }, {}],
    6: [function (x, F, H) {
      F.exports = {
        Z_NO_FLUSH: 0,
        Z_PARTIAL_FLUSH: 1,
        Z_SYNC_FLUSH: 2,
        Z_FULL_FLUSH: 3,
        Z_FINISH: 4,
        Z_BLOCK: 5,
        Z_TREES: 6,
        Z_OK: 0,
        Z_STREAM_END: 1,
        Z_NEED_DICT: 2,
        Z_ERRNO: -1,
        Z_STREAM_ERROR: -2,
        Z_DATA_ERROR: -3,
        Z_BUF_ERROR: -5,
        Z_NO_COMPRESSION: 0,
        Z_BEST_SPEED: 1,
        Z_BEST_COMPRESSION: 9,
        Z_DEFAULT_COMPRESSION: -1,
        Z_FILTERED: 1,
        Z_HUFFMAN_ONLY: 2,
        Z_RLE: 3,
        Z_FIXED: 4,
        Z_DEFAULT_STRATEGY: 0,
        Z_BINARY: 0,
        Z_TEXT: 1,
        Z_UNKNOWN: 2,
        Z_DEFLATED: 8
      };
    }, {}],
    7: [function (x, F, H) {
      var M = function () {
        var x;
        var q = [];
        for (var F = 0; F < 256; F++) {
          x = F;
          for (var n = 0; n < 8; n++) {
            x = x & 1 ? x >>> 1 ^ -306674912 : x >>> 1;
          }
          q[F] = x;
        }
        return q;
      }();
      F.exports = function (x, q, F, n) {
        F = n + F;
        for (x ^= -1; n < F; n++) {
          x = x >>> 8 ^ M[(x ^ q[n]) & 255];
        }
        return x ^ -1;
      };
    }, {}],
    8: [function (x, F, H) {
      function M(h, n) {
        h.msg = kc[n];
        return n;
      }
      function fa(h) {
        for (var n = h.length; --n >= 0;) {
          h[n] = 0;
        }
      }
      function q(h) {
        var n = h.state;
        var p = n.pending;
        if (p > h.avail_out) {
          p = h.avail_out;
        }
        if (p !== 0) {
          va.arraySet(h.output, n.pending_buf, n.pending_out, p, h.next_out);
          h.next_out += p;
          n.pending_out += p;
          h.total_out += p;
          h.avail_out -= p;
          n.pending -= p;
          if (n.pending === 0) {
            n.pending_out = 0;
          }
        }
      }
      function sa(h, n) {
        Pc._tr_flush_block(h, h.block_start >= 0 ? h.block_start : -1, h.strstart - h.block_start, n);
        h.block_start = h.strstart;
        q(h.strm);
      }
      function n(h, n) {
        h.pending_buf[h.pending++] = n;
      }
      function h(h, n) {
        h.pending_buf[h.pending++] = n >>> 8 & 255;
        h.pending_buf[h.pending++] = n & 255;
      }
      function p(h, n) {
        var p;
        var q;
        var r = h.max_chain_length;
        var u = h.strstart;
        var w = h.prev_length;
        var x = h.nice_match;
        var v = h.strstart > h.w_size - Fa ? h.strstart - (h.w_size - Fa) : 0;
        var B = h.window;
        var F = h.w_mask;
        var H = h.prev;
        var ma = h.strstart + eb;
        var M = B[u + w - 1];
        var L = B[u + w];
        if (h.prev_length >= h.good_match) {
          r >>= 2;
        }
        if (x > h.lookahead) {
          x = h.lookahead;
        }
        do {
          p = n;
          if (B[p + w] === L && B[p + w - 1] === M && B[p] === B[u] && B[++p] === B[u + 1]) {
            u += 2;
            for (p++; B[++u] === B[++p] && B[++u] === B[++p] && B[++u] === B[++p] && B[++u] === B[++p] && B[++u] === B[++p] && B[++u] === B[++p] && B[++u] === B[++p] && B[++u] === B[++p] && u < ma;);
            q = eb - (ma - u);
            u = ma - eb;
            if (q > w) {
              h.match_start = n;
              w = q;
              if (q >= x) {
                break;
              }
              M = B[u + w - 1];
              L = B[u + w];
            }
          }
        } while ((n = H[n & F]) > v && --r !== 0);
        if (w <= h.lookahead) {
          return w;
        } else {
          return h.lookahead;
        }
      }
      function w(h) {
        var n;
        var p;
        var q = h.w_size;
        do {
          p = h.window_size - h.lookahead - h.strstart;
          if (h.strstart >= q + (q - Fa)) {
            va.arraySet(h.window, h.window, q, q, 0);
            h.match_start -= q;
            h.strstart -= q;
            h.block_start -= q;
            var r = n = h.hash_size;
            do {
              var u = h.head[--r];
              h.head[r] = u >= q ? u - q : 0;
            } while (--n);
            r = n = q;
            do {
              u = h.prev[--r];
              h.prev[r] = u >= q ? u - q : 0;
            } while (--n);
            p += q;
          }
          if (h.strm.avail_in === 0) {
            break;
          }
          r = h.strm;
          u = h.window;
          var w = h.strstart + h.lookahead;
          var x = r.avail_in;
          if (x > p) {
            x = p;
          }
          n = x === 0 ? 0 : (r.avail_in -= x, va.arraySet(u, r.input, r.next_in, x, w), r.state.wrap === 1 ? r.adler = kb(r.adler, u, x, w) : r.state.wrap === 2 && (r.adler = ib(r.adler, u, x, w)), r.next_in += x, r.total_in += x, x);
          h.lookahead += n;
          if (h.lookahead + h.insert >= bb) {
            p = h.strstart - h.insert;
            h.ins_h = h.window[p];
            h.ins_h = (h.ins_h << h.hash_shift ^ h.window[p + 1]) & h.hash_mask;
            while (h.insert && (h.ins_h = (h.ins_h << h.hash_shift ^ h.window[p + bb - 1]) & h.hash_mask, h.prev[p & h.w_mask] = h.head[h.ins_h], h.head[h.ins_h] = p, p++, h.insert--, !(h.lookahead + h.insert < bb)));
          }
        } while (h.lookahead < Fa && h.strm.avail_in !== 0);
      }
      function r(h, n) {
        var q;
        var r;
        while (true) {
          if (h.lookahead < Fa) {
            w(h);
            if (h.lookahead < Fa && n === ma) {
              return Z;
            }
            if (h.lookahead === 0) {
              break;
            }
          }
          q = 0;
          if (h.lookahead >= bb) {
            h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + bb - 1]) & h.hash_mask;
            q = h.prev[h.strstart & h.w_mask] = h.head[h.ins_h];
            h.head[h.ins_h] = h.strstart;
          }
          if (q !== 0 && h.strstart - q <= h.w_size - Fa) {
            h.match_length = p(h, q);
          }
          if (h.match_length >= bb) {
            r = Pc._tr_tally(h, h.strstart - h.match_start, h.match_length - bb);
            h.lookahead -= h.match_length;
            if (h.match_length <= h.max_lazy_match && h.lookahead >= bb) {
              h.match_length--;
              do {
                h.strstart++;
                h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + bb - 1]) & h.hash_mask;
                q = h.prev[h.strstart & h.w_mask] = h.head[h.ins_h];
                h.head[h.ins_h] = h.strstart;
              } while (--h.match_length !== 0);
              h.strstart++;
            } else {
              h.strstart += h.match_length;
              h.match_length = 0;
              h.ins_h = h.window[h.strstart];
              h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + 1]) & h.hash_mask;
            }
          } else {
            r = Pc._tr_tally(h, 0, h.window[h.strstart]);
            h.lookahead--;
            h.strstart++;
          }
          if (r && (sa(h, false), h.strm.avail_out === 0)) {
            return Z;
          }
        }
        h.insert = h.strstart < bb - 1 ? h.strstart : bb - 1;
        if (n === mb) {
          sa(h, true);
          if (h.strm.avail_out === 0) {
            return Rb;
          } else {
            return fb;
          }
        } else if (h.last_lit && (sa(h, false), h.strm.avail_out === 0)) {
          return Z;
        } else {
          return te;
        }
      }
      function Ea(h, n) {
        var q;
        var r;
        var u;
        while (true) {
          if (h.lookahead < Fa) {
            w(h);
            if (h.lookahead < Fa && n === ma) {
              return Z;
            }
            if (h.lookahead === 0) {
              break;
            }
          }
          q = 0;
          if (h.lookahead >= bb) {
            h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + bb - 1]) & h.hash_mask;
            q = h.prev[h.strstart & h.w_mask] = h.head[h.ins_h];
            h.head[h.ins_h] = h.strstart;
          }
          h.prev_length = h.match_length;
          h.prev_match = h.match_start;
          h.match_length = bb - 1;
          if (q !== 0 && h.prev_length < h.max_lazy_match && h.strstart - q <= h.w_size - Fa) {
            h.match_length = p(h, q);
            if (h.match_length <= 5 && (h.strategy === Ra || h.match_length === bb && h.strstart - h.match_start > 4096)) {
              h.match_length = bb - 1;
            }
          }
          if (h.prev_length >= bb && h.match_length <= h.prev_length) {
            u = h.strstart + h.lookahead - bb;
            r = Pc._tr_tally(h, h.strstart - 1 - h.prev_match, h.prev_length - bb);
            h.lookahead -= h.prev_length - 1;
            h.prev_length -= 2;
            do {
              if (++h.strstart <= u) {
                h.ins_h = (h.ins_h << h.hash_shift ^ h.window[h.strstart + bb - 1]) & h.hash_mask;
                q = h.prev[h.strstart & h.w_mask] = h.head[h.ins_h];
                h.head[h.ins_h] = h.strstart;
              }
            } while (--h.prev_length !== 0);
            h.match_available = 0;
            h.match_length = bb - 1;
            h.strstart++;
            if (r && (sa(h, false), h.strm.avail_out === 0)) {
              return Z;
            }
          } else if (h.match_available) {
            r = Pc._tr_tally(h, 0, h.window[h.strstart - 1]);
            if (r) {
              sa(h, false);
            }
            h.strstart++;
            h.lookahead--;
            if (h.strm.avail_out === 0) {
              return Z;
            }
          } else {
            h.match_available = 1;
            h.strstart++;
            h.lookahead--;
          }
        }
        if (h.match_available) {
          Pc._tr_tally(h, 0, h.window[h.strstart - 1]);
          h.match_available = 0;
        }
        h.insert = h.strstart < bb - 1 ? h.strstart : bb - 1;
        if (n === mb) {
          sa(h, true);
          if (h.strm.avail_out === 0) {
            return Rb;
          } else {
            return fb;
          }
        } else if (h.last_lit && (sa(h, false), h.strm.avail_out === 0)) {
          return Z;
        } else {
          return te;
        }
      }
      function la(h, n, p, q, r) {
        this.good_length = h;
        this.max_lazy = n;
        this.nice_length = p;
        this.max_chain = q;
        this.func = r;
      }
      function S() {
        this.strm = null;
        this.status = 0;
        this.pending_buf = null;
        this.wrap = this.pending = this.pending_out = this.pending_buf_size = 0;
        this.gzhead = null;
        this.gzindex = 0;
        this.method = na;
        this.last_flush = -1;
        this.w_mask = this.w_bits = this.w_size = 0;
        this.window = null;
        this.window_size = 0;
        this.head = this.prev = null;
        this.nice_match = this.good_match = this.strategy = this.level = this.max_lazy_match = this.max_chain_length = this.prev_length = this.lookahead = this.match_start = this.strstart = this.match_available = this.prev_match = this.match_length = this.block_start = this.hash_shift = this.hash_mask = this.hash_bits = this.hash_size = this.ins_h = 0;
        this.dyn_ltree = new va.Buf16(L * 2);
        this.dyn_dtree = new va.Buf16((oc * 2 + 1) * 2);
        this.bl_tree = new va.Buf16((B * 2 + 1) * 2);
        fa(this.dyn_ltree);
        fa(this.dyn_dtree);
        fa(this.bl_tree);
        this.bl_desc = this.d_desc = this.l_desc = null;
        this.bl_count = new va.Buf16(uf + 1);
        this.heap = new va.Buf16(Ca * 2 + 1);
        fa(this.heap);
        this.heap_max = this.heap_len = 0;
        this.depth = new va.Buf16(Ca * 2 + 1);
        fa(this.depth);
        this.bi_valid = this.bi_buf = this.insert = this.matches = this.static_len = this.opt_len = this.d_buf = this.last_lit = this.lit_bufsize = this.l_buf = 0;
      }
      function ka(h) {
        var n;
        if (h && h.state) {
          h.total_in = h.total_out = 0;
          h.data_type = yd;
          n = h.state;
          n.pending = 0;
          n.pending_out = 0;
          if (n.wrap < 0) {
            n.wrap = -n.wrap;
          }
          n.status = n.wrap ? Qa : ja;
          h.adler = n.wrap === 2 ? 0 : 1;
          n.last_flush = ma;
          Pc._tr_init(n);
          return Ba;
        } else {
          return M(h, Da);
        }
      }
      function wd(h) {
        var n = ka(h);
        if (n === Ba) {
          h = h.state;
          h.window_size = h.w_size * 2;
          fa(h.head);
          h.max_lazy_match = Qb[h.level].max_lazy;
          h.good_match = Qb[h.level].good_length;
          h.nice_match = Qb[h.level].nice_length;
          h.max_chain_length = Qb[h.level].max_chain;
          h.strstart = 0;
          h.block_start = 0;
          h.lookahead = 0;
          h.insert = 0;
          h.match_length = h.prev_length = bb - 1;
          h.match_available = 0;
          h.ins_h = 0;
        }
        return n;
      }
      function Wc(h, n, p, q, r, w) {
        if (!h) {
          return Da;
        }
        var u = 1;
        if (n === gb) {
          n = 6;
        }
        if (q < 0) {
          u = 0;
          q = -q;
        } else if (q > 15) {
          u = 2;
          q -= 16;
        }
        if (r < 1 || r > ub || p !== na || q < 8 || q > 15 || n < 0 || n > 9 || w < 0 || w > Zb) {
          return M(h, Da);
        }
        if (q === 8) {
          q = 9;
        }
        var y = new S();
        h.state = y;
        y.strm = h;
        y.wrap = u;
        y.gzhead = null;
        y.w_bits = q;
        y.w_size = 1 << y.w_bits;
        y.w_mask = y.w_size - 1;
        y.hash_bits = r + 7;
        y.hash_size = 1 << y.hash_bits;
        y.hash_mask = y.hash_size - 1;
        y.hash_shift = ~~((y.hash_bits + bb - 1) / bb);
        y.window = new va.Buf8(y.w_size * 2);
        y.head = new va.Buf16(y.hash_size);
        y.prev = new va.Buf16(y.w_size);
        y.lit_bufsize = 1 << r + 6;
        y.pending_buf_size = y.lit_bufsize * 4;
        y.pending_buf = new va.Buf8(y.pending_buf_size);
        y.d_buf = y.lit_bufsize * 1;
        y.l_buf = y.lit_bufsize * 3;
        y.level = n;
        y.strategy = w;
        y.method = p;
        return wd(h);
      }
      var va = x("../utils/common");
      var Pc = x("./trees");
      var kb = x("./adler32");
      var ib = x("./crc32");
      var kc = x("./messages");
      var ma = 0;
      var mb = 4;
      var Ba = 0;
      var Da = -2;
      var gb = -1;
      var Ra = 1;
      var Zb = 4;
      var yd = 2;
      var na = 8;
      var ub = 9;
      var Ca = 286;
      var oc = 30;
      var B = 19;
      var L = Ca * 2 + 1;
      var uf = 15;
      var bb = 3;
      var eb = 258;
      var Fa = eb + bb + 1;
      var Qa = 42;
      var ja = 113;
      var Z = 1;
      var te = 2;
      var Rb = 3;
      var fb = 4;
      var Qb = [new la(0, 0, 0, 0, function (h, n) {
        var p = 65535;
        for (p > h.pending_buf_size - 5 && (p = h.pending_buf_size - 5);;) {
          if (h.lookahead <= 1) {
            w(h);
            if (h.lookahead === 0 && n === ma) {
              return Z;
            }
            if (h.lookahead === 0) {
              break;
            }
          }
          h.strstart += h.lookahead;
          h.lookahead = 0;
          var q = h.block_start + p;
          if ((h.strstart === 0 || h.strstart >= q) && (h.lookahead = h.strstart - q, h.strstart = q, sa(h, false), h.strm.avail_out === 0) || h.strstart - h.block_start >= h.w_size - Fa && (sa(h, false), h.strm.avail_out === 0)) {
            return Z;
          }
        }
        h.insert = 0;
        if (n === mb) {
          sa(h, true);
          if (h.strm.avail_out === 0) {
            return Rb;
          } else {
            return fb;
          }
        } else {
          if (h.strstart > h.block_start) {
            sa(h, false);
          }
          return Z;
        }
      }), new la(4, 4, 8, 4, r), new la(4, 5, 16, 8, r), new la(4, 6, 32, 32, r), new la(4, 4, 16, 16, Ea), new la(8, 16, 32, 32, Ea), new la(8, 16, 128, 128, Ea), new la(8, 32, 128, 256, Ea), new la(32, 128, 258, 1024, Ea), new la(32, 258, 258, 4096, Ea)];
      H.deflateInit = function (h, n) {
        return Wc(h, n, na, 15, 8, 0);
      };
      H.deflateInit2 = Wc;
      H.deflateReset = wd;
      H.deflateResetKeep = ka;
      H.deflateSetHeader = function (h, n) {
        if (h && h.state) {
          if (h.state.wrap !== 2) {
            return Da;
          } else {
            h.state.gzhead = n;
            return Ba;
          }
        } else {
          return Da;
        }
      };
      H.deflate = function (p, r) {
        var x;
        var u;
        if (!p || !p.state || r > 5 || r < 0) {
          if (p) {
            return M(p, Da);
          } else {
            return Da;
          }
        }
        u = p.state;
        if (!p.output || !p.input && p.avail_in !== 0 || u.status === 666 && r !== mb) {
          return M(p, p.avail_out === 0 ? -5 : Da);
        }
        u.strm = p;
        x = u.last_flush;
        u.last_flush = r;
        if (u.status === Qa) {
          if (u.wrap === 2) {
            p.adler = 0;
            n(u, 31);
            n(u, 139);
            n(u, 8);
            if (u.gzhead) {
              n(u, (u.gzhead.text ? 1 : 0) + (u.gzhead.hcrc ? 2 : 0) + (u.gzhead.extra ? 4 : 0) + (u.gzhead.name ? 8 : 0) + (u.gzhead.comment ? 16 : 0));
              n(u, u.gzhead.time & 255);
              n(u, u.gzhead.time >> 8 & 255);
              n(u, u.gzhead.time >> 16 & 255);
              n(u, u.gzhead.time >> 24 & 255);
              n(u, u.level === 9 ? 2 : u.strategy >= 2 || u.level < 2 ? 4 : 0);
              n(u, u.gzhead.os & 255);
              if (u.gzhead.extra && u.gzhead.extra.length) {
                n(u, u.gzhead.extra.length & 255);
                n(u, u.gzhead.extra.length >> 8 & 255);
              }
              if (u.gzhead.hcrc) {
                p.adler = ib(p.adler, u.pending_buf, u.pending, 0);
              }
              u.gzindex = 0;
              u.status = 69;
            } else {
              n(u, 0);
              n(u, 0);
              n(u, 0);
              n(u, 0);
              n(u, 0);
              n(u, u.level === 9 ? 2 : u.strategy >= 2 || u.level < 2 ? 4 : 0);
              n(u, 3);
              u.status = ja;
            }
          } else {
            var B = na + (u.w_bits - 8 << 4) << 8;
            B |= (u.strategy >= 2 || u.level < 2 ? 0 : u.level < 6 ? 1 : u.level === 6 ? 2 : 3) << 6;
            if (u.strstart !== 0) {
              B |= 32;
            }
            u.status = ja;
            h(u, B + (31 - B % 31));
            if (u.strstart !== 0) {
              h(u, p.adler >>> 16);
              h(u, p.adler & 65535);
            }
            p.adler = 1;
          }
        }
        if (u.status === 69) {
          if (u.gzhead.extra) {
            for (B = u.pending; u.gzindex < (u.gzhead.extra.length & 65535) && (u.pending !== u.pending_buf_size || (u.gzhead.hcrc && u.pending > B && (p.adler = ib(p.adler, u.pending_buf, u.pending - B, B)), q(p), B = u.pending, u.pending !== u.pending_buf_size));) {
              n(u, u.gzhead.extra[u.gzindex] & 255);
              u.gzindex++;
            }
            if (u.gzhead.hcrc && u.pending > B) {
              p.adler = ib(p.adler, u.pending_buf, u.pending - B, B);
            }
            if (u.gzindex === u.gzhead.extra.length) {
              u.gzindex = 0;
              u.status = 73;
            }
          } else {
            u.status = 73;
          }
        }
        if (u.status === 73) {
          if (u.gzhead.name) {
            B = u.pending;
            do {
              if (u.pending === u.pending_buf_size && (u.gzhead.hcrc && u.pending > B && (p.adler = ib(p.adler, u.pending_buf, u.pending - B, B)), q(p), B = u.pending, u.pending === u.pending_buf_size)) {
                var y = 1;
                break;
              }
              y = u.gzindex < u.gzhead.name.length ? u.gzhead.name.charCodeAt(u.gzindex++) & 255 : 0;
              n(u, y);
            } while (y !== 0);
            if (u.gzhead.hcrc && u.pending > B) {
              p.adler = ib(p.adler, u.pending_buf, u.pending - B, B);
            }
            if (y === 0) {
              u.gzindex = 0;
              u.status = 91;
            }
          } else {
            u.status = 91;
          }
        }
        if (u.status === 91) {
          if (u.gzhead.comment) {
            B = u.pending;
            do {
              if (u.pending === u.pending_buf_size && (u.gzhead.hcrc && u.pending > B && (p.adler = ib(p.adler, u.pending_buf, u.pending - B, B)), q(p), B = u.pending, u.pending === u.pending_buf_size)) {
                y = 1;
                break;
              }
              y = u.gzindex < u.gzhead.comment.length ? u.gzhead.comment.charCodeAt(u.gzindex++) & 255 : 0;
              n(u, y);
            } while (y !== 0);
            if (u.gzhead.hcrc && u.pending > B) {
              p.adler = ib(p.adler, u.pending_buf, u.pending - B, B);
            }
            if (y === 0) {
              u.status = 103;
            }
          } else {
            u.status = 103;
          }
        }
        if (u.status === 103) {
          if (u.gzhead.hcrc) {
            if (u.pending + 2 > u.pending_buf_size) {
              q(p);
            }
            if (u.pending + 2 <= u.pending_buf_size) {
              n(u, p.adler & 255);
              n(u, p.adler >> 8 & 255);
              p.adler = 0;
              u.status = ja;
            }
          } else {
            u.status = ja;
          }
        }
        if (u.pending !== 0) {
          q(p);
          if (p.avail_out === 0) {
            u.last_flush = -1;
            return Ba;
          }
        } else if (p.avail_in === 0 && (r << 1) - (r > 4 ? 9 : 0) <= (x << 1) - (x > 4 ? 9 : 0) && r !== mb) {
          return M(p, -5);
        }
        if (u.status === 666 && p.avail_in !== 0) {
          return M(p, -5);
        }
        if (p.avail_in !== 0 || u.lookahead !== 0 || r !== ma && u.status !== 666) {
          if (u.strategy === 2) {
            a: {
              var F;
              while (true) {
                if (u.lookahead === 0 && (w(u), u.lookahead === 0)) {
                  if (r === ma) {
                    var H = Z;
                    break a;
                  }
                  break;
                }
                u.match_length = 0;
                F = Pc._tr_tally(u, 0, u.window[u.strstart]);
                u.lookahead--;
                u.strstart++;
                if (F && (sa(u, false), u.strm.avail_out === 0)) {
                  H = Z;
                  break a;
                }
              }
              u.insert = 0;
              H = r === mb ? (sa(u, true), u.strm.avail_out === 0 ? Rb : fb) : u.last_lit && (sa(u, false), u.strm.avail_out === 0) ? Z : te;
            }
          } else if (u.strategy === 3) {
            a: {
              var v;
              var L;
              for (F = u.window;;) {
                if (u.lookahead <= eb) {
                  w(u);
                  if (u.lookahead <= eb && r === ma) {
                    H = Z;
                    break a;
                  }
                  if (u.lookahead === 0) {
                    break;
                  }
                }
                u.match_length = 0;
                if (u.lookahead >= bb && u.strstart > 0 && (L = u.strstart - 1, v = F[L], v === F[++L] && v === F[++L] && v === F[++L])) {
                  for (x = u.strstart + eb; v === F[++L] && v === F[++L] && v === F[++L] && v === F[++L] && v === F[++L] && v === F[++L] && v === F[++L] && v === F[++L] && L < x;);
                  u.match_length = eb - (x - L);
                  if (u.match_length > u.lookahead) {
                    u.match_length = u.lookahead;
                  }
                }
                if (u.match_length >= bb) {
                  H = Pc._tr_tally(u, 1, u.match_length - bb);
                  u.lookahead -= u.match_length;
                  u.strstart += u.match_length;
                  u.match_length = 0;
                } else {
                  H = Pc._tr_tally(u, 0, u.window[u.strstart]);
                  u.lookahead--;
                  u.strstart++;
                }
                if (H && (sa(u, false), u.strm.avail_out === 0)) {
                  H = Z;
                  break a;
                }
              }
              u.insert = 0;
              H = r === mb ? (sa(u, true), u.strm.avail_out === 0 ? Rb : fb) : u.last_lit && (sa(u, false), u.strm.avail_out === 0) ? Z : te;
            }
          } else {
            H = Qb[u.level].func(u, r);
          }
          if (H === Rb || H === fb) {
            u.status = 666;
          }
          if (H === Z || H === Rb) {
            if (p.avail_out === 0) {
              u.last_flush = -1;
            }
            return Ba;
          }
          if (H === te && (r === 1 ? Pc._tr_align(u) : r !== 5 && (Pc._tr_stored_block(u, 0, 0, false), r === 3 && (fa(u.head), u.lookahead === 0 && (u.strstart = 0, u.block_start = 0, u.insert = 0))), q(p), p.avail_out === 0)) {
            u.last_flush = -1;
            return Ba;
          }
        }
        if (r !== mb) {
          return Ba;
        } else if (u.wrap <= 0) {
          return 1;
        } else {
          if (u.wrap === 2) {
            n(u, p.adler & 255);
            n(u, p.adler >> 8 & 255);
            n(u, p.adler >> 16 & 255);
            n(u, p.adler >> 24 & 255);
            n(u, p.total_in & 255);
            n(u, p.total_in >> 8 & 255);
            n(u, p.total_in >> 16 & 255);
            n(u, p.total_in >> 24 & 255);
          } else {
            h(u, p.adler >>> 16);
            h(u, p.adler & 65535);
          }
          q(p);
          if (u.wrap > 0) {
            u.wrap = -u.wrap;
          }
          if (u.pending !== 0) {
            return Ba;
          } else {
            return 1;
          }
        }
      };
      H.deflateEnd = function (h) {
        var n;
        if (h && h.state) {
          n = h.state.status;
          if (n !== Qa && n !== 69 && n !== 73 && n !== 91 && n !== 103 && n !== ja && n !== 666) {
            return M(h, Da);
          } else {
            h.state = null;
            if (n === ja) {
              return M(h, -3);
            } else {
              return Ba;
            }
          }
        } else {
          return Da;
        }
      };
      H.deflateSetDictionary = function (h, n) {
        var p;
        var q;
        var r;
        var u = n.length;
        if (!h || !h.state || (p = h.state, q = p.wrap, q === 2 || q === 1 && p.status !== Qa || p.lookahead)) {
          return Da;
        }
        if (q === 1) {
          h.adler = kb(h.adler, n, u, 0);
        }
        p.wrap = 0;
        if (u >= p.w_size) {
          if (q === 0) {
            fa(p.head);
            p.strstart = 0;
            p.block_start = 0;
            p.insert = 0;
          }
          r = new va.Buf8(p.w_size);
          va.arraySet(r, n, u - p.w_size, p.w_size, 0);
          n = r;
          u = p.w_size;
        }
        r = h.avail_in;
        var x = h.next_in;
        var B = h.input;
        h.avail_in = u;
        h.next_in = 0;
        h.input = n;
        for (w(p); p.lookahead >= bb;) {
          n = p.strstart;
          u = p.lookahead - (bb - 1);
          do {
            p.ins_h = (p.ins_h << p.hash_shift ^ p.window[n + bb - 1]) & p.hash_mask;
            p.prev[n & p.w_mask] = p.head[p.ins_h];
            p.head[p.ins_h] = n;
            n++;
          } while (--u);
          p.strstart = n;
          p.lookahead = bb - 1;
          w(p);
        }
        p.strstart += p.lookahead;
        p.block_start = p.strstart;
        p.insert = p.lookahead;
        p.lookahead = 0;
        p.match_length = p.prev_length = bb - 1;
        p.match_available = 0;
        h.next_in = x;
        h.input = B;
        h.avail_in = r;
        p.wrap = q;
        return Ba;
      };
      H.deflateInfo = "pako deflate (from Nodeca project)";
    }, {
      "../utils/common": 3,
      "./adler32": 5,
      "./crc32": 7,
      "./messages": 13,
      "./trees": 14
    }],
    9: [function (x, F, H) {
      F.exports = function () {
        this.os = this.xflags = this.time = this.text = 0;
        this.extra = null;
        this.extra_len = 0;
        this.comment = this.name = "";
        this.hcrc = 0;
        this.done = false;
      };
    }, {}],
    10: [function (x, F, H) {
      F.exports = function (x, F) {
        var q;
        var H;
        var n;
        var h = x.state;
        var p = x.next_in;
        var w = x.input;
        var r = p + (x.avail_in - 5);
        var M = x.next_out;
        var la = x.output;
        F = M - (F - x.avail_out);
        var S = M + (x.avail_out - 257);
        var ka = h.dmax;
        var fa = h.wsize;
        var Wc = h.whave;
        var va = h.wnext;
        var Pc = h.window;
        var kb = h.hold;
        var ib = h.bits;
        var kc = h.lencode;
        var ma = h.distcode;
        var mb = (1 << h.lenbits) - 1;
        var Ba = (1 << h.distbits) - 1;
        a: do {
          if (ib < 15) {
            kb += w[p++] << ib;
            ib += 8;
            kb += w[p++] << ib;
            ib += 8;
          }
          var Da = kc[kb & mb];
          b: while (true) {
            q = Da >>> 24;
            kb >>>= q;
            ib -= q;
            q = Da >>> 16 & 255;
            if (q === 0) {
              la[M++] = Da & 65535;
            } else {
              if (!(q & 16)) {
                if ((q & 64) === 0) {
                  Da = kc[(Da & 65535) + (kb & (1 << q) - 1)];
                  continue b;
                }
                if (q & 32) {
                  h.mode = 12;
                  break a;
                }
                x.msg = "invalid literal/length code";
                h.mode = 30;
                break a;
              }
              var gb = Da & 65535;
              if (q &= 15) {
                if (ib < q) {
                  kb += w[p++] << ib;
                  ib += 8;
                }
                gb += kb & (1 << q) - 1;
                kb >>>= q;
                ib -= q;
              }
              if (ib < 15) {
                kb += w[p++] << ib;
                ib += 8;
                kb += w[p++] << ib;
                ib += 8;
              }
              Da = ma[kb & Ba];
              c: while (true) {
                q = Da >>> 24;
                kb >>>= q;
                ib -= q;
                q = Da >>> 16 & 255;
                if (!(q & 16)) {
                  if ((q & 64) === 0) {
                    Da = ma[(Da & 65535) + (kb & (1 << q) - 1)];
                    continue c;
                  }
                  x.msg = "invalid distance code";
                  h.mode = 30;
                  break a;
                }
                H = Da & 65535;
                q &= 15;
                if (ib < q) {
                  kb += w[p++] << ib;
                  ib += 8;
                  if (ib < q) {
                    kb += w[p++] << ib;
                    ib += 8;
                  }
                }
                H += kb & (1 << q) - 1;
                if (H > ka) {
                  x.msg = "invalid distance too far back";
                  h.mode = 30;
                  break a;
                }
                kb >>>= q;
                ib -= q;
                q = M - F;
                if (H > q) {
                  q = H - q;
                  if (q > Wc && h.sane) {
                    x.msg = "invalid distance too far back";
                    h.mode = 30;
                    break a;
                  }
                  Da = 0;
                  n = Pc;
                  if (va === 0) {
                    Da += fa - q;
                    if (q < gb) {
                      gb -= q;
                      do {
                        la[M++] = Pc[Da++];
                      } while (--q);
                      Da = M - H;
                      n = la;
                    }
                  } else if (va < q) {
                    Da += fa + va - q;
                    q -= va;
                    if (q < gb) {
                      gb -= q;
                      do {
                        la[M++] = Pc[Da++];
                      } while (--q);
                      Da = 0;
                      if (va < gb) {
                        q = va;
                        gb -= q;
                        do {
                          la[M++] = Pc[Da++];
                        } while (--q);
                        Da = M - H;
                        n = la;
                      }
                    }
                  } else {
                    Da += va - q;
                    if (q < gb) {
                      gb -= q;
                      do {
                        la[M++] = Pc[Da++];
                      } while (--q);
                      Da = M - H;
                      n = la;
                    }
                  }
                  while (gb > 2) {
                    la[M++] = n[Da++];
                    la[M++] = n[Da++];
                    la[M++] = n[Da++];
                    gb -= 3;
                  }
                  if (gb) {
                    la[M++] = n[Da++];
                    if (gb > 1) {
                      la[M++] = n[Da++];
                    }
                  }
                } else {
                  Da = M - H;
                  do {
                    la[M++] = la[Da++];
                    la[M++] = la[Da++];
                    la[M++] = la[Da++];
                    gb -= 3;
                  } while (gb > 2);
                  if (gb) {
                    la[M++] = la[Da++];
                    if (gb > 1) {
                      la[M++] = la[Da++];
                    }
                  }
                }
                break;
              }
            }
            break;
          }
        } while (p < r && M < S);
        gb = ib >> 3;
        p -= gb;
        ib -= gb << 3;
        x.next_in = p;
        x.next_out = M;
        x.avail_in = p < r ? 5 + (r - p) : 5 - (p - r);
        x.avail_out = M < S ? 257 + (S - M) : 257 - (M - S);
        h.hold = kb & (1 << ib) - 1;
        h.bits = ib;
      };
    }, {}],
    11: [function (x, F, H) {
      function M(h) {
        return (h >>> 24 & 255) + (h >>> 8 & 65280) + ((h & 65280) << 8) + ((h & 255) << 24);
      }
      function fa() {
        this.mode = 0;
        this.last = false;
        this.wrap = 0;
        this.havedict = false;
        this.total = this.check = this.dmax = this.flags = 0;
        this.head = null;
        this.wnext = this.whave = this.wsize = this.wbits = 0;
        this.window = null;
        this.extra = this.offset = this.length = this.bits = this.hold = 0;
        this.distcode = this.lencode = null;
        this.have = this.ndist = this.nlen = this.ncode = this.distbits = this.lenbits = 0;
        this.next = null;
        this.lens = new Ea.Buf16(320);
        this.work = new Ea.Buf16(288);
        this.distdyn = this.lendyn = null;
        this.was = this.back = this.sane = 0;
      }
      function q(h) {
        var n;
        if (h && h.state) {
          n = h.state;
          h.total_in = h.total_out = n.total = 0;
          h.msg = "";
          if (n.wrap) {
            h.adler = n.wrap & 1;
          }
          n.mode = Pc;
          n.last = 0;
          n.havedict = 0;
          n.dmax = 32768;
          n.head = null;
          n.hold = 0;
          n.bits = 0;
          n.lencode = n.lendyn = new Ea.Buf32(kb);
          n.distcode = n.distdyn = new Ea.Buf32(ib);
          n.sane = 1;
          n.back = -1;
          return Wc;
        } else {
          return va;
        }
      }
      function sa(h) {
        var n;
        if (h && h.state) {
          n = h.state;
          n.wsize = 0;
          n.whave = 0;
          n.wnext = 0;
          return q(h);
        } else {
          return va;
        }
      }
      function n(h, n) {
        var p;
        var q;
        if (h && h.state) {
          q = h.state;
          if (n < 0) {
            p = 0;
            n = -n;
          } else {
            p = (n >> 4) + 1;
            if (n < 48) {
              n &= 15;
            }
          }
          if (n && (n < 8 || n > 15)) {
            return va;
          } else {
            if (q.window !== null && q.wbits !== n) {
              q.window = null;
            }
            q.wrap = p;
            q.wbits = n;
            return sa(h);
          }
        } else {
          return va;
        }
      }
      function h(h, p) {
        var q;
        var r;
        if (h) {
          r = new fa();
          h.state = r;
          r.window = null;
          q = n(h, p);
          if (q !== Wc) {
            h.state = null;
          }
          return q;
        } else {
          return va;
        }
      }
      function p(h, n, p, q) {
        var r;
        h = h.state;
        if (h.window === null) {
          h.wsize = 1 << h.wbits;
          h.wnext = 0;
          h.whave = 0;
          h.window = new Ea.Buf8(h.wsize);
        }
        if (q >= h.wsize) {
          Ea.arraySet(h.window, n, p - h.wsize, h.wsize, 0);
          h.wnext = 0;
          h.whave = h.wsize;
        } else {
          r = h.wsize - h.wnext;
          if (r > q) {
            r = q;
          }
          Ea.arraySet(h.window, n, p - q, r, h.wnext);
          q -= r;
          if (q) {
            Ea.arraySet(h.window, n, p - q, q, 0);
            h.wnext = q;
            h.whave = h.wsize;
          } else {
            h.wnext += r;
            if (h.wnext === h.wsize) {
              h.wnext = 0;
            }
            if (h.whave < h.wsize) {
              h.whave += r;
            }
          }
        }
        return 0;
      }
      var w;
      var r;
      var Ea = x("../utils/common");
      var la = x("./adler32");
      var S = x("./crc32");
      var ka = x("./inffast");
      var wd = x("./inftrees");
      var Wc = 0;
      var va = -2;
      var Pc = 1;
      var kb = 852;
      var ib = 592;
      var kc = true;
      H.inflateReset = sa;
      H.inflateReset2 = n;
      H.inflateResetKeep = q;
      H.inflateInit = function (n) {
        return h(n, 15);
      };
      H.inflateInit2 = h;
      H.inflate = function (h, n) {
        var q;
        var x;
        var F;
        var H;
        var ma;
        var fa;
        var na;
        var sa = 0;
        var Ca = new Ea.Buf8(4);
        var kb = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
        if (!h || !h.state || !h.output || !h.input && h.avail_in !== 0) {
          return va;
        }
        var B = h.state;
        if (B.mode === 12) {
          B.mode = 13;
        }
        var L = h.next_out;
        var mb = h.output;
        var bb = h.avail_out;
        var eb = h.next_in;
        var Fa = h.input;
        var Qa = h.avail_in;
        var ja = B.hold;
        var Z = B.bits;
        var ib = Qa;
        var Rb = bb;
        var fb = Wc;
        a: while (true) {
          switch (B.mode) {
            case Pc:
              if (B.wrap === 0) {
                B.mode = 13;
                break;
              }
              while (Z < 16) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              if (B.wrap & 2 && ja === 35615) {
                B.check = 0;
                Ca[0] = ja & 255;
                Ca[1] = ja >>> 8 & 255;
                B.check = S(B.check, Ca, 2, 0);
                Z = ja = 0;
                B.mode = 2;
                break;
              }
              B.flags = 0;
              if (B.head) {
                B.head.done = false;
              }
              if (!(B.wrap & 1) || (((ja & 255) << 8) + (ja >> 8)) % 31) {
                h.msg = "incorrect header check";
                B.mode = 30;
                break;
              }
              if ((ja & 15) !== 8) {
                h.msg = "unknown compression method";
                B.mode = 30;
                break;
              }
              ja >>>= 4;
              Z -= 4;
              fa = (ja & 15) + 8;
              if (B.wbits === 0) {
                B.wbits = fa;
              } else if (fa > B.wbits) {
                h.msg = "invalid window size";
                B.mode = 30;
                break;
              }
              B.dmax = 1 << fa;
              h.adler = B.check = 1;
              B.mode = ja & 512 ? 10 : 12;
              Z = ja = 0;
              break;
            case 2:
              while (Z < 16) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              B.flags = ja;
              if ((B.flags & 255) !== 8) {
                h.msg = "unknown compression method";
                B.mode = 30;
                break;
              }
              if (B.flags & 57344) {
                h.msg = "unknown header flags set";
                B.mode = 30;
                break;
              }
              if (B.head) {
                B.head.text = ja >> 8 & 1;
              }
              if (B.flags & 512) {
                Ca[0] = ja & 255;
                Ca[1] = ja >>> 8 & 255;
                B.check = S(B.check, Ca, 2, 0);
              }
              Z = ja = 0;
              B.mode = 3;
            case 3:
              while (Z < 32) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              if (B.head) {
                B.head.time = ja;
              }
              if (B.flags & 512) {
                Ca[0] = ja & 255;
                Ca[1] = ja >>> 8 & 255;
                Ca[2] = ja >>> 16 & 255;
                Ca[3] = ja >>> 24 & 255;
                B.check = S(B.check, Ca, 4, 0);
              }
              Z = ja = 0;
              B.mode = 4;
            case 4:
              while (Z < 16) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              if (B.head) {
                B.head.xflags = ja & 255;
                B.head.os = ja >> 8;
              }
              if (B.flags & 512) {
                Ca[0] = ja & 255;
                Ca[1] = ja >>> 8 & 255;
                B.check = S(B.check, Ca, 2, 0);
              }
              Z = ja = 0;
              B.mode = 5;
            case 5:
              if (B.flags & 1024) {
                while (Z < 16) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                B.length = ja;
                if (B.head) {
                  B.head.extra_len = ja;
                }
                if (B.flags & 512) {
                  Ca[0] = ja & 255;
                  Ca[1] = ja >>> 8 & 255;
                  B.check = S(B.check, Ca, 2, 0);
                }
                Z = ja = 0;
              } else if (B.head) {
                B.head.extra = null;
              }
              B.mode = 6;
            case 6:
              if (B.flags & 1024 && (q = B.length, q > Qa && (q = Qa), q && (B.head && (fa = B.head.extra_len - B.length, B.head.extra ||= Array(B.head.extra_len), Ea.arraySet(B.head.extra, Fa, eb, q, fa)), B.flags & 512 && (B.check = S(B.check, Fa, q, eb)), Qa -= q, eb += q, B.length -= q), B.length)) {
                break a;
              }
              B.length = 0;
              B.mode = 7;
            case 7:
              if (B.flags & 2048) {
                if (Qa === 0) {
                  break a;
                }
                q = 0;
                do {
                  fa = Fa[eb + q++];
                  if (B.head && fa && B.length < 65536) {
                    B.head.name += String.fromCharCode(fa);
                  }
                } while (fa && q < Qa);
                if (B.flags & 512) {
                  B.check = S(B.check, Fa, q, eb);
                }
                Qa -= q;
                eb += q;
                if (fa) {
                  break a;
                }
              } else if (B.head) {
                B.head.name = null;
              }
              B.length = 0;
              B.mode = 8;
            case 8:
              if (B.flags & 4096) {
                if (Qa === 0) {
                  break a;
                }
                q = 0;
                do {
                  fa = Fa[eb + q++];
                  if (B.head && fa && B.length < 65536) {
                    B.head.comment += String.fromCharCode(fa);
                  }
                } while (fa && q < Qa);
                if (B.flags & 512) {
                  B.check = S(B.check, Fa, q, eb);
                }
                Qa -= q;
                eb += q;
                if (fa) {
                  break a;
                }
              } else if (B.head) {
                B.head.comment = null;
              }
              B.mode = 9;
            case 9:
              if (B.flags & 512) {
                while (Z < 16) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                if (ja !== (B.check & 65535)) {
                  h.msg = "header crc mismatch";
                  B.mode = 30;
                  break;
                }
                Z = ja = 0;
              }
              if (B.head) {
                B.head.hcrc = B.flags >> 9 & 1;
                B.head.done = true;
              }
              h.adler = B.check = 0;
              B.mode = 12;
              break;
            case 10:
              while (Z < 32) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              h.adler = B.check = M(ja);
              Z = ja = 0;
              B.mode = 11;
            case 11:
              if (B.havedict === 0) {
                h.next_out = L;
                h.avail_out = bb;
                h.next_in = eb;
                h.avail_in = Qa;
                B.hold = ja;
                B.bits = Z;
                return 2;
              }
              h.adler = B.check = 1;
              B.mode = 12;
            case 12:
              if (n === 5 || n === 6) {
                break a;
              }
            case 13:
              if (B.last) {
                ja >>>= Z & 7;
                Z -= Z & 7;
                B.mode = 27;
                break;
              }
              while (Z < 3) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              B.last = ja & 1;
              ja >>>= 1;
              --Z;
              switch (ja & 3) {
                case 0:
                  B.mode = 14;
                  break;
                case 1:
                  var Qb = B;
                  if (kc) {
                    w = new Ea.Buf32(512);
                    r = new Ea.Buf32(32);
                    for (F = 0; F < 144;) {
                      Qb.lens[F++] = 8;
                    }
                    while (F < 256) {
                      Qb.lens[F++] = 9;
                    }
                    while (F < 280) {
                      Qb.lens[F++] = 7;
                    }
                    while (F < 288) {
                      Qb.lens[F++] = 8;
                    }
                    wd(1, Qb.lens, 0, 288, w, 0, Qb.work, {
                      bits: 9
                    });
                    for (F = 0; F < 32;) {
                      Qb.lens[F++] = 5;
                    }
                    wd(2, Qb.lens, 0, 32, r, 0, Qb.work, {
                      bits: 5
                    });
                    kc = false;
                  }
                  Qb.lencode = w;
                  Qb.lenbits = 9;
                  Qb.distcode = r;
                  Qb.distbits = 5;
                  B.mode = 20;
                  if (n === 6) {
                    ja >>>= 2;
                    Z -= 2;
                    break a;
                  }
                  break;
                case 2:
                  B.mode = 17;
                  break;
                case 3:
                  h.msg = "invalid block type";
                  B.mode = 30;
              }
              ja >>>= 2;
              Z -= 2;
              break;
            case 14:
              ja >>>= Z & 7;
              for (Z -= Z & 7; Z < 32;) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              if ((ja & 65535) !== (ja >>> 16 ^ 65535)) {
                h.msg = "invalid stored block lengths";
                B.mode = 30;
                break;
              }
              B.length = ja & 65535;
              ja = 0;
              Z = 0;
              B.mode = 15;
              if (n === 6) {
                break a;
              }
            case 15:
              B.mode = 16;
            case 16:
              if (q = B.length) {
                if (q > Qa) {
                  q = Qa;
                }
                if (q > bb) {
                  q = bb;
                }
                if (q === 0) {
                  break a;
                }
                Ea.arraySet(mb, Fa, eb, q, L);
                Qa -= q;
                eb += q;
                bb -= q;
                L += q;
                B.length -= q;
                break;
              }
              B.mode = 12;
              break;
            case 17:
              while (Z < 14) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              B.nlen = (ja & 31) + 257;
              ja >>>= 5;
              Z -= 5;
              B.ndist = (ja & 31) + 1;
              ja >>>= 5;
              Z -= 5;
              B.ncode = (ja & 15) + 4;
              ja >>>= 4;
              Z -= 4;
              if (B.nlen > 286 || B.ndist > 30) {
                h.msg = "too many length or distance symbols";
                B.mode = 30;
                break;
              }
              B.have = 0;
              B.mode = 18;
            case 18:
              while (B.have < B.ncode) {
                while (Z < 3) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                B.lens[kb[B.have++]] = ja & 7;
                ja >>>= 3;
                Z -= 3;
              }
              while (B.have < 19) {
                B.lens[kb[B.have++]] = 0;
              }
              B.lencode = B.lendyn;
              B.lenbits = 7;
              na = {
                bits: B.lenbits
              };
              fb = wd(0, B.lens, 0, 19, B.lencode, 0, B.work, na);
              B.lenbits = na.bits;
              if (fb) {
                h.msg = "invalid code lengths set";
                B.mode = 30;
                break;
              }
              B.have = 0;
              B.mode = 19;
            case 19:
              while (B.have < B.nlen + B.ndist) {
                while (sa = B.lencode[ja & (1 << B.lenbits) - 1], H = sa >>> 24, Qb = sa & 65535, !(H <= Z)) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                if (Qb < 16) {
                  ja >>>= H;
                  Z -= H;
                  B.lens[B.have++] = Qb;
                } else {
                  if (Qb === 16) {
                    for (F = H + 2; Z < F;) {
                      if (Qa === 0) {
                        break a;
                      }
                      Qa--;
                      ja += Fa[eb++] << Z;
                      Z += 8;
                    }
                    ja >>>= H;
                    Z -= H;
                    if (B.have === 0) {
                      h.msg = "invalid bit length repeat";
                      B.mode = 30;
                      break;
                    }
                    fa = B.lens[B.have - 1];
                    q = 3 + (ja & 3);
                    ja >>>= 2;
                    Z -= 2;
                  } else if (Qb === 17) {
                    for (F = H + 3; Z < F;) {
                      if (Qa === 0) {
                        break a;
                      }
                      Qa--;
                      ja += Fa[eb++] << Z;
                      Z += 8;
                    }
                    ja >>>= H;
                    Z -= H;
                    fa = 0;
                    q = 3 + (ja & 7);
                    ja >>>= 3;
                    Z -= 3;
                  } else {
                    for (F = H + 7; Z < F;) {
                      if (Qa === 0) {
                        break a;
                      }
                      Qa--;
                      ja += Fa[eb++] << Z;
                      Z += 8;
                    }
                    ja >>>= H;
                    Z -= H;
                    fa = 0;
                    q = 11 + (ja & 127);
                    ja >>>= 7;
                    Z -= 7;
                  }
                  if (B.have + q > B.nlen + B.ndist) {
                    h.msg = "invalid bit length repeat";
                    B.mode = 30;
                    break;
                  }
                  while (q--) {
                    B.lens[B.have++] = fa;
                  }
                }
              }
              if (B.mode === 30) {
                break;
              }
              if (B.lens[256] === 0) {
                h.msg = "invalid code -- missing end-of-block";
                B.mode = 30;
                break;
              }
              B.lenbits = 9;
              na = {
                bits: B.lenbits
              };
              fb = wd(1, B.lens, 0, B.nlen, B.lencode, 0, B.work, na);
              B.lenbits = na.bits;
              if (fb) {
                h.msg = "invalid literal/lengths set";
                B.mode = 30;
                break;
              }
              B.distbits = 6;
              B.distcode = B.distdyn;
              na = {
                bits: B.distbits
              };
              fb = wd(2, B.lens, B.nlen, B.ndist, B.distcode, 0, B.work, na);
              B.distbits = na.bits;
              if (fb) {
                h.msg = "invalid distances set";
                B.mode = 30;
                break;
              }
              B.mode = 20;
              if (n === 6) {
                break a;
              }
            case 20:
              B.mode = 21;
            case 21:
              if (Qa >= 6 && bb >= 258) {
                h.next_out = L;
                h.avail_out = bb;
                h.next_in = eb;
                h.avail_in = Qa;
                B.hold = ja;
                B.bits = Z;
                ka(h, Rb);
                L = h.next_out;
                mb = h.output;
                bb = h.avail_out;
                eb = h.next_in;
                Fa = h.input;
                Qa = h.avail_in;
                ja = B.hold;
                Z = B.bits;
                if (B.mode === 12) {
                  B.back = -1;
                }
                break;
              }
              for (B.back = 0; sa = B.lencode[ja & (1 << B.lenbits) - 1], H = sa >>> 24, F = sa >>> 16 & 255, Qb = sa & 65535, !(H <= Z);) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              if (F && (F & 240) === 0) {
                var u = H;
                var wb = F;
                for (ma = Qb; sa = B.lencode[ma + ((ja & (1 << u + wb) - 1) >> u)], H = sa >>> 24, F = sa >>> 16 & 255, Qb = sa & 65535, !(u + H <= Z);) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                ja >>>= u;
                Z -= u;
                B.back += u;
              }
              ja >>>= H;
              Z -= H;
              B.back += H;
              B.length = Qb;
              if (F === 0) {
                B.mode = 26;
                break;
              }
              if (F & 32) {
                B.back = -1;
                B.mode = 12;
                break;
              }
              if (F & 64) {
                h.msg = "invalid literal/length code";
                B.mode = 30;
                break;
              }
              B.extra = F & 15;
              B.mode = 22;
            case 22:
              if (B.extra) {
                for (F = B.extra; Z < F;) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                B.length += ja & (1 << B.extra) - 1;
                ja >>>= B.extra;
                Z -= B.extra;
                B.back += B.extra;
              }
              B.was = B.length;
              B.mode = 23;
            case 23:
              while (sa = B.distcode[ja & (1 << B.distbits) - 1], H = sa >>> 24, F = sa >>> 16 & 255, Qb = sa & 65535, !(H <= Z)) {
                if (Qa === 0) {
                  break a;
                }
                Qa--;
                ja += Fa[eb++] << Z;
                Z += 8;
              }
              if ((F & 240) === 0) {
                u = H;
                wb = F;
                for (ma = Qb; sa = B.distcode[ma + ((ja & (1 << u + wb) - 1) >> u)], H = sa >>> 24, F = sa >>> 16 & 255, Qb = sa & 65535, !(u + H <= Z);) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                ja >>>= u;
                Z -= u;
                B.back += u;
              }
              ja >>>= H;
              Z -= H;
              B.back += H;
              if (F & 64) {
                h.msg = "invalid distance code";
                B.mode = 30;
                break;
              }
              B.offset = Qb;
              B.extra = F & 15;
              B.mode = 24;
            case 24:
              if (B.extra) {
                for (F = B.extra; Z < F;) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                B.offset += ja & (1 << B.extra) - 1;
                ja >>>= B.extra;
                Z -= B.extra;
                B.back += B.extra;
              }
              if (B.offset > B.dmax) {
                h.msg = "invalid distance too far back";
                B.mode = 30;
                break;
              }
              B.mode = 25;
            case 25:
              if (bb === 0) {
                break a;
              }
              q = Rb - bb;
              if (B.offset > q) {
                q = B.offset - q;
                if (q > B.whave && B.sane) {
                  h.msg = "invalid distance too far back";
                  B.mode = 30;
                  break;
                }
                if (q > B.wnext) {
                  q -= B.wnext;
                  x = B.wsize - q;
                } else {
                  x = B.wnext - q;
                }
                if (q > B.length) {
                  q = B.length;
                }
                F = B.window;
              } else {
                F = mb;
                x = L - B.offset;
                q = B.length;
              }
              if (q > bb) {
                q = bb;
              }
              bb -= q;
              B.length -= q;
              do {
                mb[L++] = F[x++];
              } while (--q);
              if (B.length === 0) {
                B.mode = 21;
              }
              break;
            case 26:
              if (bb === 0) {
                break a;
              }
              mb[L++] = B.length;
              bb--;
              B.mode = 21;
              break;
            case 27:
              if (B.wrap) {
                while (Z < 32) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja |= Fa[eb++] << Z;
                  Z += 8;
                }
                Rb -= bb;
                h.total_out += Rb;
                B.total += Rb;
                if (Rb) {
                  h.adler = B.check = B.flags ? S(B.check, mb, Rb, L - Rb) : la(B.check, mb, Rb, L - Rb);
                }
                Rb = bb;
                if ((B.flags ? ja : M(ja)) !== B.check) {
                  h.msg = "incorrect data check";
                  B.mode = 30;
                  break;
                }
                Z = ja = 0;
              }
              B.mode = 28;
            case 28:
              if (B.wrap && B.flags) {
                while (Z < 32) {
                  if (Qa === 0) {
                    break a;
                  }
                  Qa--;
                  ja += Fa[eb++] << Z;
                  Z += 8;
                }
                if (ja !== (B.total & -1)) {
                  h.msg = "incorrect length check";
                  B.mode = 30;
                  break;
                }
                Z = ja = 0;
              }
              B.mode = 29;
            case 29:
              fb = 1;
              break a;
            case 30:
              fb = -3;
              break a;
            case 31:
              return -4;
            default:
              return va;
          }
        }
        h.next_out = L;
        h.avail_out = bb;
        h.next_in = eb;
        h.avail_in = Qa;
        B.hold = ja;
        B.bits = Z;
        if ((B.wsize || Rb !== h.avail_out && B.mode < 30 && (B.mode < 27 || n !== 4)) && p(h, h.output, h.next_out, Rb - h.avail_out)) {
          B.mode = 31;
          return -4;
        } else {
          ib -= h.avail_in;
          Rb -= h.avail_out;
          h.total_in += ib;
          h.total_out += Rb;
          B.total += Rb;
          if (B.wrap && Rb) {
            h.adler = B.check = B.flags ? S(B.check, mb, Rb, h.next_out - Rb) : la(B.check, mb, Rb, h.next_out - Rb);
          }
          h.data_type = B.bits + (B.last ? 64 : 0) + (B.mode === 12 ? 128 : 0) + (B.mode === 20 || B.mode === 15 ? 256 : 0);
          if ((ib === 0 && Rb === 0 || n === 4) && fb === Wc) {
            fb = -5;
          }
          return fb;
        }
      };
      H.inflateEnd = function (h) {
        if (!h || !h.state) {
          return va;
        }
        var n = h.state;
        n.window &&= null;
        h.state = null;
        return Wc;
      };
      H.inflateGetHeader = function (h, n) {
        var p;
        if (h && h.state) {
          p = h.state;
          if ((p.wrap & 2) === 0) {
            return va;
          } else {
            p.head = n;
            n.done = false;
            return Wc;
          }
        } else {
          return va;
        }
      };
      H.inflateSetDictionary = function (h, n) {
        var q;
        var r;
        var w = n.length;
        if (h && h.state) {
          q = h.state;
          if (q.wrap !== 0 && q.mode !== 11) {
            return va;
          } else if (q.mode === 11 && (r = 1, r = la(r, n, w, 0), r !== q.check)) {
            return -3;
          } else if (p(h, n, w, w)) {
            q.mode = 31;
            return -4;
          } else {
            q.havedict = 1;
            return Wc;
          }
        } else {
          return va;
        }
      };
      H.inflateInfo = "pako inflate (from Nodeca project)";
    }, {
      "../utils/common": 3,
      "./adler32": 5,
      "./crc32": 7,
      "./inffast": 10,
      "./inftrees": 12
    }],
    12: [function (x, F, H) {
      var M = x("../utils/common");
      var fa = [3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0];
      var q = [16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78];
      var sa = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0];
      var n = [16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64];
      F.exports = function (h, p, w, r, x, F, H, ka) {
        var S;
        var la;
        var va;
        var Ea;
        var kb;
        var ib;
        var kc = ka.bits;
        var ma;
        var mb;
        var Ba;
        var Da;
        var gb;
        var Ra = 0;
        var Zb;
        var yd = null;
        var na = 0;
        var ub = new M.Buf16(16);
        var Ca = new M.Buf16(16);
        var oc = null;
        var B = 0;
        for (ma = 0; ma <= 15; ma++) {
          ub[ma] = 0;
        }
        for (mb = 0; mb < r; mb++) {
          ub[p[w + mb]]++;
        }
        var L = kc;
        for (Ba = 15; Ba >= 1 && ub[Ba] === 0; Ba--);
        if (L > Ba) {
          L = Ba;
        }
        if (Ba === 0) {
          x[F++] = 20971520;
          x[F++] = 20971520;
          ka.bits = 1;
          return 0;
        }
        for (kc = 1; kc < Ba && ub[kc] === 0; kc++);
        if (L < kc) {
          L = kc;
        }
        for (ma = S = 1; ma <= 15; ma++) {
          S <<= 1;
          S -= ub[ma];
          if (S < 0) {
            return -1;
          }
        }
        if (S > 0 && (h === 0 || Ba !== 1)) {
          return -1;
        }
        Ca[1] = 0;
        for (ma = 1; ma < 15; ma++) {
          Ca[ma + 1] = Ca[ma] + ub[ma];
        }
        for (mb = 0; mb < r; mb++) {
          if (p[w + mb] !== 0) {
            H[Ca[p[w + mb]]++] = mb;
          }
        }
        if (h === 0) {
          yd = oc = H;
          Ea = 19;
        } else if (h === 1) {
          yd = fa;
          na -= 257;
          oc = q;
          B -= 257;
          Ea = 256;
        } else {
          yd = sa;
          oc = n;
          Ea = -1;
        }
        Zb = 0;
        mb = 0;
        ma = kc;
        Ca = F;
        Da = L;
        gb = 0;
        va = -1;
        Ra = 1 << L;
        r = Ra - 1;
        if (h === 1 && Ra > 852 || h === 2 && Ra > 592) {
          return 1;
        }
        var uf = 0;
        while (true) {
          uf++;
          var bb = ma - gb;
          if (H[mb] < Ea) {
            kb = 0;
            ib = H[mb];
          } else if (H[mb] > Ea) {
            kb = oc[B + H[mb]];
            ib = yd[na + H[mb]];
          } else {
            kb = 96;
            ib = 0;
          }
          S = 1 << ma - gb;
          kc = la = 1 << Da;
          do {
            la -= S;
            x[Ca + (Zb >> gb) + la] = bb << 24 | kb << 16 | ib | 0;
          } while (la !== 0);
          for (S = 1 << ma - 1; Zb & S;) {
            S >>= 1;
          }
          if (S !== 0) {
            Zb &= S - 1;
            Zb += S;
          } else {
            Zb = 0;
          }
          mb++;
          if (--ub[ma] === 0) {
            if (ma === Ba) {
              break;
            }
            ma = p[w + H[mb]];
          }
          if (ma > L && (Zb & r) !== va) {
            if (gb === 0) {
              gb = L;
            }
            Ca += kc;
            Da = ma - gb;
            for (S = 1 << Da; Da + gb < Ba && (S -= ub[Da + gb], !(S <= 0));) {
              Da++;
              S <<= 1;
            }
            Ra += 1 << Da;
            if (h === 1 && Ra > 852 || h === 2 && Ra > 592) {
              return 1;
            }
            va = Zb & r;
            x[va] = L << 24 | Da << 16 | Ca - F | 0;
          }
        }
        if (Zb !== 0) {
          x[Ca + Zb] = ma - gb << 24 | 4194304;
        }
        ka.bits = L;
        return 0;
      };
    }, {
      "../utils/common": 3
    }],
    13: [function (x, F, H) {
      F.exports = {
        2: "need dictionary",
        1: "stream end",
        0: "",
        "-1": "file error",
        "-2": "stream error",
        "-3": "data error",
        "-4": "insufficient memory",
        "-5": "buffer error",
        "-6": "incompatible version"
      };
    }, {}],
    14: [function (x, F, H) {
      function M(h) {
        for (var n = h.length; --n >= 0;) {
          h[n] = 0;
        }
      }
      function fa(h, n, p, q, r) {
        this.static_tree = h;
        this.extra_bits = n;
        this.extra_base = p;
        this.elems = q;
        this.max_length = r;
        this.has_stree = h && h.length;
      }
      function q(h, n) {
        this.dyn_tree = h;
        this.max_code = 0;
        this.stat_desc = n;
      }
      function sa(h, n) {
        h.pending_buf[h.pending++] = n & 255;
        h.pending_buf[h.pending++] = n >>> 8 & 255;
      }
      function n(h, n, p) {
        if (h.bi_valid > na - p) {
          h.bi_buf |= n << h.bi_valid & 65535;
          sa(h, h.bi_buf);
          h.bi_buf = n >> na - h.bi_valid;
          h.bi_valid += p - na;
        } else {
          h.bi_buf |= n << h.bi_valid & 65535;
          h.bi_valid += p;
        }
      }
      function h(h, p, q) {
        n(h, q[p * 2], q[p * 2 + 1]);
      }
      function p(h, n) {
        var p = 0;
        do {
          p |= h & 1;
          h >>>= 1;
          p <<= 1;
        } while (--n > 0);
        return p >>> 1;
      }
      function w(h, n, q) {
        var r;
        var u = Array(yd + 1);
        var w = 0;
        for (r = 1; r <= yd; r++) {
          u[r] = w = w + q[r - 1] << 1;
        }
        for (q = 0; q <= n; q++) {
          r = h[q * 2 + 1];
          if (r !== 0) {
            h[q * 2] = p(u[r]++, r);
          }
        }
      }
      function r(h) {
        var n;
        for (n = 0; n < Da; n++) {
          h.dyn_ltree[n * 2] = 0;
        }
        for (n = 0; n < gb; n++) {
          h.dyn_dtree[n * 2] = 0;
        }
        for (n = 0; n < Ra; n++) {
          h.bl_tree[n * 2] = 0;
        }
        h.dyn_ltree[ub * 2] = 1;
        h.opt_len = h.static_len = 0;
        h.last_lit = h.matches = 0;
      }
      function Ea(h) {
        if (h.bi_valid > 8) {
          sa(h, h.bi_buf);
        } else if (h.bi_valid > 0) {
          h.pending_buf[h.pending++] = h.bi_buf;
        }
        h.bi_buf = 0;
        h.bi_valid = 0;
      }
      function la(h, n, p, q) {
        var r = n * 2;
        var u = p * 2;
        return h[r] < h[u] || h[r] === h[u] && q[n] <= q[p];
      }
      function S(h, n, p) {
        for (var q = h.heap[p], r = p << 1; r <= h.heap_len && (r < h.heap_len && la(n, h.heap[r + 1], h.heap[r], h.depth) && r++, !la(n, q, h.heap[r], h.depth));) {
          h.heap[p] = h.heap[r];
          p = r;
          r <<= 1;
        }
        h.heap[p] = q;
      }
      function ka(p, q, r) {
        var u;
        var w;
        var x = 0;
        if (p.last_lit !== 0) {
          do {
            var v = p.pending_buf[p.d_buf + x * 2] << 8 | p.pending_buf[p.d_buf + x * 2 + 1];
            var B = p.pending_buf[p.l_buf + x];
            x++;
            if (v === 0) {
              h(p, B, q);
            } else {
              u = Z[B];
              h(p, u + Ba + 1, q);
              w = L[u];
              if (w !== 0) {
                B -= te[u];
                n(p, B, w);
              }
              v--;
              u = v < 256 ? ja[v] : ja[256 + (v >>> 7)];
              h(p, u, r);
              w = uf[u];
              if (w !== 0) {
                v -= Rb[u];
                n(p, v, w);
              }
            }
          } while (x < p.last_lit);
        }
        h(p, ub, q);
      }
      function wd(h, n) {
        var p;
        var q = n.dyn_tree;
        var r = n.stat_desc.static_tree;
        var u = n.stat_desc.has_stree;
        var v = n.stat_desc.elems;
        var x = -1;
        h.heap_len = 0;
        h.heap_max = Zb;
        for (p = 0; p < v; p++) {
          if (q[p * 2] !== 0) {
            h.heap[++h.heap_len] = x = p;
            h.depth[p] = 0;
          } else {
            q[p * 2 + 1] = 0;
          }
        }
        while (h.heap_len < 2) {
          var B = h.heap[++h.heap_len] = x < 2 ? ++x : 0;
          q[B * 2] = 1;
          h.depth[B] = 0;
          h.opt_len--;
          if (u) {
            h.static_len -= r[B * 2 + 1];
          }
        }
        n.max_code = x;
        for (p = h.heap_len >> 1; p >= 1; p--) {
          S(h, q, p);
        }
        B = v;
        do {
          p = h.heap[1];
          h.heap[1] = h.heap[h.heap_len--];
          S(h, q, 1);
          r = h.heap[1];
          h.heap[--h.heap_max] = p;
          h.heap[--h.heap_max] = r;
          q[B * 2] = q[p * 2] + q[r * 2];
          h.depth[B] = (h.depth[p] >= h.depth[r] ? h.depth[p] : h.depth[r]) + 1;
          q[p * 2 + 1] = q[r * 2 + 1] = B;
          h.heap[1] = B++;
          S(h, q, 1);
        } while (h.heap_len >= 2);
        h.heap[--h.heap_max] = h.heap[1];
        var F;
        var H;
        p = n.dyn_tree;
        B = n.max_code;
        v = n.stat_desc.static_tree;
        var L = n.stat_desc.has_stree;
        var M = n.stat_desc.extra_bits;
        var Y = n.stat_desc.extra_base;
        var La = n.stat_desc.max_length;
        var C = 0;
        for (u = 0; u <= yd; u++) {
          h.bl_count[u] = 0;
        }
        p[h.heap[h.heap_max] * 2 + 1] = 0;
        for (n = h.heap_max + 1; n < Zb; n++) {
          r = h.heap[n];
          u = p[p[r * 2 + 1] * 2 + 1] + 1;
          if (u > La) {
            u = La;
            C++;
          }
          p[r * 2 + 1] = u;
          if (!(r > B)) {
            h.bl_count[u]++;
            F = 0;
            if (r >= Y) {
              F = M[r - Y];
            }
            H = p[r * 2];
            h.opt_len += H * (u + F);
            if (L) {
              h.static_len += H * (v[r * 2 + 1] + F);
            }
          }
        }
        if (C !== 0) {
          do {
            for (u = La - 1; h.bl_count[u] === 0;) {
              u--;
            }
            h.bl_count[u]--;
            h.bl_count[u + 1] += 2;
            h.bl_count[La]--;
            C -= 2;
          } while (C > 0);
          for (u = La; u !== 0; u--) {
            for (r = h.bl_count[u]; r !== 0;) {
              F = h.heap[--n];
              if (!(F > B)) {
                if (p[F * 2 + 1] !== u) {
                  h.opt_len += (u - p[F * 2 + 1]) * p[F * 2];
                  p[F * 2 + 1] = u;
                }
                r--;
              }
            }
          }
        }
        w(q, x, h.bl_count);
      }
      function Wc(h, n, p) {
        var q;
        var r = -1;
        var u = n[1];
        var v = 0;
        var w = 7;
        var x = 4;
        if (u === 0) {
          w = 138;
          x = 3;
        }
        n[(p + 1) * 2 + 1] = 65535;
        for (q = 0; q <= p; q++) {
          var F = u;
          u = n[(q + 1) * 2 + 1];
          if (!(++v < w) || F !== u) {
            if (v < x) {
              h.bl_tree[F * 2] += v;
            } else if (F !== 0) {
              if (F !== r) {
                h.bl_tree[F * 2]++;
              }
              h.bl_tree[Ca * 2]++;
            } else if (v <= 10) {
              h.bl_tree[oc * 2]++;
            } else {
              h.bl_tree[B * 2]++;
            }
            v = 0;
            r = F;
            if (u === 0) {
              w = 138;
              x = 3;
            } else if (F === u) {
              w = 6;
              x = 3;
            } else {
              w = 7;
              x = 4;
            }
          }
        }
      }
      function va(p, q, r) {
        var u;
        var w;
        var x = -1;
        var v = q[1];
        var F = 0;
        var H = 7;
        var L = 4;
        if (v === 0) {
          H = 138;
          L = 3;
        }
        for (u = 0; u <= r; u++) {
          w = v;
          v = q[(u + 1) * 2 + 1];
          if (!(++F < H) || w !== v) {
            if (F < L) {
              do {
                h(p, w, p.bl_tree);
              } while (--F !== 0);
            } else if (w !== 0) {
              if (w !== x) {
                h(p, w, p.bl_tree);
                F--;
              }
              h(p, Ca, p.bl_tree);
              n(p, F - 3, 2);
            } else if (F <= 10) {
              h(p, oc, p.bl_tree);
              n(p, F - 3, 3);
            } else {
              h(p, B, p.bl_tree);
              n(p, F - 11, 7);
            }
            F = 0;
            x = w;
            if (v === 0) {
              H = 138;
              L = 3;
            } else if (w === v) {
              H = 6;
              L = 3;
            } else {
              H = 7;
              L = 4;
            }
          }
        }
      }
      function Pc(h) {
        var n;
        var p = 4093624447;
        for (n = 0; n <= 31; n++, p >>>= 1) {
          if (p & 1 && h.dyn_ltree[n * 2] !== 0) {
            return kc;
          }
        }
        if (h.dyn_ltree[18] !== 0 || h.dyn_ltree[20] !== 0 || h.dyn_ltree[26] !== 0) {
          return ma;
        }
        for (n = 32; n < Ba; n++) {
          if (h.dyn_ltree[n * 2] !== 0) {
            return ma;
          }
        }
        return kc;
      }
      function kb(h, p, q, r) {
        n(h, (mb << 1) + (r ? 1 : 0), 3);
        Ea(h);
        sa(h, q);
        sa(h, ~q);
        ib.arraySet(h.pending_buf, h.window, p, q, h.pending);
        h.pending += q;
      }
      var ib = x("../utils/common");
      var kc = 0;
      var ma = 1;
      var mb = 0;
      var Ba = 256;
      var Da = Ba + 1 + 29;
      var gb = 30;
      var Ra = 19;
      var Zb = Da * 2 + 1;
      var yd = 15;
      var na = 16;
      var ub = 256;
      var Ca = 16;
      var oc = 17;
      var B = 18;
      var L = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0];
      var uf = [0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13];
      var bb = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7];
      var eb = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];
      var Fa = Array((Da + 2) * 2);
      M(Fa);
      var Qa = Array(gb * 2);
      M(Qa);
      var ja = Array(512);
      M(ja);
      var Z = Array(256);
      M(Z);
      var te = Array(29);
      M(te);
      var Rb = Array(gb);
      M(Rb);
      var fb;
      var Qb;
      var u;
      var wb = false;
      H._tr_init = function (h) {
        if (!wb) {
          var n;
          var x;
          var y;
          var B = Array(yd + 1);
          for (y = x = 0; y < 28; y++) {
            te[y] = x;
            n = 0;
            for (; n < 1 << L[y]; n++) {
              Z[x++] = y;
            }
          }
          Z[x - 1] = y;
          for (y = x = 0; y < 16; y++) {
            Rb[y] = x;
            n = 0;
            for (; n < 1 << uf[y]; n++) {
              ja[x++] = y;
            }
          }
          for (x >>= 7; y < gb; y++) {
            Rb[y] = x << 7;
            n = 0;
            for (; n < 1 << uf[y] - 7; n++) {
              ja[256 + x++] = y;
            }
          }
          for (n = 0; n <= yd; n++) {
            B[n] = 0;
          }
          for (n = 0; n <= 143;) {
            Fa[n * 2 + 1] = 8;
            n++;
            B[8]++;
          }
          while (n <= 255) {
            Fa[n * 2 + 1] = 9;
            n++;
            B[9]++;
          }
          while (n <= 279) {
            Fa[n * 2 + 1] = 7;
            n++;
            B[7]++;
          }
          while (n <= 287) {
            Fa[n * 2 + 1] = 8;
            n++;
            B[8]++;
          }
          w(Fa, Da + 1, B);
          for (n = 0; n < gb; n++) {
            Qa[n * 2 + 1] = 5;
            Qa[n * 2] = p(n, 5);
          }
          fb = new fa(Fa, L, Ba + 1, Da, yd);
          Qb = new fa(Qa, uf, 0, gb, yd);
          u = new fa([], bb, 0, Ra, 7);
          wb = true;
        }
        h.l_desc = new q(h.dyn_ltree, fb);
        h.d_desc = new q(h.dyn_dtree, Qb);
        h.bl_desc = new q(h.bl_tree, u);
        h.bi_buf = 0;
        h.bi_valid = 0;
        r(h);
      };
      H._tr_stored_block = kb;
      H._tr_flush_block = function (h, p, q, u) {
        var w = 0;
        if (h.level > 0) {
          if (h.strm.data_type === 2) {
            h.strm.data_type = Pc(h);
          }
          wd(h, h.l_desc);
          wd(h, h.d_desc);
          Wc(h, h.dyn_ltree, h.l_desc.max_code);
          Wc(h, h.dyn_dtree, h.d_desc.max_code);
          wd(h, h.bl_desc);
          for (w = Ra - 1; w >= 3 && h.bl_tree[eb[w] * 2 + 1] === 0; w--);
          h.opt_len += (w + 1) * 3 + 14;
          w = w;
          var x = h.opt_len + 3 + 7 >>> 3;
          var v = h.static_len + 3 + 7 >>> 3;
          if (v <= x) {
            x = v;
          }
        } else {
          x = v = q + 5;
        }
        if (q + 4 <= x && p !== -1) {
          kb(h, p, q, u);
        } else if (h.strategy === 4 || v === x) {
          n(h, 2 + (u ? 1 : 0), 3);
          ka(h, Fa, Qa);
        } else {
          n(h, 4 + (u ? 1 : 0), 3);
          p = h.l_desc.max_code + 1;
          q = h.d_desc.max_code + 1;
          w += 1;
          n(h, p - 257, 5);
          n(h, q - 1, 5);
          n(h, w - 4, 4);
          for (x = 0; x < w; x++) {
            n(h, h.bl_tree[eb[x] * 2 + 1], 3);
          }
          va(h, h.dyn_ltree, p - 1);
          va(h, h.dyn_dtree, q - 1);
          ka(h, h.dyn_ltree, h.dyn_dtree);
        }
        r(h);
        if (u) {
          Ea(h);
        }
      };
      H._tr_tally = function (h, n, p) {
        h.pending_buf[h.d_buf + h.last_lit * 2] = n >>> 8 & 255;
        h.pending_buf[h.d_buf + h.last_lit * 2 + 1] = n & 255;
        h.pending_buf[h.l_buf + h.last_lit] = p & 255;
        h.last_lit++;
        if (n === 0) {
          h.dyn_ltree[p * 2]++;
        } else {
          h.matches++;
          n--;
          h.dyn_ltree[(Z[p] + Ba + 1) * 2]++;
          h.dyn_dtree[(n < 256 ? ja[n] : ja[256 + (n >>> 7)]) * 2]++;
        }
        return h.last_lit === h.lit_bufsize - 1;
      };
      H._tr_align = function (p) {
        n(p, 2, 3);
        h(p, ub, Fa);
        if (p.bi_valid === 16) {
          sa(p, p.bi_buf);
          p.bi_buf = 0;
          p.bi_valid = 0;
        } else if (p.bi_valid >= 8) {
          p.pending_buf[p.pending++] = p.bi_buf & 255;
          p.bi_buf >>= 8;
          p.bi_valid -= 8;
        }
      };
    }, {
      "../utils/common": 3
    }],
    15: [function (x, F, H) {
      F.exports = function () {
        this.input = null;
        this.total_in = this.avail_in = this.next_in = 0;
        this.output = null;
        this.total_out = this.avail_out = this.next_out = 0;
        this.msg = "";
        this.state = null;
        this.data_type = 2;
        this.adler = 0;
      };
    }, {}],
    "/": [function (x, F, H) {
      H = x("./lib/utils/common").assign;
      var M = x("./lib/deflate");
      var fa = x("./lib/inflate");
      x = x("./lib/zlib/constants");
      var q = {};
      H(q, M, fa, x);
      F.exports = q;
    }, {
      "./lib/deflate": 1,
      "./lib/inflate": 2,
      "./lib/utils/common": 3,
      "./lib/zlib/constants": 6
    }]
  }, {}, [])("/");
});
var saveAs = saveAs || function (qa) {
  if (typeof qa !== "undefined" && (typeof navigator === "undefined" || !/MSIE [1-9]\./.test(navigator.userAgent))) {
    var x = qa.document.createElementNS("http://www.w3.org/1999/xhtml", "a");
    var F = "download" in x;
    var H = /constructor/i.test(qa.HTMLElement) || qa.safari;
    var M = /CriOS\/[\d]+/.test(navigator.userAgent);
    function fa(h) {
      (qa.setImmediate || qa.setTimeout)(function () {
        throw h;
      }, 0);
    }
    function q(h) {
      setTimeout(function () {
        if (typeof h === "string") {
          (qa.URL || qa.webkitURL || qa).revokeObjectURL(h);
        } else {
          h.remove();
        }
      }, 40000);
    }
    function sa(h) {
      if (/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)) {
        return new Blob([String.fromCharCode(65279), h], {
          type: h.type
        });
      } else {
        return h;
      }
    }
    function n(h, n, r) {
      if (!r) {
        h = sa(h);
      }
      var p = this;
      var w = h.type === "application/octet-stream";
      function S() {
        var h = ["writestart", "progress", "write", "writeend"];
        h = [].concat(h);
        for (var n = h.length; n--;) {
          var q = p["on" + h[n]];
          if (typeof q === "function") {
            try {
              q.call(p, p);
            } catch (Pc) {
              fa(Pc);
            }
          }
        }
      }
      p.readyState = p.INIT;
      if (F) {
        var ka = (qa.URL || qa.webkitURL || qa).createObjectURL(h);
        setTimeout(function () {
          x.href = ka;
          x.download = n;
          var h = new MouseEvent("click");
          x.dispatchEvent(h);
          S();
          q(ka);
          p.readyState = p.DONE;
        });
      } else {
        (function () {
          if ((M || w && H) && qa.FileReader) {
            var n = new FileReader();
            n.onloadend = function () {
              var h = M ? n.result : n.result.replace(/^data:[^;]*;/, "data:attachment/file;");
              if (!qa.open(h, "_blank")) {
                qa.location.href = h;
              }
              p.readyState = p.DONE;
              S();
            };
            n.readAsDataURL(h);
            p.readyState = p.INIT;
          } else {
            ka ||= (qa.URL || qa.webkitURL || qa).createObjectURL(h);
            if (w) {
              qa.location.href = ka;
            } else if (!qa.open(ka, "_blank")) {
              qa.location.href = ka;
            }
            p.readyState = p.DONE;
            S();
            q(ka);
          }
        })();
      }
    }
    var h = n.prototype;
    if (typeof navigator !== "undefined" && navigator.msSaveOrOpenBlob) {
      return function (h, n, q) {
        n = n || h.name || "download";
        if (!q) {
          h = sa(h);
        }
        return navigator.msSaveOrOpenBlob(h, n);
      };
    }
    h.abort = function () {};
    h.readyState = h.INIT = 0;
    h.WRITING = 1;
    h.DONE = 2;
    h.error = h.onwritestart = h.onprogress = h.onwrite = h.onabort = h.onerror = h.onwriteend = null;
    return function (h, q, r) {
      return new n(h, q || h.name || "download", r);
    };
  }
}(typeof self !== "undefined" && self || typeof window !== "undefined" && window || this.content);
if (typeof module !== "undefined" && module.exports) {
  module.exports.saveAs = saveAs;
} else if (typeof define !== "undefined" && define !== null && define.amd !== null) {
  define("FileSaver.js", function () {
    return saveAs;
  });
}
if (typeof define == "function" && define.__amd) {
  define.amd = define.__amd;
  delete define.__amd;
}